/*! For license information please see p__editor__routers__doc.13c21dce.async.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[109,5,7,8,9,10,11,32],[,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return kt})),n.d(t,"b",(function(){return sr})),n.d(t,"c",(function(){return Or})),n.d(t,"d",(function(){return Oo})),n.d(t,"f",(function(){return Pa})),n.d(t,"g",(function(){return ir})),n.d(t,"i",(function(){return er})),n.d(t,"j",(function(){return Tr})),n.d(t,"k",(function(){return $t})),n.d(t,"l",(function(){return Cn})),n.d(t,"m",(function(){return ta})),n.d(t,"n",(function(){return Ke})),n.d(t,"o",(function(){return na})),n.d(t,"p",(function(){return Jr})),n.d(t,"q",(function(){return Nr})),n.d(t,"r",(function(){return Qt})),n.d(t,"t",(function(){return Rc}));var r=n(25);n.d(t,"e",(function(){return r.EXTS})),n.d(t,"h",(function(){return r.FileUtils})),n.d(t,"u",(function(){return r.ua}));var a=n(44),i=n.n(a),o=n(8),c=n.n(o),l=n(9),s=n.n(l),u=n(264),d=n.n(u),f=n(20),p=n.n(f),h=n(3),m=n.n(h),g=n(81),v=n.n(g),y=n(285),b=n.n(y),k=n(29),w=n.n(k),x=n(396),_=n.n(x),C=n(140),E=n.n(C),O=n(68),S=n.n(O),R=n(928),D=n.n(R),A=n(929),T=n.n(A),P=n(930),j=n.n(P),M=n(931),N=n.n(M),L=n(932),I=n.n(L),z=n(933),B=n.n(z),F=n(934),V=n.n(F),U=n(935),q=n.n(U),H=n(936),W=n.n(H),Y=n(351),G=n(54),K=n.n(G),X=n(88),$=n.n(X),Z=n(79),Q=n.n(Z),J=n(637),ee=n.n(J),te=n(147),ne=n.n(te),re=n(12),ae=n.n(re),ie=n(14),oe=n.n(ie),ce=n(4),le=n.n(ce),se=n(5),ue=n.n(se),de=n(398),fe=n.n(de),pe=n(95),he=n.n(pe);!function(e,t){void 0===t&&(t={});var n=t.insertAt;if("undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}('.lake-ui-button {\n  line-height: 1.499;\n  display: inline-block;\n  font-weight: 400;\n  text-align: center;\n  cursor: pointer;\n  border: 1px solid transparent;\n  white-space: nowrap;\n  padding: 0 15px;\n  font-size: 14px;\n  border-radius: 4px;\n  height: 30px;\n  user-select: none;\n  transition: all 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);\n  position: relative;\n  box-shadow: 0 2px 0 rgba(0, 0, 0, 0.015);\n  color: rgba(0, 0, 0, 0.65);\n  background-color: #fff;\n  border-color: #d9d9d9;\n  color: #fff;\n  background-color: #25b864;\n  border-color: #25b864;\n  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.12);\n  outline: 0;\n}\n.lake-ui-button:hover {\n  background-color: #47c479;\n  border-color: #47c479;\n}\n.lake-card-dnd {\n  position: absolute;\n  top: 0;\n  left: -21px;\n  right: auto;\n  bottom: auto;\n  width: 18px;\n  height: 24px;\n  line-height: 24px;\n  font-size: 14px;\n  font-weight: normal;\n  display: none;\n  opacity: 0;\n  transition: all 0.3s ease-in-out;\n  background: rgba(255, 255, 255, 0.9);\n}\n.lake-card-dnd-trigger {\n  width: 18px;\n  height: 24px;\n  text-align: center;\n  color: #BFBFBF;\n  font-size: 16px;\n  border-radius: 2px 2px;\n  cursor: move;\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n.lake-card-dnd-trigger-isdraging {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n}\n.lake-card-dnd:hover {\n  background: #f4f4f4;\n  color: #595959;\n}\n.lake-card-dnd-active {\n  display: block;\n  opacity: 1;\n  cursor: pointer;\n}\n.lake-tooltip {\n  font-size: 14px;\n  font-variant: tabular-nums;\n  line-height: 1.5;\n  color: rgba(0, 0, 0, 0.65);\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n  list-style: none;\n  position: absolute;\n  z-index: 1060;\n  display: block;\n  visibility: visible;\n  max-width: 250px;\n  white-space: nowrap;\n}\n.lake-tooltip-hidden {\n  display: none;\n}\n.lake-tooltip-placement-top,\n.lake-tooltip-placement-topLeft,\n.lake-tooltip-placement-topRight {\n  padding-bottom: 8px;\n}\n.lake-tooltip-placement-right,\n.lake-tooltip-placement-rightTop,\n.lake-tooltip-placement-rightBottom {\n  padding-left: 8px;\n}\n.lake-tooltip-placement-bottom,\n.lake-tooltip-placement-bottomLeft,\n.lake-tooltip-placement-bottomRight {\n  padding-top: 8px;\n}\n.lake-tooltip-placement-left,\n.lake-tooltip-placement-leftTop,\n.lake-tooltip-placement-leftBottom {\n  padding-right: 8px;\n}\n.lake-tooltip-inner {\n  padding: 6px 8px;\n  color: #fff;\n  text-align: left;\n  text-decoration: none;\n  background-color: rgba(0, 0, 0, 0.75);\n  border-radius: 4px;\n  -webkit-box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n  min-height: 32px;\n  word-wrap: break-word;\n}\n.lake-tooltip-arrow {\n  position: absolute;\n  width: 0;\n  height: 0;\n  border-color: transparent;\n  border-style: solid;\n}\n.lake-tooltip-placement-top .lake-tooltip-arrow,\n.lake-tooltip-placement-topLeft .lake-tooltip-arrow,\n.lake-tooltip-placement-topRight .lake-tooltip-arrow {\n  bottom: 3px;\n  border-width: 5px 5px 0;\n  border-top-color: rgba(0, 0, 0, 0.75);\n}\n.lake-tooltip-placement-top .lake-tooltip-arrow {\n  left: 50%;\n  margin-left: -5px;\n}\n.lake-tooltip-placement-topLeft .lake-tooltip-arrow {\n  left: 16px;\n}\n.lake-tooltip-placement-topRight .lake-tooltip-arrow {\n  right: 16px;\n}\n.lake-tooltip-placement-right .lake-tooltip-arrow,\n.lake-tooltip-placement-rightTop .lake-tooltip-arrow,\n.lake-tooltip-placement-rightBottom .lake-tooltip-arrow {\n  left: 3px;\n  border-width: 5px 5px 5px 0;\n  border-right-color: rgba(0, 0, 0, 0.75);\n}\n.lake-tooltip-placement-right .lake-tooltip-arrow {\n  top: 50%;\n  margin-top: -5px;\n}\n.lake-tooltip-placement-rightTop .lake-tooltip-arrow {\n  top: 8px;\n}\n.lake-tooltip-placement-rightBottom .lake-tooltip-arrow {\n  bottom: 8px;\n}\n.lake-tooltip-placement-left .lake-tooltip-arrow,\n.lake-tooltip-placement-leftTop .lake-tooltip-arrow,\n.lake-tooltip-placement-leftBottom .lake-tooltip-arrow {\n  right: 3px;\n  border-width: 5px 0 5px 5px;\n  border-left-color: rgba(0, 0, 0, 0.75);\n}\n.lake-tooltip-placement-left .lake-tooltip-arrow {\n  top: 50%;\n  margin-top: -5px;\n}\n.lake-tooltip-placement-leftTop .lake-tooltip-arrow {\n  top: 8px;\n}\n.lake-tooltip-placement-leftBottom .lake-tooltip-arrow {\n  bottom: 8px;\n}\n.lake-tooltip-placement-bottom .lake-tooltip-arrow,\n.lake-tooltip-placement-bottomLeft .lake-tooltip-arrow,\n.lake-tooltip-placement-bottomRight .lake-tooltip-arrow {\n  top: 3px;\n  border-width: 0 5px 5px;\n  border-bottom-color: rgba(0, 0, 0, 0.75);\n}\n.lake-tooltip-placement-bottom .lake-tooltip-arrow {\n  left: 50%;\n  margin-left: -5px;\n}\n.lake-tooltip-placement-bottomLeft .lake-tooltip-arrow {\n  left: 16px;\n}\n.lake-tooltip-placement-bottomRight .lake-tooltip-arrow {\n  right: 16px;\n}\n.lake-embed-tooltip {\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity 0.3s ease-in-out;\n}\n.lake-embed-tooltip.lake-embed-tooltip-active {\n  opacity: 1;\n  visibility: visible;\n}\n.lake-engine-view .lake-embed-toolbar-active {\n  min-width: 200px;\n}\n.lake-card-toolbar.lake-embed-toolbar-block {\n  top: -48px;\n  bottom: auto;\n  display: none;\n}\n.lake-card-toolbar.lake-card-toolbar-active {\n  display: block;\n}\n.lake-card-toolbar.lake-embed-toolbar-active {\n  display: block;\n  height: 48px;\n}\n.lake-embed-toolbar-wrapper {\n  position: absolute;\n}\n.lake-embed-toolbar {\n  position: absolute;\n  opacity: 0;\n  visibility: hidden;\n  width: auto;\n  line-height: 28px;\n  display: flex;\n  flex-direction: row;\n  font-size: 14px;\n  font-weight: normal;\n  text-indent: 0;\n  -webkit-user-select: none;\n  user-select: none;\n}\n.lake-embed-toolbar .lake-input {\n  font-variant: tabular-nums;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n  list-style: none;\n  position: relative;\n  display: inline-block;\n  padding: 4px 11px;\n  width: 100%;\n  height: 32px;\n  font-size: 14px;\n  line-height: 1.5;\n  color: rgba(0, 0, 0, 0.65);\n  background-color: #fff;\n  background-image: none;\n  border: 1px solid #d9d9d9;\n  border-radius: 4px;\n  -webkit-transition: all 0.3s;\n  transition: all 0.3s;\n}\n.lake-embed-toolbar .lake-input::-moz-placeholder {\n  color: #bfbfbf;\n  opacity: 1;\n}\n.lake-embed-toolbar .lake-input:-ms-input-placeholder {\n  color: #bfbfbf;\n}\n.lake-embed-toolbar .lake-input::-webkit-input-placeholder {\n  color: #bfbfbf;\n}\n.lake-embed-toolbar .lake-input:hover {\n  border-color: #47c479;\n  border-right-width: 1px !important;\n}\n.lake-embed-toolbar .lake-input:focus {\n  border-color: #47c479;\n  outline: 0;\n  -webkit-box-shadow: 0 0 0 2px rgba(37, 184, 100, 0.2);\n  box-shadow: 0 0 0 2px rgba(37, 184, 100, 0.2);\n  border-right-width: 1px !important;\n}\n.lake-embed-toolbar .lake-input-disabled {\n  background-color: #f5f5f5;\n  opacity: 1;\n  cursor: not-allowed;\n  color: rgba(0, 0, 0, 0.25);\n}\n.lake-embed-toolbar .lake-input-disabled:hover {\n  border-color: #e6d8d8;\n  border-right-width: 1px !important;\n}\n.lake-embed-toolbar .lake-input-sm {\n  padding: 1px 7px;\n  height: 24px;\n}\n.lake-embed-toolbar .lake-embed-toolbar-numberinput {\n  line-height: 24px;\n  display: inline-block;\n  width: 46px;\n}\n.lake-embed-toolbar .lake-embed-toolbar-btn .lake-icon {\n  transform: translateY(1px);\n}\n.lake-embed-toolbar .lake-embed-toolbar-btn.with-text {\n  display: inline-flex;\n  align-items: center;\n}\n.lake-embed-toolbar .lake-embed-toolbar-btn.with-text .lake-embed-toolbar-btn-text {\n  color: #262626;\n  font-size: 12px;\n  margin-left: 4px;\n}\n.lake-embed-toolbar-active {\n  opacity: 1;\n  visibility: visible;\n}\n.lake-embed-toolbar-inline {\n  top: 50%;\n  margin-top: -14px;\n  bottom: auto;\n  left: auto;\n  right: 12px;\n}\n.lake-embed-toolbar-block {\n  top: auto;\n  bottom: -46px;\n  left: -1px;\n  right: auto;\n  height: 40px;\n  z-index: 125;\n}\n.lake-embed-toolbar-second-block {\n  bottom: -92px;\n}\n.lake-embed-toolbar-right {\n  left: auto;\n  right: -1px;\n}\n.lake-embed-toolbar-center {\n  left: 50%;\n  transform: translateX(-50%);\n}\n.lake-embed-toolbar-inlink {\n  bottom: -90px;\n}\n.lake-embed-toolbar-memtion {\n  padding: 0 0;\n  min-width: 280px;\n  height: auto;\n  bottom: auto;\n  z-index: 1031;\n}\n.lake-embed-toolbar .lake-icon-arrow {\n  position: absolute;\n  right: 8px;\n  top: 50%;\n  width: 0;\n  height: 0;\n  border-left: 4px solid transparent;\n  border-right: 4px solid transparent;\n  border-top: 5px solid #BFBFBF;\n  margin-top: -3px;\n  transition: all 0.25s cubic-bezier(0.3, 1.2, 0.2, 1);\n}\n.lake-embed-toolbar-btn {\n  line-height: 28px;\n  padding: 0 3px;\n  min-width: 28px;\n  display: inline-block;\n  text-align: center;\n  color: #595959;\n  border-radius: 2px 2px;\n  transition: background-color 0.3s ease-in-out;\n  cursor: pointer;\n}\n.lake-embed-toolbar-btn .text,\n.lake-embed-toolbar-btn .lake-icon {\n  font-size: 16px;\n  color: #595959;\n}\n.lake-embed-toolbar-btn .text {\n  font-size: 12px;\n  display: inline-block;\n  padding: 0 4px;\n}\n.lake-embed-toolbar-btn:hover {\n  background-color: #f4f4f4;\n}\n.lake-embed-toolbar-btn-disabled,\n.lake-embed-toolbar-btn-disabled:hover {\n  background-color: transparent;\n  box-shadow: none;\n  cursor: not-allowed;\n}\n.lake-embed-toolbar-btn-disabled .text,\n.lake-embed-toolbar-btn-disabled:hover .text,\n.lake-embed-toolbar-btn-disabled .lake-icon,\n.lake-embed-toolbar-btn-disabled:hover .lake-icon {\n  color: #BFBFBF;\n}\n.lake-embed-toolbar-text {\n  line-height: 24px;\n  padding: 0 5px;\n  display: inline-block;\n  color: #595959;\n}\n.lake-embed-toolbar-text .lake-icon.lake-icon-connect {\n  width: 18px;\n  transform: scale(0.6);\n}\n.lake-embed-toolbar-text-link {\n  min-width: 200px;\n  max-width: 250px;\n  line-height: 28px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.lake-embed-toolbar-linkinput {\n  line-height: 24px;\n  padding: 0 3px;\n  display: inline-block;\n  border: 1px solid transparent;\n  outline: 0;\n  width: 200px;\n  letter-spacing: 0.05em;\n}\n.lake-embed-toolbar-group {\n  border: 1px solid rgba(226, 226, 226, 0.84);\n  border-radius: 2px;\n  box-shadow: 0px 2px 4px 0px rgba(225, 225, 225, 0.5);\n  background: #fff;\n  position: relative;\n  display: inline-flex;\n  padding: 5px 3px;\n}\n.lake-embed-toolbar-item {\n  position: relative;\n  display: inline-block;\n  line-height: 28px;\n  margin: 0 3px;\n  text-align: left;\n  color: #595959;\n  flex: 0 0 auto;\n}\n.lake-embed-toolbar-item[disabled] {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.lake-embed-toolbar-item-split {\n  width: 1px;\n  height: 16px;\n  line-height: 16px;\n  margin: 6px 4px;\n  border-left: 1px solid #e8e8e8;\n  display: inline-block;\n}\n.lake-embed-toolbar-item-trigger {\n  position: relative;\n  padding-left: 3px;\n  padding-right: 16px;\n  cursor: pointer;\n  border-radius: 2px 2px;\n  transition: background-color 0.3s ease-in-out;\n}\n.lake-embed-toolbar-item-trigger:hover {\n  background: #f4f4f4;\n}\n.lake-embed-toolbar-item-trigger-active {\n  background: #f4f4f4;\n}\n.lake-embed-toolbar-item-trigger-active .lake-icon-arrow {\n  transform: rotate(-180deg);\n}\n.lake-embed-toolbar-item-dropdown {\n  position: absolute;\n  top: 38px;\n  left: -7px;\n  padding: 5px 0;\n  border-radius: 2px 2px;\n  background: #fff;\n  border: 1px solid #d9d9d9;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.12);\n  min-width: 128px;\n  height: auto;\n  opacity: 0;\n  visibility: hidden;\n  transition: all 0.25s cubic-bezier(0.3, 1.2, 0.2, 1);\n  transform: translateY(-10px);\n}\n.lake-embed-toolbar-item-dropdown:before {\n  content: \' \';\n  position: absolute;\n  top: -6px;\n  left: 15px;\n  width: 0;\n  height: 0;\n  border-left: 7px solid transparent;\n  border-right: 7px solid transparent;\n  border-bottom: 6px solid #d9d9d9;\n}\n.lake-embed-toolbar-item-dropdown:after {\n  content: \' \';\n  position: absolute;\n  top: -4px;\n  left: 15px;\n  width: 0;\n  height: 0;\n  border-left: 7px solid transparent;\n  border-right: 7px solid transparent;\n  border-bottom: 6px solid #fff;\n}\n.lake-embed-toolbar-item-dropdown-active {\n  opacity: 1;\n  visibility: visible;\n  transform: translateY(0px);\n}\n.lake-embed-toolbar-item-dropdown-item {\n  display: block;\n  padding: 4px 10px;\n  line-height: 24px;\n  color: #595959;\n  transition: background 0.3s ease-in-out;\n  white-space: nowrap;\n}\n.lake-embed-toolbar-item-dropdown-item .lake-embed-toolbar-btn:hover {\n  background: #e8e8e8;\n}\n.lake-embed-toolbar-item-dropdown-item:hover {\n  background: #e8e8e8;\n}\n.lake-embed-toolbar-item-dropdown-item.active,\n.lake-embed-toolbar-item-dropdown-item.active:hover {\n  background: #f4f4f4;\n}\n.lake-embed-toolbar-item-dropdown-item.active .lake-embed-toolbar-btn:hover,\n.lake-embed-toolbar-item-dropdown-item.active:hover .lake-embed-toolbar-btn:hover {\n  background: #f4f4f4;\n}\n.lake-embed-toolbar-item-input {\n  display: flex;\n  padding: 2px 0;\n}\n.lake-embed-toolbar-item-text {\n  padding: 0 5px;\n}\n.lake-embed-toolbar-flex {\n  position: relative;\n  opacity: 1;\n  visibility: visible;\n  padding: 6px 6px;\n  display: flex;\n}\n.lake-embed-toolbar-flex .lake-embed-toolbar-item {\n  padding: 0 0;\n}\n.lake-embed-toolbar-flex .lake-embed-toolbar-btn {\n  padding: 0 6px;\n  line-height: 28px;\n}\n.lake-embed-toolbar-flex .lake-embed-toolbar-btn .lake-icon {\n  vertical-align: middle;\n}\n.lake-embed-toolbar-flex .lake-embed-toolbar-item-trigger-active {\n  background: #e8e8e8;\n}\n.lake-embed-toolbar-flex .lake-embed-toolbar-item-trigger-active .lake-embed-toolbar-btn:hover {\n  background: #e8e8e8;\n}\n.lake-embed-toolbar-flex .lake-embed-toolbar-item-dropdown {\n  border-radius: 3px 3px;\n  top: 32px;\n  left: -1px;\n}\n.lake-embed-toolbar-flex .lake-embed-toolbar-item-dropdown:before {\n  content: \'\';\n  display: none;\n}\n.lake-embed-toolbar-flex .lake-embed-toolbar-item-dropdown:after {\n  content: \'\';\n  display: none;\n}\n.lake-embed-toolbar-dropdown .dropdown-container {\n  display: none;\n  position: absolute;\n  padding: 8px 0;\n  top: 100%;\n  margin-top: 9px;\n  border-radius: 4px;\n  background-color: #fff;\n  box-shadow: 0 1px 4px -2px rgba(0, 0, 0, 0.13), 0 2px 8px 0 rgba(0, 0, 0, 0.08), 0 8px 16px 4px rgba(0, 0, 0, 0.04);\n}\n.lake-embed-toolbar-dropdown .dropdown-container.show {\n  display: block;\n}\n.lake-embed-toolbar-dropdown-item {\n  width: 218px;\n  padding: 8px 16px;\n  margin: 0;\n  white-space: nowrap;\n  font-size: 15px;\n  line-height: 26px;\n  color: #404040;\n  cursor: pointer;\n}\n.lake-embed-toolbar-dropdown-item:HOVER {\n  background-color: #f5f5f5;\n}\n.lake-embed-toolbar-dropdown-switch {\n  display: flex;\n  align-items: center;\n}\n.lake-embed-toolbar-dropdown-switch .text-content {\n  flex: 1;\n}\n@-webkit-keyframes lakeCheckboxEffect {\n  0% {\n    -webkit-transform: scale(1);\n    transform: scale(1);\n    opacity: 0.5;\n  }\n  100% {\n    -webkit-transform: scale(1.6);\n    transform: scale(1.6);\n    opacity: 0;\n  }\n}\n@keyframes lakeCheckboxEffect {\n  0% {\n    -webkit-transform: scale(1);\n    transform: scale(1);\n    opacity: 0.5;\n  }\n  100% {\n    -webkit-transform: scale(1.6);\n    transform: scale(1.6);\n    opacity: 0;\n  }\n}\n.lake-checkbox {\n  font-size: 14px;\n  font-variant: tabular-nums;\n  color: rgba(0, 0, 0, 0.65);\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n  list-style: none;\n  white-space: nowrap;\n  cursor: pointer;\n  outline: none;\n  display: inline-block;\n  line-height: 1;\n  position: relative;\n  vertical-align: middle;\n  top: -0.09em;\n}\n.lake-checkbox-wrapper:hover .lake-checkbox-inner,\n.lake-checkbox:hover .lake-checkbox-inner,\n.lake-checkbox-input:focus + .lake-checkbox-inner {\n  border-color: #25b864;\n}\n.lake-checkbox-checked:after {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  border-radius: 2px;\n  border: 1px solid #25b864;\n  content: "";\n  -webkit-animation: lakeCheckboxEffect 0.36s ease-in-out;\n  animation: lakeCheckboxEffect 0.36s ease-in-out;\n  -webkit-animation-fill-mode: both;\n  animation-fill-mode: both;\n  visibility: hidden;\n}\n.lake-checkbox:hover:after,\n.lake-checkbox-wrapper:hover .lake-checkbox:after {\n  visibility: visible;\n}\n.lake-checkbox-inner {\n  position: relative;\n  top: 0;\n  left: 0;\n  display: block;\n  width: 16px;\n  height: 16px;\n  border: 1px solid #d9d9d9;\n  border-radius: 2px;\n  background-color: #fff;\n  -webkit-transition: all 0.3s;\n  transition: all 0.3s;\n  border-collapse: separate;\n}\n.lake-checkbox-inner:after {\n  -webkit-transform: rotate(45deg) scale(0);\n  -ms-transform: rotate(45deg) scale(0);\n  transform: rotate(45deg) scale(0);\n  position: absolute;\n  left: 4.57142857px;\n  top: 1.14285714px;\n  display: table;\n  width: 5.71428571px;\n  height: 9.14285714px;\n  border: 2px solid #fff;\n  border-top: 0;\n  border-left: 0;\n  content: \' \';\n  -webkit-transition: all 0.1s cubic-bezier(0.71, -0.46, 0.88, 0.6), opacity 0.1s;\n  transition: all 0.1s cubic-bezier(0.71, -0.46, 0.88, 0.6), opacity 0.1s;\n  opacity: 0;\n}\n.lake-checkbox-input {\n  position: absolute;\n  left: 0;\n  z-index: 1;\n  cursor: pointer;\n  opacity: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  width: 100%;\n  height: 100%;\n}\n.lake-checkbox-checked .lake-checkbox-inner:after {\n  -webkit-transform: rotate(45deg) scale(1);\n  -ms-transform: rotate(45deg) scale(1);\n  transform: rotate(45deg) scale(1);\n  position: absolute;\n  display: table;\n  border: 2px solid #fff;\n  border-top: 0;\n  border-left: 0;\n  content: \' \';\n  -webkit-transition: all 0.2s cubic-bezier(0.12, 0.4, 0.29, 1.46) 0.1s;\n  transition: all 0.2s cubic-bezier(0.12, 0.4, 0.29, 1.46) 0.1s;\n  opacity: 1;\n}\n.lake-checkbox-checked .lake-checkbox-inner {\n  background-color: #25b864;\n  border-color: #25b864;\n}\n.lake-checkbox-disabled {\n  cursor: not-allowed;\n}\n.lake-checkbox-disabled.lake-checkbox-checked .lake-checkbox-inner:after {\n  -webkit-animation-name: none;\n  animation-name: none;\n  border-color: rgba(0, 0, 0, 0.25);\n}\n.lake-checkbox-disabled .lake-checkbox-input {\n  cursor: not-allowed;\n}\n.lake-checkbox-disabled .lake-checkbox-inner {\n  border-color: #d9d9d9 !important;\n  background-color: #f5f5f5;\n}\n.lake-checkbox-disabled .lake-checkbox-inner:after {\n  -webkit-animation-name: none;\n  animation-name: none;\n  border-color: #f5f5f5;\n  border-collapse: separate;\n}\n.lake-checkbox-disabled + span {\n  color: rgba(0, 0, 0, 0.25);\n  cursor: not-allowed;\n}\n.lake-checkbox-wrapper {\n  font-size: 14px;\n  font-variant: tabular-nums;\n  line-height: 1.5;\n  color: rgba(0, 0, 0, 0.65);\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n  list-style: none;\n  line-height: unset;\n  cursor: pointer;\n  display: inline-block;\n}\n.lake-checkbox-wrapper + .lake-checkbox-wrapper {\n  margin-left: 8px;\n}\n.lake-checkbox-wrapper + span,\n.lake-checkbox + span {\n  padding-left: 8px;\n  padding-right: 8px;\n}\n.lake-checkbox-group {\n  font-size: 14px;\n  font-variant: tabular-nums;\n  line-height: 1.5;\n  color: rgba(0, 0, 0, 0.65);\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n  list-style: none;\n  display: inline-block;\n}\n.lake-checkbox-group-item {\n  display: inline-block;\n  margin-right: 8px;\n}\n.lake-checkbox-group-item:last-child {\n  margin-right: 0;\n}\n.lake-checkbox-group-item + .lake-checkbox-group-item {\n  margin-left: 0;\n}\n.lake-checkbox-indeterminate .lake-checkbox-inner {\n  background-color: #fff;\n  border-color: #d9d9d9;\n}\n.lake-checkbox-indeterminate .lake-checkbox-inner:after {\n  content: \' \';\n  -webkit-transform: translate(-50%, -50%) scale(1);\n  -ms-transform: translate(-50%, -50%) scale(1);\n  transform: translate(-50%, -50%) scale(1);\n  border: 0;\n  left: 50%;\n  top: 50%;\n  width: 8px;\n  height: 8px;\n  background-color: #25b864;\n  opacity: 1;\n}\n.lake-checkbox-indeterminate.lake-checkbox-disabled .lake-checkbox-inner:after {\n  border-color: rgba(0, 0, 0, 0.25);\n  background-color: rgba(0, 0, 0, 0.25);\n}\n.lake-engine .lake-list,\n.lake-engine-view .lake-list {\n  color: #262626;\n  text-indent: 0;\n}\n.lake-engine .lake-list-node,\n.lake-engine-view .lake-list-node {\n  line-height: inherit;\n}\n.lake-engine .lake-list-node [data-lake-card="checkbox"],\n.lake-engine-view .lake-list-node [data-lake-card="checkbox"] {\n  margin-left: 0;\n  margin-right: 5px;\n}\n.lake-engine .lake-list-task,\n.lake-engine-view .lake-list-task {\n  position: relative;\n  list-style: none;\n  text-indent: 0;\n}\n.lake-engine .lake-list-task-active,\n.lake-engine-view .lake-list-task-active {\n  background: #f4f4f4;\n  border-radius: 3px 3px;\n}\n.lake-engine .lake-list-task [data-lake-card="checkbox"],\n.lake-engine-view .lake-list-task [data-lake-card="checkbox"] {\n  padding-right: 6px;\n  vertical-align: middle;\n  line-height: 16px;\n  position: absolute;\n  margin-left: -20px;\n  top: 4px;\n}\n.lake-engine .lake-list-task [data-lake-card="checkbox"] .ant-checkbox-inner,\n.lake-engine-view .lake-list-task [data-lake-card="checkbox"] .ant-checkbox-inner {\n  border-color: #BFBFBF;\n}\n.lake-engine .lake-list-task [data-lake-card="checkbox"] .ant-checkbox-checked .ant-checkbox-inner,\n.lake-engine-view .lake-list-task [data-lake-card="checkbox"] .ant-checkbox-checked .ant-checkbox-inner {\n  background-color: #47C479;\n  border-color: #25b864;\n}\n.lake-engine li span[data-lake-card="image"],\n.lake-engine-view li span[data-lake-card="image"] {\n  vertical-align: top;\n}\n.lake-engine li span[data-lake-card="image"] [data-card-element="left"],\n.lake-engine-view li span[data-lake-card="image"] [data-card-element="left"],\n.lake-engine li span[data-lake-card="image"] [data-card-element="right"],\n.lake-engine-view li span[data-lake-card="image"] [data-card-element="right"] {\n  vertical-align: top;\n}\n.lake-engine-view .lake-list .lake-checkbox-input {\n  cursor: default;\n}\n.lake-link {\n  position: relative;\n}\n.lake-link-content {\n  position: relative;\n  color: #096DD9;\n}\n.lake-embed-toolbar-block.lake-link-toolbar-in-max {\n  z-index: 1032;\n}\n.lake-drop-cursor {\n  position: absolute;\n  width: 2px;\n  background-color: #16914F;\n}\ndiv.lake-drag-image {\n  background-color: #f9f9f9;\n}\n.lake-user-cursor {\n  position: absolute;\n  z-index: 10;\n  width: 2px;\n}\n.lake-user-cursor-trigger {\n  position: absolute;\n  top: -5px;\n  left: -2px;\n  border-radius: 100%;\n  color: #ffffff;\n  width: 6px;\n  height: 6px;\n  font-size: 0;\n  overflow: hidden;\n  transition: all 0.1s linear;\n}\n.lake-user-cursor-trigger-active {\n  top: -17px;\n  border-radius: 2px;\n  color: #ffffff;\n  font-size: 10px;\n  line-height: 18px;\n  height: 18px;\n  width: auto;\n  padding: 0 3px;\n  white-space: nowrap;\n}\n.lake-card-mask {\n  position: absolute;\n  z-index: 10;\n  background: transparent;\n  cursor: not-allowed;\n}\n.lake-user-cursor-card {\n  position: absolute;\n}\n.lake-user-cursor-card .lake-user-cursor-trigger {\n  display: none;\n}\n.lake-user-cursor-card .lake-user-cursor-trigger-active {\n  position: absolute;\n  display: block;\n  top: -19px;\n  left: 0;\n  border-radius: 2px;\n  color: #ffffff;\n  font-size: 10px;\n  line-height: 18px;\n  height: 18px;\n  width: auto;\n  padding: 0 3px;\n  white-space: nowrap;\n}\n.lake-engine,\n.lake-engine-view {\n  font-family: \'Chinese Quote\', \'Segoe UI\', Roboto, \'PingFang SC\', \'Hiragino Sans GB\', \'Microsoft YaHei\', \'Helvetica Neue\', Helvetica, Arial, sans-serif, \'Apple Color Emoji\';\n  word-wrap: break-word;\n  outline-style: none;\n  white-space: pre-wrap;\n  -webkit-user-select: auto;\n  /* pt / px 换算表：https://websemantics.uk/articles/font-size-conversion/ */\n}\n.lake-engine > *:first-child,\n.lake-engine-view > *:first-child {\n  margin-top: 0 !important;\n}\n.lake-engine [data-card-type],\n.lake-engine-view [data-card-type] {\n  white-space: normal;\n}\n.lake-engine .selection-transparent::selection,\n.lake-engine-view .selection-transparent::selection {\n  background: transparent;\n}\n.lake-engine.lake-paintformat-mode,\n.lake-engine-view.lake-paintformat-mode {\n  cursor: text;\n  cursor: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAUCAYAAACTQC2+AAAABGdBTUEAALGPC/xhBQAAATtJREFUSA3dlTFLA0EQhU+jlSkEG63EYGdlZZFG7QUbSyG/QP/C/Q0rqzQWQX+BwUKwtrexEFRQtFSI35NZWDa3soOHhQ8eM/v2zWw2N9xVVVUdwXUYoFxaq5il2wa8hvtG5dJaxYx16xFvLN8i3lmehiFC6Y94wbsTGsxZosajKA/7aewjrKZiyTocJO9DSYHT82r+YXyQs0eRfYBrD/Y1DB58OMyfeM/hrWq8N9qlZkmFBXiPPd6D7ikWUxwjrKWirTeJkzDeNYttKIxhDUuxiFGjfAnfMkUX3hs19emYqFt9P48mU6zVLEQPFjCfwgk8gyuwEd6pS5t0EQYmHhCXLZ8Kvz1oqmFO+H8HxVOXfZC5vwNd46y3xbx5ni1mQ4+dJ6NyDw4xX0GN9484YfcRhg+fcmmt408+5V99wSyVTWN94gAAAABJRU5ErkJggg==) 5 10, text;\n}\n.lake-engine [contenteditable="true"],\n.lake-engine-view [contenteditable="true"] {\n  outline-style: none;\n}\n.lake-engine a,\n.lake-engine-view a,\n.lake-engine a:active,\n.lake-engine-view a:active {\n  word-wrap: break-word;\n  color: #096DD9;\n}\n.lake-engine a:hover,\n.lake-engine-view a:hover {\n  color: #1890FF;\n}\n.lake-engine img,\n.lake-engine-view img {\n  max-width: 100%;\n}\n.lake-engine mark,\n.lake-engine-view mark {\n  padding: 0;\n  background: #ff0;\n}\n.lake-engine sup,\n.lake-engine-view sup {\n  top: -0.5em;\n}\n.lake-engine sub,\n.lake-engine-view sub {\n  bottom: -0.25em;\n}\n.lake-engine sub,\n.lake-engine-view sub,\n.lake-engine sup,\n.lake-engine-view sup {\n  position: relative;\n  font-size: 75%;\n  line-height: 0;\n  vertical-align: baseline;\n}\n.lake-engine blockquote,\n.lake-engine-view blockquote {\n  margin-top: 5px;\n  margin-bottom: 5px;\n  padding-left: 1em;\n  margin-left: 0px;\n  border-left: 3px solid #eee;\n  color: #8C8C8C;\n}\n.lake-engine blockquote + blockquote,\n.lake-engine-view blockquote + blockquote {\n  margin-top: -5px;\n}\n.lake-engine code,\n.lake-engine-view code {\n  font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;\n  font-size: inherit;\n  background-color: rgba(0, 0, 0, 0.06);\n  padding: 0 2px;\n  border: 1px solid rgba(0, 0, 0, 0.08);\n  border-radius: 2px 2px;\n  line-height: inherit;\n  word-wrap: break-word;\n  text-indent: 0;\n}\n.lake-engine .lake-fontsize-9,\n.lake-engine-view .lake-fontsize-9 {\n  font-size: 12px;\n}\n.lake-engine .lake-fontsize-10,\n.lake-engine-view .lake-fontsize-10 {\n  font-size: 13px;\n}\n.lake-engine .lake-fontsize-11,\n.lake-engine-view .lake-fontsize-11 {\n  font-size: 14px;\n}\n.lake-engine .lake-fontsize-1515,\n.lake-engine-view .lake-fontsize-1515 {\n  font-size: 15px;\n}\n.lake-engine .lake-fontsize-12,\n.lake-engine-view .lake-fontsize-12 {\n  font-size: 16px;\n}\n.lake-engine .lake-fontsize-14,\n.lake-engine-view .lake-fontsize-14 {\n  font-size: 19px;\n}\n.lake-engine .lake-fontsize-16,\n.lake-engine-view .lake-fontsize-16 {\n  font-size: 22px;\n}\n.lake-engine .lake-fontsize-18,\n.lake-engine-view .lake-fontsize-18 {\n  font-size: 24px;\n}\n.lake-engine .lake-fontsize-22,\n.lake-engine-view .lake-fontsize-22 {\n  font-size: 29px;\n}\n.lake-engine .lake-fontsize-24,\n.lake-engine-view .lake-fontsize-24 {\n  font-size: 32px;\n}\n.lake-engine .lake-fontsize-30,\n.lake-engine-view .lake-fontsize-30 {\n  font-size: 40px;\n}\n.lake-engine .lake-fontsize-36,\n.lake-engine-view .lake-fontsize-36 {\n  font-size: 48px;\n}\n.lake-engine span,\n.lake-engine-view span {\n  font-size: inherit;\n}\n.lake-engine pre,\n.lake-engine-view pre {\n  overflow: visible;\n  margin-top: 5px;\n  margin-bottom: 5px;\n}\n.lake-engine pre code,\n.lake-engine-view pre code {\n  display: inline;\n  max-width: initial;\n  padding: 0;\n  margin: 0;\n  overflow: initial;\n  line-height: inherit;\n  vertical-align: inherit;\n  white-space: pre;\n  background: 0 0;\n  font-size: inherit;\n}\n.lake-engine ol,\n.lake-engine-view ol,\n.lake-engine ul,\n.lake-engine-view ul {\n  margin: 0 0 0 3px;\n  padding: 0;\n}\n.lake-engine ol ul,\n.lake-engine-view ol ul,\n.lake-engine ul ul,\n.lake-engine-view ul ul,\n.lake-engine ol ol,\n.lake-engine-view ol ol,\n.lake-engine ul ol,\n.lake-engine-view ul ol {\n  margin-left: 0;\n}\n.lake-engine ol ul li,\n.lake-engine-view ol ul li,\n.lake-engine ul ul li,\n.lake-engine-view ul ul li,\n.lake-engine ol ol li,\n.lake-engine-view ol ol li,\n.lake-engine ul ol li,\n.lake-engine-view ul ol li {\n  margin-left: 2em;\n}\n.lake-engine ol ol[data-lake-indent-new="0"],\n.lake-engine-view ol ol[data-lake-indent-new="0"],\n.lake-engine ul ol[data-lake-indent-new="0"],\n.lake-engine-view ul ol[data-lake-indent-new="0"],\n.lake-engine ol ol[data-lake-indent-new="3"],\n.lake-engine-view ol ol[data-lake-indent-new="3"],\n.lake-engine ul ol[data-lake-indent-new="3"],\n.lake-engine-view ul ol[data-lake-indent-new="3"],\n.lake-engine ol ol[data-lake-indent-new="6"],\n.lake-engine-view ol ol[data-lake-indent-new="6"],\n.lake-engine ul ol[data-lake-indent-new="6"],\n.lake-engine-view ul ol[data-lake-indent-new="6"] {\n  list-style-type: decimal;\n}\n.lake-engine ol ol[data-lake-indent-new="1"],\n.lake-engine-view ol ol[data-lake-indent-new="1"],\n.lake-engine ul ol[data-lake-indent-new="1"],\n.lake-engine-view ul ol[data-lake-indent-new="1"],\n.lake-engine ol ol[data-lake-indent-new="4"],\n.lake-engine-view ol ol[data-lake-indent-new="4"],\n.lake-engine ul ol[data-lake-indent-new="4"],\n.lake-engine-view ul ol[data-lake-indent-new="4"],\n.lake-engine ol ol[data-lake-indent-new="7"],\n.lake-engine-view ol ol[data-lake-indent-new="7"],\n.lake-engine ul ol[data-lake-indent-new="7"],\n.lake-engine-view ul ol[data-lake-indent-new="7"] {\n  list-style-type: lower-alpha;\n}\n.lake-engine ol ol[data-lake-indent-new="2"],\n.lake-engine-view ol ol[data-lake-indent-new="2"],\n.lake-engine ul ol[data-lake-indent-new="2"],\n.lake-engine-view ul ol[data-lake-indent-new="2"],\n.lake-engine ol ol[data-lake-indent-new="5"],\n.lake-engine-view ol ol[data-lake-indent-new="5"],\n.lake-engine ul ol[data-lake-indent-new="5"],\n.lake-engine-view ul ol[data-lake-indent-new="5"],\n.lake-engine ol ol[data-lake-indent-new="8"],\n.lake-engine-view ol ol[data-lake-indent-new="8"],\n.lake-engine ul ol[data-lake-indent-new="8"],\n.lake-engine-view ul ol[data-lake-indent-new="8"] {\n  list-style-type: lower-roman;\n}\n.lake-engine ol ul[data-lake-indent-new="3"],\n.lake-engine-view ol ul[data-lake-indent-new="3"],\n.lake-engine ul ul[data-lake-indent-new="3"],\n.lake-engine-view ul ul[data-lake-indent-new="3"],\n.lake-engine ol ul[data-lake-indent-new="6"],\n.lake-engine-view ol ul[data-lake-indent-new="6"],\n.lake-engine ul ul[data-lake-indent-new="6"],\n.lake-engine-view ul ul[data-lake-indent-new="6"] {\n  list-style-type: disc;\n}\n.lake-engine ol ul[data-lake-indent-new="1"],\n.lake-engine-view ol ul[data-lake-indent-new="1"],\n.lake-engine ul ul[data-lake-indent-new="1"],\n.lake-engine-view ul ul[data-lake-indent-new="1"],\n.lake-engine ol ul[data-lake-indent-new="4"],\n.lake-engine-view ol ul[data-lake-indent-new="4"],\n.lake-engine ul ul[data-lake-indent-new="4"],\n.lake-engine-view ul ul[data-lake-indent-new="4"],\n.lake-engine ol ul[data-lake-indent-new="7"],\n.lake-engine-view ol ul[data-lake-indent-new="7"],\n.lake-engine ul ul[data-lake-indent-new="7"],\n.lake-engine-view ul ul[data-lake-indent-new="7"] {\n  list-style-type: circle;\n}\n.lake-engine ol ul[data-lake-indent-new="2"],\n.lake-engine-view ol ul[data-lake-indent-new="2"],\n.lake-engine ul ul[data-lake-indent-new="2"],\n.lake-engine-view ul ul[data-lake-indent-new="2"],\n.lake-engine ol ul[data-lake-indent-new="5"],\n.lake-engine-view ol ul[data-lake-indent-new="5"],\n.lake-engine ul ul[data-lake-indent-new="5"],\n.lake-engine-view ul ul[data-lake-indent-new="5"],\n.lake-engine ol ul[data-lake-indent-new="8"],\n.lake-engine-view ol ul[data-lake-indent-new="8"],\n.lake-engine ul ul[data-lake-indent-new="8"],\n.lake-engine-view ul ul[data-lake-indent-new="8"] {\n  list-style-type: square;\n}\n.lake-engine li,\n.lake-engine-view li {\n  margin-left: 23px;\n}\n.lake-engine ol,\n.lake-engine-view ol,\n.lake-engine ol[data-lake-indent="3"],\n.lake-engine-view ol[data-lake-indent="3"],\n.lake-engine ol[data-lake-indent="6"],\n.lake-engine-view ol[data-lake-indent="6"] {\n  list-style-type: decimal;\n}\n.lake-engine ol[data-lake-indent="1"],\n.lake-engine-view ol[data-lake-indent="1"],\n.lake-engine ol[data-lake-indent="4"],\n.lake-engine-view ol[data-lake-indent="4"],\n.lake-engine ol[data-lake-indent="7"],\n.lake-engine-view ol[data-lake-indent="7"] {\n  list-style-type: lower-alpha;\n}\n.lake-engine ol[data-lake-indent="2"],\n.lake-engine-view ol[data-lake-indent="2"],\n.lake-engine ol[data-lake-indent="5"],\n.lake-engine-view ol[data-lake-indent="5"],\n.lake-engine ol[data-lake-indent="8"],\n.lake-engine-view ol[data-lake-indent="8"] {\n  list-style-type: lower-roman;\n}\n.lake-engine ul,\n.lake-engine-view ul,\n.lake-engine ul[data-lake-indent="3"],\n.lake-engine-view ul[data-lake-indent="3"],\n.lake-engine ul[data-lake-indent="6"],\n.lake-engine-view ul[data-lake-indent="6"] {\n  list-style-type: disc;\n}\n.lake-engine ul[data-lake-indent="1"],\n.lake-engine-view ul[data-lake-indent="1"],\n.lake-engine ul[data-lake-indent="4"],\n.lake-engine-view ul[data-lake-indent="4"],\n.lake-engine ul[data-lake-indent="7"],\n.lake-engine-view ul[data-lake-indent="7"] {\n  list-style-type: circle;\n}\n.lake-engine ul[data-lake-indent="2"],\n.lake-engine-view ul[data-lake-indent="2"],\n.lake-engine ul[data-lake-indent="5"],\n.lake-engine-view ul[data-lake-indent="5"],\n.lake-engine ul[data-lake-indent="8"],\n.lake-engine-view ul[data-lake-indent="8"] {\n  list-style-type: square;\n}\n.lake-engine ol[data-lake-indent="1"],\n.lake-engine-view ol[data-lake-indent="1"],\n.lake-engine ul[data-lake-indent="1"],\n.lake-engine-view ul[data-lake-indent="1"] {\n  padding-left: 2em;\n}\n.lake-engine ol[data-lake-indent="2"],\n.lake-engine-view ol[data-lake-indent="2"],\n.lake-engine ul[data-lake-indent="2"],\n.lake-engine-view ul[data-lake-indent="2"] {\n  padding-left: 4em;\n}\n.lake-engine ol[data-lake-indent="3"],\n.lake-engine-view ol[data-lake-indent="3"],\n.lake-engine ul[data-lake-indent="3"],\n.lake-engine-view ul[data-lake-indent="3"] {\n  padding-left: 6em;\n}\n.lake-engine ol[data-lake-indent="4"],\n.lake-engine-view ol[data-lake-indent="4"],\n.lake-engine ul[data-lake-indent="4"],\n.lake-engine-view ul[data-lake-indent="4"] {\n  padding-left: 8em;\n}\n.lake-engine ol[data-lake-indent="5"],\n.lake-engine-view ol[data-lake-indent="5"],\n.lake-engine ul[data-lake-indent="5"],\n.lake-engine-view ul[data-lake-indent="5"] {\n  padding-left: 10em;\n}\n.lake-engine ol[data-lake-indent="6"],\n.lake-engine-view ol[data-lake-indent="6"],\n.lake-engine ul[data-lake-indent="6"],\n.lake-engine-view ul[data-lake-indent="6"] {\n  padding-left: 12em;\n}\n.lake-engine ol[data-lake-indent="7"],\n.lake-engine-view ol[data-lake-indent="7"],\n.lake-engine ul[data-lake-indent="7"],\n.lake-engine-view ul[data-lake-indent="7"] {\n  padding-left: 14em;\n}\n.lake-engine ol[data-lake-indent="8"],\n.lake-engine-view ol[data-lake-indent="8"],\n.lake-engine ul[data-lake-indent="8"],\n.lake-engine-view ul[data-lake-indent="8"] {\n  padding-left: 16em;\n}\n.lake-engine span[data-card-type="inline"],\n.lake-engine-view span[data-card-type="inline"] {\n  display: inline-block;\n  text-indent: 0;\n  vertical-align: baseline;\n  white-space: initial;\n}\n.lake-engine span[data-card-type="inline"] span[data-card-element],\n.lake-engine-view span[data-card-type="inline"] span[data-card-element] {\n  display: inline-block;\n}\n.lake-engine span[data-card-type="inline"] span[data-card-element="center"],\n.lake-engine-view span[data-card-type="inline"] span[data-card-element="center"] {\n  vertical-align: bottom;\n}\n.lake-engine span[data-card-type="inline"] span[data-card-element="left"],\n.lake-engine-view span[data-card-type="inline"] span[data-card-element="left"],\n.lake-engine span[data-card-type="inline"] span[data-card-element="right"],\n.lake-engine-view span[data-card-type="inline"] span[data-card-element="right"] {\n  min-width: 1px;\n  text-align: left;\n  -webkit-user-select: text;\n  user-select: text;\n}\n.lake-engine div[data-card-type="block"],\n.lake-engine-view div[data-card-type="block"],\n.lake-engine span[data-card-type="inline"].lake-card-block,\n.lake-engine-view span[data-card-type="inline"].lake-card-block {\n  display: block;\n}\n.lake-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"],\n.lake-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"],\n.lake-engine span[data-card-type="inline"].lake-card-block > div[data-card-element="body"] > span[data-card-element="left"],\n.lake-engine-view span[data-card-type="inline"].lake-card-block > div[data-card-element="body"] > span[data-card-element="left"],\n.lake-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"],\n.lake-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"],\n.lake-engine span[data-card-type="inline"].lake-card-block > div[data-card-element="body"] > span[data-card-element="right"],\n.lake-engine-view span[data-card-type="inline"].lake-card-block > div[data-card-element="body"] > span[data-card-element="right"] {\n  bottom: 0;\n  position: absolute;\n  width: 2px;\n  overflow: hidden;\n  outline: none;\n  text-align: left;\n  text-indent: 0;\n  -webkit-box-flex: 0;\n  flex: 0 0 auto;\n  -webkit-user-select: text;\n  user-select: text;\n}\n.lake-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"],\n.lake-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"],\n.lake-engine span[data-card-type="inline"].lake-card-block > div[data-card-element="body"] > span[data-card-element="left"],\n.lake-engine-view span[data-card-type="inline"].lake-card-block > div[data-card-element="body"] > span[data-card-element="left"] {\n  left: -2px;\n  text-align: left;\n}\n.lake-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"],\n.lake-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"],\n.lake-engine span[data-card-type="inline"].lake-card-block > div[data-card-element="body"] > span[data-card-element="right"],\n.lake-engine-view span[data-card-type="inline"].lake-card-block > div[data-card-element="body"] > span[data-card-element="right"] {\n  right: -2px;\n  text-align: right;\n}\n.lake-engine p,\n.lake-engine-view p {\n  min-height: 24px;\n}\n.lake-engine span[data-card-element="body"],\n.lake-engine-view span[data-card-element="body"],\n.lake-engine div[data-card-element="body"],\n.lake-engine-view div[data-card-element="body"] {\n  position: relative;\n}\n.lake-engine span[data-card-element="body"] [data-card-element="center"],\n.lake-engine-view span[data-card-element="body"] [data-card-element="center"],\n.lake-engine div[data-card-element="body"] [data-card-element="center"],\n.lake-engine-view div[data-card-element="body"] [data-card-element="center"] {\n  -webkit-user-select: text;\n  user-select: text;\n}\n.lake-engine div[data-lake-card="hr"] div[data-card-element="center"],\n.lake-engine-view div[data-lake-card="hr"] div[data-card-element="center"] {\n  border: 1px solid transparent;\n  padding: 18px 0;\n  border-radius: 2px 2px;\n}\n.lake-engine div[data-lake-card="hr"] div[data-card-element="center"] hr,\n.lake-engine-view div[data-lake-card="hr"] div[data-card-element="center"] hr {\n  box-sizing: border-box;\n  position: absolute;\n  top: 50%;\n  left: 0;\n  margin-top: -2px;\n  width: 100%;\n  height: 2px;\n  background-color: #e8e8e8;\n  padding: 0;\n  border: 1px solid transparent;\n}\n.lake-engine {\n  position: relative;\n  background-color: #FFFFFF;\n}\n.lake-engine div[data-lake-card="hr"] div[data-card-element="center"]:hover,\n.lake-engine div[data-lake-card="hr"] div[data-card-element="center"].lake-hr-active {\n  background-color: #f4f4f4;\n}\n.lake-engine div[data-lake-card="hr"] div[data-card-element="center"]:hover hr,\n.lake-engine div[data-lake-card="hr"] div[data-card-element="center"].lake-hr-active hr {\n  background-color: #d9d9d9;\n}\n[data-lake-card="hr"] .lake-hr-select {\n  background-color: rgba(27, 162, 227, 0.2);\n}\n[data-lake-card="hr"] .lake-hr-select hr {\n  background-color: rgba(27, 162, 227, 0.2);\n}\n.lake-anchor-button {\n  position: absolute;\n  width: 24px;\n  height: 24px;\n  line-height: 24px;\n  text-align: center;\n  font-size: 14px;\n  display: block;\n  background: rgba(255, 255, 255, 0.9);\n  color: #BFBFBF;\n  border-radius: 2px 2px;\n  cursor: pointer;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  opacity: 0;\n  visibility: hidden;\n  -webkit-transition: opacity 0.3s ease-in-out;\n  transition: opacity 0.3s ease-in-out;\n}\n.lake-anchor-button.lake-anchor-button-active {\n  opacity: 1;\n  visibility: visible;\n}\n.lake-anchor-button .lake-icon {\n  width: 18px;\n}\n.lake-anchor-button:hover {\n  background: #f4f4f4;\n  color: #595959;\n}\n.lake-card-block-max > [data-card-element="body"] {\n  overflow: hidden;\n}\n.lake-card-block-max > [data-card-element="body"] > .lake-card-toolbar {\n  display: none;\n}\n.lake-card-block-max > [data-card-element="body"] > [data-card-element="center"] {\n  background: #FAFAFA;\n  position: fixed !important;\n  top: 56px;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 1032;\n  overflow: auto;\n}\n.lake-card-block-max > [data-card-element="body"] > [data-card-element="center"].edit {\n  top: 96px;\n}\n.lake-card-block-max .header {\n  position: fixed !important;\n  top: 0;\n  right: 0;\n  left: 0;\n  z-index: 1032;\n  height: 56px;\n  background: #fff;\n  border-bottom: 1px solid #e8e8e8;\n}\n.lake-card-block-max .header .header-crumb {\n  float: left;\n  line-height: 32px;\n  display: flex;\n  height: 100%;\n  align-items: center;\n}\n.lake-card-block-max .header .header-crumb a {\n  color: #595959;\n}\n.lake-card-block-max .header .header-crumb a:hover {\n  color: #595959;\n  cursor: pointer;\n}\n.lake-card-block-max .header .header-crumb .split {\n  display: inline-block;\n  vertical-align: middle;\n  padding: 0 15px;\n  font-size: 20px;\n  padding-right: 8px;\n  font-weight: 200;\n}\n.lake-card-block-max .header .header-crumb .split + a {\n  display: inline-block;\n  vertical-align: middle;\n}\n.lake-card-block-max .header .header-crumb .split + a:hover {\n  color: #8C8C8C;\n}\nblockquote.lake-alert {\n  margin: 0;\n  padding: 10px;\n  border: 1px solid #abd2da;\n  background-color: #e8f7ff;\n  border-radius: 3px;\n  color: #262626;\n  opacity: 1;\n}\nblockquote.lake-alert-info {\n  border: 1px solid #abd2da;\n  background-color: #e8f7ff;\n}\nblockquote.lake-alert-warning {\n  border: 1px solid #e0d1b1;\n  background-color: #fffbe6;\n}\nblockquote.lake-alert-danger {\n  border: 1px solid #deb8be;\n  background-color: #fff3f3;\n}\nblockquote.lake-alert-success {\n  border: 1px solid #c2d2b5;\n  background-color: #edf9e8;\n}\nblockquote.lake-alert-tips {\n  border: 1px solid #c3c3c3;\n  background-color: #fff6b6;\n}\n.lake-typography-traditional {\n  line-height: 1.74;\n  font-size: 14px;\n  color: #262626;\n  letter-spacing: 0.05em;\n}\n.lake-typography-traditional p {\n  margin: 0;\n}\n.lake-typography-traditional h1,\n.lake-typography-traditional h2,\n.lake-typography-traditional h3,\n.lake-typography-traditional h4,\n.lake-typography-traditional h5,\n.lake-typography-traditional h6 {\n  margin-top: 0;\n  margin-bottom: 0;\n  word-spacing: 1px;\n  color: #262626;\n  font-weight: bold;\n  padding: 0;\n}\n.lake-typography-traditional h1 {\n  font-size: 28px;\n  line-height: 36px;\n  padding: 7px 0;\n}\n.lake-typography-traditional h2 {\n  font-size: 24px;\n  line-height: 32px;\n  padding: 7px 0;\n}\n.lake-typography-traditional h3 {\n  font-size: 20px;\n  line-height: 28px;\n  padding: 7px 0;\n}\n.lake-typography-traditional h4 {\n  font-size: 16px;\n  line-height: 24px;\n  padding: 7px 0;\n}\n.lake-typography-traditional h5 {\n  font-size: 14px;\n  line-height: 24px;\n  padding: 7px 0;\n}\n.lake-typography-traditional h6 {\n  font-size: 14px;\n  line-height: 24px;\n  padding: 7px 0;\n  font-weight: normal;\n}\n.lake-typography-classic {\n  line-height: 1.74;\n  font-size: 15px;\n  color: #404040;\n  letter-spacing: 0.008em;\n}\n.lake-typography-classic p {\n  margin: 0;\n}\n.lake-typography-classic h1,\n.lake-typography-classic h2,\n.lake-typography-classic h3,\n.lake-typography-classic h4,\n.lake-typography-classic h5,\n.lake-typography-classic h6 {\n  margin-top: 0;\n  margin-bottom: 0;\n  word-spacing: 1px;\n  color: #262626;\n  font-weight: bold;\n  padding: 0;\n}\n.lake-typography-classic h1 {\n  font-size: 28px;\n  line-height: 36px;\n  margin: 26px 0 10px 0;\n}\n.lake-typography-classic h2 {\n  font-size: 24px;\n  line-height: 32px;\n  margin: 21px 0 5px 0;\n}\n.lake-typography-classic h3 {\n  font-size: 20px;\n  line-height: 28px;\n  margin: 16px 0 5px 0;\n}\n.lake-typography-classic h4 {\n  font-size: 16px;\n  line-height: 24px;\n  margin: 10px 0 5px 0;\n}\n.lake-typography-classic h5 {\n  font-size: 15px;\n  line-height: 24px;\n  margin: 8px 0 5px 0;\n}\n.lake-typography-classic h6 {\n  font-size: 15px;\n  line-height: 24px;\n  font-weight: normal;\n  margin: 8px 0 5px 0;\n}\n.lake-lineheight-1 {\n  line-height: 1;\n}\n.lake-lineheight-115 {\n  line-height: 1.15;\n}\n.lake-lineheight-15 {\n  line-height: 1.5;\n}\n.lake-lineheight-17 {\n  line-height: 1.74;\n}\n.lake-lineheight-2 {\n  line-height: 2;\n}\n.lake-lineheight-25 {\n  line-height: 2.5;\n}\n.lake-lineheight-3 {\n  line-height: 3;\n}\n.lake-selected .lake-block-fallback {\n  border-color: #1890FF;\n}\n.lake-block-fallback-crown-icon {\n  width: 32px;\n  height: 32px;\n}\n.lake-block-fallback {\n  cursor: default;\n  padding: 32px;\n  background: #fafafa;\n  border: 1px solid #d8d8d8;\n  border-radius: 4px;\n}\n.lake-block-fallback .inner-content {\n  display: flex;\n  align-items: center;\n}\n.lake-block-fallback .inner-tips {\n  margin-left: 20px;\n  color: #8c8c8c;\n}\n.lake-block-fallback .main-tip {\n  font-size: 14px;\n  line-height: 20px;\n  margin-bottom: 4px;\n}\n.lake-block-fallback .sub-tip {\n  font-size: 12px;\n  line-height: 17px;\n}\n.lake-inline-fallback {\n  display: inline-flex;\n  vertical-align: middle;\n  align-items: center;\n  cursor: default;\n  font-size: 14px;\n  line-height: 14px;\n  color: #8c8c8c;\n  padding: 0 8px;\n  position: relative;\n}\n.lake-inline-fallback.show .fallback-tooltip {\n  left: -4px;\n  opacity: 1;\n  transition: opacity 0.1s 0.3s ease-in;\n}\n.lake-inline-fallback .lake-inline-fallback-icon {\n  width: 16px;\n  height: 16px;\n  margin-right: 6px;\n}\n.lake-inline-fallback .fallback-tooltip {\n  position: absolute;\n  top: 100%;\n  left: -9999994px;\n  max-width: unset!important;\n  background-color: #fff;\n  user-select: none;\n  opacity: 0;\n}\n.lake-inline-fallback .fallback-tooltip .ant-tooltip-inner {\n  background-color: #fff;\n  color: #8c8c8c;\n  font-size: 14px;\n  line-height: 20px;\n  white-space: nowrap;\n}\n.lake-inline-fallback .fallback-tooltip .ant-tooltip-arrow:before {\n  background-color: #fff;\n}\n');var me="data-lake-element",ge="anchor",ve="focus",ye="cursor",be="span[".concat(me,"=").concat(ge,"]"),ke="span[".concat(me,"=").concat(ve,"]"),we="span[".concat(me,"=").concat(ye,"]"),xe="data-lake-card",_e="data-ready-card",Ce="data-card-type",Ee="data-card-element",Oe="div[".concat(xe,"],span[").concat(xe,"]"),Se="div[".concat(_e,"],span[").concat(_e,"]"),Re="span[".concat(Ee,"=left]"),De="div[".concat(Ee,"=center],span[").concat(Ee,"=center]"),Ae="span[".concat(Ee,"=right]"),Te=["http:","https:","data:","dingtalk:","ftp:","mailto:","fleamarket:","alipays:"];function Pe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;("number"!=typeof e||e<5)&&(e=5);for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}function je(e,t){t=void 0===t?",":t;var n,r={},a=Array.isArray(e)?e:e.split(t);return Object.keys(a).forEach((function(e){var t=a[e];if(n=/^(\d+)\.\.(\d+)$/.exec(t))for(var i=parseInt(n[1],10);i<=parseInt(n[2],10);i++)r[i.toString()]=!0;else r[t]=!0})),r}function Me(e){return e.split("-").map((function(e,t){return t>0?e.charAt(0).toUpperCase()+e.substr(1):e})).join("")}function Ne(e){var t=function(e){var t=parseInt(e,10).toString(16).toUpperCase();return t.length>1?t:"0"+t};return e.replace(/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/gi,(function(e,n,r,a){return"#"+t(n)+t(r)+t(a)}))}function Le(e){return"string"!=typeof e?e:e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function Ie(e){return"string"!=typeof e?e:e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&")}function ze(e){return"string"==typeof e&&!(e=e.toLowerCase()).startsWith("data:text/html")&&(!!Te.some((function(t){return e.startsWith(t)}))||!(!e.startsWith("./")&&!e.startsWith("/"))||e.indexOf(":")<0)}function Be(e){var t;return e&&(t=/^(-?\d+)/.exec(e))?parseInt(t[1],10):0}function Fe(e){for(var t,n={},r=/\s+(?:([\w\-:]+)|(?:([\w\-:]+)=([^\s"'<>]+))|(?:([\w\-:"]+)="([^"]*)")|(?:([\w\-:"]+)='([^']*)'))(?=(?:\s|\/|>)+)/g;t=r.exec(e);){var a=(t[1]||t[2]||t[4]||t[6]).toLowerCase(),i=(t[2]?t[3]:t[4]?t[5]:t[7])||"";n[a]=i}return n}function Ve(e){e=e.replace(/&quot;/g,'"');for(var t,n={},r=/\s*([\w\-]+)\s*:([^;]*)(;|$)/g;t=r.exec(e);){var a=t[1].toLowerCase().trim(),i=Ne(t[2]).trim();n[a]=i}return n}function Ue(e){return e.replace(/<anchor\s*\/>/gi,"").replace(/<focus\s*\/>/gi,"").replace(/<cursor\s*\/>/gi,"")}function qe(e){return e.replace(/<anchor\s*\/>/gi,"<span ".concat(me,'="').concat(ge,'"></span>')).replace(/<focus\s*\/>/gi,"<span ".concat(me,'="').concat(ve,'"></span>')).replace(/<cursor\s*\/>/gi,"<span ".concat(me,'="').concat(ye,'"></span>')).replace(/(<card\s+[^>]+>).*?<\/card>/gi,(function(e,t){var n=Fe(t),r=n.type,a=n.name,i=n.value,o="inline"===n.type?"span":"div",c=["<".concat(o)];return c.push(" ".concat(Ce,'="').concat(r,'"')),c.push(" ".concat(_e,'="').concat(a,'"')),void 0!==i&&c.push(" ".concat("data-card-value",'="').concat(i,'"')),c.push("></".concat(o,">")),c.join("")}))}function He(e,t){var n=e.replace(/#.*$/,"").replace(/\/edit$/,"");return"".concat(n,"#").concat(t)}function We(e){if(!e)return e;var t=e.replace(/<(anchor|focus|cursor)[^>]*?\/>/gi,"");return/^<p(\s[^>]*?)><br \/><\/p>$/i.test(t)?e.replace(RegExp.$1,""):e}function Ye(e){try{e=encodeURIComponent(JSON.stringify(e))}catch(t){e=""}return"data:".concat(e)}function Ge(e){try{e.startsWith("data:")?(e=e.substr(5),e=JSON.parse(decodeURIComponent(e))):e=JSON.parse(e)}catch(t){e={}}return e}var Ke={md5:function(e){return d()(e)},toMap:je,toCamel:Me,toHex:Ne,escape:Le,unescape:Ie,escapeDots:function(e){return"string"!=typeof e?e:e.replace(/\./g,"&dot;")},unescapeDots:function(e){return"string"!=typeof e?e:e.replace(/&dot;/g,".")},validUrl:ze,sanitizeUrl:function(e){return ze(e)?e:""},addUnit:function(e,t){return t=t||"px",e&&/^-?\d+(?:\.\d+)?$/.test(e)?e+t:e},removeUnit:Be,getAttrMap:Fe,getCssMap:Ve,removeBookmarkTags:Ue,transformCustomTags:qe,getAnchorUrl:He,isCurrentPageUrl:function(e,t){if(t.startsWith("#"))return!0;var n=e.replace(/#.*$/,"").replace(/\/edit$/,"");return!!t.startsWith(n)&&(""===(t=t.substr(n.length))||t.startsWith("#"))},encodeCardValue:Ye,decodeCardValue:Ge,escapeRegExp:function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},protocols:Te,randomId:Pe,formatEngineValue:We},Xe=je("html,head,body,h1,h2,h3,h4,h5,h6,p,div,pre,blockquote,hr,ul,ol,li,table,thead,tbody,colgroup,col,tr,td,th,video,iframe"),$e=je("a,br,img"),Ze=je("b,strong,i,em,u,del,s,strike,code,mark,span,sub,sup"),Qe=je("br,hr,img,col,anchor,focus,cursor"),Je=je("table,thead,tbody,colgroup,col,tr,td,th,ul,ol,li"),et=je("h1,h2,h3,h4,h5,h6,p"),tt=je("h1,h2,h3,h4,h5,h6"),nt=je("h1,h2,h3,h4,h5,h6,p,blockquote,ul,ol"),rt=je("table,thead,tbody,tr,td,th"),at="data-lake-element",it="[".concat(at,"=").concat("root","]"),ot=function(){function e(t){c()(this,e),this.engine=t,this.listeners={}}return s()(e,[{key:"on",value:function(e,t,n){this.listeners[e]&&!n||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"off",value:function(e,t){var n=this.listeners[e];if(n)for(var r=0;r<n.length;r++)if(n[r]===t){n.splice(r,1);break}}},{key:"trigger",value:function(){var e=Array.prototype.slice.call(arguments),t=e.shift(),n=this.listeners[t];if(n){for(var r,a=0;a<n.length&&!1!==(r=n[a].apply(this.engine,e));a++);return r}}}]),e}(),ct={p:!0,ol:!0,ul:!0,li:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0};function lt(e,t){var n=t.nodeName,r=t.getAttribute("data-lake-id");if(r)return r;for(var a=e.querySelectorAll(n),i=0,o=a.length;i<o;i++)if(a[i]===t)return pt(t,i);return null}function st(e){Object.keys(ct).forEach((function(t){for(var n=e.querySelectorAll(t),r=0,a=n.length;r<a;r++){var i=n[r];i.getAttribute("data-lake-id")||pt(i,r)}}))}function ut(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t){var n=e.getAttribute("data-lake-id");if(n)return n}var r=d()("".concat(Math.random(),"_").concat(Date.now()));return e.setAttribute("data-lake-id",r),r}function dt(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.nodeType!==Node.ELEMENT_NODE&&e.nodeType!==Node.DOCUMENT_FRAGMENT_NODE||Object.keys(ct).forEach((function(n){for(var r=e.querySelectorAll(n),a=0,i=r.length;a<i;a++)ut(r[a],t)}))}function ft(e){return!!ct[e.toLowerCase()]}function pt(e,t){var n=e.nodeName.toLowerCase(),r=d()("".concat(n,"_").concat(t,"_").concat(e.innerText))+"_"+n+"_"+t;return e.setAttribute("data-lake-id",r),r}var ht={generateElementID:lt,generateElementIDForDescendant:st,generateRandomID:ut,needMarkElementID:ft,generateRandomIDForDescendant:dt};function mt(e){return e?e.ownerDocument||e.document||e:document}function gt(e){if(!e)return window;var t=mt(e);return t.parentWindow||t.defaultView||window}function vt(e,t){return e.nodeType===Node.ELEMENT_NODE&&(e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector).call(e,t)}var yt=function(){function e(t,n){c()(this,e),t.nodeType&&(t=[t]),this.events=[];for(var r=0;r<t.length;r++)this[r]=t[r],this.events[r]=new ot;this.length=t.length,this.length>0&&(this.doc=mt(n),this.root=n,this.name="string"==typeof this[0].nodeName?this[0].nodeName.toLowerCase():"",this.type=this.length>0?this[0].nodeType:null,this.win=gt(this[0]))}return s()(e,[{key:"toArray",value:function(){var e=[];return this.each((function(t){e.push(t)})),e}},{key:"removeFontSize",value:function(){var e=this.attr("class");e&&this.attr("class",e.replace(/lake-fontsize-[\d]{1,2}/,""))}},{key:"isElement",value:function(){return this.type===Node.ELEMENT_NODE}},{key:"isText",value:function(){return this.type===Node.TEXT_NODE}},{key:"isBlock",value:function(){return"inline"!==this.attr(Ce)&&!!Xe[this.name]}},{key:"isInline",value:function(){return!!$e[this.name]}},{key:"isRootBlock",value:function(){return!!nt[this.name]}},{key:"isSimpleBlock",value:function(){if(!this.isBlock())return!1;for(var e=this.first();e;){if(e.isBlock())return!1;e=e.next()}return!0}},{key:"isMark",value:function(){return!!Ze[this.name]}},{key:"isCard",value:function(){return!!this.attr(Ce)}},{key:"isBlockCard",value:function(){return"block"===this.attr(Ce)}},{key:"isVoid",value:function(){return!!Qe[this.name]}},{key:"isSolid",value:function(){return!!Je[this.name]}},{key:"isHeading",value:function(){return!!et[this.name]}},{key:"isTitle",value:function(){return!!tt[this.name]}},{key:"isTable",value:function(){return!!rt[this.name]}},{key:"isRoot",value:function(){return"root"===this.attr(at)}},{key:"isEditable",value:function(){return!this.isRoot()&&this.closest(it).length>0}},{key:"each",value:function(e){for(var t=0;t<this.length&&!1!==e(this[t],t);t++);return this}},{key:"eq",value:function(t){return this[t]?new e(this[t]):void 0}},{key:"index",value:function(){for(var e=this[0].previousSibling,t=0;e&&e.nodeType===Node.ELEMENT_NODE;)t++,e=e.previousSibling;return t}},{key:"parent",value:function(){var t=this[0].parentNode;return t?new e(t):void 0}},{key:"children",value:function(t){if(0===this.length)return new e([]);var n=this[0].childNodes;if(t){for(var r=[],a=0;a<n.length;a++){var i=n[a];vt(i,t)&&r.push(i)}return new e(r)}return new e(n)}},{key:"first",value:function(){if(0!==this.length){var t=this[0].firstChild;return t?new e(t):void 0}}},{key:"last",value:function(){if(0!==this.length){var t=this[0].lastChild;return t?new e(t):void 0}}},{key:"prev",value:function(){if(0!==this.length){var t=this[0].previousSibling;return t?new e(t):void 0}}},{key:"next",value:function(){if(0!==this.length){var t=this[0].nextSibling;return t?new e(t):void 0}}},{key:"prevElement",value:function(){if(0!==this.length){var t=this[0].previousElementSibling;return t?new e(t):void 0}}},{key:"nextElement",value:function(){if(0!==this.length){var t=this[0].nextElementSibling;return t?new e(t):null}}},{key:"contains",value:function(e){if(0!==this.length)return function(e,t){if(9===e.nodeType&&9!==t.nodeType)return!0;for(;t=t.parentNode;)if(t===e)return!0;return!1}(this[0],e[0]?e[0]:e)}},{key:"find",value:function(t){var n=[];return this[0]&&this.isElement()&&(n=this[0].querySelectorAll(t)),new e(n)}},{key:"closest",value:function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e.parentNode},r=[],a=this[0];a;){if(vt(a,t))return r.push(a),new e(r);a=n(a)}return new e(r)}},{key:"on",value:function(e,t,n){var r=this;return this.each((function(a,i){a.addEventListener(e,t,n||!1),r.events[i].on(e,t)})),this}},{key:"getBoundingClientRect",value:function(e){var t=this[0];if(t&&t.getBoundingClientRect){var n=t.getBoundingClientRect(),r=document.documentElement.clientTop,a=document.documentElement.clientLeft;return{top:n.top-r,bottom:n.bottom-r,left:n.left-a,right:n.right-a}}return e||null}},{key:"off",value:function(e,t){var n=this;return this.each((function(r,a){r.removeEventListener(e,t,!1),n.events[a].off(e,t)})),this}},{key:"removeAllEvents",value:function(){var e=this;return this.each((function(t,n){e.events[n]&&Object.keys(e.events[n].listeners).forEach((function(r){for(var a=e.events[n].listeners[r],i=0;i<a.length;i++)t.removeEventListener(r,a[i],!1)}))})),this.events=[],this}},{key:"offset",value:function(){var e=this[0].getBoundingClientRect();return{top:e.top,left:e.left}}},{key:"attr",value:function(e,t){var n=this;return void 0===e?Fe(this[0].cloneNode(!1).outerHTML):"object"===i()(e)?(Object.keys(e).forEach((function(t){var r=e[t];n.attr(t,r)})),this):void 0===t?this.length>0&&this.isElement()?this[0].getAttribute(e):"":(this.each((function(n){n.setAttribute(e,t)})),this)}},{key:"removeAttr",value:function(e){return this.each((function(t){t.removeAttribute(e)})),this}},{key:"hasClass",value:function(e){if(this[0]&&this[0].classList)for(var t=0;t<this[0].classList.length;t++)if(this[0].classList[t]===e)return!0;return!1}},{key:"addClass",value:function(e){return this.each((function(t){t.classList.add(e)})),this}},{key:"removeClass",value:function(e){return this.each((function(t){t.classList.remove(e)})),this}},{key:"css",value:function(e,t){var n=this;return void 0===e?Ve(this.attr("style")||""):"object"===i()(e)?(Object.keys(e).forEach((function(t){var r=e[t];n.css(t,r)})),this):void 0===t?0===this.length||this.isText()?"":this[0].style[Me(e)]||function(e,t){var n=gt(e),r=Me(t);return n.getComputedStyle(e,null)[r]}(this[0],e)||"":(this.each((function(n){n.style[Me(e)]=t})),this)}},{key:"width",value:function(){var e=this.css("width");return"auto"===e&&(e=this[0].offsetWidth),parseFloat(e)||0}},{key:"height",value:function(){var e=this.css("height");return"auto"===e&&(e=this[0].offsetHeight),parseFloat(e)||0}},{key:"html",value:function(e){return void 0===e?this.length>0?this[0].innerHTML:"":(this.each((function(t){t.innerHTML=e,dt(t)})),this)}},{key:"htmlKeepID",value:function(e){return void 0===e?this.length>0?this[0].innerHTML:"":(this.each((function(t){t.innerHTML=e})),this)}},{key:"text",value:function(e){return void 0===e?this.length>0?this[0].textContent:"":(this.each((function(t){t.textContent=e})),this)}},{key:"show",value:function(e){return void 0===e&&(e=this._originDisplay||""),"none"===e&&(e=""),"none"!==this.css("display")?this:this.css("display",e)}},{key:"hide",value:function(){return this[0]?(this._originDisplay=this[0].style.display,this.css("display","none")):self}},{key:"remove",value:function(){var e=this;return this.each((function(t,n){t.parentNode&&(t.parentNode.removeChild(t),delete e[n])})),this.length=0,this}},{key:"empty",value:function(){return this.each((function(e){for(var t=e.firstChild;t;){if(!e.parentNode)return;var n=t.nextSibling;t.parentNode.removeChild(t),t=n}})),this}},{key:"clone",value:function(t){var n=this[0].cloneNode(t);return dt(n,!0),ft(n.nodeName)&&ut(n,!0),new e(n)}},{key:"cloneKeepID",value:function(t){return new e(this[0].cloneNode(t))}},{key:"prepend",value:function(e){var t=this;return this.each((function(n){var r=bt(e,t.root);n.firstChild?n.insertBefore(r[0],n.firstChild):n.appendChild(r[0])})),this}},{key:"append",value:function(e){var t=this;return this.each((function(n){for(var r=bt(e,t.root),a=0;a<r.length;a++){var i=r[a];"string"==typeof e?n.appendChild(i.cloneNode(!0)):n.appendChild(i)}})),this}},{key:"before",value:function(e){var t=this;return this.each((function(n){var r=bt(e,t.root);n.parentNode.insertBefore(r[0],n)})),this}},{key:"after",value:function(e){var t=this;return this.each((function(n){var r=bt(e,t.root);n.nextSibling?n.parentNode.insertBefore(r[0],n.nextSibling):n.parentNode.appendChild(r[0])})),this}},{key:"replaceWith",value:function(t){var n=this,r=[];return this.each((function(e){var a=bt(t,n.root)[0];e.parentNode.replaceChild(a,e),r.push(a)})),new e(r)}}]),e}();function bt(e,t){if(t=t||document,!e)return[];if("string"==typeof e){var n=e.length;if("@"===e.charAt(0)&&(e=e.substr(1)),e.length!==n||/<.+>/.test(e)){var r=0===e.indexOf("<tr"),a=0===e.indexOf("<td");e=(e=e.trim()).replace(/<!--[^>]*-->/g,""),r&&(e="<table><tbody>".concat(e,"</tbody></table>")),a&&(e="<table><tbody><tr>".concat(e,"</tr></tbody></table>"));var i=document.createElement("div");return i.innerHTML=e,dt(i),r?i.querySelector("tbody").childNodes:a?i.querySelector("tr").childNodes:i.childNodes}return t.querySelectorAll(e)}if(e.constructor===NodeList)return e;if(void 0!==e.length&&e.each){var o=[];return e.each((function(e){o.push(e)})),o}if(Array.isArray(e))return e;if(e.nodeType===Node.DOCUMENT_FRAGMENT_NODE){for(var c=[],l=e.firstChild;l;)c.push(l),l=l.nextSibling;return c}return[e]}function kt(e,t){var n=bt(e,t);return new yt(n,t)}var wt=function(e,t){e=kt(e),t=kt(t).clone(!1);for(var n=e.first();n;){var r=n.next();t.append(n),n=r}return e.replaceWith(t)},xt="data-lake-indent",_t={blockquote:3,h1:2,h2:2,h3:2,h4:2,h5:2,h6:2,ul:2,ol:2,li:2,p:1};function Ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ot(e){return e?e.ownerDocument||e.document||e:document}function St(e){if(!e)return window;var t=Ot(e);return t.parentWindow||t.defaultView||window}function Rt(e,t,n){e.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(e=kt(e)[0]),n=void 0===n||n,t(e),function e(r){for(var a=n?r.firstChild:r.lastChild;a;){var i=n?a.nextSibling:a.previousSibling,o=t(a);if(!1===o)return;kt(a).attr(xe)||kt(a).attr(_e)||!0===o||e(a),a=i}}(e)}function Dt(e){var t=[];return Rt(e,(function(e){return t.push(e)})),t.shift(),t}function At(e,t){return e?t?e.trim().replace(/\blake-fontsize-\d+/g,"lake-fontsize").split(/\s+/):e.trim().split(/\s+/):[]}function Tt(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e=kt(e),t=kt(t),e.name!==t.name)return!1;var r=e.attr();delete r.style;var a=t.attr();delete a.style;var i=e.css(),o=t.css();delete r.class;var c=At(e[0].className,!n);delete a.class;var l=At(t[0].className,!n);return 0===Object.keys(r).length&&0===Object.keys(a).length&&0===Object.keys(i).length&&0===Object.keys(o).length&&0===c.length&&0===l.length||Object.keys(r).length===Object.keys(a).length&&Object.keys(i).length===Object.keys(o).length&&c.length===l.length&&!!Object.keys(r).every((function(e){return a[e]}))&&!!Object.keys(i).every((function(e){return n?o[e]===i[e]:o[e]}))&&c.every((function(e){return-1!==l.indexOf(e)}))}function Pt(e,t){if((e=kt(e)).isElement()){if(e.attr(xe)||e.find(Oe).length>0)return!1;if(e.attr(_e)||e.find(Se).length>0)return!1;if("br"!==e.name&&e.isVoid())return!1;if(e.find("hr,img,table").length>0)return!1;if(e.find("br").length>1)return!1}var n=e.isText()?e[0].nodeValue:e.text();return n=(n=n.replace(/\u200B/g,"")).replace(/\r\n|\n/,""),t&&(n=n.trim()),""===n}function jt(e){var t=e.childNodes;if(0===t.length)return!0;for(var n=0,r=t.length;n<r;n++){var a=t[n];if(a.nodeType===Node.TEXT_NODE){if(""!==a.data.replace(/\u200b/g,""))return!1}else if(a.nodeType===Node.ELEMENT_NODE){if(a.hasAttribute(xe))return!1;if(!jt(a))return!1}}return!0}function Mt(e){return Pt(e,!0)}function Nt(e){Rt(e,(function(e){if(e.nodeType===Node.TEXT_NODE){var t=e.nodeValue;if(2===t.length&&!(8203===t.charCodeAt(1)&&e.nextSibling&&e.nextSibling.nodeType===Node.ELEMENT_NODE&&[ge,ve,ye].indexOf(e.nextSibling.getAttribute(me))>=0)&&8203===t.charCodeAt(0)){var n=e.splitText(1);n.parentNode.removeChild(n.previousSibling)}}}))}function Lt(e){var t=e.first();t&&"br"===t.name&&e.children().length>1&&t.remove();var n=e.last();n&&"br"===n.name&&e.children().length>1&&n.remove()}function It(e){e.normalize()}function zt(e){return!(!e||!e[0])&&e.isCard()&&("checkbox"===e.attr("data-lake-card")||"checkbox"===e.attr("data-ready-card"))}function Bt(e){switch(e.name){case"li":return zt(e.first())||e.hasClass("lake-list-task");case"ul":return e.hasClass("lake-list");default:return!1}}function Ft(e,t){return e.name===t.name&&Bt(e)===Bt(t)&&(parseInt(e.attr(xt),10)||0)===(parseInt(t.attr(xt),10)||0)}function Vt(e,t){if(!_t[e.name]||!_t[t.name])return t;if(_t[e.name]>_t[t.name])return e;if(["ul","ol"].includes(e.name)&&["ul","ol"].includes(t.name)){var n=parseInt(t.attr(xt),10)||0,r=parseInt(e.attr(xt),10)||0,a=r?r+1:n+1;t.attr(xt,a)}return t}function Ut(e,t){for(var n,r,a,i,o=e[0].parentNode;o!==t;){if(o=kt(o),e.isCard())o.before(e);else if(n=o.name,r=e.name,["ol","ul"].includes(n)&&"li"===r||"blockquote"===n&&nt[r]&&"blockquote"!==r){var c=o.clone(!1);c.append(e),e=c,o.before(e)}else{var l=Vt(o,e);e=wt(e,l.clone(!1)),o.before(e)}o.first()||o.remove(),o=e[0].parentNode}"pre"===e.name&&(i=(a=e).first())&&"code"!==i.name&&(a.html().split(/\r?\n/).forEach((function(e){""===(e=e.replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;").trim())&&(e="<br />"),a.before("<p>".concat(e,"</p>"))})),a.remove())}function qt(e,t){t=t||e;for(var n=(e.type||e.nodeType)===Node.DOCUMENT_FRAGMENT_NODE,r=n?kt(e.firstChild):e.first(),a=n?kt("<p />"):e.clone(!1);r;){var i=r.next();if(r.isBlockCard()||r.isTable()||r.isSimpleBlock())Ut(r,t);else if(r.isBlock())qt(r,t);else{var o=a.clone(!1),c="li"===o.name;for(r.before(o);r;){i=r.next();var l="br"===r.name&&!c;if(o.append(r),l||!i||i.isBlock())break;r=i}Lt(o),Ut(o,t)}r=i}(e.first?e.first():e.firstChild)||e.remove()}function Ht(e,t){for(var n=t.first();n;){var r=n.next();e.append(n),n=r}t.remove()}function Wt(e){for(var t=e.firstChild;t;){for(var n=(t=kt(t)).next();n&&t.name===n.name&&("blockquote"===t.name||["ul","ol"].includes(t.name)&&Ft(t,n));){var r=n.next();Ht(t,n),Wt(t[0]),n=r}t=n}}function Yt(e,t){for(var n=e.parentNode;n;){if(n===t)return!0;n=n.parentNode}return!1}function Gt(e){var t=0;if(e){var n=e.parentNode;Array.from(n.childNodes).forEach((function(n,r){n===e&&(t=r)}))}return t}function Kt(e,t){for(var n=0,r=e;void 0!==t[n]&&r.childNodes[t[n]];)r=r.childNodes[t[n]],n++;return r}function Xt(e,t){if(!e||!e.parentNode)return null;for(;e.parentNode!==t;){if(!e.parentNode)return null;e=e.parentNode}return e}var $t={getDocument:Ot,getWindow:St,walkTree:Rt,fetchAllChildren:Dt,equalNode:Tt,isEmptyNode:Pt,isEmptyNodeWithTrim:Mt,isLikeEmptyNode:jt,removeZeroWidthSpace:Nt,removeSideBr:Lt,isCheckbox:zt,isTaskListBlock:Bt,isSameList:Ft,flatten:qt,join:Wt,normalize:function(e){qt(e),Wt(e)},removeMinusStyle:function(e,t){e.isBlock()&&(parseInt(e.css(t),10)||0)<0&&e.css(t,"")},inside:Yt,getIndex:Gt,getParentInContainer:Xt,combinTextNode:It,getChildByPath:Kt},Zt=v()("engine:common"),Qt={log:function(){var e=Array.prototype.slice.call(arguments);if(e[0]&&e[0].editArea){var t=e.shift(),n=t.editArea.closest("[data-lake-card]").length>0?"sub engine":"main engine";e.unshift(n)}Zt.apply(this,e)}},Jt=r.ua.edge,en=r.ua.safari;function tn(e){return!(!e||"[object Function]"!==Object.prototype.toString.call(e))}function nn(e){return"inline"===e.attr(Ce)&&"block"===e.css("display")}function rn(e){var t=e.getClientRects().item(0);return t||(t=e.getBoundingClientRect()),t}function an(e){var t=function(t,n,r){3===t.nodeType&&(0===n?r?e.setStartBefore(t):e.setEndBefore(t):n===t.nodeValue.length&&(r?e.setStartAfter(t):e.setEndAfter(t)))};t(e.startContainer,e.startOffset,!0),t(e.endContainer,e.endOffset,!1)}function on(e){var t=function(t,n,r){if(1===t.nodeType){var a,i,o,c,l=t.childNodes;0!==l.length&&(n>0&&(a=l[n-1]),n<l.length&&(i=l[n]),a&&3===a.nodeType&&(c=(o=a).nodeValue.length),i&&3===i.nodeType&&(o=i,c=0),o&&(r?e.setStart(o,c):e.setEnd(o,c)))}};t(e.startContainer,e.startOffset,!0),t(e.endContainer,e.endOffset,!1)}function cn(e,t){an(e);var n=function(n,r,a){var i;if(!((n=kt(n)).type===Node.TEXT_NODE||n.isSolid()||!t&&n.isBlock()||n.isRoot()))if(0===r){for(;!n.prev()&&(i=n.parent())&&!i.isSolid()&&(t||!i.isBlock())&&i.isEditable();)n=i;a?e.setStartBefore(n[0]):e.setEndBefore(n[0])}else if(r===n.children().length){for(;!n.next()&&(i=n.parent())&&!i.isSolid()&&(t||!i.isBlock())&&i.isEditable();)n=i;a?e.setStartAfter(n[0]):e.setEndAfter(n[0])}};n(e.startContainer,e.startOffset,!0),n(e.endContainer,e.endOffset,!1)}function ln(e){for(var t;e.startContainer.nodeType===Node.ELEMENT_NODE&&(t=e.startContainer.childNodes[e.startOffset])&&t.nodeType===Node.ELEMENT_NODE&&!kt(t).isVoid()&&!kt(t).attr(xe)&&!kt(t).attr(_e);)e.setStart(t,0);for(;e.endContainer.nodeType===Node.ELEMENT_NODE&&e.endOffset>0&&(t=e.endContainer.childNodes[e.endOffset-1])&&t.nodeType===Node.ELEMENT_NODE&&!kt(t).isVoid()&&!kt(t).attr(xe)&&!kt(t).attr(_e);)e.setEnd(t,t.childNodes.length)}function sn(e){var t=kt(e.commonAncestorContainer);if(t.isRoot()||t.isEditable()){var n=t.doc,r=t.closest(it);r.find(be).remove(),r.find(ke).remove(),r.find(we).remove();var a=kt(e.startContainer).closest(Oe);if(a.length>0&&!nn(a)&&(kt(e.startContainer).closest(Re).length>0&&e.setStartBefore(a[0]),kt(e.startContainer).closest(Ae).length>0&&e.setStartAfter(a[0])),e.startContainer!==e.endContainer){var i=kt(e.endContainer).closest(Oe);i.length>0&&!nn(i)&&(kt(e.endContainer).closest(Re).length>0&&e.setEndBefore(i[0]),kt(e.endContainer).closest(Ae).length>0&&e.setEndAfter(i[0]))}if(e.collapsed){var o=n.createElement("span");return kt(o).attr(me,ye),e.insertNode(o),Qt.log("createBookmark",!0),{anchor:o,focus:o}}var c=e.cloneRange();c.collapse(!0);var l=n.createElement("span");kt(l).attr(me,ge),c.insertNode(l),e.setStartAfter(l);var s=e.cloneRange();s.collapse(!1);var u=n.createElement("span");return kt(u).attr(me,ve),s.insertNode(u),Qt.log("createBookmark",!1),{anchor:l,focus:u}}}function un(e,t){if(t){if(Qt.log("moveToBookmark",t.anchor===t.focus),t.anchor===t.focus){var n=kt(t.anchor),r=n.parent();Nt(r),r[0].normalize();var a=!1,i=n.prev(),o=n.next();if(i&&i.isCard()&&!nn(i)){var c=i.find(Ae);c.length>0&&(e.selectNodeContents(c[0]),e.collapse(!1),a=!0)}else if(o&&o.isCard()&&!nn(o)){var l=o.find(Re);l.length>0&&(e.selectNodeContents(l[0]),e.collapse(!1),a=!0)}a||(e.setStartBefore(n[0]),e.collapse(!0)),Jt?(r[0].normalize(),n.remove()):(n.remove(),r[0].normalize())}else{var s=kt(t.anchor),u=s.parent();Nt(u),e.setStartBefore(s[0]),s.remove(),u[0].normalize();var d=kt(t.focus);Nt(u=d.parent()),e.setEndBefore(d[0]),d.remove(),u[0].normalize()}if(en){var f=window.getSelection();f.removeAllRanges(),f.addRange(e)}}}function dn(e){an(e);var t=kt(e.startContainer),n=e.startOffset;if(!t.isText()){var r=t.children();if(0!==r.length)return r.eq(n-1)}}function fn(e){an(e);var t=kt(e.endContainer),n=e.endOffset;if(!t.isText()){var r=t.children();if(0!==r.length)return r.eq(n)}}function pn(e){if(e.collapsed||e.extractContents(),!kt(e.startContainer).isRoot()){var t=kt(e.startContainer);if(!t.isRoot()){for(var n=t.parent();!n.isRoot();)t=n,n=n.parent();e.setEndAfter(t[0]);var r=e.extractContents();e.insertNode(r),e.collapse(!0)}}}function hn(e){var t=kt(e.startContainer);if(t.isRoot())return kt(t.children()[e.startOffset]);for(var n=t;!n.parent().isRoot();)n=n.parent();return n}function mn(e){r.ua.mobile&&e&&e.endContainer.scrollIntoView&&e.endContainer.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}function gn(e,t,n){if(e.collapsed)kn(t,n,vn(e.endContainer,e.endOffset));else{var r=vn(e.startContainer,e.startOffset),a=vn(e.endContainer,e.endOffset);kn(t,n,r),bn(t,n,a)||kn(t,n,a)}}function vn(e,t){return e.nodeType===Node.ELEMENT_NODE&&(e.childNodes[t]||e.childNodes[t-1])||e}function yn(e,t){var n=St(e),r=n.innerHeight,a=n.innerWidth,i={},o=i.top,c=i.left,l=i.bottom,s=i.right;if(t){var u=t.getBoundingClientRect();o=u.top,c=u.left,l=u.bottom,s=u.right}else{var d=e.getBoundingClientRect();o=d.top,c=d.left,l=d.bottom,s=d.right}return{top:o,left:c,bottom:Math.min(l,r),right:Math.min(s,a)}}function bn(e,t,n){var r;n.nodeType!==Node.ELEMENT_NODE&&(r=Ot(n).createElement("span"),n.nextSibling?n.parentNode.insertBefore(r,n.nextSibling):n.parentNode.appendChild(r),n=r);var a=n.getBoundingClientRect(),i=a.top,o=a.left,c=a.right,l=a.bottom,s=yn(e,t);return r&&r.parentNode.removeChild(r),!(i<s.top||l>s.bottom||o<s.left||c>s.right)}function kn(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"nearest";if(tn(Ot(n).body.scrollIntoView)){var a=null;n.nodeType===Node.ELEMENT_NODE&&"BR"!==n.nodeName||((a=Ot(n).createElement("span")).innerHTML="&nbsp;",n.parentNode.insertBefore(a,n),n=a),bn(e,t,n)||n.scrollIntoView({block:r,inline:r}),a&&a.parentNode.removeChild(a)}}function wn(e){var t=e.startContainer,n=e.endContainer,r=e.collapsed,a=[];if(t!==n||!0===r||t.nodeType===Node.TEXT_NODE)return a;for(var i=t.childNodes,o=e.startOffset,c=e.endOffset,l=o;l<c;l++)a.push(i[l]);return a}function xn(e){var t=kt(e.startContainer).closest("[data-lake-card]");return!(!t||!t[0])}function _n(e,t){return!(!e||!t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}var Cn={getClientRect:rn,upRange:an,downRange:on,enlargeRange:cn,shrinkRange:ln,createBookmark:sn,moveToBookmark:un,getPrevNode:dn,getNextNode:fn,deepCut:pn,getRootBlock:hn,scrollIntoView:mn,findElementsInSimpleRange:wn,getSubRanges:function(e){var t=[];return Rt(e.commonAncestorContainer,(function(n){if(n.nodeType===Node.TEXT_NODE){var r=n.nodeValue.length,a=e.comparePoint(n,0),i=e.comparePoint(n,r),o=document.createRange();if(a<0){if(i<0)return;0===i?(o.setStart(n,e.startOffset),o.setEnd(n,r)):(o.setStart(n,e.startOffset),o.setEnd(n,e.endOffset))}else{if(0!==a)return;if(i<0)return;0===i?(o.setStart(n,0),o.setEnd(n,r)):(o.setStart(n,0),o.setEnd(n,e.endOffset))}t.push(o)}})),t},isInViewport:bn,getViewPort:yn,scrollIntoViewIfNeeded:gn,isFunction:tn,isInCard:xn,isSameRange:_n,scrollRangeIntoView:function(e){var t=vn(e.endContainer,e.endOffset),n=t.nodeType===Node.TEXT_NODE?t.parentNode:t,r=e.collapsed?n.getBoundingClientRect():rn(e),a=window.innerHeight;r.bottom<a&&r.bottom>0||n.scrollIntoView({block:"center"})}};function En(e){for(var t=e=kt(e);e;){if(e.isRoot()||e.isBlock())return e;e=e.parent()}return t}function On(e,t){var n=kt(e["".concat(t,"Container")]),r=e["".concat(t,"Offset")],a=e.cloneRange(),i=En(n);a.selectNodeContents(i[0]),a.setEnd(n[0],r);var o=a.cloneContents();if(!o.firstChild)return!0;if(1===o.childNodes.length&&"br"===kt(o.firstChild).name)return!0;var c=kt("<div />");return c.append(o),!!Pt(c[0])}function Sn(e,t){var n=kt(e["".concat(t,"Container")]),r=e["".concat(t,"Offset")],a=e.cloneRange(),i=En(n);a.selectNodeContents(i[0]),a.setStart(n[0],r);var o=a.cloneContents();if(!o.firstChild)return!0;var c=kt("<div />");return c.append(o),!(c.find("br").length>0||!Pt(c[0]))}function Rn(e){var t=e.cloneRange();ln(t),on(t);var n=En(t.startContainer),r=En(t.endContainer),a=En(t.commonAncestorContainer),i=[],o=!1;return Rt(a[0],(function(e){if((e=kt(e))[0]===n[0]&&(o=!0),o&&e.isBlock()&&!e.isCard()&&e.isEditable()&&i.push(e),e[0]===r[0])return o=!1,!1})),i.length>1&&On(t,"end")&&i.pop(),i}function Dn(e){var t=e.block,n=e.range,r=e.isLeft,a=e.clone,i=e.keepID,o=(t=kt(t)).doc.createRange();r?(o.selectNodeContents(t[0]),o.setEnd(n.startContainer,n.startOffset)):(o.selectNodeContents(t[0]),o.setStart(n.endContainer,n.endOffset));var c=a?o.cloneContents():o.extractContents(),l=i?t.cloneKeepID(!1):t.clone(!1);return l.append(c),a&&l.find(Oe).each((function(e){var t=(e=kt(e)).attr(xe);e.attr(_e,t),e.removeAttr(xe)})),l}function An(e,t){var n=En(e.commonAncestorContainer);n.find("br").each((function(e){if((!(e=kt(e)).prev()||"checkbox"===e.prev().attr(xe))&&e.next()&&"br"!==e.next().name&&!["cursor","anchor","focus"].includes(e.next().attr(me))||!e.next()&&e.prev()&&"br"!==e.prev().name){if("left"===t&&e.prev()&&"checkbox"!==e.prev().attr(xe))return;e.remove()}})),!n.first()||1===n.children().length&&"checkbox"===n.first().attr(xe)?n.append("<br />"):2===n.children().length&&"checkbox"===n.first().attr(xe)&&["cursor","anchor","focus"].includes(n.last().attr(me))&&n.first().after("<br />")}function Tn(e){var t;if(["ol","ul"].includes(e.name))t=e;else{var n=Rn(e);if(0===n.length)return e;if(!(t=n[0].closest("ul,ol"))[0])return e}for(var r=[],a=parseInt(t.attr(xt),10)||0,i=t.prev();i&&["ol","ul"].includes(i.name);){if("ol"===i.name){var o=parseInt(i.attr(xt),10)||0,c=parseInt(i.attr("start"),10)||1,l=i.find("li").length;if(0===o){r[o]=c+l;break}o<=a&&(a=o,r[o]=r[o]||c+l)}else a=parseInt(i.attr(xt),10)||0;i=i.prev()}for(var s=t;s;){if(["ol","ul"].includes(s.name)){var u=parseInt(s.attr(xt),10)||0,d=parseInt(s.attr("start"),10),f=s.find("li").length;if("ol"===s.name){var p=r[u];u>0?((p=p||1)>1?s.attr("start",p):s.removeAttr("start"),r[u]=p+f):p&&p!==d?(p>1?s.attr("start",p):s.removeAttr("start"),r[u]=p+f):r[u]=(d||1)+f,r=r.slice(0,u+1)}}else r=[];s=s.next()}}var Pn=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e=kt(e),(t=kt(t)).isText())e.append(t);else{var r=t,a=["ul","ol"].includes(e.name),i=["ul","ol"].includes(t.name);if(a&&!i){var o=e.find("li");if(0===o.length)return;e=kt(o[o.length-1])}if(!a&&i){var c=t.find("li");c.length>0&&(t=kt(c[0])),c[1]&&(r=kt(c[0]))}for(var l=e.last(),s=t.first();s;){var u=s.next();e.isTitle()&&s.removeFontSize(),e.append(s),s=u}if(n&&r.remove(),l&&"br"===l.name)for(var d=l.next();d;){if(-1===[ge,ve,ye].indexOf(d.attr(me))){l.remove();break}d=d.next()}}},jn=function(e){for(var t=(e=kt(e)[0]).firstChild;t;){var n=t.nextSibling;e.parentNode.insertBefore(t,e),t=n}e.parentNode.removeChild(e)};function Mn(e){for(e=kt(e);e&&(e.isMark()||e.isText())&&!e.isRoot();)e=e.parent();return e}function Nn(e){var t=kt(e);if(!t.length)return null;for(;t&&!t.isRoot();)t=t.parent();return t}function Ln(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t.collapsed){var r=t.startContainer,a=t.startOffset,i=Nn(r);if(i){var o=t.cloneRange();if(o.selectNodeContents(i[0]),n){o.setEnd(r,a),an(o),cn(o,!0);var c=o.endContainer,l=o.endOffset;if(!e&&c.nodeType===Node.ELEMENT_NODE&&c.childNodes[l]&&kt(c.childNodes[l]).isBlock()&&(r.nodeType!==Node.ELEMENT_NODE||!kt(r.childNodes[a]||r.childNodes[a-1]).isBlock()))return;o.selectNodeContents(i[0]),o.setStart(c,l),ln(o),on(o),t.setStart(o.startContainer,o.startOffset),t.collapse(!0)}else{o.setStart(r,a),an(o),cn(o,!0);var s=o.startContainer,u=o.startOffset;if(!e&&s.nodeType===Node.ELEMENT_NODE&&s.childNodes[u]&&kt(s.childNodes[u]).isBlock()&&(r.nodeType!==Node.ELEMENT_NODE||!kt(r.childNodes[a]||r.childNodes[a-1]).isBlock()))return;o.selectNodeContents(i[0]),o.setEnd(s,u),ln(o),on(o),t.setEnd(o.endContainer,o.endOffset),t.collapse(!1)}}}}function In(e){var t=function(e){if(!e.collapsed){var t=e.cloneRange(),n=e.cloneRange();t.collapse(!0),n.collapse(!1),Ln(!0,t,!0),Ln(!0,n),e.setStart(t.startContainer,t.startOffset),e.setEnd(n.startContainer,n.startOffset)}return Ln(!1,e),e}(e.cloneRange()),n=t.startContainer,r=t.startOffset,a=t.endContainer,i=t.endOffset,o=n,c=a;n.nodeType===Node.ELEMENT_NODE&&n.childNodes[r]&&(o=n.childNodes[r]||n),a.nodeType===Node.ELEMENT_NODE&&i>0&&a.childNodes[i-1]&&(c=a.childNodes[i-1]||n),e.collapsed&&(o=c);var l=function(e){e=kt(e);for(var t=[];e&&(e.type!==Node.ELEMENT_NODE||"root"!==e.attr(at));)!e.isMark()||e.attr(xe)||e.attr(Ee)||t.push(e),e=e.parent();return t},s=l(o);return e.collapsed||(s=[].concat(w()(s),w()(l(c)),w()(function(e,t,n){var r=!1,a=!1,i=[];return t===n||Rt(e,(function(e){if(a)return!1;if(e!==t){if(r){if(e===n)return a=!0,!1;var o=kt(e);!o.isMark()||o.attr(xe)||o.attr(Ee)||i.push(o)}}else r=!0})),i}(e.commonAncestorContainer,o,c))).filter((function(e){return!e[0].finded&&(e[0].finded=!0,!0)})).map((function(e){return delete e[0].finded,e}))),s}function zn(e,t){if(!e||!e.length)return t;var n=kt(t)[0];return e.forEach((function(e){(e=kt(e)[0].cloneNode(!1)).appendChild(n),n=e})),n.outerHTML}function Bn(e,t){Dt(e).forEach((function(e){Pt(e)&&kt(e).isMark()&&(!t||t(e))&&jn(e)}))}function Fn(e,t){if(e.isCard())return!1;if(!t)return!0;var n=Vn(e[0]);return Vn(kt(t)[0])===n&&Tt(e,t)}function Vn(e){return!(!e.className||-1===e.className.indexOf("lake-fontsize-"))}function Un(e,t){if(e.collapsed)return e;var n=e.cloneRange();n.collapse(!0);var r=In(n);cn(e);var a=En(e.startContainer);if(!a.isRoot()&&!a.isEditable())return e;e.extractContents(),e.collapse(!0);var i=kt(e.startContainer),o=e.startOffset;if(i.isText())return e;var c=i[0].childNodes[o-1],l=i[0].childNodes[o],s=0===i[0].childNodes.length;if(!s){var u=i[0].firstChild;1===i[0].childNodes.length&&u.nodeType===Node.ELEMENT_NODE&&"LI"===i[0].nodeName&&"checkbox"===u.getAttribute("data-lake-card")&&(s=!0)}if(s&&i.isBlock()){var d=zn(r,"<br />");return i.isRoot()&&(d="<p>".concat(d,"</p>")),i.append(d),e.selectNode(i.find("br")[0]),e.collapse(!1),e}return c&&l&&kt(c).isBlock()&&kt(l).isBlock()&&!t&&function e(t,n,r,a){if(n.isBlock()&&!n.isVoid()&&!n.isCard()){t.selectNodeContents(n[0]),t.collapse(!1);var i=sn(t);Pn(n,r),un(t,i),n=dn(t),r=fn(t);var o=kt(t.startContainer);n||r||!o.isBlock()||(o.append(zn(a,"<br />")),t.selectNodeContents(o.find("br")[0]),t.collapse(!1)),n&&r&&!n.isCard()&&!r.isCard()&&e(t,n,r,a)}}(e,kt(c),kt(l),r),i.children().each((function(e){(e=kt(e)).isVoid()||e.isElement()&&""===e.html()&&e.remove()})),e}var qn=function(e,t){return Un(e,t)};function Hn(e,t,n){if("class"===t){var r=e[t].split(" "),a=[];return r.forEach((function(e){n(e)&&a.push(e)})),void(a.length>0?e[t]=a.join(" "):delete e[t])}}function Wn(e,t,n){if(t[n]){if("string"==typeof t[n]&&"@"===t[n].charAt(0))switch(t[n]){case"@number":t[n]=/^-?\d+(\.\d+)?$/;break;case"@length":t[n]=/^-?\d+(\.\d+)?(\w*|%)$/;break;case"@color":t[n]=/^(rgb(.+?)|#\w{3,6}|\w+)$/i;break;case"@url":t[n]=ze}if("string"==typeof t[n]){if("*"===t[n])return;return"class"===n?void Hn(e,n,(function(e){return t[n]===e})):void(t[n]!==e[n]&&delete e[n])}return Array.isArray(t[n])?"class"===n?void Hn(e,n,(function(e){return t[n].indexOf(e)>=0})):void(t[n].indexOf(e[n])<0&&delete e[n]):"object"===i()(t[n])&&"function"==typeof t[n].test?"class"===n?void Hn(e,n,(function(e){return t[n].test(e)})):void(t[n].test(e[n])||delete e[n]):void("function"!=typeof t[n]||t[n](e[n])||delete e[n])}delete e[n]}var Yn=function(e,t,n,r){if(!e)return!1;if(["anchor","focus","cursor","card"].indexOf(t)>=0)return!1;if(!e[t])return!0;if(!n)return!1;Object.keys(n).forEach((function(r){Wn(n,e[t],r)}));var a=e[t].style||{};return Object.keys(r).forEach((function(e){Wn(r,a,e)})),!1},Gn=function(e,t,n,r,a){if("div"===t&&(t="p"),!e)return t;if("card"===t||a)return t;for(var o=0;o<e.length;o++){var c=e[o],l=c[0],s=c[1];if("string"==typeof l&&t===l)return s;if("object"===i()(l)){var u=Object.keys(l)[0];if(t!==u)continue;for(var d=l[u],f=Object.keys(n),p=0;p<f.length;p++){var h=f[p];if(d[h]){if("string"==typeof d[h]&&d[h]===n[h])return delete n[h],s;if(Array.isArray(d[h])&&d[h].indexOf(n[h])>=0)return delete n[h],s}}for(var m=d.style||{},g=Object.keys(r),v=0;v<g.length;v++){var y=g[v];if(m[y]){if("string"==typeof m[y]&&m[y]===r[y])return delete r[y],s;if(Array.isArray(m[y])&&m[y].indexOf(r[y])>=0)return delete r[y],s}}}}return t},Kn=/[\u00a0 ]+/g,Xn="a".charCodeAt(0)-1;function $n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!(t=+t))return"•";switch(e.toLowerCase()){case"disc":return"•";case"circle":return"◦";case"square":return"◼";case"lower-alpha":return String.fromCharCode(Xn+t);case"lower-roman":return String.fromCharCode(8559+t);case"decimal":default:return t}}function Zn(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=e.first();i;){if(i.isElement()){var o=i.name,c=i.attr(),l=i.css();if(delete c.style,c[me]&&(o=c[me].toLowerCase(),c={},l={}),["left","right"].indexOf(c[Ee])>=0){i=i.next();continue}if(c[xe]||c[_e]){o="card";var s=c["data-card-value"],u=c["data-card-alias"];c={type:c[Ce],name:(c[xe]||c[_e]).toLowerCase()},u&&(c.alias=u),void 0!==s&&(c.value=s),l={}}o=Gn(t,o,c,l,r),"center"!==c[Ee]&&(n.onOpenTag&&n.onOpenTag(o,c,l),n.onOpenNode&&n.onOpenNode(i)),("card"!==o||a)&&Zn(i,t,n,r,a),"center"===c[Ee]||Qe[o]||(n.onCloseTag&&n.onCloseTag(o,c,l),n.onCloseNode&&n.onCloseNode(i))}if(i.isText()){var d=Le(i[0].nodeValue);""===d.trim()&&i.parent().isBlock()&&(i.prev()||(d=d.replace(/^[ \n]+/,"")),i.next()||(d=d.replace(/[ \n]+$/,""))),i.prev()&&i.prev().isBlock()&&i.next()&&i.next().isBlock()&&""===d.trim()&&(d=d.trim()),d=d.replace(/\u200B/g,""),n.onText&&n.onText(d),n.onTextNode&&n.onTextNode(i)}i=i.next()}}function Qn(e){var t="";return Object.keys(e).forEach((function(n){if("style"!==n){var r=e[n].replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");t+=" ".concat(n,'="').concat(r,'"')}})),t.trim()}function Jn(e){var t="";return Object.keys(e).forEach((function(n){var r=Le(e[n]);/^(padding|margin|text-indent)/.test(n)&&0===Be(r)||(/[^a-z]color$/.test(n)&&(r=Ne(r)),t+=" ".concat(n,": ").concat(r,";"))})),t.trim()}var er=function(){function e(t,n,r,a){if(c()(this,e),this.schemaRules=n?n.getValue():null,this.conversionRules=r?r.getValue():null,"string"==typeof t){t=(t=(t=t.replace(/<a\s{0,1000}\/>/gi,"<a></a>")).replace(/<a(\s[^>]+?)\/>/gi,(function(e,t){return"<a".concat(t,"></a>")}))).replace(/<p(>|\s+[^>]*>)/gi,"<div$1").replace(/<\/p>/gi,"</div>"),this.source=qe(t);var i=(new DOMParser).parseFromString(this.source,"text/html");this.root=kt(i.body)}else this.root=kt(t);a&&a(this.root)}return s()(e,[{key:"toValue",value:function(){return this._toValue(!1)}},{key:"_toValue",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=[],r=0;return Zn(this.root,this.conversionRules,{onOpenTag:function(t,a,i){if(!Yn(e.schemaRules,t,a,i)){if("pre"===t&&r++,n.push("<"),n.push(t),Object.keys(a).length>0&&n.push(" "+Qn(a)),Object.keys(i).length>0){var o=Jn(i);""!==o&&(n.push(' style="'),n.push(o),n.push('"'))}Qe[t]?n.push(" />"):n.push(">")}},onText:function(e){0===r&&(e=(e=e.replace(/^\n|\n$/g,"")).replace(/\n+/g," ")),t&&e.length>1&&(e=e.replace(Kn,(function(e){for(var t=[],n=0,r=(e=e.replace(/\u00a0/g," ")).length;n<r;n++)t[n]=n%2==0?e[n]:" ";return t.join("")}))),n.push(e)},onCloseTag:function(t,a,i){Yn(e.schemaRules,t,a,i)||("pre"===t&&--r<0&&(r=0),n.push("</".concat(t,">")))}}),n.join("")}},{key:"toDOM",value:function(){for(var e=qe(this.toValue()),t=(new DOMParser).parseFromString(e,"text/html"),n=t.createDocumentFragment(),r=t.body.childNodes;r.length>0;)n.appendChild(r[0]);return n}},{key:"toLowerValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return qe(this._toValue(e))}},{key:"toText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.includeCard,n=[];return Zn(this.root,this.conversionRules,{onOpenTag:function(e){"br"===e&&n.push("\n")},onText:function(e){e=(e=Ie(e)).replace(/\u00a0/g," "),n.push(e)},onOpenNode:function(e){var t=e[0];if("li"===e.name){if(e.hasClass("lake-list-task"))return;var r=e.parent(),a=r.css("listStyleType");if("ol"===r.name){for(var i=r[0].start,o=void 0===i?1:i,c=r[0].childNodes,l=-1,s=0,u=c.length;s<u&&("LI"===c[s].nodeName&&l++,c[s]!==t);s++);n.push("".concat($n(a,o+l),". "))}else"ul"===r.name&&n.push($n(a)+" ")}},onCloseNode:function(e){e.isBlock()&&n.push("\n")}},!1,t),n.join("").replace(/\n{2,}/g,"\n").trim()}}]),e}();function tr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tr(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rr=/(?:^|\s)lake-lineheight-(\d+)(?:\s|$)/,ar={"lake-lineheight-1":1,"lake-lineheight-115":1.15,"lake-lineheight-15":1.5,"lake-lineheight-17":1.74,"lake-lineheight-2":2,"lake-lineheight-25":2.5,"lake-lineheight-3":3},ir=function(){function e(t){c()(this,e),this.options=nr({callback:function(){},cards:null,typography:null},t),this.initCardParses()}return s()(e,[{key:"before",value:function(){}},{key:"after",value:function(){}},{key:"getDefaultCardParsers",value:function(){return{hr:function(e){var t=e.find("hr");t.css({"background-color":"#e8e8e8",border:"1px solid transparent",margin:"18px 0"}),e.empty(),e.append(t)},checkbox:function(e){var t="checked"===e.find("input").attr("checked"),n=kt("<span>".concat(t?"✅":"🔲","<span/>"));n.css({margin:"3px 0.5ex","vertical-align":"middle",width:"16px",height:"16px",color:"color: rgba(0, 0, 0, 0.65)"}),e.empty(),e.append(n)}}}},{key:"initCardParses",value:function(){this.cardParsers=this.getDefaultCardParsers(),this.options.cards&&(this.cardParsers=nr(nr({},this.cardParsers),this.options.cards))}},{key:"transAttrsToStyle",value:function(e){e.find("h1,h2,h3,h4,h5,h6").css({padding:"7px 0",margin:"0","font-weight":"700"}).each((function(e){"H1"===e.tagName?(e.style["font-size"]="28px",e.style["line-height"]="36px"):"H2"===e.tagName?(e.style["font-size"]="24px",e.style["line-height"]="32px"):"H3"===e.tagName?(e.style["font-size"]="20px",e.style["line-height"]="28px"):"H4"===e.tagName?(e.style["font-size"]="16px",e.style["line-height"]="24px"):"H5"===e.tagName?(e.style["font-size"]="14px",e.style["line-height"]="24px"):"H6"===e.tagName&&(e.style["font-size"]="14px",e.style["line-height"]="24px",e.style["font-weight"]="400")})),e.find(".lake-fontsize-9").css({"font-size":"12px"}).attr("data-mce-style","font-size: 9px"),e.find(".lake-fontsize-10").css({"font-size":"13px"}).attr("data-mce-style","font-size: 10px"),e.find(".lake-fontsize-11").css({"font-size":"14px"}).attr("data-mce-style","font-size: 11px"),e.find(".lake-fontsize-1515").css({"font-size":"15px"}).attr("data-mce-style","font-size: 15px"),e.find(".lake-fontsize-12").css({"font-size":"16px"}).attr("data-mce-style","font-size: 12px"),e.find(".lake-fontsize-14").css({"font-size":"19px"}).attr("data-mce-style","font-size: 14px"),e.find(".lake-fontsize-16").css({"font-size":"22px"}).attr("data-mce-style","font-size: 16px"),e.find(".lake-fontsize-18").css({"font-size":"24px"}).attr("data-mce-style","font-size: 18px"),e.find(".lake-fontsize-22").css({"font-size":"29px"}).attr("data-mce-style","font-size: 22px"),e.find(".lake-fontsize-24").css({"font-size":"32px"}).attr("data-mce-style","font-size: 24px"),e.find(".lake-fontsize-30").css({"font-size":"40px"}).attr("data-mce-style","font-size: 30px"),e.find(".lake-fontsize-36").css({"font-size":"48px"}).attr("data-mce-style","font-size: 36px"),e.find("p").each((function(e){e.style.lineHeight=function(e){var t=rr.exec(e.className);return t&&ar[t[0]]||1.74}(e),e.style.margin=0})),e.find(".lake-list-task").css({"list-style":"none"}),e.find("#article-title").css({"font-size":"36px","line-height":"1.389","font-weight":"700",color:"#262626"}),e.find("blockquote").each((function(e){(e=kt(e)).css({"margin-top":"5px","margin-bottom":"5px","padding-left":"1em","margin-left":"0px","border-left":"3px solid #eee",opacity:"0.6"}),e.hasClass("lake-alert")&&(e.css({margin:0,padding:"10px","border-radius":"3px",color:"#262626",opacity:1}),e.hasClass("lake-alert-info")?e.css({border:"1px solid #abd2da","background-color":"#e8f7ff"}):e.hasClass("lake-alert-warning")?e.css({border:"1px solid #e0d1b1","background-color":"#fffbe6"}):e.hasClass("lake-alert-danger")?e.css({border:"1px solid #deb8be","background-color":"#fff3f3"}):e.hasClass("lake-alert-success")?e.css({border:"1px solid #c2d2b5","background-color":"#edf9e8"}):e.hasClass("lake-alert-tips")&&e.css({border:"1px solid #c3c3c3","background-color":"#fff6b6"}))})),e.find("code").css({"font-family":"monospace","font-size":"inherit","background-color":"rgba(0,0,0,.06)",padding:"0 2px",border:"1px solid rgba(0,0,0,.08)","border-radius":"2px 2px","line-height":"inherit","overflow-wrap":"break-word","text-indent":"0"})}},{key:"parseCard",value:function(e){var t=this.cardParsers;e.find("[data-lake-card]").each((function(e){var n=(e=kt(e)).attr("data-lake-card"),r=t[n];r?r(e):e.empty()}))}},{key:"parseLink",value:function(e){e.find("a").each((function(e){e.setAttribute("href",e.href)}))}},{key:"parseLists",value:function(e,t){e.find("ul,ol").each((function(e){e=kt(e);var n,r=parseInt(e.attr("data-lake-indent"),10)||0,a=e.name,i={ul:["disc","circle","square"],ol:["decimal","lower-alpha","lower-roman"]}[a];e[0].removeAttribute("data-lake-indent");for(var o=0;o<=r;o++){if(0===o)n=e,e.css({"list-style-type":i[r%3]});else{var c=kt("<".concat(a,"></").concat(a,">"));n.before(c),c.append(n),(n=c).css({"list-style-type":"none"})}n.attr("lake-indent",o),n.css({margin:0,"padding-left":"23px"}),o===r&&n.css(t)}}))}},{key:"standardizeDel",value:function(e){e.find("del").each((function(e){var t=document.createElement("span");t.style["text-decoration"]="line-through",e.parentNode.insertBefore(t,e),t.innerHTML=e.innerHTML,e.parentNode.removeChild(e)}))}},{key:"standardizeTaskList",value:function(e){e.find(".lake-list-task").each((function(e){var t=(e=kt(e))[0].childNodes,n=t[0];if(0===t.length||1===t.length&&n.nodeType===Node.ELEMENT_NODE&&"checkbox"===n.getAttribute("data-lake-card"))e.append(kt("<br/>"));else{var r=e.find('[data-lake-card="checkbox"]');if(r.length>1)for(var a=1;a<r.length;a++)r[a].remove();if(0===r.length){var i="true"===e.attr("data-lake-checked")?"true":"false";e.prepend('\n        <span data-card-type="inline" data-lake-card="checkbox" contenteditable="false" data-card-value="data:'.concat(i,'">\n          <span data-card-element="body">\n            <span data-card-element="center">\n              <span class="lake-checkbox">\n                <input type="checkbox" class="lake-checkbox-input" value="" ').concat("true"===i?'checked="checked"':"",'>\n                <span class="lake-checkbox-inner"></span>\n              </span>\n            </span>\n          </span>\n        </span>\n      '))}}}))}},{key:"filter",value:function(e){Rt(e,(function(e){e&&e.nodeType===Node.ELEMENT_NODE&&"none"===e.style["user-select"]&&e.parentNode&&e.parentNode.removeChild(e)}))}},{key:"isClassicTypography",value:function(e){return this.options.typography?"classic"===this.options.typography:kt(e).hasClass("lake-typography-classic")}},{key:"parse",value:function(e,t,n){var r=this.options.callback,a=kt(document.createElement("div")),i=this.isClassicTypography(),o={"font-size":i?"15px":"14px",color:i?"#404040":"#262626","line-height":"1.74","letter-spacing":i?"0.008em":".05em","outline-style":"none","overflow-wrap":"break-word"};return t?(t.appendChild(e),kt(t).css(o),a.append(n)):a.append(e),this.before(a),this.filter(a),this.standardizeTaskList(a),this.standardizeDel(a),this.parseLists(a,o),this.parseCard(a),this.parseLink(a),a.find("p").css(o),this.transAttrsToStyle(a),this.after(a),r(a),{html:a.html(),text:new er(a).toText({includeCard:!0})}}}]),e}();function or(e){var t=e.cloneRange();if(!e.collapsed){var n=e.cloneRange();ln(n),t.setEnd(n.endContainer,n.endOffset)}var r=t.startContainer,a=t.startOffset,i=t.endContainer,o=t.endOffset,c=r,l=i;r.nodeType===Node.ELEMENT_NODE&&r.childNodes[a]&&(c=r.childNodes[a]||r),i.nodeType===Node.ELEMENT_NODE&&o>0&&i.childNodes[o-1]&&(l=i.childNodes[o-1]||r),e.collapsed&&(c=l);var s=function(e){e=kt(e);for(var t=[];e&&!e.isRoot();)e.isInline()&&t.push(e),e=e.parent();return t},u=s(c);return e.collapsed||(u=[].concat(w()(u),w()(s(l)),w()(function(e,t,n){var r=!1,a=!1,i=[];return t===n||Rt(e,(function(e){if(a)return!1;if(e!==t){if(r){if(e===n)return a=!0,!1;var o=kt(e);o.isInline()&&i.push(o)}}else r=!0})),i}(e.commonAncestorContainer,c,l))).filter((function(e){return!e[0].finded&&(e[0].finded=!0,!0)})).map((function(e){return delete e[0].finded,e}))),u}var cr=function(e,t){if(e=kt(e),t=(t=kt(t)).clone(!1),e.isText())return t.append(e.clone(!1)),e.replaceWith(t);if(t.isMark()){var n;if("span"===e.name&&"span"===t.name){var r=t.attr();delete r.style,Object.keys(r).forEach((function(t){e.attr(t,r[t])}));var a=t.css();Object.keys(a).forEach((function(t){e.css(t,a[t])})),n=e}else n=function(e,t){return t.append(e.clone(!0)),Dt(t).forEach((function(e){(e=kt(e)).isMark()&&Tt(e,t)&&jn(e)})),e.replaceWith(t)}(e,t);return function(e){return Dt(e).forEach((function(t){if((t=kt(t)).isMark()){var n=function(e,t){var n=e.css(),r=t.css(),a=e.attr("class"),i=t.attr("class"),o={},c={};return Object.keys(n).length<Object.keys(r).length?Object.keys(n).forEach((function(e){r[e]&&(o[e]=!0)})):Object.keys(r).forEach((function(e){n[e]&&(o[e]=!0)})),a&&i&&a.indexOf("lake-fontsize-")>-1&&i.indexOf("lake-fontsize-")>-1&&(c["font-size"]=!0),Et(Et({},o),c)}(t,e);Object.keys(n).forEach((function(e){!function(e,t){if("font-size"!==t)e[0].style[t]="";else{var n=e.attr("class");e.attr("class",n.replace(/lake-fontsize-[0-9]{1,5}/,""))}}(t,e)}))}})),e}(n)}var i=e.clone(!1);return e.after(i),t.append(e),i.replaceWith(t)},lr=function(e,t){e=kt(e);var n=t||{},r=n.style||{};return Object.keys(n).forEach((function(t){var r=n[t];"style"!==t&&e.attr(t,r)})),Object.keys(r).forEach((function(t){var n=r[t];/^0(px|em)?$/.test(n)&&(n=""),e.css(t,n)})),e},sr={getClosest:Mn,getActiveMarks:In,removeEmptyMarks:Bn,canRemoveMark:Fn,removeEmptyMarksAndAddBr:function e(t,n){if(t&&!t.isRoot()&&!t.isCard()&&!t.attr(me)&&!t.attr(me)){var r=t.parent();if(1===t.children().length&&t.first().attr(me))return void(t.isMark()?(t.before(t.first()),t.remove(),e(r,!0)):n&&t.isBlock()&&t.prepend("<br />"));var a=t.html();""!==a&&"​"!==a||(t.isMark()?(t.remove(),e(r,!0)):n&&t.isBlock()&&t.html("<br />"))}},getActiveInlines:or,getClosestBlock:En,getRangeBlocks:Rn,getActiveBlocks:function(e){ln(e=e.cloneRange());var t=e.startContainer,n=e.startOffset,r=e.endContainer,a=e.endOffset,i=t,o=r;t.nodeType===Node.ELEMENT_NODE&&t.childNodes[n]&&(i=t.childNodes[n]||t),r.nodeType===Node.ELEMENT_NODE&&a>0&&r.childNodes[a-1]&&(o=r.childNodes[a-1]||t),e.collapsed&&(i=o);var c=function(e,t,n){e.some((function(e){return e[0]===t[0]}))||(n?e.unshift(t):e.push(t))},l=function(e){e=kt(e);for(var t=[];e&&!e.isRoot();)e.isBlock()&&t.push(e),e=e.parent();return t},s=Rn(e);return l(i).forEach((function(e){return c(s,e,!0)})),e.collapsed||l(o).forEach((function(e){return c(s,e)})),s},isBlockFirstOffset:On,isBlockLastOffset:Sn,getBlockLeftText:function(e,t){return Dn({block:e,range:t,isLeft:!0,clone:!0}).text().trim()},removeBlockLeftText:function(e,t){e=kt(e),sn(t);var n=e.find(we),r=!1;Rt(e[0],(function(e){if((e=kt(e))[0]===n[0])return n.remove(),void(r=!0);r&&e.isText()&&e.remove()}),!1)},addOrRemoveBr:An,addListStartNumber:Tn,brToParagraph:function(e){if(e.first()&&1!==e.children().length&&!e.isTable()&&"li"!==e.name&&(2!==e.children().length||"cursor"!==e.first().attr(me))&&"cursor"!==e.last().attr(me)){for(var t,n,r=e.first();r;){var a=r.next();t&&"br"!==r.name||(n=t,t=e.clone(!1),e.before(t)),"br"!==r.name&&t.append(r),"br"!==r.name&&a||!n||n.first()||n.append("<br />"),r=a}t&&!t.first()&&t.remove(),e.remove()}},wrapNode:cr,unwrapNode:jn,setNode:wt,setNodeProps:lr,mergeNode:Pn},ur=$t.isCheckbox,dr={orderedlist:"ol",unorderedlist:"ul",tasklist:"ul"},fr={ol:"orderedlist",ul:"unorderedlist"};function pr(e,t){return $t.isSameList(e,t)}function hr(e,t){var n=dr[t],r=!0;return e.forEach((function(e){switch(e.name){case"li":r="tasklist"===t?r&&vr(e):r&&!vr(e);break;case"p":e.parent()&&"li"!==e.parent().name&&(r=!1);break;case n:case"blockquote":break;default:r=!1}})),r}function mr(e){var t=e.name;return vr(e)?"tasklist":("li"===t&&e.parent()&&(t=e.parent().name),fr[t]||"")}function gr(e){for(var t="",n=0;n<e.length;n++){var r=e[n].name,a=e[n].parent(),i=void 0;switch(r){case"li":case"ul":case"ol":i=mr(e[n]);break;case"p":if(!a||"li"!==a.name)return"";i=mr(a);break;case"blockquote":break;default:return""}if(t&&i&&t!==i)return"";t=i}return t}function vr(e){return $t.isTaskListBlock(e)}function yr(e){var t=0,n=kt("<p />");e.forEach((function(e){if(xr(e),["ul","ol"].includes(e.name)&&(t=parseInt(e.attr(xt),10)||0,sr.unwrapNode(e)),"li"===e.name){var r=n.clone(!1);0!==t&&r.css("padding-left",2*t+"em"),sr.setNode(e,r)}}))}function br(e,t,n){e.forEach((function(e){!function(e,t,n){var r,a=dr[t];xr(e);var i=kt("<".concat(a," />")),o=kt("<li />");switch(e.name){case"li":case a:return e;case"ol":case"ul":return i.attr(e.attr()),sr.setNode(e,i);case"p":return"li"===e.parent().name?void(e=sr.unwrapNode(e,"<p />")):(r=Ke.removeUnit(e.css("padding-left"))/2,e=sr.setNode(e,o),r&&i.attr(xt,r),n&&i.attr("start",n),e=sr.wrapNode(e,i));case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":e=sr.setNode(e,o),sr.wrapNode(e,i)}}(e,t,n)}))}function kr(e,t){var n=this;e.forEach((function(e){vr(e)||wr.call(n,e,t)}))}function wr(e,t){var n,r=kt('<ul class="lake-list"/>'),a=kt('<li class="lake-list-node lake-list-task"/>');switch(e.name){case"li":return e.addClass("lake-list-node"),e.addClass("lake-list-task"),_r.call(this,e,t),e;case"ul":return e.addClass("lake-list"),e;case"ol":return r.attr(e.attr()),sr.setNode(e,r);case"p":return n=Ke.removeUnit(e.css("padding-left"))/2,e=sr.setNode(e,a),_r.call(this,e,t),n&&r.attr(xt,n),sr.wrapNode(e,r);case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return e=sr.setNode(e,a),_r.call(this,e,t),sr.wrapNode(e,r);default:return e}}function xr(e){switch(e.name){case"li":return e.removeClass("lake-list-node"),e.removeClass("lake-list-task"),(t=e).find("[data-lake-card=checkbox]").remove(),t.find("[data-ready-card=checkbox]").remove(),e;case"ul":return e.removeClass("lake-list"),e;default:return e}var t}function _r(e,t){if(e=kt(e),!ur(e.first())){var n=this.card.createComponent({name:"checkbox",value:!!t,engine:this}),r=document.createRange();r.selectNodeContents(e[0]),r.collapse(!0),this.card.insertNode(r,n)}}function Cr(e,t){if(e&&"li"===e.name)if(t&&_r.call(this,e),e.first()){var n=e.first();if(ur(n)){var r=n.next();r&&""!==r[0].nodeValue||e.append("<br />")}}else e.append("<br />")}function Er(e){var t=kt(e.startContainer),n=e.startOffset,r=e.cloneRange(),a="li"===t.name?t:t.closest("li");if(!a[0])return!1;r.selectNodeContents(a[0]),r.setEnd(t[0],n);var i=r.cloneContents();if(!i.firstChild)return!0;if(1===i.childNodes.length&&"br"===kt(i.firstChild).name)return!0;if(1===i.childNodes.length&&ur(kt(i.firstChild)))return!0;if(2===i.childNodes.length&&ur(kt(i.firstChild))&&$t.isEmptyNode(i.lastChild))return!0;var o=kt("<div />");return o.append(i),!!$t.isEmptyNode(o[0])}var Or={exportParser:new ir};function Sr(e,t){var n,r=window.getSelection(),a=(n=r.rangeCount>0?r.getRangeAt(0):document.createRange()).cloneRange(),i=kt('<div class="lake-engine-view">&#8203;</div>');i.css({position:"fixed",top:0,clip:"rect(0, 0, 0, 0)"}),i.on("copy",(function(e){Dr(e)})),kt(document.body).append(i),i.append(kt(e).clone(!0)),t&&$t.fetchAllChildren(i).forEach((function(e){e=kt(e),t.trigger("copy:each",e)})),i.append("@&#8203;"),n.selectNodeContents(i[0]),r.removeAllRanges(),r.addRange(n);var o=!1;try{if(!(o=document.execCommand("copy")))throw"copy command was unsuccessful"}catch(e){Qt.log("unable to copy using execCommand: ",e)}finally{i.remove(),r.removeAllRanges(),r.addRange(a)}return o}function Rr(e){var t=e.dataTransfer||e.clipboardData,n=t.getData("text/html"),r=t.getData("text"),a=[];try{t.items&&t.items.length>0?a=Array.from(t.items).map((function(e){var t="file"===e.kind?e.getAsFile():null;return null!==t&&(t.type&&t.type.indexOf("image/png")>-1&&!t.lastModified&&(t=new File([t],"image.png",{type:t.type})),t.ext=r.split(".").pop()),t})).filter((function(e){return e})):t.files&&t.files.length>0&&(a=Array.from(t.files))}catch(e){Qt.log(e),t.files&&t.files.length>0&&(a=Array.from(t.files))}return""===n&&/^.+\.\w+$/.test(r)&&a.length>0?r="":""===r&&/^(<meta.+?>)?<img.+?>$/.test(n)&&a.length>0?n="":(n||r)&&a.length&&(n.startsWith("<img")||!n&&/^http(s)?:/.test(r)||(a=[])),{html:n,text:r,files:a}}function Dr(e,t,n){if(void 0===t&&(t=Or.exportParser),null!==t){var r=window.getSelection().getRangeAt(0);if(Or.preventCopySwitch&&Or.preventCopyContainer&&(Or.preventCopyContainer.contains(r.startContainer)||Or.preventCopyContainer.contains(r.endContainer)||r.commonAncestorContainer.contains(Or.preventCopyContainer)))return Or.preventCopyMessage(),void e.preventDefault();var a=kt((r=r.cloneRange()).startContainer).closest("[data-lake-card]",(function(e){return kt(e).isRoot()?null:e.parentNode}));if(a.length&&!r.collapsed&&0===r.endOffset&&(r.endContainer.previousSibling&&r.setEndAfter(r.endContainer.previousSibling),!r.collapsed&&r.endOffset>0&&r.endContainer.childNodes[r.endOffset-1]===a[0])){var i=kt(r.startContainer).closest('[data-card-element="center"]',(function(e){return kt(e).isRoot()?null:e.parentNode}));i.length?r.setEnd(i[0],i[0].childNodes.length):r.setEnd(a[0],a[0].childNodes.length)}var o=kt(r.commonAncestorContainer),c=o.closest("[data-lake-card]",(function(e){return kt(e).isRoot()?null:e.parentNode}));c.length&&(o.closest('[data-card-element="center"]',(function(e){return kt(e).isRoot()?null:e.parentNode})).length||(r.selectNode(c[0]),o=kt(r.commonAncestorContainer)));var l="#text"===o.name?[document.createElement("span")]:[],s=o.closest("[data-lake-card]",(function(e){return kt(e).isRoot()?null:(e.nodeType===Node.ELEMENT_NODE&&"inline"===window.getComputedStyle(e).getPropertyValue("display")&&l.push(e.cloneNode()),e.parentNode)})),u=o.find(".lake-engine-view").length>0||o.find(".lake-engine").length>0,d=o.closest(".lake-engine-view").length>0||o.closest(".lake-engine").length>0;if(!(s.length>0||!u&&!d)){if(d&&!o.isRoot()){var f=En(o),p=f.name;["h1","h2","h3","h4","h5","h6"].indexOf(p)>-1&&l.push(f[0].cloneNode())}if(e.preventDefault(),r.collapsed)e.clipboardData.setData("text/html",""),e.clipboardData.setData("text","");else{var h=r.cloneContents(),m=function(e){if(0===e.length)return{};for(var t=e.length-1;t>0;t--)e[t].appendChild(e[t-1]);return{inner:e[0],outter:e[e.length-1]}}(l),g=((k=(b=kt(r.commonAncestorContainer)).closest(".lake-engine")).length||(k=b.closest(".lake-engine-view")),k.length||(k=b.find(".lake-engine")),k.length||(k=b.find(".lake-engine-view")),k.length?kt(k).hasClass("lake-typography-classic")?"classic":"traditional":"classic"),v=t.options.typography;t.options.typography=g;var y=t.parse(h,m.inner,m.outter);t.options.typography=v,y.html&&(y.html='<meta name="source" content="lake"/>'+y.html),n&&n(),e.clipboardData.setData("text/html",y.html),e.clipboardData.setData("text",y.text)}var b,k}}}function Ar(){kt(document).on("copy",(function(e){Dr(e)}))}Or.writeClipboard=Dr,Or.customClipboard=Ar,Or.copyText=function(e){return b()(e)},Or.copyNode=Sr,Or.getClipboardData=Rr,Or.preventCopySwitch=!1,Or.preventCopyContainer=null,Or.preventCopyMessage=function(){console.log("禁止复制")},window.hasRegisterLakeDocClipboard||(Ar(),window.hasRegisterLakeDocClipboard=!0);var Tr={dataURIToFile:function(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var n=e.split(",")[0].split(":")[1].split(";")[0],r=new Uint8Array(t.length),a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return new Blob([r],{type:n})}};function Pr(e){if(!e)return 0;var t=parseInt(e.percent,10);return 100===t&&(t=99),t}function jr(e,t,n){e.history.hold(),e.change.updateCard(t,n)}function Mr(e,t,n,r){var a=new Image;a.src=n.src,a.onload=function(){jr(e,t,n)},a.onerror=function(){r<=3?setTimeout((function(){r++,Mr(e,t,n,r)}),500*r):jr(e,t,n)}}var Nr={getUploadPercent:Pr,insertCard:function(e,t,n){return t.indexOf(":")>=0&&(t=t.split(":")[1]),"image"!==t&&(n.src=""),n.status="uploading",n.percent=Pr(n.progress),e.change.insertCard(t,n)},updateCardProgress:function(e,t){t.status="uploading";var n=Pr(t.progress);e.find("[data-role=percent]").html("".concat(n,"%"))},updateCard:function(e,t,n){var r=t.attr("data-lake-card");if("done"===n.status){var a=e.card.getValue(t);return a.status="done",a.src=n.src,a.message=n.message,a.size=a.size||0,void("image"===r?(a.ocrLocations=n.ocrLocations,Mr(e,t,a,0)):jr(e,t,a))}if("error"===n.status){var i=e.card.getValue(t);i.status="error",i.src="",i.message=n.message,i.size=i.size||0,e.history.hold(),e.change.updateCard(t,i)}},updateImage:Mr};function Lr(e,t){return Math.floor(e+Math.random()*(t-e))}function Ir(e){if((e=kt(e)).isElement()){if(["cursor","anchor","focus"].includes(e.attr("data-lake-element")))return!0;if(e.attr("data-transient"))return!0;if(!e.isCard()&&e.closest(Oe).length>0)return!0;if(e.isCard()&&e.parent()&&e.parent().closest(Oe).length>0)return!0}return!1}function zr(e,t){return!(!(e=kt(e)).isRoot()||/^data-selection-/.test(t))||!(!e.isCard()||!["id","class","style"].includes(t))}function Br(e){return Fr(e.cloneRange())}function Fr(e){var t=kt(e.commonAncestorContainer);if(!t.isRoot()&&!t.isEditable())return[];Cn.downRange(e);var n=function(e,t){for(var n=e,r=[];n&&!kt(n).isRoot();){for(var a=n.previousSibling,i=0;a;)kt(a).attr("data-transient")||i++,a=a.previousSibling;r.unshift(i),n=n.parentNode}return r.push(t),r};return[n(e.startContainer,e.startOffset),n(e.endContainer,e.endOffset)]}function Vr(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];qr(r,e[n+1])?n++:t.push(r)}return t}function Ur(e){return(e.oi||e.od)&&e.p&&2===e.p.length&&1===e.p[0]&&e.p[1].startsWith("data-selection-")}function qr(e,t){return!!(e&&t&&(e.li&&t.ld&&E()(e.li,t.ld)&&(E()(e.p,t.p)||Hr(e.p,t.p)||Hr(t.p,e.p))||e.ld&&t.li&&E()(e.ld,t.li)&&E()(e.p,t.p)||e.si&&t.sd&&E()(e.si,t.sd)&&(E()(e.p,t.p)||Hr(e.p,t.p,e.si.length)||Hr(t.p,e.p,e.si.length))||e.sd&&t.si&&E()(e.sd,t.si)&&E()(e.p,t.p)))}function Hr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(e.length!==t.length)return!1;var r=t.slice();return r[r.length-1]-=n,E()(e,r)}function Wr(e,t){var n=[];return t.forEach((function(e){n.push(e.ops)})),n.forEach((function(t){e=_.a.type.transform(e,t,"left")})),e}function Yr(e,t){if(Kr(t.p,e))if("li"in t)e[t.p.length-1]+=1;else if("ld"in t)e[t.p.length-1]-=1;else if("si"in t)e[t.p.length-1]+=t.si.length;else if("sd"in t){var n=t.p.length;e[n-1]-=t.sd.length,e[n-1]=Math.max(t.p[n-1],e[n-1])}return e}function Gr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=p()(e,2),r=n[0],a=n[1];if(!r||!a)return e;var i=r.map((function(e){return e+2})),o=a.map((function(e){return e+2})),c=[];return t.forEach((function(e){c=c.concat(e.ops)})),c.forEach((function(e){Yr(i,e),Yr(o,e)})),[i.map((function(e){return e-2})),o.map((function(e){return e-2}))]}function Kr(e,t){for(var n=0;void 0!==e[n];){if(!t[n])return!1;if(e[n]===t[n])n++;else{if(e[n]>t[n])return!1;if(e[n]<t[n])return void 0===e[n+1]}}return!0}function Xr(e,t){var n=e;return t.forEach((function(t){t.p[t.p.length-1]-2<=e&&("li"in t?n-=1:"ld"in t&&(n+=1))})),n}var $r={random:Lr,randomString:function(){for(var e=8,t="23456789abcdefghijkmnpqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",n=t.length,r="";e--;)r+=t[Lr(0,n)];return r},isTransientElement:Ir,isTransientAttribute:zr,toPath:Fr,fromPath:function(e,t){var n=t[0].pop(),r=t[1].pop(),a=function(t){for(var n=kt(e)[0],r=0;r<t.length;r++){var a=t[r];a<0&&(a=0);for(var i=void 0,o=n.firstChild,c=0;o;)if(kt(o).attr("data-transient"))o=o.nextSibling;else{if(c===a||!o.nextSibling){i=o;break}c++,o=o.nextSibling}if(!i)break;n=i}return n},i=function(e,t,n,r){n&&(r<0&&(r=0),n.nodeType===Node.ELEMENT_NODE&&r>n.childNodes.length&&(r=n.childNodes.length),n.nodeType===Node.TEXT_NODE&&r>n.nodeValue.length&&(r=n.nodeValue.length),t[e](n,r))},o=a(t[0]),c=a(t[1]),l=document.createRange();return i("setStart",l,o,n),i("setEnd",l,c,r),l},reduceOperations:Vr,isCursorOp:Ur,isReverseOp:qr,transformOp:Wr,transformPath:Gr,affectPath:Kr,getRangePath:Br,getOldIndex:Xr};function Zr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zr(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Jr=function(){function e(t){if(c()(this,e),!t.container)throw new Error("please set a dom cantainer!");this.options=Qr({container:null,limitHeight:5e3,canvasCache:[],canvasCount:0},t),t.container.style["line-height"]="0px"}return s()(e,[{key:"_removeCanvas",value:function(){var e=this.options;e.canvasCache.forEach((function(e){e.parentElement.removeChild(e)})),e.canvasCache=[]}},{key:"_getCanvas",value:function(e){return e=e>0?e-1:e,this.options.canvasCache[e]}},{key:"resize",value:function(e,t){var n=this.options,r=n.limitHeight,a=n.canvasCount,i=n.container,o=Math.ceil(t/r),c=n.canvasCache;if(o!==a){this._removeCanvas(),c=[];for(var l=0;l<o;l++){var s=document.createElement("canvas");s.style["vertical-align"]="bottom",s.setAttribute("width",e),l===o-1?s.setAttribute("height",t%r):s.setAttribute("height",r),i.appendChild(s),c.push(s)}n.canvasCache=c}else{var u=this._getCanvas(o);c.forEach((function(t){t.setAttribute("width",e)})),u&&u.setAttribute("height",t%r)}}},{key:"_handleSingleRect",value:function(e){var t=e.x,n=e.y,r=e.index,a=e.width,i=e.height,o=e.callback,c=this.options.limitHeight,l=this._getCanvas(r);l&&o({x:t,y:n-c*(r-1),width:a,height:i,context:l.getContext("2d")})}},{key:"_drawRect",value:function(e){var t=e.x,n=e.y,r=e.width,a=e.height,i=e.fill,o=void 0===i?"#FFEC3D":i,c=e.stroke,l=void 0===c?"#FFEC3D":c;this._handleRect({x:t,y:n,width:r,height:a,callback:function(e){var t=e.x,n=e.y,r=e.width,a=e.height,i=e.context;i.fillStyle=o,i.strokeStyle=l,i.fillRect(t,n,r,a)}})}},{key:"_handleRect",value:function(e){var t=e.x,n=e.y,r=e.width,a=e.height,i=e.callback,o=this.options.limitHeight,c={x:t,y:n},l=n+a,s=Math.ceil(c.y/o),u=Math.ceil(l/o);s===u?this._handleSingleRect(Qr(Qr({},c),{},{index:s,width:r,height:a,callback:i})):(this._handleSingleRect(Qr(Qr({},c),{},{index:s,width:r,height:a,callback:i})),this._handleSingleRect(Qr(Qr({},c),{},{index:u,width:r,height:a,callback:i})))}},{key:"getImageData",value:function(e){var t=e.x,n=e.y,r=e.width,a=e.height,i=this.options.limitHeight,o=Math.ceil(n/i);return this._getCanvas(o).getContext("2d").getImageData(t,n,r,a)}},{key:"draw",value:function(e,t){this["_draw"+e](t)}},{key:"clearRect",value:function(e){var t=e.x,n=e.y,r=e.width,a=e.height;this._handleRect({x:t,y:n,width:r,height:a,callback:function(e){var t=e.x,n=e.y,r=e.width,a=e.height;e.context.clearRect(t,n,r,a)}})}},{key:"clear",value:function(){this.options.canvasCache.forEach((function(e){var t=e.getContext("2d"),n=Number(e.getAttribute("width")),r=Number(e.getAttribute("height"));t.clearRect(0,0,n,r)}))}},{key:"destroy",value:function(){this._removeCanvas()}}]),e}();function ea(e,t){Object.keys(t).forEach((function(n){"style"!==n&&(e[n]=t[n])})),t.style&&(e.style||(e.style={}),Object.keys(t.style).forEach((function(n){e.style[n]=t.style[n]})))}var ta=function(){function e(){c()(this,e),this.data={blocks:[],inlines:[],marks:[],globals:{}}}return s()(e,[{key:"add",value:function(e){var t=this;e=S()(e),Array.isArray(e)||(e=[e]),e.forEach((function(e){return function(e,t){var n;if("string"==typeof t?(n=t,(t={})[n]={}):n=Object.keys(t)[0],"div"===n)throw"setting div is not allowed";Xe[n]?e.blocks.push(t):$e[n]?e.inlines.push(t):(Ze[n]&&e.marks.push(t),["block","inline","mark"].indexOf(n)>=0&&(e.globals[n]||(e.globals[n]={}),ea(e.globals[n],t[n])))}(t.data,e)}))}},{key:"clone",value:function(){var t=S()(this.data),n=new e;return n.data=t,n}},{key:"getValue",value:function(){var e=this;Object.keys(this.data.globals).forEach((function(t){var n=e.data.globals[t];e.data[t+"s"].forEach((function(e){ea(e[Object.keys(e)[0]],n)}))}));var t={};return Object.keys(this.data).forEach((function(n){"globals"!==n&&e.data[n].forEach((function(e){var n=Object.keys(e)[0],r=e[n];t[n]?ea(t[n],r):t[n]=r}))})),t}}]),e}(),na=function(){function e(t){c()(this,e),this.source=t}return s()(e,[{key:"toHTML",value:function(){var e=Le(this.source);return(e=e.replace(/\n/g,"</p><p>").replace(/<p><\/p>/g,"<p><br /></p>").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;")).indexOf("</p><p>")>=0&&(e="<p>".concat(e,"</p>")),e}}]),e}(),ra={text:"plain",sh:"bash",ts:"typescript",js:"javascript",py:"python",puml:"plantuml",vb:"basic"},aa=function(e){e.renderer.rules.fence=function(t,n){var r=t[n],a=r.info?e.utils.unescapeAll(r.info).trim():"",i="";return"mermaid"===a?'<div class="mermaid" data-source="'.concat(encodeURIComponent(r.content),'"></div>\n'):"flow"===a?'<div class="flowchart" data-source="'.concat(encodeURIComponent(r.content),'"></div>\n'):"graphviz"===a?'<div class="graphviz" data-source="'.concat(encodeURIComponent(r.content),'"></div>\n'):"plantuml"===a?'<p><img src="https://g.yuque.com/g?'.concat(encodeURIComponent(r.content),'"></p>'):(a&&(i=a.split(/\s+/g)[0]).replace(/=$|=\d+$|=\+$|!$|=!$/,""),'<pre data-syntax="'.concat(i=ra[i]||i,'"><code>').concat(r.content,"</code></pre>"))}},ia=function(){function e(){c()(this,e);var t=this.md=new D.a({html:!0,linkify:!0,breaks:!0});t.use(T.a),t.use(j.a),t.use(N.a),t.use(I.a),t.use(B.a),t.use(V.a),t.use(q.a),t.use(W.a),t.use(aa)}return s()(e,[{key:"toHTML",value:function(e){return this.md.render(e)}}]),e}(),oa=function(e,t){return t=kt(t),e.insertNode(t[0]),e.selectNodeContents(t[0]),ln(e),e.collapse(!1),e};function ca(e,t){for(var n=[],r=t.first();r;){var a=r.next();n.push(r),e.append(r),r=a}return n}function la(e,t,n){var r=e.clone(!0),a=kt("[".concat(me,"=").concat(t,"]"),r[0]),i=!1;return Rt(r[0],(function(e){if((e=kt(e))[0]===a[0])return a.remove(),void(i=!0);i&&e.remove()}),n),r}function sa(e,t){an(e);var n=kt(e.startContainer),r=n.isCard()?n:n.closest(Oe);if(!(r.length>0&&"inline"===r.attr(Ce))&&(n.isMark()||n.parent().isMark())){var a=Mn(n);sn(e);var i=la(a.clone(!0),"cursor",!0),o=la(a.clone(!0),"cursor",!1);Bn(i[0]),Bn(o[0],(function(e){return e=kt(e),!t||Fn(e,t)})),a.empty();var c=ca(a,i),l=ca(a,o),s=kt("@​");if(l.length>0){var u=l[0];if(Pt(u[0])){for(;u.first()&&!u.first().isText();)u=u.first();u.isText()?u.before(s):u.prepend(s)}else u.before(s);e.selectNode(s[0]),e.collapse(!1)}else c.length>0?(c[c.length-1].after(s),e.selectNode(s[0]),e.collapse(!1)):(e.selectNodeContents(a[0]),e.collapse(!0));var d=!1;a.children().each((function(e){var t=kt(e);if(t.isText()){var n=e.textContent,r=n.replace(/\u200b+/g,"​");r!==n&&(e.textContent=r),d&&(r.startsWith("​")?(r=r.substring(1))?e.textContent=r:t.remove():d=!1),r.endsWith("​")&&(d=!0)}else d=!1})),s[0].parentNode&&function(e){if(e.nodeType===Node.TEXT_NODE){var t=e.textContent,n=t.length;r(e.previousSibling,!0),r(e.nextSibling,!1)}function r(r,a){function i(e){return a?e.previousSibling:e.nextSibling}for(;r;){if(r.nodeType!==e.nodeType)return;if(r.textContent===t){var o=i(r);r.parentNode.removeChild(r),r=o}else{if(a)for(;r.textContent.endsWith(t);)r.textContent=r.textContent.substring(0,r.textContent.length-n);else for(;r.textContent.startsWith(t);)r.textContent=r.textContent.substring(t.length);if(0!==r.textContent.length)return;var c=i(r);r.parentNode.removeChild(r),r=c}}}}(s[0])}}var ua=function(e,t){var n=Ot(e.startContainer);return"string"==typeof t&&(t=kt(t,n)),e.collapsed?(sa(e,t),e):(function(e,t){cn(e);var n=kt(e.startContainer),r=kt(e.endContainer),a=n.isCard()?n:n.closest(Oe),i=r.isCard()?r:r.closest(Oe);if(!(a.length>0&&"inline"===a.attr(Ce)||i.length>0&&"inline"===i.attr(Ce))){if(Mn(n)[0]!==Mn(r)[0]){var o=e.cloneRange();o.collapse(!0),sa(o,t),e.setStart(o.startContainer,o.startOffset);var c=e.cloneRange();return c.collapse(!1),sa(c,t),void e.setEnd(c.startContainer,c.startOffset)}var l=n.isMark()||n.parent().isMark(),s=r.isMark()||r.parent().isMark();if(l||s){var u=kt(e.commonAncestorContainer);u.isText()&&(u=u.parent());var d=Mn(u);sn(e);var f=la(d.clone(!0),"anchor",!0),p=function(e){var t=e.clone(!0),n=kt(be,t[0]),r=kt(ke,t[0]),a=!1;return Rt(t[0],(function(e){if((e=kt(e))[0]===r[0])return r.remove(),void(a=!0);a&&e.remove()}),!0),a=!1,Rt(t[0],(function(e){if((e=kt(e))[0]===n[0])return n.remove(),void(a=!0);a&&e.remove()}),!1),t}(d.clone(!0)),h=la(d.clone(!0),"focus",!1);Bn(f[0]),Bn(h[0]),d.empty(),ca(d,f);var m=ca(d,p);ca(d,h),e.setStartBefore(m[0][0]),e.setEndAfter(m[m.length-1][0])}}}(e,t),e)};function da(e,t){e=kt(e)[0],t&&e&&e.parentNode&&kt(e).before(t.cloneNode(!0)).after(t.cloneNode(!0))}var fa=function(e){var t=In(e);if(0===t.length)return e;var n=[t[0]];return t.length>1&&n.push(t.pop()),n.forEach((function(t){var n=t.prev(),r=t.next();if(n&&Tt(n[0],t[0],!0)){ln(e);var a=sn(e);Pn(n,t),un(e,a),t=n}if(r&&Tt(r[0],t[0],!0)){ln(e);var i=sn(e);Pn(t,r),un(e,i)}})),An(e),e},pa=function(e,t){var n=Ot(e.startContainer);return"string"==typeof t&&(t=kt(t,n)),e.collapsed||qn(e),oa(e,t),e.selectNode(t[0]),e.collapse(!1),"br"!==t.name&&An(e),e};function ha(e){return e=kt(e)[0],!!ct[e.nodeName.toLowerCase()]&&(0===e.childNodes.length||""===e.innerText)}var ma=function(e,t,n){var r=Ot(e.startContainer);"string"==typeof t&&(t=kt(t,r)),e.collapsed||qn(e);var a=En(e.startContainer);if(!a.isRoot()&&!a.isEditable())return e;if(a.isRoot())return(e=oa(e,t)).collapse(!1),e;1===a.children().length&&"br"===a.first().name&&(e.selectNodeContents(a[0]),e.collapse(!1)),cn(e);var i=sn(e);if(!i)return e;for(var o=a.clone(!1),c=a.first(),l=!0;c;){var s=c.next();c[0]!==i.anchor?(l||o.append(c),c=s):(l=!1,c=s)}return Pt(o[0])||a.after(o),un(e,i),e.setStartAfter(a[0]),e.collapse(!0),!Pt(a[0])||a.isTitle()||n||a.remove(),oa(e,t),e};function ga(e,t){for(var n=En(e);n;){var r=n.parent();if(!r)break;if(!n.isEditable())break;if(n.text().trim()!==r.text().trim())break;if(r.name===t)break;n=r}return n}var va=function(e,t){var n=Ot(e.startContainer);"string"==typeof t&&(t=kt(t,n));var r=function(e,t){for(var n=[],r=ga(e.startContainer,t.name),a=ga(e.endContainer,t.name),i="left",o=r.parent().first();o;){if(!(o=kt(o)).isBlock())return n;if(!o.isEditable())return n;o[0]===r[0]&&(i="center"),n.push({status:i,node:o}),o[0]===a[0]&&(i="right"),o=o.next()}return n}(e,t);if(0===r.length)return e;var a=r[0].node.parent();if(!a.isEditable())return e;if(a.isTable())return e;var i,o,c=r.some((function(e){return"left"===e.status})),l=r.some((function(e){return"right"===e.status}));if(c){var s=a;i=s.clone(!1),s.before(i)}if(l){var u=r[r.length-1].node.parent();o=u.clone(!1),u.after(o)}var d=sn(e);return r.forEach((function(e){var n=e.status,r=e.node,a=r.parent();"left"===n&&i.append(r),"center"===n&&a.name===t.name&&a.isEditable()&&jn(a),"right"===n&&o.append(r)})),i&&"ol"===i.name&&o&&"ol"===o.name&&o.attr("start",(parseInt(i.attr("start"),10)||1)+i.find("li").length),un(e,d),e},ya=function(e){var t=Rn(e);return 0===t.length||(t.forEach((function(t){if("ol"===(t=t.closest("ul,ol")).name||"ul"===t.name){var n=t.prev(),r=t.next();if(n&&pr(n,t)){var a=sn(e);Pn(n,t),un(e,a),t=n}if(r&&pr(r,t)){var i=sn(e);Pn(t,r),un(e,i)}}})),Tn(e)),e},ba=function(e){var t=Rn(e);if(0===t.length)return e;var n=t[0].closest(".lake-engine").find("blockquote");if(n[0]){for(var r=sn(e),a=kt(n[0]).next();a;){var i=a.prev();"blockquote"===a.name&&a.name===i.name&&a.attr("class")===i.attr("class")&&Pn(i,a),a=a.next()}return un(e,r),e}};function ka(e){var t=e.firstChild;if(!kt(t).isBlock())return e;for(;["blockquote","ul","ol"].includes(kt(t).name);)t=t.firstChild;return t}function wa(e){var t=e.lastChild;if(!kt(t).isBlock())return e;for(;["blockquote","ul","ol"].includes(kt(t).name);)t=t.lastChild;return t}function xa(e,t){return"p"===t.name||e.name===t.name&&!("li"===e.name&&!pr(e.parent(),t.parent()))}function _a(e){for(e=kt(e);!e.isRoot();){var t=e.parent();if(e.remove(),!Pt(t))break;e=t}}var Ca={insertText:function(e,t){var n=Ot(e.startContainer);e.collapsed||qn(e);var r=n.createTextNode(t);return An(e=oa(e,r)),e},addMark:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=Ot(e.startContainer);if("string"==typeof t&&(t=kt(t,r)),e.collapsed){var a=r.createTextNode("​");return t.append(a),oa(e,t[0]),da(t[0],n),An(e),e}ua(e);var i=e.commonAncestorContainer;i.nodeType===Node.TEXT_NODE&&(i=i.parentNode);var o=sn(e);if(!o)return e;var c=!1;return Rt(i,(function(e){if((e=kt(e))[0]!==o.anchor){if(c){if(e[0]===o.focus)return c=!1,!1;if(e.isMark()&&!e.isCard()){if(!Pt(e[0]))return da(cr(e,t),n),!0;e.name!==t.name&&e.remove()}if(e.isText()&&!Pt(e[0])&&da(cr(e,t),n),e.isBlock()&&!e.isTable()&&Pt(e[0])){e.find("br").remove();var a=t.clone(),i=r.createTextNode("​");a.prepend(i),e.append(a),da(a,n)}}}else c=!0})),un(e,o),e},splitMark:ua,removeMark:function(e,t){var n=Ot(e.startContainer);if(t&&"string"==typeof t&&(t=kt(t,n)),ua(e,t),e.collapsed)return e;var r=e.commonAncestorContainer;r.nodeType===Node.TEXT_NODE&&(r=r.parentNode);var a=sn(e);if(!a)return e;var i=[],o=!1;return Rt(r,(function(t){if((t=kt(t))[0]!==a.anchor){if(o)return t[0]!==a.focus&&void(t.isMark()&&!t.isCard()&&e.isPointInRange(t[0],0)&&i.push(t))}else o=!0})),i.forEach((function(e){var n,r;if(Fn(e,t))jn(e[0]);else if(t){var a=t.css();Object.keys(a).forEach((function(t){e.css(t,"")})),-1!==t[0].className.indexOf("lake-fontsize")&&(r=(n=e)[0].className.split(/\s+/).filter((function(e){return-1===e.indexOf("lake-fontsize")})),n[0].className=r.join(" "))}else e.removeAttr("class"),e.removeAttr("style")})),un(e,a),fa(e),e},insertMark:function(e,t){var n=Ot(e.startContainer);return"string"==typeof t&&(t=kt(t,n)),e.collapsed||qn(e),oa(e,t),An(e),e.selectNode(t[0]),e.collapse(!1),e},mergeMark:fa,insertInline:pa,wrapInline:function(e,t){if(!t)return e;if(e.collapsed)return e;t=kt(t,Ot(e.startContainer)),ua(e);var n=e.commonAncestorContainer;n.nodeType===Node.TEXT_NODE&&(n=n.parentNode);var r=sn(e);if(!r)return e;var a=!1,i=t.clone(!1);Rt(n,(function(e){if((e=kt(e))[0]!==r.anchor){if(a)return e[0]===r.focus?(a=!1,!1):e.isMark()&&!e.isCard()||e.isText()?Pt(e[0])?(e.remove(),!0):(i.parent()||e.before(i),i.append(e),!0):void(0!==i[0].childNodes.length&&(i=i.clone(!1)))}else a=!0}));var o=kt(r.anchor);!o.parent().isHeading()||o.prev()||o.next()||o.after("<br />");var c=kt(r.focus);return o[0]!==c[0]&&(!c.parent().isHeading()||c.prev()||c.next()||c.before("<br />")),un(e,r),e},unwrapInline:function(e){ua(e);var t=or(e),n=sn(e);return t.forEach((function(e){jn(e[0])})),un(e,n),fa(e),e},setBlocks:function(e,t){var n,r=Ot(e.startContainer);"object"===i()(t)?(n=t,t=null):(t=kt(t,r),(n=t.attr()).style=t.css());var a=Rn(e),o=kt(e.startContainer);if(o.isRoot()&&0===a.length){var c=t||kt("<p></p>");lr(c,n);var l=sn(e);return o.children().each((function(e){c.append(e)})),o.append(c),un(e,l),e}var s=sn(e);return a.forEach((function(e){e.attr(xe)||(t&&e.name!==t.name?wt(e,t):lr(e,n))})),un(e,s),e},splitBlock:function(e){e.collapsed||qn(e);var t=En(e.startContainer);if(!t.isRoot()&&!t.isEditable())return e;if(t.isRoot()){var n=e.startContainer.childNodes[e.startOffset];return n&&(e.selectNodeContents(n),ln(e),e.collapse(!0)),e}var r=e.cloneRange();ln(r),on(r),r.collapse(!0);var a=In(r),i=Dn({block:t,range:e,isLeft:!1,keepID:!0});return Rt(i[0],(function(e){!(e=kt(e)).isVoid()&&(e.isInline()||e.isMark())&&Pt(e[0])&&e.remove()}),!0),ha(t)&&!ha(i)?ut(t[0],!0):ut(i[0],!0),t.after(i),Pt(t[0])&&t.html(zn(a,"<br />")),Pt(i[0])&&i.html(zn(a,"<br />")),e.selectNodeContents(i[0]),ln(e),1===i.children().length&&"br"===i.first().name?e.collapse(!1):e.collapse(!0),e},insertBlock:ma,wrapBlock:function(e,t){var n=Ot(e.startContainer);"string"==typeof t&&(t=kt(t,n));var r=Rn(e),a=[];if(0===(r=r.map((function(e){var t=e.parent();return"li"===e.name&&t&&["ol","ul"].indexOf(t.name)>=0?function(e,t){for(var n=0;n<e.length;n++)if(e[n][0]===t[0])return!0;return!1}(a,t)?null:(a.push(t),t):e})).filter((function(e){return e}))).length||r[0].isTable()){var i=En(e.startContainer),o=sn(e);return i.children().each((function(e){t.append(e)})),i.append(t),un(e,o),e}var c=sn(e);return r[0].before(t),r.forEach((function(e){t.append(e)})),un(e,c),e},unwrapBlock:va,insertFragment:function(e,t,n,r){var a=En(e.startContainer),i=En(e.endContainer)[0]===a[0],o=Sn(e,"end"),c=a.closest("blockquote"),l=e.collapsed,s=n.childNodes,u=kt(n.firstChild);if(l||qn(e,i||!o),!u[0])return e;if(!u.isBlock()&&!u.isCard())return ln(e),e.insertNode(n),e.collapse(!1),e;pn(e);var d,f=e.startContainer.childNodes[e.startOffset-1],p=e.startContainer.childNodes[e.startOffset];if(c[0]&&s.forEach((function(e){"blockquote"!==kt(e).name&&cr(kt(e),c.clone(!1))})),function(e,t,n){if(0!==t.length){var r=Ot(e.startContainer),a=kt(t[t.length-1]);"br"===a.name&&(a.remove(),a=kt(t[t.length-1]));for(var i=r.createDocumentFragment(),o=t[0];o;){o=kt(o),$t.removeSideBr(o);var c=o.next();c||(a=o),i.appendChild(o[0]),o=c}e.insertNode(i),ln(e),e.collapse(!1),function(e,t){var n=t.closest(e.startContainer);n&&t&&t.focus(e,n,!1)}(e,n)}}(e,s,t),f){var h=kt(ka(f.nextSibling)),m=kt(wa(f));xa(m,h)?(function(e,t){if(e.name===t.name&&"p"===e.name){var n=t.attr();n.hasOwnProperty("data-lake-id")&&delete n["data-lake-id"],e.attr(n)}jt(e[0])&&!jt(t[0])&&(e[0].innerHTML=""),vr(e)===vr(t)&&xr(t)}(m,h),Pn(m,h,!1),_a(h)):(Pt(m)||"li"===(d=m).name&&($t.isEmptyNode(d)||(1===d.children().length?ur(d.first())||"br"===d.first().name:2===d.children().length&&ur(d.first())&&"br"===d.last().name)))&&_a(m)}if(p){var g=kt(wa(p.previousSibling)),v=kt(ka(p));e.selectNodeContents(g[0]),ln(e),e.collapse(!1),Pt(v)?_a(v):xa(g,v)&&(Pn(g,v,!1),_a(v))}return ba(e),ya(e),r&&r(e),e},deleteContent:qn,mergeAdjacentList:ya,mergeAdjacentBlockquote:ba,separateBlocks:function(e){var t=sr.getRangeBlocks(e);if(0===t.length)return e;var n,r,a,i,o=sn(e),c=(t=function(e,t){var n=[];e.forEach((function(e,t){var r=e.parent();if("p"===e.name){if("li"===r.name)return 0===t&&n.push(r),void sr.unwrapNode(e,"<p />");if(["ul","ol"].includes(r.name))return e=sr.setNode(e,"<li />"),void n.push(e)}if("li"===e.name&&"li"===r.name)return 0===t&&n.push(r),void sr.unwrapNode(e,"<li />");["ul","ol"].includes(e.name)&&"li"===r.name?sr.unwrapNode(e,"<".concat(e.name," />")):n.push(e)}));var r=kt(t.endContainer).closest("li");return n.some((function(e){return e[0]===r[0]}))||n.push(r),n}(t,e))[0],l=t[t.length-1],s=[],u=[];if("li"===c.name&&c.prev()){n=c.parent();for(var d=0;t[d]&&"li"===t[d].name;)s.push(t[d]),d+=1}if("li"===l.name&&l.next()){r=l.parent();for(var f=l.next();f&&"li"===f.name;)u.push(f),f=f.next()}if(u.length>0&&(a=r.clone(!1),u.forEach((function(e){a.append(e[0])})),r.after(a)),s.length>0&&(i=n.clone(!1),s.forEach((function(e){i.append(e[0])})),n.after(i)),n&&r&&r[0]===n[0]&&"ol"===n.name){var p=(parseInt(n.attr("start"),10)||1)+n.find("li").length;a.attr("start",p)}return un(e,o),e}},Ea={show:function(e,t,n){n=n||{placement:"top"},this.hide();var r=kt(function(e){return'\n  <div data-lake-element="embed-tooltip" class="lake-tooltip lake-tooltip-placement-'.concat(e.placement,' lake-embed-tooltip" style="transform-origin: 50% 45px 0px;">\n    <div class="lake-tooltip-content">\n      <div class="lake-tooltip-arrow"></div>\n      <div class="lake-tooltip-inner" data-role="tooltip"></div>\n    </div>\n  </div>\n  ')}(n));t=Le(t),r.find("[data-role=tooltip]").html(t),kt(document.body).append(r);var a=r[0].clientWidth,i=r[0].clientHeight,o=e[0].clientWidth,c=e.offset(),l=Math.round(window.pageXOffset+c.left+o/2-a/2),s=Math.round(window.pageYOffset+c.top-i-2);r.css({left:l+"px",top:s+"px"}),r.addClass("lake-embed-tooltip-active")},hide:function(){kt("div[data-lake-element=embed-tooltip]").remove()}},Oa=function(){function e(t){c()(this,e),this.config=t,this.root=kt(function(e){var t="lake-embed-toolbar-btn ".concat(e.text?"with-text":"");return'\n  <span class="lake-embed-toolbar-item lake-embed-toolbar-item-'.concat(Le(e.iconName),'" ').concat(e.disabled?'disabled="disabled"':"",'>\n    <a class="').concat(t,'" data-aspm-click="').concat(e.name||"unknown",'" data-aspm-param="').concat(e.cardName||"unknown",'" ').concat(e.disabled?'disabled="disabled"':""," ").concat(e.link?'href="'.concat(encodeURI(e.link),'" target="_blank"'):"",'>\n      <span class="lake-icon lake-icon-').concat(Le(e.iconName),'"></span>\n      ').concat(e.text?'<span class="lake-embed-toolbar-btn-text">'.concat(Le(e.text),"</span>"):"","\n    </a>\n  </span>\n  ")}(t))}return s()(e,[{key:"render",value:function(e){var t=this,n=this.config;e.append(this.root),n.title&&(this.root.on("mouseenter",(function(){Ea.show(t.root,n.title)})),this.root.on("mouseleave",(function(){Ea.hide()})),this.root.on("mousedown",(function(){Ea.hide()}))),!0!==n.disabled&&this.root.find("a").on("click",(function(e){e.stopPropagation(),n.onClick&&(e.preventDefault(),n.onClick())}))}}]),e}(),Sa=r.HotKeyUtils.isHotkey,Ra=function(){function e(t){var n;c()(this,e),this.config=t,this.root=kt('\n  <span class="lake-embed-toolbar-item lake-embed-toolbar-item-input">\n    <input data-role="input" placeholder="'.concat(Le((n=t).placeholder),'" class="lake-embed-toolbar-linkinput" type="input" value="').concat(Le(n.url),'" />\n  </span>\n  ')),this.onEnter=t.onEnter||function(){},this.onInput=t.onInput||function(){},this.onChange=t.onChange||function(){}}return s()(e,[{key:"find",value:function(e){var t="[data-role=".concat(e,"]");return this.root.find(t)}},{key:"render",value:function(e){var t=this,n=this.config,r=this.find("input");r[0].value=void 0!==n.url?n.url:"",r.on("keydown",(function(e){e.stopPropagation(),Sa("enter",e)&&(e.preventDefault(),r[0].blur(),t.onEnter(r[0].value))})),r.on("input",(function(){t.onInput(r[0].value)})),r.on("change",(function(){setTimeout((function(){t.onChange(r[0].value)}),10)})),e.append(this.root)}}]),e}(),Da=function(){function e(t){c()(this,e),m()(this,"config",null),m()(this,"$rootNode",null),m()(this,"$switch",null),this.config=t}return s()(e,[{key:"renderTo",value:function(e){var t,n,r=this;return this.$rootNode=kt((n=!!(t=this.config).checked,"function"==typeof t.getState&&(n=t.getState()),'\n    <div class="lake-embed-toolbar-item lake-embed-toolbar-dropdown-item lake-embed-toolbar-dropdown-switch" data-aspm-click="'.concat(t.name||"unknown",'" data-aspm-param="').concat(t.cardName||"unknown",'" accessbilityid="').concat(t.name,'">\n        <span class="text-content">').concat(Le(t.title||""),'</span>\n        <button type="button" role="switch" aria-checked="true" class="ant-switch ant-switch-small ').concat(n?"ant-switch-checked":"",'"><div class="ant-switch-handle"></div><span class="ant-switch-inner"></span></button>\n    </div>\n  '))),this.$switch=this.$rootNode.find(".ant-switch"),e.append(this.$rootNode),this.$rootNode.on("mousedown",(function(e){e.preventDefault()})),this.$rootNode.on("click",(function(e){e.stopPropagation(),r.config.onClick&&(r.config.onClick(),r.updateSwitch())})),this}},{key:"updateSwitch",value:function(){"function"==typeof this.config.getState&&(this.config.getState()?this.$switch.addClass("ant-switch-checked"):this.$switch.removeClass("ant-switch-checked"))}}]),e}(),Aa=function(){function e(t){c()(this,e),m()(this,"config",null),m()(this,"$rootNode",null),this.config=t}return s()(e,[{key:"renderTo",value:function(e){var t,n=this;return this.$rootNode=kt((t=this.config,'<div class="lake-embed-toolbar-item lake-embed-toolbar-dropdown-item lake-embed-toolbar-dropdown-btn" accessbilityid="'.concat(t.name,'" data-aspm-click="').concat(t.name||"unknown",'" data-aspm-param="').concat(t.cardName||"unknown",'">\n    <span class="lake-embed-toolbar-btn-text">').concat(Le(t.title),"</span>\n  </div>"))),e.append(this.$rootNode),this.config.onClick&&this.$rootNode.on("click",(function(){n.config.onClick()})),this}}]),e}(),Ta=function(){function e(t){var n=this;c()(this,e),m()(this,"$rootNode",null),m()(this,"$dropdown",null),m()(this,"documentMouseDown",(function(e){n.$rootNode[0].contains(e.target)||n.$dropdown.hasClass("show")&&n.hideDropdown()})),this.config=t}return s()(e,[{key:"render",value:function(e){var t,n;this.$rootNode=kt((t=this.config,n="lake-embed-toolbar-btn lake-embed-toolbar-dropdown-btn ".concat(t.text?"with-text":""),'\n  <span class="lake-embed-toolbar-item lake-embed-toolbar-dropdown">\n    <a class="'.concat(n,'" data-aspm-click="').concat(t.name||"unknown",'" data-aspm-param="').concat(t.cardName||"unknown",'">\n      <span class="lake-icon lake-icon-').concat(Le(t.iconName),'"></span>\n      ').concat(t.text?'<span class="lake-embed-toolbar-btn-text">'.concat(Le(t.text),"</span>"):"",'\n    </a>\n    <div class="dropdown-container"></div>\n  </span>\n  '))),e.append(this.$rootNode),this.initToggleEvent(),this.renderTooltip(),this.renderDropdown(e)}},{key:"destroy",value:function(){document.removeEventListener("mousedown",this.documentMouseDown,!0)}},{key:"initToggleEvent",value:function(){var e=this,t=this.$rootNode.find(".lake-embed-toolbar-dropdown-btn");t.on("mousedown",(function(e){e.preventDefault(),e.stopPropagation()})),t.on("click",(function(t){t.stopPropagation(),e.toggleDropdown()})),document.addEventListener("mousedown",this.documentMouseDown,!0)}},{key:"renderTooltip",value:function(){var e=this,t=this.config;if(t.title){var n=this.$rootNode;n.on("mouseenter",(function(){Ea.show(e.$rootNode,t.title)})),n.on("mouseleave",(function(){Ea.hide()})),n.on("mousedown",(function(){Ea.hide()}))}}},{key:"renderDropdown",value:function(e){var t=this,n=this.config;this.$dropdown=e.find(".dropdown-container"),n.items.forEach((function(e){switch(e.type){case"switch":return new Da(e).renderTo(t.$dropdown);case"button":default:return new Aa(e).renderTo(t.$dropdown)}})),this.$dropdown.on("click",(function(e){e.stopPropagation(),t.hideDropdown()}))}},{key:"toggleDropdown",value:function(){this.$dropdown.hasClass("show")?this.hideDropdown():this.showDropdown()}},{key:"showDropdown",value:function(){this.$dropdown.addClass("show")}},{key:"hideDropdown",value:function(){this.$dropdown.removeClass("show")}}]),e}(),Pa=function(){function e(t){var n=this;c()(this,e),m()(this,"items",[]),m()(this,"addItems",(function(e){n.config.list.forEach((function(t){var r=null;"button"===t.type&&(r=new Oa(t)).render(e),"url"===t.type&&(r=new Ra(t)).render(e),"dropdown"===t.type&&(r=new Ta(t)).render(e),"node"===t.type&&(r=t.node,e.append(r)),r&&n.items.push(r)}))})),m()(this,"setPosition",(function(){var e=n.config.range;if(e){var t=e.getBoundingClientRect(),r=Math.round(window.pageXOffset+t.left),a=Math.round(window.pageYOffset+t.top+t.height)+5,i=n.root[0].clientWidth,o=document.body.clientWidth;r+i>o-10&&(r=o-i-10),n.root.css({left:r+"px",top:a+"px"})}})),this.config=t,this.root=kt('<div class="lake-embed-toolbar lake-embed-toolbar-active" contenteditable="false"></div>'),this.image=this.find("image")}return s()(e,[{key:"find",value:function(e){var t="[data-role=".concat(e,"]");return this.root.find(t)}},{key:"destroy",value:function(){this.root.remove(),this.items.forEach((function(e){e.destroy&&e.destroy()}))}},{key:"hide",value:function(){this.root.removeClass("lake-embed-toolbar-active")}},{key:"show",value:function(){this.root.addClass("lake-embed-toolbar-active"),this.config&&this.config.automaticPositioning&&this._autoPositioning()}},{key:"_autoPositioning",value:function(){if(this.config.scrollNode){var e=this.root.closest("[data-lake-card]");if(e&&e.length){var t=e.getBoundingClientRect(),n=this.config.scrollNode.getBoundingClientRect(),r=this.root[0].getBoundingClientRect(),a=Math.min(n.bottom,window.innerHeight||n.bottom);t.top-10-r.height<=n.top&&t.bottom+10+r.height<=a?this.root.css({top:"100%",marginTop:"10px"}):this.root.css({top:"",marginTop:""})}}}},{key:"render",value:function(e){e.find(".lake-embed-toolbar").remove();var t=this.config,n=kt('<div class="lake-embed-toolbar-group" data-aspm="card-toolbar"></div>');this.root.append(n),this.addItems(n),e.append(this.root),this.setPosition(),"inline"===t.type?this.root.addClass("lake-embed-toolbar-inline"):this.root.addClass("lake-embed-toolbar-block"),["center","right"].indexOf(t.align)>=0&&this.root.addClass("lake-embed-toolbar-".concat(t.align)),this.root.on("click",(function(e){e.preventDefault(),e.stopPropagation()}))}}]),e}();Pa.Button=Oa,Pa.InputUrl=Ra;var ja=["p","br",{img:{src:"@url",width:"@number",height:"@number",style:{width:"@length",height:"@length"}}},{a:{href:"@url",target:["_blank","_parent","_top"]}}],Ma=[["b","strong"],[{span:{style:{"font-weight":["bold","700"]}}},"strong"],["i","em"],[{span:{style:{"font-style":"italic"}}},"em"],[{span:{style:{"text-decoration":"underline"}}},"u"],["s","del"],["strike","del"],[{span:{style:{"text-decoration":"line-through"}}},"del"],["th","td"]],Na=function(){function e(){c()(this,e),this.data=Ma}return s()(e,[{key:"getValue",value:function(){return this.data}},{key:"clone",value:function(){var t=S()(this.data),n=new e;return n.data=t,n}}]),e}(),La=function(){function e(t){c()(this,e),this.change=t,this.engine=t.engine,this.doc=this.change.doc,this.data={}}return s()(e,[{key:"add",value:function(e,t){this.data[e]=t}},{key:"queryEnabled",value:function(e){return!!this.data[e]}}]),e}();function Ia(e){for(e=kt(e);e;){if(e.isRoot())return;if(e.attr(xe))return e;e=e.parent()}}function za(e){return e.engine||e.contentView}function Ba(e){return!!(e&&(e.engine||e.contentView)&&e.cardRoot&&e.cardRoot[0]&&e.cardRoot[0].parentNode)}["queryState","execute"].forEach((function(e){La.prototype[e]=function(){var t=Array.prototype.slice.call(arguments),n=t[0];if(n&&this.data[n]&&this.data[n][e]){t.shift();var r=t.slice(1);"execute"===e&&(this.change.cacheRangeBeforeCommand(),this.engine.event.trigger("beforeCommandExecute",n,r));try{var a=this.data[n][e].apply(this,t);return"execute"===e&&(this.change.combinTextNode(),this.change.onSelect(),this.engine.event.trigger("afterCommandExecute",n,r)),a}catch(e){console.log(e)}}}}));var Fa=function(){function e(t,n,r){var a,i=this;c()(this,e),m()(this,"cardManager",null),m()(this,"record",null),m()(this,"engineContentView",null),m()(this,"screenHeight",0),m()(this,"_disabled",!1),this.engineContentView=t,this.cardManager=n,this.record=r,this.screenHeight=(window.screen&&(a=window.screen.height),"number"==typeof a?a:Math.max(document.documentElement.clientHeight,document.body.clientHeight));var o=this.tryRender;this.tryRender=$()((function(){o.call(i)}),32)}return s()(e,[{key:"start",value:function(){var e=this;this.render(),requestAnimationFrame((function(){var t=e.engineContentView,n=t.getScrollNode,r=t.scrollNode,a=t.editArea,i=r||(n?n(a[0]):document.body),o=$()((function(){e.render()}),32);kt(i).on("scroll",o,{passive:!0}),e.cancelListenHandler=function(){kt(i).off("scroll",o,{passive:!0})},e.render()}))}},{key:"disable",value:function(){this._disabled||(this._disabled=!0,this.cancelListenHandler&&this.cancelListenHandler(),this._forceRender())}},{key:"isDisabled",value:function(){return this._disabled}},{key:"render",value:function(){for(var e=this.record.queue;e[this.record.index];){var t=this.record.index,n=e[t],r=n.cardRoot;if(this.isOutOfScreen(r,2))return!0;this.record.index++,Ba(n)&&this.eat(n,t)}return!1}},{key:"tryRender",value:function(){this.render()}},{key:"_forceRender",value:function(){for(var e=this.record.queue;e[this.record.index];){var t=this.record.index,n=e[t];this.record.index++,Ba(n)&&this.eat(n,t)}}},{key:"isOutOfScreen",value:function(e,t){if(!e||!e[0])return!1;var n=e.getBoundingClientRect().top;if(n<this.screenHeight*t)return!1;var r=window.location.hash;if(!r)return!0;try{var a=kt('[id="'.concat(r.substring(1),'"]'))[0];return!a||n>a.getBoundingClientRect().bottom}catch(e){return console.warn(e),!0}}},{key:"eat",value:function(e,t){var n=this.record.operations[t],r=za(e);n&&r&&(this.cardManager.render(e.container,e),n.inserted&&e.didInsert&&e.didInsert(e.value),n.updated&&e.didUpdate&&e.didUpdate(e.value))}}]),e}(),Va=function(){function e(t){c()(this,e),m()(this,"cardManager",null),m()(this,"rootNode",null),m()(this,"consumer",null),m()(this,"refs",new WeakMap),this.cardManager=t}return s()(e,[{key:"insert",value:function(e,t){if(!this.allowDeferredRendering(t))return this.cardManager.render(t.container,t),void(t.didInsert&&t.didInsert(t.value));Ba(t)&&this.recordComponentOperation(t,"inserted")}},{key:"update",value:function(e,t){if(!this.allowDeferredRendering(t))return this.cardManager.render(e,t),void(t.didUpdate&&t.didUpdate(t.value));Ba(t)&&this.recordComponentOperation(t,"updated")}},{key:"run",value:function(e){if(e){var t=this.getRecord(e);t.running||0===t.queue.length||(t.running=!0,t.consumer=new Fa(e,this.cardManager,t),t.consumer.start())}}},{key:"disable",value:function(e){if(e){var t=this.getRecord(e);t.consumer&&t.consumer.disable()}}},{key:"allowDeferredRendering",value:function(e){var t=za(e);if(!t)return!1;if(!t.isDeferredRendering()||!this._allowCard(e.name))return!1;var n=this.getRecord(t);return!n.running||!n.consumer.isDisabled()}},{key:"getRecord",value:function(e){return this.refs.has(e)||this.refs.set(e,{running:!1,queue:[],rootNodes:[],operations:{},index:0}),this.refs.get(e)}},{key:"recordComponentOperation",value:function(e,t){var n=za(e),r=this.getRecord(n),a=r.rootNodes.indexOf(e.cardRoot[0]);-1===a?(r.rootNodes.push(e.cardRoot[0]),a=r.rootNodes.length-1,r.queue.push(e),r.operations[a]={}):(r.queue[a]=e,r.operations[a]={}),r.operations[a][t]=!0,r.running&&r.consumer.tryRender()}},{key:"_allowCard",value:function(e){var t=K()(window,"appData.settings.enable_lazyload_card","").split(",");return!t.length&&r.ua.desktop&&(t=["codeblock","image","table"]),-1!==t.indexOf(e)}}]),e}(),Ua=window.location.search.indexOf("view=doc_embed")>0;function qa(e){return kt(e)[0].getAttribute("data-lake-card")||"unknown"}var Ha=!0;function Wa(e,t,n,r,a){var i=this;if("separator"===e.type)return{type:"node",node:kt('<span class="lake-embed-toolbar-item-split"></span>')};var o=qa(r);return"copy"===e.type?{type:"button",name:"copy",cardName:o,iconName:"copy",title:a.copy.tips,onClick:function(){Sr(r,t.event)?t.messageSuccess(a.copy.success):t.messageError(a.copy.error)}}:"delete"===e.type?{type:"button",cardName:o,name:"delete",iconName:"delete",title:e.title||t.lang.delete.tips,onClick:function(){t.change.removeCard(r)}}:"maximize"===e.type?{type:"button",cardName:o,name:"maximize",iconName:"maximize",title:t.lang.maximize.tips,onClick:function(){i.maximize({cardRoot:r,engine:t,contentView:n})}}:"collapse"===e.type?{type:"button",cardName:o,name:"collapse",iconName:"compact-display",title:t.lang.collapse.tips,onClick:function(){i.collapse({cardRoot:r,engine:t,contentView:n})}}:"expand"===e.type?{type:"button",name:"expand",cardName:o,iconName:"embedded-preview",title:t.lang.expand.tips,onClick:function(){i.expand({cardRoot:r,engine:t,contentView:n})}}:"preferences"===e.type?{type:"button",name:"preferences",cardName:o,iconName:"preferences",title:t.lang.preferences.tips,onClick:function(){e.onClick&&e.onClick()}}:"download"===e.type?{type:"button",name:"download",cardName:o,iconName:"download",title:t.lang.download.tips,onClick:function(){e.onClick&&e.onClick()}}:"copyCardLink"===e.type?{type:"button",name:"copyCardLink",cardName:o,iconName:"link",title:t.lang.copyCardLink.tips,onClick:function(){e.onClick&&e.onClick()}}:"gotolink"===e.type?{type:"button",name:"gotolink",cardName:o,iconName:"gotolink",title:e.title||t.lang.gotoLink.tips,link:e.link,onClick:e.onClick}:"preview"===e.type?{type:"button",name:"preview",cardName:o,iconName:"preview",title:t.lang.preview.tips,onClick:function(){e.onClick&&e.onClick()}}:"doc-title"===e.type?{type:"button",name:"docTitle",cardName:o,iconName:"doc-title",title:e.title||t.lang.docTitle.tips,text:e.text,onClick:function(){e.onClick&&e.onClick()}}:"doc-card"===e.type?{type:"button",name:"docCard",cardName:o,iconName:"doc-card",title:t.lang.docCard.tips,onClick:function(){e.onClick&&e.onClick()}}:"doc-embed"===e.type?{type:"button",name:"docEmbed",cardName:o,iconName:"doc-embed",title:t.lang.docEmbed.tips,onClick:function(){e.onClick&&e.onClick()}}:"more"===e.type?{type:"dropdown",name:"more",cardName:o,iconName:"more",title:e.title||a.more.tips,items:e.items.map((function(e){return Wa.call(i,e,t,n,r,a)}))}:"height-mode-default"===e.type?{type:"button",name:"heightModeDefault",cardName:o,iconName:"height-mode-default",title:t.lang.heightMode.default,disabled:e.disabled,onClick:function(){e.onClick&&e.onClick()}}:"height-mode-adaptive"===e.type?{type:"button",name:"heightModeAdaptive",cardName:o,iconName:"height-mode-adaptive",title:t.lang.heightMode.adaptive,disabled:e.disabled,onClick:function(){e.onClick&&e.onClick()}}:(e.cardName=o,e)}var Ya=function(){function e(){c()(this,e),this.componentClasses={},this.components=[],this.idCache={},this.renderController=new Va(this)}return s()(e,[{key:"openId",value:function(e){Ha=e}},{key:"getLang",value:function(e){var t=e.engine,n=e.contentView;return t&&t.lang||n&&n.lang}},{key:"getEditArea",value:function(e){var t=e.engine,n=e.contentView;return t&&t.editArea||n&&n.editArea}},{key:"add",value:function(e,t){this.componentClasses[e]=t}},{key:"getId",value:function(e,t){var n=this.idCache;for(e||(e=Pe());n[e]&&n[e].component!==t;)e=Pe();return e}},{key:"setId",value:function(e){var t=e.value;if(t&&"object"===i()(t)){var n=this.getId(t.id,e),r=this.idCache;t.id=n,r[n]={component:e}}}},{key:"create",value:function(e){var t=e.component,n=e.engine,r=e.contentView,a=e.cardRoot,i=t.type,o=t.name,c=t.value,l=t.container,s=t.state.readonly,u=void 0===t.hasFocus?!s:t.hasFocus;if(["inline","block"].indexOf(i)<0)throw"".concat(o,': the type of card must be "inline", "block"');var d="inline"===i?"span":"div";a?a.empty():a=kt("<".concat(d," />")),this.components.push({node:a,component:t}),a.attr(Ce,i),a.attr(xe,o),u?l.attr("contenteditable","false"):a.attr("contenteditable","false"),this.setValue(a,c);var f=kt("<".concat(d," ").concat(Ee,'="body" />'));if(u){var p=kt("<span ".concat(Ee,'="left">&#8203;</span>')),h=kt("<span ".concat(Ee,'="right">&#8203;</span>'));f.append(p),f.append(l),f.append(h)}else f.append(l);return a.append(f),t.embedToolbar&&this.setToolbar({cardRoot:a,component:t,engine:n,contentView:r}),t.cardRoot=a,a}},{key:"showToolbar",value:function(e,t){this.find(e,".lake-card-dnd").addClass("lake-card-dnd-active"),t?this.showCardToolbar(e,t.clientX):this.showCardToolbar(e)}},{key:"getComponentsByName",value:function(e){return this.gc(),this.components.filter((function(t){return t.component.name===e})).map((function(e){return e.component}))}},{key:"getCardRootByName",value:function(e){return this.components.filter((function(t){return t.component.name===e})).map((function(e){return e.node[0]}))}},{key:"showCardToolbar",value:function(e,t){var n=kt(e),r=this.find(e,".lake-card-toolbar");if(r.length&&(r[0].style.left="0px",n.addClass("lake-card-embed-toolbar-active"),r[0]._toolbar&&r[0]._toolbar.show(),r.addClass("lake-embed-toolbar-active"),0===t||t)){var a=r[0].firstChild;if(a){var i=n[0].getBoundingClientRect();if(!(t<i.left||t>i.right)){var o=a.getBoundingClientRect(),c=i.width-o.width;if(!(c<=0)){var l=t-i.left-o.width/2;r[0].style.left=Math.max(Math.min(l,c),0)+"px"}}}}}},{key:"hideToolbar",value:function(e){this.find(e,".lake-card-dnd").removeClass("lake-card-dnd-active"),this.hideCardToolbar(e)}},{key:"hideCardToolbar",value:function(e){this.find(e,".lake-card-toolbar").removeClass("lake-embed-toolbar-active"),e.removeClass("lake-card-embed-toolbar-active")}},{key:"setToolbar",value:function(e){var t=this,n=e.cardRoot,a=e.component,i=e.engine,o=e.contentView,c=a.embedToolbar();if(Array.isArray(c)){var l=n.first(),s=this.getLang({engine:i,contentView:o}),u=this.getEditArea({engine:i,contentView:o});if(i){if(c.find((function(e){return"dnd"===e.type}))){var d=kt(function(e){var t=qa(e);return'\n    <div class="lake-card-dnd" draggable="true" contenteditable="false">\n      <div class="lake-card-dnd-trigger" data-aspm-click="dnd" data-aspm-param="'.concat(t,'">\n        <span class="lake-icon lake-icon-drag"></span>\n      </div>\n    </div>\n  ')}(n));d.on("mouseenter",(function(){Ea.show(d,s.dnd.tips)})),d.on("mouseleave",(function(){Ea.hide()})),d.on("mousedown",(function(e){e.stopPropagation(),Ea.hide(),t.hideCardToolbar(n)})),d.on("mouseup",(function(){t.showCardToolbar(n)})),l.append(d),c=c.filter((function(e){return"dnd"!==e.type}))}if((c=c.map((function(e){return Wa.call(t,e,i,o,n,s)}))).length){var f=new Pa({scrollNode:i?K()(i,"options.scrollNode"):null,automaticPositioning:K()(i,"options.automaticPositioning"),list:c});f.root.addClass("lake-card-toolbar"),f.root[0]._toolbar=f,f.render(l),f.hide(),a&&(a.embedToolbarInstance=f)}}else{if(Ua||!u||0!==u.closest(Oe).length)return;var p=["maximize","copyContent","download","copyCardLink","button"],h=c.filter((function(e){return-1!==p.indexOf(e.type)})).map((function(e){var r=e.type;if("button"===r)return e;var a={type:"button",name:r,iconName:r,title:e.tips||s[e.type].tips,onClick:function(){e.onClick?e.onClick():t[r]&&(t[r]({cardRoot:n,engine:i,contentView:o}),t.hideCardToolbar(n))}};return"copyCardLink"===r&&(a.iconName="link"),a}));if(h&&h.length>0){var m=new Pa({automaticPositioning:K()(i,"options.automaticPositioning"),list:h});m.root.addClass("lake-card-toolbar"),m.root[0]._toolbar=m,m.render(l),r.ua.mobile?n.on("mousedown",(function(){m.show()})):n.on("mouseenter",(function(){m.show()})),n.on("mouseleave",(function(){m.hide()})),m.hide()}}}}},{key:"updateToolbar",value:function(e){this.setToolbar({cardRoot:e.cardRoot,component:e,engine:e.engine,contentView:e.contentView})}},{key:"copyContent",value:function(e){var t=e.cardRoot,n=this.getComponent(t);n.copyContent&&n.copyContent()}},{key:"getOptions",value:function(e){var t=e.engine,n=e.contentView;return t?t.options:n?n.options:void 0}},{key:"collapse",value:function(e){var t=e.cardRoot,n=this.getComponent(t);!1===n.state.collapsed&&(n.state.collapsed=!0,n.collapse&&n.collapse())}},{key:"expand",value:function(e){var t=e.cardRoot,n=this.getComponent(t);!0===n.state.collapsed&&(n.state.collapsed=!1,n.expand&&n.expand())}},{key:"defalutMaximize",value:function(e){var t,n=this,r=e.cardRoot,a=e.engine,i=e.contentView,o=this.getLang({engine:a,contentView:i}),c=this.getComponent(r),l=this.findByKey(r,"body"),s=kt((t=o.maximize.back,'\n    <div class="header clearfix" data-transient="true">\n      <div class="header-crumb header-crumb-sm">\n        <a class="split">\n          <span class="lake-icon lake-icon-arrow-left"></span>\n        </a>\n        <a>'.concat(t,"</a>\n      </div>\n    </div>\n  "))),u=s.find(".header-crumb");s.on("click",(function(e){return e.stopPropagation()})),r.addClass("lake-card-block-max"),u.on("click",(function(){n.restore({cardRoot:r,engine:a,contentView:i})})),l.prepend(s),a&&(this.findByKey(r,"center").addClass("edit"),a.event.trigger("maximizecard"),a.history.reset()),c.maximize&&c.maximize()}},{key:"maximize",value:function(e){var t=this,n=e.cardRoot,r=e.engine,a=e.contentView,i=this.getComponent(n),o=this.getOptions({engine:r,contentView:a}).customMaximize,c=function(){t.defalutMaximize({cardRoot:n,engine:r,contentView:a})};i.state.maximize=!0,o&&"function"==typeof o?o({cardRoot:n,engine:r,contentView:a,defalutMaximize:c}):c()}},{key:"defalutRestore",value:function(e){var t=e.cardRoot,n=e.engine,r=this.getComponent(t);t.removeClass("lake-card-block-max"),t.find(".header").remove(),r.state.maximize=!1,r.restore&&r.restore(),n&&(this.findByKey(t,"center").removeClass("edit"),n.event.trigger("restorecard"),n.history.reset())}},{key:"restore",value:function(e){var t=this,n=e.cardRoot,r=e.engine,a=e.contentView,i=this.getOptions({engine:r,contentView:a}).customMaximizeRestore,o=function(){t.defalutRestore({cardRoot:n,engine:r,contentView:a})};i&&"function"==typeof i?i({cardRoot:n,engine:r,contentView:a,defalutRestore:o}):o()}},{key:"closest",value:function(e){return Ia(e)}},{key:"getBlockCardRoot",value:function(e){if(e=kt(e),!kt(e)[0])return null;var t=e[0].parentNode;if(!t)return null;var n=this.closest(t);return n?this.isBlock(n)?n:this.getBlockCardRoot(n):null}},{key:"isInline",value:function(e){return!(!e||0===e.length)&&"inline"===e.attr(Ce)}},{key:"isBlock",value:function(e){return!(!e||0===e.length)&&"block"===e.attr(Ce)}},{key:"getName",value:function(e){return e&&0!==e.length&&e.attr(xe)||""}},{key:"getCenter",value:function(e){return e.find(De)}},{key:"isCenter",value:function(e){return"center"===e.attr(Ee)}},{key:"isCursor",value:function(e){return this.isLeftCursor(e)||this.isRightCursor(e)}},{key:"isLeftCursor",value:function(e){return kt(e).closest(Re).length>0}},{key:"isRightCursor",value:function(e){return kt(e).closest(Ae).length>0}},{key:"getComponent",value:function(e){var t=this.components.filter((function(t){return t.node[0]===e[0]}));if(0!==t.length)return t[0].component}},{key:"removeComponent",value:function(e){var t=this;this.components.forEach((function(n,r){if(n.node[0]===e[0])return t.components.splice(r,1),!1}))}},{key:"find",value:function(e,t){var n=this,r=e.find(t),a=[];return r.each((function(t){var r=n.closest(t);r&&r[0]===e[0]&&a.push(t)})),kt(a)}},{key:"findByKey",value:function(e,t){return this.find(e,"[".concat(Ee,"=").concat(t,"]"))}},{key:"getSingleCardRoot",value:function(e){var t=this.closest(e.commonAncestorContainer);return t||(t=this.getSingleSelectedCard(e))||null}},{key:"getSingleSelectedCard",value:function(e){var t=wn(e),n=t[0];return!(1!==t.length||!n||!(n=kt(n)).isCard())&&n}},{key:"focus",value:function(e,t,n){var r=this.findByKey(t,"left"),a=this.findByKey(t,"right");0!==r.length&&0!==a.length&&(e.selectNodeContents(n?r[0]:a[0]),e.collapse(!1))}},{key:"setValue",value:function(e,t){if(null!=t){var n=this.getComponent(e);if(n){var r=n.constructor,a=n.value;"object"===i()(a)&&a.id&&(t.id=a.id),r.uid&&Ha&&this.setId(n),n.value=t}t=Ye(t),e.attr("data-card-value",t)}}},{key:"getValue",value:function(e){var t=e.attr("data-card-value");if(t)return Ge(t)}},{key:"focusPrevBlock",value:function(e,t,n){var r;if("inline"===t.attr(Ce)){var a=En(t);r=a.isRoot()?t.prevElement():a.prevElement()}else r=t.prevElement();if(n){if(!r||r.attr(xe)){var i=kt("<p><br /></p>");return t.before(i),e.selectNodeContents(i[0]),void e.collapse(!1)}}else{if(!r)return;if(r.attr(xe))return void this.focus(e,r,!1)}e.selectNodeContents(r[0]),ln(e),e.collapse(!1)}},{key:"focusNextBlock",value:function(e,t,n){var r;if("inline"===t.attr(Ce)){var a=En(t);r=a.isRoot()?t.nextElement():a.nextElement()}else r=t.nextElement();if(n){if(!r||r.attr(xe)){var i=kt("<p><br /></p>");return t.after(i),e.selectNodeContents(i[0]),void e.collapse(!1)}}else{if(!r)return;if(r.attr(xe))return void this.focus(e,r,!1)}e.selectNodeContents(r[0]),ln(e),e.collapse(!0)}},{key:"insertNode",value:function(e,t,n){var r="inline"===t.type;e.collapsed||qn(e),this.gc();var a=this.create({component:t,engine:n});return r?pa(e,a):ma(e,a),this.focus(e,a),["ol","ul","blockquote"].indexOf(a.parent().name)>=0&&va(e,a.parent()),this.renderController.insert(t.container,t),a}},{key:"removeNode",value:function(e,t){var n=this.getComponent(e);n&&(this.destroyComponent(n),"block"===n.type&&t&&t.readonly(!1),this.removeComponent(e),e.remove())}},{key:"destroyComponent",value:function(e){e.destroy&&e.destroy(),e.embedToolbarInstance&&e.embedToolbarInstance.destroy();var t=e.value;if(t&&"object"===i()(t)){var n=t.id,r=this.idCache;n&&r[n]&&delete r[n]}}},{key:"updateNode",value:function(e,t){var n=t.value;this.destroyComponent(t),this.findByKey(e,"center").empty(),this.setValue(e,n),this.renderController.update(t.container,t)}},{key:"replaceNode",value:function(e,t,n){var r=this.componentClasses[t].type,a=kt(qe('<card type="'.concat(r,'" name="').concat(t,'"></card>')));this.setValue(a,n),e.before(a),a.append(e)}},{key:"gc",value:function(){for(var e=0;e<this.components.length;e++){var t=this.components[e].node,n=this.components[e].component;t[0]&&t.closest("body").length>0||(this.destroyComponent(n),this.components.splice(e,1),e--)}}},{key:"render",value:function(e,t){try{var n=t.value,r=t.cardRoot;n&&"object"===i()(n)&&n.id&&r.attr("id",n.id),t.render(e,t.value)}catch(e){console.error("render error: ",e)}}},{key:"createComponent",value:function(e){var t=this.componentClasses[e.name];return this._createComponentByClass(t,e)}},{key:"createFallbackComponent",value:function(e,t){var n=this.getFallbackClass(e);return this._createComponentByClass(n,t)}},{key:"_createComponentByClass",value:function(e,t){var n=t.name,r=t.engine,a=t.contentView,i=t.value;if("block"===e.type&&Ha&&(e.uid=!0),e){var o=new e(r,a);o.engine=r,o.contentView=a,o.state={readonly:!r,collapsed:!1},o.type=e.type,o.name=n,o.value=i;var c=kt("inline"===o.type?"<span />":"<div />");return c.attr(Ee,"center"),o.container=c,"function"==typeof o.init&&o.init(),o}return null}},{key:"reRenderAll",value:function(e,t,n){var a=this,i=(e=kt(e)).isCard()?e:e.find(Oe);this.gc(),i.each((function(e){var i=kt(e),o=i.attr(xe),c=a.componentClasses[o];if(c||r.ua.desktop){var l=a.getComponent(i);l&&a.destroyComponent(l),a.removeComponent(i);var s=a.getValue(i);l=c?a.createComponent({name:o,engine:t,contentView:n,value:s}):a.createFallbackComponent(i,{name:o,engine:t,contentView:n,value:s}),a.create({component:l,engine:t,cardRoot:i}),a.renderController.insert(l.container,l)}}))}},{key:"renderAll",value:function(e,t,n){var a=this,i=(e=kt(e)).find(Se);this.gc(),i.each((function(e){var i=(e=kt(e)).attr(_e),o=a.componentClasses[i],c=a.getValue(e),l=null;if(o)l=a.createComponent({name:i,engine:t,contentView:n,value:c});else{if(!r.ua.desktop)return;l=a.createFallbackComponent(e,{name:i,engine:t,contentView:n,value:c})}var s=a.create({component:l,engine:t,contentView:n});e.replaceWith(s),a.renderController.insert(l.container,l)}))}},{key:"getFallbackClass",value:function(e){return"block"===e.attr(Ce)?this.componentClasses.blockfallback:this.componentClasses.inlinefallback}}]),e}(),Ga=["undo","paste","drop","selectall"],Ka=function(){function e(){c()(this,e),this.data={}}return s()(e,[{key:"add",value:function(e,t){var n=this;this.data[e]={},Object.keys(t).forEach((function(r){n.data[e][r]=t[r]}))}},{key:"execute",value:function(){var e=this,t=Array.prototype.slice.call(arguments),n=t.shift(),r=t.shift();Object.keys(this.data).forEach((function(a){if(!(Ga.indexOf(a)<0&&n.options.plugins&&n.options.plugins.indexOf(a)<0)&&!1!==n.options[a])return e.data[a][r]?(Qt.log("".concat(r," ").concat(a," plugin")),e.data[a][r].apply(n,t)):void 0}))}},{key:"executePluginMethod",value:function(e,t,n){if(!1!==e.options[t]&&this.data[t]&&this.data[t][n]){for(var r=arguments.length,a=new Array(r>3?r-3:0),i=3;i<r;i++)a[i-3]=arguments[i];return this.data[t][n].apply(e,a)}}}]),e}(),Xa=function(){function e(t){var n=this;c()(this,e),this.change=t,this.engine=t.engine,this.reset(),this.lazySaveOp=Q()((function(){n.saveOp()}),200)}return s()(e,[{key:"reset",value:function(){this.totalOps=[],this.actionOps=[],this.currentAction={},this.currentActionIndex=0}},{key:"hasUndo",value:function(){return!!this.getUndoOp()}},{key:"hasRedo",value:function(){return!!this.getRedoOp()}},{key:"undo",value:function(){this.saveOp();var e=this.getUndoOp();if(e){var t;this.engine.ot.stopMutation();try{this.engine.ot.submitOps(e.ops),this.engine.ot.applier.applySelfOperations(e.ops);var n=this.totalOps[this.totalOps.length-1];n&&n.uid===e.uid&&"undo"!==n.status?this.totalOps.pop():this.totalOps.push(e),this.currentActionIndex--,t=!0}catch(e){this.reset(),console.log(e)}this.engine.ot.startMutation(),t&&(this.engine.ot.applier.setRangeByPath(e.startRangePath),this.change.change())}}},{key:"redo",value:function(){this.saveOp();var e=this.getRedoOp();if(e){var t;this.engine.ot.stopMutation();try{this.engine.ot.submitOps(e.ops),this.engine.ot.applier.applySelfOperations(e.ops);var n=this.totalOps[this.totalOps.length-1];n&&n.uid===e.uid&&"undo"===n.status?this.totalOps.pop():this.totalOps.push(e),this.currentActionIndex++,t=!0}catch(e){this.reset(),console.log(e)}this.engine.ot.startMutation(),t&&(this.engine.ot.applier.setRangeByPath(e.rangePath),this.change.change())}}},{key:"hold",value:function(){var e=this;this.holded=!0,this.holdTimer&&clearTimeout(this.holdTimer),this.holdTimer=setTimeout((function(){e.release()}),10)}},{key:"release",value:function(){this.holded=!1}},{key:"clear",value:function(){var e=this;setTimeout((function(){e.reset()}),10)}},{key:"saveOp",value:function(){this.currentAction&&this.currentAction.ops&&this.currentAction.ops.length>0&&(this.totalOps.push(this.currentAction),this.currentAction.self&&(this.currentAction.rangePath=this.getCurrentRangePath(),this.currentAction.uid=Pe(8),this.actionOps.splice(this.currentActionIndex),this.actionOps.push(this.currentAction),this.currentActionIndex=this.actionOps.length,this.change.change()),this.currentAction={})}},{key:"collectSelfOps",value:function(e){var t=this;this.currentAction.self||this.saveOp();var n=!1;e.forEach((function(e){if(!Ur(e))if(n=!0,t.holded&&t.actionOps.length>0)t.actionOps[t.actionOps.length-1].ops.push(e);else{t.currentAction.self=!0,t.currentAction.ops||(t.currentAction.ops=[]),t.currentAction.startRangePath||(t.currentAction.startRangePath=t.getRangePathBeforeCommand());var r=t.currentAction.ops[t.currentAction.ops.length-1];r&&qr(e,r)?t.currentAction.ops.pop():t.currentAction.ops.push(e)}})),n&&this.lazySaveOp()}},{key:"collectRemoteOps",value:function(e){var t=this;this.currentAction.self&&this.saveOp(),e.forEach((function(e){if(!Ur(e)){t.currentAction.ops||(t.currentAction.ops=[]);var n=t.currentAction.ops[t.currentAction.ops.length-1];n&&qr(e,n)?t.currentAction.ops.pop():t.currentAction.ops.push(e)}}))}},{key:"getUndoOp",value:function(){var e=this.currentActionIndex-1;if(this.actionOps[e]){var t=S()(this.actionOps[e]),n=ee()(this.totalOps,(function(e){return e.uid===t.uid}));-1!==n?t=this.totalOps[n]:n=e;var r=_.a.type.invert(t.ops),a=this.totalOps.slice(n+1);try{var i=Wr(r,a);if(0===i.length)return;return{self:!0,ops:i,uid:t.uid,status:"undo",rangePath:Gr(t.rangePath,a),startRangePath:Gr(t.startRangePath,a)}}catch(e){console.log(e)}}}},{key:"getRedoOp",value:function(){var e=this.currentActionIndex;if(this.actionOps[e]){var t=S()(this.actionOps[e]),n=ee()(this.totalOps,(function(e){return e.uid===t.uid}));-1!==n?t=this.totalOps[n]:n=e;var r="undo"===t.status?_.a.type.invert(t.ops):t.ops,a=this.totalOps.slice(n+1);try{var i=Wr(r,a);if(0===i.length)return;return{self:!0,ops:i,status:"redo",uid:t.uid,rangePath:Gr(t.rangePath,a),startRangePath:Gr(t.startRangePath,a)}}catch(e){console.log(e)}}}},{key:"getCurrentRangePath",value:function(){var e=this.engine.ot.selectionData.currentRangePath;return 0!==e.length?e:Br(this.engine.change.getRange())}},{key:"getRangePathBeforeCommand",value:function(){return this.engine.change.getRangePathBeforeCommand()||this.getCurrentRangePath()}}]),e}(),$a=function(){function e(){c()(this,e)}return s()(e,[{key:"_getCurrentCardRoot",value:function(){return Ia(this.target)}},{key:"_getCaretRange",value:function(){var e=this.doc,t=this.x,n=this.y;if(e.caretRangeFromPoint&&e.caretRangeFromPoint(t,n))return e.caretRangeFromPoint(t,n);if(event.rangeParent){var r=e.createRange();return r.setStart(event.rangeParent,event.rangeOffset),r.collapse(!0),r}}},{key:"_getCardRoot",value:function(){return this.currentCardRoot?this.currentCardRoot:this.caretCardRoot}},{key:"parseEvent",value:function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="move",this.rangeParent=e.rangeParent,this.rangeOffset=e.rangeOffset,this.x=e.clientX,this.y=e.clientY,this.target=e.target,this.doc=Ot(e.target),this.currentCardRoot=this._getCurrentCardRoot(),this.caretRange=this._getCaretRange(),this.caretCardRoot=Ia(this.caretRange.commonAncestorContainer)}},{key:"getRange",value:function(){var e,t=this.caretRange,n=this.doc,r=this.x,a=this._getCardRoot();if(a){e=n.createRange();var i=a.getBoundingClientRect(),o=(i.left+i.right)/2;e.selectNode(a[0]),o<r?(e.collapse(!1),this.isCardLeftRange=!1):(e.collapse(!0),this.isCardLeftRange=!0)}return this.range=e||t,this.range}},{key:"getCursor",value:function(){var e=this.isCardLeftRange,t=this.range;if(this._getCardRoot()&&t){if(e){t.setEnd(t.commonAncestorContainer,t.endOffset+1);var n=t.getBoundingClientRect();return t.setEnd(t.commonAncestorContainer,t.endOffset-1),{x:n.left-2,y:n.top,height:n.bottom-n.top}}t.setStart(t.commonAncestorContainer,t.startOffset-1);var r=t.getBoundingClientRect();return t.setStart(t.commonAncestorContainer,t.startOffset+1),{x:r.right-2,y:r.top,height:r.bottom-r.top}}var a=this.range.getBoundingClientRect();return 0===a.height&&(a=this.range.startContainer.getBoundingClientRect()),{x:a.left,y:a.top,height:a.bottom-a.top}}}]),e}(),Za=r.HotKeyUtils.isHotkey,Qa=function(){function e(t){c()(this,e),this.data=[],this.change=t,this.engine=t.engine,this.editArea=t.editArea,this.card=t.card,this.isComposing=!1,this.isSelecting=!1,this.dragoverHelper=new $a}return s()(e,[{key:"isCardInput",value:function(e){for(var t=kt(e.target);t;){if(t.isRoot())return!1;if("center"===t.attr(Ee))return!0;if(t.hasClass("lake-embed-toolbar"))return!0;t=t.parent()}return!1}},{key:"onInput",value:function(e){var t=this;this.editArea.on("compositionstart",(function(){t.engine&&t.engine.isReadonly||(Qt.log(t.engine,"compositionstart"),t.isComposing=!0)})),this.editArea.on("compositionend",(function(){t.engine&&t.engine.isReadonly||(Qt.log(t.engine,"compositionend"),t.isComposing=!1)})),this.editArea.on("input",(function(n){t.engine&&t.engine.isReadonly||t.isCardInput(n)||window.setTimeout((function(){!t.isComposing&&e(n)}),10)}))}},{key:"onSelect",value:function(e){var t=this;this.editArea.on("mousedown",(function(e){e.target.isConnected&&!t.isCardInput(e)&&(Qt.log(t.engine,"mousedown: selection start"),t.isSelecting=!0)})),this.onDocument("mouseup",(function(n){t.isSelecting&&(Qt.log(t.engine,"mouseup: selection end"),t.isSelecting=!1,window.setTimeout((function(){return e(n)}),10))})),this.editArea.on("keydown",(function(){var e=window.getSelection();e.rangeCount>0&&(t.keydownRange=e.getRangeAt(0))})),this.editArea.on("keyup",(function(n){if((!t.engine||!t.engine.isReadonly)&&!t.isCardInput(n)&&(Za("left",n)||Za("right",n)||Za("up",n)||Za("down",n)||"Meta"===n.key||Za("shift+left",n)||Za("shift+right",n)||Za("shift+up",n)||Za("shift+down",n)||Za("ctrl+b",n)||Za("ctrl+f",n)||Za("ctrl+n",n)||Za("ctrl+p",n)||Za("ctrl+a",n)||Za("ctrl+e",n)||Za("home",n)||Za("end",n))){var r=window.getSelection();if(r.rangeCount>0){var a=r.getRangeAt(0);if(t.keydownRange&&_n(a,t.keydownRange))return}if(t.isComposing)return;e(n)}}))}},{key:"onPaste",value:function(e){var t=this,n=!1;this.editArea.on("keydown",(function(e){t.engine&&t.engine.isReadonly||(Za("mod",e)&&Za("shift",e)&&Za("v",e)||(n=!1),(Za("mod+shift+v",e)||Za("mod+alt+shift+v",e))&&(n=!0))})),this.editArea.on("paste",(function(r){if(!(t.engine&&t.engine.isReadonly||t.isCardInput(r))){r.preventDefault();var a=Rr(r);a.isPasteText=n,n=!1,e(a)}}))}},{key:"onDrop",value:function(e){var t=this;if(!this.engine||!this.engine.isSub()){var n,r,a,i=function(){kt("body > div.lake-drop-cursor").remove()},o=function(){i();var e=kt('<div class="lake-drop-cursor" />');kt(document.body).append(e)};this.editArea.on("dragstart",(function(e){o(),(n=t.card.closest(e.target))&&(Qt.log("drag card"),t.card.hideCardToolbar(n),(r=n.find("img.lake-drag-image")).length>0?r=r.clone():(r=kt('<div class="lake-drag-image" />')).css({width:n[0].clientWidth+"px",height:n[0].clientHeight+"px"}),r.css({position:"absolute",top:"-10000px",right:"-10000px"}),kt(document.body).append(r),e.dataTransfer.setDragImage(r[0],0,0))})),this.editArea.on("dragover",(function(e){var n=t.dragoverHelper,r=kt("body > div.lake-drop-cursor");if(0!==r.length){n.parseEvent(e),a=n.getRange();var i=n.getCursor();r.css({height:i.height+"px",top:Math.round(window.pageYOffset+i.y)+"px",left:Math.round(window.pageXOffset+i.x)+"px"})}else o()})),this.editArea.on("dragleave",(function(){i()})),this.editArea.on("dragend",(function(){i(),r&&(r.remove(),r=void 0)})),this.editArea.on("drop",(function(o){o.preventDefault(),n&&t.card.showCardToolbar(n),i(),r&&(r.remove(),r=void 0);var c=o.dataTransfer,l=[];try{c.items&&c.items.length>0?l=Array.from(c.items).map((function(e){return"file"===e.kind?e.getAsFile():null})).filter((function(e){return e})):c.files&&c.files.length>0&&(l=Array.from(c.files))}catch(e){c.files&&c.files.length>0&&(l=Array.from(c.files))}e({e:o,dropRange:a,cardRoot:n,files:l}),n=void 0}))}}},{key:"onDocument",value:function(e,t,n){n=void 0!==n&&n,document.addEventListener(e,t,n),this.data.push({type:"document",eventType:e,listener:t,useCapture:n})}},{key:"onWindow",value:function(e,t,n){n=void 0!==n&&n,window.addEventListener(e,t,n),this.data.push({type:"window",eventType:e,listener:t,useCapture:n})}},{key:"destroy",value:function(){this.data.forEach((function(e){"window"===e.type&&window.removeEventListener(e.eventType,e.listener,e.useCapture),"document"===e.type&&document.removeEventListener(e.eventType,e.listener,e.useCapture)}))}}]),e}(),Ja={orderedlist:"ol",unorderedlist:"ul",tasklist:"ul"};function ei(e){e=kt(e);var t=kt("<span />");e.prepend(t),this.card.replaceNode(t,"checkbox",!1)}function ti(e){if(e.collapsed){var t=kt(e.startContainer).closest("ul");if(!vr(t))return;ni(t[0])}else{var n=kt(e.startContainer).closest("ul"),r=kt(e.startContainer).closest("ul");if(!vr(n)&&!vr(r))return;ni(n[0]),n[0]!==r[0]&&ni(r[0])}}function ni(e){kt(e).find("ul>li").each((function(e){for(var t=e.lastChild;t;){var n=kt(t);if($t.isCheckbox(n))return void kt(e).append("<br />");if(t.nodeType===Node.TEXT_NODE){if(""!==t.textContent)return;t=t.previousSibling}else if(t.nodeType===Node.ELEMENT_NODE){if(!n.isMark()||""!==t.textContent)return;t=t.previousSibling}else t=t.previousSibling}}))}function ri(e){var t=this.change.getRange();ln(t);var n=sr.getClosestBlock(t.startContainer),r=sr.getClosestBlock(t.endContainer);if("li"===n.name||"li"===r.name){if(!t.collapsed){var a=n.name!==r.name;ai.call(this,e,a),t=this.change.getRange()}if(e.preventDefault(),function(e){var t=kt(e.endContainer),n=e.endOffset,r=e.cloneRange(),a="li"===t.name?t:t.closest("li");if(!a[0])return!1;r.selectNodeContents(a[0]),r.setStart(t[0],n);var i=r.cloneContents();if(!i.firstChild)return!0;if(1===i.childNodes.length&&"br"===kt(i.firstChild).name)return!0;var o=kt("<div />");return o.append(i),!!$t.isEmptyNode(o[0])}(t)&&Er(t)){var i=gr(sr.getActiveBlocks(t));this.command.execute("tasklist",i)}else{var o=vr(n);this.change.splitBlock();var c=sn(t=this.change.getRange()),l=sr.getClosestBlock(t.endContainer),s=l.prev(),u=l.next();Cr.call(this,s,o),Cr.call(this,l,o),Cr.call(this,u,o),un(t,c),t.collapse(!1),this.change.select(t),this.change.mergeAdjacentList(),o&&ti(this.change.getRange())}return mn(t),!1}}function ai(e,t){var n=this.change.getRange();if(n.collapsed){if("li"===sr.getClosestBlock(n.startContainer).name&&Er(n)){if(e.preventDefault(),this.command.queryState("indent"))return this.command.execute("outdent"),!1;var r=gr(sr.getActiveBlocks(n));if(r)return this.command.execute("tasklist",r),!1}}else{var a=sr.getClosestBlock(n.startContainer),i=sr.getClosestBlock(n.endContainer);if("li"===a.name||"li"===i.name){e.preventDefault();var o=n.cloneRange();return this.change.deleteContent(t),Cr(a),Cr(i),n.setStart(o.startContainer,o.startOffset),n.collapse(!0),this.change.mergeAdjacentList(),this.change.select(n),!1}}}function ii(e){var t=this.change.getRange();if(t.collapsed&&Er(t))return e.preventDefault(),this.command.execute("indent"),!1}var oi={initialize:function(){var e,t=this;this.schema.add([{ul:{class:["lake-list"]}},{li:{class:["lake-list-node","lake-list-task"]}}]),this.command.add("tasklist",{sideEffect:!0,queryState:function(){return gr(t.change.blocks)},execute:function(e,n){if(Ja[e])if("tasklist"===e){t.change.separateBlocks();var r=t.change.getRange(),a=sr.getActiveBlocks(r);if(a){var i=sn(r);if(hr(a,e)?yr(a):kr.call(t,a,n),un(r,i),r.collapsed&&r.startContainer.nodeType===Node.ELEMENT_NODE&&0===r.startContainer.childNodes.length&&r.startContainer.parentNode){var o=document.createElement("br");kt(r.startContainer).before(o),r.startContainer.parentNode.removeChild(r.startContainer),r.selectNode(o),r.collapse(!1)}t.change.select(r),t.change.mergeAdjacentList()}}else t.command.execute("list",e,n)}}),this.on("keydown:enter",(function(e){return ri.call(t,e)})),this.on("keydown:backspace",(function(e){return ai.call(t,e)})),this.on("keydown:tab",(function(e){return ii.call(t,e)})),this.on("paste:before",(function(n){var r=$t.fetchAllChildren(n);r.forEach((function(e){"li"===(e=kt(e)).name&&e.hasClass("lake-list-task")&&(e.closest("ul").addClass("lake-list"),0===e.find("[data-ready-card=checkbox]").length&&ei.call(t,e))})),e=r.some((function(e){return"li"===e.name}))})),this.on("paste:insert",(function(){var e=hn(t.change.getRange()).next();e&&e.find("li.lake-list-task").length>0&&e.find("li.lake-list-task").each((function(e){0===(e=kt(e)).find("[data-lake-card=checkbox],[data-ready-card=checkbox]").length&&ei.call(t,e)}))})),this.on("paste:after",(function(){e&&t.change.mergeAdjacentList()})),this.hotkey.set("mod+opt+t","tasklist","tasklist")},repairTaskList:function(e){ti(e)}};function ci(e){var t=kt(e.startContainer),n=e.startOffset,r=this.card.closest(t);if(r){var a=r.find(De)[0];if(a&&(!t.isElement()||t[0].parentNode!==r[0]||t.attr(Ee))){var i=function(){var e=document.createRange();return e.selectNodeContents(a),e.comparePoint(t[0],n)<0};if("inline"===r.attr(Ce))return e.selectNode(r[0]),void e.collapse(i());i()?this.card.focusPrevBlock(e,r,!0):this.card.focusNextBlock(e,r,!0)}}}function li(e){var t=kt(e.commonAncestorContainer);t.isRoot()||t.isEditable()||(e.selectNodeContents(this.editArea[0]),ln(e),e.collapse(!1));var n=e.cloneRange();if(n.collapse(!0),ci.call(this,n),e.setStart(n.startContainer,n.startOffset),(n=e.cloneRange()).collapse(!1),ci.call(this,n),e.setEnd(n.endContainer,n.endOffset),e.collapsed){an(n=e.cloneRange());var r=kt(n.startContainer),a=n.startOffset;"a"===r.name&&0===a&&e.setStartBefore(r[0]),"a"===r.name&&a===r[0].childNodes.length&&e.setStartAfter(r[0]),e.collapse(!0)}}function si(e){var t=kt(e.commonAncestorContainer),n=this.card.closest(t);if(n&&"inline"===n.attr(Ce))if(this.card.isLeftCursor(t)){var r=t.closest(Re),a=r.text().replace(/\u200B/g,"");if(a)return a=Le(a),e.setStartBefore(n[0]),e.collapse(!0),this.select(e),r.html("&#8203;"),this.insertMark("<span>".concat(a,"</span>")),void this.mergeMark()}else if(this.card.isRightCursor(t)){var i=t.closest(Ae),o=i.text().replace(/\u200B/g,"");if(o)return o=Le(o),e.setEndAfter(n[0]),e.collapse(!1),this.select(e),i.html("&#8203;"),this.insertMark("<span>".concat(o,"</span>")),void this.mergeMark()}else li.call(this,e)}function ui(e,t){e&&e.state.readonly||e.state.activatedByOther||(t?e.state.selected||(e.cardRoot.addClass("lake-selected"),e.select&&e.select(),e.state.selected=t):e.state.selected&&(e.cardRoot.removeClass("lake-selected"),e.unselect&&e.unselect(),e.state.selected=t))}function di(){var e=this;this.editArea.on("keydown",(function(t){e.engine.isReadonly||e.card.closest(t.target)})),this.domEvent.onInput((function(t){Qt.log("input",t.data);var n=e.getRange();si.call(e,n),e.select(n),e.onSelect(),e.change()})),this.domEvent.onDocument("selectionchange",(function(){var t=e.win.getSelection(),n=e.card.components;if(t.anchorNode){for(var r=t.getRangeAt(0),a=0;a<n.length;a++){var i=n[a],o=i.component,c=i.node.find(De)[0];c&&o&&(t.containsNode(c)?ui(o,!0):ui(o,!1))}var l=e.card.getSingleSelectedCard(r);if(l){var s=e.card.getComponent(l);s&&ui(s,!0)}}else n.forEach((function(e){ui(e.component,!1)}))})),this.domEvent.onSelect((function(){var t=e.getRange();(function(e){return!e.collapsed&&(3!==e.commonAncestorContainer.nodeType&&kt(e.commonAncestorContainer).find(Oe).length>0||kt(e.commonAncestorContainer).closest(Oe).length>0)})(t)&&li.call(e,t),e.select(t),e.activateCard(t.commonAncestorContainer,"custom_select"),e.onSelect()})),0===this.editArea.closest(Oe).length&&this.domEvent.onWindow("beforeunload",(function(){e.engine&&e.engine.event.trigger("save:before")})),this.domEvent.onDocument("click",(function(t){var n=e.card.closest(t.target);if(n){var r=e.card.getComponent(n);r&&"inline"===r.type&&(r.allowToolbarFollowUser?e.activateCard(t.target,"click",t):e.activateCard(t.target,"click"))}})),this.domEvent.onDocument("mousedown",(function(t){var n=kt(t.target),r=e.card.closest(t.target);if(r){var a=e.card.getComponent(r);if(a&&"inline"===a.type)return}if(0!==n.closest("body").length&&!(n.closest(".lake-engine-view").length>0)){for(var i=n;i;){var o=i.attr(me);if(o&&"root"!==o)return;i=i.parent()}n.closest("[data-lake_prevent_click_unselect]").length>0||e.activateCard(t.target,"mousedown")}}))}var fi=function(){function e(t,n){var r=this;c()(this,e),m()(this,"_backupRange",null),n=n||{},this.editArea=kt(t),this.engine=n.engine,this.schema=n.schema,this.conversion=n.conversion,this.card=n.card||new Ya,this.domEvent=new Qa(this),this.onChange=n.onChange||function(){},this.onSelect=n.onSelect||function(){},this.onSetValue=n.onSetValue||function(){},this.win=St(this.editArea[0]),this.doc=this.win.document,this.value="",this.marks=[],this.blocks=[],this.cache={},this.history=new Xa(this),this.change=function(){r.clearChangeTimer(),r.changeTimer=setTimeout((function(){r._change()}),200)},di.call(this)}return s()(e,[{key:"_change",value:function(){if(!this.domEvent.isComposing){this.card.gc();var e=this.getValue({ignoreCursor:!0});this.valueCached&&e===this.valueCached||(this.onChange(e),this.engine&&this.engine.setUserChanged(),this.valueCached=e)}}},{key:"clearChangeTimer",value:function(){this.changeTimer&&clearTimeout(this.changeTimer)}},{key:"getSelectionRange",value:function(){var e,t=this.win.getSelection();return t.rangeCount>0?e=t.getRangeAt(0):((e=this.doc.createRange()).selectNodeContents(this.editArea[0]),ln(e),e.collapse(!1)),e}},{key:"getRange",value:function(){return this.getSelectionRange()}},{key:"cacheRangeBeforeCommand",value:function(){this.rangePathBeforeCommand=Br(this.getSelectionRange())}},{key:"getRangePathBeforeCommand",value:function(){var e=this.rangePathBeforeCommand;return this.rangePathBeforeCommand=null,e}},{key:"select",value:function(e){var t=this.win.getSelection();return _n(e,t.rangeCount>0&&t.getRangeAt(0))&&!e.collapsed||(t.removeAllRanges(),t.addRange(e)),this.marks=sr.getActiveMarks(e),this.blocks=sr.getActiveBlocks(e),this}},{key:"activateCard",value:function(e,t,n){if(!((e=kt(e)).closest(".lake-prevent-card-activated").length>0)){var r=e.closest(it);if(!r[0]||this.editArea[0]===r[0]){var a=this.card.closest(e),i=this.card.getBlockCardRoot(a);i&&(a=i),(this.card.isLeftCursor(e)||this.card.isRightCursor(e))&&(a=void 0);var o=a&&this.activeCard&&a[0]===this.activeCard[0];if(["updateCard"].indexOf(t)>=0&&(o=!1),this.activeCard&&!o){this.card.hideToolbar(this.activeCard);var c=this.card.getComponent(this.activeCard);c&&(c.unactivate&&(c.cardRoot.removeClass("lake-activated"),c.unactivate(this.activeCard),c.state.activated=!1),"block"===c.type&&this.engine.readonly(!1))}if(a){var l=this.card.getComponent(a);if(l){if(l.state.activatedByOther)return;if(!o){this.card.showToolbar(a,n);var s=l.constructor.autoSelected;"inline"===l.type&&!1!==s&&("click"!==t||l.state&&!l.state.readonly)&&this.selectCard(a),l.activate&&(l.cardRoot.addClass("lake-activated"),l.activate(a),l.state.activated=!0)}"block"===l.type&&(ui(l,!1),this.engine.readonly(!0)),o||"mousedown"===t&&this.engine.event.trigger("focus")}}this.activeCard=a,a&&this.onSelect()}}}},{key:"selectCard",value:function(e){var t=this.card.getComponent(e);if(!1!==t.constructor.singleSelectable&&("block"!==t.type||!t.state.activated)&&(e=e[0])){var n=this.getRange(),r=e.parentNode,a=Array.prototype.slice.call(r.childNodes).indexOf(e);n.setStart(r,a),n.setEnd(r,a+1),this.select(n)}}},{key:"focusCard",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getRange();this.card.focus(n,e,t),this.select(n),this.engine.readonly(!1),this.activateCard(kt(n.startContainer),"mousedown"),this.onSelect(),gn(this.getRange(),this.editArea[0],this.engine.scrollNode)}},{key:"focus",value:function(){var e=this.getRange();return this.select(e),this.editArea[0].focus(),this}},{key:"focusToStart",value:function(){var e=this.getRange();return e.selectNodeContents(this.editArea[0]),ln(e),e.collapse(!0),this.select(e),this.editArea[0].focus(),this}},{key:"focusToEnd",value:function(){var e=this.getRange();return e.selectNodeContents(this.editArea[0]),ln(e),e.collapse(!1),this.select(e),this.editArea[0].focus(),this}},{key:"clearBackupRange",value:function(){this._backupRange=null}},{key:"blur",value:function(){return this.editArea[0].blur(),this}},{key:"setValue",value:function(e,t){var n,r='change.setValue("'.concat((e=e||"").length,' chars")'),a=this.getRange();if(""===e)a.setStart(this.editArea[0],0),a.collapse(!0),this.select(a);else{var i=new er(e,this.schema,this.conversion,(function(e){Dt(e).forEach((function(e){"A"===e.tagName&&function(e){e&&e.parentNode&&0===e.childNodes.length&&e.parentNode.removeChild(e)}(e),sr.removeEmptyMarksAndAddBr(kt(e)),t&&t(e)}))}));this.editArea.htmlKeepID(i.toLowerValue()),(n=this.engine)&&st(n.editArea[0]),this.card.renderAll(this.editArea,this.engine);var o,c=this.editArea.find(we);c.length>0&&(o={anchor:c[0],focus:c[0]});var l=this.editArea.find(be),s=this.editArea.find(ke);l.length>0&&s.length>0&&(o={anchor:l[0],focus:s[0]}),o&&(un(a,o),this.select(a),this.onSelect())}this.onSetValue(),this.history&&this.history.clear(),Qt.log(r)}},{key:"getOriginValue",value:function(){return new er(this.editArea[0],this.schema).toValue()}},{key:"combinTextNode",value:function(){It(this.editArea[0])}},{key:"getValue",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.ignoreCursor||this.domEvent.isComposing)e=this.getOriginValue();else{var n,r=this.getRange();xn(r)||(n=sn(r)),e=this.getOriginValue(),n&&un(r,n)}return We(e)}},{key:"isEmpty",value:function(){return Mt(this.editArea[0])}},{key:"insertCard",value:function(e,t){!this.engine.isFocus()&&this._backupRange&&this.select(this._backupRange),Qt.log("change.insertCard()");var n=this.card.createComponent({name:e,value:t,engine:this.engine}),r=n.constructor,a=this.getRange();li.call(this,a);var i=this.card.insertNode(a,n,this.engine);return"inline"===n.type&&this.card.focus(a,i,!1),this.select(a),"block"===n.type&&!1!==r.autoActivate&&this.activateCard(i,"insertCard"),this.change(),i}},{key:"updateCard",value:function(e,t){Qt.log("change.updateCard()");var n=this.card.getComponent(e);n&&(n.value=t,this.card.updateNode(e,n)),this.change()}},{key:"removeCard",value:function(e){Qt.log("change.removeCard()");var t=this.getRange(),n=t.cloneRange();this.card.isInline(e)?(t.setEndAfter(e[0]),t.collapse(!1)):this.card.focusPrevBlock(t,e,!0);var r=e.parent();this.card.removeNode(e,this.engine),ti(n),Pt(r)&&(r.isRoot()?(r.html("<p><br /></p>"),t.selectNodeContents(r[0]),ln(t),t.collapse(!1)):(r.html("<br />"),t.selectNodeContents(r[0]),t.collapse(!1))),this.select(t),this.change()}}]),e}();Object.keys(Ca).forEach((function(e){fi.prototype[e]=function(){Qt.log("change.".concat(e,"()"));var t=Array.prototype.slice.call(arguments),n=this.getRange();return li.call(this,n),["insertFragment"].includes(e)&&t.unshift(this.card),t.unshift(n),["splitBlock"].includes(e)&&t.push(this.engine),Ca[e]&&(n=Ca[e].apply(Ca,t),this.combinTextNode(),this.select(n),this.change()),this}}));var pi=r.HotKeyUtils.isHotkey,hi=function(){function e(t){var n=this;c()(this,e),m()(this,"handleKeydown",(function(e){for(var t=Object.keys(n.data),r=0,a=t.length;r<a;r++){var i=t[r],o=n.data[i];if(pi(i,e))return e.preventDefault(),void(n.disabled||o&&o())}})),this.data={},this.command=t,this.editArea=t.change.editArea,this.disabled=!1,this.editArea.on("keydown",this.handleKeydown)}return s()(e,[{key:"set",value:function(){var e=this,t=Array.prototype.slice.call(arguments),n=t.shift();this.data[n]=function(){e.command.execute.apply(e.command,t)}}},{key:"enable",value:function(){this.disabled=!1,Qt.log("enable hotkey")}},{key:"disable",value:function(){this.disabled=!0,Qt.log("disable hotkey")}},{key:"destroy",value:function(){this.editArea.off("keydown",this.handleKeydown)}}]),e}();function mi(e,t){t=kt(t);var n=this.change.blocks||[],r=this.change.marks||[];if(this.change.insertBlock(t,!0),n[0]){var a=n[0].css();t.css(a)}var i=t.find("br");r.forEach((function(e){"code"!==e.name&&(e=e.clone(),i.before(e),e.append(i),i=e)})),e.selectNode(t.find("br")[0]),e.collapse(!1),Cn.scrollIntoView(e)}function gi(e,t,n){e.selectNode(t[0]),e.collapse(!!n),this.change.select(e);var r=kt("<p><br /></p>");this.change.insertBlock(r,!0),n?this.card.focus(e,t,!0):(e.selectNodeContents(r[0]),e.collapse(!1)),this.change.select(e)}function vi(e,t,n){if("inline"===n.attr(Ce))kt(t.startContainer).closest(Re).length>0&&(t.selectNode(n[0]),t.collapse(!0),this.change.select(t)),kt(t.startContainer).closest(Ae).length>0&&(t.selectNode(n[0]),t.collapse(!1),this.change.select(t));else{if(kt(t.startContainer).closest(Re).length>0)return e.preventDefault(),gi.call(this,t,n,!0),!1;if(kt(t.startContainer).closest(Ae).length>0)return e.preventDefault(),gi.call(this,t,n,!1),!1}}function yi(e,t){var n=e.cloneRange();an(n),sr.isBlockLastOffset(e,"end")||n.endContainer.nodeType===Node.ELEMENT_NODE&&t.children().length>0&&n.endContainer.childNodes[n.endOffset]===t.last()[0]&&"br"===t.last().name?"p"===t.name&&t[0].className?mi.call(this,e,'<p class="'.concat(t[0].className,'"><br /></p>')):mi.call(this,e,"<p><br /></p>"):this.change.splitBlock()}function bi(e){var t=this.change.getRange(),n=this.card.closest(t.startContainer);if(n&&!1===vi.call(this,e,t,n))return!1;var r=sr.getClosestBlock(t.endContainer);(r.isRoot()||r.isTable())&&(this.change.wrapBlock("<p />"),r=sr.getClosestBlock(t.endContainer));var a=r.parent();if(a&&a.isEditable()&&a.isBlock()){if("blockquote"===a.name&&"p"===r.name&&r.nextElement())return e.preventDefault(),yi.call(this,t,r),!1;if("li"===a.name&&"p"===r.name){1===r.children().length&&"br"===r.first().name&&r.first().remove();var i=Cn.createBookmark(t);sr.unwrapNode(r),Cn.moveToBookmark(t,i),r=sr.getClosestBlock(t.endContainer)}if(t.collapsed&&sr.isBlockLastOffset(t,"end")&&sr.isBlockFirstOffset(t,"end"))return e.preventDefault(),["li","td","th"].indexOf(a.name)>=0?(this.change.unwrapBlock("<".concat(a.name," />")),this.change.setBlocks("<".concat(a.name," />"))):(this.change.unwrapBlock("<".concat(a.name," />")),this.change.setBlocks("<p />")),!1}if(r.isHeading())return e.preventDefault(),yi.call(this,t,r),!1;if("li"===r.name){if(r.find("[data-lake-card=checkbox]").length>0)return;if(e.preventDefault(),sr.isBlockLastOffset(t,"end"))if(t.collapsed&&sr.isBlockFirstOffset(t,"end")){var o=r.closest("ul,ol");this.change.unwrapBlock("<".concat(o.name," />")),this.change.setBlocks("<p />")}else{var c=kt("<li><br /></li>");c.attr(r.attr()),mi.call(this,t,c)}else this.change.splitBlock();return this.change.mergeAdjacentList(),Cn.scrollIntoView(t),!1}}function ki(e){e.preventDefault();var t=this.change.getRange(),n=kt("<br />");this.change.insertInline(n),sr.isBlockLastOffset(t,"end")&&(n.next()&&"br"===n.next().name||n.after("<br />"))}var wi=/^<p(\s[^>]*?)?><br><\/p>$/i;function xi(e,t){var n=t.parent();t.remove(),Pt(n)&&(n.isRoot()?(n.html("<p><br /></p>"),e.selectNodeContents(n[0]),ln(e),e.collapse(!1)):(n.html("<br />"),e.selectNodeContents(n[0]),e.collapse(!1)),this.change.select(e))}function _i(e,t){if(t.isEditable()&&!t.isTable()){var n=sn(e);sr.unwrapNode(t),un(e,n),this.change.select(e)}}function Ci(e,t){if(t.children().length>1&&"br"===t.first().name)return t.first().remove(),!1;var n,r=t.prev();if(!r)return t.parent().isTable()&&(n=t.parent(),wi.test(n.html().trim()))||t.parent().isEditable()&&_i.call(this,e,t),!1;if(r.attr(xe))return this.card.focus(e,r),this.change.select(e),!1;if(r.isVoid())return r.remove(),!1;if(r.isHeading()&&Pt(r))return r.remove(),!1;if(r.isText()){var a=kt("<p />");r.before(a),a.append(r),r=a}if(["ol","ul"].indexOf(r.name)>=0&&(r=r.last()),1===t.children().length&&"br"===t.first().name?t.first().remove():r&&1===r.children().length&&"br"===r.first().name&&r.first().remove(),!r||r.isText())_i.call(this,e,t);else{var i=sn(e);sr.mergeNode(r,t),un(e,i),this.change.select(e),this.change.mergeMark(),this.change.mergeAdjacentList()}return!1}function Ei(e,t,n){var r=t.prev();r&&(r.attr(xe)?this.card.focus(e,r):(["ol","ul"].indexOf(r.name)>=0&&(r=r.last()),r&&(n&&Mt(r[0])?r.remove():(e.selectNodeContents(r[0]),e.collapse(!1),this.change.select(e)))))}function Oi(e,t,n){if("inline"===n.attr(Ce)){if(kt(t.startContainer).closest(Re).length>0&&(t.selectNode(n[0]),t.collapse(!0),this.change.select(t)),kt(t.startContainer).closest(Ae).length>0)return e.preventDefault(),this.change.removeCard(n),sr.addOrRemoveBr(t),!1}else{if(kt(t.startContainer).closest(Re).length>0)return e.preventDefault(),n.parent().isEditable()?_i.call(this,t,n.parent()):Ei.call(this,t,n,!0),!1;if(kt(t.startContainer).closest(Ae).length>0)return e.preventDefault(),Ei.call(this,t,n,!1),this.change.removeCard(n),!1}}function Si(e){var t=this.change.getRange(),n=this.card.closest(t.startContainer);if(n){if(!1===Oi.call(this,e,t,n))return!1;if(!1===this.event.trigger("keydown:backspace",e))return}if(this.change.isEmpty())return e.preventDefault(),this.change.setValue("<p><br /><cursor /></p>"),!1;var r=sr.getClosestBlock(t.startContainer);if(r.isTable()&&Mt(r))return e.preventDefault(),r.html("<p><br /></p>"),t.selectNode(r[0]),ln(t),t.collapse(!1),this.change.select(t),!1;if(!t.collapsed)return e.preventDefault(),this.change.deleteContent(),!1;var a=dn(t);if(a&&a.attr(xe)&&"checkbox"!==a.attr(xe))return e.preventDefault(),this.change.removeCard(a),!1;if(a&&a.isBlock()&&Mt(a))return e.preventDefault(),xi.call(this,t,a),!1;if(!sr.isBlockFirstOffset(t,"start")){var i=t.cloneRange();return ln(i),on(i),void(i.startContainer.nodeType===Node.TEXT_NODE&&function(e){var t=e.commonAncestorContainer;return!(!e.collapsed||1!==e.startOffset||e.startContainer!==t||t.nodeType!==Node.TEXT_NODE||(e=e.cloneRange(),t.parentNode.childNodes.length>1||1!==t.textContent.length||(e.selectNodeContents(t),Un(e,!1),0)))}(i)&&e.preventDefault())}var o=kt(t.startContainer),c=t.startOffset;if(o.isRoot()){var l=o[0].childNodes[c-1];if(l&&"br"===kt(l).name)return e.preventDefault(),kt(l).remove(),!1}var s=this.command.queryState("alignment");if("center"===s)return e.preventDefault(),this.command.execute("alignment","left"),!1;if("right"===s)return e.preventDefault(),this.command.execute("alignment","center"),!1;if(this.command.queryState("indent"))return e.preventDefault(),this.command.execute("outdent"),!1;if(["ol","ul"].indexOf(r.name)>=0){var u=r.first();if(!u||u.isText())return e.preventDefault(),Ci.call(this,t,r);r=u,t.setStart(r[0],0),t.collapse(!0),this.change.select(t)}if("li"===r.name){if(r.find("[data-lake-card=checkbox]").length>0)return;e.preventDefault();var d=r.closest("ul,ol");return r.parent().isRoot()?Ci.call(this,t,r):(d.length>0?this.command.execute("list","ol"===d.name?"orderedlist":"unorderedlist"):_i.call(this,t,r),!1)}var f=r.parent();return f&&"blockquote"===f.name&&r.isHeading()?(e.preventDefault(),r.prevElement()?Ci.call(this,t,r):(this.change.unwrapBlock("<blockquote />"),!1)):r.isTitle()&&Mt(r)?(e.preventDefault(),this.change.setBlocks("<p />"),!1):r.isHeading()?(e.preventDefault(),Ci.call(this,t,r)):["li","td","th"].indexOf(r.name)<0?(e.preventDefault(),this.change.setBlocks("<p />"),!1):void 0}function Ri(e,t){if(e){var n=this.change.getRange();if(n.collapsed){var r=this.card.closest(n.startContainer);r&&Oi.call(this,t,n,r)}}}function Di(e){var t=this.change.getRange();return!t.collapsed||sr.isBlockFirstOffset(t,"start")?(e.preventDefault(),this.command.execute("indent",!0),!1):(e.preventDefault(),this.change.insertText("    "),!1)}var Ai=r.HotKeyUtils.isHotkey;function Ti(e,t){var n=this.change.getRange(),r=this.card.getComponent(e).constructor.singleSelectable;if(Ai("up",t)||Ai("ctrl+p",t))return t.preventDefault(),this.card.focusPrevBlock(n,e,!1),this.change.select(n),!1;if(Ai("down",t)||Ai("ctrl+n",t))return t.preventDefault(),this.card.focusNextBlock(n,e,!1),this.change.select(n),!1;if(kt(n.commonAncestorContainer).closest(Re).length>0)return Ai("right",t)||Ai("ctrl+e",t)||Ai("ctrl+f",t)?(t.preventDefault(),!1!==r?this.change.selectCard(e):(this.card.focus(n,e,!1),this.change.select(n)),!1):void((Ai("left",t)||Ai("ctrl+a",t)||Ai("ctrl+b",t))&&(n.setStartBefore(e[0]),n.collapse(!0),this.change.select(n)));if(kt(n.commonAncestorContainer).closest(Ae).length>0){if(Ai("left",t)||Ai("ctrl+a",t)||Ai("ctrl+b",t))return t.preventDefault(),!1!==r?this.change.selectCard(e):(this.card.focus(n,e,!0),this.change.select(n)),!1;if(Ai("right",t)||Ai("ctrl+e",t)||Ai("ctrl+f",t))return e.next()&&e.next().isCard()?(t.preventDefault(),this.change.selectCard(e.next()),!1):(n.setEndAfter(e[0]),n.collapse(!1),void this.change.select(n))}}var Pi=r.HotKeyUtils.isHotkey;function ji(e,t){var n=this.change.getRange();if(Pi("up",t)||Pi("ctrl+p",t))return t.preventDefault(),this.card.focusPrevBlock(n,e,!1),this.change.select(n),!1;if(Pi("down",t)||Pi("ctrl+n",t))return t.preventDefault(),this.card.focusNextBlock(n,e,!1),this.change.select(n),!1;if(kt(n.commonAncestorContainer).closest(Re).length>0)return Pi("left",t)||Pi("ctrl+a",t)||Pi("ctrl+b",t)?(t.preventDefault(),this.card.focusPrevBlock(n,e,!1),this.change.select(n),!1):Pi("right",t)||Pi("ctrl+e",t)||Pi("ctrl+f",t)?(t.preventDefault(),this.change.selectCard(e),!1):void(t.metaKey||t.ctrlKey||(this.card.focusPrevBlock(n,e,!0),this.change.select(n)));if(kt(n.commonAncestorContainer).closest(Ae).length>0){if(Pi("left",t)||Pi("ctrl+a",t)||Pi("ctrl+b",t))return t.preventDefault(),this.change.selectCard(e),!1;if(Pi("right",t)||Pi("ctrl+e",t)||Pi("ctrl+f",t))return t.preventDefault(),this.card.focusNextBlock(n,e,!1),this.change.select(n),!1;t.metaKey||t.ctrlKey||(this.card.focusNextBlock(n,e,!0),this.change.select(n))}if(this.card.getSingleSelectedCard(n)){if(Pi("left",t)||Pi("ctrl+a",t)||Pi("ctrl+b",t))return t.preventDefault(),this.card.focus(n,e,!0),this.change.select(n),!1;if(Pi("right",t)||Pi("ctrl+e",t)||Pi("ctrl+f",t))return t.preventDefault(),this.card.focus(n,e,!1),this.change.select(n),!1}}function Mi(e){return e.preventDefault(),this.command.execute("outdent"),!1}function Ni(e){var t=this.change.getRange();if(!t.collapsed)return e.preventDefault(),void this.change.deleteContent();var n=!1,r=this.card.closest(t.startContainer),a=null;if(r){if(Li(t.startContainer,"left"))return e.preventDefault(),this.change.selectCard(r),void this.change.deleteContent();if(!Li(t.startContainer,"right"))return;a=r[0]}else if(t.endContainer.nodeType===Node.TEXT_NODE){if(t.endContainer.data.length>t.endOffset){e.preventDefault();var i=t.cloneRange();return i.setEnd(t.endContainer,t.endOffset+1),this.change.select(i),void this.change.deleteContent()}a=t.endContainer}else{if(t.endContainer.nodeType!==Node.ELEMENT_NODE)return;0===t.endContainer.childNodes.length?a=t.endContainer:0===t.endOffset?(1===t.endContainer.childNodes.length&&"BR"===t.endContainer.firstChild.nodeName||(n=!0),a=t.endContainer.childNodes[t.endOffset]):a=t.endContainer.childNodes[t.endOffset-1]}var o=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(kt(t).isRoot())return null;if(n||(t=Ii(t)),!t)return null;for(;t;){if(kt(t).attr(xe)){var r=t.ownerDocument.createRange();return r.setStartAfter(t),r.collapse(!0),r}if(kt(t).isBlock()){var a=t.ownerDocument.createRange();return a.selectNodeContents(t),a.collapse(!0),a}if("BR"===t.nodeName){if(1===t.parentNode.childNodes.length)return null;var i=t.ownerDocument.createRange();return i.setStartAfter(t),i.collapse(!0),i}if(t.nodeType===Node.TEXT_NODE){if(0===t.data.length)return e(t);var o=t.ownerDocument.createRange();return o.setStart(t,1),o.collapse(!0),o}if(0===t.childNodes.length)return e(t);t=t.childNodes[0]}}(a,n);if(o){e.preventDefault();var c=t.startOffset;1===c&&1===t.startContainer.childNodes.length&&"BR"===t.startContainer.childNodes[0].nodeName&&(c=0),o.setStart(t.startContainer,c),this.change.select(o),this.change.deleteContent()}}function Li(e,t){return kt(e).closest('[data-card-element="'.concat(t,'"]'),(function(e){return kt(e).isRoot()?null:e.parentNode})).length>0}function Ii(e){return kt(e).isRoot()?null:e.nextSibling?e.nextSibling:Ii(e.parentNode)}var zi=r.HotKeyUtils.isHotkey;function Bi(e){if(this.isReadonly)zi("mod+a",e)&&e.preventDefault();else if(!this.card.closest(e.target)){if(zi("enter",e))return!1!==this.event.trigger("keydown:enter",e)&&bi.call(this,e),void gn(this.change.getRange(),this.editArea[0],this.scrollNode);if(zi("shift+enter",e))return ki.call(this,e),void gn(this.change.getRange(),this.editArea[0],this.scrollNode);if(zi("backspace",e))!1!==this.event.trigger("keydown:backspace",e)&&Si.call(this,e);else if(zi("delete",e))!1!==this.event.trigger("keydown:delete",e)&&Ni.call(this,e);else if(zi("mod+backspace",e))Ri.call(this,r.ua.safari,e);else if(zi("tab",e))!1!==this.event.trigger("keydown:tab",e)&&Di.call(this,e);else if(zi("shift+tab",e))Mi.call(this,e);else{var t=this.change.getRange(),n=this.card.getSingleCardRoot(t);if(n&&!1===("inline"===n.attr(Ce)?Ti.call(this,n,e):ji.call(this,n,e)))return;" "!==e.key?"@"===e.key||e.shiftKey&&229===e.keyCode&&"Digit2"===e.code?this.event.trigger("keydown:at",e):"/"===e.key||zi("/",e)||229===e.keyCode&&"Slash"===e.code?this.event.trigger("keydown:slash",e):zi("mod+a",e)&&this.event.trigger("keydown:selectall",e):this.event.trigger("keydown:space",e)}}}var Fi=r.HotKeyUtils.isHotkey;function Vi(e){this.isReadonly||this.card.closest(e.target)||(Fi("enter",e)?this.event.trigger("keyup:enter",e):Fi("backspace",e)?this.event.trigger("keyup:backspace",e):Fi("tab",e)?this.event.trigger("keyup:tab",e):Fi("space",e)&&this.event.trigger("keyup:space",e))}var Ui={toDOM:function e(t){var n,r,a=document.createDocumentFragment(),i=0,o=null;for("string"==typeof t[0]&&(o=t[0],i=1);i<t.length;i++)if(Array.isArray(t[i]))a.appendChild(e(t[i]));else if(r=t[i],"[object Object]"===Object.prototype.toString.call(r)){if(o)for(var c in n=document.createElement(o),t[i]){var l=Ke.unescapeDots(c),s=Ke.unescape(t[i][c]);n.setAttribute(l,s)}}else if("number"==typeof t[i]||"string"==typeof t[i]){var u=document.createTextNode(t[i]);a.appendChild(u)}return!n&&o&&(n=document.createElement(o)),n?(n.appendChild(a),n):a.childNodes},fromDOM:function e(t){if(!$r.isTransientElement(t)){var n;if(t.nodeType===Node.ELEMENT_NODE){n=[t.nodeName.toLowerCase()];for(var r=t.attributes,a={},i=0;r&&i<r.length;i++){var o=r[i].name;r[i].specified&&!$r.isTransientAttribute(t,o)&&("style"===o?a.style=Ke.toHex(t.style.cssText||r[i].value):"string"==typeof r[i].value&&(a[o]=r[i].value))}return n.push(a),function(t,n){var r=t.childNodes;if(0!==r.length)for(var a=0;a<r.length;a++){var i=e(r[a]);i&&n.push(i)}}(t,n),n}return t.nodeType===Node.TEXT_NODE?String(t.nodeValue):void 0}},removePath:function(e,t){if(0!==t.length){for(var n=0,r=e;n<t.length-1;)r=r[t[n]],n++;ne()(r)?r.splice(t[n],1):delete r[t[n]]}},setPathValue:function(e,t,n){if(0!==t.length){for(var r=0,a=e;r<t.length-1;)a=a[t[r]],r++;ne()(a)?a.splice(t[r],1,n):a[t[r]]=n}},addPathValue:function(e,t,n){if(0!==t.length){for(var r=0,a=e;r<t.length-1;)a=a[t[r]],r++;ne()(a)&&a.splice(t[r],0,n)}},getPathValue:function(e,t){if(0===t.length)return e;for(var n=0,r=e;n<t.length&&void 0!==r;)r=r[t[n]],n++;return r},pushAndRepair:function(e,t){e.forEach((function(e){var n=t.newPath[t.newPath.length-1],r=e.newPath[e.newPath.length-1];t.ld&&("ld"in e&&(r<=n?t.oldPath[t.oldPath.length-1]+=1:(e.oldPath[e.oldPath.length-1]+=1,e.p[e.p.length-1]+=1)),"li"in e&&(r>=n?e.p[e.p.length-1]+=1:t.oldPath[t.oldPath.length-1]-=1)),t.li&&("ld"in e&&r>n&&(e.oldPath[e.oldPath.length-1]-=1,e.p[e.p.length-1]-=1),"li"in e&&r>n&&(e.p[e.p.length-1]-=1))})),e.push(t)}};var qi=function(e){ae()(n,Y.EventEmitter2);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=le()(e);if(t){var a=le()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return oe()(this,n)}}(n);function n(e,r){var a;return c()(this,n),a=t.call(this),m()(ue()(a),"patchesToOps",(function(e,t,n){var r=[],i=a.dmp.patch_make(t,n);return Object.keys(i).forEach((function(t){var n=i[t],a=n.start1;n.diffs.forEach((function(t){var n=p()(t,2),i=n[0],o=n[1];i!==fe.a.DIFF_DELETE?i!==fe.a.DIFF_INSERT?i!==fe.a.DIFF_EQUAL||(a+=o.length):r.push({si:o,p:[].concat(w()(e),[a])}):r.push({sd:o,p:[].concat(w()(e),[a])})}))})),r})),m()(ue()(a),"cacheAddedNode",(function(e){a.addedNodes.push(e)})),m()(ue()(a),"clearAddedNodeCache",(function(){a.addedNodes=[]})),m()(ue()(a),"inAddedCache",(function(e){return a.addedNodes.find((function(t){return Yt(e,t)||e===t}))})),m()(ue()(a),"isTransientMutation",(function(e){var t=e.addedNodes,n=e.removedNodes,r=e.target,a=e.type,i=e.attributeName;if("childList"===a){if(t[0]&&Ir(t[0]))return!0;if(n[0]&&Ir(n[0]))return!0;if(Ir(r))return!0}return!("attributes"!==a||!Ir(r)&&!zr(r,i))||!("characterData"!==a||!Ir(r))})),m()(ue()(a),"makeOpsFromMutations",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0;r=r||a.engine.editArea[0];for(var i=[],o=[],c=0,l=[],s=[],u=[],d=function(e,t){null==e||l.includes(e)||(u.includes(e)||u.push(e),e.mutations=e.mutations||[],e.mutations.push(t))},f=!1,p=function(){var u=e[c],p=u.target,h=u.addedNodes,m=u.removedNodes,g=u.type;if(a.inAddedCache(p))return c++,"continue";if("childList"===g)if(p===r){if(m[0]){var v=a.getRemoveNodeIndex(u,e);Array.from(m).forEach((function(e){if(!s.find((function(t){return t===e}))){var r=[].concat(w()(t),[v+2]),a=[].concat(w()(n),[v+2]),o={ld:!0,p:r,newPath:r.slice(),oldPath:a};Ui.pushAndRepair(i,o)}}))}h[0]&&Array.from(h).forEach((function(e){var n=Ui.fromDOM(e);if(e.parentNode===r){var o=[].concat(w()(t),[Gt(e)+2]),c={li:n,p:o,newPath:o.slice()};Ui.pushAndRepair(i,c),l.push(e),a.cacheAddedNode(e)}else if(null!==e.parentNode){var f=Xt(e,r);d(f,u),s.push(e)}else s.push(e)}))}else{var y=Xt(p,r);d(y,u)}else if("characterData"===g)if(p===r)f||("string"==typeof Ui.getPathValue(a.doc.data,t)&&o.push({path:t,newValue:p.data}),f=!0);else{var b=Xt(p,r);d(b,u)}else if("attributes"===g)if(p===r){var k=u.oldValue,x=Ke.escape(p.getAttribute(u.attributeName));if(k!==x){var _={};k&&(_.od=k),x&&(_.oi=x),_.p=[].concat(w()(t),[1,Ke.escapeDots(u.attributeName)]),o.push(_)}}else{var C=Xt(p,r);d(C,u)}c++};e[c];)p();var h=[];return i.forEach((function(e){if(e.ld){var t=Ui.getPathValue(a.doc.data,e.oldPath);void 0!==t&&h.push({ld:t,p:e.p})}"li"in e&&h.push({li:e.li,p:e.p})})),h=h.concat(o),u.forEach((function(e){var r=e.mutations;if(delete e.mutations,null!=e){var o=Gt(e),c=Xr(o,i);h=h.concat(a.makeOpsFromMutations(r,[].concat(w()(t),[o+2]),[].concat(w()(n),[c+2]),e))}})),h})),m()(ue()(a),"getRemoveNodeIndex",(function(e,t){var n,r=e.target,i=e.nextSibling,o=e.previousSibling,c=e.addedNodes,l=Array.from(r.childNodes).indexOf(c[0]),s=Array.from(r.childNodes).indexOf(o),u=Array.from(r.childNodes).indexOf(i);return-1!==s?n=s+1:-1!==u?n=u:-1!==l?n=l:o?i?o&&(n=a.getRemoveNodeIndexFromMutation(o,r,t)):n=r.childNodes.length:n=0,void 0!==n?n:0})),m()(ue()(a),"getRemoveNodeIndexFromMutation",(function(e,t,n){var r=n.find((function(n){return n.target===t&&n.removedNodes[0]===e}));if(r)return a.getRemoveNodeIndex(r,n)})),m()(ue()(a),"handleMutations",(function(e){e=e.filter((function(e){return!a.isTransientMutation(e)})),a.clearAddedNodeCache();var t=a.makeOpsFromMutations(e);0!==(t=Vr(t)).length&&a.normalizeOps(t)})),m()(ue()(a),"normalizeOps",(function(e){if(a.engine.domEvent.isComposing){if(2===e.length&&e[1].ld&&"br"===e[1].ld[0]&&e[0].li&&"string"==typeof e[0].li)return a.lineStart=!0,e[0].li="",void a.readyToEmitOps(e);if(1===e.length&&$r.isCursorOp(e[0]))return;return 2===e.length&&e[0].si&&E()(e[0],e[1])&&e.splice(1,1),a.laterOps=e,a.timer&&clearTimeout(a.timer),void(a.timer=setTimeout((function(){a.engine.domEvent.isComposing||(a.lineStart&&(a.engine.history.hold(),a.lineStart=!1),a.laterOps&&(a.readyToEmitOps(a.laterOps),a.laterOps=null),a.timer=null)}),0))}if(a.laterOps){var t=E()(a.laterOps,e);if(a.readyToEmitOps(a.laterOps),a.laterOps=null,t)return}a.readyToEmitOps(e)})),a.engine=e,a.doc=r.doc,a.dmp=new fe.a,a}return s()(n,[{key:"setDoc",value:function(e){this.doc=e}},{key:"readyToEmitOps",value:function(e){var t=this,n=[];e.forEach((function(e){if(e.path&&void 0!==e.newValue){var r=Ui.getPathValue(t.doc.data,e.path);n=n.concat(t.patchesToOps(w()(e.path),r,e.newValue))}else 0!==e.p.length&&n.push(e)})),0!==n.length&&this.emit("ops",n)}}]),n}();var Hi={childList:!0,subtree:!0,attributes:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0},Wi=function(e){ae()(n,Y.EventEmitter2);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=le()(e);if(t){var a=le()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return oe()(this,n)}}(n);function n(e,r){var a;c()(this,n),a=t.call(this);var i=r.engine,o=r.doc;return a.engine=i,a.doc=o,a.node=kt(e),a.isStopped=!0,a.creator=new qi(i,{doc:o}),a.observer=new MutationObserver((function(e){a.isStopped||a.creator.handleMutations(e)})),a.creator.on("ops",(function(e){a.onOpsReady(e)})),a}return s()(n,[{key:"setDoc",value:function(e){this.doc=e,this.creator.setDoc(e)}},{key:"start",value:function(){this.isStopped&&(this.observer.observe(this.node[0],Hi),this.isStopped=!1)}},{key:"stop",value:function(){this.isStopped||(this.observer.disconnect(),this.isStopped=!0)}},{key:"onOpsReady",value:function(e){this.isStopped||this.emit("ops",e)}}]),n}();function Yi(e,t){var n=t[0];if(1===n)return[e,void 0,e,n];var r=n-2,a=e.childNodes[r],i=t[1];return 1===t.length||0===i||1===i||a.nodeType===Node.TEXT_NODE?[a,r,e,i]:Yi(a,t.slice(1))}function Gi(e,t){var n=kt(e).closest("[data-lake-id]");if(n[0]){var r=n.attr("data-lake-id"),a=document.createRange(),i=document.createRange();return a.setStart(n[0],0),a.setEnd(e,t),i.setStart(e,t),i.setEnd(n[0],n[0].childNodes.length),{lakeId:r,leftText:a.toString(),rightText:i.toString()}}}function Ki(e){if(e){var t=e.lakeId,n=e.leftText,r=e.rightText,a=kt('[data-lake-id="'.concat(t,'"]'));if(a[0]){var i=(a=a[0]).textContent;if(""===i)return{container:a,offset:0};if(i.startsWith(n)){for(var o=n.length,c=a.firstChild;3!==c.nodeType||c.textContent.length<o;)c.textContent.length<o?(o-=c.textContent.length,c=c.nextSibling):c=c.firstChild;return{container:c,offset:o}}if(i.endsWith(r)){for(var l=r.length,s=a.lastChild;3!==s.nodeType||s.textContent.length<l;)s.textContent.length<l?(l-=s.textContent.length,s=s.previousSibling):s=s.lastChild;return{container:s,offset:s.textContent.length-l}}for(var u=0;i[u]===n[u];)u++;for(var d=a.firstChild;3!==d.nodeType||d.textContent.length<u;)d.textContent.length<u?(u-=d.textContent.length,d=d.nextSibling):d=d.firstChild;return{container:d,offset:u}}}}var Xi=function(){function e(t,n){c()(this,e),this.engine=t,this.editArea=t.editArea,this.options=n}return s()(e,[{key:"setAttribute",value:function(e,t,n){var r=this.engine,a=Yi(this.editArea[0],e),i=p()(a,1)[0];i&&(kt(i).isRoot()&&!/^data-selection-/.test(t)||(t=Ke.unescapeDots(t),n=Ke.unescape(n),i.setAttribute(t,n),kt(i).isCard()&&r.card.reRenderAll(i,r)))}},{key:"removeAttribute",value:function(e,t){var n=Yi(this.editArea[0],e),r=p()(n,1)[0];r&&(kt(r).isRoot()&&!/^data-selection-/.test(t)||r.removeAttribute(t))}},{key:"insertNode",value:function(e,t){var n=this.engine,r=Yi(this.editArea[0],e),a=p()(r,3),i=a[0],o=a[2];if(o&&!kt(i).isRoot()){var c="string"==typeof t?document.createTextNode(t):Ui.toDOM(t);i&&i.parentNode?o.insertBefore(c,i):o.insertBefore(c,null),n.card.reRenderAll(c,n)}}},{key:"deleteNode",value:function(e){var t=Yi(this.editArea[0],e),n=p()(t,1)[0];n&&!kt(n).isRoot()&&n.remove()}},{key:"insertInText",value:function(e,t,n){var r=Yi(this.editArea[0],e),a=p()(r,4),i=a[0],o=a[2];switch(a[3]){case 0:throw Error("Unsupported indexType JSONML.TAG_NAME_INDEX (0)");case 1:throw Error("Unsupported indexType JSONML.ATTRIBUTE_INDEX (1)");default:if(i&&!kt(i).isText())return;var c=i?i.nodeValue:"",l=c.substring(0,t)+n+c.substring(t);if(i&&i.parentNode===o)i.nodeValue=l;else{var s=document.createTextNode(l);o.insertBefore(s,o.firstChild)}}}},{key:"deleteInText",value:function(e,t,n){var r=Yi(this.editArea[0],e),a=p()(r,4),i=a[0],o=a[2];switch(a[3]){case 0:throw Error("Unsupported indexType JSONML.TAG_NAME_INDEX (0)");case 1:throw Error("Unsupported indexType JSONML.ATTRIBUTE_INDEX (1)");default:if(!kt(o=i).isText())return;var c=o.nodeValue,l=c.substring(0,t)+c.substring(t+n.length);o.nodeValue=l}}},{key:"applyOperation",value:function(e){var t,n,r=e.p;0!==r.length&&(("si"in e||"sd"in e)&&(t=r[r.length-1],r=r.slice(0,-1)),("oi"in e||"od"in e)&&(n=r[r.length-1],r=r.slice(0,-1)),"od"in e&&this.removeAttribute(r,n),"oi"in e&&this.setAttribute(r,n,e.oi),"sd"in e&&this.deleteInText(r,t,e.sd),"si"in e&&this.insertInText(r,t,e.si),"ld"in e&&this.deleteNode(r),"li"in e&&this.insertNode(r,e.li))}},{key:"applyRemoteOperations",value:function(e){var t=this;try{var n=this.getRangeLakePath();e.forEach((function(e){t.applyOperation(e)})),this.setRangeByLakePath(n),this.engine.change.change()}catch(e){console.log(e)}}},{key:"applySelfOperations",value:function(e){var t=this;e.forEach((function(e){t.applyOperation(e)})),this.engine.change.change()}},{key:"setRangeAfterOp",value:function(e){var t,n=e.p,r=this.editArea;("si"in e||"sd"in e)&&(t=n[n.length-1],n=n.slice(0,-1)),("oi"in e||"od"in e)&&(n=n.slice(0,-1));var a=Yi(r[0],n),i=p()(a,3),o=i[0],c=i[2],l=document.createRange();if("si"in e||"sd"in e){var s=""===o.data?c:o;return l.setStart(s,t+(e.si?e.si.length:0)),l.setEnd(s,t+(e.si?e.si.length:0)),void this.engine.change.select(l)}l.selectNodeContents(o||c.lastChild||c),Cn.shrinkRange(l),l.collapse(!1),this.engine.change.select(l)}},{key:"getRangeLakePath",value:function(){try{if(0===window.getSelection().rangeCount)return;var e=window.getSelection().getRangeAt(0);if(Cn.isInCard(e))return;return function(e){var t=e.startContainer,n=e.startOffset,r=e.endContainer,a=e.endOffset;return{start:Gi(t,n),end:Gi(r,a)}}(e)}catch(e){return console.log(e),null}}},{key:"setRangeByLakePath",value:function(e){var t,n,r,a,i;if(e)try{var o=window.getSelection(),c=o.getRangeAt(0).cloneRange(),l=(n=(t=e).start,r=t.end,a=Ki(n),i=Ki(r),{startContainer:a&&a.container,startOffset:a&&a.offset,endContainer:i&&i.container,endOffset:i&&i.offset});l.startContainer&&c.setStart(l.startContainer,l.startOffset),l.endContainer&&c.setEnd(l.endContainer,l.endOffset),o.removeAllRanges(),this.engine.change.select(c)}catch(e){console.log(e)}}},{key:"setRangeByPath",value:function(e){if(e){var t=p()(e,2),n=t[0],r=t[1];if(n&&r){var a=n[n.length-1],i=r[r.length-1],o=n.slice(),c=r.slice();o.pop(),c.pop();var l=Kt(this.engine.editArea[0],o),s=Kt(this.engine.editArea[0],c);try{var u=this.engine.change.getRange();u.setStart(l,a),u.setEnd(s,i),this.engine.change.select(u),Cn.scrollRangeIntoView(u)}catch(e){console.log(e)}}}}}]),e}(),$i=function(){function e(t){c()(this,e),this.engine=t,this.editArea=t.editArea}return s()(e,[{key:"getAll",value:function(){for(var e=[],t=this.editArea[0].attributes,n=0;n<t.length;n++){var r=t.item(n),a=r.nodeName,i=r.nodeValue;if(/^data-selection-/.test(a)&&i){var o=JSON.parse(decodeURIComponent(i));o&&e.push(o)}}return e}},{key:"setAll",value:function(e){var t=this.editArea,n={};e.forEach((function(e){if(e){var r="data-selection-".concat(e.uuid);n[r]=!0;var a=t.attr(r),i=encodeURIComponent(JSON.stringify(e));a!==i&&t.attr(r,i)}}));for(var r=t[0].attributes,a=0;a<r.length;a++){var i=r.item(a).nodeName;/^data-selection-/.test(i)&&!n[i]&&t.removeAttr(i)}}},{key:"remove",value:function(e){var t=this.editArea,n="data-selection-".concat(e);t.removeAttr(n)}},{key:"updateAll",value:function(e,t){var n=this.engine,r=n.card,a=n.change,i=a.getSelectionRange().cloneRange(),o=a.activeCard;if(o&&o.closest("body").length>0){var c=r.getCenter(o);c[0]&&c[0].nodeType&&i.selectNodeContents(c[0])}var l=$r.toPath(i);this.currentRangePath=l;var s=JSON.stringify(l),u=this.getAll(),d=!1,f=!1;return u=(u=u.map((function(n){return n?n.uuid===e.uuid?(d=!0,s===JSON.stringify(n.path)||(f=!0,n.path=l,n.active=!0),n):t.find((function(e){return e.uuid===n.uuid}))?(n.active=!1,n):(f=!0,null):(f=!0,null)}))).filter((function(e){return!!e})),d||(f=!0,u.push({path:l,uuid:e.uuid,active:!0})),f&&this.setAll(u),{data:u,range:i}}}]),e}();function Zi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zi(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ji=v()("engine:ot"),eo=function(){function e(t,n){var r=this;c()(this,e),this.engine=t,this.editArea=t.editArea,this.lang=t.lang,this.card=t.card,this.parentNode=n.parentNode,this.hideCursorInfoTimeoutIdMap={},this.updateBackgroundPosition=Q()((function(){r._updateBackgroundPosition()}),50)}return s()(e,[{key:"destroy",value:function(){var e=this.parentNode;e.children(".lake-user-background").remove(),e.children(".lake-user-cursor").remove(),e.children(".lake-card-mask").remove()}},{key:"getRelativeRect",value:function(e,t){var n=Cn.getClientRect(t),r=e[0].getBoundingClientRect();return{x:n.left-r.left,y:n.top-r.top,width:n.right-n.left,height:n.bottom-n.top}}},{key:"cacheRange",value:function(e){return{startOffset:e.startOffset,endOffset:e.endOffset,startContainer:e.startContainer,endContainer:e.endContainer,commonAncestorContainer:e.commonAncestorContainer}}},{key:"isRangeWrap",value:function(e){var t=e.cloneRange();t.collapse(!0);var n=Cn.getClientRect(t),r=e.cloneRange();r.collapse(!1);var a=Cn.getClientRect(r);return n.bottom!==a.bottom}},{key:"drawOneByOne",value:function(e,t,n,r){for(var a=this.cacheRange(n),i=a.startOffset;i<a.endOffset;){n.setStart(a.commonAncestorContainer,i),n.setEnd(a.commonAncestorContainer,i+1);var o=this.getRelativeRect(e,n);t.clearRect(o),t.draw("Rect",Qi(Qi({},o),r)),i++}n.setStart(a.startContainer,a.startOffset),n.setEnd(a.endContainer,a.endOffset)}},{key:"drawBackground",value:function(e,t){var n=this,r=this.parentNode,a=t.uuid,i=t.color,o=he()(i);o.setAlpha(.3);var c,l={fill:o.toRgbString()},s=r.children('.lake-user-background[data-uuid="'.concat(a,'"]'));s.length>0?(s.attr("data-color",i),(c=s[0].__targetCanvas).clear()):((s=kt('<div class="lake-user-background" data-uuid="'.concat(a,'" data-color="').concat(i,'" />'))).css({position:"absolute",top:0,left:0,"pointer-events":"none"}),r.append(s),c=new Jr({container:s[0]}),s[0].__targetCanvas=c),s[0].__targetRange=e;var u=r.width(),d=r.height();c.resize(u,d);var f=Cn.getSubRanges(e);return f.forEach((function(e){if(n.isRangeWrap(e))n.drawOneByOne(s,c,e,l);else{var t=n.getRelativeRect(s,e);c.clearRect(t),c.draw("Rect",Qi(Qi({},t),l))}})),f}},{key:"getNodeRect",value:function(e,t){if((e=kt(e)).isCard()&&"checkbox"===e.attr("data-lake-card")&&e.next()&&(e=e.next()),e.isElement()&&(t=e[0].getBoundingClientRect()),e.isText()){var n=document.createRange();n.selectNodeContents(e[0]),t=Cn.getClientRect(n)}return t}},{key:"getCursorRect",value:function(e){var t=this.parentNode[0].getBoundingClientRect();if(e.startContainer){var n=e;Cn.shrinkRange(n);var r=Cn.getClientRect(n),a=kt(n.startContainer);if(a.isElement()&&0===r.height){var i=a[0].childNodes[n.startOffset];(i||(i=a.first()))&&(r=this.getNodeRect(i,r))}var o=r.top-t.top,c=r.left-t.left-2,l=r.height;return{left:c+"px",top:o+"px",height:l>0?l+"px":-1}}var s=e,u=Ke.removeUnit(s.css("outline-width")),d=s[0].getBoundingClientRect(),f=d.top-t.top-1,p=d.left-t.left;return u&&(f-=u+1,p-=2),{left:p+"px",top:f+"px",height:0}}},{key:"setCursorRect",value:function(e,t){if(-1!==t.height){if(0===t.height)return e.css(t),void e.addClass("lake-user-cursor-card");e.css(t),e.removeClass("lake-user-cursor-card")}else e.remove()}},{key:"showCursorInfo",value:function(e,t){var n=t.uuid,r=t.color;this.hideCursorInfoTimeoutIdMap[n]&&window.clearTimeout(this.hideCursorInfoTimeoutIdMap[n]);var a=e.find(".lake-user-cursor-trigger"),i=e.css("background-color");e.attr("data-old-background-color",i),a.addClass("lake-user-cursor-trigger-active"),e.css("background-color",r),a.css("background-color",r)}},{key:"hideCursorInfo",value:function(e){var t=e.find(".lake-user-cursor-trigger"),n=e.attr("data-old-background-color");t.removeClass("lake-user-cursor-trigger-active"),e.css("background-color",n),t.css("background-color",n)}},{key:"drawCursor",value:function(e,t){var n=this,r=this.parentNode,a=t.uuid,i=t.name,o=t.color,c=Ke.escape,l=this.getCursorRect(e),s=r.children('.lake-user-cursor[data-uuid="'.concat(a,'"]'));if(s.length>0)this.setCursorRect(s,l);else{var u='\n      <div class="lake-user-cursor" data-uuid="'.concat(a,'">\n        <div class="lake-user-cursor-trigger">').concat(c(i),"</div>\n      </div>\n      "),d=(s=kt(u)).find(".lake-user-cursor-trigger");this.setCursorRect(s,l),s.on("mouseenter",(function(){return n.showCursorInfo(s,t)}));var f=!0;s.on("transitionstart",(function(){f=!1})),s.on("transitionend",(function(){f=!0})),s.on("mouseleave",(function(){f&&n.hideCursorInfo(s)})),s.css("background-color",o),d.css("background-color",o),this.parentNode.append(s)}if(s[0])return s[0].__target=e,this.showCursorInfo(s,t),this.hideCursorInfoTimeoutIdMap[a]&&window.clearTimeout(this.hideCursorInfoTimeoutIdMap[a]),this.hideCursorInfoTimeoutIdMap[a]=window.setTimeout((function(){n.hideCursorInfo(s)}),2e3),s}},{key:"drawCardMask",value:function(e,t,n){var r=this,a=this.lang,i=this.parentNode,o=n.uuid,c=i[0].getBoundingClientRect(),l=e[0].getBoundingClientRect(),s=i.children('.lake-card-mask[data-uuid="'.concat(o,'"]'));if(s.length>0)return s[0].__targetNode=e[0],void s.css({left:l.left-c.left+"px",top:l.top-c.top+"px"});(s=kt('<div class="lake-card-mask" data-uuid="'.concat(o,'" />')))[0].__targetNode=e[0],s.css({left:l.left-c.left+"px",top:l.top-c.top+"px",width:l.width+"px",height:l.height+"px"}),s.on("mouseenter",(function(){r.showCursorInfo(t,n),Ea.show(s,a.card.lockAlert,{placement:"bottomLeft"})})),s.on("mousemove",(function(e){var t=kt("div[data-lake-element=embed-tooltip]"),n=e.pageX-16,r=e.pageY+32;t.css({left:n+"px",top:r+"px"})})),s.on("mouseleave",(function(){r.hideCursorInfo(t),Ea.hide()})),s.on("click",(function(e){e.preventDefault(),e.stopPropagation()})),s.on("mousedown",(function(e){e.preventDefault(),e.stopPropagation()})),i.append(s)}},{key:"setCardSelectedByOther",value:function(e,t){var n=t.uuid,r=t.color;if(r){var a=he()(r);a.setAlpha(.3);var i,o=a.toRgbString();return e.selectByOther&&!e.state.selectedByOther&&(i=e.selectByOther(r,o)),e.state.selectedByOther=n,i}e.unselectByOther&&e.state.selectedByOther&&e.unselectByOther(),e.state.selectedByOther=!1}},{key:"setCardActivatedByOther",value:function(e,t){var n=t.uuid,r=t.color;if(r){var a=he()(r);a.setAlpha(.3);var i,o=a.toRgbString();return e.activateByOther&&!e.state.activatedByOther&&(i=e.activateByOther(r,o)),e.state.activatedByOther=n,i}e.unactivateByOther&&e.state.activatedByOther&&e.unactivateByOther(),e.state.activatedByOther=!1}},{key:"drawRange",value:function(e,t){var n,r=this.card,a=this.parentNode,i=t.uuid,o=kt(e.commonAncestorContainer),c=r.components;if(r.isCenter(o)){var l=r.closest(o),s=r.getComponent(l);if(!s)return;n={cardRoot:l,component:s}}for(var u=0;u<c.length;u++){var d=c[u];n&&d.node[0]===n.cardRoot[0]||(d.component.state.activatedByOther===i&&this.setCardActivatedByOther(d.component,!1),a.children('.lake-card-mask[data-uuid="'.concat(i,'"]')).remove())}if(n){var f=n,p=f.cardRoot,h=f.component,m=this.setCardActivatedByOther(h,t)||p,g=this.drawCursor(m,t);!h.constructor.canCollab&&g&&this.drawCardMask(m,g,t)}else{for(var v=0;v<c.length;v++){var y=c[v],b=y.component,k=r.getCenter(y.node)[0];k&&b&&(e.isPointInRange(k,0)?this.setCardSelectedByOther(b,t):b.state.selectedByOther===i&&this.setCardSelectedByOther(b,!1))}var w=r.getSingleSelectedCard(e);if(w){var x=r.getComponent(w);if(x){var _=this.setCardSelectedByOther(x,t)||w;this.drawCursor(_,t)}}else{Cn.shrinkRange(e);var C=this.drawBackground(e,t);e.collapsed||(C.forEach((function(t){t.collapsed||(e=t)})),Cn.shrinkRange(e),e.collapse(!1)),this.drawCursor(e,t)}}}},{key:"_updateBackgroundPosition",value:function(){var e=this;Ji("rangeColoring.updateBackgroundPosition"),this.parentNode.children(".lake-user-background").each((function(t){var n=kt(t),r=t.__targetRange,a=n.attr("data-uuid"),i=n.attr("data-color");e.drawBackground(r,{uuid:a,color:i})}))}},{key:"updateCursorPosition",value:function(){var e=this;Ji("rangeColoring.updateCursorPosition"),this.parentNode.children(".lake-user-cursor").each((function(t){var n=kt(t),r=t.__target;if(r.startContainer||0!==kt(r).closest("body").length){var a=e.getCursorRect(r);e.setCursorRect(n,a)}else n.remove()}))}},{key:"updateCardMaskPosition",value:function(){Ji("rangeColoring.updateCardMaskPosition");var e=this.parentNode,t=e[0].getBoundingClientRect();e.children(".lake-card-mask").each((function(e){var n=kt(e),r=e.__targetNode;if(0!==kt(r).closest("body").length){var a=r.getBoundingClientRect();n.css({left:a.left-t.left+"px",top:a.top-t.top+"px"})}else n.remove()}))}},{key:"updatePosition",value:function(){this.updateBackgroundPosition(),this.updateCursorPosition(),this.updateCardMaskPosition()}},{key:"updateBackgroundAlpha",value:function(e){var t=this.getCursorRect(e);this.parentNode.children(".lake-user-cursor").each((function(e){var n=kt(e),r=n.find(".lake-user-cursor-trigger"),a=n.css("left"),i=n.css("top"),o=he()(n.css("background-color"));t.left===a&&t.top===i?o.setAlpha(.3):o.setAlpha(1),n.css("background-color",o.toRgbString()),r.css("background-color",o.toRgbString())}))}},{key:"render",value:function(e,t,n){var r=this,a=this.editArea,i=this.parentNode,o=this.card,c={};e.forEach((function(e){var i=e.path,o=e.uuid,l=e.active,s=t.find((function(e){return e.uuid===o}));if(s&&(n||l))if(0!==i.length){var u=$r.fromPath(a,i);r.drawRange(u,s)}else c[o]=!0})),i.children("[data-uuid]").each((function(e){var n=(e=kt(e)).attr("data-uuid");if(!t.find((function(e){return e.uuid===n}))||c[n]){if(e.hasClass("lake-card-mask")){var a=kt(e[0].__targetNode),i=o.getComponent(a);i&&i.state.activatedByOther===n&&r.setCardActivatedByOther(i,!1)}e.remove()}}));for(var l=o.components,s=function(e){var n=l[e].component;if(n){var a=t.find((function(e){return e.uuid===n.state.selectedByOther}));a&&!c[a.uuid]||r.setCardSelectedByOther(n,!1)}},u=0;u<l.length;u++)s(u)}}]),e}();var to=function(e){ae()(n,Y.EventEmitter2);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=le()(e);if(t){var a=le()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return oe()(this,n)}}(n);function n(e,r){var a;return c()(this,n),(a=t.call(this)).engine=e,a.editArea=r,a.mode="lock",a.version=0,a.create(),a}return s()(n,[{key:"destroy",value:function(){delete this.data}},{key:"create",value:function(){this.data=Ui.fromDOM(this.editArea[0])}},{key:"apply",value:function(e){if(e.length)try{this.data=_.a.type.apply(this.data,e)}catch(e){console.log(e)}}},{key:"submitOp",value:function(e){this.apply(e)}}]),n}();var no=v()("engine:ot"),ro=["#597EF7","#73D13D","#FF4D4F","#9254DE","#36CFC9","#FFA940","#F759AB","#40A9FF"],ao=function(e){ae()(n,Y.EventEmitter2);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=le()(e);if(t){var a=le()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return oe()(this,n)}}(n);function n(e){var r;c()(this,n);var a=e.editArea,i=e.parentNode;return(r=t.call(this)).engine=e,r.editArea=a,r.members=[],r.currentMember={},r.selectionData=new $i(e),r.rangeColoring=new eo(e,{parentNode:i}),r.applier=new Xi(e),r.mutation=new Wi(a,{engine:e}),r.mutation.on("ops",(function(e){r.handleOps(e)})),r.updateRangeColoringPosition=Q()((function(){r.updateSelectionData(),r.rangeColoring.updatePosition()}),100),r.clientId=$r.randomString(),r.waitingOps=[],r.applyWaitingOps=Q()((function(){var e=$r.reduceOperations(r.waitingOps);if(e.length>0){r.waitingOps=[],r.applyAll(e),r.engine.history.collectRemoteOps(e);var t=r.selectionData.getAll();r.doRangeColoring(t)}}),0),e.on("select",(function(){r.updateSelectionData()})),r}return s()(n,[{key:"destroy",value:function(){this.doc&&this.doc.destroy(),this.stopMutation(),this.rangeColoring.destroy(),this.mutation=null}},{key:"initLockMode",value:function(){this.stopMutation();var e=this.engine,t=this.editArea;this.doc=new to(e,t),this.mutation.setDoc(this.doc),this.startMutation()}},{key:"init",value:function(e){var t=this,n=!this.doc||"lock"===this.doc.mode;this.stopMutation(),n||this.doc.destroy(),this.doc=e,this.mutation.setDoc(e),this.syncData(),e.on("op",(function(e,n){t.clientId!==n&&(t.waitingOps=t.waitingOps.concat(e),t.applyWaitingOps())})),this.initSelection(),this.startMutation(),n&&this.emit("load")}},{key:"handleOps",value:function(e){var t=this.doc;this.submitOps(e),this.engine.history.collectSelfOps(e),"lock"!==t.mode&&this.updateRangeColoringPosition()}},{key:"submitOps",value:function(e){this.doc.submitOp(e,{source:this.clientId})}},{key:"applyAll",value:function(e){this.stopMutation(),no("applyAll",JSON.stringify(e)),this.applier.applyRemoteOperations(e),this.startMutation()}},{key:"syncData",value:function(){var e=this.editArea,t=this.doc;if(Array.isArray(t.data)&&t.data.length>0&&"lock"!==t.mode)return no("syncData:setJsonValue",JSON.stringify(t.data)),void this.setData(t.data);no("doc.version=".concat(t.version));var n=Ui.fromDOM(e[0]);t.data?(no("syncData:submitOp",JSON.stringify(n)),t.submitOp([{p:[],oi:n}],{source:this.clientId})):(no("syncData:create",JSON.stringify(n)),t.create(n,"json0",{source:this.clientId}))}},{key:"setData",value:function(e){this.engine.setJsonValue(e)}},{key:"startMutation",value:function(){this.mutation&&(no("startMutation"),this.mutation.start())}},{key:"stopMutation",value:function(){this.mutation&&(no("stopMutation"),this.mutation.stop())}},{key:"setMemberIdToUuid",value:function(e){e.__uuid=e.uuid,e.uuid=String(e.id).toLowerCase()}},{key:"setMemberUuidToId",value:function(e){e.uuid=e.__uuid,delete e.__uuid}},{key:"setMemberColor",value:function(e){var t=((e.iid||1)-1)%ro.length;e.color=ro[t]}},{key:"getMembers",value:function(){var e=this,t=S()(this.members);return t.forEach((function(t){e.setMemberUuidToId(t)})),no("getMembers",t),t}},{key:"setMembers",value:function(e){var t=this;(e=S()(e)).forEach((function(e){t.setMemberIdToUuid(e),t.setMemberColor(e)})),this.members=e,no("setMembers",e)}},{key:"addMember",value:function(e){e=S()(e),this.setMemberIdToUuid(e),this.setMemberColor(e),this.members.find((function(t){return t.uuid===e.uuid}))||(this.members.push(e),no("addMember",e))}},{key:"removeMember",value:function(e){e=S()(e),this.setMemberIdToUuid(e),this.members=this.members.filter((function(t){return t.uuid!==e.uuid})),this.selectionData.remove(e.uuid);var t=this.selectionData.getAll();this.doRangeColoring(t),no("removeMember",e)}},{key:"setCurrentMember",value:function(e){e=S()(e),this.setMemberIdToUuid(e),this.setMemberColor(e),e=this.members.find((function(t){return t.uuid===e.uuid})),this.currentMember=e,no("setCurrentMember",e)}},{key:"doRangeColoring",value:function(e,t){var n=this.members,r=this.currentMember;e=e.filter((function(e){return e.uuid!==r.uuid})),this.rangeColoring.render(e,n,t),this.rangeColoring.updatePosition()}},{key:"updateSelectionData",value:function(){if(!this.engine.domEvent.isComposing){var e=this.selectionData.updateAll(this.currentMember,this.members).range;this.rangeColoring.updateBackgroundAlpha(e)}}},{key:"initSelection",value:function(){var e=this.selectionData.updateAll(this.currentMember,this.members).data;this.doRangeColoring(e,!0)}}]),n}(),io={dnd:{tips:"Drag to reposition"},copy:{tips:"Copy",success:"Copied successfully",error:"Copy error"},delete:{tips:"Delete"},copyAnchor:{tips:"Copy paragraph link"},link:{linkPlaceholder:"Please enter a link or anchor and press Enter to confirm",linkSave:"Apply",linkEdit:"Change",linkDelete:"Remove link",linkOpen:"Open link",linkText:"link"},copyContent:{tips:"Copy content"},maximize:{tips:"Maximize",back:"Back to document"},expand:{tips:"Embedded preview"},collapse:{tips:"Compact display"},card:{lockAlert:"Please wait for the other user to finish editing"},preferences:{tips:"Preferences"},download:{tips:"Download"},copyCardLink:{tips:"Copy card link"},preview:{tips:"Preview"},gotoLink:{tips:"Open in new tab"},docTitle:{tips:"Title"},docCard:{tips:"Card"},docEmbed:{tips:"Embed"},more:{tips:"More"},heightMode:{default:"Default Height",adaptive:"Adaptive Height"},blockFallback:{mainTip:"Card cannot be displayed",subTip:'Please visit <a href="%s" target="_blank">Yuque</a> to see the effect'},inlineFallback:{tip:"Card cannot be displayed",tooltip:'Please visit <a href="%s" target="_blank">Yuque</a> to see the effect'}},oo={dnd:{tips:"拖动调整位置"},copy:{tips:"复制",success:"复制成功",error:"复制失败"},delete:{tips:"删除"},copyAnchor:{tips:"复制段落链接"},link:{linkPlaceholder:"请输入链接或锚点，回车确认",linkSave:"保存",linkEdit:"编辑",linkDelete:"取消链接",linkOpen:"打开链接",linkText:"链接"},copyContent:{tips:"复制内容"},maximize:{tips:"最大化",back:"返回文档"},expand:{tips:"嵌入预览"},collapse:{tips:"紧凑展示"},card:{lockAlert:"请等待对方编辑完毕后，再进入编辑"},preferences:{tips:"设置"},download:{tips:"下载"},copyCardLink:{tips:"复制卡片链接"},preview:{tips:"预览"},gotoLink:{tips:"在新标签页中打开"},docTitle:{tips:"标题"},docCard:{tips:"卡片"},docEmbed:{tips:"嵌入"},more:{tips:"更多"},heightMode:{default:"默认高度",adaptive:"自适应高度"},blockFallback:{mainTip:"该卡片在客户端暂时无法显示",subTip:'客户端暂未支持该类型卡片，可打开 <a href="%s" target="_blank">语雀网页版</a> 查看'},inlineFallback:{tip:"该卡片在客户端暂时无法显示",tooltip:'客户端暂未支持该类型卡片，可打开 <a href="%s" target="_blank">语雀网页版</a> 查看'}},co=function(){function e(t){c()(this,e),m()(this,"__engine",null),m()(this,"__providers",{}),this.__engine=t}return s()(e,[{key:"getMeta",value:function(e,t){return this.__verifyProvider(e),this.__providers[e].getMeta(t)}},{key:"hasMeta",value:function(e,t){return this.__verifyProvider(e),this.__providers[e].hasMeta(t)}},{key:"getRawMeta",value:function(e){return this.__verifyProvider(e),this.__providers[e].getRawMeta()}},{key:"setMeta",value:function(e,t){this.__verifyProvider(e),this.__providers[e].setRawMeta(t)}},{key:"registerProvider",value:function(e,t){this.__providers[e]=t}},{key:"__verifyProvider",value:function(e){if(!this.__providers[e])throw new Error('named "'.concat(e,'" meta provider is not found'))}}]),e}(),lo=function e(){var t=this;c()(this,e),m()(this,"cache",{}),m()(this,"get",(function(e){return t.cache[e]})),m()(this,"set",(function(e,n){t.cache[e]=n}))},so={en:io,"zh-cn":oo},uo=new Ya,fo=new Ka;function po(){var e,t,n,r,a=kt("<p />"),i=this.change.getRange(),o=sn(i);o&&(e=kt(o.anchor).next(),t=kt(o.focus).prev(),n=kt(o.anchor).parent(),r=kt(o.focus).parent()),e&&o.anchor.remove(),t&&o.focus.remove(),this.editArea.children().each((function(e){(e=kt(e)).isBlock()?a.children().length>0&&(e.before(a),a=kt("<p />")):a.append(e)})),a.children().length>0&&this.editArea.append(a),e&&e.before(o.anchor),t&&t.after(o.focus),!o||e||t||(n.isRoot()&&a.append(o.anchor),r.isRoot()&&a.append(o.focus),a.children().length>0&&this.editArea.append(a)),this.editArea.children().each((function(e){if(e=kt(e),$t.removeMinusStyle(e,"text-indent"),e.isHeading()){var t=e.children().length;if(0!==t){var n=e.first();1===t&&"span"===n.name&&function(e){return[ye,ge,ve].indexOf(e.attr(me))>=0}(n)&&e.prepend("<br />")}else e.remove()}})),un(i,o)}function ho(){var e=this.editArea,t=this.options;e.attr(at,"root"),e.attr({contenteditable:"true",role:"textbox",autocorrect:"en"===this.options.lang?"on":"off",autocomplete:"off",spellcheck:"en"===this.options.lang?"true":"false","data-gramm":"false"}),e.hasClass("lake-engine")||e.addClass("lake-engine"),void 0!==t.tabIndex&&e.attr("tabindex",t.tabIndex),void 0!==t.className&&e.addClass(t.className)}function mo(){var e=this.editArea,t=this.options;e.removeAttr(at),e.removeAttr("contenteditable"),e.removeAttr("role"),e.removeAttr("autocorrect"),e.removeAttr("autocomplete"),e.removeAttr("spellcheck"),e.removeAttr("data-gramm"),e.removeAttr("tabindex"),e.removeClass(t.className),this.card.closest(e)&&e.removeClass("lake-engine")}function go(){fo.execute(this,"initialize"),fo.execute(this,"bothInit")}function vo(){var e=this,t=this.options.meta;t&&Object.keys(t).forEach((function(n){e.metaManager.setMeta(n,t[n])}))}function yo(e){if(kt(e.target).isRoot()){var t=this.editArea.last();if(t){if(!t.isCard()&&"blockquote"!==t.name)return;if(t[0].offsetTop+t[0].clientHeight>e.offsetY)return}var n=kt("<p><br /></p>");this.editArea.append(n);var r=this.change.getRange();r.selectNodeContents(n[0]),r.collapse(!1),this.change.select(r)}}function bo(){var e=this;this.editArea.on("input",(function(t){if(!e.isReadonly&&!e.card.closest(t.target)){var n=e.change.getRange();sr.addOrRemoveBr(n,"left"),e.setUserChanged()}})),this.editArea.on("click",(function(t){return yo.call(e,t)})),this.editArea.on("keydown",(function(t){return Bi.call(e,t)})),this.editArea.on("keyup",(function(t){return Vi.call(e,t)})),this.editArea.on("focus",(function(){e._isFocused=!0,e.change.clearBackupRange(),e.parentEngine&&e.parentEngine.change.clearBackupRange(),e.event.trigger("focus")})),this.editArea.on("blur",(function(){e._isFocused=!1,e.change._backupRange=e.change.getRange().cloneRange(),e.event.trigger("blur")}))}var ko=function(){function e(t,n){var r=this;c()(this,e),m()(this,"_forceRendering",!1),m()(this,"toolbar",{set:function(){},updateState:function(){},restore:function(){},disable:function(){}}),m()(this,"sidebar",{set:function(){},close:function(){},restore:function(){}}),this.id="engine-".concat(Pe()),this.editArea=kt(t),this.options=n||{enableDeferredRendering:!1},this.globalData=new lo,ho.call(this),this.parentNode=kt(this.options.parentNode||document.body),this.parentEngine=this.options.parentEngine,this.scrollNode=this.options.scrollNode,this.lang=so[this.currentLanguage()],this._userChanged=!1,this.deferredRendering=!1,this.schema=new ta,this.schema.add(ja),this.conversion=new Na,this.metaManager=new co(this),this.change=new fi(this.editArea,{engine:this,schema:this.schema,conversion:this.conversion,card:uo,onChange:function(e){return r.event.trigger("change",e)},onSelect:function(){return r.event.trigger("select")},onSetValue:function(){return r.event.trigger("setvalue")}}),this.doc=this.change.doc,this.history=this.change.history,this.domEvent=this.change.domEvent,this.event=new ot(this),this.asyncEvent=new Y.EventEmitter2({wildcard:!0,delimiter:":",newListener:!1,maxListeners:100}),this.command=new La(this.change),this.hotkey=new hi(this.command),this.card=uo,this.ot=new ao(this),this.isReadonly=!1,this.isDestroyed=!1,this._isFocused=document.activeElement===this.editArea[0],this.setTypography("classic"===this.options.typography),this.typography=this.options.typography||"traditional",go.call(this),bo.call(this),vo.call(this),this.initCut();var a=location.search||"";this._forceRendering=-1!==a.indexOf("forceRendering")||-1!==a.indexOf("export_type")}return s()(e,[{key:"currentLanguage",value:function(){return this.options.lang||"zh-cn"}},{key:"setMeta",value:function(e,t){return this.metaManager.setMeta(e,t),this}},{key:"getMeta",value:function(e,t){return this.metaManager.getMeta(e,t)}},{key:"hasMeta",value:function(e,t){return this.metaManager.hasMeta(e,t)}},{key:"hasUserChanged",value:function(){return this._userChanged}},{key:"resetUserChange",value:function(){this._userChanged=!1}},{key:"setUserChanged",value:function(){this._userChanged=!0,this.event.trigger("userchanged")}},{key:"getHtml",value:function(e){return wo(this.editArea[0].cloneNode(!0),e)}},{key:"getHtmlWithStopNode",value:function(e,t){return wo(function e(t,n){if(!n||t===n)return t.cloneNode(!0);for(var r=t.cloneNode(!1),a=n;a&&a.parentNode!==t;)a=a.parentNode;if(!a)return r;for(var i=a.previousSibling;i;)r.insertBefore(i.cloneNode(!0),r.firstChild),i=i.previousSibling;var o=e(a,n);return o&&r.appendChild(o),r}(this.editArea[0],t),e)}},{key:"setTypography",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e?"classic":"traditional",n=this.typography;this.typography=t,e?(this.editArea.addClass("lake-typography-classic"),this.editArea.removeClass("lake-typography-traditional")):(this.editArea.addClass("lake-typography-traditional"),this.editArea.removeClass("lake-typography-classic")),this.typography!==n&&(this.event.trigger("typographychange",this.typography,n),this.event.trigger("select"))}},{key:"getTypography",value:function(){return this.typography}},{key:"initCut",value:function(){var e=this;this.editArea.on("cut",(function(t){t.stopPropagation(),Dr(t,void 0,(function(){(function(){var e,t=window.getSelection().getRangeAt(0),n=kt(t.commonAncestorContainer);qn(t),e=-1!==["ul","ol"].indexOf(n.name)?n:n.find("ul,ol");for(var a=0;a<e.length;a++){var i=kt(e[a]);i.find("li").each((function(e){(""===e.innerText||r.ua.safari&&"\n"===e.innerText)&&e.parentNode.removeChild(e)})),0===i.children().length&&i.remove()}if(n[0].isConnected){var o=n.closest("li.lake-list-task");o.length&&function(e){for(var t=(e=kt(e)[0]).childNodes.length-1;t>=0;t--){var n=e.childNodes[t];if(n.nodeType!==Node.TEXT_NODE||""!==n.textContent)break;e.removeChild(n)}if(1===e.childNodes.length){var r=kt(e.firstChild);r.isCard()&&"checkbox"===r.attr(xe)&&r.after("<br/>")}}(o)}})(),e.change.change()}))}))}},{key:"getGlobalData",value:function(e){return this.globalData.get(e)}},{key:"setGlobalData",value:function(e,t){return this.globalData.set(e,t)}},{key:"destroy",value:function(){this.event.trigger("beforedestory"),mo.call(this),this.editArea.removeAllEvents(),this.domEvent.destroy(),this.hotkey.destroy(),this.card.gc(),this.ot&&this.ot.destroy(),this.change.clearChangeTimer(),this.isDestroyed=!0}},{key:"isSub",value:function(){return this.editArea.closest(Oe).length>0}},{key:"readonly",value:function(e){this.isReadonly!==e&&(e?(this.hotkey.disable(),this.editArea.attr("contenteditable","false")):(this.hotkey.enable(),this.editArea.attr("contenteditable","true")),this.event.trigger("readonly",e),this.isReadonly=e,Qt.log("engine.readonly(".concat(e,")")))}},{key:"isDeferredRendering",value:function(){return this.options.enableDeferredRendering&&this.deferredRendering&&!this._forceRendering}},{key:"startDeferredRendering",value:function(){this.deferredRendering=!0}},{key:"stopDeferredRendering",value:function(){this.deferredRendering=!1}},{key:"on",value:function(e,t,n){return this.event.on(e,t,n),this}},{key:"off",value:function(e,t){return this.event.off(e,t),this}},{key:"setValue",value:function(e,t){return this.readonly(!1),this.startDeferredRendering(),this.event.trigger("beforesetvalue"),this.change.setValue(e,t),po.call(this),this.stopDeferredRendering(),this.card.renderController.run(this),this}},{key:"setJsonValue",value:function(e){for(var t=kt(Ui.toDOM(e)),n=t[0].attributes,r=0;r<n.length;r++){var a=n.item(r),i=a.nodeName,o=a.nodeValue;/^data-selection-/.test(i)&&"null"!==o&&this.editArea.attr(i,o)}var c=t.html();this.change.setValue(c);var l=this.change.getRange();return ln(l),this.change.select(l),po.call(this),this}},{key:"setDefaultValue",value:function(e){this.setValue(e)}},{key:"openLinkByNode",value:function(e){(e=kt(e)[0])&&"A"===e.nodeName&&e.hasAttribute("href")&&this.openLink(e.href,e.getAttribute("href"),e.hasAttribute("target"))}},{key:"openLink",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];"boolean"==typeof t?(n=t,t=e):t||(t=e),n?window.open(e):location.href=e}},{key:"getValue",value:function(){return this.change.getValue()}},{key:"getPureValue",value:function(){return Ue(this.change.getValue())}},{key:"isFocus",value:function(){return this._isFocused}},{key:"generateElementID",value:function(e){return lt(this.editArea[0],e)}},{key:"focus",value:function(){return this.change.focus()}},{key:"focusToStart",value:function(){return this.change.focusToStart()}},{key:"focusToEnd",value:function(){return this.change.focusToEnd()}},{key:"blur",value:function(){return this.change.blur()}},{key:"messageSuccess",value:function(e){console.log("messageSuccess: ",e)}},{key:"messageError",value:function(e){console.error("messageError: ",e)}},{key:"reset",value:function(e){var t=this;e&&this.setDefaultValue(e),this.history.reset(),this.resetUserChange(),setTimeout((function(){t.focusToStart()}),64)}}]),e}();function wo(e,t){if(!t)throw"Need to pass in a parser";return e.removeAttribute("contenteditable"),e.removeAttribute("tabindex"),e.removeAttribute("autocorrect"),e.removeAttribute("autocomplete"),e.removeAttribute("spellcheck"),e.removeAttribute("data-gramm"),e.removeAttribute("role"),t.parse(e).html}ko.create=function(e,t){return new ko(e,t)},ko.card=uo,ko.plugin=fo;var xo=function(){function e(t){c()(this,e),m()(this,"_pendingCount",0),m()(this,"_eventEmitter",null),m()(this,"_waiting",new Set),this._eventEmitter=t}return s()(e,[{key:"isReady",value:function(){return 0===this._pendingCount}},{key:"waitReady",value:function(){var e=this,t=new Promise((function(n){0===e._pendingCount?n():e._waiting.add({promise:t,resolve:n})}));return t}},{key:"add",value:function(){var e=this,t=!1;return this._pendingCount++,function(){t||(t=!0,e._pendingCount--,e._check())}}},{key:"_check",value:function(){0===this._pendingCount&&(this._waiting.forEach((function(e){(0,e.resolve)()})),this._waiting.clear())}}]),e}(),_o={en:io,"zh-cn":oo};function Co(){var e=this,t=this.options.meta;t&&Object.keys(t).forEach((function(n){e.metaManager.setMeta(n,t[n])}))}var Eo=function(){function e(t,n){c()(this,e),m()(this,"_allowDeferredRendering",!1),m()(this,"readyStateManager",null),console.time("contentView"),this.id="contentView-".concat(Pe()),this.editArea=t,this.options=n||{},this.lang=_o[this.options.lang||"zh-cn"],this.card=this.options.card,this.getScrollNode=this.options.getScrollNode,this.metaManager=new co(this),this.plugin=this.options.plugin,this.schema=new ta,this.schema.add(ja),this.conversion=new Na,this.event=new ot(this),this.isReadonly=!0,this.globalData=new lo,this.readyStateManager=new xo,this.setTypography("classic"===this.options.typography),this.typography=this.options.typography||"traditional",this.plugin.execute(this,"bothInit"),Co.call(this);var r=location.search||"",a=-1!==r.indexOf("forceRendering")||-1!==r.indexOf("export_type");this._allowDeferredRendering=this.getScrollNode&&this.options.enableDeferredRendering&&!a&&!function(){try{return"doc_embed"===new URL(location.href).searchParams.get("view")}catch(e){return!0}}(),console.timeEnd("contentView")}return s()(e,[{key:"isDeferredRendering",value:function(){return this._allowDeferredRendering}},{key:"isReady",value:function(){return this.readyStateManager.isReady()}},{key:"waitReady",value:function(){return this.readyStateManager.waitReady()}},{key:"setMeta",value:function(e,t){return this.metaManager.setMeta(e,t),this}},{key:"getMeta",value:function(e,t){return this.metaManager.getMeta(e,t)}},{key:"hasMeta",value:function(e,t){return this.metaManager.hasMeta(e,t)}},{key:"on",value:function(e,t,n){return this.event.on(e,t,n),this}},{key:"off",value:function(e,t){return this.event.off(e,t),this}},{key:"setTypography",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e?"classic":"traditional",n=this.typography;this.typography=t,e?(this.editArea.addClass("lake-typography-classic"),this.editArea.removeClass("lake-typography-traditional")):(this.editArea.addClass("lake-typography-traditional"),this.editArea.removeClass("lake-typography-classic")),this.typography!==n&&this.event.trigger("typographychange",this.typography,n)}},{key:"getTypography",value:function(){return this.typography}},{key:"openLinkByNode",value:function(e){(e=kt(e)[0])&&"A"===e.nodeName&&e.hasAttribute("href")&&this.openLink(e.href,e.getAttribute("href"),e.hasAttribute("target"))}},{key:"openLink",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];"boolean"==typeof t?(n=t,t=e):t||(t=e),n?window.open(e):location.href=e}},{key:"generateElementID",value:function(e){return lt(this.editArea[0],e)}},{key:"findElementById",value:function(e){return function(e,t){if(t.nodeType!==Node.ELEMENT_NODE)return null;var n=t.querySelector("[".concat("data-lake-id",'="').concat(e,'"]'));if(n)return n;if(-1===e.indexOf("_"))return null;var r=e.split("_"),a=p()(r,3),i=a[1],o=a[2];if(!i||!o)return console.warn("invalid element id"),null;var c=t.querySelectorAll(i),l=c.length;if(0===l)return null;if(c[o].getAttribute("data-lake-id")===e)return c[o];var s=o,u=-1;do{var d=c[s];if(d){if(d.hasAttribute("data-lake-id")){if(d.getAttribute("data-lake-id")===e)return d}else if(pt(d,s)===e)return d;s+=u,u=u>0?-(u+1):-u,(s<0||s>=l)&&(s+=u,u=u>0?-(u+1):-u)}}while(s>=0&&s<l);return null}(e,this.editArea[0])}},{key:"getGlobalData",value:function(e){return this.globalData.get(e)}},{key:"setGlobalData",value:function(e,t){return this.globalData.set(e,t)}}]),e}(),Oo={create:function(e,t){return new Eo(e,t)}},So=function(){function e(t){var n=this;c()(this,e),m()(this,"hasFocus",!1),m()(this,"onClick",(function(e){if(n.card){var t=e.hasClass("lake-checkbox-checked");t?(e.removeClass("lake-checkbox-checked"),n.cardRoot.find(".lake-checkbox-input").removeAttr("checked")):(e.addClass("lake-checkbox-checked"),n.cardRoot.find(".lake-checkbox-input").attr("checked","checked")),n.value=!t,n.card.setValue(n.cardRoot,n.value),n.setListChecked(n.value)}})),t&&(this.engine=t,this.card=t.card)}return s()(e,[{key:"setListChecked",value:function(e){var t=En(this.cardRoot);t.hasClass("lake-list-task")&&t.attr("data-lake-checked",!!e)}},{key:"render",value:function(e,t){var n=this,r=kt('\n    <span class="lake-checkbox">\n      <input type="checkbox" class="lake-checkbox-input" value="">\n      <span class="lake-checkbox-inner"></span>\n    </span>\n    ');t&&(r.addClass("lake-checkbox-checked"),r.find(".lake-checkbox-input").attr("checked","checked")),e.append(r),this.setListChecked(t),this.engine&&r.on("click",(function(){return n.onClick(r)}))}}]),e}();m()(So,"type","inline"),m()(So,"singleSelectable",!1),m()(So,"canCollab",!0);var Ro=function(){function e(t){c()(this,e),t&&(this.engine=t,this.card=t.card)}return s()(e,[{key:"embedToolbar",value:function(){return[{type:"dnd"},{type:"copy"},{type:"separator"},{type:"delete"}]}},{key:"select",value:function(){this.cardRoot.find('[data-card-element="center"]').addClass("lake-hr-select")}},{key:"unselect",value:function(){this.cardRoot.find('[data-card-element="center"]').removeClass("lake-hr-select")}},{key:"activate",value:function(){this.cardRoot.find('[data-card-element="center"]').addClass("lake-hr-active")}},{key:"unactivate",value:function(){this.cardRoot.find('[data-card-element="center"]').removeClass("lake-hr-active")}},{key:"selectByOther",value:function(e,t){var n=this.cardRoot.find('[data-card-element="center"]');n.css("background-color",t),n.find("hr").css("background-color",t)}},{key:"unselectByOther",value:function(){var e=this.cardRoot.find('[data-card-element="center"]');e.css("background-color",""),e.find("hr").css("background-color","")}},{key:"activateByOther",value:function(e,t){this.selectByOther(e,t)}},{key:"unactivateByOther",value:function(){this.unselectByOther()}},{key:"render",value:function(e){e.append("<hr />")}}]),e}();m()(Ro,"type","block"),m()(Ro,"autoActivate",!1);var Do=function(){function e(){var t=this;c()(this,e),m()(this,"_onClick",(function(e){e.stopPropagation();var n=e.target;n.nodeName===Node.TEXT_NODE&&(n=n.parentNode),"A"===n.nodeName&&(e.preventDefault(),(t.engine||t.contentView).openLinkByNode(n))}))}return s()(e,[{key:"embedToolbar",value:function(){return[{type:"delete"}]}},{key:"didInsert",value:function(){this.container.on("click",this._onClick,!1)}},{key:"destroy",value:function(){this.container.off("click",this._onClick,!1)}},{key:"render",value:function(e){var t="zh-cn"===((this.engine||this.contentView).options.lang||"zh-cn")?oo:io;e.empty(),e.append(function(e){var t=K()(window,"appData.isYuque")?"https://www.yuque.com/":"https://yuque.antfin-inc.com/",n=e.blockFallback.subTip.replace("%s",encodeURI(t));return'\n    <div class="lake-block-fallback">\n      <div class="inner-content">\n        <img src="https://gw.alipayobjects.com/zos/bmw-prod/dc01c10b-e433-4bb3-bf7e-8b679725b823.svg" class="lake-block-fallback-crown-icon">\n        <div class="inner-tips">\n          <div class="main-tip">'.concat(Le(e.blockFallback.mainTip),'</div>\n          <div class="sub-tip">').concat(n,"</div>\n        </div>\n      </div>\n    </div>\n  ")}(t))}}]),e}();m()(Do,"type","block"),m()(Do,"autoActivate",!1);var Ao=function(){function e(){var t=this;c()(this,e),m()(this,"$rootNode",null),m()(this,"_onMouseDown",(function(e){e.preventDefault()})),m()(this,"_onMouseEnter",(function(){t.$rootNode&&t.$rootNode.addClass("show")})),m()(this,"_onMouseLeave",(function(){t.$rootNode&&t.$rootNode.removeClass("show")})),m()(this,"_onClick",(function(e){e.stopPropagation();var n=e.target;n.nodeName===Node.TEXT_NODE&&(n=n.parentNode),"A"===n.nodeName&&(e.preventDefault(),t.$rootNode&&t.$rootNode.removeClass("show"),(t.engine||t.contentView).openLinkByNode(n))}))}return s()(e,[{key:"destroy",value:function(){this._unbindEvent()}},{key:"_bindEvent",value:function(){this.$rootNode&&(this.$rootNode.on("mousedown",this._onMouseDown,!1),this.$rootNode.on("mouseenter",this._onMouseEnter,!1),this.$rootNode.on("mouseleave",this._onMouseLeave,!1),this.$rootNode.on("click",this._onClick,!1))}},{key:"_unbindEvent",value:function(){this.$rootNode&&(this.$rootNode.off("mousedown",this._onMouseDown,!1),this.$rootNode.off("mouseenter",this._onMouseEnter,!1),this.$rootNode.off("mouseleave",this._onMouseLeave,!1),this.$rootNode.off("click",this._onClick,!1))}},{key:"render",value:function(e){var t="zh-cn"===((this.engine||this.contentView).options.lang||"zh-cn")?oo:io;this._unbindEvent(),e.empty(),this.$rootNode=kt(function(e){var t=K()(window,"appData.isYuque")?"https://www.yuque.com/":"https://yuque.antfin-inc.com/",n=e.inlineFallback.tooltip.replace("%s",encodeURI(t));return'\n    <div class="lake-inline-fallback">\n      <img src="https://gw.alipayobjects.com/zos/bmw-prod/1a587ec9-10ac-4204-96f4-f259c5f6c2c7.svg" class="lake-inline-fallback-icon">\n      <div class="inner-tips">'.concat(Le(e.inlineFallback.tip),'</div>\n\n      <div class="fallback-tooltip ant-tooltip ant-tooltip-placement-bottomLeft">\n        <div class="ant-tooltip-content">\n          <div class="ant-tooltip-arrow"></div>\n          <div class="ant-tooltip-inner" role="tooltip">\n            <span>').concat(n,"</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  ")}(t)),e.append(this.$rootNode),this._bindEvent()}}]),e}();m()(Ao,"type","inline");var To=/(?:[\u0100-\uffff\s]|^)https?:\/\/(?:[^\/.]+?\.)+?[^\/.]+?(?:\/\S*?)?(?:(?=[\u0100-\uffff\s])|$)/g;function Po(){var e=[{color:he()(this.editArea.css("color")).toHex()},{"background-color":he()("white").toHex()},{"font-size":this.editArea.css("font-size")}],t=this.editArea.closest(Oe);if(t.length>0){var n=t.closest(it);e.push({color:he()(n.css("color")).toHex()}),e.push({"background-color":he()(n.css("background-color")).toHex()})}return e}function jo(e){var t=this,n=Po.call(this),r=$t.fetchAllChildren(e);r.forEach((function(e){(e=kt(e)).isCard()||(e.isElement()&&n.forEach((function(t){var n=Object.keys(t)[0],r=t[n],a=e[0].style[n];a&&(/color$/.test(n)&&(a=he()(a).toHex()),a===r&&e.css(n,""))})),$t.removeMinusStyle(e,"text-indent"),"span"===e.name&&"table"===t.domEvent.copySource&&e.css("background-color",""),["ol","ul"].includes(e.name)&&e.css("padding-left",""),e.isElement()&&(e.attr("style")||e.removeAttr("style")),"span"===e.name&&0===Object.keys(e.attr()).length&&0===Object.keys(e.css()).length&&(""===e.text().trim()||e.first()&&(e.first().isMark()||e.first().isBlock()))?sr.unwrapNode(e):e.isBlock()&&sr.brToParagraph(e))})),(r=$t.fetchAllChildren(e)).forEach((function(e){if((e=kt(e)).parent())if(/^docs-internal-guid-/.test(e.attr("id")))sr.unwrapNode(e);else if(!e.attr(_e))if(!e.isBlock()||"p"===e.attr("data-type")||e.isVoid()||e.isSolid()||""!==e.html()){if("p"===e.attr("data-type")&&e.removeAttr("data-type"),"li"===e.name&&["ol","ul"].indexOf(e.parent().name)<0){var t=kt("<ul />");return e.before(t),void t.append(e)}if(["ol","ul"].indexOf(e.name)>=0&&["ol","ul"].indexOf(e.parent().name)>=0){var n=kt("<li />");return e.before(n),void n.append(e)}if(["ol","ul"].indexOf(e.name)>=0&&"li"===e.parent().name&&(e.prev()||e.next())){var r,a=e.parent(),i=a.parent().hasClass("lake-list");return a.children().each((function(e){if(e=kt(e),!$t.isEmptyNodeWithTrim(e)){var t=["ol","ul"].indexOf(e.name)>=0;r&&!t||(r=kt(i?'<li class="lake-list-node lake-list-task" />':"<li />"),a.before(r)),r.append(e),t&&(r=null)}})),void a.remove()}if(!("p"===e.name&&["ol","ul"].indexOf(e.parent().name)>=0))return e.isBlock()&&!e.isVoid()&&""===e.html().trim()&&(e.isHeading()||"li"===e.name)&&e.html("<br />"),e.isHeading()&&"li"===e.parent().name?(1===e.children().length&&"br"===e.first().name||e.after("<br />"),void sr.unwrapNode(e)):void 0;sr.setNode(e,"<li />")}else e.remove()}))}function Mo(e){$t.fetchAllChildren(e).forEach((function(e){(e=kt(e)).isElement()&&sr.unwrapNode(e)}))}function No(e){var t=this;jo.call(this,e);var n=this.change.getRange(),r=kt(n.commonAncestorContainer);if(r.closest("code").length>0)Mo.call(this,e);else{if(r.isText()&&n.startContainer===n.endContainer){var a=r[0].nodeValue,i=a.substr(0,n.startOffset),o=a.substr(n.endOffset);if(/\[.*?\]\($/.test(i)&&/^\)/.test(o))return void Mo.call(this,e)}var c=$t.fetchAllChildren(e);c.forEach((function(e){e=kt(e),t.event.trigger("paste:each",e)})),(c=$t.fetchAllChildren(e)).forEach((function(e){"pre"===(e=kt(e)).name&&e.find(Se).length>0&&sr.unwrapNode(e)})),$t.normalize(e),e.normalize&&e.normalize(),(c=$t.fetchAllChildren(e)).forEach((function(e){e=kt(e),["ol","ul"].includes(e.name)&&sr.addListStartNumber(e),function(e){var t=e[0].nodeValue;if(e.isText()&&t.length>0&&" "===t.charAt(0)&&e.prev()&&(e.prev().isMark()||e.prev().isInline())){if(1===t.length)e[0].nodeValue=" ";else if(" "!==t.charAt(1)){var n=e[0].splitText(1);n.previousSibling.nodeValue=" ",e=kt(n)}t=e[0].nodeValue}e.isText()&&t.length>0&&" "===t.charAt(t.length-1)&&e.next()&&(e.next().isMark()||e.next().isInline())&&(1===t.length?e[0].nodeValue=" ":" "!==t.charAt(t.length-2)&&(e[0].splitText(t.length-1).nodeValue=" "))}(e),function(e){if(e.nodeType===Node.TEXT_NODE&&!function(e){for(;e;){if("A"===e.nodeName)return!0;e=e.parentNode}return!1}(e)){var t=e.data,n=[],r=/\s/;if(t.toLowerCase().replace(To,(function(e,t){"h"!==e[0]&&(e=e.substring(1),t+=1),r.test(e[e.length-1])&&(e=e.substring(0,e.length-1)),n.push({offset:t,length:e.length})})),n.length){var a=[],i=0;n.forEach((function(e){var n=e.offset,r=e.length,o=t.substring(i,n);o&&a.push(document.createTextNode(o));var c=document.createElement("a"),l=t.substring(n,n+r);c.href=encodeURI(l),c.target="_blank",c.innerText=l,a.push(c),i=n+l.length}));var o=t.substring(i);o&&a.push(document.createTextNode(o));var c=e.parentNode;a.forEach((function(t){c.insertBefore(t,e)})),c.removeChild(e)}}}(e[0])}))}}function Lo(e){if(e.files.length>0)this.event.trigger("paste:files",e.files);else{var t="";if(e.isPasteText){var n="";e.text?n=e.text:e.html&&(n=new er(e.html).toText()),t=new na(n).toHTML()}else{var r=e.text;e.html&&-1!==e.html.indexOf('<meta name="source" content="lake"/>')?t=e.html:r&&/^https?:\/\/\S+$/.test(r)?(r=Ke.escape(r),t='<a href="'.concat(r,'" target="_blank">').concat(r,"</a>")):e.html?t=e.html:r&&(t=new na(r).toHTML())}var a=this.change.getValue();this.event.trigger("paste:string",e,a),this.command.execute("paste",t)}}var Io={initialize:function(){var e=this;this.command.add("paste",{sideEffect:!0,execute:function(t){var n=e.schema.clone(),r=e.conversion.clone();n.add(["pre",{span:{"data-type":"*",style:{"font-size":"@length"}}},{p:{"data-type":"*"}},{mark:{id:"*"}},{block:{id:"*"}}]),e.event.trigger("paste:schema",n);var a=new er(t,n,r,(function(t){t.find("em").each((function(e){"normal"===e.style["font-style"]&&jn(e)})),e.event.trigger("paste:origin",t)})).toDOM();No.call(e,a),dt(a,!0),e.event.trigger("paste:before",a),e.change.insertFragment(a,(function(t){e.event.trigger("paste:insert");var n=Cn.createBookmark(t);e.card.renderAll(e.editArea,e),Cn.moveToBookmark(t,n),Cn.scrollRangeIntoView(t)})),e.event.trigger("paste:after")}}),this.domEvent.onPaste((function(t){return Lo.call(e,t)}))}},zo={ol:"orderedlist",ul:"unorderedlist"};function Bo(e){var t=this;e.forEach((function(e){t.change.addMark(e.clone())}))}function Fo(e,t){var n=this;t.forEach((function(t){t.name!==e.name&&(t.isHeading()&&"p"!==t.name&&n.command.execute("heading",t.name),zo[t.name]&&n.command.execute("list",zo[t.name]));var r=t.css();Object.keys(r).length>0&&n.change.setBlocks({style:r})}))}function Vo(e,t){var n=this,r=this.change.getRange();if(r.collapsed){var a=kt('<img style="display: none;" />');r.insertNode(a[0]);var i=sr.getClosestBlock(r.startContainer);r.selectNodeContents(i[0]),this.change.select(r),this.command.execute("removeformat"),Bo.call(this,e),Fo.call(this,i,t),r.selectNode(a[0]),r.collapse(!0),a.remove(),this.change.select(r)}else this.command.execute("removeformat"),Bo.call(this,e),sr.getRangeBlocks(r).forEach((function(e){Fo.call(n,e,t)}))}var Uo={initialize:function(){var e,t,n=this,r="single",a=null,i=!1,o=function(r){n.editArea.removeClass("lake-paintformat-mode"),e=void 0,t=void 0,a&&(kt(r).off("keydown",a),a=null),n.event.trigger("select")};function c(e){var t=e.ownerDocument,n=function e(n){n.metaKey||n.ctrlKey||n.shiftKey||(a=null,"Escape"!==n.key&&27!==n.keyCode||(kt(t).off("keydown",e),o(t)))};kt(t).on("keydown",n),a=n}this.on("beforeCommandExecute",(function(e){"paintformat"!==e&&!i&&a&&o(n.editArea[0].ownerDocument)})),this.command.add("paintformat",{sideEffect:!0,queryState:function(){return!!e},execute:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"single";if(e)o(n.editArea[0]);else{r=a,c(n.editArea[0]);var i=n.change.getRange();e=sr.getActiveMarks(i),t=sr.getActiveBlocks(i),n.event.trigger("select"),n.editArea.addClass("lake-paintformat-mode")}}}),this.editArea.on("mouseup",(function(a){e&&(n.card.closest(a.target)?o(n.editArea[0].ownerDocument):(i=!0,Vo.call(n,e,t),i=!1,"single"===r&&o(n.editArea[0].ownerDocument)))}))}},qo={initialize:function(){var e=this;this.command.add("removeformat",{sideEffect:!0,execute:function(){var t=e.change.getRange();sr.getRangeBlocks(t).forEach((function(e){e.removeAttr("style")})),e.change.removeMark()}}),this.hotkey.set("mod+\\","removeformat")}},Ho=Object.keys(et);function Wo(){var e={};this.editArea.find("h1,h2,h3,h4,h5,h6").each((function(t){if((t=kt(t)).parent().isRoot()){var n=t.attr("id");if(n||(n=Pe(),t.attr("id",n)),e[n]){for(;e[n];)n=Pe();t.attr("id",n)}e[n]=!0}else t.removeAttr("id")}))}function Yo(){var e=kt(".lake-anchor-button");if(0!==e.length){var t=kt(this.change.getRange().startContainer).closest("h1,h2,h3,h4,h5,h6");if(0!==t.length){var n=this.parentNode[0].getBoundingClientRect(),r=t[0].getBoundingClientRect(),a=Math.round(r.left-n.left-e[0].clientWidth-9),i=Math.round(r.top-n.top+r.height/2-e[0].clientHeight/2);e.css({top:"".concat(i,"px"),left:"".concat(a,"px")})}else e.remove()}}function Go(){var e=this,t=this.change.getRange(),n=kt(".lake-anchor-button"),r=kt(t.startContainer).closest("h1,h2,h3,h4,h5,h6");if((0===r.length||n.length>0&&0===n.find(".lake-icon-".concat(r.name)).length)&&(n.remove(),Ea.hide()),0!==r.length&&r.parent().isRoot())if(n.find(".lake-icon-".concat(r.name)).length>0)Yo.call(this);else{n=kt('<span class="lake-anchor-button"><span class="lake-icon lake-icon-'.concat(r.name,'"></span></span>')),this.parentNode.append(n);var a=this.parentNode[0].getBoundingClientRect(),i=r[0].getBoundingClientRect(),o=Math.round(i.left-a.left-n[0].clientWidth-9),c=Math.round(i.top-a.top+i.height/2-n[0].clientHeight/2);n.css({top:"".concat(c,"px"),left:"".concat(o,"px")}),n.addClass("lake-anchor-button-active"),n.on("mouseenter",(function(){Ea.show(n,e.lang.copyAnchor.tips)})),n.on("mouseleave",(function(){Ea.hide()})),n.on("mousedown",(function(){Ea.hide()})),n.on("click",(function(t){t.preventDefault(),t.stopPropagation();var n=He(Or.exportParser&&Or.exportParser.getDocUrl()||location.href,r.attr("id"));Or.copyText(n)?e.messageSuccess(e.lang.copy.success):e.messageError(e.lang.copy.error)}))}}function Ko(){var e=this.change.getRange(),t=sr.getRangeBlocks(e),n=Cn.createBookmark(e);t.forEach((function(e){if("p"===e.name){var t=e.parent();if(t.isHeading()){for(var n=e[0].childNodes,r=n.length-1;r>=0;r--)t[0].insertBefore(n[r],e[0]);e.remove()}}})),n&&Cn.moveToBookmark(e,n)}function Xo(){Ko.call(this);var e,t=this.change.getRange(),n=sr.getRangeBlocks(t),r=Cn.createBookmark(t);if(r)return n.forEach((function(t){var n=t.parent(),r=t.first();[ye,ge].includes(r.attr(me))&&(r=r.next()),"li"===t.name&&n&&"ol"===n.name&&r&&r.isText()&&(e=parseInt(n.attr("start"),10)||1,r[0].nodeValue="".concat(e,". ")+r[0].nodeValue),sr.brToParagraph(t)})),Cn.moveToBookmark(t,r),e}function $o(e){var t=this.change.getRange(),n=sr.getRangeBlocks(t),r=Cn.createBookmark(t);r&&(n.forEach((function(t){$t.fetchAllChildren(t).forEach((function(e){if("strong"===(e=kt(e)).name||"span"===e.name&&/^lake-fontsize-\d+$/.test(e[0].className))sr.unwrapNode(e[0]);else if("span"===e.name){var t=/(?:^|\b)(lake-fontsize-\d+)(?:$|\b)/.exec(e[0].className);t&&e.removeClass(t[1])}}));var n=t.parent();if(e){var r=n.next();r&&"ol"===r.name&&r.attr("start")&&r.attr("start",e+1)}n&&["ul","ol"].includes(n.name)&&(n.find("[data-lake-card=checkbox]").remove(),sr.unwrapNode(n[0]))})),Cn.moveToBookmark(t,r))}var Zo,Qo={initialize:function(){var e=this,t=this.options.heading||{showAnchor:!0};this.schema.add(Ho.map((function(e){var t={};return t[e]={id:/^[\w\.\-]+$/},t}))),this.schema.add([{p:{"data-lake-id":"*"}}]),this.command.add("heading",{sideEffect:!0,queryState:function(){var t=e.change.blocks;return 0===t.length?"":Ho.indexOf(t[0].name)>=0?t[0].name:""},execute:function(t){var n=Xo.call(e);e.change.separateBlocks(),e.change.setBlocks("<".concat(t," />")),$o.call(e,n)}}),this.hotkey.set("mod+opt+1","heading","h1"),this.hotkey.set("mod+opt+2","heading","h2"),this.hotkey.set("mod+opt+3","heading","h3"),this.hotkey.set("mod+opt+4","heading","h4"),this.hotkey.set("mod+opt+5","heading","h5"),this.hotkey.set("mod+opt+6","heading","h6"),t.showAnchor&&(this.on("setvalue",(function(){Wo.call(e)})),this.on("change",(function(){Wo.call(e),Go.call(e)})),this.on("select",(function(){Go.call(e)})),this.on("typographychange",(function(){Go.call(e)})),window.addEventListener("resize",(function(){Yo.call(e)}),!1))}},Jo={initialize:function(){var e=this;this.schema.add("code"),this.command.add("code",{sideEffect:!0,queryState:function(){return e.change.marks.some((function(e){return"code"===e.name}))},execute:function(){var t="<".concat("code"," />");e.command.queryState("code")?e.change.removeMark(t):e.change.addMark(t,document.createTextNode("​"))}}),this.hotkey.set("mod+e","code")}},ec=(m()(Zo={9:12,10:13},"11",14),m()(Zo,"1515",15),m()(Zo,12,16),m()(Zo,14,19),m()(Zo,16,22),m()(Zo,18,24),m()(Zo,22,29),m()(Zo,24,32),m()(Zo,30,40),m()(Zo,36,48),Zo),tc=Object.keys(ec).map((function(e){return parseInt(e,10)}));function nc(e){var t=/([\d\.]+)(pt|px)$/i.exec(e=e||"");if(t){var n=t[2];if("pt"===n)return t[1];if("px"===n){for(var r=0;r<tc.length;r++)if(Math.round(t[1])===ec[tc[r]])return String(tc[r]);return String(Math.round(72*t[1]/96))}}return""}function rc(e){return"classic"===e?"1515":"11"}var ac={initialize:function(){var e=this;this.schema.add({span:{class:/^lake-fontsize-\d+$/}}),this.command.add("fontsize",{sideEffect:!0,queryState:function(){var t=e.change.marks.map((function(e){var t="";return"span"===e.name&&(t=nc(e.css("font-size"))),t})).filter((function(e){return e}));return t.length>0?t[0]:rc(e.typography)},execute:function(t,n){void 0===n&&(n=rc(e.typography));var r='<span class="lake-fontsize-'.concat(t,'" />');t!==n?e.change.addMark(r):e.change.removeMark(r)}}),this.on("paste:each",(function(e){if("span"===(e=kt(e)).name){var t=parseInt(nc(e[0].style.fontSize),10);tc.indexOf(t)>=0&&e.addClass("lake-fontsize-".concat(t)),e.css("font-size","")}}))}},ic={initialize:function(){var e=this;this.schema.add({span:{style:{color:"@color"}}}),this.command.add("fontcolor",{sideEffect:!0,queryState:function(){var t=e.change.marks.map((function(e){var t="";return"span"===e.name&&(t=Ke.toHex(e.css("color")||"")),t})).filter((function(e){return e}));return t.length>0?t[0]:""},execute:function(t,n){var r='<span style="color: '.concat(t,';" />');void 0===n||t!==n?e.change.addMark(r):e.change.removeMark(r)}})}},oc={initialize:function(){var e=this;this.schema.add({span:{style:{"background-color":"@color"}}}),this.command.add("backcolor",{sideEffect:!0,queryState:function(){var t=e.change.marks.map((function(e){var t="";return"span"===e.name&&(t=Ke.toHex(e.css("background-color")||"")),t})).filter((function(e){return e}));return t.length>0?t[0]:""},execute:function(t,n){var r='<span style="background-color: '.concat(t,';" />');void 0===n||t!==n?e.change.addMark(r):e.change.removeMark(r)}})}},cc={orderedlist:"ol",unorderedlist:"ul"},lc="orderedlist",sc={initialize:function(){var e=this;this.schema.add(["li",{ul:{"data-lake-indent":"@number"}},{ol:{start:"@number","data-lake-indent":"@number"}}]),this.command.add("list",{sideEffect:!0,queryState:function(){return gr(e.change.blocks)},execute:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=cc[t];if(r){e.change.separateBlocks();var a=e.change.getRange(),i=sr.getActiveBlocks(a);if(i){t===lc&&(n=parseInt(n,10)||1);var o=sn(a),c=hr(i,t);c?yr(i):br(i,t,n),un(a,o),e.change.select(a),e.change.mergeAdjacentList()}}}}),this.hotkey.set("mod+shift+7","list","orderedlist"),this.hotkey.set("mod+shift+8","list","unorderedlist")}};function uc(e,t,n,r){if(["ul","ol"].includes(e.name)){var a=(parseInt(e.attr(xt),10)||0)+(t<0?-1:1);return a>8&&(a=8),void(a<1?e.removeAttr(xt):e.attr(xt,a))}e.isHeading()&&function(e,t,n,r){if(t>0)if(Ke.removeUnit(e.css("text-indent"))||void 0===n){var a=e.css("padding-left"),i=Ke.removeUnit(a)+t;i=Math.min(i,r),sr.setNodeProps(e,{style:{"padding-left":Ke.addUnit(i>0?i:0,"em")}})}else sr.setNodeProps(e,{style:{"text-indent":"2em"}});else if(Ke.removeUnit(e.css("text-indent")))sr.setNodeProps(e,{style:{"text-indent":""}});else{var o=e.css("padding-left"),c=Ke.removeUnit(o)+t;sr.setNodeProps(e,{style:{"padding-left":Ke.addUnit(c>0?c:0,"em")}})}}(e,t,n,r)}var dc={initialize:function(){var e=this;Object.keys(et).forEach((function(t){var n={};n[t]={style:{"text-indent":"@length","padding-left":"@length"}},e.schema.add(n)})),this.command.add("indent",{sideEffect:!0,queryState:function(){var t=e.change.getRange(),n=sr.getClosestBlock(t.startContainer);if("li"===n.name)return parseInt(n.closest("ul,ol").attr(xt),10)||0;if(n.isHeading()){var r=Ke.removeUnit(n.css("padding-left")),a=Ke.removeUnit(n[0].style.textIndent);return r||a}return 0},execute:function(t){e.change.separateBlocks();var n=e.change.getRange(),r=sr.getActiveBlocks(n);if(r){var a=e.options.maxPadding||50;r.forEach((function(e){uc(e,2,t,a)})),e.change.mergeAdjacentList()}}}),this.command.add("outdent",{sideEffect:!0,execute:function(){e.change.separateBlocks();var t=e.change.getRange(),n=sr.getActiveBlocks(t);n&&(n.forEach((function(e){uc(e,-2,void 0,50)})),e.change.mergeAdjacentList())}}),this.hotkey.set("mod+]","indent"),this.hotkey.set("mod+[","outdent")}},fc={initialize:function(){var e=this;this.schema.add("blockquote"),this.command.add("quote",{sideEffect:!0,queryState:function(){var t=e.change.blocks;if(0===t.length)return!1;var n=t[0].closest("blockquote");return n.length>0&&""===n[0].className},execute:function(){if(e.command.queryState("quote")){var t=e.change.getRange(),n=e.change.blocks[0].closest("blockquote"),r=Cn.createBookmark(t);return sr.unwrapNode(n),void Cn.moveToBookmark(t,r)}e.change.wrapBlock("<".concat("blockquote"," />"))}}),this.hotkey.set("mod+shift+u","quote")}},pc={initialize:function(){var e=this;this.schema.add("hr"),this.command.add("hr",{sideEffect:!0,execute:function(){e.change.insertCard("hr")}}),this.hotkey.set("mod+opt+s","hr"),this.on("keydown:enter",(function(t){var n=e.change.getRange();if(n.collapsed){var r=sr.getClosestBlock(n.startContainer);if(r.isHeading()){var a=sr.getBlockLeftText(r,n);return/^---$/.exec(a)?(t.preventDefault(),sr.removeBlockLeftText(r,n),e.command.execute("hr"),!1):void 0}}})),this.on("paste:each",(function(t){"hr"===t.name&&e.card.replaceNode(t,"hr")}))}},hc={orderedlist:"ol",unorderedlist:"ul"},mc={"`":"code","==":"mark","**":"bold","~~":"strikethrough",_:"italic","^":"sup","~":"sub"};function gc(e,t){sr.removeBlockLeftText(e,t),$t.isEmptyNode(e)&&(e.empty(),e.append("<br />"))}function vc(e,t){var n=Cn.createBookmark(t);if(n){var r=kt(n.anchor).prev(),a=r&&r.isText()?r[0].nodeValue:"";Cn.moveToBookmark(t,n);for(var i=Object.keys(mc),o=0;o<i.length;o++){var c=i[o],l=c.replace(/(\*|\^)/g,"\\$1"),s=new RegExp("^(.*)".concat(l,"(.+?)").concat(l,"$")).exec(a);if(s){var u=s[1]&&/\S$/.test(s[1]),d=s[2],f=mc[c];if(""===f||!this.command.queryEnabled(f))return;e.preventDefault();var p=a.substr(0,a.length-d.length-2*c.length);return r[0].splitText((p+d).length+2*c.length),u&&(p+=" "),r[0].nodeValue=p+d,t.setStart(r[0],p.length),t.setEnd(r[0],(p+d).length),this.change.select(t),this.command.execute(f),(t=this.change.getRange()).collapse(!1),this.change.select(t),this.change.insertText(" "),!1}}}}function yc(e,t){var n=Cn.createBookmark(t);if(n){var r=kt(n.anchor).prev(),a=r&&r.isText()?r[0].nodeValue:"";Cn.moveToBookmark(t,n);var i=/\[(.+?)\]\(([\S]+?)\)$/.exec(a);if(i){e.preventDefault();var o=i[1],c=i[2],l=Ke.isCurrentPageUrl(location.href,c)?"":' target="_blank"',s=kt('<a href="'.concat(Ke.sanitizeUrl(c),'"').concat(l,">").concat(o,"</a>")),u=r[0].splitText(a.length-i[0].length);return u.splitText(i[0].length),kt(u).remove(),this.change.insertInline(s),this.change.insertText(" "),!1}}}function bc(e){var t=this.change.getRange();if(t.collapsed&&!1!==vc.call(this,e,t)&&!1!==yc.call(this,e,t)){var n=sr.getClosestBlock(t.startContainer);if(n.isHeading()){var r=sr.getBlockLeftText(n,t),a=function(e){if(/^\d{1,9}\.$/.test(e))return"orderedlist";switch(e){case"*":case"-":case"+":return"unorderedlist";case"[]":case"[ ]":return"tasklist";case"[x]":return"checkedtasklist";case"#":return"h1";case"##":return"h2";case"###":return"h3";case"####":return"h4";case"#####":return"h5";case"######":return"h6";case">":return"quote";default:return""}}(r);if(/^h\d$/i.test(a)&&this.command.queryEnabled("heading"))return e.preventDefault(),gc(n,t),void this.command.execute("heading",a);if(!/^h\d$/i.test(n.name))return hc[a]&&this.command.queryEnabled("list")?(e.preventDefault(),gc(n,t),void this.command.execute("list",a,r)):["tasklist","checkedtasklist"].indexOf(a)>=0&&this.command.queryEnabled("tasklist")?(e.preventDefault(),gc(n,t),void this.command.execute("tasklist","tasklist","tasklist"!==a)):"quote"===a&&this.command.queryEnabled(a)?(e.preventDefault(),gc(n,t),void this.command.execute(a)):void 0}}}var kc={initialize:function(){var e=this;this.on("keydown:space",(function(t){e.change.domEvent.isComposing||bc.call(e,t)}))}},wc=["info","warning","danger","success","tips"],xc={initialize:function(){var e=this;this.schema.add({blockquote:{class:["lake-alert","lake-alert-info","lake-alert-warning","lake-alert-danger","lake-alert-success","lake-alert-tips"]}}),this.command.add("alert",{sideEffect:!0,queryState:function(){var t=e.change.blocks;return 0!==t.length&&t[0].closest(".lake-alert").length>0},execute:function(t){if(wc.indexOf(t)<0&&(t="info"),e.command.queryState("alert")){var n=e.change.getRange(),r=e.change.blocks[0].closest(".lake-alert"),a=Cn.createBookmark(n);return sr.unwrapNode(r),void Cn.moveToBookmark(n,a)}e.change.wrapBlock('<blockquote class="lake-alert lake-alert-'.concat(t,'" />'))}}),this.on("keydown:enter",(function(t){var n=e.change.getRange();if(n.collapsed){var r=sr.getClosestBlock(n.startContainer);if("p"===r.name){var a=sr.getBlockLeftText(r,n),i=/^:::(\w*)$/.exec(a);if(i){t.preventDefault(),sr.removeBlockLeftText(r,n),jt(r[0])&&(r[0].innerHTML="<br>");var o=i[1].toLowerCase();return e.command.execute("alert",o),!1}}}}))}},_c=/(?:^|\s)lake-lineheight-(\d+)(?:\s|$)/g;function Cc(e,t){if(e===t)return!0;var n=e.compareDocumentPosition(t);return!!(n&Node.DOCUMENT_POSITION_CONTAINED_BY)||!!(n&Node.DOCUMENT_POSITION_PRECEDING)||!!(n&Node.DOCUMENT_POSITION_CONTAINS)}function Ec(e,t){if(e===t)return!0;var n=e.compareDocumentPosition(t);return!!(n&Node.DOCUMENT_POSITION_CONTAINED_BY)||!!(n&Node.DOCUMENT_POSITION_FOLLOWING)||!!(n&Node.DOCUMENT_POSITION_CONTAINS)}function Oc(e){return kt(e).closest("p",(function(e){return kt(e).isRoot()?null:e.parentNode}))[0]||null}var Sc={bothInit:function(){this.schema.add({p:{class:/^lake-lineheight-\d+$/}})},initialize:function(){var e=this;this.command.add("lineheight",{sideEffect:!0,queryState:function(){var t=function(e){var t=Oc(e.startContainer);if(t||e.collapsed)return t;var n=kt(e.commonAncestorContainer).find("p"),r=e.startContainer,a=e.endContainer;e.startContainer.nodeType===Node.ELEMENT_NODE&&(r=e.startContainer.childNodes[e.startOffset]||e.startContainer),e.endContainer.nodeType===Node.ELEMENT_NODE&&(a=e.endContainer.childNodes[e.endOffset]||e.endContainer);for(var i=0,o=n.length;i<o;i++){var c=n[i],l=kt(c).closest("[".concat(xe,"]"));if((!l.length||"table"===l.attr(xe))&&Cc(c,r)&&Ec(c,a))return c}return null}(e.change.getRange());if(!t)return null;var n=t.className,r=_c.exec(n);return r?r[1]:"17"},execute:function(t){if(e.command.queryState("lineheight")){var n=function(e){var t=[];if(e.collapsed){var n=Oc(e.startContainer);n&&t.push(n)}else{var r=e.commonAncestorContainer,a=sn(e),i=a.anchor,o=a.focus;kt(r).find("p").each((function(e){Cc(e,i)&&Ec(e,o)&&t.push(e)}));var c=Oc(r);c&&-1===t.indexOf(c)&&Cc(c,i)&&Ec(c,o)&&t.push(c),un(e,{anchor:i,focus:o})}return t.filter((function(e){var t=kt(e).closest("[".concat(xe,"]"));return!t.length||"table"===t.attr(xe)}))}(e.change.getRange());if(0!==n.length){var r=null;"17"!==t&&(r="lake-lineheight-"+t),n.forEach((function(e){!function(e){var t=e.className;t&&(t=t.replace(_c,(function(){return""})).replace(/\s+/g," "),e.className=t)}(e),r&&kt(e).addClass(r)}))}}}})}},Rc=r.HotKeyUtils.isHotkey;ko.card.add("checkbox",So),ko.card.add("hr",Ro),ko.card.add("blockfallback",Do),ko.card.add("inlinefallback",Ao),ko.plugin.add("paste",Io),ko.plugin.add("drop",{initialize:function(){var e=this,t=function(t){return!t||e.card.closest(t.commonAncestorContainer)};this.domEvent.onDrop((function(n){var r=n.e,a=n.dropRange,i=n.cardRoot,o=n.files;if(i){if(r.preventDefault(),t(a))return;var c=e.card.getComponent(i);return e.change.removeCard(i),e.change.select(a),void e.change.insertCard(c.name,c.value)}if(o.length>0){if(r.preventDefault(),t(a))return;e.change.select(a),e.event.trigger("drop:files",o)}}))}}),ko.plugin.add("undo",{initialize:function(){var e=this;this.command.add("undo",{sideEffect:!0,queryState:function(){return e.history.hasUndo()},execute:function(){e.readonly(!1),e.history.undo()}}),this.command.add("redo",{sideEffect:!0,queryState:function(){return e.history.hasRedo()},execute:function(){e.readonly(!1),e.history.redo()}}),this.hotkey.set("mod+z","undo"),this.hotkey.set("mod+y","redo"),this.hotkey.set("shift+mod+z","redo")}}),ko.plugin.add("selectall",{initialize:function(){var e=this;this.command.add("selectall",{execute:function(){e.card.renderController.disable(e);var t=e.change.getRange();t.selectNodeContents(e.editArea[0]),e.change.select(t),e.event.trigger("select")}}),this.on("keydown:selectall",(function(t){t.preventDefault(),e.command.execute("selectall")}))}}),ko.plugin.add("paintformat",Uo),ko.plugin.add("removeformat",qo),ko.plugin.add("heading",Qo),ko.plugin.add("bold",{initialize:function(){var e=this;this.schema.add("strong"),this.command.add("bold",{sideEffect:!0,queryState:function(){return e.change.marks.some((function(e){return"strong"===e.name}))},execute:function(){var t="<".concat("strong"," />");e.command.queryState("bold")?e.change.removeMark(t):e.change.addMark(t)}}),this.hotkey.set("mod+b","bold")}}),ko.plugin.add("italic",{initialize:function(){var e=this;this.schema.add("em"),this.command.add("italic",{sideEffect:!0,queryState:function(){return e.change.marks.some((function(e){return"em"===e.name}))},execute:function(){var t="<".concat("em"," />");e.command.queryState("italic")?e.change.removeMark(t):e.change.addMark(t)}}),this.hotkey.set("mod+i","italic")}}),ko.plugin.add("underline",{initialize:function(){var e=this;this.schema.add("u"),this.command.add("underline",{sideEffect:!0,queryState:function(){return e.change.marks.some((function(e){return"u"===e.name}))},execute:function(){var t="<".concat("u"," />");e.command.queryState("underline")?e.change.removeMark(t):e.change.addMark(t)}}),this.hotkey.set("mod+u","underline")}}),ko.plugin.add("strikethrough",{initialize:function(){var e=this;this.schema.add("del"),this.command.add("strikethrough",{sideEffect:!0,queryState:function(){return e.change.marks.some((function(e){return"del"===e.name}))},execute:function(){var t="<".concat("del"," />");e.command.queryState("strikethrough")?e.change.removeMark(t):e.change.addMark(t)}}),this.hotkey.set("mod+shift+x","strikethrough")}}),ko.plugin.add("code",Jo),ko.plugin.add("mark",{initialize:function(){var e=this;this.schema.add("mark"),this.command.add("mark",{sideEffect:!0,queryState:function(){return e.change.marks.some((function(e){return"mark"===e.name}))},execute:function(){var t="<".concat("mark"," />");e.command.queryState("mark")?e.change.removeMark(t):e.change.addMark(t)}})}}),ko.plugin.add("sup",{initialize:function(){var e=this;this.schema.add("sup"),this.command.add("sup",{sideEffect:!0,queryState:function(){return e.change.marks.some((function(e){return"sup"===e.name}))},execute:function(){var t="<".concat("sup"," />");e.command.queryState("sup")?e.change.removeMark(t):e.change.addMark(t)}}),this.hotkey.set("mod+shift+.","sup")}}),ko.plugin.add("sub",{initialize:function(){var e=this;this.schema.add("sub"),this.command.add("sub",{sideEffect:!0,queryState:function(){return e.change.marks.some((function(e){return"sub"===e.name}))},execute:function(){var t="<".concat("sub"," />");e.command.queryState("sub")?e.change.removeMark(t):e.change.addMark(t)}}),this.hotkey.set("mod+shift+,","sub")}}),ko.plugin.add("fontsize",ac),ko.plugin.add("fontcolor",ic),ko.plugin.add("backcolor",oc),ko.plugin.add("alignment",{initialize:function(){var e=this;this.schema.add({block:{style:{"text-align":["left","center","right","justify"]}}}),this.command.add("alignment",{sideEffect:!0,queryState:function(){var t=e.change.blocks;if(0!==t.length){var n=t[0];["ul","ol","blockquote"].includes(n.name)&&(n=t[1]||n.first()||n);var r=n.css("text-align");return"start"===r&&(r="left"),"end"===r&&(r="right"),r}},execute:function(t){e.change.setBlocks({style:{"text-align":t}}),function(e,t){e&&0!==e.length&&e.forEach((function(e){"li"===e.name&&("left"===t?e.css("list-style-position","outside"):e.css("list-style-position","inside"))}))}(e.change.blocks,t)}}),this.hotkey.set("mod+shift+l","alignment","left"),this.hotkey.set("mod+shift+c","alignment","center"),this.hotkey.set("mod+shift+r","alignment","right"),this.hotkey.set("mod+shift+j","alignment","justify")}}),ko.plugin.add("list",sc),ko.plugin.add("indent",dc),ko.plugin.add("quote",fc),ko.plugin.add("hr",pc),ko.plugin.add("tasklist",oi),ko.plugin.add("markdown",kc),ko.plugin.add("alert",xc),ko.plugin.add("lineheight",Sc),ko.EXTS=r.EXTS,ko.ua=r.ua,ko.FileUtils=r.FileUtils,ko.isHotkey=Rc,ko.$=kt,ko.StringUtils=Ke,ko.NodeUtils=$t,ko.ElementIDUtils=ht,ko.RangeUtils=Cn,ko.ClipboardUtils=Or,ko.ImageUtils=Tr,ko.UploadUtils=Nr,ko.ChangeUtils=sr,ko.OTUtils=$r,ko.TinyCanvas=Jr,ko.Schema=ta,ko.HTMLParser=er,ko.ExportParser=ir,ko.TextParser=na,ko.MarkdownParser=ia,ko.debug=Qt,ko.changes=Ca,ko.EmbedToolbar=Pa,ko.ContentView=Oo,ko.registerClipboardExportParser=function(e){Or.exportParser=e},ko.registerClipboard=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(Or,e)},t.s=ko},,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n(1617);var r=n(310);n(116);t.a=r.a},function(e,t,n){var r=n(1638);function a(t,n,i){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=a=Reflect.get:e.exports=a=function(e,t,n){var a=r(e,t);if(a){var i=Object.getOwnPropertyDescriptor(a,t);return i.get?i.get.call(n):i.value}},a(t,n,i||t)}e.exports=a},,,function(e,t,n){"use strict";n(894);var r=n(207);n(146);t.a=r.a},,function(e,t,n){"use strict";var r=n(222),a=n(0),i=n.n(a),o=n(2),c=n.n(o),l=n(7),s=n.n(l),u=n(52),d=n.n(u);n(612),n(122);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var v=i.a.forwardRef((function(e,t){var n=e.className,a=g(e,["className"]),o=s()("larkui-form","larkui-legacy-form",n);return i.a.createElement(r.a,m({className:o,ref:t},a))}));v.propTypes=p(p({},r.a.CardProps),{},{className:c.a.string}),d()(v,r.a),v.Item=i.a.forwardRef((function(e,t){var n=e.className,a=g(e,["className"]),o=s()("larkui-form-item","larkui-legacy-form-item",n);return i.a.createElement(r.a.Item,m({className:o,ref:t},a,{colon:!1}))})),t.a=v},,,,,,,function(e,t,n){"use strict";n(1616);var r=n(495);n(108);t.a=r.a},function(e,t,n){"use strict";n(1002);var r=n(537);n(74);t.a=r.a},function(e,t,n){"use strict";n(1827);var r=n(535),a=n(0),i=n.n(a),o=n(2),c=n.n(o),l=n(7),s=n.n(l),u=n(52),d=n.n(u);n(84);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var v=i.a.forwardRef((function(e,t){var n=e.children,a=e.className,o=e.transparentHead,c=e.contentType,l=g(e,["children","className","transparentHead","contentType"]),u=s()("larkui-card",a,{"larkui-card-transparent-head":o,"larkui-card-with-list":"list"===c});return i.a.createElement(r.a,m({className:u,ref:t},l),n)}));v.propTypes=p(p({},r.a.CardProps),{},{className:c.a.string,children:c.a.node,transparentHead:c.a.bool,contentType:c.a.oneOf(["list"])}),d()(v,r.a),t.a=v},,,,,function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!("string"==typeof e||e instanceof String)){var t;throw t=null===e?"null":"object"===(t=r(e))&&e.constructor&&e.constructor.hasOwnProperty("name")?e.constructor.name:"a ".concat(t),new TypeError("Expected string but received ".concat(t,"."))}},e.exports=t.default,e.exports.default=t.default},,function(e,t,n){"use strict";n(822);var r=n(208),a=n(0),i=n.n(a),o=n(2),c=n.n(o),l=n(7),s=n.n(l),u=n(52),d=n.n(u);n(149);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var v=i.a.forwardRef((function(e,t){var n=e.className,a=e.dropdownClassName,o=g(e,["className","dropdownClassName"]);return i.a.createElement(r.a,m({className:s()("larkui-select",n),dropdownClassName:s()("larkui-select-dropdown",a),ref:t},o))}));v.propTypes=p(p({},r.a.SelectProps),{},{className:c.a.string,dropdownClassName:c.a.string}),d()(v,r.a),t.a=v},,function(e,t,n){n(1519)("router"),e.exports=n(221),e.exports.routerRedux=n(169)},,,,,,,,,,function(e,t,n){"use strict";n(824);var r=n(304);n(168);t.a=r.a},,,,,,,,,,,,,,function(e,t,n){},,,,,,,,,,function(e,t,n){},,,,,,,,function(e,t,n){!function(t){var n,r={},a={16:!1,18:!1,17:!1,91:!1},i="all",o={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},c={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},l=function(e){return c[e]||e.toUpperCase().charCodeAt(0)},s=[];for(n=1;n<20;n++)c["f"+n]=111+n;function u(e,t){for(var n=e.length;n--;)if(e[n]===t)return n;return-1}function d(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var f={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function p(e){for(n in a)a[n]=e[f[n]]}function h(e,t,n){var a,i;a=g(e),void 0===n&&(n=t,t="all");for(var o=0;o<a.length;o++)i=[],(e=a[o].split("+")).length>1&&(i=v(e),e=[e[e.length-1]]),e=e[0],(e=l(e))in r||(r[e]=[]),r[e].push({shortcut:a[o],scope:t,method:n,key:a[o],mods:i})}for(n in o)h[n]=!1;function m(){return i||"all"}function g(e){var t;return""==(t=(e=e.replace(/\s/g,"")).split(","))[t.length-1]&&(t[t.length-2]+=","),t}function v(e){for(var t=e.slice(0,e.length-1),n=0;n<t.length;n++)t[n]=o[t[n]];return t}function y(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,(function(){n(window.event)}))}y(document,"keydown",(function(e){!function(e){var t,n,i,c,l,d;if(t=e.keyCode,-1==u(s,t)&&s.push(t),93!=t&&224!=t||(t=91),t in a)for(i in a[t]=!0,o)o[i]==t&&(h[i]=!0);else if(p(e),h.filter.call(this,e)&&t in r)for(d=m(),c=0;c<r[t].length;c++)if((n=r[t][c]).scope==d||"all"==n.scope){for(i in l=n.mods.length>0,a)(!a[i]&&u(n.mods,+i)>-1||a[i]&&-1==u(n.mods,+i))&&(l=!1);(0!=n.mods.length||a[16]||a[18]||a[17]||a[91])&&!l||!1===n.method(e,n)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}(e)})),y(document,"keyup",(function(e){var t,n=e.keyCode,r=u(s,n);if(r>=0&&s.splice(r,1),93!=n&&224!=n||(n=91),n in a)for(t in a[n]=!1,o)o[t]==n&&(h[t]=!1)})),y(window,"focus",(function(){for(n in a)a[n]=!1;for(n in o)h[n]=!1}));var b=t.key;t.key=h,t.key.setScope=function(e){i=e||"all"},t.key.getScope=m,t.key.deleteScope=function(e){var t,n,a;for(t in r)for(n=r[t],a=0;a<n.length;)n[a].scope===e?n.splice(a,1):a++},t.key.filter=function(e){var t=(e.target||e.srcElement).tagName;return!("INPUT"==t||"SELECT"==t||"TEXTAREA"==t)},t.key.isPressed=function(e){return"string"==typeof e&&(e=l(e)),-1!=u(s,e)},t.key.getPressedKeyCodes=function(){return s.slice(0)},t.key.noConflict=function(){var e=t.key;return t.key=b,e},t.key.unbind=function(e,t){var n,a,i,o,c,s=[];for(n=g(e),o=0;o<n.length;o++){if((a=n[o].split("+")).length>1&&(s=v(a),e=a[a.length-1]),e=l(e),void 0===t&&(t=m()),!r[e])return;for(i=0;i<r[e].length;i++)(c=r[e][i]).scope===t&&d(c.mods,s)&&(r[e][i]={})}},e.exports=h}(this)},function(e,t,n){"use strict";n(823);var r=n(276);n(212);t.a=r.a},function(e,t,n){"use strict";n(1005);var r=n(539);n(177);t.a=r.a},,function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;function a(e,t){return r.call(e,t)}function i(e){return!(e>=55296&&e<=57343)&&(!(e>=64976&&e<=65007)&&(65535!=(65535&e)&&65534!=(65535&e)&&(!(e>=0&&e<=8)&&(11!==e&&(!(e>=14&&e<=31)&&(!(e>=127&&e<=159)&&!(e>1114111)))))))}function o(e){if(e>65535){var t=55296+((e-=65536)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}var c=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,l=new RegExp(c.source+"|"+/&([a-z#][a-z0-9]{1,31});/gi.source,"gi"),s=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,u=n(909);var d=/[&<>"]/,f=/[&<>"]/g,p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function h(e){return p[e]}var m=/[.?*+^$[\]\\(){}|-]/g;var g=n(617);t.lib={},t.lib.mdurl=n(910),t.lib.ucmicro=n(1673),t.assign=function(e){var t=Array.prototype.slice.call(arguments,1);return t.forEach((function(t){if(t){if("object"!=typeof t)throw new TypeError(t+"must be object");Object.keys(t).forEach((function(n){e[n]=t[n]}))}})),e},t.isString=function(e){return"[object String]"===function(e){return Object.prototype.toString.call(e)}(e)},t.has=a,t.unescapeMd=function(e){return e.indexOf("\\")<0?e:e.replace(c,"$1")},t.unescapeAll=function(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(l,(function(e,t,n){return t||function(e,t){var n=0;return a(u,t)?u[t]:35===t.charCodeAt(0)&&s.test(t)&&i(n="x"===t[1].toLowerCase()?parseInt(t.slice(2),16):parseInt(t.slice(1),10))?o(n):e}(e,n)}))},t.isValidEntityCode=i,t.fromCodePoint=o,t.escapeHtml=function(e){return d.test(e)?e.replace(f,h):e},t.arrayReplaceAt=function(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))},t.isSpace=function(e){switch(e){case 9:case 32:return!0}return!1},t.isWhiteSpace=function(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1},t.isMdAsciiPunct=function(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}},t.isPunctChar=function(e){return g.test(e)},t.escapeRE=function(e){return e.replace(m,"\\$&")},t.normalizeReference=function(e){return e.trim().replace(/\s+/g," ").toUpperCase()}},,,,function(e,t,n){"use strict";n(821);var r=n(275),a=n(0),i=n.n(a),o=n(2),c=n.n(o),l=n(52),s=n.n(l),u=n(7),d=n.n(u);n(148);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y=i.a.forwardRef((function(e,t){var n=e.className,o=e.overlayClassName,c=e.type,l=e.noArrow,s=e.hideWhenInactive,u=e.content,f=g(Object(a.useState)(e.visible||e.defaultVisible),2),p=f[0],h=f[1];Object(a.useEffect)((function(){"visible"in e&&h(e.visible)}),[e.visible]);var v=function(t){"visible"in e||h(t),e.onVisibleChange&&e.onVisibleChange(t)};return i.a.createElement(r.a,m({},e,{className:d()(n,"larkui-popover-trigger"),overlayClassName:d()(o,{"larkui-popover":!0,"larkui-popover-menu":"menu"===c,"larkui-popover-no-arrow":l}),content:s?i.a.createElement("div",{onClick:function(){v(!1)}},u):u,ref:t,visible:p,onVisibleChange:v}))}));y.propTypes=p(p({},r.a.PopoverProps),{},{type:c.a.oneOf(["menu"]),content:c.a.node,children:c.a.node,className:c.a.string,overlayClassName:c.a.string,noArrow:c.a.bool,hideWhenInactive:c.a.bool}),s()(y,r.a),t.a=y},function(e,t,n){"use strict";n(616);var r=n(245),a=n(0),i=n.n(a),o=n(2),c=n.n(o),l=n(7),s=n.n(l),u=n(52),d=n.n(u);n(163);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var v=i.a.forwardRef((function(e,t){var n=e.className,a=e.justify,o=g(e,["className","justify"]);return i.a.createElement(r.a,m({className:s()("larkui-spin",n,{"larkui-spin-block":"block"===a}),indicator:i.a.createElement("div",{className:"larkui-spin-indicator"}),ref:t},o))}));v.propTypes=p(p({},r.a.SpinProps),{},{className:c.a.string,justify:c.a.oneOf(["block"])}),d()(v,r.a),t.a=v},,,,,,,function(e,t,n){},,,,,,,,function(e,t,n){},,,,,,function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return pa})),n.d(t,"b",(function(){return Eu})),n.d(t,"c",(function(){return lm})),n.d(t,"d",(function(){return Ji})),n.d(t,"e",(function(){return Ul})),n.d(t,"f",(function(){return kl})),n.d(t,"g",(function(){return kc})),n.d(t,"h",(function(){return _p})),n.d(t,"i",(function(){return zl}));var r={};n.r(r),n.d(r,"create",(function(){return ee})),n.d(r,"fromMat4",(function(){return te})),n.d(r,"clone",(function(){return ne})),n.d(r,"copy",(function(){return re})),n.d(r,"fromValues",(function(){return ae})),n.d(r,"set",(function(){return ie})),n.d(r,"identity",(function(){return oe})),n.d(r,"transpose",(function(){return ce})),n.d(r,"invert",(function(){return le})),n.d(r,"adjoint",(function(){return se})),n.d(r,"determinant",(function(){return ue})),n.d(r,"multiply",(function(){return de})),n.d(r,"translate",(function(){return fe})),n.d(r,"rotate",(function(){return pe})),n.d(r,"scale",(function(){return he})),n.d(r,"fromTranslation",(function(){return me})),n.d(r,"fromRotation",(function(){return ge})),n.d(r,"fromScaling",(function(){return ve})),n.d(r,"fromMat2d",(function(){return ye})),n.d(r,"fromQuat",(function(){return be})),n.d(r,"normalFromMat4",(function(){return ke})),n.d(r,"projection",(function(){return we})),n.d(r,"str",(function(){return xe})),n.d(r,"frob",(function(){return _e})),n.d(r,"add",(function(){return Ce})),n.d(r,"subtract",(function(){return Ee})),n.d(r,"multiplyScalar",(function(){return Oe})),n.d(r,"multiplyScalarAndAdd",(function(){return Se})),n.d(r,"exactEquals",(function(){return Re})),n.d(r,"equals",(function(){return De})),n.d(r,"mul",(function(){return Ae})),n.d(r,"sub",(function(){return Te}));var a={};n.r(a),n.d(a,"create",(function(){return Pe})),n.d(a,"clone",(function(){return je})),n.d(a,"fromValues",(function(){return Me})),n.d(a,"copy",(function(){return Ne})),n.d(a,"set",(function(){return Le})),n.d(a,"add",(function(){return Ie})),n.d(a,"subtract",(function(){return ze})),n.d(a,"multiply",(function(){return Be})),n.d(a,"divide",(function(){return Fe})),n.d(a,"ceil",(function(){return Ve})),n.d(a,"floor",(function(){return Ue})),n.d(a,"min",(function(){return qe})),n.d(a,"max",(function(){return He})),n.d(a,"round",(function(){return We})),n.d(a,"scale",(function(){return Ye})),n.d(a,"scaleAndAdd",(function(){return Ge})),n.d(a,"distance",(function(){return Ke})),n.d(a,"squaredDistance",(function(){return Xe})),n.d(a,"length",(function(){return $e})),n.d(a,"squaredLength",(function(){return Ze})),n.d(a,"negate",(function(){return Qe})),n.d(a,"inverse",(function(){return Je})),n.d(a,"normalize",(function(){return et})),n.d(a,"dot",(function(){return tt})),n.d(a,"cross",(function(){return nt})),n.d(a,"lerp",(function(){return rt})),n.d(a,"random",(function(){return at})),n.d(a,"transformMat2",(function(){return it})),n.d(a,"transformMat2d",(function(){return ot})),n.d(a,"transformMat3",(function(){return ct})),n.d(a,"transformMat4",(function(){return lt})),n.d(a,"rotate",(function(){return st})),n.d(a,"angle",(function(){return ut})),n.d(a,"zero",(function(){return dt})),n.d(a,"str",(function(){return ft})),n.d(a,"exactEquals",(function(){return pt})),n.d(a,"equals",(function(){return ht})),n.d(a,"len",(function(){return gt})),n.d(a,"sub",(function(){return vt})),n.d(a,"mul",(function(){return yt})),n.d(a,"div",(function(){return bt})),n.d(a,"dist",(function(){return kt})),n.d(a,"sqrDist",(function(){return wt})),n.d(a,"sqrLen",(function(){return xt})),n.d(a,"forEach",(function(){return _t}));var i={};n.r(i),n.d(i,"create",(function(){return Ct})),n.d(i,"clone",(function(){return Et})),n.d(i,"length",(function(){return Ot})),n.d(i,"fromValues",(function(){return St})),n.d(i,"copy",(function(){return Rt})),n.d(i,"set",(function(){return Dt})),n.d(i,"add",(function(){return At})),n.d(i,"subtract",(function(){return Tt})),n.d(i,"multiply",(function(){return Pt})),n.d(i,"divide",(function(){return jt})),n.d(i,"ceil",(function(){return Mt})),n.d(i,"floor",(function(){return Nt})),n.d(i,"min",(function(){return Lt})),n.d(i,"max",(function(){return It})),n.d(i,"round",(function(){return zt})),n.d(i,"scale",(function(){return Bt})),n.d(i,"scaleAndAdd",(function(){return Ft})),n.d(i,"distance",(function(){return Vt})),n.d(i,"squaredDistance",(function(){return Ut})),n.d(i,"squaredLength",(function(){return qt})),n.d(i,"negate",(function(){return Ht})),n.d(i,"inverse",(function(){return Wt})),n.d(i,"normalize",(function(){return Yt})),n.d(i,"dot",(function(){return Gt})),n.d(i,"cross",(function(){return Kt})),n.d(i,"lerp",(function(){return Xt})),n.d(i,"hermite",(function(){return $t})),n.d(i,"bezier",(function(){return Zt})),n.d(i,"random",(function(){return Qt})),n.d(i,"transformMat4",(function(){return Jt})),n.d(i,"transformMat3",(function(){return en})),n.d(i,"transformQuat",(function(){return tn})),n.d(i,"rotateX",(function(){return nn})),n.d(i,"rotateY",(function(){return rn})),n.d(i,"rotateZ",(function(){return an})),n.d(i,"angle",(function(){return on})),n.d(i,"zero",(function(){return cn})),n.d(i,"str",(function(){return ln})),n.d(i,"exactEquals",(function(){return sn})),n.d(i,"equals",(function(){return un})),n.d(i,"sub",(function(){return dn})),n.d(i,"mul",(function(){return fn})),n.d(i,"div",(function(){return pn})),n.d(i,"dist",(function(){return hn})),n.d(i,"sqrDist",(function(){return mn})),n.d(i,"len",(function(){return gn})),n.d(i,"sqrLen",(function(){return vn})),n.d(i,"forEach",(function(){return yn}));var o=n(58),c=n(3),l=n.n(c),s=n(130),u=n.n(s),d=n(68),f=n.n(d),p=n(835),h=n.n(p),m=n(8),g=n.n(m),v=n(9),y=n.n(v),b=n(27),k=n.n(b),w=n(12),x=n.n(w),_=n(14),C=n.n(_),E=n(4),O=n.n(E),S=n(5),R=n.n(S),D=n(82),A=n.n(D),T=n(44),P=n.n(T),j=n(20),M=n.n(j),N=n(353),L=n.n(N),I=n(1993),z=n(29),B=n.n(z),F=n(25),V=n(925),U=n.n(V),q=n(23),H=n.n(q),W=n(75),Y=n.n(W),G=n(926),K=n.n(G),X=n(88),$=n.n(X),Z=1e-6,Q="undefined"!=typeof Float32Array?Float32Array:Array,J=Math.random;Math.PI;function ee(){var e=new Q(9);return Q!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function te(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function ne(e){var t=new Q(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function re(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function ae(e,t,n,r,a,i,o,c,l){var s=new Q(9);return s[0]=e,s[1]=t,s[2]=n,s[3]=r,s[4]=a,s[5]=i,s[6]=o,s[7]=c,s[8]=l,s}function ie(e,t,n,r,a,i,o,c,l,s){return e[0]=t,e[1]=n,e[2]=r,e[3]=a,e[4]=i,e[5]=o,e[6]=c,e[7]=l,e[8]=s,e}function oe(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function ce(e,t){if(e===t){var n=t[1],r=t[2],a=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=a}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function le(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],c=t[5],l=t[6],s=t[7],u=t[8],d=u*o-c*s,f=-u*i+c*l,p=s*i-o*l,h=n*d+r*f+a*p;return h?(h=1/h,e[0]=d*h,e[1]=(-u*r+a*s)*h,e[2]=(c*r-a*o)*h,e[3]=f*h,e[4]=(u*n-a*l)*h,e[5]=(-c*n+a*i)*h,e[6]=p*h,e[7]=(-s*n+r*l)*h,e[8]=(o*n-r*i)*h,e):null}function se(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],c=t[5],l=t[6],s=t[7],u=t[8];return e[0]=o*u-c*s,e[1]=a*s-r*u,e[2]=r*c-a*o,e[3]=c*l-i*u,e[4]=n*u-a*l,e[5]=a*i-n*c,e[6]=i*s-o*l,e[7]=r*l-n*s,e[8]=n*o-r*i,e}function ue(e){var t=e[0],n=e[1],r=e[2],a=e[3],i=e[4],o=e[5],c=e[6],l=e[7],s=e[8];return t*(s*i-o*l)+n*(-s*a+o*c)+r*(l*a-i*c)}function de(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],c=t[4],l=t[5],s=t[6],u=t[7],d=t[8],f=n[0],p=n[1],h=n[2],m=n[3],g=n[4],v=n[5],y=n[6],b=n[7],k=n[8];return e[0]=f*r+p*o+h*s,e[1]=f*a+p*c+h*u,e[2]=f*i+p*l+h*d,e[3]=m*r+g*o+v*s,e[4]=m*a+g*c+v*u,e[5]=m*i+g*l+v*d,e[6]=y*r+b*o+k*s,e[7]=y*a+b*c+k*u,e[8]=y*i+b*l+k*d,e}function fe(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],c=t[4],l=t[5],s=t[6],u=t[7],d=t[8],f=n[0],p=n[1];return e[0]=r,e[1]=a,e[2]=i,e[3]=o,e[4]=c,e[5]=l,e[6]=f*r+p*o+s,e[7]=f*a+p*c+u,e[8]=f*i+p*l+d,e}function pe(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],c=t[4],l=t[5],s=t[6],u=t[7],d=t[8],f=Math.sin(n),p=Math.cos(n);return e[0]=p*r+f*o,e[1]=p*a+f*c,e[2]=p*i+f*l,e[3]=p*o-f*r,e[4]=p*c-f*a,e[5]=p*l-f*i,e[6]=s,e[7]=u,e[8]=d,e}function he(e,t,n){var r=n[0],a=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=a*t[3],e[4]=a*t[4],e[5]=a*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function me(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function ge(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function ve(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function ye(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function be(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=n+n,c=r+r,l=a+a,s=n*o,u=r*o,d=r*c,f=a*o,p=a*c,h=a*l,m=i*o,g=i*c,v=i*l;return e[0]=1-d-h,e[3]=u-v,e[6]=f+g,e[1]=u+v,e[4]=1-s-h,e[7]=p-m,e[2]=f-g,e[5]=p+m,e[8]=1-s-d,e}function ke(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],c=t[5],l=t[6],s=t[7],u=t[8],d=t[9],f=t[10],p=t[11],h=t[12],m=t[13],g=t[14],v=t[15],y=n*c-r*o,b=n*l-a*o,k=n*s-i*o,w=r*l-a*c,x=r*s-i*c,_=a*s-i*l,C=u*m-d*h,E=u*g-f*h,O=u*v-p*h,S=d*g-f*m,R=d*v-p*m,D=f*v-p*g,A=y*D-b*R+k*S+w*O-x*E+_*C;return A?(A=1/A,e[0]=(c*D-l*R+s*S)*A,e[1]=(l*O-o*D-s*E)*A,e[2]=(o*R-c*O+s*C)*A,e[3]=(a*R-r*D-i*S)*A,e[4]=(n*D-a*O+i*E)*A,e[5]=(r*O-n*R-i*C)*A,e[6]=(m*_-g*x+v*w)*A,e[7]=(g*k-h*_-v*b)*A,e[8]=(h*x-m*k+v*y)*A,e):null}function we(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function xe(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function _e(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function Ce(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e}function Ee(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}function Oe(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e}function Se(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e}function Re(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function De(e,t){var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],c=e[5],l=e[6],s=e[7],u=e[8],d=t[0],f=t[1],p=t[2],h=t[3],m=t[4],g=t[5],v=t[6],y=t[7],b=t[8];return Math.abs(n-d)<=Z*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(r-f)<=Z*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(a-p)<=Z*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(i-h)<=Z*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(o-m)<=Z*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(c-g)<=Z*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(l-v)<=Z*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(s-y)<=Z*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(u-b)<=Z*Math.max(1,Math.abs(u),Math.abs(b))}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var Ae=de,Te=Ee;function Pe(){var e=new Q(2);return Q!=Float32Array&&(e[0]=0,e[1]=0),e}function je(e){var t=new Q(2);return t[0]=e[0],t[1]=e[1],t}function Me(e,t){var n=new Q(2);return n[0]=e,n[1]=t,n}function Ne(e,t){return e[0]=t[0],e[1]=t[1],e}function Le(e,t,n){return e[0]=t,e[1]=n,e}function Ie(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function ze(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function Be(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}function Fe(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}function Ve(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function Ue(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function qe(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function He(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}function We(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function Ye(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function Ge(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e}function Ke(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.hypot(n,r)}function Xe(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function $e(e){var t=e[0],n=e[1];return Math.hypot(t,n)}function Ze(e){var t=e[0],n=e[1];return t*t+n*n}function Qe(e,t){return e[0]=-t[0],e[1]=-t[1],e}function Je(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function et(e,t){var n=t[0],r=t[1],a=n*n+r*r;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e}function tt(e,t){return e[0]*t[0]+e[1]*t[1]}function nt(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e}function rt(e,t,n,r){var a=t[0],i=t[1];return e[0]=a+r*(n[0]-a),e[1]=i+r*(n[1]-i),e}function at(e,t){t=t||1;var n=2*J()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e}function it(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[2]*a,e[1]=n[1]*r+n[3]*a,e}function ot(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[2]*a+n[4],e[1]=n[1]*r+n[3]*a+n[5],e}function ct(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[3]*a+n[6],e[1]=n[1]*r+n[4]*a+n[7],e}function lt(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[4]*a+n[12],e[1]=n[1]*r+n[5]*a+n[13],e}function st(e,t,n,r){var a=t[0]-n[0],i=t[1]-n[1],o=Math.sin(r),c=Math.cos(r);return e[0]=a*c-i*o+n[0],e[1]=a*o+i*c+n[1],e}function ut(e,t){var n=e[0],r=e[1],a=t[0],i=t[1],o=Math.sqrt(n*n+r*r)*Math.sqrt(a*a+i*i),c=o&&(n*a+r*i)/o;return Math.acos(Math.min(Math.max(c,-1),1))}function dt(e){return e[0]=0,e[1]=0,e}function ft(e){return"vec2("+e[0]+", "+e[1]+")"}function pt(e,t){return e[0]===t[0]&&e[1]===t[1]}function ht(e,t){var n=e[0],r=e[1],a=t[0],i=t[1];return Math.abs(n-a)<=Z*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-i)<=Z*Math.max(1,Math.abs(r),Math.abs(i))}var mt,gt=$e,vt=ze,yt=Be,bt=Fe,kt=Ke,wt=Xe,xt=Ze,_t=(mt=Pe(),function(e,t,n,r,a,i){var o,c;for(t||(t=2),n||(n=0),c=r?Math.min(r*t+n,e.length):e.length,o=n;o<c;o+=t)mt[0]=e[o],mt[1]=e[o+1],a(mt,mt,i),e[o]=mt[0],e[o+1]=mt[1];return e});function Ct(){var e=new Q(3);return Q!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Et(e){var t=new Q(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ot(e){var t=e[0],n=e[1],r=e[2];return Math.hypot(t,n,r)}function St(e,t,n){var r=new Q(3);return r[0]=e,r[1]=t,r[2]=n,r}function Rt(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Dt(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function At(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function Tt(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function Pt(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function jt(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function Mt(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function Nt(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function Lt(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function It(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function zt(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function Bt(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function Ft(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function Vt(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return Math.hypot(n,r,a)}function Ut(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return n*n+r*r+a*a}function qt(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function Ht(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function Wt(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function Yt(e,t){var n=t[0],r=t[1],a=t[2],i=n*n+r*r+a*a;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function Gt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Kt(e,t,n){var r=t[0],a=t[1],i=t[2],o=n[0],c=n[1],l=n[2];return e[0]=a*l-i*c,e[1]=i*o-r*l,e[2]=r*c-a*o,e}function Xt(e,t,n,r){var a=t[0],i=t[1],o=t[2];return e[0]=a+r*(n[0]-a),e[1]=i+r*(n[1]-i),e[2]=o+r*(n[2]-o),e}function $t(e,t,n,r,a,i){var o=i*i,c=o*(2*i-3)+1,l=o*(i-2)+i,s=o*(i-1),u=o*(3-2*i);return e[0]=t[0]*c+n[0]*l+r[0]*s+a[0]*u,e[1]=t[1]*c+n[1]*l+r[1]*s+a[1]*u,e[2]=t[2]*c+n[2]*l+r[2]*s+a[2]*u,e}function Zt(e,t,n,r,a,i){var o=1-i,c=o*o,l=i*i,s=c*o,u=3*i*c,d=3*l*o,f=l*i;return e[0]=t[0]*s+n[0]*u+r[0]*d+a[0]*f,e[1]=t[1]*s+n[1]*u+r[1]*d+a[1]*f,e[2]=t[2]*s+n[2]*u+r[2]*d+a[2]*f,e}function Qt(e,t){t=t||1;var n=2*J()*Math.PI,r=2*J()-1,a=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*a,e[1]=Math.sin(n)*a,e[2]=r*t,e}function Jt(e,t,n){var r=t[0],a=t[1],i=t[2],o=n[3]*r+n[7]*a+n[11]*i+n[15];return o=o||1,e[0]=(n[0]*r+n[4]*a+n[8]*i+n[12])/o,e[1]=(n[1]*r+n[5]*a+n[9]*i+n[13])/o,e[2]=(n[2]*r+n[6]*a+n[10]*i+n[14])/o,e}function en(e,t,n){var r=t[0],a=t[1],i=t[2];return e[0]=r*n[0]+a*n[3]+i*n[6],e[1]=r*n[1]+a*n[4]+i*n[7],e[2]=r*n[2]+a*n[5]+i*n[8],e}function tn(e,t,n){var r=n[0],a=n[1],i=n[2],o=n[3],c=t[0],l=t[1],s=t[2],u=a*s-i*l,d=i*c-r*s,f=r*l-a*c,p=a*f-i*d,h=i*u-r*f,m=r*d-a*u,g=2*o;return u*=g,d*=g,f*=g,p*=2,h*=2,m*=2,e[0]=c+u+p,e[1]=l+d+h,e[2]=s+f+m,e}function nn(e,t,n,r){var a=[],i=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],i[0]=a[0],i[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),i[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e}function rn(e,t,n,r){var a=[],i=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],i[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),i[1]=a[1],i[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e}function an(e,t,n,r){var a=[],i=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],i[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),i[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),i[2]=a[2],e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e}function on(e,t){var n=e[0],r=e[1],a=e[2],i=t[0],o=t[1],c=t[2],l=Math.sqrt(n*n+r*r+a*a)*Math.sqrt(i*i+o*o+c*c),s=l&&Gt(e,t)/l;return Math.acos(Math.min(Math.max(s,-1),1))}function cn(e){return e[0]=0,e[1]=0,e[2]=0,e}function ln(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function sn(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function un(e,t){var n=e[0],r=e[1],a=e[2],i=t[0],o=t[1],c=t[2];return Math.abs(n-i)<=Z*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-o)<=Z*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(a-c)<=Z*Math.max(1,Math.abs(a),Math.abs(c))}var dn=Tt,fn=Pt,pn=jt,hn=Vt,mn=Ut,gn=Ot,vn=qt,yn=function(){var e=Ct();return function(t,n,r,a,i,o){var c,l;for(n||(n=3),r||(r=0),l=a?Math.min(a*n+r,t.length):t.length,c=r;c<l;c+=n)e[0]=t[c],e[1]=t[c+1],e[2]=t[c+2],i(e,e,o),t[c]=e[0],t[c+1]=e[1],t[c+2]=e[2];return t}}(),bn=n(836),kn=n.n(bn),wn=n(340),xn=n.n(wn),_n=n(927),Cn=n.n(_n),En=n(140),On=n.n(En),Sn=n(95),Rn=n.n(Sn);function Dn(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var a,i,o,c,l,s,u,d,f,p=e._root,h={data:r},m=e._x0,g=e._y0,v=e._x1,y=e._y1;if(!p)return e._root=h,e;for(;p.length;)if((s=t>=(i=(m+v)/2))?m=i:v=i,(u=n>=(o=(g+y)/2))?g=o:y=o,a=p,!(p=p[d=u<<1|s]))return a[d]=h,e;if(c=+e._x.call(null,p.data),l=+e._y.call(null,p.data),t===c&&n===l)return h.next=p,a?a[d]=h:e._root=h,e;do{a=a?a[d]=new Array(4):e._root=new Array(4),(s=t>=(i=(m+v)/2))?m=i:v=i,(u=n>=(o=(g+y)/2))?g=o:y=o}while((d=u<<1|s)==(f=(l>=o)<<1|c>=i));return a[f]=p,a[d]=h,e}var An=function(e,t,n,r,a){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=a};function Tn(e){return e[0]}function Pn(e){return e[1]}function jn(e,t,n){var r=new Mn(null==t?Tn:t,null==n?Pn:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function Mn(e,t,n,r,a,i){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=a,this._y1=i,this._root=void 0}function Nn(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Ln=jn.prototype=Mn.prototype;Ln.copy=function(){var e,t,n=new Mn(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=Nn(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var a=0;a<4;++a)(t=r.source[a])&&(t.length?e.push({source:t,target:r.target[a]=new Array(4)}):r.target[a]=Nn(t));return n},Ln.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return Dn(this.cover(t,n),t,n,e)},Ln.addAll=function(e){var t,n,r,a,i=e.length,o=new Array(i),c=new Array(i),l=1/0,s=1/0,u=-1/0,d=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||(o[n]=r,c[n]=a,r<l&&(l=r),r>u&&(u=r),a<s&&(s=a),a>d&&(d=a));if(l>u||s>d)return this;for(this.cover(l,s).cover(u,d),n=0;n<i;++n)Dn(this,o[n],c[n],e[n]);return this},Ln.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,a=this._x1,i=this._y1;if(isNaN(n))a=(n=Math.floor(e))+1,i=(r=Math.floor(t))+1;else{for(var o,c,l=a-n,s=this._root;n>e||e>=a||r>t||t>=i;)switch(c=(t<r)<<1|e<n,(o=new Array(4))[c]=s,s=o,l*=2,c){case 0:a=n+l,i=r+l;break;case 1:n=a-l,i=r+l;break;case 2:a=n+l,r=i-l;break;case 3:n=a-l,r=i-l}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=a,this._y1=i,this},Ln.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},Ln.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Ln.find=function(e,t,n){var r,a,i,o,c,l,s,u=this._x0,d=this._y0,f=this._x1,p=this._y1,h=[],m=this._root;for(m&&h.push(new An(m,u,d,f,p)),null==n?n=1/0:(u=e-n,d=t-n,f=e+n,p=t+n,n*=n);l=h.pop();)if(!(!(m=l.node)||(a=l.x0)>f||(i=l.y0)>p||(o=l.x1)<u||(c=l.y1)<d))if(m.length){var g=(a+o)/2,v=(i+c)/2;h.push(new An(m[3],g,v,o,c),new An(m[2],a,v,g,c),new An(m[1],g,i,o,v),new An(m[0],a,i,g,v)),(s=(t>=v)<<1|e>=g)&&(l=h[h.length-1],h[h.length-1]=h[h.length-1-s],h[h.length-1-s]=l)}else{var y=e-+this._x.call(null,m.data),b=t-+this._y.call(null,m.data),k=y*y+b*b;if(k<n){var w=Math.sqrt(n=k);u=e-w,d=t-w,f=e+w,p=t+w,r=m.data}}return r},Ln.remove=function(e){if(isNaN(i=+this._x.call(null,e))||isNaN(o=+this._y.call(null,e)))return this;var t,n,r,a,i,o,c,l,s,u,d,f,p=this._root,h=this._x0,m=this._y0,g=this._x1,v=this._y1;if(!p)return this;if(p.length)for(;;){if((s=i>=(c=(h+g)/2))?h=c:g=c,(u=o>=(l=(m+v)/2))?m=l:v=l,t=p,!(p=p[d=u<<1|s]))return this;if(!p.length)break;(t[d+1&3]||t[d+2&3]||t[d+3&3])&&(n=t,f=d)}for(;p.data!==e;)if(r=p,!(p=p.next))return this;return(a=p.next)&&delete p.next,r?(a?r.next=a:delete r.next,this):t?(a?t[d]=a:delete t[d],(p=t[0]||t[1]||t[2]||t[3])&&p===(t[3]||t[2]||t[1]||t[0])&&!p.length&&(n?n[f]=p:this._root=p),this):(this._root=a,this)},Ln.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},Ln.root=function(){return this._root},Ln.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},Ln.visit=function(e){var t,n,r,a,i,o,c=[],l=this._root;for(l&&c.push(new An(l,this._x0,this._y0,this._x1,this._y1));t=c.pop();)if(!e(l=t.node,r=t.x0,a=t.y0,i=t.x1,o=t.y1)&&l.length){var s=(r+i)/2,u=(a+o)/2;(n=l[3])&&c.push(new An(n,s,u,i,o)),(n=l[2])&&c.push(new An(n,r,u,s,o)),(n=l[1])&&c.push(new An(n,s,a,i,u)),(n=l[0])&&c.push(new An(n,r,a,s,u))}return this},Ln.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new An(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var a=t.node;if(a.length){var i,o=t.x0,c=t.y0,l=t.x1,s=t.y1,u=(o+l)/2,d=(c+s)/2;(i=a[0])&&n.push(new An(i,o,c,u,d)),(i=a[1])&&n.push(new An(i,u,c,l,d)),(i=a[2])&&n.push(new An(i,o,d,u,s)),(i=a[3])&&n.push(new An(i,u,d,l,s))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},Ln.x=function(e){return arguments.length?(this._x=e,this):this._x},Ln.y=function(e){return arguments.length?(this._y=e,this):this._y};var In=n(79),zn=n.n(In),Bn=n(19),Fn=n(30),Vn=n(197),Un=n(16),qn=n(56),Hn=n(24),Wn=n(100),Yn=n(314),Gn=n(828),Kn=n(355),Xn=n(60),$n=n(93),Zn=(n(1844),n(1016).a),Qn=n(15),Jn=n.n(Qn),er=n(0),tr=n.n(er),nr=n(2),rr=n.n(nr),ar=n(7),ir=n.n(ar),or=n(170),cr=n.n(or),lr={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"outlined"},sr=n(85),ur=function(e,t){return er.createElement(sr.a,Object.assign({},e,{ref:t,icon:lr}))};ur.displayName="CaretDownOutlined";var dr=er.forwardRef(ur),fr={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"},pr=function(e,t){return er.createElement(sr.a,Object.assign({},e,{ref:t,icon:fr}))};pr.displayName="CaretRightOutlined";var hr=er.forwardRef(pr);function mr(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}function gr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e.children},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;t(e,r,a);var i=n(e);if(i)for(var o=0;o<i.length&&!1!==gr(i[o],t,n,e,o);o++);}function vr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e.children},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=n(e);if(a)for(var i=0;i<a.length&&(t(a[i],e,r),!1!==vr(a[i],t,n,i));i++);}function yr(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return br(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?br(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function br(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kr(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1/0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;return e<t?t:e>n?n:e}function _r(){var e=[],t=arguments[0];Array.isArray(t)?e.push(t):e.push([t]);for(var n=1;n<arguments.length;n++)if(t=arguments[n],Array.isArray(t))e.push(t);else{for(var r=[],a=0;a<e[0].length;a++)r.push(t);e.push(r)}return e}function Cr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=wr(wr({},e),t);return e.default&&t.default&&(n.default=Object.assign(e.default,t.default)),e.textAreaContentStyleSheets&&t.textAreaContentStyleSheets&&(n.textAreaContentStyleSheets=e.textAreaContentStyleSheets.concat(t.textAreaContentStyleSheets)),e.Subcells&&t.Subcells&&(n.Subcells=e.Subcells.concat(t.Subcells)),n}function Er(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-5;return e>=t[0]-n&&e<=t[1]+n}function Or(e,t){return Object.values(e.reduce((function(e,n){return(e[n[t]]=e[n[t]]||[]).push(n),e}),{}))}function Sr(e){return e.filter((function(e,t,n){return n.indexOf(e,0)===t}))}function Rr(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}function Dr(e,t,n){if(n>=e.length)for(var r=n-e.length+1;r--;)e.push(void 0);return e.splice(n,0,e.splice(t,1)[0]),e}function Ar(e){for(var t,n,r=arguments,a=r.length;a>1&&e.length;)for(t=r[--a];-1!==(n=e.indexOf(t));)e.splice(n,1);return t}function Tr(e,t){e.children?e.children.push(t):e.children=[t]}function Pr(e,t){var n,r=-1/0;if(void 0===t){var a,i=yr(e);try{for(i.s();!(a=i.n()).done;)null!=(n=a.value)&&r<n&&(r=n)}catch(e){i.e(e)}finally{i.f()}}else{var o,c=-1,l=yr(e);try{for(l.s();!(o=l.n()).done;)null!=(n=t(n=o.value,++c,e))&&r<n&&(r=n)}catch(e){l.e(e)}finally{l.f()}}return r}function jr(e,t,n){for(var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return e.parent},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(e){return void 0===e};e&&e!==n&&i(r);)r=t(e),e=a(e);return r}function Mr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.forEach((function(t){var n=t.query,r=t.css;"self"!==n?e.querySelectorAll(n).forEach((function(e){Object.keys(r).forEach((function(t){e.style[t]=r[t]}))})):Object.keys(r).forEach((function(t){e.style[t]=r[t]}))}))}function Nr(e,t){var n={};return Object.keys(t).forEach((function(r){!0===t[r]?n[r]=f()(e[r]):u()(t[r])&&u()(e[r])&&(n[r]=Nr(e[r],t[r]))})),n}function Lr(e,t,n){var r={};return e&&n?t?(n.forEach((function(n){e[n]!==t[n]&&(r[n]=e[n])})),r):wr({},e):r}function Ir(e,t){return h()(e,t,(function(e,t){return void 0!==e||u()(t)?e:null}))}mr("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n::selection {\n  background-color: rgba(52, 155, 249, 0.15) !important;\n  color: inherit !important;\n}\n.lake-diagram-mindmap-root::selection {\n  background-color: #ddefff !important;\n}\n.selection-transparent::selection {\n  background-color: transparent !important;\n  color: inherit !important;\n}\n.selection-transparent *::selection {\n  background-color: transparent !important;\n  color: inherit !important;\n}\n.lake-diagram-note {\n  cursor: pointer;\n  position: absolute;\n}\n");Object.freeze({__proto__:null,getValue:xr,convertBatch:_r,mergeCellOptions:Cr,between:Er,groupBy:Or,arrayUnique:Sr,arrayEqual:Rr,arrayMove:Dr,removeArray:Ar,append:Tr,max:Pr,min:function(e,t){var n,r=1/0;if(void 0===t){var a,i=yr(e);try{for(i.s();!(a=i.n()).done;)null!=(n=a.value)&&r>n&&(r=n)}catch(e){i.e(e)}finally{i.f()}}else{var o,c=-1,l=yr(e);try{for(l.s();!(o=l.n()).done;)null!=(n=t(n=o.value,++c,e))&&r>n&&(r=n)}catch(e){l.e(e)}finally{l.f()}}return r},closest:jr,setStyleSheets:Mr,pick:Nr,diff:Lr,mergeUndefinedToNull:Ir});function zr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-4;return Math.abs(e-t)<n}function Br(e,t){return e.minX<t.minX&&e.minY<t.minY&&e.maxX>t.maxX&&e.maxY>t.maxY}function Fr(e,t){return!(t.maxX<e.minX||t.minX>e.maxX||t.maxY<e.minY||t.minY>e.maxY)}function Vr(e,t,n,r){var a;return a=(r-t)/(n-e),Number(a.toFixed(2))}function Ur(e,t,n,r){return Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))}function qr(e,t,n,r){var a=Vr(e,t,n,r),i=Math.atan(a);return n<e?i+Math.PI:r<t?i+2*Math.PI:i}function Hr(e,t,n,r){var a;return a=zr(e,n)?1/0:zr(t,r)?0:(a=(r-t)/(n-e)).toFixed(2),Number(a)}function Wr(e,t,n,r,a,i,o,c){if(Hr(e,t,n,r)===Hr(a,i,o,c))return!1;var l=((e*r-n*t)*(a-o)-(e-n)*(a*c-i*o))/((e-n)*(i-c)-(t-r)*(a-o)),s=((e*r-n*t)*(i-c)-(t-r)*(a*c-i*o))/((e-n)*(i-c)-(t-r)*(a-o));return{x:-0===l?0:l,y:-0===s?0:s}}function Yr(e,t,n,r){return Math.abs(e-n)+Math.abs(t-r)}function Gr(e,t,n){return e>=t&&e<=n}function Kr(e,t,n,r){return zr(e,n)&&zr(t,r)}function Xr(e,t,n,r,a,i,o,c){var l=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],s={x:a-e,y:i-t},u={x:n-e,y:r-t},d={x:o-a,y:c-i},f=u.x*d.y-u.y*d.x,p=f*f,h=u.x*u.x+u.y*u.y,m=d.x*d.x+d.y*d.y,g=null;if(p>1e-4*h*m){var v=(s.x*d.y-s.y*d.x)/f,y=(s.x*u.y-s.y*u.x)/f;Gr(v,0,1)&&Gr(y,0,1)&&(g={x:e+v*u.x,y:t+v*u.y})}return g&&!l&&(Kr(e,t,g.x,g.y)||Kr(n,r,g.x,g.y)||Kr(a,i,g.x,g.y)||Kr(o,c,g.x,g.y))?null:g}function $r(e,t,n,r){if(e===n)return{f:function(){return null},string:"x=".concat(e.toFixed(3))};if(t===r)return{f:function(){return t},string:"y=".concat(t.toFixed(3))};var a=(r-t)/(n-e),i=-e/(n-e)*(r-t)+t;return{f:function(e){return a*e+i},string:"y=".concat(a.toFixed(3),"x+").concat(i.toFixed(3))}}function Zr(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return!!(Xr(e.x1,e.y1,e.x2,e.y2,t.minX,t.minY,t.minX,t.maxY,n)||Xr(e.x1,e.y1,e.x2,e.y2,t.minX,t.minY,t.maxX,t.minY,n)||Xr(e.x1,e.y1,e.x2,e.y2,t.maxX,t.minY,t.maxX,t.maxY,n)||Xr(e.x1,e.y1,e.x2,e.y2,t.minX,t.maxY,t.maxX,t.maxY,n))}function Qr(e,t){return Hr(e.x,e.y,t.x1,t.y1)===Hr(e.x,e.y,t.x2,t.y2)}function Jr(e,t,n,r){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-r,2))}function ea(e,t){if(e.k===1/0){if(e.y1<e.y2&&t.y<e.y1)return!1;if(e.y1>e.y2&&t.y>e.y1)return!1}else{if(e.x1<e.x2&&t.x<e.x1)return!1;if(e.x1>e.x2&&t.x>e.x1)return!1}return!0}function ta(e,t){var n=e[0]*t[0]+e[1]*t[1],r=e[0]*t[1]-e[1]*t[0],a=Math.atan2(r,n);return a<0&&(a=2*Math.PI-Math.abs(a)),a}function na(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,0],r=[],a=2*Math.PI/e,i=0;i<e;i++)r.push([a*i,a*(i+1)]);var o=[n[0]-t[0],n[1]-t[1]];return function(e,n){var a=[e[0]-t[0],e[1]-t[1]],i=r[n];return Er(ta(a,o),i)}}var ra=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];g()(this,e),this.vertices={},this.edges={},this.isDirected=t}return y()(e,[{key:"snap",value:function(e){for(var t={vertex:void 0,distance:1/0},n=this.getAllVertices(),r=0;r<n.length;r++){var a=n[r];if(a.x===e.x&&a.y===e.y)return a;var i=Math.abs(a.x-e.x)+Math.abs(a.y-e.y);i<t.distance&&(t.vertex=a,t.distance=i)}return t.vertex}},{key:"addVertex",value:function(e){return this.vertices[e.getKey()]=e,this}},{key:"getVertexByKey",value:function(e){return this.vertices[e]}},{key:"getNeighbors",value:function(e){return e.getNeighbors()}},{key:"getAllVertices",value:function(){return Object.values(this.vertices)}},{key:"getAllEdges",value:function(){return Object.values(this.edges)}},{key:"addEdge",value:function(e){var t=this.getVertexByKey(e.startVertex.getKey()),n=this.getVertexByKey(e.endVertex.getKey());if(t||(this.addVertex(e.startVertex),t=this.getVertexByKey(e.startVertex.getKey())),n||(this.addVertex(e.endVertex),n=this.getVertexByKey(e.endVertex.getKey())),this.edges[e.getKey()])throw new Error("Edge has already been added before");return this.edges[e.getKey()]=e,this.isDirected?t.addEdge(e):(t.addEdge(e),n.addEdge(e)),this}},{key:"deleteEdge",value:function(e){if(!this.edges[e.getKey()])throw new Error("Edge not found in graph");delete this.edges[e.getKey()];var t=this.getVertexByKey(e.startVertex.getKey()),n=this.getVertexByKey(e.endVertex.getKey());t.deleteEdge(e),n.deleteEdge(e)}},{key:"findEdge",value:function(e,t){return this.getVertexByKey(e.getKey()).findEdge(t)}},{key:"findVertexByKey",value:function(e){return this.vertices[e]?this.vertices[e]:null}},{key:"getWeight",value:function(){return this.getAllEdges().reduce((function(e,t){return e+t.weight}),0)}},{key:"reverse",value:function(){var e=this;return this.getAllEdges().forEach((function(t){e.deleteEdge(t),t.reverse(),e.addEdge(t)})),this}},{key:"getVerticesIndices",value:function(){var e={};return this.getAllVertices().forEach((function(t,n){e[t.getKey()]=n})),e}},{key:"getAdjacencyMatrix",value:function(){var e=this,t=this.getAllVertices(),n=this.getVerticesIndices(),r=Array(t.length).fill(null).map((function(){return Array(t.length).fill(1/0)}));return t.forEach((function(t,a){t.getNeighbors().forEach((function(i){var o=n[i.getKey()];r[a][o]=e.findEdge(t,i).weight}))})),r}},{key:"toString",value:function(){return Object.keys(this.vertices).toString()}}]),e}(),aa=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;g()(this,e),this.value=t,this.next=n}return y()(e,[{key:"toString",value:function(e){return e?e(this.value):"".concat(this.value)}}]),e}(),ia=function(){function e(t){g()(this,e),this.compare=t||e.defaultCompareFunction}return y()(e,[{key:"equal",value:function(e,t){return 0===this.compare(e,t)}},{key:"lessThan",value:function(e,t){return this.compare(e,t)<0}},{key:"greaterThan",value:function(e,t){return this.compare(e,t)>0}},{key:"lessThanOrEqual",value:function(e,t){return this.lessThan(e,t)||this.equal(e,t)}},{key:"greaterThanOrEqual",value:function(e,t){return this.greaterThan(e,t)||this.equal(e,t)}},{key:"reverse",value:function(){var e=this.compare;this.compare=function(t,n){return e(n,t)}}}],[{key:"defaultCompareFunction",value:function(e,t){return e===t?0:e<t?-1:1}}]),e}(),oa=function(){function e(t){g()(this,e),this.head=null,this.tail=null,this.compare=new ia(t)}return y()(e,[{key:"prepend",value:function(e){return this.head=new aa(e,this.head),this}},{key:"append",value:function(e){var t=new aa(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)}},{key:"delete",value:function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare.equal(this.head.value,e);)t=this.head,this.head=this.head.next;var n=this.head;if(null!==n)for(;n.next;)this.compare.equal(n.next.value,e)?(t=n.next,n.next=n.next.next):n=n.next;return this.compare.equal(this.tail.value,e)&&(this.tail=n),t}},{key:"find",value:function(e){var t=e.value,n=void 0===t?void 0:t,r=e.callback,a=void 0===r?void 0:r;if(!this.head)return null;for(var i=this.head;i;){if(a&&a(i.value))return i;if(void 0!==n&&this.compare.equal(i.value,n))return i;i=i.next}return null}},{key:"deleteTail",value:function(){if(this.head===this.tail){var e=this.tail;return this.head=null,this.tail=null,e}for(var t=this.tail,n=this.head;n.next;)n.next.next?n=n.next:n.next=null;return this.tail=n,t}},{key:"deleteHead",value:function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e}},{key:"toArray",value:function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e}},{key:"toString",value:function(e){return this.toArray().map((function(t){return t.toString(e)})).toString()}}]),e}(),ca=function(){function e(t){if(g()(this,e),void 0===t)throw new Error("Graph vertex must have a value");this.value=t,this.edges=new oa((function(e,t){return e.getKey()===t.getKey()?0:e.getKey()<t.getKey()?-1:1}))}return y()(e,[{key:"addEdge",value:function(e){return this.edges.append(e),this}},{key:"deleteEdge",value:function(e){this.edges.delete(e)}},{key:"getNeighbors",value:function(){var e=this;return this.edges.toArray().map((function(t){return t.value.startVertex===e?t.value.endVertex:t.value.startVertex}))}},{key:"getEdges",value:function(){return this.edges.toArray().map((function(e){return e.value}))}},{key:"getDegree",value:function(){return this.edges.toArray().length}},{key:"hasEdge",value:function(e){return!!this.edges.find({callback:function(t){return t===e}})}},{key:"hasNeighbor",value:function(e){return!!this.edges.find({callback:function(t){return t.startVertex===e||t.endVertex===e}})}},{key:"findEdge",value:function(e){var t=this.edges.find({callback:function(t){return t.startVertex===e||t.endVertex===e}});return t?t.value:null}},{key:"getKey",value:function(){return this.value}},{key:"deleteAllEdges",value:function(){var e=this;return this.getEdges().forEach((function(t){return e.deleteEdge(t)})),this}},{key:"toString",value:function(e){return e?e(this.value):"".concat(this.value)}}]),e}(),la=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;g()(this,e),this.startVertex=t,this.endVertex=n,this.weight=r}return y()(e,[{key:"getKey",value:function(){var e=this.startVertex.getKey(),t=this.endVertex.getKey();return"".concat(e,"_").concat(t)}},{key:"reverse",value:function(){var e=this.startVertex;return this.startVertex=this.endVertex,this.endVertex=e,this}},{key:"toString",value:function(){return this.getKey()}}]),e}();function sa(e){return e.getNeighbors().filter((function(e){return!0!==e.visited}))}function ua(e){var t,n={};for(t=0;t<e.length;t++){var r=e[t],a=$r(r.x1,r.y1,r.x2,r.y2).string;if(n[a])"ray"===r.type&&(n[a].type="straight"),e[t]=null;else{n[a]=r;var i,o=Hr(r.x1,r.y1,r.x2,r.y2);i=r.x1===r.x2?r.x1:r.y1===r.y2?r.y1:r.y1-(r.y2-r.y1)/(r.x2-r.x1)*r.x1,r.k=o,r.b=i,r.intersections=[]}}return(e=e.filter((function(e){return e}))).sort((function(e,t){return e.b-t.b})),e}function da(e){var t,n,r=Or(e=ua(e),"k"),a=[];for(t=0;t<r.length;t++){var i=r[t],o=function(){var e=r[n];i.forEach((function(t){e.forEach((function(e){var n=Wr(t.x1,t.y1,t.x2,t.y2,e.x1,e.y1,e.x2,e.y2);("ray"!==t.type||ea(t,n))&&("ray"!==e.type||ea(e,n))&&(t.intersections.push(n),e.intersections.push(n),n.index=a.length,a.push(n))}))}))};for(n=t+1;n<r.length;n++)o()}var c=new ra,l=a.map((function(e,t){var n=new ca(t);return Object.assign(n,e),n})),s=[];for(t=0;t<e.length;t++){var u=e[t];for(n=0;n<u.intersections.length;n++){var d=u.intersections[n],f=u.intersections[n+1];f&&s.push(new la(l[d.index],l[f.index]))}}return l.forEach((function(e){c.addVertex(e)})),s.forEach((function(e){c.addEdge(e)})),c}function fa(e,t,n,r){t=e.snap(t),n=e.snap(n);var a,i,o=t,c=sa(o),l=[o];for(o.visited=!0,o.distance=0;c.length>0;){a=-1/0,i=void 0;for(var s=0;s<c.length;s++){var u=c[s];if(u.from=o,!u.visited){u.distance=Jr(o.x,o.y,u.x,u.y)+o.distance;var d=r(u,t,n);d>a&&(i=u,a=d)}}if(i&&(c=sa(o=i),l.push(o),o.visited=!0,o===n))break}return l}var pa=Object.freeze({__proto__:null,deepTreeTraversal:gr,deepTreeTraversalWithoutSelf:vr,breadthTreeTraversal:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e.children},r=[];for(r.unshift(e);0!==r.length;){var a=r.shift();t(a);var i=n(a);if(i)for(var o=0;o<i.length;o++)r.push(i[o])}},roughlyEqual:zr,rectContainRect:Br,pointInRect:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minX,r=t.minY,a=t.maxX,i=t.maxY;return!(e[0]<=n||e[0]>=a||e[1]<=r||e[1]>=i)},rectIntersectRect:Fr,lineSlope:Vr,lineDistance:Ur,lineRadian:qr,lineIntercept:Hr,lineIntersection:Wr,manhattanDistance:Yr,isBetween:Gr,isEqlPoint:Kr,lineSegmentIntersect:Xr,getLineEquation:$r,lineSegmentIntersectRect:Zr,pointInLine:Qr,pointToPointDistance:Jr,isInRay:ea,clockwiseAngle:ta,radialQuadrantSegmentationGenerator:na,calculateLine:ua,linesToGraph:da,snapPoint:function(e,t){for(var n={vertex:void 0,distance:1/0},r=e.getAllVertices(),a=0;a<r.length;a++){var i=r[a];if(i.x===t.x&&i.y===t.y)return i;var o=Yr(i.x,i.y,t.x,t.y);o<n.distance&&(n.vertex=i,n.distance=o)}return n.vertex},pathFinding:fa}),ha="http://www.w3.org/2000/svg",ma="http://www.w3.org/1999/xlink";function ga(e){e=e||document.body;var t=document.createElementNS(ha,"svg");return t.setAttribute("version","1.1"),t.setAttribute("xmlns",ha),t.setAttribute("xmlns:xlink",ma),t.style.opacity=0,t.style.width="0px",t.style.height="0px",t.style.position="absolute",t.style["z-index"]=-1,e.appendChild(t),t}function va(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ya(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?va(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):va(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ba=ga(),ka=function(e){x()(n,A.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(g()(this,n),r=ya({matrix:[1,0,0,0,1,0,0,0,1]},r),e=t.call(this,r),!r.name)throw new Error("Should set name for Graphics Element!");return e.options=r,e.matrix=r.matrix,e.attrs={},e.styles={},e.rendererElement=e.create(r.name),e.update(r),e}return y()(n,[{key:"hide",value:function(){this.update({visibility:"hidden"})}},{key:"show",value:function(){this.update({visibility:"visible"})}},{key:"on",value:function(e,t){-1!==this.passthroughEventKeys().indexOf(e)&&this.rendererElement.addEventListener(e,t),k()(O()(n.prototype),"on",this).call(this,e,t)}},{key:"off",value:function(e,t){-1!==this.passthroughEventKeys().indexOf(e)&&this.rendererElement.removeEventListener(e,t),k()(O()(n.prototype),"off",this).call(this,e,t)}},{key:"passthroughEventKeys",value:function(){return["mousedown","mouseenter","mouseleave","mousemove","mouseover","click"]}},{key:"passthroughAttributeKeys",value:function(){return["id","fill","stroke","stroke-width","stroke-linecap","stroke-linejoin","visibility","pointer-events","opacity","stroke-dasharray"]}},{key:"dataset",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(t).forEach((function(n){e.rendererElement.dataset[n]=t[n]}))}},{key:"_getPassthroughData",value:function(e,t){var n={},r=Object.keys(t),a=this["passthrough".concat(e,"Keys")]();return r.filter((function(e){return a.includes(e)})).forEach((function(e){var r=t[e];void 0!==r&&(n[e]=r)})),n}},{key:"update",value:function(e){var t=this._getPassthroughData("Attribute",e),n=e.matrix;n&&(t.transform="matrix(".concat(n[0],", ").concat(n[1],", ").concat(n[3],", ").concat(n[4],", ").concat(n[6],", ").concat(n[7],")"),this.matrix=n),this.attr(t)}},{key:"_setAttrs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rendererElement;Object.keys(e).forEach((function(n){var r=e[n];null==r?t.removeAttribute(n):t.setAttribute(n,r)}))}},{key:"_setStyles",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rendererElement;Object.keys(e).forEach((function(n){t.style[n]=e[n]}))}},{key:"create",value:function(e){return document.createElementNS(ha,e)}},{key:"css",value:function(e){if("object"===P()(e))this.styles=ya(ya({},this.styles),e),this._setStyles(e);else if("string"==typeof e)return this.styles[e]}},{key:"attr",value:function(e){if("object"===P()(e))this.attrs=ya(ya({},this.attrs),e),this._setAttrs(e);else if("string"==typeof e)return this.attrs[e]}},{key:"getBBox",value:function(){var e,t=this.rendererElement,n=this.canvas,r=n&&n.calculateCanvas||ba;return document.contains(t)?e=t.getBBox():(r.appendChild(t),e=t.getBBox(),r.removeChild(t)),{x:e.x,y:e.y,width:e.width,height:e.height}}},{key:"getBoundingClientRect",value:function(){return this.rendererElement.getBoundingClientRect()}},{key:"getZIndex",value:function(){return this.parent?this.parent.children.indexOf(this):null}},{key:"getSiblingRendererElement",value:function(){return this.rendererElement.nextSibling?["before",this.rendererElement.nextSibling]:this.rendererElement.previousSibling?["after",this.rendererElement.previousSibling]:null}},{key:"remove",value:function(){this.parent&&this.parent.removeChild(this)}},{key:"before",value:function(e){this.parent.insertBefore(e,this)}},{key:"after",value:function(e){this.parent.insertAfter(e,this)}},{key:"toBack",value:function(){if(!this.destroyed){var e=this.parent;e&&e.insertBefore(this,e.children[0])}}},{key:"toFront",value:function(){if(!this.destroyed){var e=this.parent;e&&e.insertBefore(this,null)}}},{key:"forward",value:function(){if(!this.destroyed){var e=this.parent,t=this.nextSibling;e&&t&&e.insertBefore(t,this)}}},{key:"backward",value:function(){if(!this.destroyed){var e=this.parent,t=this.previousSibling;e&&t&&e.insertBefore(this,t)}}},{key:"destroy",value:function(){this.destroyed=!0,this.options=null,this.remove()}},{key:"previousSibling",get:function(){var e=this.parent.children,t=e.indexOf(this);return t>=1?e[t-1]:null}},{key:"nextSibling",get:function(){var e=this.parent.children,t=e.indexOf(this);return t>=0?e[t+1]:null}}]),n}();function wa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wa(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _a=function(e){x()(n,ka);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g()(this,n),r=xa({name:"g"},r),(e=t.call(this,r)).children=[],e}return y()(n,[{key:"passthroughAttributeKeys",value:function(){return k()(O()(n.prototype),"passthroughAttributeKeys",this).call(this)}},{key:"deepEach",value:function(e){gr(this,e)}},{key:"add",value:function(e){this.children.includes(e)||(e.parent=this,this.children.push(e),this.rendererElement.appendChild(e.rendererElement))}},{key:"prepend",value:function(e){this.insertBefore(e,this.children[0])}},{key:"insertBefore",value:function(e,t){var n=this.children,r=this.rendererElement,a=n.indexOf(e);a>=0&&n.splice(a,1),e.parent=this;var i=n.indexOf(t);i>=0?(n.splice(i,0,e),r.insertBefore(e.rendererElement,t.rendererElement)):(n.push(e),r.insertBefore(e.rendererElement,null))}},{key:"insertAfter",value:function(e,t){t?this.insertBefore(e,t.nextSibling):this.insertBefore(e,null)}},{key:"removeChild",value:function(e){if(e.parent===this){var t=this.children,n=t.indexOf(e);n>-1&&t.splice(n,1),e.parent=void 0,this.rendererElement.removeChild(e.rendererElement)}}},{key:"clear",value:function(){[].concat(this.children).forEach((function(e){e.remove()}))}}]),n}();function Ca(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ea(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ca(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ca(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Oa=function(e){x()(n,_a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(g()(this,n),!(r=Ea({container:null,calculatedContainer:null,name:"svg"},r)).container)throw new Error("Please set container for canvas!");(e=t.call(this,r)).options=r;var a=r,i=a.container,o=R()(e),c=o.rendererElement;return c.setAttribute("version","1.1"),c.setAttribute("xmlns",ha),c.setAttribute("xmlns:xlink",ma),i.appendChild(c),e.createCalculateCanvas(),e.container=i,e.canvas=R()(e),e}return y()(n,[{key:"createCalculateCanvas",value:function(){var e=this.options;this.calculateCanvas=ga(e.calculatedContainer)}},{key:"remove",value:function(){this.container&&this.container.removeChild(this.rendererElement),this.calculateCanvas&&this.calculateCanvas.parentElement.removeChild(this.calculateCanvas)}}]),n}();function Sa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ra(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sa(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Da=function(e){x()(n,_a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g()(this,n),t.call(this,Ra({x:0,y:0,scale:1,rotate:0},e))}return y()(n,[{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this.options,e);var t=this.options,r=t.x,a=t.y,i=t.scale,o=t.rotate,c=i,l=Math.cos(o),s=Math.sin(o);e.matrix=[l*c,s*c,0,-s*c,l*c,0,r,a,1],k()(O()(n.prototype),"update",this).call(this,e)}}]),n}();var Aa=function(e){x()(n,ka);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g()(this,n),(e=t.call(this,r)).isShape=!0,e}return n}(),Ta="\t\n\v\f\r   ᠎             　\u2028\u2029",Pa=new RegExp("([a-z])["+Ta+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Ta+"]*,?["+Ta+"]*)+)","ig"),ja=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Ta+"]*,?["+Ta+"]*","ig");function Ma(e){if(!e)return null;if(Array.isArray(e))return e;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return(e=String(e)).replace(Pa,(function(e,r,a){var i=[],o=r.toLowerCase();if(a.replace(ja,(function(e,t){t&&i.push(+t)})),"m"===o&&i.length>2&&(n.push([r].concat(i.splice(0,2))),o="l",r="m"===r?"l":"L"),"o"===o&&1===i.length&&n.push([r,i[0]]),"r"===o)n.push([r].concat(i));else for(;i.length>=t[o]&&(n.push([r].concat(i.splice(0,t[o]))),t[o]););return""})),n}function Na(e){if(Array.isArray(e)){var t=L()(e);return[t[0],t.slice(1).join()].join("")}var n=e.name,r=e.x,a=e.y;switch(n.toLowerCase()){case"m":case"l":return n+[r,a].join();case"h":case"v":return n+r;case"z":return n;case"a":var i=e.xAxisRotation,o=e.largeArcFlag,c=e.sweepFlag;return n+[e.rx,e.ry,i,o,c,r,a].join();case"c":return n+[e.x1,e.y1,e.x2,e.y2,e.x,e.y].join();case"q":return n+[e.x1,e.y1,e.x,e.y].join();default:throw new Error("unknown path command: ".concat(n))}}function La(e){return e.map(Na).join("")}function Ia(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:a;return La(a?[["M",+e+ +a,t],["l",n-2*a,0],["a",a,i,0,0,1,a,i],["l",0,r-2*i],["a",a,i,0,0,1,-a,i],["l",2*a-n,0],["a",a,i,0,0,1,-a,-i],["l",0,2*i-r],["a",a,i,0,0,1,a,-i],["z"]]:[["M",e,t],["l",n,0],["l",0,r],["l",-n,0],["z"]])}function za(e){return La(e.map((function(e,t){return[0===t?"M":"L",e.x,e.y]})))}function Ba(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return La([["M",e,t],["m",-n,0],["a",n,r,0,1,0,2*n,0],["a",n,r,0,1,0,-2*n,0],["Z"]])}function Fa(e,t,n){return Ba(e,t,n)}function Va(e,t){for(var n=[],r=0,a=e.length;a-2*!t>r;r+=2){var i=[{x:+e[r-2],y:+e[r-1]},{x:+e[r],y:+e[r+1]},{x:+e[r+2],y:+e[r+3]},{x:+e[r+4],y:+e[r+5]}];t?r?a-4===r?i[3]={x:+e[0],y:+e[1]}:a-2===r&&(i[2]={x:+e[0],y:+e[1]},i[3]={x:+e[2],y:+e[3]}):i[0]={x:+e[a-2],y:+e[a-1]}:a-4===r?i[3]=i[2]:r||(i[0]={x:+e[r],y:+e[r+1]}),n.push(["C",(-i[0].x+6*i[1].x+i[2].x)/6,(-i[0].y+6*i[1].y+i[2].y)/6,(i[1].x+6*i[2].x-i[3].x)/6,(i[1].y+6*i[2].y-i[3].y)/6,i[2].x,i[2].y])}return n}function Ua(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ua(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ua(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ha(e){for(var t,n=/([mlhvcsqtaz])/gi,r=e.replace(n," $1 ").trim().split(/[ ,]+/),a=[],i=0;i<r.length;i++){var o=r[i];n.test(o)?(t&&a.push(t),t=[o]):t.push(parseFloat(o))}return a}function Wa(e,t,n){return"string"==typeof e&&(e=Ha(e)),e.map((function(e){return function(e,t,n){switch(Array.isArray(e)&&(e=function(e){var t=L()(e),n=t[0],r=t.slice(1);switch(n.toLowerCase()){case"m":case"l":var a=M()(r,2);return{name:n,x:a[0],y:a[1]};case"a":var i=M()(r,7);return{name:n,rx:i[0],ry:i[1],xAxisRotation:i[2],largeArcFlag:i[3],sweepFlag:i[4],x:i[5],y:i[6]};case"c":var o=M()(r,6);return{name:n,x1:o[0],y1:o[1],x2:o[2],y2:o[3],x:o[4],y:o[5]};case"q":var c=M()(r,4);return{name:n,x1:c[0],y1:c[1],x:c[2],y:c[3]};default:return{name:n}}}(e)),e.name.toLowerCase()){case"m":case"l":var r=e,a=r.x,i=r.y;return qa(qa({},e),{},{x:a*t,y:i*n});case"a":var o=e,c=o.x,l=o.y,s=o.rx,u=o.ry;return qa(qa({},e),{},{x:c*t,y:l*n,rx:s*t,ry:u*n});case"c":var d=e,f=d.x1,p=d.y1,h=d.x2,m=d.y2,g=d.x,v=d.y;return qa(qa({},e),{},{x1:f*t,y1:p*n,x2:h*t,y2:m*n,x:g*t,y:v*n});case"q":var y=e,b=y.x1,k=y.y1,w=y.x,x=y.y;return qa(qa({},e),{},{x1:b*t,y1:k*n,x:w*t,y:x*n});default:return e}}(e,t,n)}))}Object.freeze({__proto__:null,parsePathString:Ma,formatPath:La,rectPath:Ia,polylinePath:za,ellipsePath:Ba,circlePath:Fa,catmullRomPath:Va,inflatePath:Ha,scalePath:Wa});function Ya(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ga(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ya(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ya(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ka=function(e){x()(n,Aa);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g()(this,n),r=Ga(Ga({},r),{},{name:"path"}),(e=t.call(this,r)).isPath=!0,e}return y()(n,[{key:"passthroughAttributeKeys",value:function(){return k()(O()(n.prototype),"passthroughAttributeKeys",this).call(this).concat(["d","marker-start","marker-end"])}},{key:"update",value:function(e){var t=e.d;Array.isArray(t)?k()(O()(n.prototype),"update",this).call(this,Ga(Ga({},e),{},{d:La(t)})):k()(O()(n.prototype),"update",this).call(this,e)}},{key:"getPath",value:function(e,t){return Wa(this.options.d,e,t)}}]),n}();function Xa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xa(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}["getPointAtLength","getTotalLength","isPointInFill","isPointInStroke"].forEach((function(e){Object.defineProperty(Ka.prototype,e,{value:function(){var t=this.rendererElement;return t[e].apply(t,arguments)}})}));var Za=function(e){x()(n,Aa);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g()(this,n),e=$a({name:"html",html:"",x:0,y:0,width:0,height:0,styleSheets:[]},e),t.call(this,e)}return y()(n,[{key:"addClass",value:function(e){this.htmlContainer.classList.add(e)}},{key:"removeClass",value:function(e){this.htmlContainer.classList.remove(e)}},{key:"passthroughAttributeKeys",value:function(){return k()(O()(n.prototype),"passthroughAttributeKeys",this).call(this).concat(["x","y","width","height"])}},{key:"create",value:function(){var e=document.createElement("div"),t=k()(O()(n.prototype),"create",this).call(this,"foreignObject");return e.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),t.appendChild(e),this.htmlContainer=e,Mr(this.htmlContainer,this.options.styleSheets),t}},{key:"update",value:function(e){e.html&&this.htmlContainer.innerHTML!==e.html&&(this.html=e.html,this.htmlContainer.innerHTML=e.html,Mr(this.htmlContainer,this.options.styleSheets)),k()(O()(n.prototype),"update",this).call(this,e)}}]),n}();var Qa=function(e){x()(n,Aa);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g()(this,n),e={name:"avatar",matrix:e.element.matrix,element:e.element},t.call(this,e)}return y()(n,[{key:"create",value:function(){return this.options.element.rendererElement.cloneNode(!0)}}]),n}();function Ja(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ei(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ja(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ja(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ti=function(e){x()(n,Aa);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g()(this,n),t.call(this,ei({name:"image",crossorigin:"anonymous",preserveAspectRatio:"none"},e))}return y()(n,[{key:"passthroughAttributeKeys",value:function(){return k()(O()(n.prototype),"passthroughAttributeKeys",this).call(this).concat(["href","x","y","width","height","crossorigin","preserveAspectRatio"])}}]),n}();function ni(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ri(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ni(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ni(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ai=function(e){x()(n,Ka);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(e){g()(this,n);var r=e.x,a=e.y,i=e.width,o=e.height,c=e.rx,l=e.ry;return t.call(this,ri(ri({},e),{},{d:Ia(r,a,i,o,c,l)}))}return y()(n,[{key:"getPath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.options,r=n.x,a=n.y,i=n.width,o=n.height,c=n.rx,l=n.ry;return Ia(r*e,a*t,i*e,o*t,Math.min(c*e,c),Math.min(l*e,l))}}]),n}();function ii(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ii(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ii(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ci=function(e){x()(n,Ka);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(e){g()(this,n);var r=e.cx,a=e.cy,i=e.rx,o=e.ry;return t.call(this,oi(oi({},e),{},{d:Ba(r,a,i,o)}))}return y()(n,[{key:"getPath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.options,r=n.cx,a=n.cy,i=n.rx,o=n.ry;return Ba(r*e,a*t,i*e,o*t)}}]),n}();function li(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function si(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?li(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):li(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ui=function(e){x()(n,ka);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g()(this,n),e=si({name:"use"},e),t.call(this,e)}return y()(n,[{key:"passthroughAttributeKeys",value:function(){return k()(O()(n.prototype),"passthroughAttributeKeys",this).call(this).concat(["x","y","width","height","href"])}}]),n}();function di(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?di(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):di(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pi=function(e){x()(n,ka);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(e){return g()(this,n),t.call(this,fi(fi({},e),{},{name:"title"}))}return y()(n,[{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title;null!=t&&(this.rendererElement.innerHTML=t)}}]),n}();function hi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hi(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gi=function(e){x()(n,ka);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(e){return g()(this,n),t.call(this,mi(mi({},e),{},{name:"text"}))}return y()(n,[{key:"update",value:function(e){k()(O()(n.prototype),"update",this).call(this,e);var t=(e||{}).text;null!=t&&(this.rendererElement.innerHTML=t)}},{key:"passthroughAttributeKeys",value:function(){return k()(O()(n.prototype),"passthroughAttributeKeys",this).call(this).concat(["dominant-baseline"])}}]),n}();function vi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vi(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var bi=function(e){x()(n,Ka);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(e){g()(this,n);var r=e.points;return t.call(this,yi(yi({},e),{},{d:za(r).concat("z")}))}return y()(n,[{key:"getPath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.options.points,r=n.map((function(n){return{x:n.x*e,y:n.y*t}}));return za(r).concat("z")}}]),n}();function ki(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ki(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ki(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xi=function(e){x()(n,_a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g()(this,n),r=wi({name:"defs",matrix:null},r),(e=t.call(this,r)).isDefs=!0,e}return n}();var _i=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Ci=function(e){x()(n,ka);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){var e;return g()(this,n),(e=t.call(this,{name:"linearGradient",matrix:null})).id=Object(I.a)(),e.rendererElement.setAttribute("id",e.id),e}return y()(n,[{key:"update",value:function(e){if("string"==typeof e){var t,n,r,a,i=this.rendererElement,o=_i.exec(e),c=(n=parseFloat(o[1]),(Math.PI/180*n%(t=2*Math.PI)+t)%t),l=o[2];c>=0&&c<.5*Math.PI?(r={x:0,y:0},a={x:1,y:1}):.5*Math.PI<=c&&c<Math.PI?(r={x:1,y:0},a={x:0,y:1}):Math.PI<=c&&c<1.5*Math.PI?(r={x:1,y:1},a={x:0,y:0}):(r={x:0,y:1},a={x:1,y:0});var s=Math.tan(c),u=s*s,d=(a.x-r.x+s*(a.y-r.y))/(u+1)+r.x,f=s*(a.x-r.x+s*(a.y-r.y))/(u+1)+r.y;i.setAttribute("x1",r.x),i.setAttribute("y1",r.y),i.setAttribute("x2",d),i.setAttribute("y2",f),i.innerHTML=function(e){var t=e.match(/[\d.]+:(#[^\s]+|[^\)]+\))/gi);if(!t)return"";var n="";return t.sort((function(e,t){return e=e.split(":"),t=t.split(":"),Number(e[0])-Number(t[0])})),t.forEach((function(e){e=e.split(":"),n+='<stop offset="'.concat(e[0],'" stop-color="').concat(e[1],'"></stop>')})),n}(l)}}}]),n}();function Ei(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ei(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ei(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Si=function(e){x()(n,_a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(e){return g()(this,n),t.call(this,Oi(Oi({},e),{},{name:"marker"}))}return y()(n,[{key:"passthroughAttributeKeys",value:function(){return k()(O()(n.prototype),"passthroughAttributeKeys",this).call(this).concat(["id","markerWidth","markerHeight","viewBox","orient","refX","refY"])}}]),n}();function Ri(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Di(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ri(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ri(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ai=function(e){x()(n,_a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g()(this,n),(e=t.call(this,Di(Di({},r),{},{name:"filter"}))).children=[],e}return y()(n,[{key:"add",value:function(e){e.parent=this,this.children.push(e),this.rendererElement.appendChild(e.rendererElement)}},{key:"destroy",value:function(){this.children.forEach((function(e){return e.destroy()})),k()(O()(n.prototype),"destroy",this).call(this)}}]),n}();function Ti(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ti(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ti(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ji=function(e){x()(n,ka);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(e){return g()(this,n),t.call(this,Pi(Pi({},e),{},{name:"feDropShadow"}))}return y()(n,[{key:"passthroughAttributeKeys",value:function(){return k()(O()(n.prototype),"passthroughAttributeKeys",this).call(this).concat(["dx","dy","stdDeviation","flood-color"])}}]),n}();function Mi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ni(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mi(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Li=function(e){x()(n,_a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(e){return g()(this,n),t.call(this,Ni(Ni({},e),{},{name:"clipPath"}))}return y()(n,[{key:"passthroughAttributeKeys",value:function(){return k()(O()(n.prototype),"passthroughAttributeKeys",this).call(this).concat(["id"])}}]),n}();Object.freeze({__proto__:null,Canvas:Oa,Group:_a,FixedGroup:Da,Shape:Aa,Path:Ka,Html:Za,Avatar:Qa,Image:ti,Defs:xi,LinearGradient:Ci,Rect:ai,Ellipse:ci,Marker:Si,Use:ui,Filter:Ai,FeDropShadow:ji,ClipPath:Li,Title:pi,Text:gi,Polygon:bi});function Ii(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ii(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ii(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Bi=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g()(this,e),Object.assign(this,zi({autoSelect:!0},t))}return y()(e,[{key:"execute",value:function(){}},{key:"forward",value:function(){}},{key:"backward",value:function(){}},{key:"select",value:function(e){var t=this.diagram;this.autoSelect&&(e&&e.length>0?t.selector.select(e):t.tryFocus())}}]),e}();l()(Bi,"className","Command"),l()(Bi,"isModelChange",!0),l()(Bi,"enable",(function(){return!0}));var Fi=function(e){x()(n,Bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.model,n=void 0===t?{}:t,r=this.cellOptions,a=_r(n,void 0===r?{}:r);a[0].forEach((function(e){e.id||(e.id=Object(I.a)())}));var i=e.add.apply(e,B()(a));i.forEach((function(t,n){Object.assign(a[1][n],e.getCellOptions(t))})),this.changeArguments=a,this.select(i)}},{key:"forward",value:function(){var e=this.diagram,t=this.changeArguments,n=e.add.apply(e,B()(t));this.select(n)}},{key:"backward",value:function(){var e=this.diagram,t=this.changeArguments,n=e.find(t[0][0].id).parent;e.remove(t[0].map((function(e){return e.id}))),this.select(n&&n.model.id)}}]),n}();l()(Fi,"className","Add");var Vi=function(e){x()(n,Bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"resetLine",value:function(){this.diagram.update(this.lineCache.map((function(e){return e.id})),this.lineCache)}},{key:"pinLine",value:function(){var e=this.diagram;this.lineCache.map((function(t){return e.find(t.id)})).filter((function(e){return e})).forEach((function(e){var t=e.source,n=e.target,r=e.diagram,a=Ma(e.wireElement.attr("d")),i={};if(r.find(t.id)||(i.source={id:null,connection:[a[0][1],a[0][2]]}),!r.find(n.id)){var o=a.length-1,c=a[o].length;i.target={id:null,connection:[a[o][c-2],a[o][c-1]]}}e.update(i)}))}},{key:"_cacheLine",value:function(){var e=this.changeArguments,t=this.diagram,n=e[0].reduce((function(e,n){return t.find(n.id).getAllCells().forEach((function(t){e[t.model.id]=!0})),e}),{});this.lineCache=t.getCells().filter((function(e){return e.isLine&&(n[e.model.target.id]||n[e.model.source.id])})).map((function(e){var t=e.model,n={id:t.id};return n.target=f()(t.target),n.target.connection||(n.target.connection=null),n.source=f()(t.source),n.source.connection||(n.source.connection=null),n}))}},{key:"selectParent",value:function(){var e=this.diagram,t=this.changeArguments,n=e.find(t[0][0].id).parent;this.select(n&&n.model.id)}},{key:"selectNearest",value:function(){var e=this.diagram,t=this.changeArguments,n=e.find(t[0][0].id),r=n.parent;if(t[0].length>1&&r)return this.select(r.model.id);if(1===t[0].length&&r){if(r.model.children){var a=n.getLastSibling();if(a)return this.select([a]);var i=n.getNextSibling();if(i)return this.select([i])}return this.select(r.model.id)}return e.selector.clear()}},{key:"execute",value:function(){var e=this.diagram,t=_r(this.id,{}),n=t[0].map((function(t){return e.find(t)}));n.forEach((function(n,r){t[0][r]=f()(n.model),t[1][r]=e.getCellOptions(n)})),this.changeArguments=t,this._cacheLine(),this.selectNearest(),e.remove(n),this.pinLine()}},{key:"forward",value:function(){var e=this.diagram,t=this.changeArguments;this.selectNearest(),e.remove(t[0].map((function(e){return e.id}))),e.tryFocus(),this.pinLine()}},{key:"backward",value:function(){var e=this.diagram,t=this.changeArguments,n=e.add.apply(e,B()(t));this.resetLine(),this.select(n),e.tryFocus()}}]),n}();l()(Vi,"className","Remove");var Ui=function(e){x()(n,Bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"getCells",value:function(){var e=this.changeArguments,t=this.diagram,n=e[0].map((function(e){return t.find(e)}));if(n.some((function(e){return!e})))throw new Error("can not find the cell");return n}},{key:"execute",value:function(){var e=this.diagram,t=this.model,n=this.cellOptions,r=void 0===n?{}:n,a=this.id;Array.isArray(a)&&"object"===P()(a[0])&&(a=a.map((function(e){return e.model.id})));var i=_r(a,t,r);this.changeArguments=i;var o=this.getCells(),c=i[1];this.originModels=o.map((function(e,t){var n=e.model;return Object.keys(n).reduce((function(e,r){if("children"===r)return e;var a=n[r],i=o[t].model[r];return u()(a)?e[r]=Object.keys(a).reduce((function(e,t){var n=i&&i[t];return e[t]=null==n?null:n,e}),{}):e[r]=null==i?null:i,e}),{})})),this.originCellOptions=o.map((function(t){return e.getCellOptions(t)}));for(var l=0;l<c.length;l++)Ir(this.originModels[l],c[l]);e.update(o,c,i[2]),this.select(o)}},{key:"forward",value:function(){var e=this.diagram,t=this.changeArguments,n=this.getCells(),r=t[1];e.update(n,r,t[2]),this.select(n)}},{key:"backward",value:function(){var e=this.diagram,t=this.originModels,n=this.originCellOptions,r=this.getCells();e.update(r,t,n),this.select(r)}}]),n}();l()(Ui,"className","Update");var qi=function(e){x()(n,Bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){var e=this.commands,t=e.length;e.forEach((function(e,n){e.autoSelect=n===t-1,e.execute()}))}},{key:"forward",value:function(){var e=this.commands,t=e.length;e.forEach((function(e,n){e.autoSelect=n===t-1,e.forward()}))}},{key:"backward",value:function(){for(var e=this.commands,t=e.length-1;t>=0;t--){var n=e[t];n.autoSelect=0===t,n.backward()}}}]),n}();l()(qi,"className","Compound");var Hi=function(e){x()(n,qi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){}}]),n}();l()(Hi,"className","NoneExecuteCompound");var Wi=function(e){x()(n,Bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){var e=this.diagram,t=e.selector.selections,n=e.deduplicate(t).filter((function(e){return e.canCollapse()}));e.update(n,{collapsed:!0}),e.selector.select(n),this.cells=n.map((function(e){return e.model.id}))}},{key:"backward",value:function(){var e=this.diagram,t=this.cells;e.update(t,{collapsed:null}),e.selector.select(t)}},{key:"forward",value:function(){var e=this.diagram,t=this.cells;e.update(t,{collapsed:!0}),e.selector.select(t)}}]),n}();l()(Wi,"className","Collapse"),l()(Wi,"enable",(function(e){var t=e.selector.selections;return e.deduplicate(t).some((function(e){return e.canCollapse()}))}));var Yi=function(e){x()(n,Bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){var e=this.diagram,t=e.selector.selections,n=e.deduplicate(t).filter((function(e){return e.canExpand()}));e.update(n,{collapsed:null}),e.selector.select(n),this.cells=n.map((function(e){return e.model.id}))}},{key:"backward",value:function(){var e=this.diagram,t=this.cells;e.update(t,{collapsed:!0}),e.selector.select(t)}},{key:"forward",value:function(){var e=this.diagram,t=this.cells;e.update(t,{collapsed:null}),e.selector.select(t)}}]),n}();l()(Yi,"className","Expand"),l()(Yi,"enable",(function(e){var t=e.selector.selections,n=e.deduplicate(t);return n.every((function(e){return!e.canCollapse()}))&&n.some((function(e){return e.canExpand()}))}));var Gi=function(e){x()(n,Bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(e){var r;return g()(this,n),(r=t.call(this,e)).queue=!1,r}return y()(n,[{key:"execute",value:function(){this.diagram.command.undo()}}]),n}();l()(Gi,"className","Undo"),l()(Gi,"enable",(function(e){return e.command.index>=0}));var Ki=function(e){x()(n,Bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(e){var r;return g()(this,n),(r=t.call(this,e)).queue=!1,r}return y()(n,[{key:"execute",value:function(){this.diagram.command.redo()}}]),n}();l()(Ki,"className","Redo"),l()(Ki,"enable",(function(e){var t=e.command;return t.index<t.commands.length-1}));var Xi=function(e){x()(n,Bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(e){var r;return g()(this,n),(r=t.call(this,e)).queue=!1,r}return y()(n,[{key:"execute",value:function(){var e=this.diagram.viewport;e.setViewport(e.zoom+.2)}}]),n}();l()(Xi,"className","ZoomIn"),l()(Xi,"isModelChange",!1),l()(Xi,"enable",(function(e){var t=e.viewport;return t.zoom+.2<=t.maxZoom}));var $i=function(e){x()(n,Bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(e){var r;return g()(this,n),(r=t.call(this,e)).queue=!1,r}return y()(n,[{key:"execute",value:function(){var e=this.diagram.viewport;e.setViewport(e.zoom-.2)}}]),n}();l()($i,"className","ZoomOut"),l()($i,"isModelChange",!1),l()($i,"enable",(function(e){var t=e.viewport;return t.zoom-.2>=t.minZoom}));var Zi=function(e){x()(n,Bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(e){var r;g()(this,n),r=t.call(this,e);var a=R()(r).diagram.viewport;return r.queue=!1,r.zoom=e.zoom<a.minZoom&&a.minZoom||e.zoom>a.maxZoom&&a.maxZoom||e.zoom,r}return y()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.zoom;e.viewport.setViewport(t)}}]),n}();l()(Zi,"className","ZoomTo"),l()(Zi,"isModelChange",!1);var Qi={"line-height":!0,"font-size":!0,"text-decoration-line":!0,"font-weight":!0,"font-style":!0,"text-align":!0,"text-decoration":!0,color:!0},Ji=Object.freeze({__proto__:null,INLINE_STYLE:Qi,EMPTY_TEXT:"&#8203;",SELECTED_STROKE_COLOR:"#096DD9",LOCKED_STROKE_COLOR:"#979797",DEFAULT_FONT_COLOR:"#262626",MULTI_SELECTED_FRAME_FILL:"rgba(9, 109, 217, .05)",LOCAL_STORAGE_CLIPBOARD_DATA_KEY:"lake_diagram_clipboard_data"});function eo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function to(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eo(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function no(e,t){t.importer.caches={};var n=t.selector.selections;if(0!==n.length){e.preventDefault();var r=t.exporter.clipboard(n);e.clipboardData.setData("text/html",r.html),e.clipboardData.setData("text/plain",r.text),o.LocalStorageUtil.setItem("lake_diagram_clipboard_data",JSON.stringify(to(to({},r),{},{recordTime:Date.now()})))}}var ro,ao=function(e){x()(n,Bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g()(this,n),t.call(this,to({queue:!1},e))}return y()(n,[{key:"execute",value:function(){no(this.e,this.diagram)}}]),n}();l()(ao,"className","Copy"),l()(ao,"isModelChange",!1);var io=function(e){x()(n,Bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){var e=this,t=this.diagram,n=this.e,r=n.clipboardData.getData("text/html"),a=n.clipboardData.getData("text/plain"),i=Array.from(n.clipboardData.files),o={text:a,html:r};i.length>0&&(""===r&&/^.+\.\w+$/.test(a)||""===a&&/^(<meta.+?>)?<img.+?>$/.test(r)||!a||!r)&&(o.files=i);var c=t.importer.clipboard(o);c?(this.result=c,u()(c)&&(this.selectedCellId=t.selector.selections.map((function(e){return e.model.id})),ro&&clearTimeout(ro),ro=setTimeout((function(){t.destroyed||t.selector.select(e.result.body.map((function(e){return e.id})))}),16))):this.queue=!1}},{key:"forward",value:function(){var e=this.result,t=this.diagram;e&&(e.execute(),t.selector.select(this.result.body.map((function(e){return e.id}))))}},{key:"backward",value:function(){var e=this.result,t=this.diagram,n=this.selectedCellId;e&&(e.body.forEach((function(e){t.remove(e.id)})),n&&t.selector.select(n))}}]),n}();l()(io,"className","Paste");var oo=function(e){x()(n,Vi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){var e=this.diagram,t=e.deduplicate(e.selector.selections);this.id=t.filter((function(e){return e.canDelete()})).map((function(e){return e.model.id})),k()(O()(n.prototype),"execute",this).call(this)}}]),n}();l()(oo,"className","Delete"),l()(oo,"enable",(function(e){return e.selector.selections.filter((function(e){return e.canDelete()})).length>0}));var co=function(e){x()(n,oo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){no(this.e,this.diagram),k()(O()(n.prototype),"execute",this).call(this)}}]),n}();l()(co,"className","Cut"),l()(co,"isModelChange",!0);var lo=function(e){x()(n,Bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.call(this,{queue:!1})}return y()(n,[{key:"execute",value:function(){var e=this.diagram,t=e.selector.selections[0];e.command.execute("ZoomTo",{zoom:1}),e.viewport.focus([t.x,t.y])}}]),n}();l()(lo,"className","FocusSelection"),l()(lo,"enable",(function(e){return 1===e.selector.selections.length}));var so=function(e){x()(n,Bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.id,n=this.endHTML,r={html:n};Array.isArray(n)&&(r=n.map((function(e){return{html:e}}))),e.update(t,r)}},{key:"forward",value:function(){var e=this.diagram,t=this.endHTML,n=this.id,r={html:t};Array.isArray(t)&&(r=t.map((function(e){return{html:e}}))),e.update(n,r),this.select(n)}},{key:"backward",value:function(){var e=this.diagram,t=this.id,n=this.startHTML,r={html:n};Array.isArray(n)&&(r=n.map((function(e){return{html:e}}))),e.update(t,r),this.select(t)}}]),n}();l()(so,"className","UpdateCellContent");var uo=function(e){x()(n,Bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(e){var t=this.diagram,n=this.cells,r=n.map((function(e){return e.model.id})),a=n.map((function(e){return t.getCellOptions(e)}));n.forEach((function(t){t[e]()}));var i=n.map((function(e){return t.getCellOptions(e)}));this.beforeCellOptions=a,this.afterCellOptions=i,this.id=r,this.select(r)}},{key:"backward",value:function(){var e=this.diagram,t=this.id,n=this.beforeCellOptions;e.update(t,{},n),this.select(t)}},{key:"forward",value:function(){var e=this.diagram,t=this.id,n=this.afterCellOptions;e.update(t,{},n),this.select(t)}}]),n}();l()(uo,"className","ZIndex");var fo=function(e){x()(n,uo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){k()(O()(n.prototype),"execute",this).call(this,"toBack")}}]),n}();l()(fo,"className","ToBack");var po=function(e){x()(n,uo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){k()(O()(n.prototype),"execute",this).call(this,"toFront")}}]),n}();l()(po,"className","ToFront");var ho=function(e){x()(n,uo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){k()(O()(n.prototype),"execute",this).call(this,"forward")}}]),n}();l()(ho,"className","Forward");var mo=function(e){x()(n,uo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){k()(O()(n.prototype),"execute",this).call(this,"backward")}}]),n}();l()(mo,"className","Backward");var go={locale:o.LocaleUtil.getLocale(),translations:{"en-us":{"保存":"Save","分支线条宽度逐渐变细":"Tapered line","分支颜色":"Line Color","双击画布快速添加":"Double click to directly add","展开节点":"Expand topic","布局":"Layout","彩虹分支":"Multi-colored lines","手动设置节点宽度":"Fixed size","折叠节点":"Collapse topic","插入主节点":"Insert root topic","插入同级节点":"Insert topic","插入图片":"Insert image","插入子节点":"Insert subtopic","插入链接":"Insert link","撤销":"Undo","文本":"Text","新建节点":"New Node","思维导图":"Mindmap","无颜色":"No color","背景颜色":"Background color","节点形状":"Topic shape","设置面板":"Properties","边框颜色":"Border color","重做":"Redo","链接":"Link","样式":"Styles","过程":"Process","起止符":"Terminator","决策":"Decision","整理":"Collate","数据":"Data","数据库":"Storage","延迟":"Delay","显示":"Display","文档":"Document","内部存储":"Internal Storage","循环起止符":"Loop Limit","手动输入":"Manual Input","手动循环":"Manual loop","合并":"Merge","多文档":"Multi Document","页外连接符":"Off-page Connector","连接器":"Connector","汇总连接":"Summing Junction","预定义流程":"Predefined Process","准备":"Preparation","排序":"Sort","存储数据":"Stored Data","或者":"Or","标注":"Comment","线条粗细":"Line Width","线条颜色":"Line Color","线条端点":"Line Endpoint","线条类型":"Line Shape","形状":"Shape","置顶":"Front","置底":"Back","前进":"Forward","后退":"Backward","排列":"Arrange","填充":"Fill","线条/边框":"Line/Border","线条":"Line","边框":"Border","分支":"Branch Line","结构":"Structure","幻灯片布局":"Slide layout","背景":"Background","格式面板":"Format panel","格式":"Format","回到中心":"Fit Page","适应画布":"Reset View","填充颜色":"Fill","文本颜色":"Font color","节点":"Node","点击选中元素":"Click on the selected element","可设置颜色、布局、文字等样式":"Can set color, layout, text and other styles","大标题":"Title","小标题":"Title small","副标题":"Subtitle","正文":"Text","保持宽高比":"Constrain proportions","原始大小":"Original size","宽度":"Width","高度":"Height","手动设置节点尺寸":"Custom size","大小":"Size","矩形":"Rectangle","圆角矩形":"Rounded Rectangle","圆形":"Circle","三角形":"Triangle","菱形":"Diamond","标注 2":"Annotation 2","平行四边形":"Parallelogram","星形":"Star","左箭头":"Arrow 1","右箭头":"Arrow 2","双向箭头":"Arrow 3","五边形":"Polygon","基础形状":"Basic","流程图":"Flowchart","上移":"Forward","下移":"Backward","水平分布":"Horizontally","垂直分布":"Vertically","旋转角度":"Rotate angle","不透明度":"Opacity","位置":"Position","旋转":"Rotate","线条样式":"Line style","连接线":"Line","图片上传中，请稍后":"Image uploading, please wait","图片上传中，请稍候":"","插入同级":"Insert sibling","插入子级":"Insert child","备注":"Note","折叠":"Collapse","剪切":"Cut","复制":"Copy","复制为其它格式":"Copy to other formats","语雀文档":"Yuque document","语雀表格":"Yuque table","粘贴":"Paste","展开":"Expand","插入父级":"Insert parent","实际尺寸":"Actual size","删除":"Delete","删除单个节点":"Delete a single node","插入连线":"Inset line","编辑文本":"Edit text","已粘贴当前页面复制的内容，如需粘贴页面外内容请使用 ":"The copied content of the current page has been pasted. If you need to paste the content outside the page, please use"," 粘贴":" paste","复制成功！":"Copy successfully!","复制失败！":"Copy failed!","剪切成功！":"Cut successfully!","剪切失败！":"Cut failed!","粘贴失败！":"Paste failed!","边框粗细":"Border thickness","分支类型":"Branch type"}}};function vo(e,t){if(!e)return e;var n=go.locale,r=go.translations[n]||{};return"zh-cn"!==n&&(e=r[e]||e),e.replace(/\{([^\}]+)\}/g,(function(e,n){return t[n]||n}))}var yo=function(e){x()(n,Bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(e){var r;return g()(this,n),(r=t.call(this,e)).queue=!1,r}return y()(n,[{key:"execute",value:function(){this.diagram.contentEditor.execCommand("createLink",vo("链接"))}}]),n}();l()(yo,"className","CreateLink"),l()(yo,"enable",(function(e){var t=e.getCell(e.contentEditor.dom);return e.contentEditor.getRange()&&t}));var bo=function(e){x()(n,Bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){this.diagram.viewport.autoFit()}}]),n}();l()(bo,"className","FitViewport"),l()(bo,"isModelChange",!1);var ko=function(e){x()(n,Ui);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.locked,r=e.selector.selections.filter((function(e){return e.isVertex})).map((function(e){return e.model}));this.id=r.map((function(e){return e.id})),this.model={locked:t},k()(O()(n.prototype),"execute",this).call(this)}}],[{key:"enable",value:function(e){return e.selector.selections.some((function(e){return e.isVertex}))}}]),n}();l()(ko,"className","LockSelected");var wo=function(e){x()(n,Ui);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"cellsAlign",value:function(){}},{key:"paperAlign",value:function(){}},{key:"_getTranslateLineModel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return{target:{connection:[e.target.connection[0]+t,e.target.connection[1]+n]},source:{connection:[e.source.connection[0]+t,e.source.connection[1]+n]}}}},{key:"_getAlignCells",value:function(e){return e.filter((function(e){return e.canMove()}))}},{key:"_getAlignCellPoints",value:function(e){var t=[];return e.forEach((function(e){var n=[];if(e.isLine){var r=e.target,a=e.source;n.push([r.connection[0],r.connection[1]]),n.push([a.connection[0],a.connection[1]])}else{var i=e.getAbsBBox();n.push([i.minX,i.minY]),n.push([i.maxX,i.maxY])}n.push([(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]),t.push(n)})),t}},{key:"execute",value:function(){var e=this.diagram,t=e.selector.selections.concat([]);if(t.length>1){var r=this._getAlignCells(t),a=this._getAlignCellPoints(r),i=this.cellsAlign(r,a);this.id=r,this.model=i,this.selectedIds=t.map((function(e){return e.model.id}))}else if(1===t.length){var o=this._getAlignCellPoints(t),c=this.paperAlign(t[0],o[0],e.viewport.paperBox);this.id=t[0].model.id,this.model=c,this.selectedIds=t.map((function(e){return e.model.id}))}k()(O()(n.prototype),"execute",this).call(this)}},{key:"select",value:function(){k()(O()(n.prototype),"select",this).call(this,this.selectedIds)}}]),n}();l()(wo,"className","Align"),l()(wo,"enable",(function(e){var t=e.selector.selections.filter((function(e){return!e.locked}));return t.length>1||1===t.length&&e.paper.visible}));var xo=function(e){x()(n,wo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"paperAlign",value:function(e,t,n){var r;if(e.isLine){var a=n.bottom-Math.max.apply(Math,B()(t.map((function(e){return e[1]}))));r=this._getTranslateLineModel(e,0,a)}else r={y:n.bottom-e.height};return r}},{key:"cellsAlign",value:function(e,t){var n=this,r=t.reduce((function(e,t){return e.concat(t)}),[]),a=Math.max.apply(Math,B()(r.map((function(e){return e[1]})))),i=[];return e.forEach((function(e,r){var o=t[r];if(e.isLine){var c=a-Math.max.apply(Math,B()(o.map((function(e){return e[1]}))));i.push(n._getTranslateLineModel(e,0,c))}else{var l=o[1][1]-a;i.push({y:e.y-l})}})),i}}]),n}();l()(xo,"className","AlignBottom");var _o=function(e){x()(n,wo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"paperAlign",value:function(e,t,n){var r,a=(n.left+n.right)/2;if(e.isLine){var i=a-t[2][0];r=this._getTranslateLineModel(e,i,0)}else r={x:a-e.width/2};return r}},{key:"cellsAlign",value:function(e,t){var n=this,r=t.reduce((function(e,t){return e.concat([t[2]])}),[]).map((function(e){return e[0]})),a=(Math.max.apply(Math,B()(r))+Math.min.apply(Math,B()(r)))/2,i=[];return e.forEach((function(e,r){var o=t[r];if(e.isLine){var c=a-o[2][0];i.push(n._getTranslateLineModel(e,c,0))}else{var l=o[2][0]-a;i.push({x:e.x-l})}})),i}}]),n}();l()(_o,"className","AlignHCenter");var Co=function(e){x()(n,wo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"paperAlign",value:function(e,t,n){var r;if(e.isLine){var a=n.left-Math.min.apply(Math,B()(t.map((function(e){return e[0]}))));r=this._getTranslateLineModel(e,a,0)}else r={x:n.left};return r}},{key:"cellsAlign",value:function(e,t){var n=this,r=t.reduce((function(e,t){return e.concat(t)}),[]),a=Math.min.apply(Math,B()(r.map((function(e){return e[0]})))),i=[];return e.forEach((function(e,r){var o=t[r];if(e.isLine){var c=a-Math.min.apply(Math,B()(o.map((function(e){return e[0]}))));i.push(n._getTranslateLineModel(e,c,0))}else{var l=o[0][0]-a;i.push({x:e.x-l})}})),i}}]),n}();l()(Co,"className","AlignLeft");var Eo=function(e){x()(n,wo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"paperAlign",value:function(e,t,n){var r;if(e.isLine){var a=n.right-Math.max.apply(Math,B()(t.map((function(e){return e[0]}))));r=this._getTranslateLineModel(e,a,0)}else r={x:n.right-e.width};return r}},{key:"cellsAlign",value:function(e,t){var n=this,r=t.reduce((function(e,t){return e.concat(t)}),[]),a=Math.max.apply(Math,B()(r.map((function(e){return e[0]})))),i=[];return e.forEach((function(e,r){var o=t[r];if(e.isLine){var c=a-Math.max.apply(Math,B()(o.map((function(e){return e[0]}))));i.push(n._getTranslateLineModel(e,c,0))}else{var l=o[1][0]-a;i.push({x:e.x-l})}})),i}}]),n}();l()(Eo,"className","AlignRight");var Oo=function(e){x()(n,wo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"paperAlign",value:function(e,t,n){var r;if(e.isLine){var a=n.top-Math.min.apply(Math,B()(t.map((function(e){return e[1]}))));r=this._getTranslateLineModel(e,0,a)}else r={y:n.top};return r}},{key:"cellsAlign",value:function(e,t){var n=this,r=t.reduce((function(e,t){return e.concat(t)}),[]),a=Math.min.apply(Math,B()(r.map((function(e){return e[1]})))),i=[];return e.forEach((function(e,r){var o=t[r];if(e.isLine){var c=a-Math.min.apply(Math,B()(o.map((function(e){return e[1]}))));i.push(n._getTranslateLineModel(e,0,c))}else{var l=o[0][1]-a;i.push({y:e.y-l})}})),i}}]),n}();l()(Oo,"className","AlignTop");var So=function(e){x()(n,wo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"paperAlign",value:function(e,t,n){var r,a=(n.bottom+n.top)/2;if(e.isLine){var i=a-t[2][1];r=this._getTranslateLineModel(e,0,i)}else r={y:a-e.height/2};return r}},{key:"cellsAlign",value:function(e,t){var n=this,r=t.reduce((function(e,t){return e.concat([t[2]])}),[]).map((function(e){return e[1]})),a=(Math.max.apply(Math,B()(r))+Math.min.apply(Math,B()(r)))/2,i=[];return e.forEach((function(e,r){var o=t[r];if(e.isLine){var c=a-o[2][1];i.push(n._getTranslateLineModel(e,0,c))}else{var l=o[2][1]-a;i.push({y:e.y-l})}})),i}}]),n}();function Ro(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Do(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ro(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ro(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}l()(So,"className","AlignVCenter");var Ao=function(e){x()(n,Bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(e){var r;return g()(this,n),(r=t.call(this,e)).queue=!1,r.onBeginInsertLine=function(e){if(r.sourceCell){var t=R()(r),n=t.diagram,a=t.beginInsertEvent,i=n.viewport.invertClient([e.clientX,e.clientY]);n.emit("begininsertline",{source:{id:r.sourceCell.model.id,connection:null},target:{id:null,connection:[i[0],i[1]]}}),n.off(a,r.onBeginInsertLine)}},r}return y()(n,null,[{key:"enable",value:function(){return!0}}]),y()(n,[{key:"bindBegineInsertEvent",value:function(){var e=this.diagram,t=this.sourceCell,n=this.beginInsertEvent;e.off(n,this.onBeginInsertLine),t&&e.on(n,this.onBeginInsertLine)}},{key:"execute",value:function(){var e=this.diagram,t=this.html,n=this.shape,r=this.marker,a=this.beginInsertEvent,i=e.selector.selections;1!==i.length||i[0].isLine?e.selector.clear():(this.sourceCell=i[0],a="mousemove"),e.contentEditor.unbind(),e.tryFocus(),e.interaction.changeMode("beginInsetLine"),e.settings.default=Do(Do({},e.settings.default),{},{line:{shape:n,marker:r,html:t||'<div style="text-align: center;">'.concat("&#8203;","</div>")}}),this.beginInsertEvent=a,this.beginInsertEvent&&this.bindBegineInsertEvent()}}]),n}();function To(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Po(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?To(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):To(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}l()(Ao,"className","BeginInsertLine"),l()(Ao,"isModelChange",!1);var jo=function(e){x()(n,Ui);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"_getModel",value:function(e,t){if(e.isVertex)return t;var n=e.source,r=e.target,a=t.x,i=t.y;return{source:{connection:[null==a?n.connection[0]:a,null==i?n.connection[1]:i]},target:{connection:[null==a?r.connection[0]:r.connection[0]-n.connection[0]+a,null==i?r.connection[1]:r.connection[1]-n.connection[1]+i]}}}},{key:"_distributeCells",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"horizontally",t=this.diagram,n="horizontally"===e,r=t.selector.selections.filter((function(e){return e.canMove()})),a=r.map((function(e){if(e.isLine){var t=M()(e.source.connection,2),n=t[0],r=t[1],a=M()(e.target.connection,2),i=a[0],o=a[1];return{cell:e,minX:Math.min(n,i),minY:Math.min(r,o),maxX:Math.max(n,i),maxY:Math.max(r,o)}}return Po({cell:e},e.getAbsBBox())})),i=n?"minX":"minY";a.sort((function(e,t){return e[i]-t[i]}));for(var o=a[0],c=a[a.length-1],s=n?c.minX-o.maxX:c.minY-o.maxY,u=0,d=1;d<a.length-1;d++){var f=a[d],p=f.minX,h=f.minY,m=f.maxX,g=f.maxY;u+=n?m-p:g-h}for(var v=(s-u)/(a.length-1),y=[],b=[],k=a[0][n?"minX":"minY"],w=1;w<r.length-1;w++){var x=a[w],_=a[w-1],C=x.cell,E=_.maxX-_.minX,O=_.maxY-_.minY;k+=(n?E:O)+v;var S=this._getModel(C,l()({},n?"x":"y",k));b.push(C.model.id),y.push(S)}this.id=b,this.model=y,this.selectedIds=r.map((function(e){return e.model.id}))}},{key:"select",value:function(){k()(O()(n.prototype),"select",this).call(this,this.selectedIds)}}],[{key:"enable",value:function(e){return e.selector.selections.filter((function(e){return e.canMove()})).length>=3}}]),n}();var Mo=function(e){x()(n,jo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){this._distributeCells("horizontally"),k()(O()(n.prototype),"execute",this).call(this)}}]),n}();l()(Mo,"className","DistributeHorizontally");var No=function(e){x()(n,jo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){this._distributeCells("vertically"),k()(O()(n.prototype),"execute",this).call(this)}}]),n}();l()(No,"className","DistributeVertically");var Lo=function(e){x()(n,Bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(e){var r;return g()(this,n),(r=t.call(this,e)).queue=!1,r}return y()(n,[{key:"execute",value:function(){var e=this.diagram;e.selector.select(e.getCells().filter((function(e){return e.state.visible})))}}]),n}();l()(Lo,"className","SelectAll"),l()(Lo,"isModelChange",!1);var Io=function(e){x()(n,Bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(e){var r;return g()(this,n),(r=t.call(this,e)).queue=!1,r}return y()(n,[{key:"execute",value:function(){this.diagram.viewport.setViewport(1)}}]),n}();l()(Io,"className","ActualSize"),l()(Io,"isModelChange",!1);var zo=function(e){x()(n,Bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(e){var r;return g()(this,n),(r=t.call(this,e)).queue=!1,r}return y()(n,null,[{key:"enable",value:function(e){var t=e.selector.selections;return 1===t.length&&t.every((function(e){return e.textAreaElement}))}}]),y()(n,[{key:"execute",value:function(){var e=this.diagram,t=e.selector.selections[0];e.contentEditor.prepareEdit(),e.contentEditor.beginEdit(),e.update(t,{})}}]),n}();function Bo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bo(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}l()(zo,"className","BeginEditContent"),l()(zo,"isModelChange",!1);var Vo=function(){function e(t){g()(this,e),this.index=-1,this.commands=[],this.diagram=t,this.commandConstructors={ToBack:fo,ToFront:po,Forward:ho,Backward:mo,Add:Fi,Remove:Vi,Update:Ui,Compound:qi,NoneExecuteCompound:Hi,Collapse:Wi,Expand:Yi,Undo:Gi,Redo:Ki,ZoomIn:Xi,ZoomOut:$i,ZoomTo:Zi,ActualSize:Io,FitViewport:bo,Delete:oo,UpdateCellContent:so,FocusSelection:lo,Copy:ao,Paste:io,Cut:co,CreateLink:yo,LockSelected:ko,AlignBottom:xo,AlignHCenter:_o,AlignLeft:Co,AlignRight:Eo,AlignTop:Oo,AlignVCenter:So,BeginInsertLine:Ao,DistributeHorizontally:Mo,DistributeVertically:No,SelectAll:Lo,BeginEditContent:zo}}return y()(e,[{key:"find",value:function(e){var t=this.diagram;return!e||t&&t.destroyed?null:"string"==typeof e?this.commandConstructors[e]:e.constructor}},{key:"enable",value:function(e){var t=this.find(e);return t&&(!t.enable||t.enable(this.diagram))||!1}},{key:"register",value:function(e){this.commandConstructors[e.className]=e}},{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new this.commandConstructors[e](Fo({diagram:this.diagram},t))}},{key:"execute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.diagram;if(!n||!n.destroyed){"string"==typeof e&&(e=this.create(e,t));var r=e.constructor.className,a={commandName:r};return n&&n.emit("beforecommandexecute",a),this.enable(e)&&!0!==a.prevent&&(e.execute(),!1!==e.queue&&(this.index>-1?this.commands=this.commands.slice(0,this.index+1):this.commands=[],this.commands.push(e),this.index=this.commands.indexOf(e)),a.isModelChange=e.constructor.isModelChange,n&&n.emit("aftercommandexecute",a)),e}}},{key:"redo",value:function(){var e=this.index,t=this.commands;e>=t.length-1||(t[++e].forward(),this.index=e)}},{key:"undo",value:function(){var e=this.index,t=this.commands;e<0||(t[e].backward(),this.index=--e)}},{key:"destroy",value:function(){this.commands=void 0}}]),e}();l()(Vo,"className","Command");var Uo=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g()(this,e),this.onKey="on",this.offKey="off",Object.assign(this,t),this.events=[]}return y()(e,[{key:"bind",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e===window||e instanceof HTMLElement||e instanceof SVGElement?"addEventListener":r.onKey)||this.onKey;e[a](t,n);var i={object:e,eventName:t,callback:n,options:r};return this.events.push(i),i}},{key:"_unbind",value:function(e){var t=e.object,n=e.eventName,r=e.callback,a=e.options;if(t[(t===window||t instanceof HTMLElement||t instanceof SVGElement?"removeEventListener":a.offKey)||this.offKey](n,r),this.events){var i=this.events.indexOf(e);-1!==i&&this.events.splice(i,1)}}},{key:"unbind",value:function(e){var t=this;e?this._unbind(e):this.events.concat([]).forEach((function(e){t._unbind(e)}))}},{key:"destroy",value:function(){this.events&&this.unbind(),this.events=void 0}}]),e}(),qo=new U.a.FilterXSS({css:{whiteList:Qi},whiteList:{p:["style","id"],a:["href","title","target"],b:["style"],i:["style"],span:["style"],br:[],div:["style"]}});function Ho(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wo(e){var t=(new DOMParser).parseFromString(e,"text/html").querySelector("[data-lake_diagram_body]");return!!t&&{body:JSON.parse(t.dataset.lake_diagram_body),extraInformations:JSON.parse(t.dataset.lake_extra_informations||t.dataset.lake_computed_props_map)||{},optionsMap:{}}}function Yo(e){return e.replace(/[\u00A0-\u9999<>\&]/gim,(function(e){return"&#"+e.charCodeAt(0)+";"}))}function Go(e){return e&&(e=qo.process(e)),"&#8203;"!==Yo(e)&&(e=e.replace(/[\u200B-\u200D\uFEFF]/g,"")),e||""}function Ko(e){try{var t,n,r,a,i,o,c=e.trim().split("\n"),l=[],s=0,u=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ho(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ho(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}(c);try{for(u.s();!(o=u.n()).done;)if(0!==(a=o.value).trim().length){var d=(a=a.replace(decodeURI("%0D"),"")).match(/^(\s*)([\S].*)$/),f=M()(d,3),p=f[1],h=f[2];!i&&p&&t&&(i=p.length);var m=p.length/i;if(m)if(m>s)n=r,r={html:h},n.children=[r],s+=1;else if(m===s)r={html:h},n.children.push(r);else{var g=0;for(n=t;g<m-1;)n=n.children[n.children.length-1],g++;r={html:h},s=m,n.children.push(r)}else t=n=r={html:h},l.push(t)}}catch(e){u.e(e)}finally{u.f()}return l}catch(e){return null}}Object.freeze({__proto__:null,getLakeDataByHtml:Wo,toHTMLCharacters:Yo,parseHTML:Go,structuredPlainText:Ko});function Xo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xo(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zo(e,t){return e.nodeType===Node.ELEMENT_NODE&&(e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector).call(e,t)}function Qo(e,t,n){for(;e&&n.contains(e);){if("string"==typeof t&&Zo(e,t)||"function"==typeof t&&t(e))return e;e=e.parentNode}return null}function Jo(e,t){var n=e.getAttribute("style");return n&&n.includes(t)}function ec(e){for(var t=e.firstChild;t;){var n=t.nextSibling;e.parentNode.insertBefore(t,e),t=n}e.parentNode.removeChild(e)}function tc(e){return!(e.altKey||e.ctrlKey||e.metaKey||["Enter","Tab","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Capslock","Esc","Home","Pause","Shift","Option","Alt","Help","Esc","Backspace","Delete","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12"].includes(e.key))}function nc(e,t){if(t&&t.childNodes[0]&&1===t.childNodes[0].nodeType){for(var n=t.childNodes[0];n&&1===n.nodeType&&n.tagName!==e&&n.tagName!==e;)n=n.childNodes[0];if(n&&n.tagName===e)return n}return e===t.tagName&&t||null}function rc(e,t,n,r){var a=function(e,t){if(!e)return{};var n=window.getComputedStyle(e),r=n["text-align"],a=parseInt(n["font-size"]),i=n.color;return{textAlign:r,fontSize:t.fontSize?t.fontSize.value:a,color:t.foreColor?t.foreColor.value:i}}(e,n),i=function(e,t,n){if(!e)return{};var r=window.getComputedStyle(e),a=parseInt(r["font-size"]),i=r.color;return{bold:t.bold?!t.bold.cancel:!!Qo(e,(function(e){return Jo(e,"bold")}),n),italic:t.italic?!t.italic.cancel:!!Qo(e,(function(e){return Jo(e,"italic")}),n),strikethrough:t.strikethrough?!t.strikethrough.cancel:!!Qo(e,(function(e){return Jo(e,"line-through")}),n),underline:t.underline?!t.underline.cancel:!!Qo(e,(function(e){return Jo(e,"underline")}),n),fontSize:t.fontSize?t.fontSize.value:a,color:t.foreColor?t.foreColor.value:i}}(t,n,r);return $o($o({bold:!1,italic:!1,strikethrough:!1,underline:!1},a),i)}function ac(e,t){var n,r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)return{};if(t){var i=t.startContainer;if(i===e)n=nc("SPAN",e),r=nc("DIV",e);else{var o=Qo(i,(function(e){return 1===e.nodeType}),e);n=o,r=o}}else n=nc("SPAN",e),r=nc("DIV",e);return rc(r,n,a,e)}function ic(e){if(e.preventDefault(),this.isBegin){e.stopPropagation();var t=e.clipboardData.getData("text/plain"),n=e.clipboardData.getData("text/html");if(n){var r=(new DOMParser).parseFromString(n,"text/html");if(r&&1===r.body.childNodes.length&&"A"===r.body.childNodes[0].tagName)return this.execCommand("insertHTML",r.body.childNodes[0].outerHTML);if(n.includes("lake_diagram_content_editor_data"))return this.execCommand("insertHTML",r.querySelector("[data-lake_diagram_content_editor_data]").innerHTML)}return t&&/^https?:\/\/\S+$/.test(t)?this.execCommand("insertHTML",'<a href="'.concat(t,'" target="_blank">').concat(t,"</a>")):this.execCommand("insertHTML",t)}}function oc(e){return!e||e&&!e.match(/^[\x00-\x7F]/)||e.startsWith("javascript:")}function cc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"copy";if(this.isBegin){e.stopPropagation(),"copy"===t&&e.preventDefault();var n=this.getRange(),r=document.createElement("div"),a=n.cloneContents();r.dataset.lake_diagram_content_editor_data=!0,r.appendChild(a),e.clipboardData.setData("text/html",r.outerHTML),e.clipboardData.setData("text",r.innerText)}}function lc(e,t,n){gr(t,(function(t){if(1===t.nodeType){var n=t.getAttribute("style");n&&n.includes("font-size: x-small;")&&(t.style["font-size"]="".concat(e,"px"))}}),(function(e){return e.childNodes}));var r=[];gr(t,(function(e){1===e.nodeType&&"FONT"===e.tagName&&r.push(e)}),(function(e){return e.childNodes})),r.length>0&&(n&&!n.collapsed&&gr(n.commonAncestorContainer,(function(e){1===e.nodeType&&n.isPointInRange(e,0)&&(e.style["font-size"]="")}),(function(e){return e.childNodes})),r.forEach((function(t){var n=t.parentNode,r=document.createElement("span");r.style["font-size"]="".concat(e,"px"),n.insertBefore(r,t),r.appendChild(t),ec(t);var a=r.childNodes[0];a&&"SPAN"===a.tagName&&1===r.childNodes.length&&(Object.keys(Qi).forEach((function(e){a.style[e]&&"font-size"!==e&&(r.style[e]=a.style[e])})),ec(a)),"SPAN"===n.tagName&&1===n.childNodes.length&&(Object.keys(Qi).forEach((function(e){r.style[e]&&"font-size"!==e&&(n.style[e]=r.style[e])})),ec(r))})))}function sc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sc(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var dc=F.HotKeyUtils.isHotkey,fc=function(e){x()(n,A.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){var e;return g()(this,n),(e=t.call(this)).eventHelper=new Uo,e.isBegin=!1,e.readyCommands={},e.compositing=!1,e.eventObj={},e}return y()(n,[{key:"batchEdit",value:function(e,t,n){var r,a=this,i=window.getSelection();try{r=i.getRangeAt(0)}catch(e){}e.forEach((function(e){var r=document.createRange();r.selectNodeContents(e),i.removeAllRanges(),i.addRange(r),e.setAttribute("contenteditable",!0),"fontSize"===t?(a._execCommand(t,1),lc(n,e,r)):a._execCommand(t,n),e.removeAttribute("contenteditable")})),i.removeAllRanges(),r&&i.addRange(r)}},{key:"prepareEdit",value:function(){var e=this.dom;if(e){this.updateStartContent();var t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n),this.emit("prepareedit")}}},{key:"closest",value:function(e,t){return Qo(e,t,this.dom)}},{key:"getRange",value:function(){if(!this.dom)return null;var e=window.getSelection();try{var t=e.getRangeAt(0);return this.dom.contains(t.commonAncestorContainer)?t:null}catch(e){return null}}},{key:"_execCommand",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];document.execCommand("styleWithCss",!1,!0);var r=document.execCommand(e,n,t),a={name:e,showUI:n,value:t,result:r};return{result:r,eventObj:a}}},{key:"convertFontSize",value:function(e){var t=this.getRange();lc(e,this.dom,t)}},{key:"execReadyCommand",value:function(){this.readyCommands.fontSize&&this.convertFontSize(this.readyCommands.fontSize.value),this.readyCommands={}}},{key:"execCommand",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.getRange();if(r&&e){if("fontSize"===e){var a=this._execCommand(e,1,n),i=a.result,o=a.eventObj;return this.convertFontSize(t),this.afterExecCommand({name:e,value:t,result:i,eventObj:o}),i}var c=this._execCommand(e,t,n),l=c.result,s=c.eventObj;if("createLink"===e&&l){r=this.getRange(),s.target=Qo(r.commonAncestorContainer,"a",this.dom)||1===r.commonAncestorContainer.nodeType&&r.commonAncestorContainer.querySelector("a");for(var u=this.dom.querySelectorAll("a"),d=0;d<u.length;d++){var f=u[d];f.setAttribute("target","_blank"),f.style.cursor="default",oc(f.getAttribute("href"))&&f.setAttribute("href","")}}return this.afterExecCommand({name:e,value:t,result:l,eventObj:s}),l}}},{key:"getFirstTag",value:function(e){return nc(e,this.dom)}},{key:"afterExecCommand",value:function(e){var t=e.name,n=e.value,r=e.result,a=e.eventObj;if(this.getRange().collapsed)if(this.readyCommands[t])Object.assign(this.readyCommands[t],{value:n,result:r,cancel:!this.readyCommands[t].cancel});else{var i=this.getRange().startContainer,o=i===this.dom?this.getFirstTag("SPAN"):this.closest(i,(function(e){return 1===e.nodeType}));this.readyCommands[t]={value:n,result:r,cancel:!!this.closest(o,(function(e){return Jo(e,"strikethrough"===t?"line-through":t)}))}}this.emit("execcommand",a),this.emitChangeEvent()}},{key:"emitChangeEvent",value:function(){this.emit("change",{dom:this.dom})}},{key:"beginEdit",value:function(){this.isBegin=!0,this.emit("beginedit",this.eventObj),document.execCommand("styleWithCss",!1,!0),this.dom.classList.remove("selection-transparent");var e=escape(this.dom.innerText);this.dom.style.cursor="text",("%u200B"===e||"%u200D"===e)&&this.getRange().collapse(),this.emit("selectionchange")}},{key:"forceEndEdit",value:function(){this.isBegin&&(this.endEdit(),this.prepareEdit())}},{key:"updateStartContent",value:function(){this.eventObj&&(this.eventObj.startHTML=Go(this.dom.innerHTML))}},{key:"bind",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.eventHelper,a=uc({insertParagraphKey:function(e){return(e.metaKey||e.ctrlKey||e.altKey)&&13===e.which},cancelKey:function(e){return 9===e.which||13===e.which||27===e.which}},n),i=a.insertParagraphKey,o=a.cancelKey;this.originCursor=e.style.cursor,this.dom=e,e.setAttribute("contenteditable",!0),e.setAttribute("spellcheck",!1),e.focus({preventScroll:!0}),this.eventObj={dom:e},this.updateStartContent(),r.bind(e,"contextmenu",(function(e){t.isBegin&&e.stopPropagation()})),r.bind(document,"selectionchange",(function(){t.compositing||(t.execReadyCommand(),t.emit("selectionchange"))}),{onKey:"addEventListener",offKey:"removeEventListener"}),r.bind(e,"keydown",(function(e){if(dc("mod+k",e)&&(e.preventDefault(),e.stopPropagation(),t.execCommand("createLink",vo("链接"))),t.isBegin){if(i(e))return t.execCommand("insertParagraph"),e.stopPropagation(),void e.preventDefault();if(o(e))return e.preventDefault(),e.stopPropagation(),void t.forceEndEdit();if(dc("mod+s",e))return;e.stopPropagation()}else{if(dc("mod+c",e)||dc("mod+v",e)||dc("mod+x",e)||dc("shift+enter",e)||dc("space",e))return;if(dc("mod+enter",e))return e.preventDefault(),e.stopPropagation(),void t.beginEdit();if(tc(e))return e.stopPropagation(),void t.beginEdit();e.preventDefault()}})),r.bind(e,"compositionstart",(function(){t.compositing=!0})),r.bind(e,"compositionend",(function(){t.compositing=!1})),r.bind(e,"input",(function(e){e.stopPropagation(),t.isBegin?t.emitChangeEvent():e.preventDefault()})),r.bind(e,"paste",ic.bind(this)),r.bind(e,"copy",cc.bind(this)),r.bind(e,"cut",(function(e){cc.call(t,e,"cut")}))}},{key:"endEdit",value:function(){this.isBegin=!1,this.eventObj.endHTML=Go(this.dom.innerHTML),this.dom.style.cursor=this.originCursor,this.dom.classList.add("selection-transparent"),this.emit("endedit",this.eventObj)}},{key:"unbind",value:function(){var e=this.dom,t=this.eventHelper;e&&(e.removeAttribute("contenteditable"),e.removeAttribute("spellcheck"),t.unbind(),this.endEdit(),this.dom=void 0)}},{key:"query",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dom,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getRange(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.readyCommands;return ac(e,t,n)}},{key:"destroy",value:function(){this.unbind(),this.eventHelper=void 0}}]),n}();l()(fc,"className","ContentEditor");var pc=function(){function e(t){g()(this,e),this.graphicGroup=t,this.dx=0,this.dy=0}return y()(e,[{key:"translate",value:function(e,t){this.graphicGroup.update({matrix:[1,0,0,0,1,0,e,t,1]}),this.dx=e,this.dy=t}},{key:"getBBox",value:function(){return this.graphicGroup.getBBox()}},{key:"destroy",value:function(){this.graphicGroup.destroy()}}]),e}(),hc=function(){function e(t){g()(this,e),this.diagram=t,this.delegations=[]}return y()(e,[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.diagram,n=new _a;"function"==typeof e?e(n):((e=e.map((function(e){return"string"==typeof e&&(e=t.find(e)),e}))).sort((function(e,t){return e.getZIndex()-t.getZIndex()})),e.forEach((function(e){var t=new Qa({element:e.graphicGroup});n.add(t)}))),t.frontRootGroup.prepend(n);var r=new pc(n);return this.delegations.push(r),r}},{key:"clear",value:function(){var e=this;this.delegations.forEach((function(t){e.remove(t)}))}},{key:"remove",value:function(e){var t=this.delegations;t.splice(t.indexOf(e),1),e.destroy()}},{key:"destroy",value:function(){this.diagram=void 0,this.delegations=void 0}}]),e}();function mc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mc(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vc(e){var t=new Image;return new Promise((function(n,r){t.onload=function(){n(t)},t.onerror=function(){r(new Error("unable to load url ".concat(e)))},t.crossOrigin="anonymous",t.src=e}))}function yc(e){return bc.apply(this,arguments)}function bc(){return(bc=Y()(H.a.mark((function e(t){var n,r,a,i,o,c,l,s,u=arguments;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,vc(t);case 3:return r=e.sent,a=document.createElement("canvas"),i=gc({width:r.naturalWidth,height:r.naturalHeight},n),o=i.width,c=i.height,l=i.backgroundColor,a.width=o,a.height=c,s=a.getContext("2d"),l&&(s.fillStyle=l,s.fillRect(0,0,o,c)),s.drawImage(r,0,0,o,c),e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}l()(hc,"className","Delegator");var kc=Object.freeze({__proto__:null,loadImage:vc,loadCanvas:yc});function wc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wc(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _c(e){return"jpg"===e||"jpeg"===e}function Cc(e){var t=(new XMLSerializer).serializeToString(e);return t=t.replace(/[\u200B-\u200D\uFEFF]/g,"").replace(/[\x00-\x1F\x7F-\x9F]/g,""),"data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent('<?xml version="1.0" encoding="utf-8"?>'+t)))}function Ec(e,t){if(t.image&&t.image.src){var n=document.createElement("img");n.setAttribute("src",t.image.src),e.appendChild(n)}}function Oc(e,t){if(t.noteContent){var n=document.createElement("p");n.innerHTML=t.noteContent,e.appendChild(n)}}function Sc(e){var t=document.createElement("td");return e.textContent&&(t.innerHTML=e.textContent),Ec(t,e),Oc(t,e),t}var Rc=function(){function e(t){g()(this,e),this.diagram=t}var t,n,r;return y()(e,[{key:"getContentArea",value:function(e){var t=1/0,n=1/0,r=-1/0,a=-1/0;return e.childNodes.forEach((function(e){if("defs"!==e.tagName.toLowerCase()){var i=e.getBBox(),o=i.x,c=i.y,l=i.width,s=i.height;o<t&&(t=o),o+l>r&&(r=o+l),c<n&&(n=c),c+s>a&&(a=c+s)}})),{left:t,top:n,width:r-t,height:a-n}}},{key:"_getSVG",value:function(){var e=this.diagram.getStaticSVG();e.style.position="fixed",e.style.visibility="hidden",document.body.appendChild(e);var t=this.getContentArea(e),n=t.left,r=t.top,a=t.width,i=t.height;return e.setAttribute("viewBox",[n-2,r-2,a+4,i+4].join(",")),e.setAttribute("width",a),e.setAttribute("height",i),e.style.width="".concat(a,"px"),e.style.height="".concat(i,"px"),e.style.position="relative",e.style.visibility="visible",document.body.removeChild(e),e}},{key:"canvas",value:(r=Y()(H.a.mark((function e(){var t,n,r,a,i,o,c=arguments;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},n=t.backgroundColor,r=this.svg(),e.next=5,Promise.all(Array.from(r.querySelectorAll("image"),function(){var e=Y()(H.a.mark((function e(t){var n,r;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.getAttribute("href"))){e.next=6;break}return e.next=4,yc(n);case 4:r=e.sent,t.setAttribute("href",r.toDataURL("image/png"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return a=t.width||parseFloat(r.getAttribute("width")),i=t.height||parseFloat(r.getAttribute("height")),o=window.devicePixelRatio>2?window.devicePixelRatio:2,e.next=10,yc(Cc(r),{backgroundColor:n,width:a*o,height:i*o});case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"json",value:function(e){var t=this.diagram,n={head:xc({},t.head),body:[]};return t.rootGroup.rendererElement.childNodes.forEach((function(e,r){var a=t.getCell(e);if(a.model.zIndex=r,a.isRoot&&!a.model.isPlaceholder){var i=f()(a.model);i.children&&0===i.children.length&&delete i.children,gr(i,(function(){void 0!==i.html&&(i.html=Go(i.html))})),n.body.push(i)}})),"string"===e?JSON.stringify(n):n}},{key:"svg",value:function(e){var t=this._getSVG();return"string"===e||"dom-string"===e?'<?xml version="1.0" encoding="utf-8"?>'+(new XMLSerializer).serializeToString(t):t}},{key:"image",value:function(){var e=this.svg(),t=new Image;return t.src=Cc(e),t}},{key:"blob",value:(n=Y()(H.a.mark((function e(){var t,n,r,a=arguments;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:"jpeg",n=a.length>1&&void 0!==a[1]?a[1]:{},_c(t)&&(n.backgroundColor="#fff"),e.next=5,this.canvas(n);case 5:return r=e.sent,e.abrupt("return",new Promise((function(e){r.toBlob(e,"image/".concat(t),"jpeg"===t?.8:1)})));case 7:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"download",value:(t=Y()(H.a.mark((function e(){var t,n,r,a,i,o=arguments;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:"jpeg",n=o.length>1&&void 0!==o[1]?o[1]:{},_c(t)&&(n.backgroundColor="#fff"),e.next=5,this.canvas(n);case 5:r=e.sent,a=document.createElement("a"),i=n.filename||"yuque_diagram",a.download="".concat(i,".").concat(t),a.href=r.toDataURL("image/".concat(t)),a.click();case 11:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_textContent",value:function(e){if(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent}return""}},{key:"doc",value:function(e){var t=this,n=document.createElement("div");return e.forEach((function(e){gr(e,(function(e){if(Er(e.depth,[0,3])){if(e.textContent){var r=document.createElement("h".concat(e.depth+1));r.innerHTML=e.textContent,n.appendChild(r)}return Ec(n,e),void Oc(n,e)}return t.list([e]).childNodes.forEach((function(e){n.appendChild(e)})),!1}))})),n}},{key:"table",value:function(e){var t=document.createElement("table");e.forEach((function(e){gr(e,(function(e,n){if(e.parent=n,!e.children||0===e.children.length){var r=document.createElement("tr"),a=Sc(e);for(r.prepend(a);n;){var i=Sc(n);r.prepend(i),n=n.parent}t.appendChild(r)}}))}));var n=0;return t.childNodes.forEach((function(e){var t=e.childNodes.length;t>n&&(n=t)})),t.childNodes.forEach((function(e){for(var t=e.childNodes.length,r=0;r<n-t;r++){var a=document.createElement("td");e.appendChild(a)}})),t}},{key:"list",value:function(e){var t=document.createElement("div");return e.forEach((function(e){var n=document.createElement("ul");gr(e,(function(e,t){e.level=t?t.level+1:1;var r=document.createElement("li");t?t.childContainer.appendChild(r):n.appendChild(r),e.textContent&&(r.innerHTML=e.textContent),Ec(r,e),Oc(r,e),e.children&&e.children.length>0&&(e.childContainer=document.createElement("ul"),t?t.childContainer.appendChild(e.childContainer):n.appendChild(e.childContainer))})),t.appendChild(n)})),t}},{key:"dom",value:function(e){var t=this,n=this.diagram,r=n.settings.copyType;e||(e=n.getCells().filter((function(e){return e.isRoot}))),e=n.deduplicate(e);var a=document.createElement("div"),i=document.createElement("div"),o=[];e.forEach((function(e){o=o.concat(e.getAllCells())}));var c=o.reduce((function(e,t){return e[t.model.id]=f()(t.computedProps)||{},e[t.model.id].x=t.x,e[t.model.id].y=t.y,e}),{})||{},l=n.delegator.create(o),s=l.getBBox();l.destroy(),c.bbox=s;var u=e.map((function(e){return xc({},f()(e.model))}));i.dataset.lake_diagram_body=JSON.stringify(u);var d,p=JSON.stringify(c);return i.dataset.lake_extra_informations=p,a.appendChild(i),u.forEach((function(n,r){n.depth=e[r].depth,vr(n,(function(e,t){e.depth=t.depth+1})),gr(n,(function(e){e.textContent=t._textContent(e.html),e.note&&e.note.content&&(e.noteContent=t._textContent(e.note.content))}))})),d="doc"===r?this.doc(u):"table"===r?this.table(u):this.list(u),a.appendChild(d),a}},{key:"html",value:function(){return this.dom().outerHTML}},{key:"getText",value:function(){return this.dom().innerText}},{key:"clipboard",value:function(e){var t=this.dom(e);return{html:t.innerHTML,text:t.textContent}}},{key:"destroy",value:function(){this.diagram=void 0}}]),e}();l()(Rc,"className","Exporter");var Dc=function(){function e(t){g()(this,e);var n=new _a;n.css({"pointer-events":"none"}),this.diagram=t,this.group=n,this.arr=[],this.eventHelper=new Uo}return y()(e,[{key:"bind",value:function(){var e=this,t=this.diagram,n=this.eventHelper;n.unbind(),n.bind(t,"afterchange",(function(t){var n=t.action;e.arr.length>0&&("update"===n||"delete"===n)&&e.draw()}))}},{key:"show",value:function(){this.group.show()}},{key:"hide",value:function(){this.group.hide()}},{key:"select",value:function(e){var t=this.diagram.viewport.zoom;e=e.filter((function(e){return e.multiSelectHighlight&&e.state.visible})),this.render(e,(function(e){return e.isLine?{type:"outline",shapeStyle:{fill:"none",stroke:"#096DD9","stroke-width":2/t}}:{type:"rect",shapeStyle:{fill:"none",stroke:"#fff","stroke-width":1/t},shadowStyle:{fill:"none",stroke:e.locked?"#979797":"#096DD9","stroke-width":1/t}}}))}},{key:"dock",value:function(e){this.render(e,(function(){return{type:"outline",shapeStyle:{"stroke-width":1,stroke:"#096DD9",fill:"none"},shadowStyle:{"stroke-width":2.5,stroke:"#E6F0FB",fill:"none"}}}))}},{key:"render",value:function(e,t){var n=this.group,r=this.diagram;Rr(e,this.arr.map((function(e){return e.cell})))||(this.clear(),e&&!e.some((function(e){return!e||!e.isCell}))&&(r.frontRootGroup.add(n),this.bind(),this.arr=e.map((function(e){var r=t(e),a=r.type,i=r.shapeStyle,o=r.shadowStyle,c={cell:e,type:"function"==typeof a?a(e):a,shape:i&&new Ka(i),shadow:o&&new Ka(o)};return c.shadow&&n.add(c.shadow),c.shape&&n.add(c.shape),c})),this.draw()))}},{key:"_updateShape",value:function(e){var t=e.cell,n=e.type,r=e.shape,a=e.shadow,i=t.getKeyShape();if(i){var o,c=i.attr("stroke-width"),l=c/2,s=t.graphicGroup.matrix.concat([]),u=i.getBBox();if(o="outline"===n?i.attr("d"):Ia(-l,-l,u.width+c,u.height+c),r.update({matrix:s,d:o}),a){var d=parseFloat(a.attr("stroke-width"))+parseFloat(r.attr("stroke-width")),f=u.width+c,p=u.height+c,h=o;t.isLine||(h=K()(o).scale(1+d/f,1+d/p).translate(-d/2,-d/2).toString()),a.update({matrix:s,d:h})}}}},{key:"_draw",value:function(){var e=this;this.arr.forEach((function(t){e._updateShape(t)}))}},{key:"draw",value:function(){this.arr.length>0&&this._draw()}},{key:"clear",value:function(){this.destroyed||0===this.arr.length||(this.arr=[],this.group.clear(),this.group.remove(),this.eventHelper.unbind())}},{key:"destroy",value:function(){this.eventHelper.destroy(),this.group.destroy(),this.diagram=void 0,this.group=void 0,this.arr=void 0,this.destroyed=!0}}]),e}();l()(Dc,"className","Highlight");var Ac=function(){function e(t){g()(this,e),this.diagram=t}return y()(e,[{key:"json",value:function(e){this.diagram.add(e.body)}},{key:"clipboard",value:function(){return"clipboard"}},{key:"destroy",value:function(){this.diagram=void 0}}]),e}();l()(Ac,"className","Importer");var Tc=function(e){x()(n,Uo);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(){}},{key:"reset",value:function(){}},{key:"pressKey",value:function(e){var t=e.diagram,n=e.keys,r=void 0===n?[]:n,a=e.isKey,i=void 0===a?function(e){return r.includes(e.key)}:a,o=e.onPress,c=void 0===o?function(){}:o,l=e.onCancel,s=void 0===l?function(){}:l,u=t.signal.keydown;this.bind(t,"keydown",(function(e){i(e)&&!u[e.key]&&(u[e.key]=!0,c(e))})),this.bind(window,"keyup",(function(e){u[e.key]&&(u[e.key]=!1,s(e))})),this.bind(window,"blur",(function(){for(var e in u)u[e]=!1}))}}]),n}();var Pc=F.HotKeyUtils.isHotkey,jc=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){Pc("mod+z",t)?(e.command.execute("Undo"),e.tryFocus()):(Pc("mod+y",t)||Pc("shift+mod+z",t))&&(e.command.execute("Redo"),e.tryFocus())}))}}]),n}();function Mc(e){return F.ua.macos?e.metaKey:e.ctrlKey}var Nc=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){if(Mc(t)&&"/"===t.key){if(e.command.enable("Collapse"))return e.command.execute("Collapse");if(e.command.enable("Expand"))return e.command.execute("Expand")}}))}}]),n}();var Lc=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){var t=e.selector;this.bind(window,"mousedown",(function(n){var r=e.selector.selections,a=e.getCell(n.target);a&&a.state.selected&&e.contentEditor.isBegin||(a?n.shiftKey||(F.ua.macos?n.metaKey:n.ctrlKey)?r.includes(a)?t.select(r.filter((function(e){return e!==a}))):t.select(r.concat([a])):r.includes(a)||t.select([a]):jr(n.target,(function(e){return e.dataset.lake_prevent_click_unselect||e.classList.contains("lake-diagram-prevent-mouse-select")}),window.document,(function(e){return e.parentNode}),(function(e){return!e}))||r.length>0&&t.clear(),a&&a.state.selected&&!e.contentEditor.isBegin&&n.preventDefault())}))}}]),n}();var Ic=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"collapsedbutton:click",(function(t){var n=t.nativeEvent;if(n.stopPropagation(),n.target.closest("[data-diagram-collapsed-button=true]")){if(e.command.enable("Collapse"))return e.command.execute("Collapse");if(e.command.enable("Expand"))return e.command.execute("Expand")}}))}}]),n}();var zc=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"scroll",(function(e){(e.ctrlKey||F.ua.macos&&e.metaKey)&&(e.preventDefault(),e.stopPropagation())})),this.bind(e,"wheel",(function(t){if(t.ctrlKey||F.ua.macos&&t.metaKey){t.preventDefault(),t.stopPropagation();var n=t.wheelDelta||-t.deltaY;if(e.emit("wheelzoom"),Math.abs(n)>0){var r=e.viewport.zoom;n>0?e.viewport.setViewport(1.05*r):e.viewport.setViewport(r*(1/1.05))}}}))}}]),n}();var Bc=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"copy",(function(t){e.command.execute("Copy",{e:t})}))}}]),n}();var Fc=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"cut",(function(t){e.command.execute("Cut",{e:t})}))}}]),n}();var Vc=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"paste",(function(t){e.command.execute("Paste",{e:t})}))}}]),n}();var Uc=F.HotKeyUtils.isHotkey,qc=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){Uc("mod+=",t)?(t.preventDefault(),e.command.execute("ZoomIn")):Uc("mod+shift+=",t)?(t.preventDefault(),e.command.execute("FitViewport")):Uc("mod+-",t)?(t.preventDefault(),e.command.execute("ZoomOut")):Uc("mod+0",t)?e.command.execute("ActualSize"):Uc("mod+8",t)&&e.command.execute("FocusSelection")}))}}]),n}();var Hc=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){!Mc(t)&&["Backspace","Delete"].includes(t.key)&&(t.preventDefault(),e.command.execute("Delete"),e.tryFocus())}))}}]),n}();var Wc=document.createElement("div"),Yc=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){var t=e.contentEditor;this.bind(t,"change",(function(t){var n=t.dom,r=e.getCell(n);!e.signal.preventUpdateCellContent&&r&&e.update(r,{html:n.innerHTML})})),this.bind(t,"beginedit",(function(t){var n=t.dom;e.signal.contentEditing=!0;var r=e.getCell(n);r&&r.beginEditContent()})),this.bind(t,"endedit",(function(t){var n=t.dom,r=t.startHTML,a=t.endHTML;e.signal.contentEditing=!1;var i=e.getCell(n);i&&(i.endEditContent(),Wc.innerHTML=a,""===Wc.textContent&&(a=-1!==a.indexOf("<br>")?a.replace("<br>","".concat("&#8203;","<br>")):"&#8203;"),r!==a&&"&#8203;"!==a?e.command.execute("UpdateCellContent",{id:i.model.id,startHTML:r,endHTML:a}):i.shouldRefreshEndEditContent()&&e.update(i))}))}}]),n}();var Gc=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){var t;this.bind(e,"mousedown",(function(n){clearTimeout(t),t=setTimeout((function(){e.getCell(n.target)?e.tryFocus():e.focus()}))}))}}]),n}();var Kc=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){var e;return g()(this,n),(e=t.call(this)).edges=void 0,e}return y()(n,[{key:"init",value:function(e){var t=this;this.bind(e,"afterselect",(function(){var n=e.selector.selections,r=t.edges;1===n.length?(r&&r.forEach((function(e){return e.resizer.end()})),t.edges=n.filter((function(e){return e.isLine})),t.edges.forEach((function(e){return e.resizer.begin()}))):(r&&r.forEach((function(e){return e.resizer.end()})),t.edges=void 0)}))}}]),n}();function Xc(e,t){for(var n=e.getCellsByZIndex().filter((function(e){return!e.isLine&&!e.locked})),r=n.length-1;r>=0;r--){var a=n[r],i=a.getConnection(t);if(i)return i===a?{id:a.model.id,connection:null}:{id:a.model.id,connection:i}}return{id:null,connection:t}}function $c(e,t){var n=M()(t,2),r=n[0],a=n[1],i=e.createSVGPoint();return i.x=r,i.y=a,i}function Zc(e,t){var n=qr(e.x,e.y,t.x,t.y);if(n>=5*Math.PI/4&&n<7*Math.PI/4)return"N";if(n>=7*Math.PI/4||n<Math.PI/4)return"E";if(n>=Math.PI/4&&n<3*Math.PI/4)return"S";if(n>=3*Math.PI/4&&n<5*Math.PI/4)return"W";throw new Error("unexpected radian ".concat(n))}function Qc(e,t){var n=M()(e,2),r=n[0],a=n[1],i=M()(t,2),o=i[0],c=i[1],l=Vr(r,a,o,c);Math.abs(l)<.1&&Math.abs(c-a)<8?t[1]=a:Math.abs(l)>10&&Math.abs(o-r)<8&&(t[0]=r)}function Jc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function el(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jc(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tl=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){var e;return g()(this,n),e=t.call(this),l()(R()(e),"onMouseMove",(function(t){var n=R()(e),r=n.diagram,a=n.line,i=n.source,o=Xc(r,e.getPoint(t));if(e.cacheEndpointId!==o.id&&(r.highlight.dock([r.find(o.id)]),e.cacheEndpointId=o.id),a){if(o.connection&&!o.id){var c=a.getEndpoint(a.source);Qc([c.x,c.y],o.connection)}r.update(a,{target:o})}else i&&function(e,t){return t.id!==e.id||(t.connection&&e.connection?Ur(t.connection[0],t.connection[1],e.connection[0],e.connection[1])>8:void 0)}(i,o)&&e.beginInsertLine({source:i,target:o})})),l()(R()(e),"onMouseDown",(function(t){var n=Xc(R()(e).diagram,e.getPoint(t));e.source=n})),l()(R()(e),"onMouseUp",(function(){var t=R()(e),n=t.diagram,r=t.line;if(e.clear(),n.interaction.changeMode("edit"),r){var a=r.getFirstInsertControlPoints();a&&(r.model.controlPoints=a),n.command.execute("Add",{model:el(el({},r.model),{},{id:null})})}})),e.cacheEndpointId=null,e.diagramType="default",e.cellType="line",e}return y()(n,[{key:"getSetting",value:function(){var e=this.diagram,t=this.diagramType;return e.settings[t]}},{key:"getPoint",value:function(e){return this.diagram.viewport.invertClient([e.clientX,e.clientY])}},{key:"beginInsertLine",value:function(e){var t=e.source,n=e.target,r=this.diagram,a=this.cellType,i=this.getSetting()[a],o=i.shape,c=i.marker,l=i.html,s=r.add({type:a,shape:o,source:t,html:l,target:el(el({},n),{},{marker:c})})[0];this.line=s}},{key:"init",value:function(e){var t=this;this.diagram=e,this.bind(e,"begininsertline",(function(e){t.beginInsertLine(e)})),this.bind(e,"mousemove",this.onMouseMove),this.bind(e,"mousedown",this.onMouseDown),this.bind(e,"mouseup",this.onMouseUp),this.bind(window,"keyup",(function(n){"Esc"!==n.key&&"Escape"!==n.key||(t.clear(),e.interaction.changeMode("edit"))}))}},{key:"clear",value:function(){var e=this.line,t=this.diagram;t&&(this.cacheEndpointId&&t.highlight.clear(),this.cacheEndpointId=null,e&&t.remove(e),this.line=null,this.source=null)}},{key:"unbind",value:function(){this.clear(),k()(O()(n.prototype),"unbind",this).call(this)}}]),n}(),nl=function(){function e(t){g()(this,e),this.diagram=t,this.modes={edit:[new jc,new Nc,new Lc,new Ic,new zc,new Bc,new Fc,new Vc,new qc,new Hc,new Yc,new Gc,new Kc],read:[new Nc,new Lc,new Ic,new qc,new zc,new Gc,new Bc],beginInsetLine:[new tl],none:[]},this.defaultCursors={read:"grab",beginInsetLine:"crosshair"},this.defaultCursor="default",this.currentMode=null}return y()(e,[{key:"_removeCurrentMode",value:function(){this.currentMode&&this.modes[this.currentMode].forEach((function(e){e.reset(),e.unbind()}))}},{key:"init",value:function(e){this.changeMode(e)}},{key:"addDefaultCursor",value:function(e){Object.assign(this.defaultCursors,e)}},{key:"registerMode",value:function(e,t){var n=this.modes;n[e]?n[e]=n[e].concat(t):this.modes[e]=t}},{key:"getModeCursor",value:function(){return this.defaultCursors[this.currentMode]||this.defaultCursor}},{key:"changeMode",value:function(e){var t=this,n=this.modes[e];this._removeCurrentMode(),n.forEach((function(e){e.diagram=t.diagram,e.init(t.diagram)}));var r=this.defaultCursors[e]||this.defaultCursor;this.currentMode=e,this.diagram.setCursor(r)}},{key:"destroy",value:function(){this._removeCurrentMode(),this.diagram=void 0,this.modes=void 0,this.currentMode=void 0}}]),e}();l()(nl,"className","Interaction");var rl=function(){function e(t){g()(this,e),this.diagram=t,this.fill={color:"#ffffff"}}return y()(e,[{key:"init",value:function(e){Object.assign(this,{size:[200,200]},e),this.eventHelper=new Uo,this.visible&&this.render(),this.bind()}},{key:"calculateBBox",value:function(){var e=this.diagram,t=this.size,n=e.rootGroup.getBBox(),r=e.viewport.zoom;if("auto"===t){var a={},i=e.width/r,o=e.height/r;if(n.width<i){var c=n.x+n.width/2,l=i/2;a.left=c-l,a.right=c+l}else a.left=n.x,a.right=n.x+n.width;if(n.height<o){var s=n.y+n.height/2,u=o/2;a.top=s-u,a.bottom=s+u}else a.top=n.y,a.bottom=n.y+n.height;return a}return 0===n.width&&0===n.height?Array.isArray(t)?{top:0,bottom:t[1],left:0,right:t[0]}:{top:0,bottom:e.height,left:0,right:e.width}:{top:Math.floor(n.y/t[1])*t[1],bottom:Math.ceil((n.y+n.height)/t[1])*t[1],left:Math.floor(n.x/t[0])*t[0],right:Math.ceil((n.x+n.width)/t[0])*t[0]}}},{key:"getBBox",value:function(){return this.calculateBBox()}},{key:"render",value:function(){var e=this.diagram,t=this.size,n=this.fill,r=e.defs,a=e.backRootGroup,i=Object(I.a)(),o=new Ai,c=new ji({dx:0,dy:2,stdDeviation:8,"flood-color":"rgba(115, 115, 115, 0.08)"});o.attr({id:i}),o.add(c),r.add(o);var l=M()(t,2),s=l[0],u=l[1],d=new ai({x:0,y:0,width:s,height:u,fill:n.color});d.css({filter:"url(#".concat(i,")"),"pointer-events":"none"}),a.add(d),this.element=d}},{key:"bind",value:function(){var e=this;if(this.visible){var t=$()((function(){e.update()}),16);this.eventHelper.bind(this.diagram,"afterviewportchange",t)}}},{key:"update",value:function(e){e&&Object.assign(this,e);var t=this.diagram,n=this.fill,r=this.size;if(this.visible){this.element||this.render();var a=M()(r,2),i=a[0],o=a[1],c=t.viewport.paperBox,l=c.left,s=c.top;this.element.update({x:l,y:s,width:i,height:o,fill:n&&n.color||"#fff"})}}},{key:"destroy",value:function(){this.element&&this.element.destroy(),this.eventHelper.destroy()}}]),e}();l()(rl,"className","Paper");var al=function(){function e(t){g()(this,e),this.diagram=t}return y()(e,[{key:"init",value:function(e){var t=this;this.behaviours=[],e.forEach((function(e){t.registerPlugin(e)}))}},{key:"registerCell",value:function(e){this.diagram.Cells[e.className]=e}},{key:"registerPlugin",value:function(e){var t=this,n=this.diagram,r=e.Cells,a=e.Commands,i=e.Extends,o=e.modes,c=e.defaultCursors;r&&r.forEach((function(e){t.registerCell(e)})),o&&o.forEach((function(e){var r=e.mode,a=e.Behaviours.map((function(e){return new e}));n.interaction.registerMode(r,a),t.behaviours=t.behaviours.concat(a)})),a&&a.forEach((function(e){n.command.register(e)})),i&&n.addExtend(i),c&&n.interaction.addDefaultCursor(c)}},{key:"destroy",value:function(){this.diagram=void 0,this.behaviours.forEach((function(e){return e.destroy()}))}}]),e}();l()(al,"className","Register");var il=function(){function e(t){g()(this,e),this.diagram=t,this.selections=[]}return y()(e,[{key:"_select",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.diagram,a=r.cellMap;"string"==typeof e&&(e=[a[e]]),Array.isArray(e)&&"string"==typeof e[0]&&(e=e.map((function(e){return a[e]}))),"object"===P()(e)&&e.isCell&&(e=[e]),e.forEach((function(e){if(e.state.selected!==n){var r=t.selections.indexOf(e);n?(e.select(),-1===r&&t.selections.push(e)):(e.unSelect(),-1!==r&&t.selections.splice(r,1))}}))}},{key:"select",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Array.isArray(e)||(e=[e]);var n=this.diagram,r=this.selections,a={selections:r.concat([])},i={selections:e.concat([]).map((function(e){return n.find(e)})).filter((function(e){return e}))},o={before:a,after:i,selections:i.selections},c=Rr(a.selections,i.selections);!c&&n.emit("beforeselectionchange",o),n.emit("beforeselect",o),this._select(a.selections,!1),this._select(e,t),n.emit("afterselect",o),!c&&n.emit("afterselectionchange",o)}},{key:"clear",value:function(){this.select([])}},{key:"destroy",value:function(){this.diagram=void 0,this.selectedCell=void 0}}]),e}();l()(il,"className","Selector");var ol=function(){function e(t){g()(this,e),this.diagram=t}return y()(e,[{key:"init",value:function(){this.focusPoint=[0,0,1],this.minZoom=.2,this.maxZoom=2,this.zoom=1,this.autoFitPadding=8,this.m=null,this.scrollBarSize=20,this.eventHelper=new Uo,this._initContainerSize(),this.setViewport(1),this._bindEvent()}},{key:"getViewportClientBox",value:function(){var e=this.diagram,t=this.scrollBarSize,n=e.viewportContainer.getBoundingClientRect(),r=n.x,a=n.y,i=n.width-t,o=n.height-t;return{minX:r,minY:a,maxX:r+i,maxY:a+o,x:r,y:a,width:i,height:o}}},{key:"getViewportBox",value:function(){var e=this.getViewportClientBox(),t=e.minX,n=e.minY,r=e.maxX,a=e.maxY,i=e.width,o=e.height,c=this.invertClient([t,n]),l=this.invertClient([r,a]);return{minX:c[0],minY:c[1],maxX:l[0],maxY:l[1],x:c[0],y:c[1],width:i,height:o}}},{key:"_resetFocusPoint",value:function(){var e=this.focusPoint,t=this.getViewportClientBox();e[0]=t.x+t.width/2,e[1]=t.y+t.height/2}},{key:"_bindEvent",value:function(){var e=this,t=this.diagram,n=this.eventHelper,r=t.viewportContainer;n.bind(r,"scroll",$()((function(){zr(Math.floor(e.scrollLeft),r.scrollLeft,1)&&zr(Math.floor(e.scrollTop),r.scrollTop,1)||(e._setScrollLeft(r.scrollLeft),e._setScrollTop(r.scrollTop),e._change())}),16)),n.bind(t,"aftercommandexecute",(function(t){if(t.isModelChange){if(e.isPreventDefault||e.destroyed)return;e.refresh()}})),this._trackVisualFocus(),this._trackSingleSelect()}},{key:"preventDefault",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isPreventDefault=e}},{key:"_trackSingleSelect",value:function(){var e=this,t=this.diagram;this.eventHelper.bind(t,"afterselect",(function(){var n=t.selector.selections;if(1===n.length){var r=n[0];e.scrollIntoView(r)}}))}},{key:"scrollIntoView",value:function(e){var t=this.diagram,n=this.scrollBarSize,r=t.width,a=t.height,i=t.canvas.getBoundingClientRect();if(!(i.width<=r&&i.height<=a)){var o=this.convertViewport([e.x,e.y]),c=this.convertViewport([e.x+e.width,e.y+e.height]),l=this.scrollLeft,s=this.scrollTop;o[0]<0?l-=Math.abs(o[0])+20:c[0]>r-n&&(l+=c[0]-r+n+20),o[1]<0?s-=Math.abs(o[1])+20:c[1]>a-n&&(s+=c[1]-a+n+20),l===this.scrollLeft&&s===this.scrollTop||this.moveTo(l,s)}}},{key:"_trackVisualFocus",value:function(){var e=this,t=this.diagram,n=this.focusPoint,r=this.eventHelper;r.bind(t,"mousemove",(function(e){var t=e.clientX,r=e.clientY;n[0]=t,n[1]=r})),r.bind(t,"mouseleave",(function(t){t.relatedTarget&&1===t.relatedTarget.nodeType&&t.relatedTarget.closest(".lake-diagram-prevent-mouseleave-reset-focus-point")||e._resetFocusPoint()}))}},{key:"_resizeViewport",value:function(){var e=this.diagram,t=e.viewportContainer,n=e.width,r=e.height;t.style.width="".concat(n,"px"),t.style.height="".concat(r,"px"),t.style.maxWidth="".concat(n,"px"),t.style.maxHeight="".concat(r,"px")}},{key:"_initContainerSize",value:function(){this.diagram.viewportContainer.style.overflow="auto",this._resizeViewport()}},{key:"_change",value:function(){var e=this.scrollLeft,t=this.scrollTop,n=this.canvasWidth,r=this.canvasHeight,a=this.viewBox,i=this.diagram,o=i.viewportContainer,c=i.canvas;i.emit("beforeviewportchange"),this._resizeViewport(),c.rendererElement.style.display="block",c.rendererElement.style.width="".concat(n,"px"),c.rendererElement.style.height="".concat(r,"px"),c.rendererElement.setAttribute("viewBox",a.join(",")),o.scrollLeft=Math.floor(e),o.scrollTop=Math.floor(t),i.emit("afterviewportchange"),this._setMatrix()}},{key:"_setMatrix",value:function(){var e=this.zoom,t=this.scrollLeft,n=this.scrollTop,r=this.viewBox;this.n=[e,0,0,0,e,0,-e*r[0],-e*r[1],1],this.m=[e,0,0,0,e,0,-t-e*r[0],-n-e*r[1],1]}},{key:"focusFirstRoot",value:function(){var e=this.diagram,t=e.getCells().filter((function(e){return e.isRoot}))[0];t&&(this.autoFit(),e.viewport.focus([t.x+t.width/2,t.y+t.height/2]),e.viewport.setViewport(1))}},{key:"moveTo",value:function(e,t){this._setScrollLeft(e),this._setScrollTop(t),this._change()}},{key:"getPadding",value:function(){var e=this.diagram;return e.options.padding||[e.height/2,e.width/2]}},{key:"_restoreCanvasTlPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.zoom;this.setViewport(t);var n=this.invertViewport([0,0]);this.moveTo(this.scrollLeft+(e[0]-n[0])*t,this.scrollTop+(e[1]-n[1])*t)}},{key:"refresh",value:function(){var e=this.getViewportClientBox();this.setViewport(this.zoom,[e.x,e.y])}},{key:"_setScrollLeft",value:function(e){var t=this.diagram,n=this.canvasWidth,r=this.scrollBarSize,a=n-t.width+r,i=e;e<0&&(i=0),e>a&&(i=a),this.scrollLeft=i}},{key:"_setScrollTop",value:function(e){var t=this.diagram,n=this.canvasHeight,r=this.scrollBarSize,a=n-t.height+r,i=e;e<0&&(i=0),e>a&&(i=a),this.scrollTop=i}},{key:"setViewport",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.zoom,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.focusPoint,n=this.minZoom,a=this.maxZoom;e<n?e=n:e>a&&(e=a),this.zoom=e;var o,c,l=this.diagram,s=this.m,u=l.width,d=l.paper,f=d.getBBox(),p=this.getPadding(f,e),h=this.getViewportClientBox(),m=f.right-f.left,g=f.bottom-f.top,v=m*e+2*p[1],y=g*e+2*p[0],b=[f.left-p[1]/e,f.top-p[0]/e,v/e,y/e];if(s){var k=[t[0]-h.x,t[1]-h.y,1],w=r.invert([],s),x=i.transformMat3([],[k[0],k[1],1],w),_=[e,0,0,0,e,0,-e*b[0],-e*b[1],1],C=i.transformMat3([],x,_);o=C[0]-k[0],c=C[1]-k[1]}else o=(v-u)/2,c=p[0]-f.top;this.paperBox=f,this.canvasWidth=v,this.canvasHeight=y,this.zoom=e,this.viewBox=b,this._setScrollLeft(o),this._setScrollTop(c),this._change()}},{key:"convertViewport",value:function(e){var t=this.m;return i.transformMat3([],[e[0],e[1],1],t)}},{key:"invertViewport",value:function(e){var t=this.m,n=r.invert([],t);return i.transformMat3([],[e[0],e[1],1],n)}},{key:"convertViewportAbs",value:function(e){var t=this.n;return i.transformMat3([],[e[0],e[1],1],t)}},{key:"invertViewportAbs",value:function(e){var t=this.n,n=r.invert([],t);return i.transformMat3([],[e[0],e[1],1],n)}},{key:"convertClient",value:function(e){var t=this.m,n=this.getViewportClientBox(),r=i.transformMat3([],[e[0],e[1],1],t);return[r[0]+n.x,r[1]+n.y]}},{key:"invertClient",value:function(e){var t=this.m,n=this.getViewportClientBox(),a=[e[0]-n.x,e[1]-n.y,1],o=r.invert([],t),c=i.transformMat3([],[a[0],a[1],1],o);return[c[0],c[1]]}},{key:"getCenter",value:function(){var e=this.getViewportClientBox();return this.invertClient([e.x+e.width/2,e.y+e.height/2])}},{key:"toObject",value:function(){var e=this.zoom,t=this.diagram;return{zoom:e,tlCanvasPoint:this.invertViewport([0,0]),width:t.width,height:t.height}}},{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tlCanvasPoint||e.originCanvasTlPoint;if(t){var n=e.zoom;this._restoreCanvasTlPoint(t,n)}else"number"==typeof e.scrollLeft&&"number"==typeof e.scrollTop&&(this.setViewport(e.zoom),this.moveTo(e.scrollLeft,e.scrollTop))}},{key:"setWYSIWYG",value:function(e){var t=this.diagram,n=this.scrollBarSize;if(t.width>e.width&&t.height>e.height)this.set({zoom:e.zoom,tlCanvasPoint:e.tlCanvasPoint});else{var r=Math.min((t.width-n)/(e.width-n),(t.height-n)/(e.height-n))*e.zoom;this.set({zoom:r,tlCanvasPoint:e.tlCanvasPoint})}}},{key:"_focus",value:function(e){var t=this.m,n=this.getViewportClientBox(),r=i.transformMat3([],[e[0],e[1],1],t),a=[n.width/2,n.height/2],o=a[0]-r[0],c=a[1]-r[1];this._setScrollLeft(this.scrollLeft-o),this._setScrollTop(this.scrollTop-c),this._setMatrix()}},{key:"focus",value:function(e){this._focus(e),this._change()}},{key:"autoFit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.minZoom,n=e.maxZoom,r=e.zoom,a=this.diagram,i=this.autoFitPadding,o=a.rootGroup,c=o.getBBox();if(t=t||this.minZoom,n=n||1,null==r){var l=this.getViewportClientBox();l.width-=2*i,l.height-=2*i,r=Math.min(l.width/c.width,l.height/c.height)}r<t?r=t:r>n&&(r=n),this._focus([c.x+c.width/2,c.y+c.height/2]),this._resetFocusPoint(),this.setViewport(r)}},{key:"destroy",value:function(){this.eventHelper.destroy(),this.diagram=void 0,this.destroyed=!0}},{key:"width",get:function(){return this.diagram.width}},{key:"height",get:function(){return this.diagram.height}}]),e}();l()(ol,"className","Viewport");var cl=Object.freeze({__proto__:null,Command:Vo,ContentEditor:fc,Delegator:hc,Exporter:Rc,Highlight:Dc,Importer:Ac,Interaction:nl,Paper:rl,Register:al,Selector:il,Viewport:ol});function ll(e){return"line"===e.type&&e.children&&delete e.children,e}function sl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ul={find:function(e){if(null!=e){var t=this.cellMap;return"object"===P()(e)&&e.isCell?e:t[e]}},_draw:function(e,t,n){var r=this;this.emit("beforedraw",n),e.forEach((function(e){e.draw()})),t.forEach((function(e){r.layout(e)})),this.drawRelatedLines(e),this.emit("afterdraw",n)},_processSiblingSheets:function(e){var t=this.cellMap;e.sort((function(e,t){return t[3]-e[3]}));for(var n=0;n<e.length;n++){var r=e[n],a=t[r[0]],i=t[r[2]];if(a&&i){var o=r[1];"before"!==o&&"after"!==o||i.graphicGroup[o](a.graphicGroup)}}},getRelatedLines:function(e){var t=this.cellMap,n=e.reduce((function(e,t){return e[t.root.model.id]=!0,e}),{}),r=this.getCells().filter((function(e){return e.isLine})),a=[];return r.forEach((function(e){["source","target"].some((function(r){var a=e[r].id,i=t[a];return a&&!i||i&&n[i.root.model.id]}))&&a.push(e)})),a},drawRelatedLines:function(e){this.getRelatedLines(e).forEach((function(e){e.draw()}))},_add:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n={action:"add"};this.emit("beforechange",n);var r=this.cellMap,a=this.rootGroup,i=[],o=[];t.forEach((function(t){var n,a,c,l=t.model,s=t.options,u=[];if(ll(l),s.parent){if(c=r[s.parent],a=c.root.model,n=e._getCellConstructors(a.type),Tr(c.model,l),s.nth>=0){var d=c.model.children;Dr(d,d.indexOf(l),s.nth)}}else a=l,c=null,n=e._getCellConstructors(l.type);gr(l,(function(t,i){i&&i.id&&(c=r[i.id]),void 0!==t.html&&(t.html=Go(t.html)),t.id=t.id||Object(I.a)();var o=t.id,l=c?c.depth+1:0,s=0===l?n[0]:n[n.length-1],d={model:t,cellMap:r,parent:c,depth:l,diagram:e},f=r[a.id];f&&(d.root=f);var p=new s(d);0===l&&(p.isRoot=!0),r[o]=p,u.push(p)}));var f=r[a.id];f&&(i[f.model.id]=f),o=o.concat(u)})),o.sort((function(e,t){return e.zIndex-t.zIndex})),o.forEach((function(e){a.add(e.graphicGroup)}));var c=[];t.forEach((function(e){var t=e.options;t.siblingSheets&&(c=c.concat(t.siblingSheets))})),this._processSiblingSheets(c);var l=t.map((function(e){return e.model}));n.models=l,this._draw(o,Object.values(i),n),this.emit("afterchange",n);var s=l.map((function(e){return r[e.id]}));return s},add:function(e,t){var n,r={};if(Array.isArray(e))n=e.map((function(e){return{model:e}}));else{if(!u()(e))throw new Error("Params is illegal");n=[{model:e,options:t}]}return Array.isArray(t)?n.forEach((function(e,n){e.options=t[n]})):u()(t)&&n.forEach((function(e){e.options=t})),n.forEach((function(e){e.options||(e.options=r)})),this._add(f()(n))},_update:function(e){var t=this,n=this.cellMap,r=[],a={action:"update",models:[]},i={},o=[];e=e.map((function(e){var n=t.find(e.id);return n?(e.cell=n,a.models.push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sl(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:n.model.id},e.model)),e):null})).filter((function(e){return e})),this.emit("beforechange",a),e.forEach((function(e){var t=e.model,a=e.options,c=e.cell,l=c.parent;if(void 0!==a.parent)if(l=n[a.parent]){if(c.parent||(c.parent=l,c.root=l.root,Tr(l.model,c.model)),c.parent&&c.parent!==l){var s=c.parent.model.children;s.splice(s.indexOf(c.model),1),c.parent=l,c.root=l.root,Tr(l.model,c.model)}c.depth=l.depth+1}else if(null===l&&c.parent){var u=c.parent.model.children;u.splice(u.indexOf(c.model),1),c.parent=null,c.root=c}var d=a.nth;if(void 0!==d&&l){var f=l.model.children;Dr(f,f.indexOf(c.model),d)}a.siblingSheets&&(o=o.concat(a.siblingSheets)),c.updateModel(t),r.push(c),void 0!==t.collapsed&&gr(c.model,(function(e){var t=n[e.id];t!==c&&t.drawCollapse()})),i[c.root.model.id]=c.root})),this._processSiblingSheets(o),this._draw(r,Object.values(i),a),this.emit("afterchange",a)},update:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(("string"==typeof e||"object"===P()(e)&&e.isCell)&&u()(n))t=[{id:e}];else{if(!Array.isArray(e))throw new Error("Please set id !");t=e.map((function(e){return{id:e}}))}return u()(n)?t.forEach((function(e){e.model=n})):Array.isArray(n)&&t.forEach((function(e,t){e.model=n[t]})),u()(r)?t.forEach((function(e){e.options=r})):Array.isArray(r)?t.forEach((function(e,t){e.options=r[t]})):t.forEach((function(e){e.options={}})),t.forEach((function(e){e.model=e.model||{},e.model=kn()(e.model),e.options=e.options||{},e.options=kn()(e.options)})),this._update(t)},_remove:function(e){var t=this,n=e.map((function(e){return t.find(e)})).filter((function(e){return e}));if(0!==n.length){n=this.deduplicate(n);var r=this.cellMap,a=n.map((function(e){return e.getAllCells()})).reduce((function(e,t){return e.concat(t)})),i=Sr(n.map((function(e){return e.root}))),o=[],c={action:"remove",roots:i,models:o};n.forEach((function(e){o.push(e.model)})),this.emit("beforechange",c),n.forEach((function(e){if(c.models.push(e.model),e.parent){var t=e.parent.model.children;t.splice(t.indexOf(e.model),1)}})),a.forEach((function(e){e.destroy();var n=t.selector.selections.indexOf(e);-1!==n&&t.selector.selections.splice(n,1),delete r[e.model.id]})),i.forEach((function(e){t.layout(e.model.id)})),this.drawRelatedLines(i),this.emit("afterchange",c)}},remove:function(e){return Array.isArray(e)||(e=[e]),this._remove(e)}},dl={deduplicate:function(e){var t=this;if(!e||0===e.length)return e;if((e=e.concat([])).every((function(t){return t.depth===e[0].depth})))return e;e.sort((function(e,t){return e.depth-t.depth}));for(var n=0;n<e.length;n++){var r=e[n];r&&vr(r.model,(function(n){n=t.find(n.id);var r=e.indexOf(n);-1!==r&&(e[r]=null)}))}return e.filter((function(e){return e}))},snapshot:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[t.map((function(e){return f()(e.model)})),t.map((function(t){return e.getCellOptions(t)}))]},getStaticSVG:function(){var e=this.getCells().filter((function(e){return e.state.beginEdit||e.state.selected||e.state.highlight}));e.forEach((function(e){return e.setDefault()})),this.frontRootGroup.update({visibility:"hidden"}),this.backRootGroup.update({visibility:"hidden"});var t=this.canvas.rendererElement.cloneNode(!0);return t.querySelector('[data-element="back_group"]').remove(),t.querySelector('[data-element="front_group"]').remove(),e.forEach((function(e){return e.updateState()})),this.frontRootGroup.update({visibility:"visible"}),this.backRootGroup.update({visibility:"visible"}),t},getCell:function(e){var t=this.canvasContainer,n=this.cellMap;if(!e||!t.contains(e))return null;for(var r=Object.keys(n),a=0;a<r.length;a++){var i=n[r[a]];if(i.graphicGroup.rendererElement.contains(e))return i}return null},getCellOptions:function(e){var t=this,n=this.cellMap,r=[];return gr(e.model,(function(e){var a=n[e.id],i=t.getSibling(a);i&&(i.unshift(a.model.id),i.push(a.getZIndex()),r.push(i))})),{parent:e.parent&&e.parent.model.id,nth:e.getNth(),siblingSheets:r}},getSibling:function(e){var t=e.graphicGroup.getSiblingRendererElement();return t?(t[1]=this.getCell(t[1]).model.id,t):null},getCells:function(){var e=[];return this.deepEach((function(t){e.push(t)})),e},getCellsByZIndex:function(){var e=[];return this.deepEach((function(t){e.push([t,t.getZIndex()])})),e.sort((function(e,t){var n=M()(e,2)[1],r=M()(t,2)[1];return n>r?1:n<r?-1:0})),e.map((function(e){return e[0]}))},getCellByPoint:function(e){for(var t=this.getCellsByZIndex(),n=t.length-1;n>=0;n--){var a=t[n];if(!a.locked){var o=a.width,c=a.height,l=a.matrix,s=i.transformMat3([],[].concat(B()(e),[1]),r.invert([],l)),u=M()(s,2),d=u[0],f=u[1];if(d>=0&&f>=0&&d<=o&&f<=c)return a}}}},fl={changePaper:function(e){Object.assign(this.paper,e),this.viewport.refresh()},changeSize:function(e,t){this.width=e,this.height=t,this.viewport.refresh()}},pl=Object.freeze({__proto__:null,Crud:ul,Get:dl,Change:fl});function hl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ml(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hl(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gl=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(g()(this,e),!t.diagram)throw new Error("cell requires diagram!");Object.assign(this,ml({model:{},parent:null,computedProps:{},penetratedKeys:[],anchors:[],stroke:{width:1}},t)),this.root=this.root||this,this.type=this.root.model.type,this.isCell=!0,this.matrix=[1,0,0,0,1,0,0,0,1],this.graphicGroup=new _a,this.eventHelper=new Uo,this.state={visible:!0},this.zIndex=this.model.zIndex||0,this.cache={},this.options=t,this.multiSelectHighlight=!0,this.penetratedKeys=["strokeStyle"].concat(this.penetratedKeys)}return y()(e,[{key:"canDelete",value:function(){return!0}},{key:"canFill",value:function(){return!0}},{key:"canStroke",value:function(){return!0}},{key:"canStrokeWidth",value:function(){return!0}},{key:"canStrokeStyle",value:function(){return!0}},{key:"canMove",value:function(){return!1}},{key:"canCollapse",value:function(){var e=this.model;return e.children&&e.children.length>0&&!0!==this.collapsed}},{key:"canExpand",value:function(){var e=this.model;return e.children&&e.children.length>0&&!0===this.collapsed}},{key:"convertStrokeStyle",value:function(){if("dash"===this.stroke.style){var e=this.stroke.width||1;return{"stroke-dasharray":[e,3*e].join(" ")}}return{"stroke-dasharray":"none"}}},{key:"setDefault",value:function(){}},{key:"get",value:function(e){return f()(this[e])}},{key:"getOuterWidth",value:function(){return this.model.width}},{key:"isDiscrete",value:function(){}},{key:"beginEditContent",value:function(){}},{key:"endEditContent",value:function(){}},{key:"shouldRefreshEndEditContent",value:function(){return!1}},{key:"isContentEmpty",value:function(){var e=this.html,t=document.createElement("div");return t.innerHTML=e,!t.textContent||"%E2%80%8B"===encodeURI(t.textContent)}},{key:"draw",value:function(){}},{key:"getRelativePoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.width,r=this.height,a=this.getCanvasPoint({x:e.x*(n+2*t),y:e.y*(r+2*t)},t);return a}},{key:"getCanvasPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.matrix,r=i.transformMat3([],[e.x-t,e.y-t,1],n),a=M()(r,2),o=a[0],c=a[1];return{x:o,y:c}}},{key:"rotateTo",value:function(e){var t=[1,0,0,0,1,0,0,0,1];r.fromRotation(t,e),this.matrix[0]=t[0],this.matrix[1]=t[1],this.matrix[3]=t[3],this.matrix[4]=t[4],this.graphicGroup.update({matrix:this.matrix})}},{key:"getAbsBBox",value:function(){var e=this.getRelativePoint({x:0,y:0}),t=this.getRelativePoint({x:1,y:0}),n=this.getRelativePoint({x:0,y:1}),r=this.getRelativePoint({x:1,y:1}),a=Math.min(e.x,t.x,n.x,r.x),i=Math.min(e.y,t.y,n.y,r.y),o=Math.max(e.x,t.x,n.x,r.x),c=Math.max(e.y,t.y,n.y,r.y);return{minX:a,minY:i,maxX:o,maxY:c,x:a,y:i,width:o-a,height:c-i}}},{key:"eventDelegation",value:function(){}},{key:"getEventObject",value:function(e){return e}},{key:"getChildren",value:function(){var e=this.cellMap;return this.model.children.map((function(t){return e[t.id]}))}},{key:"getAllCells",value:function(){var e=this.cellMap,t=[];return gr(this.model,(function(n){t.push(e[n.id])})),t}},{key:"getSiblings",value:function(){var e=this,t=this.cellMap;return this.parent.model.children.filter((function(t){return t.id!==e.model.id})).map((function(e){return t[e.id]}))}},{key:"getLastSibling",value:function(){return this.getSiblings()[this.parent.model.children.indexOf(this.model)-1]}},{key:"getNextSibling",value:function(){return this.getSiblings()[this.parent.model.children.indexOf(this.model)]}},{key:"delegateEvent",value:function(e,t,n){var r=this,a=this.eventHelper,i=this.diagram;a.bind(e,t,(function(e){return i.emit(n,r.getEventObject(e))}))}},{key:"hide",value:function(){this.graphicGroup.css({display:"none"}),this.state.visible=!1}},{key:"show",value:function(){this.graphicGroup.css({display:""}),this.state.visible=!0}},{key:"updateState",value:function(){}},{key:"select",value:function(){this.state.selected=!0,this.state.highlight=!1,this.updateState()}},{key:"unSelect",value:function(){this.state.selected=!1,this.updateState()}},{key:"highlight",value:function(){this.state.highlight=!0,this.updateState()}},{key:"unHighlight",value:function(){this.state.highlight=!1,this.updateState()}},{key:"toBack",value:function(){this.graphicGroup.toBack()}},{key:"toFront",value:function(){this.graphicGroup.toFront()}},{key:"forward",value:function(){this.graphicGroup.forward()}},{key:"backward",value:function(){this.graphicGroup.backward()}},{key:"closest",value:function(e,t){return jr(this,e,t)}},{key:"getZIndex",value:function(){return this.graphicGroup.getZIndex()}},{key:"getNth",value:function(){return this.parent?this.parent.model.children.indexOf(this.model):0}},{key:"forEach",value:function(e){var t=this.cellMap;this.model.children.forEach((function(n,r){e(t[n.id],r)}))}},{key:"deepEach",value:function(e){var t=this.cellMap;gr(this.model,(function(n){e(t[n.id])}))}},{key:"deepEachWithoutSelf",value:function(e){var t=this.cellMap;vr(this.model,(function(n){e(t[n.id])}))}},{key:"render",value:function(){}},{key:"update",value:function(e){this.updateModel(e),this.draw()}},{key:"updateModel",value:function(e){e&&(h()(this.model,e,(function(e,t){if(Array.isArray(e))return t})),this.normalize(),this.merge())}},{key:"normalize",value:function(){var e=this;Object.keys(this.model).forEach((function(t){var n=e.model[t];null==n?e.model[t]=void 0:u()(n)&&(Object.values(n).every((function(e){return null==e}))?e.model[t]=void 0:Object.keys(n).forEach((function(r){null==n[r]&&(e.model[t][r]=void 0)})))}))}},{key:"merge",value:function(){var e=this,t=this.model,n=this.penetratedKeys;Object.keys(t).filter((function(e){return n.includes(e)})).forEach((function(n){var r=t[n],a=e.default&&f()(e.default[n]);u()(r)&&a?Object.keys(r).forEach((function(t){var i=r[t];e[n][t]=null==i?a[t]:i})):e[n]=null==r?a:r}))}},{key:"isCacheStale",value:function(){for(var e=this,t=this.cache,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return r.some((function(n){var r=t[n],a=e[n];if(u()(a)&&u()(r))for(var i in a)if(a[i]!==r[i])return!0;return r!==a}))}},{key:"getPoint",value:function(e){var t=this.anchors,n=P()(e);if("string"===n){var r=t.find((function(t){return t.name===e}));if(r)return this.getRelativePoint(r)}if("number"===n)if(e>=1&&e<t.length){var a=t[e-1];if(a)return this.getRelativePoint(a)}else if(e>=0)return this.getPointAtLength(e);if(Array.isArray(e)){var i=M()(e,2),o=i[0],c=i[1];return e.every((function(e){return e>=0&&e<=1}))?this.getRelativePoint({x:o,y:c}):{x:o,y:c}}throw new Error("unknown connection point ".concat(e))}},{key:"getKeyShape",value:function(){var e;return vr(this.graphicGroup,(function(t){if(t.isPath)return e=t,!1})),e}},{key:"getSvgPoint",value:function(e){var t=e.x,n=e.y,r=this.diagram.canvas.rendererElement.createSVGPoint();return r.x=t,r.y=n,r}},{key:"isPointInShape",value:function(e){var t=this.matrix,n=i.transformMat3([],[e.x,e.y,1],r.invert([],t)),a=M()(n,2),o=a[0],c=a[1],l=this.getSvgPoint({x:o,y:c}),s=this.getKeyShape();return s.isPointInFill(l)||s.isPointInStroke(l)}},{key:"getIntersectionPoint",value:function(e,t){for(var n=qr(e.x,e.y,t.x,t.y),r=e.x,a=e.y,i=n<=Math.PI/2||n>=3*Math.PI/2?1:-1,o=n>=Math.PI?-1:1,c=Math.abs(Math.tan(n))>1;this.isPointInShape({x:r,y:a});)c?(r+=o/Math.tan(n),a+=o):(r+=i,a+=i*Math.tan(n));return{x:r,y:a}}},{key:"getPointAtLength",value:function(e){var t=this.getKeyShape(),n=t.getTotalLength(),r=t.getPointAtLength(e*n);return this.getCanvasPoint(r)}},{key:"getConnection",value:function(e){var t=this.matrix,n=[e[0],e[1],1],a=i.transformMat3([],n,r.invert([],t)),o=M()(a,2),c=o[0],l=o[1],s=this.width,u=this.height;if(!(c<-8||c>s+8||l<-8||l>u+8)){for(var d=this.getKeyShape(),f=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8;n||(n=e.getBoundingClientRect()),e.rendererElement&&(e=e.rendererElement);var a=n,i=a.top,o=a.right,c=a.bottom,l=a.left,s=M()(t,2),u=s[0],d=s[1];if(!(u<l-r||u>o+r||d<i-r||d>c+r)){for(var f=l+(o-l)/2,p=i+(c-i)/2,h=e.closest("svg"),m=u>o?o:u<l?l:u,g=d>c?c:d<i?i:d,v=l;v<=f&&Ur(u,d,v,d)<=r;){var y=$c(h,[v,d]);if(e.isPointInStroke(y))return[v,g];v++}for(v=o;v>=f&&Ur(u,d,v,d)<r;){var b=$c(h,[v,d]);if(e.isPointInStroke(b))return[v,g];v--}for(var k=i;k<=c&&Ur(u,d,u,k)<=r;){var w=$c(h,[u,k]);if(e.isPointInStroke(w))return[m,k];k++}for(k=c;k>=p&&Ur(u,d,u,k)<=r;){var x=$c(h,[u,k]);if(e.isPointInStroke(x))return[m,k];k--}}}(d,[c,l],{top:0,right:s,bottom:u,left:0}),p=this.anchors,h=f||[c,l],m=0;m<p.length;m++){var g=p[m],v=[g.x*s,g.y*u];if(Ur(h[0],h[1],v[0],v[1])<=8)return g.name||[g.x,g.y]}if(f)return[f[0]/s,f[1]/u];var y=this.getSvgPoint({x:c,y:l});return d.isPointInFill(y)?this:void 0}}},{key:"drawPosition",value:function(){}},{key:"drawCollapse",value:function(){}},{key:"drawInherit",value:function(){}},{key:"destroy",value:function(){this.eventHelper.destroy(),this.graphicGroup.destroy(),this.destroyed=!0}}]),e}();function vl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vl(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}l()(gl,"className","Cell");var bl=function(){function e(t){g()(this,e),Object.assign(this,yl({algorithms:{},model:{},parse:function(){return{}}},t))}return y()(e,[{key:"_parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.parse,a=yl({w:e.width||10,h:e.height||10,quadrants:e.quadrants||2,quadrant:e.quadrant||"1",direction:e.direction||[1,0],collapsed:e.collapsed||!1,layout:e.layout,origin:e,depth:n,children:[],parent:t},r(e));if(a.quadrants&&(a.quadrants=this._parseQuadrants(a.quadrants)||["1","2"]),a.quadrant&&(a.quadrant=String(a.quadrant)),e.children)for(var i=0;i<e.children.length;i++){var o=e.children[i];a.children.push(this._parse.call(this,o,a,n+1))}return a}},{key:"_buildTree",value:function(){var e=this.model,t=this._parse(e);t.x=void 0!==e.x?e.x:0,t.y=void 0!==e.y?e.y:0,t.layout=t.layout||"standard",this.tree=t}},{key:"_parseQuadrants",value:function(e){var t=e;if("number"==typeof e&&e>0){t=[];for(var n=1;n<e+1;n++)t.push(String(n))}return t}},{key:"_splitTreeByQuadrant",value:function(){var e=this,t=this.tree.quadrants;t.forEach((function(t){var n=yl(yl({},e.tree),{},{isQuadrantTree:!0,children:[]});e[t+"Tree"]=n})),this.tree.children.forEach((function(n){-1!==t.indexOf(n.quadrant)?e[n.quadrant+"Tree"].children.push(n):e[t[0]+"Tree"].children.push(n)}))}},{key:"_splitSubTrees",value:function(){var e=this;this.tree.quadrants.forEach((function(t){var n=e[t+"Tree"];if(n){var r=[];gr(n,(function(e){e.layout&&(e.isQuadrantTree||(e.isSubTree=!0),r.unshift(e))})),e[t+"SubTrees"]=r}}))}},{key:"_layout",value:function(){var e,t=this,n=this.algorithms,r=this.tree.quadrants;r.forEach((function(a,i){var o=t[a+"Tree"];if(o){var c=e=o.direction;if(i>0){var l=2*Math.PI*i/r.length;c=[parseInt(e[0]*Math.cos(l)),parseInt(e[1]*Math.cos(l))]}t[a+"SubTrees"].forEach((function(e){e.x=e.x||0,e.y=e.y||0;var t=1/0,r=-1/0,a=1/0,i=-1/0;e.children&&e.children.length>0&&n[e.layout].layout(e,{direction:String(!e.isQuadrantTree&&e.direction||c)}),gr(e,(function(e){var n=e.x,o=e.y,c=e.x+e.w,l=e.y+e.h;n<t&&(t=n),o<a&&(a=o),c>r&&(r=c),l>i&&(i=l)})),e.tx=t,e.ty=a,e.tw=r-t,e.th=i-a}))}}))}},{key:"execute",value:function(){return this._buildTree(),this._splitTreeByQuadrant(),this._splitSubTrees(),this._layout(),this.tree}}]),e}(),kl=Object.freeze({__proto__:null,Event:Uo,Layout:bl,Comparator:ia});function wl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xl(e){var t=new Da,n=new ai({x:-3,y:-3,width:6,height:6,rx:1,stroke:"#096DD9",fill:"white"}),r=new ai({x:-10,y:-10,width:20,height:20,fill:"transparent"});return t.add(r),t.add(n),t.css({cursor:"move"}),t.dataset({lake_prevent_click_unselect:!0}),{group:t,shape:n,name:e}}var _l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g()(this,e),Object.assign(this,t);var n=this.group,r=this.cell,a=["source","target"].map((function(e){return xl(e)}));a.forEach((function(e){return n.add(e.group)})),this.buttons=a,this.diagram=r.diagram,this.eventHelper=new Uo,this.cacheEndpointId=null}return y()(e,[{key:"update",value:function(){var e=this.buttons,t=this.cell,n=this.diagram;if(this.group.parent){var r=M()(e,2),a=r[0],i=r[1],o=Ma(t.d),c=o[0].slice(1),l=o[o.length-1],s=l.slice(l.length-2),u=1/n.viewport.zoom;if(a.group.update({scale:u,x:c[0],y:c[1]}),i.group.update({scale:u,x:s[0],y:s[1]}),"straight"===t.shape){var d=qr(c[0],c[1],s[0],s[1]);e.forEach((function(e){return e.group.update({rotate:d})}))}else e.forEach((function(e){return e.group.update({rotate:0})}))}}},{key:"bindEvent",value:function(){var e,t,n,r=this,a=this.buttons,i=this.cell,o=this.diagram,c=this.eventHelper,s=function(){o.resetCursor(),e=void 0,t=void 0,n=void 0,r.cacheEndpointId&&o.highlight.clear(),r.cacheEndpointId=null};a.forEach((function(n){var r=n.name,a=n.group;c.bind(a,"mousedown",(function(){e=r,t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wl(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({connection:null,id:null,marker:null},i.model[e])}))})),c.bind(o,"mousemove",(function(t){if("source"===e||"target"===e){var a="source"===e?"target":"source",c=o.viewport.invertClient([t.clientX,t.clientY]);if((n=Xc(o,c)).connection&&!n.id){var s=i.getEndpoint(i[a]);Qc([s.x,s.y],n.connection)}r.cacheEndpointId!==n.id&&(o.highlight.dock([o.find(n.id)]),r.cacheEndpointId=n.id),o.update(i,l()({},e,n)),o.setCursor("move"),r.update()}})),c.bind(o,"mouseup",(function(){"source"!==e&&"target"!==e||(o.update(i,l()({},e,t)),o.command.execute("Update",{id:i.model.id,model:l()({},e,n)}),s())})),c.bind(o,"keydown",(function(n){var a=r.cell,i=r.diagram;!e||"Esc"!==n.key&&"Escape"!==n.key||(i.update(a,l()({},e,t)),r.update(),s())})),c.bind(o,"afterviewportchange",$()((function(){var e=r.buttons,t=r.cell;e&&t&&r.update()}),16))}},{key:"begin",value:function(){this.update(),this.bindEvent()}},{key:"end",value:function(){this.eventHelper.unbind()}},{key:"destroy",value:function(){this.eventHelper.unbind(),this.group&&this.group.clear(),this.group=null,this.diagram=null,this.cell=null,this.buttons=null}}]),e}();function Cl(e){var t=new Da,n=new ai({x:-3,y:-3,rx:3,ry:3,width:6,height:6,stroke:"#096DD9",fill:"white"}),r=new ai({x:-10,y:-10,width:20,height:20,fill:"transparent"});return t.add(r),t.add(n),t.css({cursor:"move"}),t.dataset({lake_prevent_click_unselect:!0}),{group:t,shape:n,index:e}}var El=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g()(this,e),Object.assign(this,t);var n=this.group,r=this.cell,a=r.controlPoints.map((function(e,t){return Cl(t)}));a.forEach((function(e){return n.add(e.group)})),this.buttons=a,this.diagram=r.diagram,this.eventHelper=new Uo}return y()(e,[{key:"update",value:function(){var e=this.buttons,t=this.cell,n=this.diagram,r=this.group;if(r.parent)if(t.isLoop)r.css({display:"none"});else{r.css({display:""});var a=1/n.viewport.zoom;e.forEach((function(e){var n=e.group,r=e.index,i=t.getControlPointButtonPosition(r);n.update({scale:a,x:i[0],y:i[1]})}))}}},{key:"bindEvent",value:function(){var e,t,n=this,r=this.buttons,a=this.cell,i=this.diagram,o=this.eventHelper,c=function(){i.resetCursor(),e=void 0,t=void 0};r.forEach((function(n){var r=n.index,c=n.group;o.bind(c,"mousedown",(function(){e=r,t={controlPoints:f()(a.controlPoints)},i.setCursor("move")}))})),o.bind(i,"mousemove",(function(t){if(void 0!==e){var n=i.viewport.invertClient([t.clientX,t.clientY]),r=a.controlPoints[e];r[0]=n[0],r[1]=n[1],a.draw()}})),o.bind(i,"mouseup",(function(){if(void 0!==e){var n=f()(a.controlPoints);i.update(a,t),i.command.execute("Update",{id:a.model.id,model:{controlPoints:n}}),c()}})),o.bind(i,"keydown",(function(r){var a=n.cell,i=n.diagram;!e||"Esc"!==r.key&&"Escape"!==r.key||(i.update(a,t),n.update(),c())})),o.bind(i,"afterviewportchange",$()((function(){var e=n.buttons,t=n.cell;e&&t&&n.update()}),16))}},{key:"begin",value:function(){this.update(),this.bindEvent()}},{key:"end",value:function(){this.eventHelper.unbind()}},{key:"destroy",value:function(){this.eventHelper.unbind(),this.group&&this.group.clear(),this.group=null,this.diagram=null,this.cell=null,this.buttons=null}}]),e}(),Ol=function(){function e(t){g()(this,e);var n=new _a,r=[],a=new _a,i=new _l({group:a,cell:t});if(n.add(a),r.push(i),t.controlPoints.length>0){var o=new _a,c=new El({group:o,cell:t});n.add(o),r.push(c)}this.diagram=t.diagram,this.subResizers=r,this.group=n}return y()(e,[{key:"update",value:function(){this.subResizers.forEach((function(e){return e.update()}))}},{key:"bindEvent",value:function(){this.subResizers.forEach((function(e){return e.bindEvent()}))}},{key:"begin",value:function(){var e=this.subResizers;this.diagram.frontRootGroup.prepend(this.group),e.forEach((function(e){return e.begin()}))}},{key:"end",value:function(){var e=this.subResizers,t=this.group;e.forEach((function(e){return e.end()})),t&&t.remove()}},{key:"destroy",value:function(){var e=this.subResizers;this.group.remove(),e.forEach((function(e){return e.destroy()}))}}]),e}(),Sl=function(){function e(t){g()(this,e),this.cell=t}return y()(e,[{key:"render",value:function(){}},{key:"update",value:function(){}},{key:"draw",value:function(){}},{key:"drawInherit",value:function(){}},{key:"drawPosition",value:function(){}},{key:"setDefault",value:function(){}},{key:"updateState",value:function(){}},{key:"destroy",value:function(){}}]),e}();function Rl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rl(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Al=function(e){x()(n,Sl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"render",value:function(){var e=this.cell,t=e.graphicGroup,n={"stroke-linecap":"round","stroke-linejoin":"round"},r=new Ka(n),a=new Ka(n);t.add(r),this.element=r,this.hitElement=a,e.wireElement=r,this.initMarker()}},{key:"initMarker",value:function(){var e=this.cell.diagram.defs,t=new Si({markerWidth:4,markerHeight:4,refX:7,refY:5,orient:"auto-start-reverse",viewBox:[0,0,10,10]});t.attr({id:Object(I.a)()}),e.add(t);var n=new Ka({d:La([["M",0,0],["L",10,5],["L",0,10],["Z"]]),fill:"#595959",stroke:"#595959"});t.add(n),this.marker=t,this.markerPath=n}},{key:"draw",value:function(){var e=this.cell,t=this.element,n=this.marker,r=this.hitElement,a=e.d,i=e.stroke,o=e.graphicGroup,c={d:a},l="url(#".concat(n.attr("id"),")");c["marker-start"]="arrow"===e.source.marker?l:null,c["marker-end"]="arrow"===e.target.marker?l:null,this.markerPath.update({fill:i.color,stroke:i.color}),t.update(Dl(Dl({stroke:i.color,"stroke-width":i.width,fill:"none"},e.convertStrokeStyle()),c)),!r.parent&&o.insertAfter(r,t),r.update({stroke:"rgba(255,255,255,0)","stroke-width":i.width+8,fill:"none",d:c.d})}},{key:"destroy",value:function(){this.marker.destroy(),k()(O()(n.prototype),"destroy",this).call(this)}}]),n}();function Tl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Pl=function(e){x()(n,Sl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"render",value:function(){var e=this.cell,t=e.graphicGroup,n=new Za({styleSheets:e.textAreaContentStyleSheets,html:e.html});n.htmlContainer.classList.add("selection-transparent"),t.add(n),this.element=n,e.textAreaElement=n,this.initCalculatedDOM(),this.update()}},{key:"initCalculatedDOM",value:function(){var e=this.cell.diagram,t=document.createElement("div");e.calculatedContainer.appendChild(t),this.calculatedDOM=t}},{key:"update",value:function(){var e=this.cell,t=this.calculatedDOM,n=e.cache,r=e.textAreaContentStyleSheets;n.html!==e.html&&(t.innerHTML=e.html),this.updateStyleSheets(),["html","width","height"].some((function(t){return n[t]!==e[t]}))&&(Mr(t,r),this._setBBox())}},{key:"updateStyleSheets",value:function(){for(var e=this.cell,t=e.textAreaContentStyleSheets,n=e.getPadding(),r=e.isDiscrete(),a=0;a<t.length;a++){var i=t[a];if("self"===i.query){var o=e.getOuterWidth();i.css.width=o&&!r?o-n[1]-n[3]+"px":""}}}},{key:"getPosition",value:function(){return{x:0,y:0}}},{key:"calculateBBox",value:function(){var e=this.calculatedDOM;e.style.display="inline-block";var t=e.getBoundingClientRect();return e.style.display="none",t}},{key:"_setBBox",value:function(){this.box=this.calculateBBox()}},{key:"getBBox",value:function(){return this.box}},{key:"draw",value:function(){var e=this.cell,t=this.element,n=this.box,r=e.cache,a=e.textAreaContentStyleSheets,i={};r.html!==e.html&&(i.html=e.html),["html","width","height"].some((function(t){return r[t]!==e[t]}))&&(Mr(t.htmlContainer,a),Object.assign(i,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tl(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({width:Math.ceil(n.width),height:Math.ceil(n.height)},this.getPosition()))),Object.keys(i).length>0&&(t.update(i),"read"===e.diagram.interaction.currentMode&&t.htmlContainer.querySelectorAll("a").forEach((function(e){var t=e.href,n=window.location.origin+window.location.pathname;(t===n||t.startsWith(n+location.search+"#"))&&e.removeAttribute("target")})))}},{key:"destroy",value:function(){this.element.destroy(),this.calculatedDOM.remove()}}]),n}();l()(Pl,"className","TextArea"),l()(Pl,"configName","textArea"),l()(Pl,"zIndex",2);var jl=function(e){x()(n,Pl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"updateStyleSheets",value:function(){var e=this.cell,t=e.textAreaContentStyleSheets.find((function(e){return"self"===e.query}));e.diagram.contentEditor.isBegin&&e.diagram.contentEditor.dom===e.textAreaElement.htmlContainer?(t.css.padding="4px 8px",t.css["min-height"]="28px",t.css["min-width"]="54px"):(e.isContentEmpty()?t.css.padding=0:t.css.padding="4px 8px",t.css["min-height"]=0,t.css["min-width"]=0)}},{key:"getPosition",value:function(){var e=this.cell,t=this.box,n=e.getTextAreaPosition();return{x:n.x-t.width/2,y:n.y-t.height/2}}},{key:"calculateBBox",value:function(){var e=this.calculatedDOM;e.style.display="inline-block";var t=e.getBoundingClientRect();return e.style.display="none",t}}]),n}();function Ml(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ml(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ml(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ll=function(e){x()(n,gl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g()(this,n),r=Cr({default:{textAreaContentStyleSheets:[{query:"self",css:{outline:"none","white-space":"normal","letter-spacing":"normal","font-size":"14px","font-family":'PingFangSC-Regular, "PingFang SC", sans-serif',"line-height":"1.74","word-break":"break-word","box-sizing":"border-box",padding:"4px",background:"white",color:"#262626"}}],shape:"straight",stroke:{color:"#595959",width:2},html:'<div style="text-align: center;">'.concat("&#8203;","</div>"),source:{},target:{},controlPoints:[]},penetratedKeys:["source","target","stroke","fill","html","shape","controlPoints"]},r),e=t.call(this,r),Object.assign(R()(e),f()(r.default)),e.Subcells=[Al,jl],e.subcells=e.Subcells.map((function(t){return new t(R()(e))})),e.render(),e.isLine=!0,e.isLoop=!1,e.resizer=new Ol(R()(e)),e}return y()(n,[{key:"isDrawable",value:function(){var e=this.diagram,t=this.target,n=this.source,r=e.find(n.id),a=n.id&&!r||r&&!1===r.state.visible,i=e.find(t.id),o=t.id&&!i||i&&!1===i.state.visible;return!(a||o)}},{key:"shouldRefreshEndEditContent",value:function(){return this.isContentEmpty()}},{key:"canFill",value:function(){return!1}},{key:"canMove",value:function(){var e=this;return["source","target"].every((function(t){var n=e[t];return!n.id&&Array.isArray(n.connection)}))}},{key:"beginEditContent",value:function(){this.textAreaElement.css({outline:"1px solid #096DD9"})}},{key:"endEditContent",value:function(){this.textAreaElement.css({outline:"none"})}},{key:"getPointByPercent",value:function(e){var t=this.wireElement,n=t.getTotalLength();return t.getPointAtLength(e*n)}},{key:"getPadding",value:function(){return[0,0,0,0]}},{key:"getEndpoint",value:function(e){var t=this.diagram,n=e.id,r=e.connection,a=t.find(n);if(a)return r?a.getPoint(r):a.getPoint([.5,.5]);if(Array.isArray(r)){var i=M()(r,2);return{x:i[0],y:i[1]}}return r}},{key:"getAbsBBox",value:function(){var e=this.wireElement.rendererElement.getBBox();return{x:e.x,y:e.y,width:e.width,height:e.height,minX:e.x,minY:e.y,maxX:e.x+e.width,maxY:e.y+e.height}}},{key:"getShapeObj",value:function(){var e=this.shape;return this.constructor.Shapes[e]}},{key:"getFirstInsertControlPoints",value:function(){return this.getShapeObj().getFirstInsertControlPoints(this)}},{key:"getTextAreaPosition",value:function(){return this.getShapeObj().getTextAreaPosition(this)}},{key:"getControlPointButtonPosition",value:function(e){return this.getShapeObj().getControlPointButtonPosition(this,e)}},{key:"getPath",value:function(){var e=this.shape,t=this.sourceCell,n=this.isLoop,r=this.getShapeObj();if(n){var a=t.getPoint([1,.5]);return La([["M",a.x,a.y-8],["l",16,-4],["l",0,24],["L",a.x,a.y+8]])}if(r)return r.getPath(this);throw new Error("unsupported line shape ".concat(e))}},{key:"updatePath",value:function(){this.isCacheStale("shape","source","target")&&(this.d=this.getPath())}},{key:"render",value:function(){var e=this.model;this.subcells.forEach((function(e){return e.render()})),this.updateModel(e)}},{key:"updateModel",value:function(e){k()(O()(n.prototype),"updateModel",this).call(this,e),this.subcells.forEach((function(e){e.update()}))}},{key:"draw",value:function(){if(this.isDrawable()){var e=this.source,t=this.target,n=this.diagram,r=n.find(e.id),a=n.find(t.id);this.isLoop=null!=r&&r===a,this.sourceCell=r,this.targetCell=a,this.show(),this.updatePath(),this.subcells.forEach((function(e){return e.draw()})),this.drawPosition()}else this.hide()}},{key:"updateCache",value:function(){var e=this,t=this.cache;["shape","source","target"].forEach((function(n){var r=e[n];t[n]=u()(r)?Nl({},r):r}))}},{key:"drawPosition",value:function(){if(this.isCacheStale("matrix")){var e=this.graphicGroup,t=this.matrix;e.update({matrix:t}),this.resizer.update()}}},{key:"getPoints",value:function(){var e=this.source,t=this.target,n=this.sourceCell,r=this.targetCell,a=this.getEndpoint(e),i=this.getEndpoint(t);if(!a||!i)return[a,i];var o=this.controlPoints.map((function(e){var t=M()(e,2);return{x:t[0],y:t[1]}})),c=o.length;return n&&!e.connection&&(a=n.getIntersectionPoint(a,o[0]||i)),r&&!t.connection&&(i=r.getIntersectionPoint(i,o[c-1]||a)),[a].concat(o).concat(i)}},{key:"destroy",value:function(){this.subcells.forEach((function(e){return e.destroy()})),this.resizer.destroy(),k()(O()(n.prototype),"destroy",this).call(this)}}]),n}();l()(Ll,"className","LineCell"),l()(Ll,"Shapes",{}),Ll.registerShape=function(e,t){this.Shapes[e]=Nl({getFirstInsertControlPoints:function(){return!1},getTextAreaPosition:function(e){return e.getPointByPercent(.5)},getControlPointButtonPosition:function(e,t){return e.controlPoints[t]}},t)},Ll.registerShape("straight",{getPath:function(e){return za(e.getPoints())}}),Ll.registerShape("curve",{getControlPointButtonPosition:function(e,t){var n=e.controlPoints,r=e.diagram,a=e.subcells.find((function(e){return e instanceof jl})),i=n[t].concat([]);return e.isContentEmpty()&&!r.contentEditor.isBegin||(i[1]+=a.box.height/2),i},getTextAreaPosition:function(e){return e.controlPoints.length>0?{x:e.controlPoints[0][0],y:e.controlPoints[0][1]}:e.getPointByPercent(.5)},getPath:function(e){var t=e.getPoints();if(2===t.length)return za(t);if(3===t.length)return La([["M",t[0].x,t[0].y],["Q",(t[1].x-.25*t[2].x-.25*t[0].x)/.5,(t[1].y-.25*t[2].y-.25*t[0].y)/.5,t[2].x,t[2].y]]);var n=Va(t.reduce((function(e,t){return e.push(t.x),e.push(t.y),e}),[]));return n.unshift(["M",t[0].x,t[0].y]),La(n)},getFirstInsertControlPoints:function(e){var t=e.getPointAtLength(.5);return[[t.x,t.y]]}}),gl.Line=Ll;var Il={plugins:[]},zl="2.0.0";function Bl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bl(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vl=F.HotKeyUtils.isHotkey,Ul=function(e){x()(n,A.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(e){var r;g()(this,n),e=Fl({locale:{},container:null,width:500,height:500,plugins:[],paper:null,padding:null,mode:"edit",head:{}},e),(r=t.call(this,e)).options=e,r.nativeEvents=["click","dblclick","mousedown","mouseup","mousemove","mouseenter","mouseleave","hover","drop","dragover","touchstart","touchmove","touchend","keydown","keyup","keypress","compositionstart","compositionend","wheel","scroll","copy","paste","cut","contextmenu"],r.Cells={Cell:gl,Line:gl.Line},r.head=Fl({version:"2.0.0"},e.head),r.cellMap={},r.elementMap={},r.signal={keydown:{}},r.settings={};var a=e.container,i=r._createViewportContainer(),o=r._createCanvasContainer(),c=r._createInputElement();return r.container=a,r.viewportContainer=i,r.canvasContainer=o,r.input=c,a.appendChild(i),i.appendChild(o),i.appendChild(c),r.width=e.width,r.height=e.height,r.calculatedContainer=r._appendCalculatedContainer(),r._initMixin(),r._initCanvas(),r._initExtend(),r._bindGlobalEvent(),r}return y()(n,[{key:"_bindGlobalEvent",value:function(){n._boundGlobalEvent||(window.addEventListener("mousedown",(function(e){!e.target.closest("[data-lake_prevent_click_unselect]")||e.target.matches("input")||e.target.matches("textarea")||e.preventDefault()})),n._boundGlobalEvent=!0)}},{key:"_createViewportContainer",value:function(){var e=document.createElement("div");return e.style.position="relative",e.style.outline="none",e.style["user-select"]="text",e.setAttribute("tabindex",0),e.setAttribute("focusable",!0),e.setAttribute("dragable",!1),e.addEventListener("dragstart",(function(e){return e.preventDefault()})),e}},{key:"_createCanvasContainer",value:function(){return document.createElement("div")}},{key:"_createInputElement",value:function(){var e=this,t=document.createElement("div");return t.setAttribute("contenteditable",!0),t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.right="0",t.style.bottom="0",t.style.width="100px",t.style.height="40px",t.margin="auto",t.style["z-index"]=2,t.style.outline="none",t.style.opacity=0,t.style["pointer-events"]="none",t.addEventListener("keydown",(function(t){Vl("mod+v",t)||e.selector.selections.length>0&&(Vl("mod+c",t)||Vl("mod+x",t))||t.preventDefault()})),t}},{key:"_appendCalculatedContainer",value:function(){var e=this.options.container,t=document.createElement("div"),n=document.createElement("div");return t.appendChild(n),e.appendChild(t),t.style.opacity=0,t.style.height=0,t.style.width=0,t.style.overflow="hidden",n.style.width="10000px",n}},{key:"_initMixin",value:function(){var e=this;Object.keys(pl).forEach((function(t){var n=pl[t];Object.assign(e,n)}))}},{key:"_initExtend",value:function(){var e=this.options;this.extend={},this.addExtend(Object.keys(cl).map((function(e){return cl[e]}))),this.register.init(Il.plugins.concat(e.plugins)),this.paper.init(e.paper||{size:[828,1170]}),this.viewport.init(),this.interaction.init(e.mode)}},{key:"_initCanvas",value:function(){var e=this.canvasContainer,t=this.calculatedContainer;this.canvas=new Oa({container:e,calculatedContainer:t}),this.rootGroup=new _a,this.frontRootGroup=new _a,this.backRootGroup=new _a,this.frontRootGroup.dataset({element:"front_group"}),this.backRootGroup.dataset({element:"back_group"}),this.defs=new xi,this.canvas.add(this.defs),this.canvas.add(this.backRootGroup),this.canvas.add(this.rootGroup),this.canvas.add(this.frontRootGroup)}},{key:"_getCellConstructors",value:function(e){var t=this.Cells;if(!e)return[t.Cell];var n=e.charAt(0).toUpperCase()+e.substring(1),r=t[n+"Root"],a=t[n+"Cell"];return r&&a?[r,a]:a||(a=t[n])?[a]:void 0}},{key:"addExtend",value:function(e){var t=this;e.forEach((function(e){var n=e.className,r=n.charAt(0).toLowerCase()+n.substring(1),a=new e(t);t.extend[r]=a,t[r]=a}))}},{key:"inherit",value:function(e,t){var n=this.cellMap;t||(t=this.getCells().filter((function(e){return e.isRoot}))),t.forEach((function(t){gr(t.model,(function(t,r){t=n[t.id],r=r&&n[r.id]||t.parent,t.computedProps=r?xn()({},r.computedProps,Nr(t,e)):Nr(t,e)}))}))}},{key:"deepEach",value:function(e){var t=this.cellMap;Object.keys(t).forEach((function(n){e(t[n])}))}},{key:"on",value:function(e,t){var r=this.viewportContainer;-1!==this.nativeEvents.indexOf(e)&&r.addEventListener(e,t),k()(O()(n.prototype),"on",this).call(this,e,t)}},{key:"off",value:function(e,t){var r=this.viewportContainer;-1!==this.nativeEvents.indexOf(e)&&r.removeEventListener(e,t),k()(O()(n.prototype),"off",this).call(this,e,t)}},{key:"focus",value:function(){var e=this.input,t=window.getSelection(),n=document.createRange();e.innerHTML="ddd",n.setStart(e.childNodes[0],1),n.setEnd(e.childNodes[0],2),t.removeAllRanges(),t.addRange(n)}},{key:"tryFocus",value:function(){this.viewportContainer.contains(document.activeElement)||this.focus()}},{key:"layout",value:function(e){var t=this.find(e);if(t){if(!t.isRoot)throw new Error("Only root type cell can be layouted!");if(t.executeLayout){var n=this.cellMap;t.executeLayout(),this.emit("afterrootcelllayout",{root:this}),gr(t.model,(function(e){var r=n[e.id];r!==t&&r.drawPosition()}))}}}},{key:"clear",value:function(){this.rootGroup.clear(),this.cellMap={}}},{key:"destroy",value:function(){if(!this.destroyed){var e=this.canvas,t=this.viewportContainer,n=this.extend,r=this.calculatedContainer;this.deepEach((function(e){e.destroy()})),Object.keys(n).forEach((function(e){n[e].destroy()})),t.parentNode.removeChild(t),r.remove(),e.destroy(),this.destroyed=!0}}},{key:"export",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"json",t=e.split(":");if(!this.exporter[t[0]])throw new Error("Export of ".concat(t[0]," is not supported"));return this.exporter[t[0]](t[1])}},{key:"import",value:function(e){var t=this.importer.json(e);return this.viewport.refresh(),t}},{key:"setCursor",value:function(e){this.canvas.css({cursor:e})}},{key:"resetCursor",value:function(){this.setCursor(this.interaction.getModeCursor())}}]),n}();Sl.TextArea=Pl,Sl.Wire=Al;var ql=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"afterselect",(function(){var t=e.selector.selections;t.length>1?e.highlight.select(t.concat([])):e.highlight.clear()}))}}]),n}();var Hl=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){var t,n,r,a,i;this.bind(e,"mousedown",(function(o){var c=e.getCell(o.target);(o.target===e.canvas.rendererElement||c&&c.toDragCanvas&&c.toDragCanvas())&&0===o.button&&(t=!0,n=o.clientX,r=o.clientY,a=e.viewport.scrollLeft,i=e.viewport.scrollTop)})),this.bind(e,"mousemove",(function(o){if(!e.signal.draggingcanvas&&t&&Math.abs(n-o.clientX)+Math.abs(r-o.clientY)>3&&(e.signal.draggingcanvas=!0,e.setCursor("grabbing")),e.signal.draggingcanvas&&void 0!==a){var c=a-(o.clientX-n),l=i-(o.clientY-r);e.viewport.moveTo(c,l)}})),this.bind(window,"mouseup",(function(){t&&(e.signal.draggingcanvas=!1,t=void 0,n=void 0,r=void 0,a=void 0,i=void 0,e.resetCursor())}))}}]),n}();var Wl=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"unbindMousemoveEvent",value:function(){this.mouseMoveEvent&&(this.unbind(this.mouseMoveEvent),this.mouseMoveEvent=void 0)}},{key:"init",value:function(e){var t,n,r,a=this;e.signal.mouseMultiSelecting=!1;var i=new Ka({fill:"rgba(9, 109, 217, .05)",stroke:"#096DD9"});function o(a){if(t){e.signal.mouseMultiSelecting=!0,n=e.viewport.invertClient([a.clientX,a.clientY]);var o={minX:Math.min(t[0],n[0]),minY:Math.min(t[1],n[1]),width:Math.abs(n[0]-t[0]),height:Math.abs(n[1]-t[1])},c=Ia(o.minX,o.minY,o.width,o.height);o.maxX=o.minX+o.width,o.maxY=o.minY+o.height,i.update({d:c}),Rr(r=e.getCells().filter((function(e){if(e.state.visible){var t=e.getAbsBBox();if(Fr(t,o)){if(e.isLine){var n=e.d;if(!Br(o,t)&&0===Cn()(c,n).length)return!1}return!0}}return!1})),e.selector.selections)||e.selector.select(r)}}i.dataset({testid:"mouse-drag-multi-select"}),this.selectBox=i,this.bind(e,"mousedown",(function(n){(function(t){if(t.target===e.canvas.rendererElement)return!0;var n=e.getCell(t.target);return!(!n||!n.locked)})(n)&&(a.unbindMousemoveEvent(),a.mouseMoveEvent=a.bind(window,"mousemove",$()(o,16)),e.frontRootGroup.add(i),t=e.viewport.invertClient([n.clientX,n.clientY]))})),this.bind(window,"mouseup",(function(){t&&e.tryFocus(),e.signal.mouseMultiSelecting=!1,r&&e.selector.select(r),r=void 0,t=void 0,n=void 0,a.unbindMousemoveEvent(),i.remove(),i.update({d:""})}))}},{key:"unbind",value:function(e){!e&&this.selectBox&&(this.selectBox.remove(),this.selectBox=void 0),k()(O()(n.prototype),"unbind",this).call(this,e)}}]),n}();var Yl=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.pressKey({diagram:e,keys:["Alt","Control","Meta","Shift"]})}}]),n}();var Gl=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){Mc(t)&&"a"===t.key&&(t.preventDefault(),t.stopPropagation(),e.command.execute("SelectAll"),e.tryFocus())}))}}]),n}();var Kl=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){function t(){"dragCanvas"===e.interaction.currentMode&&(e.interaction.changeMode("edit"),e.rootGroup.css({"pointer-events":"initial"}))}this.bind(e,"keydown",(function(t){" "!==t.key||e.signal.cellDragStart||(t.preventDefault(),t.stopPropagation(),"dragCanvas"!==e.interaction.currentMode&&(e.highlight.clear(),e.rootGroup.css({"pointer-events":"none"}),e.interaction.changeMode("dragCanvas")))})),this.bind(window,"keyup",t),this.bind(window,"blur",t)}}]),n}();Tc.AfterContentEditorChange=Yc,Tc.AfterSelectionChangeMultiSelectHighlight=ql,Tc.KeyboardCollapseExpand=Nc,Tc.KeyboardDelete=Hc,Tc.KeyboardPressModifierKey=Yl,Tc.KeyboardSelectAll=Gl,Tc.KeyboardSwitchEditAndDragCanvas=Kl,Tc.KeyboardUndoRedo=jc,Tc.KeyboardZoom=qc,Tc.MouseCollapse=Ic,Tc.MouseDragCanvas=Hl,Tc.MouseDragMultiSelect=Wl,Tc.MouseSelect=Lc,Tc.MouseWheelZoom=zc,Tc.MouseClickInsertLine=tl,Bi.Add=Fi,Bi.Collapse=Wi,Bi.Compound=qi,Bi.Expand=Yi,Bi.NoneExecuteCompound=Hi,Bi.Redo=Ki,Bi.Delete=oo,Bi.Remove=Vi,Bi.Undo=Gi,Bi.UpdateCellContent=so,Bi.Update=Ui,Bi.ZoomIn=Xi,Bi.ZoomOut=$i,Bi.ZoomTo=Zi,Bi.CreateLink=yo,Bi.BeginInsertLine=Ao,Bi.LockSelected=ko,window.____lake_diagram_version="2.0.0";var Xl=["#A287E1","#E48484","#69B1E4","#DE81C6","#77C386","#DFB85D","#8169BF"];function $l(e){var t=function(e){var t=e.type.split("/");return t[t.length-1]}(e);return o.EXTS.IMAGE_EXT.includes(t)}function Zl(e){var t=e.naturalWidth/e.naturalHeight,n=e.firstInsertRatio?e.naturalWidth*e.firstInsertRatio:e.naturalWidth;return e.width=n>=480?480:n,e.height=e.width/t,e}function Ql(e){return"0,1"===(e=String(e))||"0,-1"===e}function Jl(e){return e<=2?3:e>=2&&e<=4?2:1}function es(e){var t=e.radius,n=e.outer,r=e.width+2*n,a=e.height+2*n;return"capsule"===e.shape&&(t=r<a?r/2:a/2),Ia(-n,-n,r,a,t)}var ts=Ka,ns=function(e){x()(n,Sl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"getSytle",value:function(){var e=this.cell,t=e.border,n=e.computedProps,r=Nr(t,{fill:!0});return r.stroke=t.stroke||n.treeEdge.stroke,r["stroke-width"]=e.getBorderStrokeWidth(),"line"===t.shape&&(r.stroke="rgba(255,255,255,0)",r.fill="rgba(255,255,255,0)"),r}},{key:"render",value:function(){var e=this.cell,t=e.graphicGroup,n=new ts;t.add(n),this.element=n,e.borderElement=n}},{key:"drawInherit",value:function(){this.draw()}},{key:"draw",value:function(){var e=this.cell,t=this.element,n=e.cache,r=e.width,a=e.height,i=e.border,o=i.outer,c=i.radius,l=i.shape,s=this.getSytle(),u=Lr(s,n.borderStyle,["stroke","fill","stroke-width"]);r===n.width&&a===n.height&&On()(i,n.border)||(u.d=es({radius:c,outer:o,width:r,height:a,shape:l})),Object.keys(u).length>0&&(t.update(u),n.borderStyle=s)}},{key:"destroy",value:function(){this.element.destroy()}}]),n}();l()(ns,"className","Border"),l()(ns,"configName","border"),l()(ns,"zIndex",1);var rs=Ka,as=function(e){x()(n,Sl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"setDefault",value:function(){this.element.remove()}},{key:"updateState",value:function(){var e=this.element,t=this.cell,n=t.outline,r=t.graphicGroup,a=this.getSytle();a.d=this.getPath(),t.state.highlight&&Object.assign(a,n.highlight),t.state.selected&&Object.assign(a,n.selected),t.state.beginEdit&&Object.assign(a,n.beginEdit),(t.state.highlight||t.state.selected)&&(r.add(e),e.toBack(),t.treeEdgeElement&&t.treeEdgeElement.toBack()),e.update(a)}},{key:"render",value:function(){var e=this.cell,t=e.outline,n=new rs(t.default);this.element=n,e.outlineElement=n}},{key:"getSytle",value:function(){return Nr(this.cell.border,{stroke:!0,fill:!0,"stroke-width":!0})}},{key:"getPath",value:function(){var e=this.cell,t=e.width,n=e.height,r=e.outline,a=e.border,i=r.radius,o=r.outer,c=a.shape;return"line"===a.shape&&(o-=2,i-=2),es({radius:i,outer:o,width:t,height:n,shape:c})}},{key:"draw",value:function(){var e=this.cell,t=this.element,n=e.cache,r=e.width,a=e.height,i=Lr(this.getSytle(),n.borderStyle,["stroke","fill","stroke-width"]);r===n.width&&a===n.height||(i.d=this.getPath()),Object.keys(i).length>0&&t.update(i)}},{key:"destroy",value:function(){this.element.destroy()}}]),n}();function is(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function os(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?is(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):is(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}l()(as,"className","Outline"),l()(as,"configName","outline"),l()(as,"zIndex",3);var cs=ti,ls=function(e){x()(n,Sl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"render",value:function(){var e=this.cell,t=new cs;this.element=t,e.imageElement=t}},{key:"draw",value:function(){var e=this.cell,t=this.element,n=e.graphicGroup,r=e.image,a=e.contentBox,i=e.getPadding();if(r.src){n.children.includes(t)||n.add(t);var c=o.OssUtil.resizeImage({maxWidth:3e3,src:r.src,data:os(os({},r),{},{originWidth:r.naturalWidth,originHeight:r.naturalHeight})});t.update({href:c||r.src,x:a.x+(a.width-r.width)/2,y:i[0],width:r.width,height:r.height}),t.dataset({raw_src:r.src})}else t.remove()}},{key:"destroy",value:function(){this.element.destroy()}}]),n}();l()(ls,"className","ImageSubcell"),l()(ls,"configName","image"),l()(ls,"zIndex",2);var ss=Za,us=function(e){x()(n,Sl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(e){var r;g()(this,n),r=t.call(this,e);var a=e.note,i=a.width,o=a.height,c=a.padding;return r.size=[i+c[1]+c[3],o+c[0]+c[2]],r}return y()(n,[{key:"render",value:function(){var e=this.cell.note,t=e.width,n=e.height,r=new ss({width:t,height:n}),a=r.htmlContainer;a.classList.add("lake-diagram-note"),a.classList.add("lake-icon"),a.classList.add("lake-icon-diagram-cell-note"),a.style.color="#464646",a.style["font-size"]=t+"px",a.style.width=t+"px",a.style.height=n+"px",a.style["line-height"]=t+"px",this.element=r}},{key:"draw",value:function(){var e,t,n=this.cell,r=this.element,a=n.model,i=n.note,o=n.graphicGroup,c=n.width,l=n.height,s=n.border;a.note?(r.attr({x:c-i.width-i.padding[1],y:(l-i.height)/2}),s.fill&&(r.htmlContainer.style.color=(e=s.fill,.3*(t=Rn()(e).toRgb()).r+.59*t.g+.11*t.b>127.5?"#464646":"#fff")),o.add(r)):r.remove()}}]),n}();l()(us,"className","Note"),l()(us,"zIndex",3);var ds=function(e){x()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"calculateBBox",value:function(){var e=k()(O()(n.prototype),"calculateBBox",this).call(this),t=this.cell,r=this.calculatedDOM,a=t.image&&t.image.src;return r.textContent||t.state.beginEdit||!a?e:{width:e.width+1,height:0}}},{key:"calculateUnlimitBBox",value:function(){var e=this.calculatedDOM;return e.style.width="auto",e.getBoundingClientRect()}},{key:"updateStyleSheets",value:function(){for(var e=this.cell,t=e.textAreaContentStyleSheets,n=e.model,r=e.minWidth,a=e.minHeight,i=e.getPadding(),o=i[1]+i[3]+e.getNoteWidth(),c=i[0]+i[2],l=0;l<t.length;l++){var s=t[l];"self"===s.query&&(n.width?(s.css.width=n.width-o+"px",s.css["max-width"]=""):n.image&&n.image.src&&n.image.width?this.calculateBBox().width<n.image.width&&(s.css.width=n.image.width-1+"px",s.css["max-width"]=""):(s.css["max-width"]="480px",s.css.width=""),s.css["min-width"]=r-o+"px",s.css["min-height"]=a-c+"px")}}},{key:"getPosition",value:function(){var e=this.cell,t=e.image,n=e.contentBox,r=t&&t.src&&t.height+2||0;return{x:n.x,y:n.y+r}}}]),n}(Sl.TextArea);l()(ds,"className","TextArea");var fs=function(e){x()(n,gl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g()(this,n),r=Cr({default:{x:0,y:0,collapsed:!1,html:"&#8203;",layout:{},image:{width:0,height:0},note:{width:14,height:14,padding:[0,8,0,0]}},anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}],Subcells:[ns,ds,as,ls,us],penetratedKeys:["x","y","width","height","collapsed","quadrant","zIndex","html","layout","rainbow","tapered","note","treeEdge"]},r),(e=t.call(this,r)).model.children||(e.model.children=[]),e.isMindmap=!0,e.multiSelectHighlight=!1,e.penetratedKeys=e.penetratedKeys.concat(e.Subcells.map((function(e){return e.configName}))),r.Subcells.sort((function(e,t){return e.zIndex-t.zIndex})),r.Subcells.forEach((function(t){var n=t.configName;n&&(e[n]={},!e.default[n]&&(e.default[n]={}))})),Object.assign(R()(e),f()(e.default)),e.initSubcell(),e.render(),e.eventDelegation(),e}return y()(n,[{key:"showCollapsedButton",value:function(){this.state.collapsedButtonVisible||(this.state.collapsedButtonVisible=!0,this.updateState())}},{key:"hideCollapsedButton",value:function(){this.state.collapsedButtonVisible&&(this.state.collapsedButtonVisible=!1,this.updateState())}},{key:"findSubcell",value:function(e){return this.subcells.find((function(t){return t.constructor.className===e}))}},{key:"shouldRefreshEndEditContent",value:function(){return this.isContentEmpty()&&this.image&&this.image.src}},{key:"canStroke",value:function(){return"line"!==this.border.shape}},{key:"canStrokeWidth",value:function(){return!1}},{key:"canStrokeStyle",value:function(){return!1}},{key:"canFill",value:function(){return"line"!==this.border.shape}},{key:"get",value:function(e){if("layout"===e)return f()(this.computedProps.layout);var t=k()(O()(n.prototype),"get",this).call(this,e);return"border"===e?(t.stroke=t.stroke||this.computedProps.treeEdge.stroke,t["stroke-width"]=this.getBorderStrokeWidth(),t):"treeEdge"===e?(t.stroke=this.computedProps.treeEdge.stroke,t["stroke-width"]=this.getTreeEdgeStrokeWidth(),t):t}},{key:"getKeyShape",value:function(){return this.borderElement}},{key:"getPadding",value:function(){return[4,8,4,8]}},{key:"getBorderStrokeWidth",value:function(){return this.border["stroke-width"]||this.getDefaultStrokeWidth()}},{key:"getTreeEdgeStrokeWidth",value:function(){return this.treeEdge["stroke-width"]||this.getDefaultStrokeWidth()}},{key:"getDefaultStrokeWidth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.depth,t=this.root,n=t.tapered;return n&&Jl(e)||3}},{key:"initSubcell",value:function(){var e=this;this.subcells=this.Subcells.map((function(t){return new t(e)}))}},{key:"getSiblings",value:function(){var e=this,t=k()(O()(n.prototype),"getSiblings",this).call(this);return 1===this.depth?t.filter((function(t){return t.computedProps.layout.quadrant===e.computedProps.layout.quadrant})):t}},{key:"eventDelegation",value:function(){var e=this.graphicGroup,t=this.imageElement;this.delegateEvent(t,"mouseenter","mindmapcellimage:mouseenter"),this.delegateEvent(t,"mouseleave","mindmapcellimage:mouseleave"),this.delegateEvent(e,"mouseenter","mindmapcell:mouseenter"),this.delegateEvent(e,"mouseleave","mindmapcell:mouseleave")}},{key:"render",value:function(){this.subcells.forEach((function(e){e.render()})),this.updateModel(this.model)}},{key:"draw",value:function(){this.drawInner(),this.updateCache(),this.updateState()}},{key:"updateModel",value:function(e){e&&""===e.html&&(e.html="&#8203;"),k()(O()(n.prototype),"updateModel",this).call(this,e),this.calculate()}},{key:"isInCollapsed",value:function(){for(var e=this.parent;e;){if(!0===e.collapsed)return!0;e=e.parent}return!1}},{key:"getCellQuadrant",value:function(){for(var e=this;1!==e.depth;)e=e.parent;return e.model.quadrant}},{key:"drawInner",value:function(){this.subcells.forEach((function(e){e.draw()})),this.drawCollapse(),this.drawPosition()}},{key:"drawInherit",value:function(){this.subcells.forEach((function(e){e.drawInherit()}))}},{key:"drawPosition",value:function(){this.subcells.forEach((function(e){e.drawPosition()}));var e=this.graphicGroup,t=this.x,n=this.y,r=this.cache;if(!r.matrix||t!==r.matrix[6]||n!==r.matrix[7]){var a=[1,0,0,0,1,0,t,n,1];e.update({matrix:a}),r.matrix=a,this.matrix=a}}},{key:"drawCollapse",value:function(){this.isInCollapsed()?this.hide():this.show()}},{key:"getNoteWidth",value:function(){return this.model.note&&this.findSubcell("Note").size[0]||0}},{key:"calculate",value:function(){this.calculateSize()}},{key:"calculateSize",value:function(){var e=this,t=this.cache,n=this.getPadding(),r={noteWidth:this.getNoteWidth(),padding:n},a=this.findSubcell("TextArea");a.update(),this.textAreaBBox=a.getBBox(),t.html&&this.html&&t.html!==this.html&&(this.model.height=null),["width","height","html","image"].some((function(n){return t[n]!==e[n]}))&&(this.calculateImageSize(r),this.contentHeight=this.getContentHeight(r),this.contentWidth=this.getContentWidth(r),this.height=this.getHeight(r),this.width=this.getWidth(r),this.contentBox=this.getContentBox(r))}},{key:"getContentBox",value:function(e){var t=e.padding,n=e.noteWidth,r=this.width,a=this.contentWidth,i=this.contentHeight;return{x:(r-a-t[1]-t[3]-n)/2+t[3],y:t[0],width:a,height:i}}},{key:"getHasModelSizeContentWidth",value:function(e,t){var n,r=this.model,a=this.border,i=e[1]+e[3]+t,o=r.width-i;return"capsule"===a.shape&&(n=r.width>r.height?r.width-r.height+i:r.width/2,o=Math.min(o,n)),o}},{key:"calculateImageSize",value:function(e){var t=e.padding,r=e.noteWidth,a=this.image,i=this.model;if(!a.height||i.height){if(!a.src)return Object.assign(a,{width:0,height:0});var o=a.naturalWidth/a.naturalHeight,c=this.getTextAreaHeight(),l=this.getHasModelSizeContentWidth(t,r),s=i.height-t[0]-t[2]-c-4,u=((s=Math.max(s>0?s:0,36))>0?l/s:o)<=o?l/o:s,d=u*o;k()(O()(n.prototype),"updateModel",this).call(this,{image:{width:d,height:u}})}}},{key:"getWidth",value:function(e){var t,n=e.padding,r=e.noteWidth,a=this.isPlaceholder,i=this.model,o=this.border,c=this.contentWidth,l=this.contentHeight;if(a)return i.width;if(i.width)t=i.width;else if(t=c+n[1]+n[3]+r,"capsule"===o.shape){var s=n[1]+n[3];l>s&&(t+=l-s)}return xr(Math.ceil(t),this.minWidth)}},{key:"getHeight",value:function(e){var t=e.padding;return this.isPlaceholder?this.model.height:xr(this.contentHeight+t[0]+t[2],this.minHeight)}},{key:"getContentWidth",value:function(e){var t=e.padding,n=e.noteWidth,r=this.textAreaBBox,a=this.image,i=this.model;return i.width?i.width-n-t[1]-t[3]:Math.ceil(Math.max(r.width,a.width))||100}},{key:"getTextAreaHeight",value:function(){var e=this.textAreaBBox,t=this.image,n=this.diagram;return t.src&&this.isContentEmpty()&&!n.contentEditor.isBegin?0:e.height}},{key:"getContentHeight",value:function(){var e=this.image,t=this.getTextAreaHeight();return Math.ceil(t+e.height)}},{key:"updateState",value:function(){this.setDefault(),this.subcells.forEach((function(e){e.updateState()}))}},{key:"setDefault",value:function(){this.subcells.forEach((function(e){e.setDefault()}))}},{key:"updateCache",value:function(){this.cache.width=this.width,this.cache.height=this.height,this.cache.html=this.html,this.cache.collapsed=this.collapsed}},{key:"toDragCanvas",value:function(){return"read"===this.diagram.interaction.currentMode}},{key:"preventDelete",value:function(){return!1}},{key:"beginEditContent",value:function(){this.state.beginEdit=!0,this.updateState()}},{key:"endEditContent",value:function(){this.state.beginEdit=!1,this.updateState()}},{key:"getEventObject",value:function(e){return{cell:this,nativeEvent:e}}},{key:"destroy",value:function(){this.subcells.forEach((function(e){e.destroy()})),k()(O()(n.prototype),"destroy",this).call(this)}},{key:"minWidth",get:function(){var e=this.border;if(e){var t=e.shape;if("rect"===t)return 38;if("capsule"===t)return 42}return 32}},{key:"minHeight",get:function(){return 16}},{key:"isPlaceholder",get:function(){return this.model.isPlaceholder}}]),n}();l()(fs,"className","MindmapBase");var ps=Ka,hs=function(e){x()(n,Sl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"render",value:function(){var e=this.cell,t=e.graphicGroup,n=new ps({fill:"none","stroke-linecap":"round","stroke-linejoin":"round"});n.rendererElement.style["pointer-events"]="none",t.add(n),this.element=n,e.treeEdgeElement=n}},{key:"VH",value:function(e,t){return"M".concat(e[0],",").concat(e[1]," L").concat(e[0],",").concat(t[1]," L").concat(t[0],",").concat(t[1])}},{key:"curveHVH",value:function(){var e,t,n,r,a,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=this.cell,l=c.parent,s=.618,u=4,d=4,f=36,p="";return c.x>l.x?(t=1===c.depth?[l.x-c.x+l.width-f,l.y-c.y+l.height/2]:[l.x-c.x+l.width,l.y-c.y+l.height/2+i],(n=[0,c.height/2])[1]+=o,r=[t[0]+u,t[1]],e=(a=[n[0]-d,n[1]])[0]-r[0],p+="M".concat(t[0]," ").concat(t[1]," "),p+="L".concat(r[0]," ").concat(r[1]," "),p+="C".concat(r[0]+e*(1-s)," ").concat(r[1],", ").concat(a[0]-e*s," ").concat(a[1],", ").concat(a[0]," ").concat(a[1]," "),p+="L".concat(n[0]," ").concat(n[1]),"line"===c.border.shape&&(p+="L".concat(n[0]+c.width," ").concat(n[1]))):(t=1===c.depth?[l.x-c.x+f,l.y-c.y+l.height/2]:[l.x-c.x,l.y-c.y+l.height/2+i],(n=[c.width,c.height/2])[1]+=o,r=[t[0]-u,t[1]],a=[n[0]+d,n[1]],e=r[0]-a[0],p+="M".concat(t[0]," ").concat(t[1]," "),p+="L".concat(r[0]," ").concat(r[1]," "),p+="C".concat(r[0]-e*(1-s)," ").concat(r[1],", ").concat(a[0]+e*s," ").concat(a[1],", ").concat(a[0]," ").concat(a[1]," "),p+="L".concat(n[0]," ").concat(n[1]),"line"===c.border.shape&&(p+="L".concat(n[0]-c.width," ").concat(n[1]))),p}},{key:"VHV",value:function(){var e,t,n=this.cell,r=n.parent,a={x:r.x-n.x,y:r.y-n.y},i="";n.y<r.y?(e=[a.x+r.width/2,a.y],t=[n.width/2,n.height]):(e=[a.x+r.width/2,a.y+r.height],t=[n.width/2,0]);var o=(e[1]+t[1])/2;return i+="M".concat(e[0]," ").concat(e[1]," "),i+="L".concat(e[0]," ").concat(o," "),(i+="L".concat(t[0]," ").concat(o," "))+"L".concat(t[0]," ").concat(t[1])}},{key:"HVH",value:function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.cell,o=i.parent,c="";return i.x>o.x?(e=1===i.depth?[o.x-i.x+o.width,o.y-i.y+o.height/2]:[o.x-i.x+o.width,o.y-i.y+o.height/2+r],(t=[0,i.height/2])[1]+=a,n=(o.x-i.x+o.width)/2,"line"===i.border.shape&&(t[0]+=i.width)):(e=1===i.depth?[o.x-i.x,o.y-i.y+o.height/2]:[o.x-i.x,o.y-i.y+o.height/2+r],(t=[i.width,i.height/2])[1]+=a,n=(o.x-i.x+i.width)/2,"line"===i.border.shape&&(t[0]-=i.width)),c+="M".concat(e[0]," ").concat(e[1]," "),c+="L".concat(n," ").concat(e[1]," "),(c+="L".concat(n," ").concat(t[1]," "))+"L".concat(t[0]," ").concat(t[1])}},{key:"curveVHV",value:function(){var e,t,n,r,a,i=this.cell,o=i.parent,c={x:o.x-i.x,y:o.y-i.y},l="",s=1===i.depth?0:8;return i.y<o.y?(t=[c.x+o.width/2,c.y],n=[i.width/2,i.height],r=[t[0],t[1]-s],a=[n[0],n[1]+0],e=r[1]-a[1]):(t=[c.x+o.width/2,c.y+o.height],n=[i.width/2,0],r=[t[0],t[1]+s],a=[n[0],n[1]-0],e=r[1]-a[1]),l+="M".concat(t[0]," ").concat(t[1]," "),l+="L".concat(r[0]," ").concat(r[1]," "),(l+="C".concat(r[0]," ").concat(r[1]-.382*e,", ").concat(a[0]," ").concat(a[1]+.618*e,", ").concat(a[0]," ").concat(a[1]," "))+"L".concat(n[0]," ").concat(n[1])}},{key:"getStandardLayoutPath",value:function(){var e=this.cell,t=e.parent,n=e.computedProps,r=n.layout,a=n.treeEdge.shape;if(Ql(String(r&&r.direction||[1,0])))return"polyline"===a?this.VHV():this.curveVHV();var i=0,o=0;return"line"===t.border.shape&&(i=t.height/2),"line"===e.border.shape&&(o=e.height/2),"polyline"===a?this.HVH(i,o):this.curveHVH(i,o)}},{key:"getIndentLayoutPath",value:function(){var e=this.cell,t=e.parent,n=e.computedProps.treeEdge.shape,r=t.x-e.x,a=t.y-e.y,i=t.x+t.width/2-(e.x+e.width)>0,o=-e.height/2,c="";if("polyline"===n)c+="M".concat(r+t.width/2,",").concat(a+t.height," L").concat(r+t.width/2,",").concat(e.height+o),c+=i?"L".concat(e.width,",").concat(e.height+o):"L0,".concat(e.height+o);else{var l=i?Math.abs(e.x+e.width-(t.x+t.width/2)):Math.abs(e.x-(t.x+t.width/2));c+="M".concat(r+t.width/2,",").concat(a+t.height," L").concat(r+t.width/2,",").concat(e.height-l+o),c+=i?"A ".concat(l," ").concat(l,", 0, 0, 1, ").concat(e.width,", ").concat(e.height+o):"A ".concat(l," ").concat(l,", 0, 0, 0, ",0,", ").concat(e.height+o)}return c}},{key:"getTimelineLayoutPath",value:function(){var e=this.cell,t=e.parent,n=e.depth%2==1,r={x:t.x-e.x,y:t.y-e.y};if(n){if(0===e.getNth())return"M".concat(r.x+t.width,",").concat(r.y+t.height/2," L0,").concat(e.height/2);var a=e.getLastSibling(),i={x:a.x-e.x,y:a.y-e.y};return"M".concat(i.x+a.width,",").concat(i.y+a.height/2," L0,").concat(e.height/2)}var o=t.getNth()%2==1;return this.VH([r.x+t.width/2,o?r.y+t.height:r.y],[0,e.height/2])}},{key:"getPath",value:function(){var e=this.cell.computedProps.layout.type;return"indent"===e?this.getIndentLayoutPath():"timeline"===e?this.getTimelineLayoutPath():this.getStandardLayoutPath()}},{key:"getSytle",value:function(){var e=this.cell;return{stroke:e.computedProps.treeEdge.stroke,"stroke-width":e.getTreeEdgeStrokeWidth()}}},{key:"drawPosition",value:function(){var e=this.cell,t=this.element,n=e.cache,r=this.getPath();n.treeEdgePath!==r&&(t.update({d:r}),n.treeEdgePath=r)}},{key:"drawInherit",value:function(){this.draw()}},{key:"draw",value:function(){var e=this.cell,t=this.element,n=e.cache,r=this.getPath(),a=this.getSytle(),i=Lr(a,n.treeEdgeStyle,["stroke","stroke-width"]);n.treeEdgePath!==r&&(i.d=r,n.treeEdgePath=r),Object.keys(i).length>0&&(t.update(i),n.treeEdgeStyle=f()(a))}},{key:"destroy",value:function(){this.element.destroy()}}]),n}();l()(hs,"className","TreeEdge"),l()(hs,"configName","treeEdge"),l()(hs,"zIndex",1);var ms=_a,gs=Za,vs=Ka,ys=function(e){x()(n,Sl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"render",value:function(){var e=this.cell,t=new ms;this.element=t,e.delegateEvent(t,"click","collapsedbutton:click"),e.collapsedButtonElement=t}},{key:"_drawHotArea",value:function(){var e=this.element,t=this.bbox,n=new vs;n.update({fill:"rgba(255, 255, 255, 0)",d:Ia(-8,-8,t.width+16,t.height+16)}),e.add(n),n.toBack()}},{key:"_getCurrent",value:function(e){var t=this.cell,n=t.computedProps.treeEdge,r=t.x,a=t.y,i=t.width,o=t.height;return e+r+a+n.stroke+i+o}},{key:"_setBBox",value:function(){var e,t,n=this.direction,r=this.circleButtonWidth,a=this.circleButtonHeight;switch(n){case"top":case"bottom":e=r,t=a+8;break;case"left":t=a,e=r+8;break;default:t=a,e=r+8}this.bbox={width:e,height:t}}},{key:"drawCollapse",value:function(){var e,t=this.cell,n=this.element,r=this.direction,a=t.computedProps,i=t.diagram,o=t.graphicGroup,c=i.viewport.zoom;switch(n.clear(),o.add(n),r){case"top":e=-90;break;case"bottom":e=90;break;case"left":e=180;break;default:e=0}var l=["position: absolute","border-radius: 16px","width: 16px","height: 16px","cursor: pointer","background: white","border: ".concat(t.getTreeEdgeStrokeWidth(),"px solid ").concat(a.treeEdge.stroke),"transform: rotate(".concat(e,"deg)")],s=new gs({html:'<span style="'.concat(l.join(";"),'" data-diagram-collapsed-button=true></span>'),x:0,y:0,width:0,height:0});n.add(s);var u=s.htmlContainer.querySelector("span"),d=u.getBoundingClientRect(),f=d.width/c,p=d.height/c;s.update({width:f,height:p}),u.addEventListener("mouseenter",(function(){u.style.background=a.treeEdge.stroke,u.style["background-repeat"]="no-repeat",u.style["background-position"]="1px 1px",u.style["background-image"]="url(".concat("https://gw.alipayobjects.com/zos/bmw-prod/c8f8bbfd-df13-421d-85f1-e310d67c89fc.svg",")")})),u.addEventListener("mouseout",(function(){u.style.background="white",u.style["background-image"]="none"})),this.circleButtonWidth=f,this.circleButtonHeight=p,this._setBBox(),this._drawTail(),this._drawHotArea(),this._updatePosition(),this.current=this._getCurrent("collapseButton")}},{key:"drawExpand",value:function(){var e=this.cell,t=this.element,n=e.computedProps,r=e.diagram.viewport.zoom,a=e.graphicGroup;t.clear(),a.add(t);var i=-1;e.deepEach((function(){i++}));var o=["position: absolute","padding: 0px 4px","border-radius: 12px","height: 16px","font-size: 12px","color: white","cursor: pointer","background: ".concat(n.treeEdge.stroke)],c=new gs({html:'<span style="'.concat(o.join(";"),'" data-diagram-collapsed-button=true>').concat(i,"</span>"),x:0,y:0,width:0,height:0});t.add(c);var l=c.htmlContainer;l.style["line-height"]="16px";var s=l.querySelector("span").getBoundingClientRect(),u=s.width/r,d=s.height/r;c.update({width:u,height:d}),this.circleButtonWidth=u,this.circleButtonHeight=d,this._setBBox(),this._drawTail(),this._drawHotArea(),this._updatePosition(),this.current=this._getCurrent("expandButton")}},{key:"_drawTail",value:function(){var e,t=this.element,n=this.circleButtonWidth,r=this.circleButtonHeight,a=this.direction,i=this.cell,o=i.computedProps,c={x:n/2,y:r/2};switch(a){case"top":e="M".concat(c.x," ").concat(r," L").concat(c.x," ").concat(r+8);break;case"bottom":e="M".concat(c.x," 0 L").concat(c.x," -").concat(8);break;case"left":e="M".concat(n," ").concat(c.y," L").concat(n+8," ").concat(c.y);break;default:e="M0 ".concat(c.y," L-").concat(8," ").concat(c.y)}t.add(new vs({d:e,stroke:o.treeEdge.stroke,"stroke-width":i.getTreeEdgeStrokeWidth()}))}},{key:"_updatePosition",value:function(){var e,t,n=this.cell,r=this.element,a=this.direction,i=this.bbox,o=n.border,c=n.computedProps.layout,l=i.width,s=i.height;switch(a){case"top":e=n.width/2-l/2,t=-(l+8);break;case"bottom":e=n.width/2-l/2,t=n.height+8;break;case"left":t="line"===o.shape&&"standard"===c.type?n.height-s/2:n.height/2-s/2,e=-l;break;default:t="line"===o.shape&&"standard"===c.type?n.height-s/2:n.height/2-s/2,e=n.width+8}r.update({matrix:[1,0,0,0,1,0,e,t,1]})}},{key:"drawPosition",value:function(){this.draw()}},{key:"updateState",value:function(){this.draw()}},{key:"_setDirection",value:function(){var e=this.cell,t=e.computedProps,n=e.root,r=t.layout,a=Ql(String(r&&r.direction||[1,0]));if("standard"===r.type)if(a){var i=e.y+e.height/2<n.y+n.height/2;this.direction=i?"top":"bottom"}else{var o=e.x+e.width/2<n.x+n.width/2;this.direction=o?"left":"right"}else if("indent"===r.type){var c=e.x+e.width/2<n.x+n.width/2;this.direction=c?"left":"right"}else this.direction="right"}},{key:"draw",value:function(){var e=this.cell,t=this.element,n=this.current,r=e.state;this._setDirection(),e.canExpand()?n!==this._getCurrent("expandButton")&&this.drawExpand():e.canCollapse()&&r.collapsedButtonVisible?n!==this._getCurrent("collapseButton")&&this.drawCollapse():("none"!==n&&t.remove(),this.current=this._getCurrent("none"))}},{key:"destroy",value:function(){this.element.destroy()}}]),n}();l()(ys,"className","CollapsedButton"),l()(ys,"configName","bollapsedButton"),l()(ys,"zIndex",1);var bs=function(e){x()(n,fs);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g()(this,n);var r=14,a=1===e.depth?400:"normal",i=1===e.depth?'PingFangSC-Medium, "PingFang SC"':'PingFangSC-Regular, "PingFang SC"';return e=Cr({default:{collapsedButton:{},border:{outer:0,radius:3,shape:"line",fill:"rgba(255,255,255,0)"},outline:{outer:3,radius:6,fill:"rgba(255,255,255,0)","stroke-width":1,highlight:{stroke:"#349BF9","stroke-width":1},beginEdit:{stroke:"#096dd9",fill:"rgba(255,255,255,0)","stroke-width":1},selected:{stroke:"#096dd9",fill:"rgba(52, 155, 249, .15)","stroke-width":1}},treeEdge:{}},textAreaContentStyleSheets:[{query:"self",css:{outline:"none","white-space":"normal","letter-spacing":"0.1px","font-size":"".concat(r,"px"),"font-weight":"".concat(a),"font-family":i,"line-height":"1.74","word-break":"break-word",color:"#262626"}}],Subcells:[hs,ys]},e),t.call(this,e)}return y()(n,[{key:"getPadding",value:function(){var e,t=this.model;return e=1===this.depth?"line"===this.border.shape?[2,8,2,8]:[6,12,6,12]:this.depth>1?"line"===this.border.shape?[2,8,2,8]:[6,8,6,8]:k()(O()(n.prototype),"getPadding",this).call(this),t.note&&(e[1]/=2),e}}]),n}();l()(bs,"className","MindmapCell");var ks=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g()(this,e),this.options=t,Object.assign(this,t)}return y()(e,[{key:"getHGap",value:function(){return 20}},{key:"getVGap",value:function(){return 20}},{key:"postOrder",value:function(e,t,n){var r=this;!e.children||e.isSubTree&&n||e.collapsed||e.children.forEach((function(n){r.postOrder(n,t,e)})),t(e,n)}},{key:"postOrderChildren",value:function(e,t,n){var r=this;!e.children||e.isSubTree&&n||e.collapsed||e.children.forEach((function(n){r.postOrderChildren(n,t,e),t(n,e)}))}},{key:"preOrder",value:function(e,t,n){var r=this,a=e.children;t(e,n),!a||e.isSubTree&&n||e.collapsed||e.children.forEach((function(n){r.preOrder(n,t,e)}))}},{key:"preOrderChildren",value:function(e,t,n){var r=this;!e.children||e.isSubTree&&n||e.collapsed||e.children.forEach((function(n){t(n,e),r.preOrderChildren(n,t,e)}))}},{key:"deepEach",value:function(e,t){var n=this,r=e.children;t(e),r&&e.children.forEach((function(e){n.deepEach(e,t)}))}},{key:"move",value:function(e,t,n){this.deepEach(e,(function(e){e.x+=t,e.y+=n}))}},{key:"setKeys",value:function(e){this.isVertical?(this.breadthAxis="x",this.breadthNorm="w",this.breadthGap="hgap",this.depthAxis="y",this.depthNorm="h",this.depthGap="vgap"):(this.breadthAxis="y",this.breadthNorm="h",this.breadthGap="vgap",this.depthAxis="x",this.depthNorm="w",this.depthGap="hgap"),this.isPositive="1,0"===e||"0,1"===e}},{key:"normalize",value:function(e){var t=this,n=this.isVertical;this.preOrder(e,(function(e){var r={node:e,isVertical:n};e.vgap=t.getVGap(r),e.hgap=t.getHGap(r)}))}},{key:"setSubTreeNodeDepth",value:function(e,t,n){this.isVertical?this.move(e,0,t-e[n]):this.move(e,t-e[n],0)}},{key:"setSubTreeNodeBreadth",value:function(e,t,n){this.isVertical?this.move(e,t-e[n],0):this.move(e,0,t-e[n])}},{key:"layout",value:function(e,t){var n=t.direction,r=Ql(n);this.isVertical=r,this.normalize(e),this.setKeys(n),this.execute(e,n)}},{key:"setDepth",value:function(){}},{key:"setBreadth",value:function(){}},{key:"setZIndex",value:function(e){var t=this.breadthAxis,n=this.breadthNorm,r=[];this.preOrder(e,(function(e){var a=e.children;if(r.push(e),a&&!e.collapsed){var i=e[t]+e[n]/2;a.sort((function(e,r){return Math.abs(e[t]+e[n]-i)-Math.abs(r[t]+r[n]-i)}))}})),r.reverse().forEach((function(e,t){e.zIndex=t}))}},{key:"execute",value:function(e){this.setDepth(e),this.setBreadth(e),this.setZIndex(e)}}]),e}();var ws=function(e){x()(n,ks);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"normalize",value:function(e){this.preOrderChildren(e,(function(e,t){e.ancestors=[t].concat(t.ancestors||[])})),k()(O()(n.prototype),"normalize",this).call(this,e)}},{key:"setDepth",value:function(e){var t=this,n=this.depthAxis,r=this.depthNorm,a=this.depthGap,i=this.isPositive;this.preOrderChildren(e,(function(e){var o,c=e.isSubTree,l=c?"t":"",s=l+n,u=l+r,d=e.parent,f=e[a];o=i?d[n]+d[r]+f:d[n]-e[u]-f,c&&t.setSubTreeNodeDepth(e,o,s),e[s]=o}))}},{key:"getBreadthGap",value:function(e,t){var n,r,a=this.breadthGap;if(e.parent===t.parent)return t[a];e.depth<t.depth?(n=t,r=e):(n=e,r=t);for(var i=n.depth-r.depth,o=0;o<r.ancestors.length;o++){var c=o+i;if(r.ancestors[o]===n.ancestors[c])return n.ancestors[c-1][a]}}},{key:"getBreadthByChildren",value:function(e){var t=e.children,n=e.breadthAxis,r=e.node,a=e.breadthNorm,i=e.norm,o=t[t.length-1];return(t[0][n]+o[n]+o[a]-r[i])/2}},{key:"setBreadth",value:function(e){var t,n=this,r=this.breadthAxis,a=this.breadthNorm,i=this.breadthGap,o=this.isVertical,c=e.x,l=e.y;this.postOrder(e,(function(c,l){if(l){var s,u,d=c.isSubTree&&c!==e,f=d?"t":"",p=f+r,h=f+a;if(t){var m=c.children;if(!m||0===m.length||d||c.collapsed){var g=n.getBreadthGap(c,t);s=t.maxBreadth+g}else{s=n.getBreadthByChildren({children:m,breadthAxis:r,node:c,breadthNorm:a,norm:h,isVertical:o}),c.minBreadth=Math.min(c.minBreadth,s);var v=l.children[l.children.indexOf(c)-1];if(v){var y=v.maxBreadth+v[i]-c.minBreadth;y>0&&(u=y)}}}else s=0;d&&n.setSubTreeNodeBreadth(c,s,p),c[p]=s,u&&(o?n.move(c,u,0):n.move(c,0,u),c.maxBreadth+=u);var b=c[p]+c[h];c.maxBreadth=Math.max(b,c.maxBreadth||0),l.maxBreadth=Math.max(b,c.maxBreadth,l.maxBreadth||0);var k=c[p];c.minBreadth=Math.min(k,c.minBreadth||1/0),l.minBreadth=Math.min(k,c.minBreadth,l.minBreadth||1/0),t=c}})),e[r]=this.getBreadthByChildren({children:e.children,breadthAxis:r,node:e,breadthNorm:a,norm:a,isVertical:o}),e.isSubTree&&(e.maxBreadth=0),o?this.move(e,c-e.x,0):this.move(e,0,l-e.y)}},{key:"layout",value:function(e,t){var r=t.direction;"0,1"===r||"1,0"===r||"-1,0"===r||"0,-1"===r?k()(O()(n.prototype),"layout",this).call(this,e,{direction:r}):console.warn("The standard Layout only support vertical or horizontal direction")}}]),n}();l()(ws,"className","Standard");var xs=function(e){x()(n,ks);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"setDepth",value:function(e){var t=this,n=this.depthAxis,r=this.depthNorm,a=this.depthGap,i=this.isPositive;this.preOrderChildren(e,(function(e){var o,c=e.isSubTree,l=c?"t":"",s=l+n,u=l+r,d=e.parent,f=e[a];o=i?d[n]+d[u]/2+f:d[n]+d[u]/2-e[u]-f,c&&t.setSubTreeNodeDepth(e,o,s),e[s]=o}))}},{key:"setBreadth",value:function(e){var t=this,n=this.breadthAxis,r=this.breadthNorm,a=this.breadthGap,i=this.isVertical,o=e.x,c=e.y,l=null;this.preOrder(e,(function(i){var o=i[a],c=i.isSubTree&&i!==e,s=c?"t":"",u=s+n,d=s+r,f=l?l[u]+l[d]+o:0;c&&t.setSubTreeNodeBreadth(i,f,u),i[u]=f,l=i})),i?this.move(e,o-e.x,0):this.move(e,0,c-e.y)}}]),n}();l()(xs,"className","Indent");var _s=function(e){x()(n,ks);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"normalize",value:function(e){e.chainNodes=[e],this.preOrderChildren(e,(function(e,t){e.chainNodes=[e].concat(t.chainNodes||[]),e.index=t.children.indexOf(e),e.indexOdd=e.index%2==1,e.depthOdd=e.depth%2==1})),k()(O()(n.prototype),"normalize",this).call(this,e)}},{key:"setDepth",value:function(e){var t=this.depthAxis,n=this.depthNorm,r=this.depthGap;e.maxDepth=e[t]+e[n],e.maxOddDepth=e.maxDepth,e.maxEvenDepth=e.maxDepth,this.preOrderChildren(e,(function(e,a){var i=e.indexOdd,o=e.depthOdd,c=e.chainNodes;e[t]=o?i?a.maxOddDepth+e[r]:a.maxEvenDepth+e[r]:a[t]+a[n]/2+e[r],e.selfDepth=e[t]+e[n],e.maxDepth=e.selfDepth,e.maxOddDepth=e.selfDepth,e.maxEvenDepth=e.selfDepth,o&&(i?a.maxEvenDepth=Math.max(a.maxEvenDepth,e.selfDepth):a.maxOddDepth=Math.max(a.maxOddDepth,e.selfDepth));for(var l=0;l<c.length-1;l++){var s=c[l],u=c[l+1];s.depthOdd&&(s.indexOdd?u.maxOddDepth=Math.max(u.maxOddDepth,s.maxDepth):u.maxEvenDepth=Math.max(u.maxEvenDepth,s.maxDepth)),u.maxDepth=Math.max(u.maxDepth,s.maxDepth)}}))}},{key:"setBreadth",value:function(e){var t=this,n=this.breadthAxis,r=this.breadthNorm,a=this.breadthGap;e.maxBreadth=e[n]+e[r],e.minBreadth=e[n],this.preOrderChildren(e,(function(e,i){e.depthOdd?e[n]=i[n]+(i[r]-e[r])/2:i.indexOdd?e[n]=i.maxBreadth+e[a]:e[n]=i.minBreadth-e[a]-e[r],e.minBreadth=e[n],e.maxBreadth=e[n]+e[r];for(var o=0;o<e.chainNodes.length-1;o++){var c=e.chainNodes[o],l=e.chainNodes[o+1];if(!c.depthOdd){var s=0===c.index?l:l.children[c.index-1];if(l.indexOdd){var u=s[n]+s[r];u>c.minBreadth&&function(){var e=u-c.minBreadth+c[a];t.deepEach(c,(function(t){t[n]+=e,t.minBreadth+=e,t.maxBreadth+=e}))}()}else{var d=s[n];d<c.maxBreadth&&function(){var e=c.maxBreadth-d+c[a];t.deepEach(c,(function(t){t[n]-=e,t.minBreadth-=e,t.maxBreadth-=e}))}()}}l.minBreadth=Math.min(c.minBreadth,l.minBreadth),l.maxBreadth=Math.max(c.maxBreadth,l.maxBreadth)}}))}}]),n}();l()(_s,"className","Backbone");var Cs=function(e){x()(n,_s);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return n}();l()(Cs,"className","Timeline");var Es=function(e){x()(n,fs);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g()(this,n),r=Cr({default:{border:{outer:0,radius:4,shape:"rect",fill:"#596086","stroke-width":2,stroke:"rgba(0, 0, 0, 0)"},outline:{outer:2,radius:6,"stroke-width":2,selected:{stroke:"#096dd9",fill:"rgba(52, 155, 249, .15)","stroke-width":1},highlight:{stroke:"#349BF9",fill:"none"},beginEdit:{stroke:"#096dd9"}},textArea:{className:"lake-diagram-mindmap-root"},layout:{type:"standard",direction:[1,0],quadrants:2,quadrant:1},treeEdge:{stroke:"#959EA6"},tapered:!1,rainbow:!0,note:{width:20,height:20,padding:[0,8,0,0]}},textAreaContentStyleSheets:[{query:"self",css:{"letter-spacing":"normal","font-size":"18px","font-family":'PingFangSC-Medium, "PingFang SC"',"line-height":"1.74","word-break":"break-word",outline:"none",color:"white"}}]},r),(e=t.call(this,r)).isRoot=!0,e.initLayoutEngine(),e}return y()(n,[{key:"canCollapse",value:function(){return!1}},{key:"getPadding",value:function(){return[6,this.model.note?8:16,6,16]}},{key:"initLayoutEngine",value:function(){var e=this.cellMap,t=this.model;this.layoutHelper=new bl({model:t,parse:function(t){var n=e[t.id];return{w:n.width,h:n.height,layout:n.layout.type,quadrants:n.layout.quadrants,direction:n.layout.direction,quadrant:n.computedProps.layout.quadrant,collapsed:t.collapsed,border:{shape:n.border.shape},cell:n}},algorithms:{timeline:new Cs,standard:new ws({getBreadthByChildren:function(e){var t=e.children,n=e.breadthAxis,r=e.node,a=e.breadthNorm,i=e.norm,o=e.isVertical,c=t.length,l=t[0],s=t[c-1];if(!o){if("line"===t[0].border.shape&&"line"===r.border.shape)return(t[0][n]+t[0][a]+s[n]+s[a])/2-r[i];if("line"===t[0].border.shape&&"line"!==r.border.shape)return(t[0][n]+t[0][a]+s[n]+s[a]-r[a])/2;if("line"!==t[0].border.shape&&"line"===r.border.shape&&l===s)return t[0][n]+l[a]/2-r[i]}return(t[0][n]+s[n]+s[a]-r[i])/2},getHGap:function(e){var t=e.isVertical,n=e.node.depth;return t?1===n?48:24:64},getVGap:function(e){var t,n=e.isVertical,r=e.node,a=r.depth,i=r.border;return n?t=64:1===a?t=24:(t=2===a?10:8,"line"!==i.shape&&(t*=2)),t}}),indent:new xs({getHGap:function(e){var t=e.isVertical,n=e.node.depth;return t?1===n?48:24:16},getVGap:function(e){var t,n=e.node,r=e.isVertical,a=n.depth,i=n.border;return r?t=32:1===a?t=24:(t=2===a?10:8,"line"!==i.shape&&(t*=2)),t}})}})}},{key:"_layoutPosition",value:function(e){e.forEach((function(e){var t=e.cell;t.x=e.x||0,t.y=e.y||0}))}},{key:"_layoutZIndex",value:function(e){var t=this,n=this.diagram,r=n.rootGroup;n.contentEditor.isBegin||(e=e.filter((function(e){return e.cell!==t&&void 0!==e.zIndex})).sort((function(e,t){return e.zIndex-t.zIndex}))).forEach((function(e){var n=e.cell;r.insertBefore(n.graphicGroup,t.graphicGroup)}))}},{key:"executeLayout",value:function(){var e=this.layoutHelper.execute(),t=[];gr(e,(function(e){t.push(e)})),this._layoutPosition(t),this._layoutZIndex(t)}},{key:"minWidth",get:function(){return 52}}]),n}();l()(Es,"className","MindmapRoot");var Os=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"updateControlPoints",value:function(e){var t=this.beforeData,n=this.afterData;e.forEach((function(e){var r=e.model,i=r.controlPoints,o=[0,0];["source","target"].forEach((function(e){var i=r[e]&&r[e].id,c=t[i],l=n[i];if(c&&l){var s=a.sub([],l,c);o=a.add(o,o,s)}})),Rr(o,[0,0])||(o=o.map((function(e){return e/2})),e.update({controlPoints:i.map((function(e){return[e[0]+o[0],e[1]+o[1]]}))}))}))}},{key:"getRelatedCells",value:function(e){var t=this.diagram,n=[];return e.forEach((function(e){var r=e.model;["source","target"].forEach((function(e){var a=r[e]&&r[e].id;if(a){var i=t.find(a);i&&n.push(i)}}))})),n}},{key:"getData",value:function(e){var t={};return this.getRelatedCells(e).forEach((function(e){var n=e.getRelativePoint({x:.5,y:.5});t[e.model.id]=[n.x,n.y]})),t}},{key:"getLines",value:function(){return this.diagram.getCells().filter((function(e){return e.isLine})).filter((function(e){return e.isDrawable()&&e.model.controlPoints}))}},{key:"onBeforeChange",value:function(){var e=this.getLines();Object.assign(this.beforeData,this.getData(e))}},{key:"onAfterChange",value:function(){var e=this.getLines();Object.assign(this.afterData,this.getData(e)),this.updateControlPoints(e)}},{key:"reset",value:function(){this.beforeData={},this.afterData={}}},{key:"init",value:function(){var e=this.diagram;this.reset(),this.bind(e,"beforechange",this.onBeforeChange.bind(this)),this.bind(e,"afterchange",this.onAfterChange.bind(this))}}]),n}();var Ss=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){var t=e.contentEditor;this.bind(e,"afterselect",(function(){if(!e.destroyed){var n=e.selector.selections;if(1===n.length){var r=n[0].textAreaElement;if(!r)return;var a=r.htmlContainer;t.dom&&t.dom!==a&&t.unbind(),t.dom||!e.viewportContainer.contains(a)||e.signal.mouseMultiSelecting||t.bind(a),t.isBegin||t.prepareEdit()}else t.unbind(),e.focus()}})),this.bind(e,"dblclick",(function(n){var r=n.target;if(r!==t.dom||!t.isBegin){var a=e.getCell(r);a&&a.textAreaElement&&(a.textAreaElement.htmlContainer===t.dom||a.borderElement&&a.borderElement.rendererElement===r||a.imageElement&&a.imageElement.rendererElement===r)&&(a.state.selected||e.selector.select(a),e.command.execute("BeginEditContent"))}})),this.bind(e,"click",(function(t){var n=e.getCell(t.target);n&&n.textAreaElement&&n.textAreaElement.htmlContainer.contains(t.target)&&"A"===t.target.tagName&&t.preventDefault()}))}}]),n}();var Rs={treeEdge:{stroke:!0,shape:!0},layout:!0},Ds=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"beforedraw",(function(t){t&&(function(e,t){var n=e.action,r=e.models,a=[];"add"===n?a=a.concat(r):"update"===n&&r.forEach((function(e){a.push(e)})),a.length>0&&(a=a.map((function(e){return t.find(e.id)})),t.inherit(Rs,a),a.forEach((function(e){e.deepEach((function(t){t!==e&&t.drawInherit()}))})))}(t,e),function(e,t){if("update"===e.action){var n=e.models.filter((function(e){return t.find(e.id).isRoot}));n.length>0&&n.forEach((function(e){if(void 0!==e.tapered||void 0!==e.rainbow){var n=t.find(e.id);void 0!==e.rainbow&&(!1===e.rainbow?n.forEach((function(e){e.updateModel({treeEdge:{stroke:"#959EA6"}})})):n.forEach((function(e,t){e.updateModel({treeEdge:{stroke:Xl[t%7]}})})),t.inherit(Rs,[n])),n.deepEachWithoutSelf((function(e){e.drawInner()}))}}))}}(t,e))}))}}]),n}();var As=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"mindmapcell:mouseenter",(function(t){var n=t.cell;!e.signal.draggingMindmapCell&&n.isMindmap&&!n.model.isPlaceholder&&n.highlight()})),this.bind(e,"mindmapcell:mouseleave",(function(e){var t=e.cell;t&&t.isMindmap&&t.unHighlight()}))}}]),n}();var Ts=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"mindmapcell:mouseenter",(function(t){var n=t.cell;!e.signal.draggingMindmapCell&&n.isMindmap&&!n.model.isPlaceholder&&n.canCollapse()&&n.showCollapsedButton()})),this.bind(e,"mindmapcell:mouseleave",(function(e){var t=e.cell,n=e.nativeEvent;t&&t.isMindmap&&(!n.relatedTarget||!n.relatedTarget.closest('[data-lake_mindmap_add_button="true"]'))&&t.hideCollapsedButton()}))}}]),n}();function Ps(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function js(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ps(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ps(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ms(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ns(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ms(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ms(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ls=Ka,Is=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];g()(this,e),this.diagram=t,this.drawHotArea=n,this.eventHelper=new Uo,this.hotAreas=[],this.activated=!1,this._bindEvent()}return y()(e,[{key:"turnOn",value:function(){this.update(),this.activated=!0}},{key:"turnOff",value:function(){this.activated=!1}},{key:"_bindEvent",value:function(){var e=this,t=this.diagram,n=this.drawHotArea,r=this.eventHelper,a=this.activated;r.bind(t,"afterrootcelllayout",(function(t){var n=t.root;a&&e.update(n)})),n&&r.bind(t,"afterviewportchange",(function(){e.draw()}))}},{key:"update",value:function(e){var t,n=this.diagram,r=this.drawHotArea;if(0!==(t=e?[e]:n.getCells().filter((function(e){return e.isRoot&&e.isMindmap}))).length){var a=[],i=t.map((function(e){return f()(e.model)}));i.forEach((function(e){gr(e,(function(e){var t=n.find(e.id);e.minX=t.x,e.minY=t.y,e.maxX=t.x+t.width,e.maxY=t.y+t.height,e.depth=t.depth,e.layout=t.computedProps.layout,e.visible=t.state.visible,e.isRoot=t.isRoot,e.root=t.root.model.id}))})),i.forEach((function(e){gr(e,(function(e,t,n){if(!e.isPlaceholder&&e.visible){var r=Ql(e.layout.direction),i=t?function(e,t,n){var r=n.children,a=e;if(!n.parent)for(;r[a]&&r[a].layout.quadrant!==t.layout.quadrant;)a++;if(r[a]&&r[a].layout.quadrant===t.layout.quadrant)return r[a]}(n+1,e,t):null,o=t?function(e,t,n){var r=n.children,a=e;if(!n.parent)for(;r[a]&&r[a].layout.quadrant!==t.layout.quadrant;)a--;if(r[a]&&r[a].layout.quadrant===t.layout.quadrant)return r[a]}(n-1,e,t):null;a=r?a.concat(function(e,t,n,r){var a,i,o,c,l="placeholder",s=[],u=t?t.children.indexOf(e):0,d=e.root;if(e.isRoot)e.children&&0!==e.children.length&&0!==e.children.filter((function(e){return 2===e.layout.quadrant})).length||s.push({minX:e.minX-90,minY:e.minY-60,maxX:e.maxX+90,maxY:(e.minY+e.maxY)/2,parent:e.id,id:e.id+"2"+l,nth:e.children.length,quadrant:2,color:"orange",root:d}),e.children&&0!==e.children.length&&0!==e.children.filter((function(e){return 1===e.layout.quadrant})).length||s.push({minX:e.minX-90,minY:(e.minY+e.maxY)/2,maxX:e.maxX+90,maxY:e.maxY+60,parent:e.id,id:e.id+"1"+l,nth:e.children.length,quadrant:1,color:"pink",root:d});else{var f=t.children,p=1===e.depth&&1===e.layout.quadrant,h=1===e.depth&&2===e.layout.quadrant;if(r||s.push({minX:(o=e.minX-16,c=f[u-1],c&&c.isPlaceholder&&c.layout.quadrant===e.layout.quadrant&&(o=c.minX),h||p?o-90:o),minY:p?e.minY-90:e.minY,maxX:(e.minX+e.maxX)/2,maxY:h?e.maxY+90:e.maxY,parent:t.id,id:(r?r.id:void 0)+e.id+t.id+l,quadrant:e.layout.quadrant,color:"yellow",nth:u,root:d}),n?s.push({minX:(e.minX+e.maxX)/2,minY:2===e.layout.quadrant?Math.max(e.minY,n.minY):p?e.minY-90:e.minY,maxX:(n.minX+n.maxX)/2,maxY:1===e.layout.quadrant?Math.min(e.maxY,n.maxY):h?e.maxY+90:e.maxY,parent:t.id,id:e.id+(n?n.id:void 0)+t.id+l,quadrant:e.layout.quadrant,color:"blue",nth:u+1,root:d}):s.push({minX:(e.minX+e.maxX)/2,minY:p?e.minY-90:e.minY,maxX:(a=e.maxX+16,i=f[u+1],i&&i.isPlaceholder&&i.layout.quadrant===e.layout.quadrant&&(a=i.maxX+30),h||p?a+90:a),maxY:h?e.maxY+90:e.maxY,parent:t.id,id:e.id+void 0+t.id+l,color:"red",nth:u+1,addOrder:"push",quadrant:e.layout.quadrant,root:d}),!e.children||0===e.children.length||1===e.children.length&&e.children[0].isPlaceholder){var m={minX:e.minX,maxX:e.maxX};e.minY>t.minY?(m.minY=e.maxY,m.maxY=e.maxY+100):(m.minY=e.minY-100,m.maxY=e.minY),s.push(Ns(Ns({},m),{},{parent:e.id,id:NaN+e.id+l,nth:0,color:"green",quadrant:e.layout.quadrant,addOrder:"push",root:d}))}}return s}(e,t,i,o)):a.concat(function(e,t,n,r){var a,i,o,c,l="placeholder",s=[],u=t?t.children.indexOf(e):0,d=e.root;if(e.isRoot)e.children&&0!==e.children.length&&0!==e.children.filter((function(e){return 2===e.layout.quadrant})).length||s.push({minX:e.minX-90,minY:e.minY-60,maxX:(e.minX+e.maxX)/2,maxY:e.maxY+60,parent:e.id,id:e.id+"2"+l,nth:e.children.length,quadrant:2,color:"orange",root:d}),e.children&&0!==e.children.length&&0!==e.children.filter((function(e){return 1===e.layout.quadrant})).length||s.push({minX:(e.minX+e.maxX)/2,minY:e.minY-60,maxX:e.maxX+90,maxY:e.maxY+60,parent:e.id,id:e.id+"1"+l,nth:e.children.length,quadrant:1,color:"pink",root:d});else{var f,p=t.children,h=1===e.depth&&1===e.layout.quadrant,m=1===e.depth&&2===e.layout.quadrant;if(r||s.push({minX:h?e.minX-90:e.minX,minY:(o=e.minY-16,c=p[u-1],c&&c.isPlaceholder&&c.layout.quadrant===e.layout.quadrant&&(o=c.minY),m||h?o-90:o),maxX:m?e.maxX+90:e.maxX,maxY:(e.minY+e.maxY)/2,parent:t.id,id:(r?r.id:void 0)+e.id+t.id+l,quadrant:e.layout.quadrant,color:"yellow",nth:u,root:d}),n?s.push({minX:2===e.layout.quadrant?e.minX:1===e.depth?e.minX-90:e.minX,minY:(e.minY+e.maxY)/2,maxX:1===e.layout.quadrant?e.maxX:1===e.depth?e.maxX+90:e.maxX,maxY:(n.minY+n.maxY)/2,parent:t.id,id:e.id+(n?n.id:void 0)+t.id+l,quadrant:e.layout.quadrant,color:"blue",nth:u+1,root:d}):s.push({minX:h?e.minX-90:e.minX,minY:(e.minY+e.maxY)/2,maxX:m?e.maxX+90:e.maxX,maxY:(a=e.maxY+16,i=p[u+1],i&&i.isPlaceholder&&i.layout.quadrant===e.layout.quadrant&&(a=i.maxY+30),m||h?a+90:a),parent:t.id,id:e.id+void 0+t.id+l,color:"red",nth:u+1,addOrder:"push",quadrant:e.layout.quadrant,root:d}),!e.children||0===e.children.length||1===e.children.length&&e.children[0].isPlaceholder)f=e.minX>t.minX?{minX:e.maxX,minY:e.minY-0,maxX:e.maxX+100,maxY:e.maxY+0}:{minX:e.minX-100,minY:e.minY-0,maxX:e.minX,maxY:e.maxY+0},s.push(js(js({},f),{},{parent:e.id,id:NaN+e.id+l,nth:0,color:"green",quadrant:e.layout.quadrant,addOrder:"push",root:d}))}return s}(e,t,i,o))}}))})),this.hotAreas=a,this.buildQuadtree(),r&&this.draw()}}},{key:"buildQuadtree",value:function(){var e=jn(),t=this.hotAreas.map((function(e){return[e.minX,e.minY,e.maxX-e.minX,e.maxY-e.minY,e]}));e.addAll(t),this.quadtree=e,this.maxWidth=Pr(t,(function(e){return e[2]})),this.maxHeight=Pr(t,(function(e){return e[3]}))}},{key:"_search",value:function(e,t){var n=this.quadtree,r=this.maxWidth,a=this.maxHeight,i=[];return n.visit((function(n,o,c,l,s){var u=n.data;return u&&u[0]+u[2]>=e&&u[0]<e&&u[1]+u[3]>=t&&u[1]<t&&i.push(u[4]),o>=e||c>=t||l+r<e||s+a<t})),i}},{key:"hit",value:function(e){return this._search(e[0],e[1])[0]}},{key:"draw",value:function(){var e=this.diagram.frontRootGroup;e.clear(),this.hotAreas.forEach((function(t){var n=t.minX,r=t.minY,a=t.maxX,i=t.maxY,o=t.color,c=new Ls({d:Ia(n,r,a-n,i-r),fill:o,opacity:.5,"pointer-events":"none"});e.add(c)}))}},{key:"destroy",value:function(){this.eventHelper.destroy(),this.diagram=void 0,this.drawHotArea=void 0,this.eventHelper=void 0}}]),e}();function zs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Bs=ai,Fs=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){var t,n,r,a,i,o,c,s,u,d,p,h,m=new Is(e);function g(){if(e.viewport.preventDefault(!1),n&&e.remove(n.id),n){var l=f()(r);l.forEach((function(e){gr(e,(function(e){delete e.zIndex}))})),n.parent===n.root&&l.forEach((function(e){e.layout?e.layout.quadrant=n.quadrant:e.layout={quadrant:n.quadrant}}));var d=t.map((function(e,t){return{parent:n.parent,nth:n.nth+t}})),p=e.find(n.parent);t.forEach((function(e,t){var n=l[t];1===e.depth&&p.depth>0&&n&&n.treeEdge&&n.treeEdge.stroke&&delete n.treeEdge.stroke})),p.isRoot&&l.forEach((function(t,n){var r=e.query.appendChildModel(p,n);t.treeEdge?t.treeEdge.stroke||(t.treeEdge.stroke=r.treeEdge.stroke):t.treeEdge={stroke:r.treeEdge.stroke}})),e.command.execute("MindmapMoveNode",{dragCells:t,dragCellModels:r,addCellModels:l,addOptions:d,dragCellOptions:s})}else r&&e.add(r,s);u&&e.delegator.remove(u),u=void 0,t=void 0,r=void 0,n=void 0,a=void 0,i=void 0,s=void 0,o=void 0,c=void 0,h=void 0,e.signal.draggingMindmapCell=!1,m.turnOff()}this.mindmapHotAreaHelper=m,this.bind(e,"mousedown",(function(n){var r=n.target,o=n.clientX,c=n.clientY,l=n.button,s=e.getCell(r);s&&s.isMindmap&&!s.isRoot&&0===l&&!e.signal.contentEditing&&(a=o,i=c,e.selector.selections.length>1&&e.selector.selections.includes(s)?(t=(t=e.selector.selections.concat([])).filter((function(e){return!e.isRoot})),(t=e.deduplicate(t)).sort((function(e,t){return e.getNth()-t.getNth()})),h=!0):t=[s])})),this.bind(e,"mousemove",(function(g){if(t&&0!==t.length){if(!r&&Math.abs(a-g.clientX)+Math.abs(i-g.clientY)>10&&!e.signal.contentEditing){e.selector.clear(),r=t.map((function(e){return f()(e.model)})),s=t.map((function(t){return e.getCellOptions(t)}));var v=e.viewport.invertClient([g.clientX,g.clientY]);u=e.delegator.create((function(e){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=new Bs({x:t-24.5-r,y:n-11+r,height:22,width:49,rx:4,ry:4,fill:"rgba(52, 155, 249, .2)"}),i=new Bs({x:t-24.5+r,y:n-11-r,height:22,width:49,rx:4,ry:4,fill:"rgba(52, 155, 249, .2)"});e.add(a),e.add(i)}(e,v[0],v[1],h?3:0)})),e.remove(t),e.signal.draggingMindmapCell=!0,m.turnOn(),e.viewport.preventDefault(),o=g.clientX,c=g.clientY,e.emit("mindmap:afterdragchildcellstart")}if(u){var y=e.viewport.zoom;d=(g.clientX-o)/y,p=(g.clientY-c)/y,u.translate(d,p)}if(r){var b=e.viewport.invertClient([g.clientX,g.clientY]),k=m.hit(b);if(n&&(k?n.id!==k.id&&e.remove(n.id):e.remove(n.id)),k&&!e.find(k.id)){var w=e.add(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zs(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({isPlaceholder:!0,width:32,height:10,border:{shape:"rect",fill:"#C5E3FF"},treeEdge:{stroke:"#C5E3FF"},layout:{quadrant:k.quadrant}},k),{parent:k.parent,nth:k.nth});M()(w,1)[0].toBack()}n=k}}})),this.bind(e,"keydown",(function(e){27===e.which&&g()})),this.bind(e,"mouseup",(function(){g()})),this.bind(e,"mouseleave",(function(){g()}))}},{key:"unbind",value:function(){this.mindmapHotAreaHelper&&(this.mindmapHotAreaHelper.destroy(),this.mindmapHotAreaHelper=void 0),k()(O()(n.prototype),"unbind",this).call(this)}}]),n}();var Vs=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){var t,n,r,a,i,o,c,l,s=0,u=0,d=[];this.bind(e,"mousedown",(function(a){var i=a.target,o=a.clientX,c=a.clientY,s=a.button,u=e.getCell(i);u&&u.isRoot&&0===s&&!e.signal.contentEditing&&(n=o,r=c,e.selector.selections.length>1&&e.selector.selections.includes(u)?(t=e.selector.selections.concat([]),l=t.map((function(e){return e.model.id})),t=t.filter((function(e){return e.isRoot})),(t=e.deduplicate(t)).sort((function(e,t){return e.getNth()-t.getNth()}))):l=(t=[u]).map((function(e){return e.model.id})))})),this.bind(e,"mousemove",(function(l){if(t&&0!==t.length){if(!o&&Math.abs(n-l.clientX)+Math.abs(r-l.clientY)>3&&!e.signal.contentEditing){if(0===(t=t.filter((function(e){return!e.isLine||!e.source.id&&!e.target.id}))).length)return;e.selector.clear(),t.forEach((function(e){e.deepEach((function(e){e.state.visible&&d.push(e)}))})),c=e.getRelatedLines(t),d=d.concat(c),o=e.delegator.create(d.filter((function(t){if(t.isLine){var n=e.find(t.source.id),r=e.find(t.target.id),a=n&&n.root,i=r&&r.root;if(a&&i&&a!==i&&(!d.includes(a)||!d.includes(i)))return!1}return!0}))),d.forEach((function(e){e.hide()}));var f=e.viewport.invertClient([l.clientX,l.clientY]);a=f[0],i=f[1],e.signal.draggingMindmapCell=!0}if(o){var p=e.viewport.invertClient([l.clientX,l.clientY]);s=p[0]-a,u=p[1]-i,o.translate(s,u)}}})),this.bind(e,"mouseup",(function(){!function(){if(o){d.forEach((function(e){e.show()}));var p=Sr(t.concat(c)),h=p.map((function(e){if(e.isLine){var t={};return["source","target"].forEach((function(n){var r=e[n];if(!r.id&&r.connection){var a=r.connection;t[n]={connection:[a[0]+s,a[1]+u]}}})),t}return{x:e.x+s,y:e.y+u}})),m=f()(l);e.command.execute("Update",{id:p,model:h,select:function(){m&&e.selector.select(m)}}),e.delegator.remove(o)}t=void 0,n=void 0,r=void 0,a=void 0,i=void 0,o=void 0,c=void 0,l=void 0,e.signal.draggingMindmapCell=!1,s=0,u=0,d=[]}()}))}}]),n}();function Us(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Us(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Us(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Hs="rgba(255, 255, 255, 0.65)";function Ws(){var e=new _a,t=new Ka({fill:"rgba(255,255,255,0)"}),n=new Ka({stroke:"#BFBFBF",fill:Hs}),r=new Ci,a=new Ka({fill:"url(#".concat(r.id,")")});return e.dataset({lake_prevent_click_unselect:!0,lake_mindmap_add_button:!0}),t.css({cursor:"default"}),n.css({cursor:"pointer"}),e.add(t),e.add(n),{group:e,background:t,btn:n,tail:a,gradient:r}}function Ys(e){var t=e.x,n=e.y,r=e.width,a=e.height,i=e.group,o=e.background,c=e.btn,l=e.tail,s=e.gradient,u=e.zoom,d=e.verticalAlign,f=void 0===d?"center":d,p=e.tailConfig,h=9/u,m=4/u,g={x:t+r/2,y:n+a/2},v=0,y=a;"bottom"===f&&(v=a/2,y+=h),o.update({d:Ia(t,n,r,y)});var b=g.x,k=g.y+v;if(c.update({stroke:"#BFBFBF",d:Fa(b,k,h)+"M".concat(b,",").concat(k-m," L").concat(b,",").concat(k+m)+"M".concat(b+m,",").concat(k," L").concat(b-m,",").concat(k),"stroke-width":2/u}),p){var w=p.stroke,x=p.position,_=10/u,C="rgba(255,255,255,0)";i.add(l),"right"===x?(s.update("l(0) 0:".concat(w," 1:").concat(C)),l.update({d:Ia(b+h,k-p["stroke-width"]/2,_,p["stroke-width"])})):"left"===x?(s.update("l(0) 0:".concat(C," 1:").concat(w)),l.update({d:Ia(b-_-h,k-p["stroke-width"]/2,_,p["stroke-width"])})):"bottom"===x?(s.update("l(270) 0:".concat(C," 1:").concat(w)),l.update({d:Ia(b-p["stroke-width"]/2,k+h,p["stroke-width"],_)})):"top"===x&&(s.update("l(270) 0:".concat(w," 1:").concat(C)),l.update({d:Ia(b-p["stroke-width"]/2,k-_-h,p["stroke-width"],_)}))}else l.remove()}var Gs=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){var e;return g()(this,n),(e=t.call(this)).horizontalElements=Ws(),e.verticalElements=Ws(),e}return y()(n,[{key:"init",value:function(e){var t,n=this,r=e.frontRootGroup,a=e.defs,i=this.horizontalElements,o=this.verticalElements,c=function(){},l=function(){};function s(){i.group.remove(),o.group.remove(),c=function(){},l=function(){},t&&t.hideCollapsedButton(),t=void 0}function u(e){return i.group.rendererElement.contains(e)||o.group.rendererElement.contains(e)}a.add(i.gradient),a.add(o.gradient),this.horizontalElements=i,this.verticalElements=o,this.bind(i.btn,"click",(function(n){n.stopPropagation(),e.selector.select([t]),c(),s()})),this.bind(o.btn,"click",(function(n){n.stopPropagation(),e.selector.select([t]),l(),s()})),[i,o].forEach((function(e){var r=e.group,a=e.btn;n.bind(r,"mouseenter",(function(e){e.stopPropagation(),a.update({stroke:"#595959",fill:"white"})})),n.bind(r,"mouseleave",(function(e){e.stopPropagation(),a.update({stroke:"#BFBFBF",fill:Hs}),t&&t.graphicGroup.rendererElement.contains(e.relatedTarget)||u(e.relatedTarget)||s()}))})),this.bind(e,"afterchange",zn()((function(){!t||e.find(t.model.id)&&!t.collapsed||s()}),16)),this.bind(e,"mindmapcell:mouseenter",(function(n){var a=n.cell;if(!e.signal.draggingMindmapCell&&a.isMindmap&&!a.collapsed){var s=Ql(a.computedProps.layout.direction),u=e.viewport.zoom,d=38/u,f=a.canCollapse()?-24:0,p=(s||"line"!==a.border.shape?-1:0)/u+f,h={x:a.x+a.width-p,y:a.y,width:d,height:a.height},m={x:a.x+(a.width-d)/2,y:a.y+a.height-p,width:d,height:d};if(t=a,i.group.remove(),o.group.remove(),a.isRoot)s?(l=function(){e.command.execute("MindmapAppendChild")},m.tailConfig=qs({position:"top"},e.query.appendChildAddButtonTail(a).treeEdge),1===a.computedProps.layout.quadrants&&"0,-1"===String(a.computedProps.layout.direction)&&(m.y=a.y-d,m.tailConfig.position="bottom")):(c=function(){e.command.execute("MindmapAppendChild")},h.tailConfig=qs({position:"left"},e.query.appendChildAddButtonTail(a).treeEdge),1===a.computedProps.layout.quadrants&&"-1,0"===String(a.computedProps.layout.direction)&&(h.x=a.x-d+p,h.tailConfig.position="right"));else if(s)a.y<a.parent.y&&(m.y=a.y-d+p),h.x-=p,m.tailConfig=qs({position:a.y>a.parent.y?"top":"bottom"},e.query.appendChildAddButtonTail(a).treeEdge),l=function(){e.command.execute("MindmapAppendChild")},c=function(){e.command.execute("MindmapAppendSibling")};else{var g=a.x+a.width/2<a.parent.x+a.parent.width/2;g&&(h.x=a.x-d+p),m.height-=4*p,"line"===a.border.shape&&"standard"===a.computedProps.layout.type&&(h.verticalAlign="bottom"),h.tailConfig=qs({position:g?"right":"left"},e.query.appendChildAddButtonTail(a).treeEdge),l=function(){e.command.execute("MindmapAppendSibling")},c=function(){e.command.execute("MindmapAppendChild")}}s?(r.add(o.group),Ys(qs(qs({},m),{},{zoom:u},o))):(r.add(i.group),Ys(qs(qs({},h),{},{zoom:u},i)))}})),this.bind(e,"mindmapcell:mouseleave",(function(t){var n=t.nativeEvent;u(n.relatedTarget)||e.elementMap.fullScreenBtn.contains(n.relatedTarget)||s()})),this.bind(e.contentEditor,"beginedit",(function(){s()})),this.bind(e.contentEditor,"change",(function(){s()})),this.bind(e,"afterselect",(function(){(e.selector.selections.length>1||1===e.selector.selections.length&&e.selector.selections[0]!==t)&&s()})),this.bind(e,"afterviewportchange",(function(){s()}))}}]),n}();var Ks=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"dragover",(function(e){e.preventDefault()})),this.bind(e,"drop",(function(t){t.preventDefault();var n=Array.from(t.dataTransfer.files).filter((function(e){return $l(e)}));n[0]&&e.emit("importimage",{files:n,from:"drop"})}))}}]),n}();function Xs(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return $s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function $s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Qs=Ka,Js={"top-right":"nesw-resize","top-left":"nwse-resize","bottom-right":"nwse-resize","bottom-left":"nesw-resize"},eu=function(){function e(){g()(this,e);var t=new Qs({stroke:"white",fill:"#096dd9"});t.css({cursor:"nesw-resize"}),t.dataset({lake_prevent_click_unselect:!0}),this.element=t,this.position="top-right"}return y()(e,[{key:"contains",value:function(e){return this.element.rendererElement.contains(e)}},{key:"update",value:function(e,t){var n=e.computedProps.layout||e.layout;if(n){var r,a,i,o=n.direction,c=n.quadrant,l=n.quadrants,s=Math.min(c,l),u=2;"line"===e.border.shape?u=1:"capsule"===e.border.shape&&(u=-(e.width>e.height?e.height:e.width)/9),o[0]<0&&1===s||o[0]>0&&2===s?(r="top-left",a=e.x-u,i=e.y-u):o[1]>0&&1===s?(r="bottom-right",a=e.x+e.width+u,i=e.y+e.height+u):(r="top-right",a=e.x+e.width+u,i=e.y-u);var d=4/t,f=1/t;this.position=r,this.element.update({"stroke-width":f,d:Fa(a,i,d-f)}),this.element.css({cursor:Js[r]})}}},{key:"remove",value:function(){this.element.remove()}}]),e}(),tu=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){var e;g()(this,n);var r=new eu;return(e=t.call(this)).handle=r,e}return y()(n,[{key:"init",value:function(e){var t=this.handle,n=null,r=null,a=null,i=null,o=zn()((function(o){if(a&&r&&n){var c=e.find(n),l=e.viewport.zoom,s=t.position,u=(o.clientX-a.x)*(["top-left"].includes(s)?-1:1),d=(o.clientY-a.y)*(["bottom-right"].includes(s)?1:-1);i={width:xr(r.width+u*l,c.minWidth),height:xr(r.height+d*l,c.minHeight)},e.update(c,i)}}),10);function c(t){a=null,document.body.removeEventListener("mousemove",o),e.signal.draggingMindmapCell=!1,n&&r&&i&&(t.stopPropagation(),e.update(n,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zs(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r.model)),e.command.execute("Update",{id:n,model:i}))}this.bind(e,"afterchange",(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.models,i=r.action;if(a&&"update"===i){var o,c=Xs(a);try{for(c.s();!(o=c.n()).done;){var l=o.value;l.id===n&&t.update(e.cellMap[l.id],e.viewport.zoom)}}catch(e){c.e(e)}finally{c.f()}}})),this.bind(e,"mousedown",(function(i){if(t.contains(i.target)){var l=n&&e.find(n);if(l&&l.isMindmap){var s=l.textAreaBBox;r={width:l.width,height:l.height,textArea:s.width*s.height,model:{width:l.model.width||null,height:l.model.height||null}},e.signal.draggingMindmapCell=!0,a={x:i.clientX,y:i.clientY},document.body.addEventListener("mousemove",o),document.body.addEventListener("click",c,{once:!0})}}})),this.bind(e,"afterselectionchange",(function(){var r=e.selector.selections;if(1===r.length){var a=r[0];if(a.isMindmap)return a.state.selected?(t.update(a,e.viewport.zoom),e.frontRootGroup.add(t.element),void(n=a.model.id)):(n=null,void t.remove())}t.remove()})),this.bind(e,"afterviewportchange",(function(){var r=n&&e.cellMap[n];r&&r.state.selected?t.update(r,e.viewport.zoom):t.remove()}))}}]),n}();var nu=Ka,ru=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){var e;return g()(this,n),(e=t.call(this)).mask=new nu({"stroke-width":1,stroke:"#1890FF",fill:"rgba(24, 144, 255, 0.15)"}),e.mask.css({"pointer-events":"none"}),e}return y()(n,[{key:"init",value:function(e){var t=this.mask;t.dataset({lake_prevent_click_unselect:!0});var n=null,r=!0;this.bind(e,"keyup",(function(r){if(n)switch(r.key){case"Delete":case"Backspace":e.command.execute("Update",{id:n,model:{width:null,height:null,image:null}}),t.remove()}})),this.bind(e,"mousedown",(function(t){var n=t.target.closest("image"),a=n&&e.getCell(n);r=!a||!a.state.selected})),this.bind(e,"click",(function(a){var i=a.target.closest("image"),o=i&&e.getCell(i);o&&!r?(a.stopPropagation(),o.endEditContent(),e.selector.select([o],!1),function(e,n){var r=["x","y","width","height"].reduce((function(e,t){return e[t]=parseFloat(n.getAttribute(t)),e}),{});t.update({d:Ia(e.x+r.x-1,e.y+r.y-1,r.width+2,r.height+2,1)})}(o,i),e.frontRootGroup.add(t),n=o.model.id,e.tryFocus(),r=!0):a.target!==t.rendererElement&&(n=null,t.remove())})),this.bind(e,"afterselectionchange",(function(){n&&(n=null,t.remove())})),this.bind(e,"mindmap:afterdragchildcellstart",(function(){n&&(n=null,t.remove())}))}}]),n}();function au(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function iu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?au(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):au(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ou=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){var t,n,r,a,i,o,c,l=!1;function s(){l?t&&e.remove(t):(c=Object(I.a)(),e.command.execute("Add",{model:iu({id:c,x:t.x+i,y:t.y+o},e.query.insertRootModel())}),e.remove(t)),n&&n.destroy(),t=void 0,r=void 0,a=void 0,i=void 0,o=void 0,l=!1,n=void 0,e.interaction.changeMode("edit"),c&&(e.selector.select([c]),c=void 0)}this.bind(e,"mouseenter",(function(i){if(!n){var o=e.viewport.invertClient([i.clientX,i.clientY]);t=e.add(iu({x:o[0],y:o[1]},e.query.insertRootModel()))[0],n=e.delegator.create([t]),r=i.clientX,a=i.clientY,t.hide()}})),this.bind(e,"mousemove",(function(t){n&&(i=(t.clientX-r)/e.viewport.zoom,o=(t.clientY-a)/e.viewport.zoom,n.translate(i,o))})),this.bind(window,"mouseleave",(function(){l=!0,s()})),this.bind(window,"mouseup",(function(t){n&&(e.viewportContainer.contains(t.target)||(l=!0),s())})),this.bind(e,"keydown",(function(e){27===e.which&&(l=!0,s())}))}}]),n}();var cu=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){var e;g()(this,n),e=t.call(this);var r=document.createElement("div"),a=document.createElement("span");return a.classList.add("lake-icon"),a.classList.add("lake-icon-full-screen"),a.classList.add("lake-prevent-card-activated"),r.appendChild(a),r.style["z-index"]="1033",r.style["border-radius"]="4px",r.style.position="absolute",r.style.width="".concat(20,"px"),r.style.height="".concat(20,"px"),r.style.color="#fff",r.style.cursor="pointer",r.style["box-shadow"]="0px 2px 8px 0px rgba(0, 0, 0, 0.08)",r.style["background-color"]="rgba(0, 0, 0, 0.65)",r.style["text-align"]="center",e.fullScreenBtn=r,e.imageBrowser=Object(o.getImageBrowser)(),e}return y()(n,[{key:"init",value:function(e){var t,n,r=this,a=this.fullScreenBtn,i=this.imageBrowser;e.elementMap.fullScreenBtn=a;var o=function(){a.remove(),n&&r.unbind(n),t=void 0,n=void 0};this.bind(a,"click",(function(){if(t){var e=t.image,n=t.imageElement.rendererElement;i.open([{src:n.getAttribute("data-raw_src"),msrc:n.getAttribute("href"),w:e.naturalWidth,h:e.naturalHeight}],0)}})),this.bind(a,"mouseleave",(function(e){t.imageElement.rendererElement.contains(e.relatedTarget)||o()})),this.bind(e,"mindmapcellimage:mouseenter",(function(i){var c=i.cell;if(!e.signal.draggingMindmapCell){document.body.appendChild(a);var l=c.imageElement.getBoundingClientRect(),s=c.image;t=c,s.width>30&&s.height>30?(a.style.top="".concat(l.top+window.pageYOffset+6,"px"),a.style.left="".concat(l.right+window.pageXOffset-26,"px")):(a.style.top="".concat(l.top+window.pageYOffset-20,"px"),a.style.left="".concat(l.left+window.pageXOffset,"px")),n=r.bind(e,"afterviewportchange",(function(){o()}))}})),this.bind(e,"mindmapcellimage:mouseleave",(function(e){var t=e.nativeEvent;a.contains(t.relatedTarget)||o()})),this.bind(e,"mindmap:afterdragchildcellstart",(function(){o()}))}}]),n}();var lu=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(window,"click",(function(t){t.target.closest(".lake-diagram-note")&&e.command.execute("MindmapOpenNote")}))}}]),n}();var su=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){"Tab"===t.key?(t.preventDefault(),t.altKey?e.command.execute("MindmapAppendParent"):e.command.execute("MindmapAppendChild")):"Enter"===t.key&&(t.preventDefault(),t.shiftKey?e.command.execute("MindmapInsertRoot"):e.selector.selections[0]&&e.selector.selections[0].isRoot?e.command.execute("MindmapAppendChild"):t.altKey?e.command.execute("MindmapPrependSibling"):e.command.execute("MindmapAppendSibling"))}))}}]),n}();var uu=F.HotKeyUtils.isHotkey,du=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){if(37===t.which||38===t.which||39===t.which||40===t.which){t.preventDefault();var n=e.selector,r=n.selections;if(0!==r.length&&r[0].isMindmap){var a,i,o,c=r[r.length-1],l=e.getCells().filter((function(e){return e.state.visible})),s=Ql(c.computedProps.layout.direction);if(uu("right",t)){if(!c.isRoot&&c.x<c.parent.x&&!s)return void n.select([c.parent]);i="x",o=!0}else if(uu("left",t)){if(!c.isRoot&&c.x>c.parent.x&&!s)return void n.select([c.parent]);i="x",o=!1}else if(uu("up",t)){if(!c.isRoot&&c.y>c.parent.y&&s)return void n.select([c.parent]);i="y",o=!1}else if(uu("down",t)){if(!c.isRoot&&c.y<c.parent.y&&s)return void n.select([c.parent]);i="y",o=!0}var u="x"===i?"width":"height",d="x"===i?"y":"x",f="x"===i?"height":"width",p=c[d]+c[f]/2,h=c[d]+c[f];(a=(a=(a=o?l.filter((function(e){return c[i]+c[u]<e[i]})):l.filter((function(e){return e[i]+e[u]<c[i]}))).filter((function(e){var t=e[d]+e[f],n=t<c[d],r=e[d]>h,a=e[d]<=c[d]&&t>=h;return!(n||r)||a}))).sort((function(e,t){if(o){if(e[i]!==t[i])return e[i]-t[i]}else if(e[i]+e[u]!==t[i]+t[u])return t[i]+t[u]-(e[i]+e[u]);return Math.min(Math.abs(p-e[d]),Math.abs(p-(e[d]+e[f])))-Math.min(Math.abs(p-t[d]),Math.abs(p-(t[d]+t[f])))})))[0]&&n.select([a[0]])}}}))}}]),n}(),fu={};function pu(e,t){fu[e]=t}function hu(e){return fu[e]}function mu(e){return gu.apply(this,arguments)}function gu(){return(gu=Y()(H.a.mark((function e(t){var n,r,a,i,o,c,l;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.arrayBuffer();case 3:return n=e.sent,e.next=6,crypto.subtle.digest("SHA-256",n);case 6:return r=e.sent,a=Array.from(new Uint8Array(r)),i=a.map((function(e){return e.toString(16).padStart(2,"0")})).join(""),e.abrupt("return",i);case 12:return e.prev=12,e.t0=e.catch(0),e.next=16,t.arrayBuffer();case 16:return o=e.sent,c=Array.from(new Uint8Array(o)),l=c.map((function(e){return e.toString(16).padStart(2,"0")})).join(""),e.abrupt("return",l.length>100&&l.substring(0,100));case 20:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function vu(e){if(e.image&&e.image.uploadInfo&&e.image.uploadInfo.hash){var t=hu(e.image.uploadInfo.hash);t?(e.image.src=t,e.image.uploadInfo.state=2):e.image.uploadInfo.state=-2}}function yu(e){e.body.forEach((function(e){gr(e,(function(e){vu(e)}))}))}function bu(e){return ku.apply(this,arguments)}function ku(){return(ku=Y()(H.a.mark((function e(t){var n,r,a,i,c,l,s,u,d,f;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.file,r=t.uploader,a=t.enable,i=t.callback,n){e.next=3;break}return e.abrupt("return");case 3:if(!n.type){e.next=7;break}if(c=n.type.split("/").pop(),o.EXTS.IMAGE_EXT.includes(c)){e.next=7;break}return e.abrupt("return");case 7:if(a()){e.next=9;break}return e.abrupt("return");case 9:return l=URL.createObjectURL(n),e.next=12,mu(n);case 12:return s=e.sent,u=new Image,d={src:l,naturalWidth:void 0,naturalHeight:void 0,uploadInfo:{hash:s,fileName:n.name,fileType:n.type,fileSize:n.size,state:0}},u.onload=function(){Object.assign(d,{naturalWidth:u.naturalWidth,naturalHeight:u.naturalHeight}),i(d)},u.src=l,e.next=19,r.image(n);case 19:if(f=e.sent){e.next=23;break}return d.uploadInfo.state=-1,e.abrupt("return",d);case 23:return pu(s,f),e.abrupt("return",d);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wu(e){return e.command.enable("Collapse")?e.command.execute("Collapse"):e.command.enable("Expand")?e.command.execute("Expand"):void 0}function xu(e){return e.command.enable("Collapse")||e.command.enable("Expand")}function _u(e){return e.command.enable("Expand")}function Cu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"curve-arrow",n=t.split("-"),r=M()(n,2),a=r[0],i=r[1],o=e.selector.selections;if(2===o.length&&o.every((function(e){return e.isMindmap}))){var c=e.add([{type:"line",source:{id:o[0].model.id},target:{id:o[1].model.id}}]),l=c[0].getPointAtLength(.5);return e.remove(c),e.command.execute("Add",{model:{type:"line",shape:a,source:{id:o[0].model.id},target:{id:o[1].model.id,marker:i},controlPoints:[[l.x,l.y]]}})}e.command.execute("BeginInsertLine",{shape:a,marker:i})}window.___uplaodFileHashMap=fu;var Eu=Object.freeze({__proto__:null,map:fu,addHashCdn:pu,getHashCdn:hu,generateHash:mu,processImageModel:vu,processData:yu,exportData:function(e){var t=e.export();return yu(t),t},uploadImage:bu,onBeforeSave:function(e,t){return new Promise((function(n){if(e.destroyed)n();else if(t.isCompleted())n();else{var r,a=Date.now();Bn.a.warning(vo("图片上传中，请稍候")),function e(){t.isCompleted()||Date.now()-a>=36e4?(r&&clearTimeout(r),n()):r=setTimeout(e,6e3)}()}}))},executeCollapseExpand:wu,enableCollapseExpand:xu,collapseActive:_u,mindmapInsertLine:Cu,getMindToolbarConfig:function(e){var t=e.diagram,n=e.onImageInputChange,r=e.onSave;return[{name:"save",title:vo("保存"),hotkey:F.ua.macos?"⌘+S":"Ctrl+S",icon:"save",disabled:!1,execCommand:function(){r()}},{name:"undo",title:vo("撤销"),hotkey:F.ua.macos?"⌘+Z":"Ctrl+Z",icon:"undo",disabled:!t.command.enable("Undo"),execCommand:function(){t.command.execute("Undo")}},{name:"redo",title:vo("重做"),hotkey:F.ua.macos?"⌘+Shift+Z":"Ctrl+Shift+Z",icon:"redo",disabled:!t.command.enable("Redo"),execCommand:function(){t.command.execute("Redo")}},{type:"separator"},{name:"beginInsertRoot",title:vo("插入主节点"),hotkey:(F.ua.macos,"Shift+Enter"),icon:"insert-root",disabled:!t.command.enable("MindmapBeginInsertRoot"),execCommand:function(){t.command.execute("MindmapBeginInsertRoot")}},{name:"append",title:vo("插入同级"),hotkey:"Enter",icon:"insert-sibling",disabled:!t.command.enable("MindmapAppendSibling"),execCommand:function(){t.command.execute("MindmapAppendSibling")}},{name:"appendChild",title:vo("插入子级"),hotkey:"Tab",icon:"insert-child",disabled:!t.command.enable("MindmapAppendChild"),execCommand:function(){t.command.execute("MindmapAppendChild")}},{name:"insertLine",title:vo("线条"),hotkey:F.ua.macos?"⌘+L":"Ctrl+L",type:"dropdown",mode:"button",defaultKey:"curve-arrow",data:[{key:"curve",icon:"line-curve"},{key:"curve-arrow",icon:"line-curve-arrow"}],onClick:function(e){var n=e.key;Cu(t,n)},onSelect:function(e){var n=e.key;Cu(t,n)}},{name:"insertNote",title:vo("备注"),icon:"diagram-toolbar-note",disabled:!t.command.enable("MindmapOpenNote"),execCommand:function(){t.command.execute("MindmapOpenNote")}},{name:"createLink",title:vo("插入链接"),hotkey:F.ua.macos?"⌘+K":"Ctrl+K",icon:"link",disabled:!t.command.enable("CreateLink"),execCommand:function(){t.command.execute("CreateLink")}},{name:"insertImage",title:vo("插入图片"),type:"upload",icon:"image",accept:F.EXTS.IMAGE_EXT.map((function(e){return"."+e})).join(","),disabled:!t.command.enable("MindmapAttachImage"),onChange:n},{type:"separator"},{name:"collapseExpand",title:vo("折叠"),hotkey:F.ua.macos?"⌘+/":"Ctrl+/",icon:"collapse-node",disabled:!xu(t),active:_u(t),execCommand:function(){wu(t)}}]},uploadMindmapImage:function(e){var t=e.file,n=e.uploader,r=e.diagram,a=e.from;return new Promise((function(e){bu({file:t,uploader:n,enable:function(){return r.command.enable("MindmapAttachImage")||r.command.enable("MindmapInsertImage")},callback:function(t){"clipboard"===a&&(t.firstInsertRatio=1/window.devicePixelRatio),0===r.selector.selections.length||"drop"===a?r.command.execute("MindmapInsertImage",{image:t}):1===r.selector.selections.length&&r.command.execute("MindmapAttachImage",{image:t}),e(t)}})}))}});var Ou=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){var t=this;this.bind(e,"keydown",(function(n){if(Mc(n)&&"l"===n.key){var r=e.selector.selections;t.cell=r[0],Cu(e)}}))}}]),n}();var Su=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){Mc(t)&&["Backspace","Delete"].includes(t.key)&&e.command.execute("MindmapRemoveSingleNode")}))}}]),n}();var Ru=function(e){x()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){var e,t=this.diagram,r=t.selector.selections,a=r[r.length-1];a.model.collapsed&&(t.update(a,{collapsed:!1}),this.originSelectedCollapsed=!0),e=a.isRoot?function(e,t){var n=t.model.children.map((function(t){return e.find(t.id)})),r=n.filter((function(e){return 2===e.computedProps.layout.quadrant})),a=n.filter((function(e){return 1===e.computedProps.layout.quadrant})),i={},o={parent:t.model.id};return a.length<3?(i.layout={quadrant:1},o.nth=a.length):(i.layout={quadrant:2},o.nth=r.length>0?r[0].getNth():0),{model:i,cellOptions:o}}(t,a):{model:{},cellOptions:{parent:a.model.id,nth:a.model.children?a.model.children.length:0}};var i=t.find(e.cellOptions.parent);xn()(e.model,t.query.appendChildModel(i)),e.model.id=this.id,Object.assign(this,e),this.selectedCellId=a.model.id,k()(O()(n.prototype),"execute",this).call(this),t.contentEditor.beginEdit()}},{key:"forward",value:function(){var e=this.selectedCellId,t=this.diagram;this.originSelectedCollapsed&&t.update(e,{collapsed:!1}),k()(O()(n.prototype),"forward",this).call(this)}},{key:"backward",value:function(){var e=this.selectedCellId,t=this.diagram;this.originSelectedCollapsed&&t.update(e,{collapsed:!0}),k()(O()(n.prototype),"backward",this).call(this),t.selector.select([e])}}]),n}(Bi.Add);l()(Ru,"className","MindmapAppendChild"),l()(Ru,"enable",(function(e){var t=e.selector.selections;return 1===t.length&&t.every((function(e){return e.isMindmap}))}));var Du=function(e){x()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.diagram,r=this.addType,a=t.selector.selections,i=a[a.length-1],o={model:{html:"".concat(vo(""))},cellOptions:{parent:i.parent.model.id,nth:r&&"prepend"===r?i.getNth():i.getNth()+e}};1===i.depth&&(o.model.layout={quadrant:i.computedProps.layout.quadrant});var c=t.find(o.cellOptions.parent);xn()(o.model,t.query.appendChildModel(c)),o.model.id=this.id,Object.assign(this,o),this.selectedCellId=i.model.id,k()(O()(n.prototype),"execute",this).call(this),t.contentEditor.beginEdit()}},{key:"backward",value:function(){var e=this.selectedCellId,t=this.diagram;k()(O()(n.prototype),"backward",this).call(this),t.selector.select([e])}}]),n}(Bi.Add);l()(Du,"className","MindmapAddSibling"),l()(Du,"enable",(function(e){var t=e.selector.selections;return 1===t.length&&t.every((function(e){return!e.isRoot&&e.isMindmap}))}));var Au=function(e){x()(n,Du);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return n}();l()(Au,"className","MindmapAppendSibling");var Tu=function(e){x()(n,Du);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){k()(O()(n.prototype),"execute",this).call(this,0)}}]),n}();l()(Tu,"className","MindmapPrependSibling");var Pu=function(e){x()(n,Bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){var e=this.addCellModels,t=this.addOptions;this.diagram.add(e,t),this.select(e.map((function(e){return e.id})))}},{key:"forward",value:function(){var e=this.addCellModels,t=this.addOptions,n=this.diagram;n.remove(e.map((function(e){return e.id}))),n.add(e,t),this.select(e.map((function(e){return e.id})))}},{key:"backward",value:function(){var e=this.dragCellModels,t=this.dragCellOptions,n=this.diagram;n.remove(e.map((function(e){return e.id}))),n.add(e,t),this.select(e.map((function(e){return e.id})))}}]),n}();l()(Pu,"className","MindmapMoveNode");var ju=function(e){x()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.image,r=e.selector.selections,a=r[r.length-1],i=a.model;this.id=i.id,this.model={image:Zl(t),width:null,height:null},e.signal.preventUpdateCellContent=!0,a.textAreaElement.htmlContainer===e.contentEditor.dom&&(e.contentEditor.execCommand("justifyCenter"),e.contentEditor.updateStartContent(),this.model.html=e.contentEditor.dom.innerHTML),e.signal.preventUpdateCellContent=!1,k()(O()(n.prototype),"execute",this).call(this)}}]),n}(Bi.Update);l()(ju,"className","MindmapAttachImage"),l()(ju,"enable",(function(e){var t=e.selector.selections;return 1===t.length&&t[0].isMindmap}));var Mu=function(e){x()(n,Bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(e){var r;return g()(this,n),(r=t.call(this,e)).queue=!1,r}return y()(n,[{key:"execute",value:function(){this.diagram.interaction.changeMode("beginAddMindmapRoot")}}]),n}();function Nu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}l()(Mu,"className","MindmapBeginInsertRoot");var Lu=function(e){x()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.x,r=this.y;if(this.model=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nu(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.query.insertRootModel()),null!=t&&null!=r)Object.assign(this.model,{x:t,y:r});else{var a=e.getCells().filter((function(e){return e.isRoot})),i=a[a.length-1];Object.assign(this.model,{x:i.x+20,y:i.y+i.height+20})}k()(O()(n.prototype),"execute",this).call(this)}}]),n}(Bi.Add);l()(Lu,"className","MindmapInsertRoot");var Iu=function(e){x()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return n}(Bi.CreateLink);l()(Iu,"className","MindmapCreateLink");var zu=function(e){x()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){var e=this,t=this.diagram,r=this.image;this.model={type:"mindmap",image:Zl(r),html:""};var a=t.viewport.getCenter();this.model.x=a[0]-this.model.image.width/2,this.model.y=a[1]-this.model.image.height/2,k()(O()(n.prototype),"execute",this).call(this),zn()((function(){var n=t.selector.selections;1===n.length&&n[0].model.id===e.id&&t.contentEditor.execCommand("justifyCenter")}),16)()}}]),n}(Bi.Add);l()(zu,"className","MindmapInsertImage"),l()(zu,"enable",(function(e){return 0===e.selector.selections.length}));var Bu=function(e){x()(n,Bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"processNotRoot",value:function(){}},{key:"processRoot",value:function(){}},{key:"execute",value:function(){var e=this.diagram.selector.selections.concat([]).sort((function(e,t){return e.getNth()-t.getNth()}));e[0].parent?this.processNotRoot(e):this.processRoot(e)}},{key:"forward",value:function(){var e=this.diagram,t=this.forwardRemoveId,n=this.forwardSnapshot,r=this.forwardSelections;e.remove(t),e.add.apply(e,B()(n)),e.selector.select(r)}},{key:"backward",value:function(){var e=this.diagram,t=this.backwardRemoveId,n=this.backwardSnapshot,r=this.backwardSelections;e.remove(t),e.add.apply(e,B()(n)),e.selector.select(r)}}]),n}();function Fu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fu(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Uu(e,t){return e=e.filter((function(e){return e.isMindmap})),t.deduplicate(e)}l()(Bu,"className","Snapshot");var qu=function(e){x()(n,Bu);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"processNotRoot",value:function(e){var t=this.diagram,n=(e=Uu(e,t))[e.length-1],r=n.getNth(),a=n.parent,i=a.model.id,o=Vu(Vu({},t.query.appendChildModel(a)),{},{id:Object(I.a)(),html:"",children:[]});1===n.depth&&(o.layout=Vu({},n.model.layout)),this.backwardRemoveId=i,this.backwardSnapshot=t.snapshot([a]),this.backwardSelections=t.selector.selections.map((function(e){return e.model.id})),1===n.depth&&e.forEach((function(e){e.updateModel({layout:null})})),t.add(o,{parent:i,nth:r}),t.update(e,{},{parent:o.id}),t.selector.select(o.id),this.forwardRemoveId=i,this.forwardSnapshot=t.snapshot([a]),this.forwardSelections=t.selector.selections.map((function(e){return e.model.id}))}},{key:"processRoot",value:function(e){var t=this.diagram,n=(e=t.deduplicate(e))[0],r={id:Object(I.a)(),html:"",x:n.x,y:n.y,type:"mindmap",children:e.map((function(e){var t=f()(e.model);return delete t.type,delete t.x,delete t.y,delete t.layout,t}))};gr(r,(function(e){delete e.zIndex})),this.backwardRemoveId=r.id,this.backwardSnapshot=t.snapshot(e),this.backwardSelections=t.selector.selections.map((function(e){return e.model.id})),t.remove(e),t.add(r),t.selector.select(r.id),this.forwardRemoveId=e.map((function(e){return e.model.id})),this.forwardSnapshot=t.snapshot([t.find(r.id)]),this.forwardSelections=t.selector.selections.map((function(e){return e.model.id}))}}]),n}();function Hu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hu(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}l()(qu,"className","MindmapAppendParent"),l()(qu,"enable",(function(e){var t=Uu(e.selector.selections,e);return t.length>0&&t.every((function(e){return e.isMindmap&&e.parent===t[0].parent}))}));var Yu=function(e){x()(n,Bu);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"processNotRoot",value:function(e){var t=this.diagram,n=e[0],r=n.getChildren(),a=n.getNth(),i=n.parent.model.id;this.backwardRemoveId=r.map((function(e){return e.model.id})),this.backwardSnapshot=t.snapshot([n]),this.backwardSelections=t.selector.selections.map((function(e){return e.model.id}));for(var o=0;o<r.length;o++){var c=r[o];t.update(c,{},{parent:i,nth:a+o})}t.remove(n),t.selector.select(r),this.forwardRemoveId=n.model.id,this.forwardSnapshot=t.snapshot(r),this.forwardSelections=t.selector.selections.map((function(e){return e.model.id}))}},{key:"processRoot",value:function(e){var t=this.diagram,n=e[0],r=n.getChildren();this.backwardRemoveId=r.map((function(e){return e.model.id})),this.backwardSnapshot=t.snapshot([n]),this.backwardSelections=t.selector.selections.map((function(e){return e.model.id})),t.remove(n);var a=t.add(r.map((function(e){var t=Wu(Wu(Wu({},n.model),e.model),{},{layout:Wu(Wu({},n.layout),e.layout),x:e.x,y:e.y});return gr(t,(function(e){delete e.zIndex})),t})));t.selector.select(r),this.forwardRemoveId=n.model.id,this.forwardSnapshot=t.snapshot(a),this.forwardSelections=t.selector.selections.map((function(e){return e.model.id}))}}]),n}();l()(Yu,"className","MindmapRemoveSingleNode"),l()(Yu,"enable",(function(e){var t=e.selector.selections;return 1===t.length&&t.every((function(e){return e.isMindmap}))}));var Gu=function(e){x()(n,Bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(e){var r;return g()(this,n),(r=t.call(this,e)).queue=!1,r}return y()(n,[{key:"execute",value:function(){var e=this.diagram,t=e.selector.selections[0];e.emit("opennote",{cell:t})}}]),n}();function Ku(e,t){return e.reduce((function(e,t){return"object"===P()(e)?e[t]:e}),t)}function Xu(e,t,n){var r=e.length;e.reduce((function(e,t,a){if(a===r-1)return e[t]=n,n;if("object"===P()(e[t]))return e[t];if(void 0===e[t]){var i={};return e[t]=i,i}return{}}),t)}function $u(e,t,n){var r,a=n.children,i=Ku(t=t.split("."),n);if(a&&a.length>1)for(var o=0;o<a.length;o++){var c=Ku(t,a[o]);if(void 0!==r){if(c!==r){r=void 0;break}}else r=c}return r?Xu(t,e,r):i&&Xu(t,e,i),e}l()(Gu,"className","MindmapOpenNote"),l()(Gu,"isModelChange",!1),l()(Gu,"enable",(function(e){var t=e.selector.selections;return 1===t.length&&t.every((function(e){return e.isMindmap}))}));var Zu=function(){function e(t){g()(this,e),this.diagram=t}return y()(e,[{key:"appendChildAddButtonTail",value:function(e){var t=e.root.rainbow;return e.isRoot?{treeEdge:{stroke:t?Xl[e.model.children.length%Xl.length]:"#959EA6","stroke-width":e.getDefaultStrokeWidth(e.depth+1)}}:{treeEdge:{stroke:e.computedProps.treeEdge.stroke,"stroke-width":e.getDefaultStrokeWidth(e.depth+1)}}}},{key:"appendChildTransitiveCommon",value:function(e,t){$u(e,"border.shape",t.model)}},{key:"appendChildTransitiveTextFormat",value:function(e,t){var n=function e(t,n){var r=ac(n.find(t.id).textAreaElement.htmlContainer);return t.children&&(r.children=t.children.map((function(t){return e(t,n)}))),r}(t.model,this.diagram),r={};$u(r,"fontSize",n),r.fontSize&&14!==r.fontSize&&(e.html='<span style="font-size: '.concat(r.fontSize,'px;">').concat("&#8203;","</span>"))}},{key:"appendChildTreeEdge",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.root,a=r.rainbow;Xu(["treeEdge","stroke"],e,a?Xl[(t.model.children.length+n)%Xl.length]:"#959EA6")}},{key:"appendChildModel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={};return e.isRoot?this.appendChildTreeEdge(n,e,t):(this.appendChildTransitiveCommon(n,e),this.appendChildTransitiveTextFormat(n,e)),n}},{key:"insertRootModel",value:function(){return{html:"".concat(vo("思维导图")),type:"mindmap"}}},{key:"destroy",value:function(){this.diagram=void 0}}]),e}();function Qu(e,t){var n=[],r=[],a={};e.forEach((function(e){"line"===e.type||"edge"===e.type?n.push(e):r.push(e)})),r.forEach((function(e){gr(e,(function(e){var n=Object(I.a)();a[e.id]=n,t[n]=t[e.id],e.id=n}))})),n.forEach((function(e){var n=Object(I.a)();t[n]=t[e.id],e.id=n,e.source&&e.source.id&&a[e.source.id]&&(e.source.id=a[e.source.id]),e.target&&e.target.id&&a[e.target.id]&&(e.target.id=a[e.target.id])}))}l()(Zu,"className","Query");var Ju=function(e){x()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"_processMindmapCell",value:function(e){var t=this,n=this.diagram,r=e.body,a=e.extraInformations,i=n.selector.selections.filter((function(e){return e.isMindmap})),o=r.filter((function(e){return"mindmap"===e.type}));if(i.length>0){var c=i[0];o.forEach((function(e){delete e.type,delete e.layout,delete e.treeEdge;var t=a[e.id];c.isRoot&&(e.treeEdge=t.treeEdge),e.options={parent:c.model.id}}))}else o.forEach((function(e){var n=a[e.id];e.x="number"==typeof e.x?e.x:n.x,e.y="number"==typeof e.y?e.y:n.y,e.x+=t.offset[0],e.y+=t.offset[1],e.children&&e.children.forEach((function(e){var t=a[e.id];t.treeEdge&&t.treeEdge.stroke&&(e.treeEdge?e.treeEdge.stroke||(e.treeEdge.stroke=t.treeEdge.stroke):e.treeEdge={stroke:t.treeEdge.stroke})}))}))}},{key:"_processLineCell",value:function(e){var t=this.diagram,n=e.body,r=e.extraInformations,a=t.selector.selections,i=e.body.filter((function(e){return"line"===e.type}));if(a.length>0&&a.some((function(e){return!e.isLine})))Ar.apply(void 0,[n].concat(B()(i)));else{var o=this.offset,c=i.filter((function(e){return e.source&&e.source.id&&!t.find(e.source.id)&&!r[e.source.id]||e.target&&e.target.id&&!t.find(e.target.id)&&!r[e.target.id]}));Ar.apply(void 0,[i].concat(B()(c))),Ar.apply(void 0,[n].concat(B()(c))),i.forEach((function(e){["source","target"].forEach((function(t){var n=e[t];!n.id&&n.connection&&(n.connection[0]+=o[0],n.connection[1]+=o[1])})),e.controlPoints&&e.controlPoints.forEach((function(e){e[0]+=o[0],e[1]+=o[1]}))}))}}},{key:"_getOffset",value:function(e,t){var n=this.diagram,r=[6,6];if(e.length>0){var a=t[e.sort((function(e,t){return e.y-t.y}))[0].id];if(a&&null!=a.x&&null!=a.y){var i=n.viewport.focusPoint;r=[(i=n.viewport.invertClient(i))[0]-a.x,i[1]-a.y]}}return r}},{key:"_getDataByPlainText",value:function(e){var t=this.viewportCenter,n=this.diagram.selector.selections,r=Ko(e);if((n.length>1||n.some((function(e){return!e.isMindmap})))&&(r=null),0===n.length&&r&&r.length>1&&(r.forEach((function(e,t){e.treeEdge={stroke:Xl[t%Xl.length]}})),r=[{children:r}]),r){var a={bbox:null};return r.forEach((function(e){e.type="mindmap",gr(e,(function(e){var t=Object(I.a)();e.id=t,a[t]={}})),a[e.id]={x:t[0],y:t[1]}})),{body:r,extraInformations:a}}return!1}},{key:"_clipboardHtmlAndText",value:function(e,t){var n=this.diagram,r=Wo(e);if(!r&&t&&(r=this._getDataByPlainText(t)),r){var a=r,i=a.body,o=a.extraInformations;Qu(i,o),this.offset=this._getOffset(i,o),i.forEach((function(e){e.type||(e.type="mindmap"),gr(e,(function(e){e.zIndex=void 0}))})),this._processMindmapCell(r),this._processLineCell(r);var c=i.map((function(e){var t=e.options||{};return delete e.options,t}));r.execute=function(){n.add(i,c)},r.execute()}return r}},{key:"_clipboardFile",value:function(e){var t=this.diagram,n=Array.from(e).filter((function(e){return $l(e)}));n[0]&&t.emit("importimage",{files:n,from:"clipboard"})}},{key:"clipboard",value:function(e){var t=e.html,n=e.text,r=e.files,a=this.diagram;return this.viewportCenter=a.viewport.getCenter(),r&&r.length?this._clipboardFile(r):this._clipboardHtmlAndText(t,n)}}]),n}(Ac),ed=function(){function e(){g()(this,e),this.colors=[["#000000","#262626","#595959","#8C8C8C","#BFBFBF","#D9D9D9","#E9E9E9","#F5F5F5","#FAFAFA","#FFFFFF"],["#69B1E4","#E482D4","#77C386","#E48484","#A287E1","#DFB85D","#6EC4C4","#C28976","#6F81DB","#B1C774"],["#E6F4FC","#FAEDF6","#E9F7E9","#FCEFED","#EFE8FA","#FCF6E1","#E4F7F5","#F7EDE6","#E8EEFC","#F7FAE6"],["#C4E4F5","#F2D0E8","#CEEBD2","#FBD3D0","#DBCEF5","#F7E9BC","#C0EBE5","#EBD5CA","#C2CDF0","#E5EDCA"],["#91CAED","#EDA6D9","#9DD1A6","#EFACA9","#C0ABEB","#EBD28D","#9AD6D4","#D6AC9A","#91A2E3","#D0E09D"],["#5493C7","#BA5FA6","#579C67","#BD6468","#8169BF","#B88F44","#509FA1","#9C6657","#5461B8","#8CA357"],["#234870","#6B2D62","#244F31","#703039","#392E6E","#6B4C1D","#214D52","#4F2B24","#262A69","#415222"]]}return y()(e,[{key:"_map",value:function(){for(var e={},t=this.colors,n=0,r=t.length;n<r;n++)for(var a=0,i=t[n].length;a<i;a++)e[t[n][a]]={y:n,x:a};return e}},{key:"getStroke",value:function(e){var t=this._map[e];return t&&(2===t.y||3===t.y&&t.x>2&&t.x<5)?this.colors[4][t.x]:e}},{key:"getColors",value:function(){return this.colors}},{key:"destroy",value:function(){this.colors=void 0}}]),e}();l()(ed,"className","Palette");var td=Tc.MouseDragCanvas,nd=Tc.MouseDragMultiSelect,rd=Tc.KeyboardPressModifierKey,ad=Tc.KeyboardSelectAll,id=Tc.KeyboardSwitchEditAndDragCanvas,od={Cells:[bs,Es],Extends:[Zu,Ju,ed],defaultCursors:{dragCanvas:"grab"},modes:[{mode:"edit",Behaviours:[Ss,Tc.AfterSelectionChangeMultiSelectHighlight,Ds,Os,Fs,Gs,Ks,Vs,tu,ru,nd,cu,lu,Ts,su,du,rd,ad,id,Su,Ou]},{mode:"dragCanvas",Behaviours:[id,td]},{mode:"read",Behaviours:[Ds,du,ad,As,td,cu,lu,Ts]},{mode:"beginAddMindmapRoot",Behaviours:[Ds,ou]}],Commands:[Ru,Au,Pu,ju,Mu,Iu,Tu,Lu,zu,qu,Yu,Gu]},cd=[{name:"arrow-1",width:100,height:80,outline:{name:"polygon",points:[{x:49.4351641,y:0},{x:-181188398e-21,y:40.0053069},{x:49.4351641,y:80},{x:49.4351641,y:59.6453069},{x:100,y:59.6453069},{x:100,y:20.9653069},{x:49.4351641,y:20.9653069}]},scene:[],thumb:[{name:"polygon",points:[{x:16.2620321,y:7.99867328},{x:7,y:15.9997347},{x:16.2620321,y:23.9986733},{x:16.2620321,y:19.9277347},{x:25.7357163,y:19.9277347},{x:25.7357163,y:12.1917347},{x:16.2620321,y:12.1917347}]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"arrow-2",width:100,height:80,outline:{name:"polygon",points:[{x:50.5648359,y:-671073958e-22},{x:100,y:40.0053069},{x:50.5648359,y:80},{x:50.5648359,y:59.6453069},{x:0,y:59.6453069},{x:0,y:20.9653069},{x:50.5648359,y:20.9653069}]},scene:[],thumb:[{name:"polygon",points:[{x:16.4736842,y:7.99867328},{x:25.7357163,y:15.9997347},{x:16.4736842,y:23.9986733},{x:16.4736842,y:19.9277347},{x:7,y:19.9277347},{x:7,y:12.1917347},{x:16.4736842,y:12.1917347}]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"arrow-3",width:138,height:80,outline:{name:"polygon",points:[{x:92.2158589,y:0},{x:137.5,y:40},{x:92.2158589,y:80},{x:92.2158589,y:55.9003245},{x:46.7965867,y:55.9003245},{x:46.7965867,y:80},{x:88817842e-23,y:40.0053069},{x:46.7965867,y:0},{x:46.7965867,y:24.6624715},{x:92.2158589,y:24.6624715}]},scene:[],thumb:[{name:"polygon",points:[{x:19.8639344,y:8},{x:27.109397,y:16},{x:19.8639344,y:24},{x:19.8639344,y:19.1800649},{x:12.5968509,y:19.1800649},{x:12.5968509,y:24},{x:5.10939702,y:16.0010614},{x:12.5968509,y:8},{x:12.5968509,y:12.9324943},{x:19.8639344,y:12.9324943}]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"circle",width:100,height:100,outline:{name:"ellipse",cx:50,cy:50,rx:50,ry:50},scene:[],thumb:[{name:"ellipse",cx:16,cy:16.5333333,rx:9,ry:9}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"collate",width:42,height:36,outline:{d:[["M",40.3837262,0],["C",40.6808145,0,40.9625216,.132096,41.1525116,.3604931],["C",41.478533,.7524209,41.4542938,1.3198118,41.1146853,1.6825771],["L",41.0232331,1.7687854],["L",20.9996243,18.0064637],["L",41.0232331,34.2312146],["C",41.2190021,34.3940632,41.3440192,34.6242958,41.3757431,34.8738407],["L",41.3837518,35],["C",41.3837518,35.5128358,40.997686,35.9355072,40.5003473,35.9932723],["L",40.3837262,36],["L",1.9253140000000002,36],["C",1.6282257999999992,36,1.3465187000000007,35.867904,1.1565287000000009,35.6395069],["C",.8305071999999996,35.2475791,.8547464999999992,34.6801882,1.1943549999999998,34.317423],["L",1.2858070999999995,34.2312146],["L",20.9996243,18.0064637],["L",1.2858070999999995,1.7687854],["C",1.0900382000000004,1.6059368,.9650210999999995,1.3757042,.9332972000000002,1.1261593],["L",.9252885000000006,1],["C",.9252885000000006,.4871642,1.3113542000000002,.0644928,1.8086929000000005,.0067277],["L",1.9253140000000002,0],["L",40.3837262,0],["Z"]]},scene:[],thumb:[{d:[["M",23.6671476,9],["C",23.787916,9,23.9022194,9.0545637,23.9781629,9.1484658],["C",24.1170814,9.3202349,24.0904508,9.5720969,23.9186817,9.7110154],["L",23.9186817,9.7110154],["L",16.142839,16],["L",23.9186817,22.2889846],["C",23.9938034,22.3497394,24.0437485,22.4350446,24.0607217,22.5285699],["L",24.0671476,22.6],["C",24.0671476,22.8209139,23.8880615,23,23.6671476,23],["L",23.6671476,23],["L",8.3328524,23],["C",8.212084,23,8.0977806,22.9454363,8.0218371,22.8515342],["C",7.8829186,22.6797651,7.9095492,22.4279031,8.0813183,22.2889846],["L",8.0813183,22.2889846],["L",15.856839,16],["L",8.0813183,9.7110154],["C",8.0061966,9.6502606,7.9562515,9.5649554,7.9392783,9.4714301],["L",7.9328524,9.4],["C",7.9328524,9.1790861,8.1119385,9,8.3328524,9],["L",8.3328524,9],["Z"]]}],discrete:!0,anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.02,name:"NW"},{x:0,y:.98,name:"SW"},{x:1,y:.02,name:"NE"},{x:1,y:.98,name:"SE"}]},{name:"comment-2",width:113,height:100,outline:{d:[["M",18.75,0],["L",93.75,0],["C",104.105339,-0,112.5,8.3946609,112.5,18.75],["L",112.5,59.4444576],["C",112.5,69.7997966,104.105339,78.1944576,93.75,78.1944576],["L",53.1187263,78.1944576],["L",53.1187263,78.1944576],["L",21.9728275,100],["L",21.9728275,78.1916318],["L",18.75,78.1916318],["C",8.3946609,78.1916318,0,69.7969708,0,59.4416318],["L",0,18.75],["C",-0,8.3946609,8.3946609,0,18.75,0],["Z"]]},scene:[],thumb:[{d:[["M",10,9],["L",22,9],["C",23.6568542,9,25,10.3431458,25,12],["L",25,18.700459],["C",25,20.3573132,23.6568542,21.700459,22,21.700459],["L",15.4989962,21.700459],["L",15.4989962,21.700459],["L",10.5156524,25.2421473],["L",10.5156524,21.7],["L",10,21.7],["C",8.3431458,21.7,7,20.3568542,7,18.7],["L",7,12],["C",7,10.3431458,8.3431458,9,10,9],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"comment",width:76,height:60,outline:{d:[["M",1,49],["C",.4477153,49,0,48.5522847,0,48],["L",0,1],["C",-0,.4477153,.4477153,0,1,0],["L",75,0],["C",75.5522847,-0,76,.4477153,76,1],["L",76,48],["C",76,48.5522847,75.5522847,49,75,49],["L",45.6,49],["L",38,60],["L",30.4,49],["L",1,49],["Z"]]},scene:[],thumb:[{d:[["M",7,22],["C",6.4477153,22,6,21.5522847,6,21],["L",6,10],["C",6,9.4477153,6.4477153,9,7,9],["L",25,9],["C",25.5522847,9,26,9.4477153,26,10],["L",26,21],["C",26,21.5522847,25.5522847,22,25,22],["L",18,22],["L",16,25],["L",14,22],["L",7,22],["Z"]]}],padding:[0,10,10,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"connector",width:44,height:44,outline:{name:"ellipse",cx:22,cy:22,rx:22,ry:22},scene:[],thumb:[{name:"ellipse",cx:16,cy:16,rx:9,ry:9}],discrete:!0,anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.145,y:.145,name:"NW"},{x:.145,y:.855,name:"SW"},{x:.855,y:.145,name:"NE"},{x:.855,y:.855,name:"SE"}]},{name:"data",width:124,height:60,outline:{d:[["M",17.1403103,0],["L",122.687657,0],["C",123.239942,-0,123.687657,.4477153,123.687657,1],["C",123.687657,1.0896438,123.675604,1.1788806,123.65182,1.2653118],["L",107.823852,58.7853118],["C",107.704434,59.2192873,107.309796,59.52,106.85969,59.52],["L",1.3123427,59.52],["C",.7600579,59.52,.3123427,59.0722847,.3123427,58.52],["C",.3123427,58.4303562,.3243965,58.3411194,.34818,58.2546882],["L",16.1761477,.7346882],["C",16.2955661,.3007127,16.6902043,-0,17.1403103,0],["Z"]]},scene:[],thumb:[{d:[["M",7.6068779,10],["L",27.4750629,10],["C",27.6959768,10,27.8750629,10.1790861,27.8750629,10.4],["C",27.8750629,10.4358575,27.8702414,10.4715522,27.860728,10.5061247],["L",24.7787871,21.7061247],["C",24.7310198,21.8797149,24.5731645,22,24.3931221,22],["L",4.5249371,22],["C",4.3040232,22,4.1249371,21.8209139,4.1249371,21.6],["C",4.1249371,21.5641425,4.1297586,21.5284478,4.139272,21.4938753],["L",7.2212129,10.2938753],["C",7.2689802,10.1202851,7.4268355,10,7.6068779,10],["Z"]]}],padding:[0,12,0,12],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:.095,y:.5,name:"W"},{x:.905,y:.5,name:"E"},{x:.23,y:.02,name:"NW"},{x:.015,y:.98,name:"SW"},{x:.985,y:.02,name:"NE"},{x:.77,y:.98,name:"SE"}]},{name:"database",width:70,height:80,outline:{d:[["M",35,0],["C",53.9753466,0,69.4238162,5.273994,69.9842524,11.8539517],["L",69.995311,11.8537712],["L",69.995311,12.022052],["L",70,12.2242015],["C",70,12.2917139,69.998433,12.3590985,69.995311,12.426351],["L",69.995311,67.977948],["C",69.6862333,74.6359505,54.1366666,80,35,80],["C",16.0547001,80,.6251167,74.7426951,.0185218,68.1772958],["L",.004689,67.977948],["L",0,11.8537712],["L",.0157476,11.8539517],["C",.5761838,5.273994,16.0246534,0,35,0],["Z"]]},scene:[{d:[["M",70,13],["C",70,19.0751322,54.3299662,24,35,24],["C",15.8633334,24,.3137667,19.1731371,.004689,13.1819051],["L",0,13]]}],thumb:[{d:[["M",16,7],["C",20.337222099999998,7,23.8683009,8.1866487,23.9964006,9.6671391],["L",23.9989282,9.6670985],["L",23.9989282,9.7049617],["L",24,9.750445299999999],["C",24,9.7656356,23.9996418,9.7807972,23.9989282,9.795929000000001],["L",23.9989282,22.2950383],["C",23.9282819,23.7930889,20.3740952,25,16,25],["C",11.6696457,25,8.1428838,23.8171064,8.0042336,22.3398916],["L",8.0010718,22.2950383],["L",8,9.6670985],["L",8.0035994,9.6671391],["C",8.1316991,8.1866487,11.6627779,7,16,7],["Z"]]},{d:[["M",24,10],["C",24,11.1045695,20.418278,12,16,12],["C",11.6259048,12,8.0717181,11.1223886,8.0010718,10.0330737],["L",8,10]]}],padding:[16,10,0,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:0,y:.15,name:"NW"},{x:0,y:.85,name:"SW"},{x:1,y:.15,name:"NE"},{x:1,y:.85,name:"SE"}]},{name:"decision",width:160,height:80,outline:{d:[["M",79.8944272,.4472136],["L",157.211146,39.1055728],["C",157.705124,39.3525621,157.905348,39.9532351,157.658359,40.4472136],["C",157.561596,40.640741,157.404673,40.7976635,157.211146,40.8944272],["L",79.8944272,79.5527864],["C",79.3313722,79.8343139,78.6686278,79.8343139,78.1055728,79.5527864],["L",.7888544,40.8944272],["C",.2948759000000001,40.6474379,.09465150000000011,40.0467649,.34164079999999997,39.5527864],["C",.4384045000000001,39.359259,.5953269999999999,39.2023365,.7888544,39.1055728],["L",78.1055728,.4472136],["C",78.6686278,.1656861,79.3313722,.1656861,79.8944272,.4472136],["Z"]]},scene:[],thumb:[{d:[["M",5.5303015,15.6625354],["L",15.7852498,9.1366592],["C",15.9162764,9.0532787,16.0837236,9.0532787,16.2147502,9.1366592],["L",26.4696985,15.6625354],["C",26.656075,15.7811387,26.7110162,16.0283736,26.5924129,16.2147502],["C",26.5609814,16.2641425,26.5190908,16.3060331,26.4696985,16.3374646],["L",16.2147502,22.8633408],["C",16.0837236,22.9467213,15.9162764,22.9467213,15.7852498,22.8633408],["L",5.5303015,16.3374646],["C",5.343925,16.2188613,5.2889839,15.9716264,5.4075871,15.7852498],["C",5.4390186,15.7358575,5.4809092,15.6939669,5.5303015,15.6625354],["Z"]]}],padding:[10,24,10,24],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"delay",width:120,height:60,outline:{d:[["M",1,0],["L",90,0],["C",106.568542,-0,120,13.4314575,120,30],["C",120,46.5685425,106.568542,60,90,60],["L",1,60],["C",.4477153,60,0,59.5522847,0,59],["L",0,1],["C",-0,.4477153,.4477153,0,1,0],["Z"]]},scene:[],thumb:[{d:[["M",6.4,11.0666667],["L",20,11.0666667],["C",23.3137085,11.0666667,26,13.7529582,26,17.0666667],["C",26,20.3803752,23.3137085,23.0666667,20,23.0666667],["L",6.4,23.0666667],["C",6.1790861,23.0666667,6,22.8875806,6,22.6666667],["L",6,11.4666667],["C",6,11.2457528,6.1790861,11.0666667,6.4,11.0666667],["Z"]]}],padding:[0,10,0,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.02,y:.015,name:"NW"},{x:.02,y:.985,name:"SW"},{x:.81,y:0,name:"NE"},{x:.81,y:1,name:"SE"}]},{name:"diamond",width:100,height:100,outline:{d:[["M",50.5029462,.2083271],["L",99.7916729,49.4970538],["C",100.069442,49.7748233,100.069442,50.2251767,99.7916729,50.5029462],["L",50.5029462,99.7916729],["C",50.2251767,100.069442,49.7748233,100.069442,49.4970538,99.7916729],["L",.2083271,50.5029462],["C",-.0694424,50.2251767,-.0694424,49.7748233,.2083271,49.4970538],["L",49.4970538,.2083271],["C",49.7748233,-.0694424,50.2251767,-.0694424,50.5029462,.2083271],["Z"]]},scene:[],thumb:[{d:[["M",16.2852309,7.0928427],["L",24.9119336,15.7195454],["C",25.0681433,15.8757552,25.0681433,16.1290212,24.9119336,16.2852309],["L",16.2852309,24.9119336],["C",16.1290212,25.0681433,15.8757552,25.0681433,15.7195454,24.9119336],["L",7.0928427,16.2852309],["C",6.936633,16.1290212,6.936633,15.8757552,7.0928427,15.7195454],["L",15.7195454,7.0928427],["C",15.8757552,6.936633,16.1290212,6.936633,16.2852309,7.0928427],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"display",width:120,height:60,outline:{d:[["M",18.559242,0],["L",108.388294,0],["C",108.593661,-124e-7,108.794047,.0632157,108.962224,.18108],["C",116.320741,5.3381999,120,15.2778399,120,30],["C",120,43.9124351,116.326183,53.8383306,108.978548,59.7776865],["C",108.800609,59.9215337,108.578719,60,108.349908,60],["L",18.559242,60],["C",18.2079174,60,17.8823628,59.8156369,17.70166,59.5143473],["L",.3084873,30.5143473],["C",.1185966,30.1977386,.1185966,29.8022614,.3084873,29.4856527],["L",17.70166,.4856527],["C",17.8823628,.1843631,18.2079174,0,18.559242,0],["Z"]]},scene:[],thumb:[{d:[["M",8.7974767,10],["L",24.1863956,10],["L",24.1863956,10],["C",25.6811795,11.0207233,26.4285714,13.0207233,26.4285714,16],["C",26.4285714,18.8174994,25.6811795,20.8174994,24.1863956,22],["L",8.7974767,22],["C",8.6564465,22,8.525838,21.9257329,8.4537242,21.8045343],["L",5.1216988,16.2045343],["C",5.0467021,16.0784903,5.0467021,15.9215097,5.1216988,15.7954657],["L",8.4537242,10.1954657],["C",8.525838,10.0742671,8.6564465,10,8.7974767,10],["Z"]]}],padding:[0,10,0,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.2,y:.14,name:"NW"},{x:.2,y:.86,name:"SW"},{x:.92,y:.14,name:"NE"},{x:.92,y:.86,name:"SE"}]},{name:"document",width:120,height:72,outline:{d:[["M",1,0],["L",119,0],["C",119.552285,-0,120,.4477153,120,1],["L",120,63.2943312],["C",119.999975,63.8466024,119.552271,64.2943066,119,64.2943066],["C",118.874051,64.2943066,118.749236,64.2705132,118.63212,64.2241781],["C",108.562735,60.240377,99.0186463,58.2432881,89.9998549,58.2329113],["C",75.8605271,58.216643,73.9215376,58.9595768,59.9999032,65.0379103],["C",46.0782688,71.1162438,44.1653018,71.9832913,29.9999516,72],["C",20.7325008,72.010162,10.9291929,69.6914094,.590028,65.0437423],["C",.2309588,64.882365,-0,64.5253236,0,64.1316572],["L",0,1],["C",-0,.4477153,.4477153,0,1,0],["Z"]]},scene:[],thumb:[{d:[["M",6,10],["L",26,10],["L",26,23.0414063],["C",24.237687,22.2996937,22.5710122,21.9279131,20.9999758,21.9260644],["C",18.6434212,21.9232914,18.3202563,22.0499279,15.9999839,23.0860074],["C",13.6797115,24.122087,13.3608836,24.2698792,11,24.2726331],["C",9.4260668,24.274461,7.7594002,23.864052,6,23.0414063],["L",6,10],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:.9,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.02,y:.015,name:"NW"},{x:0,y:.9,name:"SW"},{x:.98,y:.015,name:"NE"},{x:1,y:.9,name:"SE"}]},{name:"internal-storage",width:80,height:80,outline:{name:"rect",x:0,y:0,width:80,height:80,rx:0,ry:0},scene:[{d:[{name:"M",x:0,y:8},{name:"L",x:80,y:8}]},{d:[{name:"M",x:8,y:0},{name:"L",x:8,y:80}]}],thumb:[{name:"rect",x:8,y:8,width:17,height:17,rx:.4,ry:.4},{d:[{name:"M",x:8.5,y:12.5},{name:"L",x:24.5,y:12.5}]},{d:[{name:"M",x:12.5,y:8.5},{name:"L",x:12.5,y:24.5}]}],padding:[10,10,0,16],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.02,y:.015,name:"NW"},{x:.02,y:.985,name:"SW"},{x:.98,y:.015,name:"NE"},{x:.98,y:.985,name:"SE"}]},{name:"loop-limit",width:120,height:60,outline:{d:[["M",17.5871195,0],["L",102.429999,0],["C",102.7204,-0,102.996458,.1262398,103.186409,.3459021],["L",119.75641,19.5077312],["C",119.913532,19.6894304,120,19.9216166,120,20.1618291],["L",120,59],["C",120,59.5522847,119.552285,60,119,60],["L",1,60],["C",.4477153,60,0,59.5522847,0,59],["L",0,20.1621158],["C",0,19.92173,.0865921,19.6893882,.2439196,19.5076371],["L",16.831039,.3455213],["C",17.0209853,.1260876,17.2968941,0,17.5871195,0],["Z"]]},scene:[],thumb:[{d:[["M",9.5170283,11.0666667],["L",22.4862374,11.0666667],["C",22.6043417,11.0666667,22.7164089,11.1188597,22.7924108,11.2092607],["L",25.9061734,14.9129485],["C",25.9667743,14.9850307,26,15.0761829,26,15.1703545],["L",26,22.6666667],["C",26,22.8875806,25.8209139,23.0666667,25.6,23.0666667],["L",6.4,23.0666667],["C",6.1790861,23.0666667,6,22.8875806,6,22.6666667],["L",6,15.1704681],["C",6,15.0762275,6.0332743,14.9850132,6.0939556,14.9129087],["L",9.210984,11.2091073],["C",9.286986,11.118798,9.3989942,11.0666667,9.5170283,11.0666667],["Z"]]}],padding:[0,10,0,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.1,y:.15,name:"NW"},{x:.02,y:.985,name:"SW"},{x:.9,y:.15,name:"NE"},{x:.98,y:.985,name:"SE"}]},{name:"manual-input",width:118,height:60,outline:{d:[["M",.8676336,15.6420323],["L",116.867634,.1512179],["C",117.415059,.0781139,117.918097,.4626272,117.991201,1.0100523],["C",117.99706,1.0539311,118,1.0981505,118,1.1424188],["L",118,59],["C",118,59.5522847,117.552285,60,117,60],["L",1,60],["C",.4477152,60,0,59.5522847,0,59],["L",0,16.6332332],["C",0,16.1321084,.3709182,15.7083644,.8676336,15.6420323],["Z"]]},scene:[],thumb:[{d:[["M",6.3471791,12.618128],["L",25.5471791,10.0603243],["C",25.7661584,10.0311521,25.9673249,10.1850212,25.9964971,10.4040005],["C",25.9988298,10.4215108,26,10.4391564,26,10.4568214],["L",26,21.2666667],["C",26,21.4875806,25.8209139,21.6666667,25.6,21.6666667],["L",6.4,21.6666667],["C",6.1790861,21.6666667,6,21.4875806,6,21.2666667],["L",6,13.0146251],["C",6,12.8141269,6.1484367,12.6446042,6.3471791,12.618128],["Z"]]}],padding:[16,10,0,10],anchors:[{x:.5,y:.195,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.02,y:.985,name:"SW"},{x:.98,y:.015,name:"NE"},{x:.98,y:.985,name:"SE"}]},{name:"manual-loop",width:120,height:60,outline:{d:[["M",1.3143594,0],["L",118.682087,0],["C",119.234371,-0,119.682087,.4477153,119.682087,1],["C",119.682087,1.0910107,119.669662,1.1815953,119.645158,1.2692451],["L",103.43015,59.2692451],["C",103.309369,59.7012703,102.915669,60,102.467078,60],["L",17.3668015,60],["C",16.917245,60,16.5229467,59.7000072,16.4030326,59.2667387],["L",.3505905,1.2667387],["C",.2032748,.7344638,.5153458,.1835468,1.0476207,.0362311],["C",1.1344943,.0121874,1.2242199,-0,1.3143594,0],["Z"]]},scene:[],thumb:[{d:[["M",6.5216709,11.0666667],["L",25.4769568,11.0666667],["C",25.6978707,11.0666667,25.8769568,11.2457528,25.8769568,11.4666667],["C",25.8769568,11.5020572,25.8722601,11.5372913,25.8629896,11.5714461],["L",22.8230148,22.7714461],["C",22.7757173,22.9457017,22.6175425,23.0666667,22.4369821,23.0666667],["L",9.5311679,23.0666667],["C",9.3502305,23.0666667,9.1918239,22.9452058,9.1448706,22.7704667],["L",6.1353736,11.5704667],["C",6.0780465,11.3571206,6.2045248,11.1376966,6.4178708,11.0803694],["C",6.451721,11.0712737,6.4866199,11.0666667,6.5216709,11.0666667],["Z"]]}],padding:[0,10,0,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:.1,y:.5,name:"W"},{x:.9,y:.5,name:"E"},{x:.02,y:.015,name:"NW"},{x:.22,y:.985,name:"SW"},{x:.98,y:.015,name:"NE"},{x:.78,y:.985,name:"SE"}]},{name:"merge",width:50,height:36,outline:{d:[["M",48.9094474,1.5703958],["L",25.82137,34.8172272],["C",25.5063491,35.2708574,24.883234299999998,35.3832223,24.4296042,35.0682014],["C",24.3316502,35.0001778,24.246653600000002,34.9151812,24.17863,34.8172272],["L",1.0905526000000005,1.5703958],["C",.7755317000000002,1.1167657,.8878967000000006,.4936509,1.3415268000000005,.17863],["C",1.5090014000000007,.0623282,1.7080259000000009,0,1.9119226000000005,0],["L",48.0880774,0],["C",48.6403621,0,49.0880774,.4477153,49.0880774,1],["C",49.0880774,1.2038967,49.0257492,1.4029212,48.9094474,1.5703958],["Z"]]},scene:[],thumb:[{d:[["M",25.5482177,9.6324953],["L",16.3254934,22.5443093],["C",16.1970898,22.7240743,15.9472698,22.765711,15.7675047,22.6373074],["C",15.7315865,22.6116515,15.7001625,22.5802275,15.6745066,22.5443093],["L",6.4517823,9.6324953],["C",6.3233787,9.4527302,6.3650154,9.2029102,6.5447805,9.0745066],["C",6.6126207,9.0260493,6.6939065,9,6.7772757,9],["L",25.2227243,9],["C",25.4436382,9,25.6227243,9.1790861,25.6227243,9.4],["C",25.6227243,9.4833692,25.596675,9.564655,25.5482177,9.6324953],["Z"]]}],discrete:!0,anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:0,y:0,name:"NW"},{x:0,y:1,name:"SW"},{x:1,y:0,name:"NE"},{x:1,y:1,name:"SE"}]},{name:"multi-document",width:120,height:80,outline:{d:[["M",119,-0],["C",119.552285,-0,120,.4477153,120,1],["L",120,57.6634711],["C",120.00004,58.2157781,119.552307,58.6635113,119,58.6635113],["C",118.846121,58.6635113,118.694318,58.6280008,118.556406,58.5597438],["C",117.079303,57.8286782,115.893834,57.3066398,115,56.9936286],["L",114.744,56.868],["L",114.744526,63.1694166],["C",114.744553,63.7217167,114.296826,64.1694445,113.744526,64.1694445],["C",113.610972,64.1694445,113.478771,64.1426929,113.355724,64.0907684],["C",111.834645,63.4488877,110.620494,62.9604303,109.71327,62.6253962],["L",109.714286,71.1461039],["C",109.714249,71.6983687,109.26655,72.1460677,108.714286,72.1460677],["C",108.59377,72.1460677,108.474247,72.1242823,108.361482,72.0817624],["C",98.4971172,68.3622546,89.1471649,66.4976545,80.3116246,66.4879622],["C",66.4538962,66.4727606,64.5535237,67.1669765,50.9091531,72.8467226],["C",37.2647825,78.5264687,35.3899142,79.3366596,21.5066816,79.351889],["C",12.4628087,79.3615937,5.4112062,77.2136321,.351874,72.9080041],["C",.1286374,72.7179927,0,72.4396044,0,72.1464509],["L",0,11.7804604],["C",0,11.2281757,.4477153,10.7804604,1,10.7804604],["L",5.255,10.78],["L",5.2554745,6.3902302],["C",5.2554745,5.8379455,5.7031897,5.3902302,6.2554745,5.3902302],["L",10.51,5.39],["L",10.5109489,1],["C",10.5109489,.4477153,10.9586642,-0,11.5109489,-0],["L",119,-0],["Z"]]},scene:[{d:[["M",10,5.3902302],["L",113.744526,5.3902302],["C",114.29681,5.3902302,114.744526,5.8379455,114.744526,6.3902302],["L",114.744526,61.6827625],["L",114.744526,61.6827625]]},{d:[["M",3,10.7804604],["L",108.714286,10.7804604],["C",109.26657,10.7804604,109.714286,11.2281757,109.714286,11.7804604],["L",109.714286,69.602221],["L",109.714286,69.602221]]}],thumb:[{d:[["M",8.4444444,10.4296499],["L",8.4444444,8],["L",28.4444444,8],["L",28.4444444,19.5606936],["C",28.0673004,19.4077004,26.2625497,18.3360173,25.8924529,18.2092979]]},{d:[["M",6.2222222,13.090719],["L",6.2222222,10.7555556],["L",25.4444444,10.7555556],["L",25.4444444,21.8666667],["C",25.0819671,21.7196232,23.3557041,21.1217914,23,21]]},{d:[["M",4.3333333,13.5111111],["L",22.3333333,13.5111111],["L",22.3333333,23.8011738],["C",20.6331063,23.1515551,19.0251483,22.8259361,17.5094592,22.824317],["C",15.2359257,22.8218883,14.9241458,22.9328011,12.6856163,23.8402371],["C",10.4470867,24.7476731,10.1394911,24.8771148,7.8617733,24.8795322],["C",6.3432947,24.8811295,5.1671481,24.5216767,4.3333333,23.8011738],["L",4.3333333,13.5111111],["Z"]]}],padding:[16,10,16,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:.88,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.08,y:.1,name:"NW"},{x:0,y:.91,name:"SW"},{x:.98,y:.02,name:"NE"},{x:.885,y:.91,name:"SE"}]},{name:"off-page",width:38,height:38,outline:{d:[["M",.3999999999999986,0],["L",37.6,0],["C",37.8209139,0,38,.1790861,38,.4],["L",38,19.0323398],["C",38,19.1391572,37.9572763,19.2415374,37.8813478,19.3166695],["L",19.2813478,37.7216028],["C",19.125486199999997,37.8758298,18.874513800000003,37.8758298,18.7186522,37.7216028],["L",.11865219999999965,19.3166695],["C",.04272369999999981,19.2415374,0,19.1391572,0,19.0323398],["L",0,.4],["C",0,.1790861,.17908609999999925,0,.3999999999999986,0],["Z"]]},scene:[],thumb:[{d:[["M",8.4,8],["L",23.6,8],["C",23.8209139,8,24,8.1790861,24,8.4],["L",24,15.9169777],["C",24,16.0237952,23.9572763,16.1261753,23.8813478,16.2013075],["L",16.2813478,23.7216028],["C",16.1254862,23.8758298,15.8745138,23.8758298,15.7186522,23.7216028],["L",8.1186522,16.2013075],["C",8.0427237,16.1261753,8,16.0237952,8,15.9169777],["L",8,8.4],["C",8,8.1790861,8.1790861,8,8.4,8],["Z"]]}],discrete:!0,anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:0,y:0,name:"NW"},{x:1,y:0,name:"NE"}]},{name:"or",width:44,height:44,outline:{name:"ellipse",cx:22,cy:22,rx:22,ry:22},scene:[{d:[{name:"M",x:0,y:21.5},{name:"L",x:44,y:21.5}]},{d:[{name:"M",x:21.5,y:0},{name:"L",x:21.5,y:44}]}],thumb:[{name:"ellipse",cx:16,cy:17,rx:9,ry:9},{d:[["M",7,17],["L",25,17],["M",16,8],["L",16,26]]}],discrete:!0,anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.145,y:.145,name:"NW"},{x:.145,y:.855,name:"SW"},{x:.855,y:.145,name:"NE"},{x:.855,y:.855,name:"SE"}]},{name:"parallelogram",width:137,height:87,outline:{d:[["M",38.1579057,0],["L",135.980025,0],["C",136.53231,-0,136.980025,.4477153,136.980025,1],["C",136.980025,1.136127,136.952232,1.2708207,136.898349,1.3958294],["L",100.260418,86.3958293],["C",100.102374,86.7624912,99.7413671,87,99.3420943,87],["L",1.5199747,87],["C",.9676899,87,.5199747,86.5522847,.5199747,86],["C",.5199747,85.863873,.5477675,85.7291793,.6016506,85.6041707],["L",37.2395816,.6041707],["C",37.3976255,.2375088,37.7586329,-0,38.1579057,0],["Z"]]},scene:[],thumb:[{d:[["M",11.2637585,9],["L",26.3933844,9],["C",26.6142983,9,26.7933844,9.1790861,26.7933844,9.4],["C",26.7933844,9.4541707,26.7823813,9.507777,26.7610424,9.5575677],["L",21.1038995,22.7575677],["C",21.040868,22.9046413,20.8962528,23,20.7362415,23],["L",5.6066156,23],["C",5.3857017,23,5.2066156,22.8209139,5.2066156,22.6],["C",5.2066156,22.5458293,5.2176187,22.492223,5.2389576,22.4424323],["L",10.8961005,9.2424323],["C",10.959132,9.0953587,11.1037472,9,11.2637585,9],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"polygon",width:96,height:91,outline:{name:"polygon",points:[{x:48,y:0},{x:95.5528258,y:34.5491503},{x:77.3892626,y:90.4508497},{x:18.6107374,y:90.4508497},{x:.44717419000000014,y:34.5491503}]},scene:[],thumb:[{name:"polygon",points:[{x:16,y:7},{x:24.5595086,y:13.2188471},{x:21.2900673,y:23.2811529},{x:10.7099327,y:23.2811529},{x:7.44049135,y:13.2188471}]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"preparation",width:120,height:60,outline:{d:[["M",19.9840694,0],["L",99.6873184,0],["C",100.023525,-0,100.33723,.1689467,100.522259,.4496594],["L",119.639798,29.4535248],["C",119.858585,29.7854538,119.859975,30.2154564,119.64334,30.5487937],["L",100.798808,59.5449283],["C",100.614349,59.8287556,100.298826,60,99.960325,60],["L",20.1720063,60],["C",19.83462,60,19.5199796,59.8298739,19.3352402,59.5475604],["L",.3565669,30.5448953],["C",.1398092,30.2136523,.1388534,29.7857253,.3541294,29.4535175],["L",19.1448658,.4561827],["C",19.3292042,.1717169,19.6450984,0,19.9840694,0],["Z"]]},scene:[],thumb:[{d:[["M",9.1753609,10],["L",22.7586938,10],["C",22.8919773,10,23.016505,10.0663866,23.0907953,10.1770457],["L",26.8513724,15.7786117],["C",26.9413749,15.912675,26.9419451,16.0877051,26.8528179,16.2223519],["L",23.1470284,21.8207859],["C",23.072951,21.9326965,22.9476882,22,22.8134814,22],["L",9.2130739,22],["C",9.0793157,22,8.9544098,21.9331428,8.8802274,21.8218405],["L",5.1471359,16.2207607],["C",5.057961,16.0869638,5.0575691,15.9127763,5.1461411,15.7785795],["L",8.8415196,10.1796593],["C",8.9155518,10.067492,9.0409649,10,9.1753609,10],["Z"]]}],padding:[0,10,0,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.26,y:.02,name:"NW"},{x:.26,y:.98,name:"SW"},{x:.74,y:.02,name:"NE"},{x:.74,y:.98,name:"SE"}]},{name:"process",width:120,height:60,outline:{name:"rect",x:0,y:0,width:120,height:60,rx:1,ry:1},scene:[],thumb:[{d:[["M",6.4,10.5],["L",25.6,10.5],["C",25.8209139,10.5,26,10.6790861,26,10.9],["L",26,22.1],["C",26,22.3209139,25.8209139,22.5,25.6,22.5],["L",6.4,22.5],["C",6.1790861,22.5,6,22.3209139,6,22.1],["L",6,10.9],["C",6,10.6790861,6.1790861,10.5,6.4,10.5],["Z"]]}],padding:[0,10,0,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"rect",width:100,height:100,outline:{name:"polygon",points:[{x:0,y:0},{x:100,y:0},{x:100,y:100},{x:0,y:100}]},scene:[],thumb:[{d:[["M",8.4,8],["L",23.6,8],["C",23.8209139,8,24,8.1790861,24,8.4],["L",24,23.6],["C",24,23.8209139,23.8209139,24,23.6,24],["L",8.4,24],["C",8.1790861,24,8,23.8209139,8,23.6],["L",8,8.4],["C",8,8.1790861,8.1790861,8,8.4,8],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"rounded-rect",width:100,height:100,outline:{d:[["M",18.75,0],["L",81.25,0],["Q",100,0,100,18.75],["L",100,81.25],["Q",100,100,81.25,100],["L",18.75,100],["Q",0,100,0,81.25],["L",0,18.75],["Q",0,0,18.75,0],["Z"]]},scene:[],thumb:[{d:[["M",11,8],["L",21,8],["C",22.6568542,8,24,9.3431458,24,11],["L",24,21],["C",24,22.6568542,22.6568542,24,21,24],["L",11,24],["C",9.3431458,24,8,22.6568542,8,21],["L",8,11],["C",8,9.3431458,9.3431458,8,11,8],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"sort",width:44,height:44,outline:{d:[["M",22.707552999999997,.7084468],["L",43.2664758,21.2933397],["C",43.6564052,21.6837616,43.6564052,22.3162384,43.2664758,22.7066603],["L",22.707552999999997,43.2915532],["C",22.3172753,43.682324,21.6841104,43.6827236,21.293339699999997,43.2924459],["C",21.2930419,43.2921485,21.292744399999997,43.291851,21.292447000000003,43.2915532],["L",.7335241999999997,22.7066603],["C",.3435948,22.3162384,.3435948,21.6837616,.7335241999999997,21.2933397],["L",21.292447000000003,.7084468],["C",21.6827247,.317676,22.3158896,.3172764,22.706660300000003,.7075541],["C",22.7069581,.7078515,22.707255600000003,.708149,22.707552999999997,.7084468],["Z"]]},scene:[{d:[{name:"M",x:.1242938,y:22},{name:"L",x:43.8757062,y:22}]}],thumb:[{d:[["M",16.2830212,7.2833787],["L",24.706338,15.7173359],["C",24.8623098,15.8735046,24.8623098,16.1264954,24.706338,16.2826641],["L",16.2830212,24.7166213],["C",16.1269101,24.8729296,15.8736442,24.8730894,15.7173359,24.7169784],["C",15.7172168,24.7168594,15.7170978,24.7167404,15.7169788,24.7166213],["L",7.293662,16.2826641],["C",7.1376902,16.1264954,7.1376902,15.8735046,7.293662,15.7173359],["L",15.7169788,7.2833787],["C",15.8730899,7.1270704,16.1263558,7.1269106,16.2826641,7.2830216],["C",16.2827832,7.2831406,16.2829022,7.2832596,16.2830212,7.2833787],["Z"],["M",7.3175141,15.7333333],["L",25.2158192,15.7333333]]}],discrete:!0,anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"star",width:96,height:91,outline:{name:"polygon",points:[{x:48,y:75},{x:18.6107374,y:90.4508497},{x:24.2235871,y:57.7254249},{x:.44717419000000014,y:34.5491503},{x:33.3053687,y:29.7745751},{x:48,y:0},{x:62.6946313,y:29.7745751},{x:95.5528258,y:34.5491503},{x:71.7764129,y:57.7254249},{x:77.3892626,y:90.4508497}]},scene:[],thumb:[{name:"polygon",points:[{x:16,y:21},{x:10.1221475,y:24.0901699},{x:11.2447174,y:17.545085},{x:6.48943484,y:12.9098301},{x:13.0610737,y:11.954915},{x:16,y:6},{x:18.9389263,y:11.954915},{x:25.5105652,y:12.9098301},{x:20.7552826,y:17.545085},{x:21.8778525,y:24.0901699}]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]},{name:"start-end",width:120,height:60,outline:{d:[["M",30,0],["l",60,0],["a",30,30,0,0,1,0,60],["l",-60,0],["a",30,30,0,0,1,0,-60],["Z"]]},scene:[],thumb:[{d:[["M",11,10],["L",21,10],["C",24.3137085,10,27,12.6862915,27,16],["C",27,19.3137085,24.3137085,22,21,22],["L",11,22],["C",7.6862915,22,5,19.3137085,5,16],["C",5,12.6862915,7.6862915,10,11,10],["Z"]]}],padding:[0,10,0,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.11,y:.11,name:"NW"},{x:.11,y:.89,name:"SW"},{x:.89,y:.11,name:"NE"},{x:.89,y:.89,name:"SE"}]},{name:"stored-data",width:120,height:60,outline:{d:[["M",13.7777709,0],["L",120,0],["C",111.115006,4.7754794,106.672509,14.7754794,106.672509,30],["C",106.672509,44.2961128,111.115006,54.2961128,120,60],["L",13.7777709,60],["C",4.2600422,53.6223342,-.3265282,43.6223342,.0180598,30],["C",.4106176,14.4813071,4.997188,4.4813072,13.7777709,0],["Z"]]},scene:[],thumb:[{d:[["M",7.7592332,10],["L",26.7592332,10],["C",24.3123052,10.9550959,23.0888412,12.9550959,23.0888412,16],["C",23.0888412,18.8592226,24.3123052,20.8592226,26.7592332,22],["L",7.7592332,22],["C",5.853146,20.7244668,4.9346072,18.7244668,5.0036168,16],["C",5.0822332,12.8962614,6.000772,10.8962614,7.7592332,10],["Z"]]}],padding:[0,20,0,10],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:.93,y:.5,name:"E"},{x:.1,y:0,name:"NW"},{x:.1,y:1,name:"SW"},{x:.995,y:.01,name:"NE"},{x:.995,y:.99,name:"SE"}]},{name:"subroutine",width:120,height:60,outline:{name:"rect",x:0,y:0,width:120,height:60,rx:1,ry:1},scene:[{d:[{name:"M",x:8,y:-0},{name:"L",x:8,y:60}]},{d:[{name:"M",x:112,y:-0},{name:"L",x:112,y:60}]}],thumb:[{d:[["M",6.4,10],["L",25.6,10],["C",25.8209139,10,26,10.1790861,26,10.4],["L",26,21.6],["C",26,21.8209139,25.8209139,22,25.6,22],["L",6.4,22],["C",6.1790861,22,6,21.8209139,6,21.6],["L",6,10.4],["C",6,10.1790861,6.1790861,10,6.4,10],["Z"],["M",10,10],["L",10,22],["M",22,10],["L",22,22]]}],padding:[0,20,0,20],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.02,y:.015,name:"NW"},{x:.02,y:.985,name:"SW"},{x:.98,y:.015,name:"NE"},{x:.98,y:.985,name:"SE"}]},{name:"summing-junction",width:44,height:44,outline:{name:"ellipse",cx:22,cy:22,rx:22,ry:22},scene:[{d:[["M",6.44365,6.44365],["l",31.1127,31.1127],["m",-31.1127,0],["l",31.1127,-31.1127]]}],thumb:[{name:"ellipse",cx:16,cy:17,rx:9,ry:9},{d:[["M",9.636,10.636],["l",12.727922,12.727922],["m",0,-12.727922],["l",-12.727922,12.727922]]}],discrete:!0,anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"},{x:.145,y:.145,name:"NW"},{x:.145,y:.855,name:"SW"},{x:.855,y:.145,name:"NE"},{x:.855,y:.855,name:"SE"}]},{name:"triangle",width:100,height:87,outline:{name:"polygon",points:[{x:50,y:0},{x:100,y:87},{x:-141931921e-23,y:87}]},scene:[],thumb:[{name:"polygon",points:[{x:16,y:8},{x:25,y:24},{x:7,y:24}]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]}];function ld(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ld(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ld(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ud=function(e,t){var n=["x","y"].map((function(n){return e[n]+2*(t[n]-e[n])})),r=M()(n,2);return{x:r[0],y:r[1]}},dd=function(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}},fd=function(e,t){var n=t/180*Math.PI,r=Math.sin(n),a=Math.cos(n),i=e.x,o=e.y;return{x:i*a-o*r,y:i*r+o*a}},pd=function(e,t,n){var r={x:e.x-t.x,y:e.y-t.y},a=fd(r,n);return{x:a.x+t.x,y:a.y+t.y}},hd=function(e){var t=e.x,n=e.y;return{x:t+e.w/2,y:n+e.h/2}},md=function(e){var t=e.x,n=e.y;return 180*Math.atan2(n,t)/Math.PI};var gd=function(){function e(t){g()(this,e),this.rect=t,this._tl=null,this._tr=null,this._br=null,this._bl=null,this._tc=null,this._bc=null,this._rc=null,this._lc=null,this._center=null}return y()(e,[{key:"center",get:function(){return this._center||(this._center=hd(this.rect)),this._center}},{key:"tl",get:function(){if(!this._tl){var e=this.rect,t=e.x,n=e.y,r=e.r;this._tl=pd({x:t,y:n},this.center,r)}return this._tl}},{key:"tr",get:function(){if(!this._tr){var e=this.rect,t=e.x,n=e.y,r=e.w,a=e.r;this._tr=pd({x:t+r,y:n},this.center,a)}return this._tr}},{key:"br",get:function(){return this._br||(this._br=ud(this.tl,this.center)),this._br}},{key:"bl",get:function(){return this._bl||(this._bl=ud(this.tr,this.center)),this._bl}},{key:"tc",get:function(){return this._tc||(this._tc=dd(this.tl,this.tr)),this._tc}},{key:"bc",get:function(){return this._bc||(this._bc=dd(this.br,this.bl)),this._bc}},{key:"rc",get:function(){return this._rc||(this._rc=dd(this.tr,this.br)),this._rc}},{key:"lc",get:function(){return this._lc||(this._lc=dd(this.tl,this.bl)),this._lc}}]),e}();function vd(e,t,n,r){var a=new gd(n),i=null,o=[],c=e;if(r){switch(t){case"tl":case"br":o=[a.tl,a.br];break;case"tr":case"bl":o=[a.tr,a.bl];break;case"tc":case"bc":o=[a.tc,a.bc],i="height";break;case"lc":case"rc":o=[a.lc,a.rc],i="width";break;default:o=[]}2===o.length&&(c=function(e,t){var n=t.x,r=t.y,a=M()(e,2),i=a[0],o=a[1];if(zr(i.x,o.x))return{x:i.x,y:r};if(zr(i.y,o.y))return{x:n,y:i.y};var c=Vr(i.x,i.y,o.x,o.y),l=-1/c,s=(c*i.x+r-i.y-l*n)/(c-l);return{x:s,y:i.y-c*(i.x-s)}}(o,e))}var l=[];switch(t){case"tl":l=[a.br];break;case"tr":l=[a.bl];break;case"bl":l=[a.tr];break;case"br":l=[a.tl];break;case"bc":l=[a.tl,a.tr];break;case"tc":l=[a.bl,a.br];break;case"lc":l=[a.tr,a.br];break;case"rc":l=[a.tl,a.bl];break;default:l=[]}var s,u,d,f,p,h,m,g,v,y,b=l.length;return 1===b?(u=l[0],d=c,f=n.r,p=dd(u,d),m=(h=pd(d,p,-f)).x,g=h.y,v=Math.abs(2*(m-p.x)),y=Math.abs(2*(g-p.y)),s={x:p.x-v/2,y:p.y-y/2,w:v,h:y,r:f}):2===b&&(s=r?function(e,t,n,r){var a,i,o=M()(e,2),c=o[0],l=o[1],s=dd(c,l),u=t,d=dd(s,u),f=function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}(s,u),p=n.w/n.h;return"width"===r?i=(a=f)/p:a=p*(i=f),{x:d.x-a/2,y:d.y-i/2,w:a,h:i,r:n.r}}(l,c,n,i):function(e,t,n){var r,a,i,o=e.map((function(e){return fd(e,-n)})),c=M()(o,2),l=c[0],s=c[1],u=fd(t,-n);zr(l.y,s.y)?(r=Math.abs(l.x-s.x),a=Math.abs(u.y-l.y),i={x:(l.x+s.x)/2,y:(l.y+u.y)/2}):zr(l.x,s.x)&&(a=Math.abs(l.y-s.y),r=Math.abs(u.x-l.x),i={x:(l.x+u.x)/2,y:(l.y+s.y)/2});var d=fd(i,n);return{x:d.x-r/2,y:d.y-a/2,w:r,h:a,r:n}}(l,c,n.r)),s}function yd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yd(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var kd=_a,wd=Da,xd=Ka,_d=ti,Cd={lake_prevent_click_unselect:!0,vertex_resize_controller:!0};function Ed(e){var t=new wd,n=new xd({d:Ia(-3,-3,6,6,1),stroke:"#096DD9",fill:"white"});return t.add(n),n.dataset(bd(bd({},Cd),{},{type:"point"})),{group:t,shape:n,name:e}}function Od(e){var t=new kd,n=new xd({stroke:"rgba(255,255,255,0)"}),r=new xd({stroke:"#096DD9"});return n.dataset(bd(bd({},Cd),{},{type:"line"})),t.add(r),t.add(n),{visShape:r,shape:n,name:e,group:t}}function Sd(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[t.x+t.width/2,t.y+t.height/2],a=Math.cos(n),i=Math.sin(n),o=na(8,r,[r[0]+a,r[1]+i]);return o(e,0)||o(e,4)?"ew-resize":o(e,1)||o(e,5)?"nesw-resize":o(e,2)||o(e,6)?"ns-resize":"nwse-resize"}var Rd=function(){function e(t){g()(this,e);var n=new kd,r=t.diagram,a=Od("tc"),i=Od("bc"),o=Od("lc"),c=Od("rc"),l=Ed("tl"),s=Ed("tr"),u=Ed("bl"),d=Ed("br"),f=function(e){var t=new wd,n=new _d({href:"https://gw.alipayobjects.com/zos/bmw-prod/e219ce81-1f30-43b8-aae6-14d41545d352.svg",x:-8,y:-8,width:16,height:16});return t.add(n),n.dataset({lake_prevent_click_unselect:!0}),t.css({cursor:"pointer"}),{group:t,shape:n,name:"rotate"}}();n.on("mousedown",(function(e){e.stopPropagation(),e.preventDefault()})),n.add(a.group),n.add(i.group),n.add(o.group),n.add(c.group),n.add(l.group),n.add(s.group),n.add(u.group),n.add(d.group),n.add(f.group),this.cell=t,this.diagram=r,this.group=n,this.tl=l,this.tr=s,this.bl=u,this.br=d,this.tc=a,this.bc=i,this.lc=o,this.rc=c,this.rotateBtn=f,this.eventHelper=new Uo}return y()(e,[{key:"update",value:function(){var e=this.cell,t=this.tl,n=this.tr,r=this.bl,a=this.br,i=this.tc,o=this.bc,c=this.lc,l=this.rc,s=this.rotateBtn,u=1/this.diagram.viewport.zoom,d=e.rotate/360*2*Math.PI,f=e.getRelativePoint({x:0,y:0}),p=e.getRelativePoint({x:1,y:0}),h=e.getRelativePoint({x:0,y:1}),m=e.getRelativePoint({x:1,y:1}),g=u,v=8*u,y=12*u+e.stroke.width/2,b=e.getCanvasPoint({x:e.width+y,y:-y});t.group.update(bd(bd({},f),{},{scale:u,rotate:d})),n.group.update(bd(bd({},p),{},{scale:u,rotate:d})),r.group.update(bd(bd({},h),{},{scale:u,rotate:d})),a.group.update(bd(bd({},m),{},{scale:u,rotate:d})),s.group.update(bd(bd({},b),{},{scale:u,rotate:d})),i.shape.update({d:"M".concat(f.x,",").concat(f.y," L").concat(p.x,",").concat(p.y),"stroke-width":v}),o.shape.update({d:"M".concat(h.x,",").concat(h.y," L").concat(m.x,",").concat(m.y),"stroke-width":v}),c.shape.update({d:"M".concat(f.x,",").concat(f.y," L").concat(h.x,",").concat(h.y),"stroke-width":v}),l.shape.update({d:"M".concat(p.x,",").concat(p.y," L").concat(m.x,",").concat(m.y),"stroke-width":v}),i.visShape.update({d:"M".concat(f.x,",").concat(f.y," L").concat(p.x,",").concat(p.y),"stroke-width":g}),o.visShape.update({d:"M".concat(h.x,",").concat(h.y," L").concat(m.x,",").concat(m.y),"stroke-width":g}),c.visShape.update({d:"M".concat(f.x,",").concat(f.y," L").concat(h.x,",").concat(h.y),"stroke-width":g}),l.visShape.update({d:"M".concat(p.x,",").concat(p.y," L").concat(m.x,",").concat(m.y),"stroke-width":g})}},{key:"bindEvent",value:function(){var e,t,n,r,a,i,o,c,l=this,s=this.cell,u=this.tl,d=this.tr,f=this.bl,p=this.br,h=this.tc,m=this.bc,g=this.lc,v=this.rc,y=this.rotateBtn,b=this.eventHelper,k=s.diagram,w=k.viewport.zoom;function x(){var t={x:i.x+s.stroke.width/2,y:i.y+s.stroke.width/2,width:Math.max(i.w-s.stroke.width,1),height:Math.max(i.h-s.stroke.width,1),rotate:i.r};return"lc"===e||"rc"===e?t.height=void 0:"tc"!==e&&"bc"!==e||(t.width=void 0),t}[u,d,f,p,h,m,g,v,y].forEach((function(a){var i=a.shape,l=a.name;b.bind(i,"mousedown",(function(a){e=l,n=k.viewport.invertClient([a.clientX,a.clientY]),r={x:s.x,y:s.y,width:s.width,height:s.height,rotate:s.rotate},t={x:s.x-s.stroke.width/2,y:s.y-s.stroke.width/2,w:s.width+s.stroke.width,h:s.height+s.stroke.width,r:s.rotate},k.align.updateToAlginPoints((function(e){return e!==s&&"edge"!==e.model.type})),"tc"!==e&&"bc"!==e||(k.align.preventAlignX=!0),"lc"!==e&&"rc"!==e||(k.align.preventAlignY=!0),o=$r(t.x,t.y+t.h,t.x+t.w,t.y),c=$r(t.x,t.y,t.x+t.w,t.y+t.h)}))})),b.bind(k,"mousemove",(function(r){if(e){var u=k.viewport.invertClient([r.clientX,r.clientY]);if("rotate"===e)i=function(e,t,n,r){var a=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},a={x:n.x-e.x,y:n.y-e.y},i=md(r);return md(a)-i}(hd(n),e,t),i=n.r+a;return i>=180&&(i-=360),i<=-180&&(i+=360),r&&(i=r*Math.round(i/r)),sd(sd({},n),{},{r:i})}({x:n[0],y:n[1]},{x:u[0],y:u[1]},t,k.signal.keydown.Shift&&15);else{var d=("tl"===e||"br"===e)&&c||("bl"===e||"tr"===e)&&o,f=d&&d.f(u[0]),p=k.signal.keydown.Shift;u[1]=p&&f?f:u[1];var h=k.align.alignByPoint({x:u[0],y:u[1],weight:1,box:s.getAbsBBox()});i=vd({x:u[0]+h.dx,y:u[1]+h.dy},e,t)}if(k.update(s,x()),l.update(),-1!==["tl","bl","tr","br"].indexOf(e)){var m=Sd(k.viewport.invertClient([r.clientX,r.clientY]),s.getAbsBBox(),Math.PI/8);k.setCursor(m)}}else if(r.target.dataset.vertex_resize_controller){var g;if("line"===r.target.dataset.type){var v=Ma(r.target.getAttribute("d"));g=Sd([v[1][1]-v[0][1],v[1][2]-v[0][2]],{x:-1,y:-1,width:1,height:1},Math.PI/2+.01)}else g=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[t.x+t.width/2,t.y+t.height/2],a=Math.cos(n),i=Math.sin(n),o=na(4,r,[r[0]+a,r[1]+i]);return o(e,0)||o(e,2)?"nesw-resize":"nwse-resize"}(k.viewport.invertClient([r.clientX,r.clientY]),s.getAbsBBox());a||(a=!0),k.setCursor(g)}else a&&(k.resetCursor(),a=void 0)})),b.bind(k,"mouseup",(function(){i&&t&&(t.x!==i.x||t.y!==i.y||t.w!==i.w||t.h!==i.h||t.r!==i.r)&&(k.update(s,r),k.command.execute("Update",{id:s,model:x()})),e=void 0,t=void 0,i=void 0,n=void 0,a=void 0,r=void 0,k.align.reset()})),b.bind(k,"afterviewportchange",$()((function(){w!==k.viewport.zoom&&(l.update(),w=k.viewport.zoom)})))}},{key:"begin",value:function(){this.cell.diagram.frontRootGroup.add(this.group),this.update(),this.bindEvent()}},{key:"end",value:function(){this.group&&this.group.remove(),this.eventHelper.unbind(),this.diagram&&this.diagram.align.reset()}},{key:"destroy",value:function(){this.diagram&&this.diagram.resetCursor(),this.eventHelper.unbind(),this.group&&this.group.clear(),this.cell=void 0,this.diagram=void 0,this.group=void 0,this.tl=void 0,this.tr=void 0,this.bl=void 0,this.br=void 0}}]),e}();function Dd(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=a?a/180*Math.PI:0,c=Math.sin(o),l=Math.cos(o),s=n/2,u=r/2;return[l*i,c*i,0,-c*i,l*i,0,e+(-s*l+u*c+s),t+(-s*c-u*l+u),1]}var Ad=_a,Td=Ka,Pd=ai,jd=ui,Md="lock-resize-cross",Nd=function(){function e(t){g()(this,e);var n=t.diagram,r=t.width,a=t.height,i=new Ad,o=new Pd({x:0,y:0,width:r||0,height:a||0,stroke:"#9A9A9A",fill:"none"});if(i.add(o),n.container&&!n.container.querySelector("#".concat(Md))){var c=function(){var e=new Ad({id:Md}),t=new Td({d:La([["M",-3,-3],["L",3,3],["M",-3,3],["L",3,-3]]),stroke:"#FFFFFF","stroke-width":3}),n=new Td({d:La([["M",-3,-3],["L",3,3],["M",-3,3],["L",3,-3]]),stroke:"#979797","stroke-width":1});return e.add(t),e.add(n),e}();n.defs.add(c)}for(var l=[],s=0;s<4;s++){var u=new jd({href:"#".concat(Md)});i.add(u),l.push(u)}var d=l[0],f=l[1],p=l[2],h=l[3];this.group=i,this.cell=t,this.diagram=n,this.rect=o,this.tl=d,this.tr=f,this.bl=h,this.br=p}return y()(e,[{key:"update",value:function(){var e=this.cell,t=this.diagram,n=this.group,r=this.rect,a=this.tr,i=this.bl,o=this.br,c=e.x,l=e.y,s=e.rotate,u=1/t.viewport.zoom,d=e.width/u,f=e.height/u;n.update({matrix:Dd(c,l,e.width,e.height,s,u)}),r.update({d:Ia(0,0,d,f)}),a.update({matrix:[1,0,0,0,1,0,d,0,1]}),i.update({matrix:[1,0,0,0,1,0,0,f,1]}),o.update({matrix:[1,0,0,0,1,0,d,f,1]})}},{key:"begin",value:function(){this.cell.diagram.frontRootGroup.add(this.group),this.update()}},{key:"end",value:function(){this.group&&this.group.remove()}}]),e}();function Ld(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Id(e){switch((e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ld(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ld(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({"stroke-linecap":"round","stroke-linejoin":"round"},e)).name){case"rect":return new ai(e);case"ellipse":return new ci(e);case"polygon":return new bi(e);case"path":default:return new Ka(e)}}function zd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Bd=_a,Fd=function(e){x()(n,Sl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"render",value:function(){var e=this.cell,t=new Bd;this.element=t,e.graphicGroup.add(t)}},{key:"update",value:function(){var e=this.cell,t=this.element;e.isCacheStale("shape")&&(t.clear(),this.shapeElement=Id(e.stencil.outline),t.add(this.shapeElement))}},{key:"draw",value:function(){var e=this.cell,t=this.shapeElement,n=e.stroke,r=e.fill,a=e.width,i=e.height,o=e.stencil,c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zd(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.convertStrokeStyle());if(e.isCacheStale("width","height","shape")){var s=a/o.width,u=i/o.height;c.d=t.getPath(s,u)}e.isCacheStale("stroke")&&Object.assign(c,{stroke:n.color,"stroke-width":n.width}),e.isCacheStale("fill")&&(c.fill=r.color),t.update(c)}}]),n}();function Vd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ud(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vd(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}["getTotalLength","isPointInFill","isPointInStroke"].forEach((function(e){Object.defineProperty(Fd.prototype,e,{value:function(){var t;return(t=this.shapeElement)[e].apply(t,arguments)}})}));var qd=_a,Hd=function(e){x()(n,Sl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"render",value:function(){var e=this.cell;this.element=new qd,e.graphicGroup.add(this.element)}},{key:"renderElements",value:function(){var e=this.element,t=this.cell.stencil.scene.map((function(e){return Id(e)}));t.forEach((function(t){e.add(t)})),this.elements=t}},{key:"update",value:function(){var e=this.cell,t=this.elements;e.isCacheStale("shape")&&(t&&t.forEach((function(e){return e.remove()})),this.renderElements())}},{key:"draw",value:function(){var e,t,n=this.cell,r=this.elements,a=n.stroke,i=n.fill,o={};if(n.isCacheStale("width","height")){var c=n.stencil,l=n.width,s=n.height;e=l/c.width,t=s/c.height}n.isCacheStale("stroke")&&(o.stroke=a.color,o["stroke-width"]=a.width),n.isCacheStale("fill")&&(o.fill=i.color),r.forEach((function(n){e&&t?n.update(Ud(Ud({},o),{},{d:n.getPath(e,t)})):n.update(o)}))}}]),n}();var Wd=function(e){x()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"getPosition",value:function(){var e=this.cell,t=e.isDiscrete(),n=e.width,r=e.height,a=e.image,i=this.getBBox(),o=e.getPadding(),c=a&&a.height||0,l=c+i.height;return t?{x:(n-i.width)/2,y:r+8}:{x:Math.max((n-i.width)/2,o[3]),y:(r-l)/2+(c?c+2:0)}}}]),n}(Sl.TextArea);function Yd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yd(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Kd=function(e){x()(n,gl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g()(this,n),r=Cr({default:{html:"",x:0,y:0,rotate:0,anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}],opacity:1,locked:!1},textAreaContentStyleSheets:[{query:"self",css:{outline:"none","white-space":"normal","letter-spacing":"normal","font-size":"14px","font-family":'PingFangSC-Regular, "PingFang SC", sans-serif',"min-height":"24px","min-width":"24px","line-height":"1.74","word-break":"break-word",color:"#262626"}}],penetratedKeys:["x","y","width","height","stroke","fill","rotate","html","shape","image","constraints","opacity","locked"]},r),e=t.call(this,r),Object.assign(R()(e),f()(r.default)),e.graphicGroup.css({cursor:"default"}),e.Subcells=r.Subcells||[Fd,Hd,Wd],e.isVertex=!0,e.initRotateResize(),e.initSubcell(),e.eventDelegation(),e.render(),e}return y()(n,[{key:"canMove",value:function(){return!0}},{key:"getRelativePoint",value:function(e){return k()(O()(n.prototype),"getRelativePoint",this).call(this,e,this.stroke.width/2)}},{key:"initRotateResize",value:function(){this.rotateResize=new Rd(this),this.lockResize=new Nd(this)}},{key:"beginRotateResize",value:function(){this.locked?this.lockResize.begin():this.rotateResize.begin()}},{key:"endRotateResize",value:function(){this.rotateResize.end(),this.lockResize.end()}},{key:"snapAnchor",value:function(e){var t=this,n=this.getRelativePoint({x:.5,y:.5}),r=[e.x-n.x,e.y-n.y];return this.anchors.map((function(e){var i=t.getRelativePoint(e);return Gd(Gd({},i),{},{rad:a.angle(r,[i.x-n.x,i.y-n.y])})})).sort((function(e,t){return e.rad-t.rad}))}},{key:"initSubcell",value:function(){var e=this;this.subcells=this.Subcells.map((function(t){return new t(e)}))}},{key:"getEventObject",value:function(e){return{cell:this,nativeEvent:e}}},{key:"eventDelegation",value:function(){var e=this.graphicGroup;this.delegateEvent(e,"mouseenter","vertexcell:mouseenter"),this.delegateEvent(e,"mouseleave","vertexcell:mouseleave")}},{key:"updateStencil",value:function(){var e=this,t=this.shape,n=this.stencils,r=t||"process";if(!this.stencil||this.stencil.name!==r){var a=n.find((function(e){return e.name===r}));if(!a)throw new Error("unknown shape ".concat(r));this.stencil=a,this.updateAnchors(),["width","height"].forEach((function(t){null==e[t]&&(e[t]=a[t])})),this.cache={}}}},{key:"updateAnchors",value:function(){for(var e=this.anchors,t=this.stencil,n=function(n){var r=e[n],a=t.anchors.find((function(e){return e.name===r.name}));a&&(e[n]=a)},r=0;r<e.length;r++)n(r)}},{key:"render",value:function(){var e=this.model;this.subcells.forEach((function(e){return e.render()})),this.updateModel(e)}},{key:"updateSize",value:function(){}},{key:"updateModel",value:function(e){if(!this.locked||e.hasOwnProperty("locked")){if(this.constraints&&this.constraints.proportion){var t=this.width/this.height;e.height>0&&null==e.width?e.width=e.height*t:e.width>0&&(e.height=e.width/t)}k()(O()(n.prototype),"updateModel",this).call(this,e),this.updateStencil(),this.updateSize(),this.updateMatrix(),this.subcells.forEach((function(e){e.update()}))}}},{key:"draw",value:function(){this.subcells.forEach((function(e){return e.draw()})),this.graphicGroup.attr({opacity:this.opacity}),this.drawPosition(),this.updateCache()}},{key:"updateCache",value:function(){var e=this,t=this.cache;["x","y","width","height","rotate","shape","fill","stroke"].forEach((function(n){var r=e[n];t[n]=u()(r)?Gd({},r):r}))}},{key:"drawPosition",value:function(){if(this.isCacheStale("matrix")){var e=this.graphicGroup,t=this.matrix;e.update({matrix:t})}}},{key:"canDelete",value:function(){return!this.locked}},{key:"getPadding",value:function(){var e=this.stencil,t=this.width,n=this.height;if(e&&Array.isArray(e.padding)){var r=e.padding,a=t/e.width,i=n/e.height;return r.map((function(e,t){return e*(t%2==0?i:a)}))}return[4,4,4,4]}},{key:"isDiscrete",value:function(){var e=this.stencil;return!!e&&e.discrete}},{key:"updateMatrix",value:function(){if(this.isCacheStale("x","y","width","height","rotate")){var e=this.x,t=this.y,n=this.width,r=this.height,a=this.rotate;this.matrix=Dd(e,t,n,r,a)}}},{key:"getKeyShape",value:function(){return this.subcells.find((function(e){return e instanceof Fd})).shapeElement}},{key:"destroy",value:function(){this.subcells.forEach((function(e){return e.destroy()})),this.rotateResize.destroy(),k()(O()(n.prototype),"destroy",this).call(this)}}]),n}();function Xd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xd(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}l()(Kd,"className","VertexCell");var Zd=function(e){x()(n,Kd);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g()(this,n),(e=t.call(this,$d({default:{stencils:cd,shape:"process",stroke:{color:"#595959",width:2},fill:{color:"#ffffff"}}},r))).isFlowchart=!0,e}return y()(n,[{key:"render",value:function(){k()(O()(n.prototype),"render",this).call(this);var e=this.model;e.width||(e.width=this.width),e.height||(e.height=this.height)}},{key:"getOuterWidth",value:function(){return this.width}}]),n}();function Qd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qd(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ef(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ef(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ef(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}l()(Zd,"className","FlowchartCell");var nf=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g()(this,e),Object.assign(this,Jd({expandRectGap:16},t))}return y()(e,[{key:"getExpandedBBox",value:function(e){var t=this.expandRectGap;return{minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t}}},{key:"getRectLines",value:function(e){var t=500;return[{x1:e.minX,y1:e.minY-t,x2:e.minX,y2:e.maxY+t},{x1:e.minX-t,y1:e.minY,x2:e.maxX+t,y2:e.minY},{x1:e.maxX,y1:e.minY-t,x2:e.maxX,y2:e.maxY+t},{x1:e.minX-t,y1:e.maxY,x2:e.maxX+t,y2:e.maxY}]}},{key:"getVertexLine",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ray",r=500;return"all"===t?[{x1:e.x,y1:e.y,x2:e.x,y2:e.y-r,type:n},{x1:e.x,y1:e.y,x2:e.x-r,y2:e.y,type:n}]:"N"===t||"S"===t?["N"===t?{x1:e.x,y1:e.y,x2:e.x,y2:e.y-r,type:n}:{x1:e.x,y1:e.y,x2:e.x,y2:e.y+r,type:n}]:["W"===t?{x1:e.x,y1:e.y,x2:e.x-r,y2:e.y,type:n}:{x1:e.x,y1:e.y,x2:e.x+r,y2:e.y,type:n}]}},{key:"vMiddleLine",value:function(e,t){var n;n=Math.abs(e.minX-t.maxX)<Math.abs(e.maxX-t.minX)?(e.minX+t.maxX)/2:(e.maxX+t.minX)/2;var r=((e.minY+e.maxY)/2+(t.minY+t.maxY)/2)/2;return{x1:n,y1:r-500,x2:n,y2:r+500}}},{key:"hMiddleLine",value:function(e,t){var n;n=Math.abs(e.minY-t.maxY)<Math.abs(e.maxY-t.minY)?(e.minY+t.maxY)/2:(e.maxY+t.minY)/2;var r=((e.minX+e.maxX)/2+(t.minX+t.maxX)/2)/2;return{x1:r-500,y1:n,x2:r+500,y2:n}}},{key:"cost",value:function(e){var t,n=e.vertex,r=e.end,a=e.middleLine,i=0,o=0;return t=n.distance+Yr(n.x,n.y,r.x,r.y),n.from&&n.from.from&&Hr(n.x,n.y,n.from.x,n.from.y)!==Hr(n.from.x,n.from.y,n.from.from.x,n.from.from.y)&&(i=-1),a&&n.from&&n.from.from&&Qr(n,a)&&!Qr(n.from.from,a)&&n.from&&n.from.from&&Hr(n.x,n.y,n.from.x,n.from.y)!==Hr(n.from.x,n.from.y,n.from.from.x,n.from.from.y)&&(o=2),-t+i+o}},{key:"getSide",value:function(e,t){var n=[(e.minX+e.maxX)/2,(e.minY+e.maxY)/2],r=[e.maxX,e.minY],i=[e.maxX,e.maxY],o=[r[0]-n[0],r[1]-n[1]],c=[i[0]-n[0],i[1]-n[1]],l=[t[0]-n[0],t[1]-n[1]],s=a.angle(o,c),u=s/2,d=[0,u],f=[d[1],u+Math.PI-s],p=[f[1],u+Math.PI],h=[2*Math.PI-u,2*Math.PI],m=a.angle(l,[1,0]);return l[1]<0&&(m=2*Math.PI-m),Er(m,d)||Er(m,h)?"E":Er(m,f)?"S":Er(m,p)?"W":"N"}},{key:"dedupePoints",value:function(e){if(e.length>=3){for(var t=[e[0]],n=1;n<e.length-1;n++){var r=e[n-1],a=e[n],i=e[n+1];zr(r.x,a.x)&&zr(i.x,a.x)||zr(r.y,a.y)&&zr(i.y,a.y)||t.push(a)}return t.push(e[e.length-1]),t}return e}},{key:"getExpandPoint",value:function(e,t,n){return"N"===n?{x:e.x,y:t.minY}:"S"===n?{x:e.x,y:t.maxY}:"W"===n?{x:t.minX,y:e.y}:"E"===n?{x:t.maxX,y:e.y}:null}},{key:"find",value:function(e,t){var n=this,r=e.cell,a=t.cell,i=r&&r.getAbsBBox(),o=a&&a.getAbsBBox(),c=i&&this.getExpandedBBox(i),l=o&&this.getExpandedBBox(o),s=[];s=c?s.concat(this.getRectLines(c)):s,s=l?s.concat(this.getRectLines(l)):s;var u,d,f,p=new ca("start"),h=new ca("end"),m=[e.x,e.y],g=[t.x,t.y];Object.assign(p,{x:m[0],y:m[1]}),Object.assign(h,{x:g[0],y:g[1]}),i?(d=this.getSide(i,m),s=s.concat(this.getVertexLine(p,d))):s=s.concat(this.getVertexLine(p,"all","straight")),o?(f=this.getSide(o,g),s=s.concat(this.getVertexLine(h,f))):s=s.concat(this.getVertexLine(h,"all","straight")),a&&r&&("E"===d&&"W"===f?u=r.x+r.width<a.x?this.vMiddleLine(i,o):this.hMiddleLine(i,o):"W"===d&&"E"===f?u=r.x+r.width<a.x?this.hMiddleLine(i,o):this.vMiddleLine(i,o):"S"===d&&"N"===f?u=r.y+r.height>a.y?this.vMiddleLine(i,o):this.hMiddleLine(i,o):"N"===d&&"S"===f&&(u=r.y+r.height>a.y?this.hMiddleLine(i,o):this.vMiddleLine(i,o))),e.d&&("N"===d?p.y-=e.d:"S"===d?p.y+=e.d:"E"===d?p.x+=e.d:"W"===d&&(p.x-=e.d)),t.d&&("N"===f?h.y-=t.d:"S"===f?h.y+=t.d:"E"===f?h.x+=t.d:"W"===f&&(h.x-=t.d)),u&&s.push(u);var v=da(s);i&&o&&!Fr(c,l)&&v.getAllEdges().forEach((function(e){var t=e.startVertex,n=e.endVertex,r={x1:t.x,y1:t.y,x2:n.x,y2:n.y};(Zr(r,i)||Zr(r,o))&&v.deleteEdge(e)}));var y,b=this.getExpandPoint(p,c,d)||p,k=this.getExpandPoint(h,l,f)||h,w=v.snap(b),x=v.snap(k);return w.from=p,x.from=h,(y=zr(w.x,x.x)&&zr(w.y,x.y)?[]:fa(v,w,x,(function(e,t,r){return n.cost({vertex:e,start:t,end:r,middleLine:u})}))).unshift(p),y.push(h),this.dedupePoints(y)}},{key:"destroy",value:function(){this.destroyed=!0}}]),e}()),rf=function(e){x()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g()(this,n),(e=t.call(this,r)).isEdge=!0,e}return n}(gl.Line);function af(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function of(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?af(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):af(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}l()(rf,"className","EdgeCell"),l()(rf,"Shapes",Object.assign({},gl.Line.Shapes)),rf.registerShape("elbow",{getPath:function(e){var t=e.source,n=e.target,r=e.diagram,a=r.find(t.id),i=r.find(n.id),o=1.3*e.stroke.width,c=e.getEndpoint(t),l=e.getEndpoint(n);if(null!=a&&a===i&&Ur(c.x,c.y,l.x,l.y)<8)return La([["M",(c=a.getPoint([1,.5])).x,c.y-8],["l",16,0],["l",0,16],["L",c.x,c.y+8]]);if(!c||!l)return La([["M",0,0],["L",50,0],["L",50,50]]);if(a&&!t.connection){var s=i?i.getPoint([.5,.5]):l;c=a.snapAnchor(s)[0]}if(i&&!n.connection){var u=a?a.getPoint([.5,.5]):c;l=i.snapAnchor(u)[0]}return a||i?za(nf.find(tf(tf({cell:a},c),{},{d:t.marker?o:0}),tf(tf({cell:i},l),{},{d:n.marker?o:0}))):"M".concat(c.x,",").concat(c.y," L").concat(l.x,",").concat(c.y," L").concat(l.x,",").concat(l.y)}});var cf=Sl.TextArea,lf=function(e){x()(n,Kd);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g()(this,n),(e=t.call(this,of({stencils:[{name:"text",width:120,height:60,outline:{name:"rect",x:0,y:0,width:120,height:60,rx:1,ry:1},scene:[],thumb:[{d:[["M",6.4,10.5],["L",25.6,10.5],["C",25.8209139,10.5,26,10.6790861,26,10.9],["L",26,22.1],["C",26,22.3209139,25.8209139,22.5,25.6,22.5],["L",6.4,22.5],["C",6.1790861,22.5,6,22.3209139,6,22.1],["L",6,10.9],["C",6,10.6790861,6.1790861,10.5,6.4,10.5],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]}],default:{fill:{color:"rgba(255,255,255,0)"},shape:"text",stroke:{width:1}}},r))).isText=!0,e}return y()(n,[{key:"updateSize",value:function(){var e=this.subcells.find((function(e){return e instanceof cf})),t=this.getPadding();e.update();var n=e.getBBox();this.width="number"!=typeof this.model.width?n.width+t[1]+t[3]:this.width,this.height="number"!=typeof this.model.height?n.height+t[1]+t[3]:this.height}}]),n}();l()(lf,"className","TextCell");var sf=ti,uf=function(e){x()(n,Sl);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"render",value:function(){var e=this.cell,t=new sf({href:e.image.src,width:e.width,height:e.height});this.element=t,e.graphicGroup.add(t)}},{key:"update",value:function(){var e=this.cell,t=this.element;if(e.isCacheStale("image","width","height")){var n=o.OssUtil.resizeImage({maxWidth:e.width,src:e.image.src,data:{width:e.width,originWidth:e.image.naturalWidth,originHeight:e.image.naturalHeight}});t.update({href:n||e.image.src,width:e.width,height:e.height})}}},{key:"draw",value:function(){}}]),n}();function df(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ff(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?df(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):df(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pf=function(e){x()(n,Kd);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g()(this,n),(e=t.call(this,ff(ff({stencils:[{name:"image",width:120,height:60,outline:{name:"rect",x:0,y:0,width:120,height:60,rx:1,ry:1},scene:[],thumb:[{d:[["M",6.4,10.5],["L",25.6,10.5],["C",25.8209139,10.5,26,10.6790861,26,10.9],["L",26,22.1],["C",26,22.3209139,25.8209139,22.5,25.6,22.5],["L",6.4,22.5],["C",6.1790861,22.5,6,22.3209139,6,22.1],["L",6,10.9],["C",6,10.6790861,6.1790861,10.5,6.4,10.5],["Z"]]}],anchors:[{x:.5,y:0,name:"N"},{x:.5,y:1,name:"S"},{x:0,y:.5,name:"W"},{x:1,y:.5,name:"E"}]}],default:{fill:{color:"rgba(255,255,255,0)"},image:{},shape:"image",stroke:{width:1}}},r),{},{Subcells:[Fd,uf]}))).isImage=!0,["src","naturalWidth","naturalHeight"].forEach((function(t){if(null==e.image[t])throw new Error("missing image key ".concat(t))})),e}return n}();l()(pf,"className","ImageCell");var hf=_a,mf=Ka,gf=function(){function e(t){g()(this,e),this.diagram=t;var n=new hf;t.frontRootGroup.add(n),Object.assign(this,{style:{stroke:""},tolerance:5,bleed:0,toAlignPoints:[],refLines:[],showLine:!0,preventAlignX:!1,preventAlignY:!1,refLinesGroup:n})}return y()(e,[{key:"_getPointsByBox",value:function(e){var t={x:e.maxX,y:e.minY,weight:0,box:e};return[{x:e.minX,y:e.maxY,weight:0,box:e},t,{x:(e.minX+e.maxX)/2,y:(e.minY+e.maxY)/2,weight:1,box:e}]}},{key:"_getPointsByPoint",value:function(e){return[e]}},{key:"_getPointsByCell",value:function(e){var t=e.getAbsBBox();return this._getPointsByBox(t)}},{key:"drawRefLines",value:function(){var e=this.refLines,t=this.refLinesGroup;t.clear(),e.forEach((function(e){var n=e.x1,r=e.y1,a=e.x2,i=e.y2;t.add(new mf({d:"M".concat(n,",").concat(r," L").concat(a,",").concat(i),stroke:"#FF4E50"}))}))}},{key:"clear",value:function(){this.refLinesGroup.clear()}},{key:"updateToAlginPoints",value:function(e){var t=this,n=this.diagram,r=n.paper,a=n.getCells();e&&(a=a.filter(e));var i=[];if(a.forEach((function(e){i=i.concat(t._getPointsByCell(e))})),r.visible){var o=r.getBBox();i=i.concat(this._getPointsByBox({minX:o.left,minY:o.top,maxX:o.right,maxY:o.bottom}))}this.toAlignPoints=i}},{key:"alignByPoint",value:function(e){return this._align("Point",e)}},{key:"alignByBox",value:function(e){return this._align("Box",e)}},{key:"_align",value:function(e,t){var n=this,r=this.bleed,a=this.showLine,i=this.toAlignPoints,o=this.diagram,c=this.preventAlignX,l=this.preventAlignY,s={dx:0,dy:0},u=this.tolerance/o.viewport.zoom;if(0===i.length)return s;var d=this["_getPointsBy"+e](t),f=[];return this.refLines=[],d.forEach((function(e){f=f.concat(i.map((function(t){return{from:e,to:t,weight:e.weight+t.weight,hDis:Math.abs(t.x-e.x),vDis:Math.abs(t.y-e.y)}})))})),c||(f.sort((function(e,t){return e.hDis-t.hDis})),f.filter((function(e){return e.hDis===f[0].hDis})).forEach((function(e){e.hDis<u&&(s.dx=e.to.x-e.from.x,n.refLines.push({x1:e.to.x,x2:e.to.x,y1:Math.min(e.to.box.minY,e.from.box.minY)-r,y2:Math.max(e.to.box.maxY,e.from.box.maxY)+r}))}))),l||(f.sort((function(e,t){return e.vDis-t.vDis})),f.filter((function(e){return e.vDis===f[0].vDis})).forEach((function(e){e.vDis<u&&(s.dy=e.to.y-e.from.y,n.refLines.push({x1:Math.min(e.to.box.minX,e.from.box.minX)-r,x2:Math.max(e.to.box.maxX,e.from.box.maxX)+r,y1:e.to.y,y2:e.to.y}))}))),a&&this.drawRefLines(),s}},{key:"reset",value:function(){this.clear(),this.preventAlignX=!1,this.preventAlignY=!1}},{key:"destroy",value:function(){this.diagram=void 0}}]),e}();function vf(e){var t=1/0,n=1/0,r=-1/0,a=-1/0;return e.forEach((function(e){var i,o,c,l;if("edge"===e.type){var s=[];e.source&&!e.source.id&&e.source.connection&&s.push(e.source.connection),e.target&&!e.target.id&&e.target.connection&&s.push(e.target.connection);var u=s.map((function(e){return e[0]})),d=s.map((function(e){return e[1]}));i=Math.min.apply(Math,B()(u)),o=Math.min.apply(Math,B()(d)),c=Math.max.apply(Math,B()(u)),l=Math.max.apply(Math,B()(d))}else i=e.x,o=e.y,c=e.x+(e.width||0),l=e.y+(e.height||0);i<t&&(t=i),o<n&&(n=o),c>r&&(r=c),l>a&&(a=l)})),{minX:t,minY:n,maxX:r,maxY:a}}function yf(e,t,n){if(e&&!e.id){var r=e.connection;e.connection=[r[0]+t,r[1]+n]}}function bf(e,t,n){"edge"===e.type?(yf(e.source,t,n),yf(e.target,t,n)):(e.x=(e.x||0)+t,e.y=(e.y||0)+n)}l()(gf,"className","Align");var kf=function(e){x()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(e){var r;return g()(this,n),(r=t.call(this,e)).caches={},r}return y()(n,[{key:"_clipboardFiles",value:function(e){e.length>0&&this.diagram.emit("importimage",{files:e,from:"clpboard"})}},{key:"resetModels",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.diagram,a=this.caches,i=5;e.forEach((function(e){var n=r.find(e.id)?1:0;a[e.id]||(a[e.id]=[]),(t=a[e.id]).forEach((function(){n++})),bf(e,i*n,i*n),t.push(e.id)}));var o=vf(e);if(!Fr(o,r.viewport.getViewportBox())){var c=r.viewport.getCenter(),l=c[0]-(o.minX+o.maxX)/2,s=c[1]-(o.minY+o.maxY)/2;e.forEach((function(e){bf(e,l,s)}))}return Qu(e,n),e}},{key:"clipboard",value:function(e){var t=e.html,n=e.files;if(n&&n.length>0)return this._clipboardFiles(n);var r=this.diagram,a=Wo(t);if(a){var i=this.resetModels(a.body,a.extraInformations);a.execute=function(){r.add(i)},a.execute()}return a}}]),n}(Ac),wf='<div style="text-align:center;">'.concat("&#8203;","<br></div>");var xf=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){var e;return g()(this,n),(e=t.call(this)).default={dragDuplicates:void 0,dragCells:void 0,startPoint:void 0,startBox:void 0,startModels:void 0,startClient:void 0,delegation:void 0,onMouseMoveEvent:void 0,dx:0,dy:0},Object.assign(R()(e),e.default),e}return y()(n,[{key:"reset",value:function(){var e=this.diagram;this.delegation&&this.dragCells.forEach((function(e){return e.show()})),this.dragCells&&this.dragCells.length>1&&e.highlight.show(),this.delegation&&e.delegator.remove(this.delegation),this.onMouseMoveEvent&&this.unbind(this.onMouseMoveEvent),e.signal.cellDragStart=!1,e.align.clear(),Object.assign(this,this.default)}},{key:"initDragData",value:function(){var e=this.diagram,t=e.selector.selections.filter((function(e){return!e.locked}));if(1===t.length){var n=t[0];if(!n||e.contentEditor.isBegin)return;e.align.updateToAlginPoints((function(e){return e!==n&&"edge"!==e.model.type})),this.startBox=n.getAbsBBox()}if(e.signal.keydown.Alt){var r=t.map((function(e){return f()(e.model)}));this.dragCells=e.add(e.importer.resetModels(r)),this.dragDuplicates=!0}else this.dragCells=t;this.startModels=this.dragCells.map((function(e){var t=e.model;if(e.isEdge){var n={};return!t.source.id&&t.source.connection&&(n.source={connection:t.source.connection.concat([])}),!t.target.id&&t.target.connection&&(n.target={connection:t.target.connection.concat([])}),n}return{x:e.x,y:e.y}}))}},{key:"init",value:function(){var e=this,t=this.diagram,n=function(){return e.startModels.map((function(t,n){if(e.dragCells[n].isEdge){var r={};return t.target&&!t.target.id&&(r.target=f()(t.target),r.target.connection[0]+=e.dx,r.target.connection[1]+=e.dy),t.source&&!t.source.id&&(r.source=f()(t.source),r.source.connection[0]+=e.dx,r.source.connection[1]+=e.dy),r}return{x:t.x+e.dx,y:t.y+e.dy}}))},r=$()((function(r){if(t.signal.cellDragStart){var a=t.viewport.invertClient([r.clientX,r.clientY]);if(e.dx=a[0]-e.startPoint[0],e.dy=a[1]-e.startPoint[1],1===e.dragCells.length&&!e.dragCells[0].isEdge){var i={minX:e.startBox.minX+e.dx,maxX:e.startBox.maxX+e.dx,minY:e.startBox.minY+e.dy,maxY:e.startBox.maxY+e.dy},o=t.align.alignByBox(i);e.dx+=o.dx,e.dy+=o.dy}if(e.delegation)e.delegation.translate(e.dx,e.dy);else{var c=n();t.update(e.dragCells,c)}}else{if(Ur(e.startClient[0],e.startClient[1],r.clientX,r.clientY)<8)return;if(e.initDragData(),!e.dragCells)return;t.signal.cellDragStart=!0,t.emit("cell:dragstart"),e.dragCells.length>1&&t.highlight.hide(),e.dragCells.length>10&&!e.delegation&&!function(){for(var n=0;n<e.dragCells.length;n++){var r=e.dragCells[n];if(r.isEdge&&r.source.id){var a=t.find(r.model.source.id);if(a&&!e.dragCells.includes(a))return!0;var i=t.find(r.model.target.id);if(i&&!e.dragCells.includes(i))return!0}}var o={};return e.dragCells.filter((function(e){return e.isVertex})).reduce((function(e,t){return e[t.model.id]=t,e}),o),!!function(e,t){return e.getCells().filter((function(e){if(!e.isEdge)return!1;var n=e.source,r=e.target;return n.id&&t[n.id]||r.id&&t[r.id]}))}(t,o).some((function(t){return!e.dragCells.includes(t)}))}()&&(e.delegation=t.delegator.create(e.dragCells),e.dragCells.forEach((function(e){return e.hide()}))),1===e.dragCells.length&&t.contentEditor&&(t.contentEditor.unbind(),t.focus())}}),16),a=function(){var a;e.delegation||t.update(e.dragCells,e.startModels);var i=[];e.dragDuplicates?(t.remove(e.dragCells.map((function(e){return e.model.id}))),i.push("Add",{model:e.dragCells.map((function(t){var n=t.model;return t.isEdge?(n.target&&!n.target.id&&(n.target.connection[0]+=e.dx,n.target.connection[1]+=e.dy),n.source&&!n.source.id&&(n.source.connection[0]+=e.dx,n.source.connection[1]+=e.dy)):(n.x+=e.dx,n.y+=e.dy),n}))})):i.push("Update",{id:e.dragCells.map((function(e){return e.model.id})),model:n()}),t.emit("cell:dragend",{cells:e.dragCells}),r.cancel(),e.reset(),(a=t.command).execute.apply(a,i)},i=function(){r.cancel(),e.reset()};this.bind(t,"mousedown",(function(n){var a=n.target,i=n.clientX,o=n.clientY,c=n.button,l=t.getCell(a);0===c&&l&&!l.locked&&(e.startClient=[i,o],e.startPoint=t.viewport.invertClient([i,o]),e.onMouseMoveEvent=e.bind(t,"mousemove",r))})),this.bind(t,"mouseup",(function(){e.dragCells&&e.dragCells[0]&&t.signal.cellDragStart?a():i()})),this.bind(t,"mouseleave",(function(){e.dragCells&&e.dragCells[0]&&t.signal.cellDragStart?a():i()}))}}]),n}();function _f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_f(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ef(e){e.target.setAttribute("stroke","#595959")}function Of(e){e.target.setAttribute("stroke","#bfbfbf")}var Sf=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){var e;return g()(this,n),e=t.call(this),l()(R()(e),"updateOrigin",(function(t){var n=R()(e).diagram.viewport.invertClient([t.clientX,t.clientY]),r=M()(n,2),a=r[0],i=r[1];e.origin=[a,i]})),l()(R()(e),"updateEdge",(function(t){var n=R()(e),r=n.diagram,a=n.edge,i=n.origin,o=n.sourceCell,c=r.viewport.invertClient([t.clientX,t.clientY]);if(i&&!a&&Ur(i[0],i[1],c[0],c[1])>8){var l=r.add(e.initEdge(c))[0];l.graphicGroup.css({cursor:"crosshair"}),r.setCursor("crosshair"),e.edge=l,e.clearButton()}else if(a){var s=Xc(r,c);if(e.cacheEndpointId!==s.id&&(r.highlight.dock([r.find()]),e.cacheEndpointId=s.id),!s.id){var u=o.getPoint([.5,.5]);Qc([u.x,u.y],s.connection)}r.update(a,{target:s})}})),l()(R()(e),"commitEdge",(function(t){var n=R()(e),r=n.edge,a=n.diagram,i=n.origin;if(r||i){var o;if(r)o=r.model,a.remove(r);else if(i){e.updateDirection(t);var c=e.getTargetConnection(e.direction);o=e.initEdge(c)}var l=Object(I.a)();a.command.execute("Add",{model:Cf(Cf({},o),{},{id:l})}),e.clear(),null==o.target.id&&requestAnimationFrame((function(){a.emit("vertexcell:prompt",{edge:a.find(l)})}))}})),l()(R()(e),"revertEdge",(function(t){var n=R()(e),r=n.edge,a=n.diagram;r&&("Esc"!==t.key&&"Escape"!==t.key||(a.remove(r),e.clear()))})),e.cacheEndpointId=null,e}return y()(n,[{key:"initButton",value:function(){var e=this.diagram,t=e.frontRootGroup,n=e.defs,r=Object(I.a)(),a=new Ka({"stroke-width":1.3,stroke:"inherit",fill:"#ffffff",d:[Fa(7.635,7.635,7.635),"M ".concat(7.635-3.275," ").concat(7.635," L ").concat(10.91," ").concat(7.635),"M ".concat(7.635," ").concat(7.635-3.275," L ").concat(7.635," ").concat(10.91)].join(" ")});a.rendererElement.setAttribute("id",r),n.add(a);var i=new ui({href:"#".concat(r),width:15.27,height:15.27,visibility:"hidden",stroke:"#bfbfbf"});i.css({cursor:"copy"}),i.dataset({lake_prevent_click_unselect:!0}),i.on("mouseenter",Ef),i.on("mouseleave",Of),i.on("mousedown",this.updateOrigin),t.add(i),this.button=i}},{key:"updateButton",value:function(){var e=this.button,t=this.diagram,n=this.direction,r=this.sourceCell;if(r&&n){var a,i,o=t.viewport.zoom,c=r.getAbsBBox(),l=c.x,s=c.y,u=c.width,d=c.height,f=1/o,p=f;switch(n){case"N":a=l+u/2-7.635*f,i=s-8-15.27*p;break;case"E":a=l+u+8,i=s+d/2-7.635*p;break;case"S":a=l+u/2-7.635*f,i=s+d+8;break;case"W":a=l-8-7.635*f*2,i=s+d/2-7.635*p}e.update({matrix:[f,0,0,0,p,0,a,i,1],visibility:""})}}},{key:"clearButton",value:function(){var e=this.button;e&&(e.remove(),this.button=null)}},{key:"initEdge",value:function(e){var t=this.diagram,n=this.sourceCell,r=this.direction,a={id:n.model.id,connection:r},i=Cf({shape:"elbow",marker:"arrow"},(t.settings.flowchart||{}).edge);return{type:"edge",shape:i.shape,source:a,target:{connection:e,marker:i.marker}}}},{key:"getTargetConnection",value:function(e){var t=this.sourceCell.getPoint(e),n=t.x,r=t.y;switch(e){case"N":return[n,r-50];case"E":return[n+50,r];case"S":return[n,r+50];case"W":return[n-50,r];default:throw new Error("unexpected direction ".concat(e))}}},{key:"updateDirection",value:function(e){var t=this.diagram.viewport.invertClient([e.clientX,e.clientY]),n=M()(t,2),r=n[0],a=n[1],i=this.sourceCell.getPoint([.5,.5]);Ur(i.x,i.y,t[0],t[1])>16&&(this.direction=Zc(i,{x:r,y:a}))}},{key:"updateBoundingRect",value:function(e){var t=e.graphicGroup.getBoundingClientRect(),n=t.x,r=t.y,a=r-15.27-8,i=n+t.width+15.27+8,o=r+t.height+15.27+8,c=n-15.27-8;this.boundingRect={top:a,right:i,bottom:o,left:c}}},{key:"update",value:function(e,t){e&&(this.button||this.initButton(),this.sourceCell=e,this.updateDirection(t),this.updateBoundingRect(e),this.updateButton())}},{key:"clear",value:function(){this.clearButton(),this.sourceCell=null,this.boundingRect=null,this.origin=null,this.edge=null,this.draggingCell=!1;var e=this.diagram;e.resetCursor(),this.cacheEndpointId&&e.highlight.clear(),this.cacheEndpointId=null}},{key:"init",value:function(e){var t=this;this.diagram=e,this.bind(e,"vertexcell:mouseenter",(function(n){var r=n.cell,a=n.nativeEvent,i=t.sourceCell;i&&r===i||t.edge||e.signal.cellDragStart||t.update(r,a)})),this.bind(e,"vertexcell:update",(function(e){e.cell===t.sourceCell&&t.updateButton()})),this.bind(e,"vertexcell:remove",(function(e){var n=e.id,r=t.sourceCell;r&&r.model.id===n&&t.clear()})),this.bind(e,"cell:dragstart",(function(){t.clear()})),this.bind(e,"mousemove",$()((function(e){var n=t.boundingRect;if(t.origin)t.updateEdge(e);else if(n){var r=e.clientX,a=e.clientY,i=n.top,o=n.right,c=n.bottom;r<n.left-8||r>o+8||a<i-8||a>c+8?t.clear():(t.updateDirection(e),t.updateButton())}}),16)),this.bind(e,"mouseup",this.commitEdge),this.bind(e,"keydown",this.revertEdge),this.bind(e,"afterviewportchange",$()((function(){t.edge||e.destroyed||t.clear()}),16)),this.bind(e,"afterselect",(function(){var e=t.origin,n=t.sourceCell;e||n&&n.state.selected||t.clear()}))}}]),n}();function Rf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Df(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rf(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Af=function(e){x()(n,_a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(e){var r;g()(this,n);var a=Df({width:32,height:32},e),i=a.width,o=a.height,c=e.matrix||[1,0,0,0,1,0,0,0,1];i>0&&(c[0]=i/32),o>0&&(c[4]=o/32),r=t.call(this,Df(Df({},e),{},{matrix:c}));var l=e.stencil,s=e.title,u=l.name,d=l.thumb,f=new ai({x:0,y:0,width:i,height:o,rx:2,fill:"#fff",stroke:"none"});return r.add(new pi({title:s})),r.add(f),d.forEach((function(e){r.add(Id(e))})),R()(r).rendererElement.dataset.name=u,r.css({cursor:"pointer"}),r}return n}();var Tf=function(e){x()(n,_a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(e){var r;g()(this,n),r=t.call(this,e);var a=e.key,i=e.title,o=e.shapes,c=8,l=8;if(i){var s=new gi({text:i,matrix:[1,0,0,0,1,0,12,28,1],fill:"#262626"});r.add(s),l+=32}return o.forEach((function(e){var t=e.name,n=e.title,a=cd.find((function(e){return e.name===t}));c>=200&&(c=8,l+=32);var i=new Af({stencil:a,matrix:[1,0,0,0,1,0,c,l,1],stroke:"#595959",fill:"#ffffff",title:n});r.add(i),c+=32})),r.rendererElement.dataset.group=a,r}return n}();function Pf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pf(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Mf=[{name:"rect",title:vo("矩形")},{name:"rounded-rect",title:vo("圆角矩形")},{name:"circle",title:vo("圆形")},{name:"triangle",title:vo("三角形")},{name:"diamond",title:vo("菱形")},{name:"comment-2",title:vo("标注 2")},{name:"parallelogram",title:vo("平行四边形")},{name:"star",title:vo("星形")},{name:"arrow-1",title:vo("左箭头")},{name:"arrow-2",title:vo("右箭头")},{name:"arrow-3",title:vo("双向箭头")},{name:"polygon",title:vo("五边形")}],Nf=[{name:"process",title:vo("过程")},{name:"start-end",title:vo("起止符")},{name:"decision",title:vo("决策")},{name:"collate",title:vo("整理")},{name:"data",title:vo("数据")},{name:"database",title:vo("数据库")},{name:"delay",title:vo("延迟")},{name:"display",title:vo("显示")},{name:"document",title:vo("文档")},{name:"internal-storage",title:vo("内部存储")},{name:"loop-limit",title:vo("循环起止符")},{name:"manual-input",title:vo("手动输入")},{name:"manual-loop",title:vo("手动循环")},{name:"merge",title:vo("合并")},{name:"multi-document",title:vo("多文档")},{name:"off-page",title:vo("页外连接符")},{name:"connector",title:vo("连接器")},{name:"summing-junction",title:vo("汇总连接")},{name:"subroutine",title:vo("预定义流程")},{name:"preparation",title:vo("准备")},{name:"sort",title:vo("排序")},{name:"stored-data",title:vo("存储数据")},{name:"or",title:vo("或者")},{name:"comment",title:vo("标注")}],Lf={basic:{title:vo("基础形状"),shapes:Mf,height:100},flowchart:{title:vo("流程图"),shapes:Nf,height:178}},If=function(e){x()(n,_a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(e){var r;g()(this,n),e=jf({groups:["flowchart"]},e),r=t.call(this,e);var a=0,i=e.groups,o=i.map((function(e){var t=Lf[e],n=i.length>1,r=a;return a+=n?t.height:t.height-34,new Tf(jf(jf({},t),{},{key:e,title:n?t.title:"",matrix:[1,0,0,0,1,0,0,r,1]}))}));return[new ai({x:0,y:0,width:208,height:a,rx:4,stroke:"#e9e9e9",fill:"#ffffff"})].concat(o).forEach((function(e){return r.add(e)})),r.height=a,r.on("mouseover",$()((function(e){for(var t=e.target.closest("[data-name]"),n=r.rendererElement.querySelectorAll("[data-name]"),a=0;a<n.length;a++){var i=n[a],o=i.querySelector("path");o&&o.setAttribute("fill",i===t?"#f5f5f5":"#ffffff")}}),16)),r.on("click",(function(e){var t=e.target.closest("[data-name]");t&&r.emit("shape:select",{shape:t.dataset.name,group:t.closest("[data-group]").dataset.group})})),r}return n}();var zf=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"createPanel",value:function(){var e=this.diagram,t=e.frontRootGroup,n=e.defs,r=new If,a=Object(I.a)(),i=new Ai,o=new ji({dx:0,dy:0,stdDeviation:4,"flood-color":"rgba(0, 0, 0, 0.08)"});return i.attr({id:a}),i.add(o),n.add(i),r.css({filter:"url(#".concat(a,")")}),r.css({visibility:"hidden"}),t.add(r),r}},{key:"initPanel",value:function(){var e=this;this.panel=this.createPanel(),this.panel.on("shape:select",(function(t){var n=t.shape,r=e.diagram,a=e.edge,i=a.target.connection,o=e.adjustVertexPosition(i,n),c=M()(o,2),l=c[0],s=c[1];e.closePanel(),r.command.execute("FlowchartAddVertex",{model:{type:"flowchart",shape:n,x:l,y:s,html:wf},edge:a})}))}},{key:"closePanel",value:function(){this.panel.css({visibility:"hidden"}),this.direction=null,this.edge=null}},{key:"adjustPanelPosition",value:function(e){var t=this.diagram,n=this.direction,r=this.panel,a=t.viewportContainer.getBoundingClientRect(),i=r.getBBox(),o=t.viewport.invertViewport([a.width-i.width-8,a.height-i.height-8]),c=Math.min(e[0]+8,o[0]),l=Math.min(e[1]+8,o[1]);return"N"===n?c<e[0]+8&&(c=e[0]-8-i.width):"E"===n?c<e[0]+8&&l<e[1]+8&&(l=e[1]-8-i.height):"S"===n?c<e[0]+8&&l<e[1]+8&&(c=e[0]-8-i.width):"W"===n&&l<e[1]+8&&(l=e[1]-8-i.height),[c,l]}},{key:"adjustVertexPosition",value:function(e,t){var n=this.direction,r=cd.find((function(e){return e.name===t})),a=M()(e,2),i=a[0],o=a[1];switch(n){case"N":i-=r.width/2,o-=r.height;break;case"E":o-=r.height/2;break;case"S":i-=r.width/2;break;case"W":i-=r.width,o-=r.height/2}return[i,o]}},{key:"getDirection",value:function(e){var t=Ma(e.d).slice(-2),n=t[0].slice(1),r=t[1].slice(1);return Zc({x:n[0],y:n[1]},{x:r[0],y:r[1]})}},{key:"updatePanel",value:function(e){this.panel||this.initPanel();var t=this.panel,n=e.edge;this.edge=n,this.direction=this.getDirection(n);var r=n.target.connection,a=this.adjustPanelPosition(r),i=M()(a,2),o=i[0],c=i[1];t.update({matrix:[1,0,0,0,1,0,o,c,1]}),t.css({visibility:""})}},{key:"init",value:function(e){var t=this;this.diagram=e,this.edge=null,this.direction=null,this.bind(e,"vertexcell:prompt",(function(e){return t.updatePanel(e)})),this.bind(e,"mousedown",(function(e){var n=t.panel;n&&!n.rendererElement.contains(e.target)&&t.closePanel()})),this.bind(e,"keyup",(function(e){!t.panel||"Esc"!==e.key&&"Escape"!==e.key||t.closePanel()}))}}]),n}();var Bf=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"afterchange",(function(t){if(t){var n=t.models,r=t.action;"remove"===r?function(e,t){t.forEach((function(t){e.emit("vertexcell:remove",{id:t.id})}))}(e,n):"update"===r&&function(e,t){for(var n={},r=function(r){var a=t[r],i=e.find(a.id),o=["x","y","width","height","shape","rotate"];i.isText&&o.push("html"),i.isVertex&&o.some((function(e){return null!=a[e]}))&&(n[a.id]=!0,i.state.selected&&i.rotateResize.update(),e.emit("vertexcell:update",{cell:i}))},a=0;a<t.length;a++)r(a)}(e,n)}}))}}]),n}();var Ff=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){var e;return g()(this,n),(e=t.call(this)).cell,e}return y()(n,[{key:"init",value:function(e){var t=this;this.bind(e,"afterselect",(function(){var n=e.selector.selections;if(t.cell&&(t.cell.endRotateResize(),t.cell=void 0),1===n.length){if(t.cell=n[0],!t.cell.isVertex)return void(t.cell=void 0);t.cell&&t.cell.beginRotateResize()}})),this.bind(e,"cell:dragstart",(function(){t.cell&&(t.cell.endRotateResize(),t.cell=void 0)}))}}]),n}();var Vf=function(e){x()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){var e;return g()(this,n),(e=t.call(this)).diagramType="flowchart",e.cellType="edge",e}return n}(Tc.MouseClickInsertLine);function Uf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uf(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Hf=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){var e;g()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),l()(R()(e),"onMouseMove",(function(t){e.delegation||e.initDelegation();var n=R()(e).delegation,r=e.getPoint(t),a=M()(r,2),i=a[0],o=a[1];n.translate(i,o)})),l()(R()(e),"onClick",(function(t){e.clear();var n=R()(e).diagram,r=n.settings.flowchart.vertex,a=e.getPoint(t),i=M()(a,2),o=i[0],c=i[1],l=Object(I.a)();n.interaction.changeMode("edit"),n.command.execute("Add",{model:qf(qf({},r),{},{id:l,x:o,y:c})})})),e}return y()(n,[{key:"getPoint",value:function(e){return this.diagram.viewport.invertClient([e.clientX,e.clientY])}},{key:"initDelegation",value:function(){var e=this.diagram,t=e.settings.flowchart.vertex,n=e.add(qf(qf({},t),{},{x:0,y:0}))[0];this.delegation=e.delegator.create([n]),this.cell=n,n.hide()}},{key:"init",value:function(e){var t=this;this.diagram=e,this.bind(e,"mousemove",this.onMouseMove),this.bind(e,"click",this.onClick),this.bind(window,"keyup",(function(n){"Esc"!==n.key&&"Escape"!==n.key||(t.clear(),e.interaction.changeMode("edit"))}))}},{key:"clear",value:function(){var e=this.cell,t=this.delegation,n=this.diagram;e&&n.remove(e.model.id),t&&t.destroy(),this.cell=null,this.delegation=null}},{key:"unbind",value:function(){this.clear(),k()(O()(n.prototype),"unbind",this).call(this)}}]),n}();var Wf=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){var e;return g()(this,n),(e=t.call(this)).contentEditorOptions={insertParagraphKey:function(e){return 13===e.which},cancelKey:function(e){return 27===e.which}},e}return y()(n,[{key:"init",value:function(e){var t=this.contentEditorOptions,n=e.contentEditor;this.bind(e,"afterselect",(function(){if(!e.signal.mouseMultiSelecting){var r=e.selector.selections;if(1===r.length){var a=r[0].textAreaElement;if(!a||e.destroyed)return;var i=a.htmlContainer;if(e.destroyed)return;n.dom&&n.dom!==i&&n.unbind(),!n.dom&&e.viewportContainer.contains(i)&&n.bind(i,t),n.isBegin||n.prepareEdit()}else n.unbind(),e.focus()}})),this.bind(e,"mousedown",(function(t){var n=e.getCell(t.target);n&&n.textAreaElement&&!n.textAreaElement.htmlContainer.contains(t.target)&&t.preventDefault()})),this.bind(e,"dblclick",(function(t){var r=t.target,a=e.getCell(r);a&&a.state.selected&&a.textAreaElement&&!e.contentEditor.isBegin&&(e.selector.selections.length>1&&e.selector.select([a]),n.prepareEdit(),n.beginEdit(),e.update(a,{}))})),this.bind(e,"click",(function(t){var n=e.getCell(t.target);n&&n.textAreaElement&&n.textAreaElement.htmlContainer.contains(t.target)&&"A"===t.target.tagName&&t.preventDefault()}))}}]),n}();var Yf=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){var t,n,r,a=function(){!e.destroyed&&r&&t&&(e.update(t.map((function(e){return e.id})),t),e.command.execute("Update",{id:r.map((function(e){return e.id})),model:r}),t=void 0,r=void 0)},i=function(n,r,a){return a.preventDefault(),t||(t=[].concat(e.selector.selections.map((function(e){return{id:e.model.id,x:e.x,y:e.y}})))),e.selector.selections.map((function(e){return{id:e.model.id,x:e.x+n,y:e.y+r}}))};this.bind(e,"keydown",(function(t){if(!(e.selector.selections.length<=0)){var o;switch(o=t.shiftKey?10:1,n&&clearTimeout(n),t.key){case"Left":case"ArrowLeft":r=i(-o,0,t);break;case"Right":case"ArrowRight":r=i(o,0,t);break;case"Up":case"ArrowUp":r=i(0,-o,t);break;case"Down":case"ArrowDown":r=i(0,o,t);break;default:return}e.update(r.map((function(e){return e.id})),r),n=setTimeout((function(){a()}),400)}})),this.bind(e,"keyup",(function(){n&&clearTimeout(n),a()}))}}]),n}();var Gf=F.HotKeyUtils.isHotkey,Kf=function(e){x()(n,Tc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(e){this.bind(e,"keydown",(function(t){if(Gf("mod+d",t)){t.preventDefault();var n=e.selector.selections.map((function(e){return f()(e.model)}));e.importer.resetModels(n),e.command.execute("Add",{model:n})}}))}}]),n}();var Xf=function(e){x()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){k()(O()(n.prototype),"execute",this).call(this);var e=this.diagram,t=this.edge,r=this.model;this.originTarget=["id","connection","marker"].reduce((function(e,n){var r=t.target[n];return e[n]=null==r?null:r,e}),{}),e.update(t,{target:{id:r.id,connection:null}})}},{key:"forward",value:function(){k()(O()(n.prototype),"forward",this).call(this);var e=this.diagram,t=this.edge,r=this.model;e.update(t,{target:{id:r.id,connection:null}})}},{key:"backward",value:function(){var e=this.diagram,t=this.edge,n=this.originTarget,r=this.model;e.remove(r.id),e.update(t.model.id,{target:n})}}]),n}(Bi.Add);function $f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$f(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}l()(Xf,"className","FlowchartAddVertex"),l()(Xf,"enable",(function(e){return 0===e.selector.selections.length}));var Qf=function(e){x()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.shape,n=this.marker,r=this.html;e.selector.clear(),e.interaction.changeMode("beginAddFlowchartEdge"),e.settings.flowchart=Zf(Zf({},e.settings.flowchart),{},{edge:{shape:t,marker:n,html:r}})}}]),n}(Bi.BeginInsertLine);function Jf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ep(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jf(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}l()(Qf,"className","FlowchartBeginInsertEdge");var tp=function(e){x()(n,Bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(e){var r;return g()(this,n),(r=t.call(this,ep({html:wf},e))).queue=!1,r}return y()(n,null,[{key:"enable",value:function(){return!0}}]),y()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.shape,n=this.html,r=this.fill,a=this.stroke;e.settings.flowchart=ep(ep({},e.settings.flowchart),{},{vertex:{type:"flowchart",html:n,shape:t,fill:r,stroke:a}}),e.selector.clear(),e.interaction.changeMode("beginAddFlowchartVertex")}}]),n}();function np(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?np(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):np(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}l()(tp,"className","FlowchartBeginInsertShape"),l()(tp,"isModelChange",!1);var ap=function(e){x()(n,Bi);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(e){var r;return g()(this,n),(r=t.call(this,rp({html:vo("文本")},e))).queue=!1,r}return y()(n,null,[{key:"enable",value:function(){return!0}}]),y()(n,[{key:"execute",value:function(){var e=this.diagram,t=this.html,n=this.stroke;e.settings.flowchart=rp(rp({},e.settings.flowchart),{},{vertex:{type:"text",html:t,stroke:n}}),e.selector.clear(),e.interaction.changeMode("beginAddFlowchartVertex")}}]),n}();l()(ap,"className","FlowchartBeginInsertText"),l()(ap,"isModelChange",!1);var ip=Tc.MouseDragCanvas,op=Tc.MouseDragMultiSelect,cp=Tc.AfterSelectionChangeMultiSelectHighlight,lp=Tc.KeyboardPressModifierKey,sp=Tc.KeyboardSelectAll,up=Tc.KeyboardSwitchEditAndDragCanvas,dp={Extends:[gf,kf],Cells:[Zd,rf,lf,pf],Commands:[Xf,Qf,tp,ap],defaultCursors:{read:"grab",dragCanvas:"grab",beginAddFlowchartEdge:"crosshair"},modes:[{mode:"edit",Behaviours:[Bf,xf,Sf,zf,Ff,Wf,Yf,Kf,op,cp,lp,sp,up]},{mode:"read",Behaviours:[ip]},{mode:"dragCanvas",Behaviours:[up,ip]},{mode:"beginAddFlowchartEdge",Behaviours:[Vf]},{mode:"beginAddFlowchartVertex",Behaviours:[Hf]}]};var fp=Ka,pp=function(e){x()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"init",value:function(){k()(O()(n.prototype),"init",this).call(this),this._renderMask()}},{key:"_renderMask",value:function(){var e=this.diagram.frontRootGroup,t=new fp({fill:"rgba(231, 233, 235, 0.6)"});t.css({"pointer-events":"none"}),e.prepend(t),this.mask=t}},{key:"_updateMask",value:function(){var e=this.diagram,t=this.mask,n=this.zoom;if(t){var r=e.paper,a=r.size,i=r.getBBox(),o=this.getPadding(i,n).map((function(e){return e/n})),c=-o[1],l=-o[0],s=a[0]+2*o[1],u=La([["M",c,l],["h",s],["v",a[1]+2*o[0]],["h",-s],["M",0,0],["v",a[1]],["h",a[0]],["v",-a[1]],["z"]]);t.update({d:u})}}},{key:"_trackSingleSelect",value:function(){}},{key:"_getUserPadding",value:function(){var e=this.diagram;return"edit"===e.interaction.currentMode&&e.options.padding||[0,0]}},{key:"getPadding",value:function(e,t){var n=this.diagram,r=this._getUserPadding(),a=n.viewportContainer.getBoundingClientRect(),i=(e.right-e.left)*t,o=(e.bottom-e.top)*t,c=Math.max((a.width-i)/2,r[1]);return[Math.max((a.height-o)/2,r[0]),c]}},{key:"setViewport",value:function(){for(var e,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];(e=k()(O()(n.prototype),"setViewport",this)).call.apply(e,[this].concat(r)),this.autoZoom=!1,this._updateMask()}},{key:"zoomFit",value:function(){var e=this.diagram,t=e.paper.size,n=this._getUserPadding(),r=Math.min(e.width-2*n[1],(e.height-2*n[0])*t[0]/t[1]);this.setViewport(r/t[0]),this.autoZoom=!0}}]),n}(ol);var hp=function(e){x()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"getContentArea",value:function(){var e=this.diagram.paper,t=M()(e.size,2);return{left:0,top:0,width:t[0],height:t[1]}}}]),n}(Rc);var mp=function(e){x()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"calculateBBox",value:function(){var e=this.size;return{top:0,bottom:e[1],left:0,right:e[0]}}}]),n}(rl),gp=Tc.MouseDragCanvas,vp=Tc.MouseDragMultiSelect,yp=Tc.AfterSelectionChangeMultiSelectHighlight,bp=Tc.KeyboardPressModifierKey,kp=Tc.KeyboardSelectAll,wp=Tc.KeyboardSwitchEditAndDragCanvas,xp={Extends:[gf,kf,pp,hp,mp],Cells:[Zd,rf,lf,pf],Commands:[Xf,Qf,tp,ap],defaultCursors:{read:"grab",dragCanvas:"grab",beginAddFlowchartEdge:"crosshair"},modes:[{mode:"edit",Behaviours:[Bf,xf,Ff,Wf,Yf,Kf,vp,yp,bp,kp,wp]},{mode:"read",Behaviours:[gp]},{mode:"dragCanvas",Behaviours:[wp,gp]},{mode:"beginAddFlowchartEdge",Behaviours:[Vf]},{mode:"beginAddFlowchartVertex",Behaviours:[Hf]}]},_p=Object.freeze({__proto__:null,Mindmap:od,Flowchart:dp,Show:xp});function Cp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ep(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cp(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Op(e){return e.overlay?e.overlay:tr.a.createElement(Fn.a,{onClick:e.onSelect,className:ir()("lake-diagram-toolbar-dropdown-menu",e.menuClassName)},e.data.map((function(e){return tr.a.createElement(Fn.a.Item,{key:e.key},tr.a.createElement("span",{className:"lake-icon lake-icon-".concat(e.icon)}))})))}function Sp(e){var t=e.command,n=e.name;return tr.a.createElement("div",{className:"lake-diagram-toolbar-command lake-diagram-toolbar-dropdown"},tr.a.createElement(Vn.a,{overlay:Op(Ep(Ep({},e),{},{onSelect:function(n){var r=n.key;e.onSelect?e.onSelect({key:r}):e.execCommand(t,{key:r})}}))},tr.a.createElement(Un.a,{"data-testid":n},tr.a.createElement("span",{className:"lake-icon lake-icon-".concat(e.icon)}))))}function Rp(e){var t=e.name,n=e.command,r=e.defaultKey,a=e.data,i=Object(er.useState)(r),o=M()(i,2),c=o[0],l=o[1],s=a.find((function(e){return e.key===c}));return tr.a.createElement("div",{className:"lake-diagram-toolbar-command lake-diagram-toolbar-dropdown"},tr.a.createElement(Vn.a.Button,{onClick:function(){e.onClick?e.onClick({key:c}):e.execCommand(n,{key:c})},overlay:Op(Ep(Ep({},e),{},{onSelect:function(t){var n=t.key;l(n),e.onSelect&&e.onSelect({key:n})}})),icon:tr.a.createElement("span",{className:"lake-icon lake-icon-dropdown-arrow"}),"data-testid":t},tr.a.createElement("span",{className:"lake-icon lake-icon-".concat(e.icon||s.icon)})))}function Dp(e){var t=e.mode,n=cr()(e,["mode"]);return"button"===t?tr.a.createElement(Rp,n):tr.a.createElement(Sp,n)}function Ap(e){var t=e.name,n=e.icon,r=e.accept,a=e.disabled,i=e.title,o=e.onChange,c=Object(er.useRef)();return tr.a.createElement("div",{className:"lake-diagram-toolbar-command","data-testid":t},tr.a.createElement(qn.a,{disabled:a||!i,placement:"bottom",title:tr.a.createElement("div",{className:"lake-diagram-toolbar-tooltip"},i&&tr.a.createElement("div",{className:"lake-diagram-toolbar-tooltip-title"},i))},tr.a.createElement(Un.a,{className:"lake-diagram-toolbar-upload",onClick:function(){return c.current.click()},disabled:a},tr.a.createElement("span",{className:"lake-icon lake-icon-".concat(n)}),tr.a.createElement("input",{type:"file",accept:r,onChange:o,ref:c}))))}function Tp(e){var t=e.name,n=e.title,r=e.hotkey,a=e.icon,i=e.label,o=e.command,c=e.disabled,l=e.active,s=Object.keys(e).reduce((function(t,n){return n.startsWith("data-")&&(t[n]=e[n]),t}),{});return tr.a.createElement("div",Jn()({className:"lake-diagram-toolbar-command","data-testid":t},s),tr.a.createElement(qn.a,{disabled:c||!(n||r),placement:"bottom",title:tr.a.createElement("div",{className:"lake-diagram-toolbar-tooltip"},n&&tr.a.createElement("div",{className:"lake-diagram-toolbar-tooltip-title"},n),r&&tr.a.createElement("div",{className:"lake-diagram-toolbar-tooltip-hotkey"},r))},tr.a.createElement(Un.a,{onClick:function(t){t.stopPropagation(),e.onClick?e.onClick():e.execCommand(o)},disabled:c,className:ir()({"lake-button-active":l})},tr.a.createElement("span",{className:"lake-icon lake-icon-".concat(a)}),i&&tr.a.createElement("span",{className:"lake-diagram-toolbar-command-label"},i))))}function Pp(e){switch(e.type){case"separator":return tr.a.createElement("div",{className:"lake-diagram-toolbar-separator"});case"dropdown":return tr.a.createElement(Dp,e);case"upload":return tr.a.createElement(Ap,e);default:return tr.a.createElement(Tp,e)}}function jp(e){var t=e.commands,n=e.extra,r=e.execCommand;return tr.a.createElement("div",{className:ir()("lake-diagram-toolbar",e.className),"data-lake_prevent_click_unselect":"true"},tr.a.createElement("div",{className:"lake-diagram-toolbar-title"},e.title),tr.a.createElement("div",{className:"lake-diagram-toolbar-body"},t.map((function(e,t){return tr.a.createElement(Pp,Jn()({key:"".concat(e.name||e.type,"-").concat(t),execCommand:r},e))}))),tr.a.createElement("div",{className:"lake-diagram-toolbar-extra"},n))}mr("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-toolbar-dropdown .ant-btn:after {\n  display: none;\n}\n.lake-diagram-toolbar-dropdown .ant-btn.ant-dropdown-trigger:hover {\n  background: #f5f5f5;\n  border-radius: 2px;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button {\n  height: 32px;\n  line-height: 32px;\n  border-radius: 2px;\n  border: 1px solid transparent;\n  display: flex;\n  align-items: center;\n  transition: border 0.3s;\n  margin-right: 4px;\n  overflow: hidden;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button:hover {\n  border-color: #e8e8e8;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button:hover .ant-btn:first-child {\n  border-color: #e8e8e8;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button .ant-btn {\n  border-radius: 0;\n  transition: none;\n  margin-right: 0;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button .ant-btn:hover {\n  background: #f5f5f5;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button .ant-btn:first-child {\n  border-right: 1px solid transparent;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button .ant-btn:first-child:hover {\n  background: #f5f5f5;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button .ant-btn:first-child:not(:last-child) {\n  min-width: auto;\n  width: 30px;\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child) {\n  min-width: auto;\n  width: 16px;\n  border: none;\n  background: none;\n  padding: 0;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  position: relative;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child) .lake-icon {\n  position: absolute;\n  right: 4px;\n  top: 14px;\n  width: 8px;\n  height: 8px;\n  background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOCIgaGVpZ2h0PSI1IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgb3BhY2l0eT0iLjQ1Ij48cGF0aCBkPSJNMC0yaDh2OEgweiIvPjxwYXRoIGQ9Ik0uNTk2LjU1N2wzLjE1IDMuODIxYS4zMzIuMzMyIDAgMDAuNDk1IDBMNy40MDUuNTU3YS4zMzIuMzMyIDAgMDAtLjI0Ny0uNTUzSC44NDVjLS4yODggMC0uNDQuMzM5LS4yNDkuNTUzeiIgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIi8+PC9nPjwvc3ZnPg==);\n  background-repeat: no-repeat;\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child) .lake-icon:before {\n  content: '';\n}\n.lake-diagram-toolbar-dropdown .ant-dropdown-button .ant-btn.ant-dropdown-trigger:last-child:not(:first-child):hover {\n  background: #e8e8e8;\n}\n.lake-diagram-toolbar-dropdown-menu .lake-icon {\n  font-size: 16px;\n}\n"),Op.propTypes={data:rr.a.array,overlay:rr.a.node,onSelect:rr.a.func,menuClassName:rr.a.string},Sp.propTypes={command:rr.a.string,name:rr.a.string,icon:rr.a.string,onSelect:rr.a.func,execCommand:rr.a.func},Rp.propTypes={command:rr.a.string,name:rr.a.string,defaultKey:rr.a.string,title:rr.a.string,data:rr.a.array,icon:rr.a.string,onClick:rr.a.func,onSelect:rr.a.func,execCommand:rr.a.func},Dp.propTypes={mode:rr.a.string},mr(".lake-diagram-toolbar-upload {\n  position: relative;\n}\n.lake-diagram-toolbar-upload input {\n  position: absolute;\n  left: 0;\n  top: 0;\n  opacity: 0;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n  display: none;\n}\n"),Ap.propTypes={name:rr.a.string,icon:rr.a.string,accept:rr.a.string,disabled:rr.a.bool,title:rr.a.string,onChange:rr.a.func},Tp.defaultProps={disabled:!0},Tp.propTypes={disabled:rr.a.bool,name:rr.a.string,title:rr.a.string,hotkey:rr.a.string,type:rr.a.string,icon:rr.a.string,label:rr.a.string,command:rr.a.string,onClick:rr.a.func,execCommand:rr.a.func,active:rr.a.bool},Pp.propTypes={type:rr.a.string},mr("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-toolbar {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 38px;\n  border-bottom: 1px solid #e8e8e8;\n  padding-left: 16px;\n  padding-right: 12px;\n  background: #FCFCFC;\n}\n.lake-diagram-toolbar-body {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n}\n.lake-diagram-toolbar-separator {\n  width: 1px;\n  height: 100%;\n  margin: 0 4px;\n  background: #e8e8e8;\n}\n.lake-diagram-toolbar-command .ant-btn {\n  border: none;\n  background: none;\n  padding: 0 8px;\n  height: 32px;\n  min-width: 32px;\n  margin-right: 4px;\n  border-radius: 3px;\n  text-align: center;\n  cursor: pointer;\n  outline: none;\n}\n.lake-diagram-toolbar-command .ant-btn[disabled] {\n  color: #BFBFBF;\n  background: none;\n}\n.lake-diagram-toolbar-command .ant-btn:hover {\n  background: #f5f5f5;\n  color: #595959;\n}\n.lake-diagram-toolbar-command .ant-btn:focus {\n  color: #595959;\n}\n.lake-diagram-toolbar-command .ant-btn:after {\n  display: none;\n}\n.lake-diagram-toolbar-command .ant-btn .lake-icon {\n  margin-right: 0;\n  font-size: 16px;\n}\n.lake-diagram-toolbar-command .lake-button-active {\n  background-color: #e8e8e8;\n}\n.lake-diagram-toolbar-command-label {\n  display: inline-block;\n  margin-left: 0.25em;\n}\n.lake-diagram-toolbar-tooltip {\n  text-align: center;\n}\n.lake-diagram-toolbar-tooltip-hotkey {\n  font-size: 12px;\n  color: #BFBFBF;\n  margin-top: 4px;\n}\n.lake-diagram-toolbar-tooltip-hotkey:first-child {\n  margin-top: 0;\n}\n"),jp.defaultProps={commands:[],toggleProperties:function(){},domContainer:null},jp.propTypes={className:rr.a.string,commands:rr.a.array,domContainer:rr.a.object,title:rr.a.node,extra:rr.a.node,execCommand:rr.a.func},jp.Control=Pp;var Mp=["http:","https:","data:","dingtalk:","ftp:","mailto:"];function Np(e){return function(e){return"string"==typeof e&&!(e=e.toLowerCase()).startsWith("data:text/html")&&!!e.match(/^\S*$/)&&(!!Mp.some((function(t){return e.startsWith(t)}))||!(!e.startsWith("./")&&!e.startsWith("/"))||e.indexOf(":")<0)}(e)?e:""}mr(".lake-diagram-link-editor {\n  max-width: 398px;\n  display: inline-block;\n  border: 1px solid #E8E8E8;\n  border-radius: 4px;\n  box-shadow: rgba(221, 221, 221, 0.5) 0px 1px 3px;\n  background: white;\n}\n.lake-diagram-link-editor .lake-link-invalid-link {\n  color: #CF1322;\n}\n.lake-diagram-link-editor p {\n  margin-top: 0;\n  margin-bottom: 14px;\n}\n.lake-diagram-link-editor .lake-diagram-link-editor-slash {\n  margin: 0 2px;\n}\n.lake-diagram-link-editor .lake-diagram-link-editor-slash {\n  width: 1px;\n  height: 14px;\n  border-left: 1px solid #E8E8E8;\n  margin: 0 1px;\n  margin-top: 5px;\n  vertical-align: top;\n}\n.lake-diagram-link-editor .lake-icon {\n  color: #8590A6;\n  font-size: 16px;\n}\n.lake-diagram-link-editor-preview {\n  line-height: 16px;\n  padding: 6px 8px;\n  vertical-align: middle;\n  white-space: nowrap;\n}\n.lake-diagram-link-editor-preview * {\n  display: inline-block;\n}\n.lake-diagram-link-editor-preview .lake-diagram-link-editor-button {\n  color: #595959;\n  margin: 0px 0px 0px 8px;\n  padding: 4px;\n}\n.lake-diagram-link-editor-preview .lake-diagram-link-editor-button:hover {\n  background: #F4F4F4;\n  cursor: pointer;\n}\n.lake-diagram-link-editor-preview .lake-diagram-link-editor-link-container {\n  color: #1890FF;\n  height: 16px;\n  padding: 0 6px;\n  min-width: 180px;\n  max-width: 292px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  text-decoration: none;\n  line-height: 12px;\n  font-size: 14px;\n  letter-spacing: 1.2px;\n  vertical-align: middle;\n}\n.lake-diagram-link-editor-preview .lake-diagram-link-editor-link-empty {\n  height: 16px;\n  padding: 0 6px;\n  min-width: 146px;\n  max-width: 292px;\n  line-height: 20px;\n  font-size: 14px;\n}\n.lake-diagram-link-editor-preview .lake-diagram-link-editor-link-container:hover {\n  cursor: pointer;\n}\n.lake-diagram-link-editor-edit {\n  width: 365px;\n  padding: 16px 12px;\n  padding-bottom: 4px;\n}\n");var Lp={"zh-cn":{text:"文本",link:"链接",editLink:"编辑链接",addDescription:"添加描述",linkAddress:"链接地址",deleteLink:"删除链接",confirm:"确定",pleaseInputLink:"请输入链接",emptyLink:"空链接",pleaseEnterCorrectLink:"请输入正确的链接",selectedContent:"多行文字被选中，暂不支持修改文本"},en:{text:"Text",link:"Link",editLink:"Edit link",addDescription:"Add a description",linkAddress:"Link address",deleteLink:"Delete link",confirm:"Confirm",pleaseInputLink:"Please input link address",emptyLink:"Empty link",pleaseEnterCorrectLink:"Please enter the correct link",selectedContent:"Selected in the document"}};Lp["en-us"]=Lp.en;var Ip=function(e){x()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(e){var r;g()(this,n);var a=(r=t.call(this,e)).props,i=a.lang,o=a.target;return r.locale=Lp[i],r.nativeEvents=[],r.rect=o.getBoundingClientRect(),r.link=o.getAttribute("href"),r.isMultiLink=o.length>1,r.state={invalidLink:r.isInvalidLink(r.link)},r.preventScrollCancel=!1,r}return y()(n,[{key:"adjustPosition",value:function(){var e=this.container,t=this.props.target,n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),a=window.pageYOffset+r.bottom+4,i=window.pageXOffset+r.left;a+n.height>window.innerHeight-20&&(a=window.pageYOffset+r.top-n.height-4),n.right>window.innerWidth-20?i=window.pageXOffset+window.innerWidth-n.width-4:i<20&&(i=window.pageXOffset+20),e.style.top="".concat(a,"px"),e.style.left="".concat(i,"px")}},{key:"componentDidMount",value:function(){this.bindNativeEvents(),this.adjustPosition()}},{key:"componentDidUpdate",value:function(){this.adjustPosition()}},{key:"componentWillUnmount",value:function(){this.removeNativeEvents()}},{key:"bindNativeEvents",value:function(){var e=this,t=this.container,n=!1;this.addNativeEvent(window,"scroll",(function(t){!0!==e.preventScrollCancel?t.target.className&&-1!==t.target.className.indexOf("lake-link")||e.cancel():t.preventDefault()}),!0),this.addNativeEvent(window,"resize",(function(){e.cancel()}),!0),this.addNativeEvent(window,"mousedown",(function(e){var r=e.target;t.contains(r)||(n=!0)}),!0),this.addNativeEvent(window,"mouseup",(function(r){var a=r.target;n&&!t.contains(a)&&e.cancel(),n=!1}))}},{key:"cancel",value:function(){var e=this.props,t=e.onCancel,n=e.target;t({link:n&&n.getAttribute("href")})}},{key:"addNativeEvent",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.addEventListener(t,n,r),this.nativeEvents.push({dom:e,name:t,callback:n,useCapture:r})}},{key:"removeNativeEvents",value:function(){this.nativeEvents.forEach((function(e){var t=e.dom,n=e.name,r=e.callback,a=e.useCapture;t.removeEventListener(n,r,a)})),this.nativeEvents=[]}},{key:"confirm",value:function(){var e=this.props.onConfirm,t=this.state.invalidLink,n=this.getText(),r=this.getLink();t||e(n,r)}},{key:"renderPreview",value:function(){var e,t=this.props,n=t.onDeleteLink,r=t.shouldTargetBlank,a=t.onSwitchToEdit,i=t.dataset,o=this.getLink(),c=this.locale,l=o||c.emptyLink;return e=o?r(o)?tr.a.createElement("a",{className:"lake-diagram-link-editor-link-container",href:Np(o),target:"_blank"},l):tr.a.createElement("a",{className:"lake-diagram-link-editor-link-container",href:Np(o)},l):tr.a.createElement("span",{className:"lake-diagram-link-editor-link-empty"},l),tr.a.createElement("div",{className:"lake-diagram-link-editor lake-diagram-link-editor-preview"},tr.a.createElement("span",{className:"lake-icon lake-icon-link"}),e,tr.a.createElement("span",{className:"lake-diagram-link-editor-slash"}),tr.a.createElement(qn.a,{title:c.editLink},tr.a.createElement("a",Jn()({},i,{className:"lake-icon lake-icon-edit lake-diagram-link-editor-button",onClick:function(){a()}}))),tr.a.createElement(qn.a,{title:c.deleteLink},tr.a.createElement("a",Jn()({},i,{className:"lake-icon lake-icon-unlink lake-diagram-link-editor-button",onClick:n}))))}},{key:"isInvalidLink",value:function(e){return function(e){return!e||e&&!e.match(/^[\x00-\x7F]/)||e.startsWith("javascript:")}(e)}},{key:"renderEditorContent",value:function(){var e=this,t=this.props.dataset,n=this.state.invalidLink,r=this.getText(),a=this.getLink(),i=this.locale;return tr.a.createElement("div",{className:"lake-diagram-link-editor lake-diagram-link-editor-edit",onKeyDown:function(t){var n=t.which,r=e.state.invalidLink;13!==n||r||e.confirm(),27===n&&e.cancel()}},tr.a.createElement("p",null,i.text),tr.a.createElement("p",null,tr.a.createElement(Hn.a,{className:"lake-link-text-input",defaultValue:this.isMultiLink?i.selectedContent:r,ref:function(t){e.textInputDom=t},placeholder:i.addDescription,disabled:this.isMultiLink,onChange:function(t){e.text=t.target.value}})),tr.a.createElement("p",null,i.link),tr.a.createElement("p",null,tr.a.createElement(Hn.a,{className:"lake-link-link-input",defaultValue:a,ref:function(t){e.preventScrollCancel=!0,t&&t.focus(),e.linkInputDom=t,setTimeout((function(){e.preventScrollCancel=!1}),32)},placeholder:i.linkAddress,onChange:function(t){e.link=t.target.value,e.setState({invalidLink:e.isInvalidLink(e.link)})}})),n&&""!==a?tr.a.createElement("p",{className:"lake-link-invalid-link"},i.pleaseEnterCorrectLink):"",tr.a.createElement("p",null,tr.a.createElement(Un.a,Jn()({},t,{className:"lake-link-confirm-button",onClick:function(){e.confirm()},disabled:!this.link||n}),i.confirm)))}},{key:"getLink",value:function(){var e=this.props.getLink;return this.link&&e(this.link)||""}},{key:"getText",value:function(){var e=this.props.target;return this.isMultiLink?"":this.text||e.textContent}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.type,a=n.className,i=n.dataset;return e="edit"===r?this.renderEditorContent():this.renderPreview(),tr.a.createElement("div",Jn()({},i,{className:a,ref:function(e){t.container=e},style:{top:"0px",position:"absolute",zIndex:"1400"}}),e)}}]),n}(tr.a.Component);function zp(e){var t=window.location,n=(t.origin+t.pathname.replace("/edit","")).replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),r=new RegExp("^".concat(n,"#"));return e=e.replace(r,"#").trim(),/^(\w+\.)+\w+(\/|$)/.test(e)&&(e="https://"+e),e}function Bp(e){var t=e.diagram,n=Object(er.useState)(null),r=M()(n,2),a=r[0],i=r[1],o=Object(er.useState)("preview"),c=M()(o,2),l=c[0],s=c[1];return Object(er.useEffect)((function(){function e(e,t){i(e),s(t)}function n(t){var n=t.result,r=t.target,a=t.name;n&&"createLink"===a&&e(r,"edit")}function r(){i(null)}var a=zn()((function(){var n=t.contentEditor.getRange();if(n){var r=t.contentEditor.closest(n.commonAncestorContainer,"a");r?e(r,"preview"):i(null)}}),16);return t.contentEditor.on("execcommand",n),t.contentEditor.on("endedit",r),t.contentEditor.on("selectionchange",a),function(){t.contentEditor.off("execcommand",n),t.contentEditor.off("endedit",r),t.contentEditor.off("selectionchange",a)}}),[t]),a?tr.a.createElement(Ip,{dataset:{"data-lake_prevent_click_unselect":!0},target:a,type:l,lang:go.locale,getLink:zp,onConfirm:function(e,n){a.textContent=e,a.setAttribute("href",n),setTimeout((function(){if(a&&t.viewportContainer.contains(a)){var e=window.getSelection(),n=document.createRange();n.selectNode(a),n.collapse(),e.removeAllRanges(),e.addRange(n)}}),16),i(null)},onSwitchToEdit:function(){s("edit")},onCancel:function(){i(null)},onDeleteLink:function(){a.removeAttribute("href"),function(e){for(var t=e.firstChild;t;){var n=t.nextSibling;e.parentNode.insertBefore(t,e),t=n}e.parentNode.removeChild(e)}(a),i(null)},shouldTargetBlank:function(){return!0}}):tr.a.createElement("div",null)}function Fp(e){var t=Object(er.useRef)(),n=e.groups,r=Object(er.useMemo)((function(){return new If({groups:n})}),[n]);return Object(er.useEffect)((function(){t.current.appendChild(r.rendererElement),t.current.setAttribute("height",r.height)}),[r]),Object(er.useEffect)((function(){function t(t){var n=t.shape,r=t.group;e.onSelect&&e.onSelect({key:n,group:r})}return r.on("shape:select",t),function(){r.off("shape:select",t)}}),[e.onSelect]),tr.a.createElement("svg",{className:ir()(e.className,"lake-prevent-card-activated"),"data-lake_prevent_click_unselect":"true",ref:t,onClick:function(t){e.onClick&&e.onClick(t)},width:208,style:{boxShadow:"0 0 4px rgba(0, 0, 0, 0.08)"},"data-testid":"shape-overlay"})}Ip.defaultProps={dataset:{},className:null,type:"preview",lang:"zh-cn",onDeleteLink:function(){},onSwitchToEdit:function(){},onConfirm:function(){},onCancel:function(){},shouldTargetBlank:function(){},getLink:function(e){return e}},Ip.propTypes={dataset:rr.a.object,className:rr.a.string,target:rr.a.object,type:rr.a.string,lang:rr.a.string,onDeleteLink:rr.a.func,onSwitchToEdit:rr.a.func,onConfirm:rr.a.func,onCancel:rr.a.func,shouldTargetBlank:rr.a.func,getLink:rr.a.func},mr(""),Bp.defaultProps={diagram:null},Bp.propTypes={diagram:rr.a.object.isRequired},Fp.defaultProps={groups:["flowchart"]},Fp.propTypes={onClick:rr.a.func,onSelect:rr.a.func,className:rr.a.string,groups:rr.a.arrayOf(rr.a.string)},mr(".lake-zoom-tool {\n  padding: 0 5px;\n  width: auto;\n  height: 25px;\n  border: 1px solid #E2E2E2;\n  box-shadow: 0px 2px 4px rgba(225, 225, 225, 0.5);\n  color: #EEEEEE;\n  background: #B4B4B4;\n  position: absolute;\n  top: 16px;\n  right: 28px;\n  border-radius: 6px;\n  font-size: 14px;\n  line-height: 24px;\n  letter-spacing: 0.05em;\n  outline-style: none;\n  word-wrap: break-word;\n}\n.lake-zoom-tool .ant-dropdown {\n  left: -2.5px;\n}\n.lake-zoom-tool ul {\n  list-style-type: none;\n  margin: 0;\n}\n.lake-zoom-tool ul.lake-zoom-tool-menu {\n  width: 86px;\n  background: #595959;\n}\n.lake-zoom-tool ul.lake-zoom-tool-menu li {\n  font-size: 12px;\n  margin-left: 0;\n  margin-top: 0;\n  margin-bottom: 0;\n  white-space: nowrap;\n}\n.lake-zoom-tool .ant-dropdown-menu-item:hover {\n  background: #3C3C3C;\n}\n.lake-zoom-tool .ant-dropdown-menu-item {\n  color: white;\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n.lake-zoom-tool .lake-icon {\n  margin: 3.5px;\n  margin-top: 2px;\n  font-size: 14px;\n  width: 14px;\n  height: 14px;\n}\n.lake-zoom-tool .lake-icon:hover {\n  cursor: pointer;\n}\n.lake-zoom-tool .lake-zoom-tool-precent {\n  vertical-align: top;\n  line-height: 23px;\n}\n.lake-zoom-tool span {\n  display: inline-block;\n  padding: 0;\n  font-size: 12px;\n  height: 26px;\n  text-align: center;\n  user-select: none;\n}\n.lake-zoom-tool .lake-zoom-tool-dropdown:hover {\n  cursor: pointer;\n}\n.lake-zoom-tool:hover {\n  background: #595959;\n}\n.lake-card-block-max .lake-zoom-tool {\n  margin: 8px;\n}\n");var Vp=function(e){x()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C()(this,n)}}(n);function n(){return g()(this,n),t.apply(this,arguments)}return y()(n,[{key:"_setZoom",value:function(e){var t=this.props,n=t.onChange,r=t.minZoom,a=t.maxZoom;e<r&&(e=r),e>a&&(e=a),n(e)}},{key:"_clickZoomIn",value:function(){var e=this.props,t=e.zoomStep,n=e.zoom;this._setZoom(n+t)}},{key:"_clickZoomOut",value:function(){var e=this.props,t=e.zoomStep,n=e.zoom;this._setZoom(n-t)}},{key:"render",value:function(){var e=this,t=this.props.zoom,n=tr.a.createElement(Fn.a,{className:"lake-zoom-tool-menu",onClick:function(t){var n=t.item;e._setZoom(n.props.value)}},tr.a.createElement(Fn.a.Item,{value:"resetView"},vo("回到中心")),tr.a.createElement(Fn.a.Item,{value:.2},"20%"),tr.a.createElement(Fn.a.Item,{value:.5},"50%"),tr.a.createElement(Fn.a.Item,{value:1},"100%"),tr.a.createElement(Fn.a.Item,{value:2},"200%"),tr.a.createElement(Fn.a.Item,{value:"autoFit"},vo("适应画布")));return tr.a.createElement("div",{className:"lake-zoom-tool",ref:function(t){e.zoomToolDOM=t}},tr.a.createElement("span",{className:"lake-icon lake-icon-zoom-out",onClick:this._clickZoomOut.bind(this)}),tr.a.createElement(Vn.a,{className:"lake-zoom-tool-dropdown",overlay:n,placement:"bottomCenter",trigger:["click"],getPopupContainer:function(){return e.zoomToolDOM}},tr.a.createElement("span",{className:"lake-zoom-tool-precent"},Math.round(100*t)+"%")),tr.a.createElement("span",{className:"lake-icon lake-icon-zoom-in",onClick:this._clickZoomIn.bind(this)}))}}]),n}(tr.a.Component);function Up(e){var t=e.diagram,n=Object(er.useState)(null),r=M()(n,2),a=r[0],i=r[1];return Object(er.useEffect)((function(){if(t){i(t.viewport.zoom);var e=zn()((function(){i(t.viewport.zoom)}),32);return t.on("afterviewportchange",e),function(){t.off("afterviewportchange",e)}}}),[a,t]),t?tr.a.createElement(Vp,{zoom:a,onChange:function(e){"autoFit"===e?t.viewport.autoFit():"resetView"===e?t.viewport.focusFirstRoot():t.viewport.setViewport(e)}}):tr.a.createElement("div",null)}function qp(e,t){var n=e.disabled,r=e.title,a=e.key,i=e.hotkey;if("separator"===e.type)return tr.a.createElement("li",{key:"separator-".concat(t),className:"lake-context-menu-separator"});if(e.data)return tr.a.createElement(Fn.a.SubMenu,{key:a,title:r,disabled:n,popupClassName:"lake-context-submenu lake-prevent-card-activated lake-diagram-dialog-popover lake-diagram-prevent-mouse-select"},e.data.map(qp));var o="string"==typeof e.icon?tr.a.createElement("span",{className:"lake-icon lake-icon-".concat(e.icon)}):e.icon;return tr.a.createElement(Fn.a.Item,{key:a,className:"ant-menu-item",disabled:n},o,r,i&&tr.a.createElement("span",{className:"lake-context-menu-hotkey"},i))}function Hp(e){var t=e.coord,n=e.overlayClassName,r=e.diagram,a=e.onClose,i=Object(er.useState)(null),o=M()(i,2),c=o[0],l=o[1],s=Object(er.useRef)();if(Object(er.useEffect)((function(){if(t){var e=s.current.offsetParent.getBoundingClientRect();l([t[0]-e.x,t[1]-e.y])}else l(null)}),[t]),Object(er.useEffect)((function(){function e(){a()}function t(t){t.target.closest(".lake-diagram-dialog-popover")||e()}function n(){e()}return window.addEventListener("mousedown",t),window.addEventListener("scroll",e,{passive:!0}),r.on("afterviewportchange",n),function(){window.removeEventListener("mousedown",t),window.removeEventListener("scroll",e),r.off("afterviewportchange",n)}}),[r,a]),c){var u="lake-diagram-dialog-popover lake-prevent-card-activated lake-diagram-prevent-mouse-select lake-diagram-prevent-mouseleave-reset-focus-point";return tr.a.createElement(Wn.a,Jn()({},e,{visible:!0,overlayClassName:n?n+" "+u:u}),tr.a.createElement("div",{ref:s,style:{position:"absolute",left:"".concat(c[0],"px"),top:"".concat(c[1],"px"),pointerEvents:"none",width:"0px",height:"0px"}}))}return tr.a.createElement("span",{ref:s})}function Wp(e){var t=e.getMenuData,n=e.diagram,r=Object(er.useState)(e.coord),a=M()(r,2),i=a[0],o=a[1],c=Object(er.useState)(t()),l=M()(c,2),s=l[0],u=l[1],d=Object.keys(e).reduce((function(t,n){return n.startsWith("data-")&&(t[n]=e[n]),t}),{});Object(er.useEffect)((function(){function e(e){e.preventDefault(),u(t()),o([e.clientX,e.clientY])}return n.on("contextmenu",e),function(){n.off("contextmenu",e)}}),[n]);var f=tr.a.createElement("div",Jn()({},d,{className:ir()("lake-context-menu",e.className)}),tr.a.createElement(Fn.a,{className:"lake-context-submenu",onClick:function(t){var r=n.viewport.invertClient(i);e.onClick({key:t.key,canvasPoint:r}),o(null)},selectable:!1},s.map(qp)));return tr.a.createElement(Hp,{placement:"rightTop",content:f,visible:!0,overlayClassName:"lake-diagram-context-menu-popover",diagram:n,coord:i,onClose:function(){o(null)}})}function Yp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yp(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Vp.defaultProps={zoom:1,onChange:function(){},minZoom:.2,maxZoom:2,zoomStep:.2},Vp.propTypes={zoom:rr.a.number,onChange:rr.a.func,minZoom:rr.a.number,maxZoom:rr.a.number,zoomStep:rr.a.number},Up.propTypes={diagram:rr.a.object},qp.propTypes={title:rr.a.string,key:rr.a.string,hotkey:rr.a.string,type:rr.a.string,disabled:rr.a.book,icon:rr.a.oneOf([rr.a.string,rr.a.node]),data:rr.a.arrayOf(rr.a.object)},mr("/* stylelint-disable */\n.lake-diagram-dialog-popover .ant-popover-inner-content {\n  padding: 0;\n}\n"),Hp.defaultProps={coord:null,diagram:null,onClose:function(){}},Hp.propTypes={coord:rr.a.array,diagram:rr.a.object,onClose:rr.a.func},mr("/* stylelint-disable */\n/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-context-menu-popover {\n  z-index: 1033;\n}\n.lake-diagram-context-menu-popover .ant-popover-arrow {\n  display: none;\n}\n.lake-context-menu {\n  z-index: 13;\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.13);\n}\n.lake-context-menu,\n.lake-context-submenu {\n  list-style-type: none !important;\n}\n.lake-context-menu li,\n.lake-context-submenu li {\n  margin-left: 0 !important;\n}\n.lake-context-menu .ant-menu,\n.lake-context-submenu .ant-menu {\n  border-radius: 2px;\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n.lake-context-menu .ant-menu .ant-menu-submenu,\n.lake-context-submenu .ant-menu .ant-menu-submenu,\n.lake-context-menu .ant-menu .ant-menu-item,\n.lake-context-submenu .ant-menu .ant-menu-item {\n  height: 32px;\n  line-height: 32px;\n  min-width: 164px;\n}\n.lake-context-menu .ant-menu .ant-menu-item-active,\n.lake-context-submenu .ant-menu .ant-menu-item-active,\n.lake-context-menu .ant-menu .ant-menu-submenu-active,\n.lake-context-submenu .ant-menu .ant-menu-submenu-active {\n  background: #f5f5f5;\n  color: #595959;\n}\n.lake-context-menu .ant-menu .ant-menu-submenu .ant-menu-submenu-title,\n.lake-context-submenu .ant-menu .ant-menu-submenu .ant-menu-submenu-title {\n  height: auto;\n  line-height: inherit;\n  color: #595959;\n}\n.lake-context-menu .ant-menu .ant-menu-submenu .ant-menu-submenu-arrow::before,\n.lake-context-submenu .ant-menu .ant-menu-submenu .ant-menu-submenu-arrow::before,\n.lake-context-menu .ant-menu .ant-menu-submenu .ant-menu-submenu-arrow::after,\n.lake-context-submenu .ant-menu .ant-menu-submenu .ant-menu-submenu-arrow::after {\n  width: 5px;\n  height: 1px;\n  background-image: linear-gradient(90deg, #595959, #595959);\n}\n.lake-context-menu .ant-menu.ant-menu-vertical .ant-menu-item,\n.lake-context-submenu .ant-menu.ant-menu-vertical .ant-menu-item {\n  margin-bottom: 4px;\n}\n.lake-context-menu .ant-menu.ant-menu-vertical .ant-menu-submenu,\n.lake-context-submenu .ant-menu.ant-menu-vertical .ant-menu-submenu {\n  margin-bottom: 4px;\n}\n.lake-context-menu .ant-menu.ant-menu-sub,\n.lake-context-submenu .ant-menu.ant-menu-sub {\n  width: auto;\n}\n.lake-context-menu .ant-menu.ant-menu-sub > li,\n.lake-context-submenu .ant-menu.ant-menu-sub > li {\n  width: auto;\n}\n.lake-context-menu .lake-icon,\n.lake-context-submenu .lake-icon {\n  display: inline-block;\n  margin-right: 0.25em;\n}\n.lake-context-menu-separator {\n  border-bottom: 1px solid #f5f5f5;\n  margin-bottom: 8px;\n}\n.lake-context-menu-hotkey {\n  float: right;\n  color: #BFBFBF;\n  margin-left: 16px;\n}\n"),Wp.defaultProps={},Wp.propTypes={className:rr.a.string,coord:rr.a.object,data:rr.a.arrayOf(rr.a.object),onClick:rr.a.func,diagram:rr.a.object,getMenuData:rr.a.func};var Kp={preventDefault:function(){},clipboardData:{setData:function(e,t){this[e]=t},getData:function(e){return this[e]},files:[]}};window.__lake_diagram_custom_clipboard_event=Kp;var Xp=[{key:"Cut",title:vo("剪切"),hotkey:"⌘+X"},{key:"Copy",title:vo("复制"),hotkey:"⌘+C"},{key:"CopyOtherFormat",title:vo("复制为其它格式"),data:[{key:"CopyDoc",title:vo("语雀文档")},{key:"CopyTable",title:vo("语雀表格")}]},{key:"Paste",title:vo("粘贴"),hotkey:"⌘+V"},{key:"Collapse",title:vo("折叠")},{key:"Expand",title:vo("展开"),hotkey:"⌘+/"},{key:"MindmapAppendParent",title:vo("插入父级"),hotkey:"Option+Tab"},{key:"MindmapInsertRoot",title:vo("插入主节点"),hotkey:"Shift+Enter"},{key:"MindmapAppendSibling",title:vo("插入同级"),hotkey:"Enter"},{key:"MindmapAppendChild",title:vo("插入子级"),hotkey:"Tab"},{key:"ActualSize",title:vo("实际尺寸"),hotkey:"⌘+0"},{key:"FitViewport",title:vo("适应画布"),hotkey:"⌘+Shift+="},{key:"Delete",title:vo("删除"),hotkey:"Delete"},{key:"MindmapRemoveSingleNode",title:vo("删除单个节点"),hotkey:"⌘+Delete"},{key:"BeginInsertLine",title:vo("插入连线"),hotkey:"⌘+L"},{key:"MindmapOpenNote",title:vo("备注")},{key:"BeginEditContent",title:vo("编辑文本")},{key:"separator",type:"separator"}];function $p(e,t){return e.map((function(e,n){var r=Gp(Gp({},Xp[e]),{},{disabled:!!t.command.find(e)&&!t.command.enable(e)});return"separator"===e&&(r.key=e+"-"+n),r}))}function Zp(e){return e.command.enable("Expand")?["Expand"]:["Collapse"]}function Qp(e,t){if(!document.execCommand(e))if("paste"!==e)t.command.execute(e.charAt(0).toUpperCase()+e.slice(1),{e:Kp});else{var n=o.LocalStorageUtil.getItem("lake_diagram_clipboard_data");if(n){n=JSON.parse(n);var r=F.ua.macos?"⌘+V":"Ctrl+V";Bn.a.info(vo("已粘贴当前页面复制的内容，如需粘贴页面外内容请使用 ")+r+vo(" 粘贴")),Kp.clipboardData.setData("text/html",n.html),Kp.clipboardData.setData("text/plain",n.text),t.command.execute("Paste",{e:Kp})}}}function Jp(e){try{Qp("copy",e),Bn.a.success(vo("复制成功！"))}catch(e){Bn.a.error(vo("复制失败！"))}}function eh(e){var t=e.diagram;return tr.a.createElement(Wp,{diagram:t,getMenuData:function(){return function(e){var t=e.selector.selections;return"read"===e.interaction.currentMode?function(e,t){return 0===t.length?$p(["ActualSize","FitViewport"],e):t.every((function(e){return e.isMindmap}))?$p(Zp(e).concat(["Copy"]),e):void 0}(e,t):function(e,t){return 0===t.length?$p(["MindmapInsertRoot","separator","ActualSize","FitViewport","separator","Paste"],e):t.every((function(e){return e.isMindmap}))?$p(["MindmapAppendChild","MindmapAppendParent","MindmapAppendSibling","separator","BeginInsertLine","MindmapOpenNote","separator"].concat(Zp(e)).concat(["separator","Cut","Copy","CopyOtherFormat","Paste","Delete","MindmapRemoveSingleNode"]),e):1===t.length&&t.every((function(e){return e.isLine}))?$p(["BeginEditContent","Delete"],e):$p(["Copy","Cut","Delete"],e)}(e,t)}(t)},onClick:function(e){var n=e.key,r=e.canvasPoint;switch(t.tryFocus(),n){case"Cut":!function(e){try{Qp("cut",e),Bn.a.success(vo("剪切成功！"))}catch(e){Bn.a.error(vo("剪切失败！"))}}(t);break;case"Copy":Jp(t);break;case"CopyDoc":t.settings.copyType="doc",Jp(t),t.settings.copyType="default";break;case"CopyTable":t.settings.copyType="table",Jp(t),t.settings.copyType="default";break;case"Paste":!function(e){try{Qp("paste",e)}catch(e){Bn.a.error(vo("粘贴失败！"))}}(t);break;case"MindmapInsertRoot":t.command.execute("MindmapInsertRoot",{x:r[0],y:r[1]});break;case"BeginInsertLine":Cu(t);break;default:try{t.command.execute(n)}catch(e){throw new Error("unknown command ".concat(n))}}t.tryFocus()}})}Xp=Xp.reduce((function(e,t){var n;return e[t.key]=t,t.hotkey&&(t.hotkey=(n=t.hotkey,F.ua.macos?n:n.replace(/⌘/g,"Ctrl").replace(/Option/g,"Alt"))),e}),{}),eh.propTypes={diagram:rr.a.object};var th=Object.freeze({__proto__:null,Mind:eh});function nh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nh(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}mr("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n/**\n * lake/editor 的卡片容器实现方式会导致文档样式影响卡片编辑器样式\n */\n.lake-diagram-panel-properties ~ div .ant-dropdown-menu-item {\n  margin-left: 0;\n  list-style-type: none;\n}\n.lake-diagram-panel-properties {\n  background-color: #fafafa;\n  border-left: 1px solid #e8e8e8;\n  height: 100%;\n  width: 100%;\n  min-height: 420px;\n  min-width: 212px;\n  max-width: 286px;\n  cursor: default;\n  user-select: none;\n}\n.lake-diagram-panel-properties .multi-properties-selection {\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url(https://gw.alipayobjects.com/zos/bmw-prod/8c02d0c7-9749-4078-b865-6084959df78f.svg);\n}\n.lake-diagram-panel-properties .ant-collapse-header {\n  padding: 16px 16px 8px 34px;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-tabs-nav {\n  width: 100%;\n  margin-bottom: 0px;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-tabs-nav div {\n  width: 100%;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-tabs-nav div .ant-tabs-tab {\n  flex-grow: 1;\n  margin: 0;\n  display: inline-block;\n  text-align: center;\n  border: none;\n  color: #8C8C8C;\n  border-radius: 0;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-tabs-nav div .ant-tabs-tab:hover {\n  color: #262626;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-tabs-nav div .ant-tabs-tab.ant-tabs-tab-active {\n  background-color: #FAFAFA;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-tabs-nav div .ant-tabs-tab.ant-tabs-tab-active .ant-tabs-tab-btn {\n  color: #262626;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-tabs-content {\n  border-top: 1px solid rgba(0, 0, 0, 0.09);\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-tabs-bar {\n  margin: 0;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-collapse {\n  border: none;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-collapse .ant-collapse-header {\n  padding: 8px 16px 8px 34px;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-collapse .ant-collapse-item {\n  padding-top: 8px;\n  border-bottom: none;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-collapse .ant-collapse-item .ant-collapse-content {\n  border: none;\n  background: none;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-collapse .ant-collapse-item .ant-collapse-content .ant-collapse-content-box {\n  margin: 0px 16px;\n  padding: 0px;\n  padding-bottom: 8px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.09);\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-collapse .ant-collapse-item:last-child .ant-collapse-content-box {\n  border-bottom: none;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body .ant-collapse .ant-collapse-item:last-child {\n  border-bottom: none;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body-empty {\n  height: 100%;\n  position: relative;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body-empty .lake-diagram-background-wrapper {\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  margin: auto;\n  padding-bottom: 96px;\n  width: 200px;\n  height: 140px;\n  text-align: center;\n  color: #BFBFBF;\n  line-height: 24px;\n}\n.lake-diagram-panel-properties .lake-diagram-panel-body-empty .lake-diagram-background-wrapper p {\n  margin-bottom: 0;\n}\n.lake-diagram-control {\n  margin-bottom: 8px;\n}\n.lake-diagram-control.disabled .lake-diagram-control-title {\n  color: #BFBFBF;\n}\n.lake-diagram-control.disabled .lake-diagram-control-extra {\n  border-color: #e8e8e8;\n  background: none;\n}\n.lake-diagram-control.disabled .lake-diagram-control-extra > svg {\n  display: none;\n}\n.lake-diagram-control-title {\n  color: #595959;\n  letter-spacing: 0;\n}\n.lake-diagram-control-head {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.lake-diagram-control-extra {\n  border: 1px solid #d9d9d9;\n  border-radius: 4px;\n  width: 92px;\n  min-height: 32px;\n  overflow: hidden;\n  background: #ffffff;\n  cursor: pointer;\n}\n.lake-diagram-control-extra > svg {\n  display: block;\n}\n.lake-diagram-control-body {\n  margin-top: 8px;\n}\n.lake-diagram-control-body .ant-checkbox + span {\n  letter-spacing: 0;\n}\n.lake-diagram-panel-head {\n  border-bottom: 1px solid #e8e8e8;\n  margin-bottom: 12px;\n  padding-bottom: 4px;\n}\n.lake-diagram-panel-head-title {\n  color: #262626;\n  font-size: 14px;\n  font-weight: 500;\n}\n");var ah=Yn.a.TabPane;function ih(e,t){var n="object"===P()(e)?e:l()({},e,t),r={},a=function(e){e.split(".").reduce((function(t,r,a,i){return t[r]=a+1===i.length?n[e]:{}}),r)};for(var i in n)a(i);return r}function oh(e){var t,n,r=e.diagram,a=e.menus,i=e.tabs,o=e.domContainer,c=e.emptyImg,l=Object(er.useState)(e.selections||r.selector.selections.concat([])),s=M()(l,2),u=s[0],d=s[1],f=Object(er.useState)(null),p=M()(f,2),h=p[0],m=p[1];function g(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u;return"function"==typeof t?(t(),void d(B()(u))):e.onChange?e.onChange(ih(t,n),a):(r.command.execute("Update",{id:a,model:ih(t,n),autoSelect:!1}),void d(B()(u)))}return Object(er.useEffect)((function(){Array.isArray(e.selections)&&d(e.selections)}),[e.selections]),Object(er.useEffect)((function(){if(r){var e=zn()((function(){m(null),d(r.selector.selections.concat([]))}),32),t=function(){m("text")};return r.on("afterselect",e),r.contentEditor.on("beginedit",t),function(){r.off("afterselect",e),r.contentEditor.off("beginedit",t)}}}),[r]),tr.a.createElement("div",{className:ir()("lake-diagram-panel lake-diagram-panel-properties"),"data-lake_prevent_click_unselect":"true"},u.length>0?(t=function(e,t,n){var r={},a=[];return e.forEach((function(e,t){var n=e.name,a=e.key;r[a]={name:n,menus:[],index:t,key:a}})),t.forEach((function(e){n.length>0&&e.condition(n)&&(r[e.tabKey].menus.push(e),a.push(e.name))})),Object.values(r).filter((function(e){return e.menus.length>0})).sort((function(e,t){return e.index-t.index}))}(i,a,u),n=a.map((function(e){return e.name})),tr.a.createElement("div",{className:"lake-diagram-panel-body"},tr.a.createElement(Yn.a,{type:"card",activeKey:h||(u.every((function(e){return e.isText}))?"text":t[0].key),onChange:function(e){m(e)}},t.map((function(e){var t=e.name,a=e.menus,i=e.key;return tr.a.createElement(ah,{tab:t,key:i},tr.a.createElement(Gn.a,{defaultActiveKey:n,expandIcon:function(e){return e.isActive?tr.a.createElement(dr,{style:{color:"#595959"}}):tr.a.createElement(hr,{style:{color:"#595959"}})}},a.map((function(e){return tr.a.createElement(Gn.a.Panel,{header:e.name,key:e.name},e.controls.map((function(e,t){return tr.a.createElement(e.Control,rh(rh({},e.props),{},{key:t,path:e.path,title:e.title,selections:u,diagram:r,domContainer:o,onChange:g}))})))}))))}))))):tr.a.createElement("div",{className:"lake-diagram-panel-body lake-diagram-panel-body-empty"},tr.a.createElement("div",{className:"lake-diagram-background-wrapper"},tr.a.createElement("img",{src:c}),tr.a.createElement("p",null,vo("点击选中元素")),tr.a.createElement("p",null,vo("可设置颜色、布局、文字等样式")))))}function ch(e){var t=e.title,n=e.extra,r=e.children,a=e.disabled,i=ir()("lake-diagram-control",e.className,{disabled:a});return tr.a.createElement("div",{className:i},t&&tr.a.createElement("div",{className:"lake-diagram-control-head"},tr.a.createElement("div",{className:"lake-diagram-control-title"},t),n&&tr.a.createElement("div",{className:"lake-diagram-control-extra"},n)),r&&tr.a.createElement("div",{className:"lake-diagram-control-body"},r))}oh.defaultProps={diagram:null,menus:null,tabs:null,emptyImg:""},oh.propTypes={diagram:rr.a.object,menus:rr.a.array,tabs:rr.a.array,domContainer:rr.a.object.isRequired,emptyImg:rr.a.string,selections:rr.a.arrayOf(rr.a.object),onChange:rr.a.func},Object.assign(ch,{get:function(e,t,n){var r=n;if(e.length>0)if((r=e.map((function(e){return t.split(".").reduce((function(e,t){return e?e.isCell&&e.get(t)||e[t]:e}),e)}))).every((function(e){return e===r[0]})))r=r[0];else{if(!r.every((function(e){return"number"==typeof e})))return"multiValue";r.sort(),r=r[r.length-1]}return r}}),ch.propTypes={title:rr.a.string,extra:rr.a.object,children:rr.a.node,className:rr.a.string,disabled:rr.a.bool},mr(".lake-diagram-color-pick-container {\n  background: #ffffff;\n  border: 1px solid #e8e8e8;\n  border-radius: 3px 3px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.12);\n  padding: 5px 0;\n  min-width: 74px;\n}\n");var lh,sh=[];function uh(e){var t=e.color,n=e.disabled,r=e.onClear,a=e.palette,i=Object(er.useState)(!1),c=M()(i,2),l=c[0],s=c[1];return tr.a.createElement(Vn.a,{disabled:n,trigger:["click"],visible:l,onVisibleChange:function(e){s(e),e||sh.includes(lh)||(sh.push(lh),sh.length>10&&(sh=sh.slice(-10)))},overlay:tr.a.createElement("div",{className:"lake-diagram-color-pick-container"},tr.a.createElement(o.ColorPicker,{className:"lake-prevent-card-activated",activeColors:[t],defaultColor:e.defaultColor,onSelect:function(t,n){lh=t,e.onSelect(t,n)},onClear:r,show:l,customColors:sh,CustomPalette:a})),placement:"bottomRight",getPopupContainer:function(){return document.body}},!t||function(e){return!e||"transparent"===e||"rgba(255,255,255,0)"===e.replace(/ /g,"")}(t)?tr.a.createElement("svg",{width:"90",viewBox:"0 0 90 30",xmlns:"http://www.w3.org/2000/svg"},tr.a.createElement("path",{d:"M0 30L90 0",stroke:"#D0021B",fill:"none",fillRule:"evenodd",strokeLinecap:"square"})):e.children)}function dh(e){var t=e.path,n=e.title,r=e.diagram,a=e.selections.filter((function(e){return e.canFill()})),i=0===a.length||a.some((function(e){return e.locked})),o=ch.get(a,t),c="multiValue"===o?"#FFFFFF":o;function l(n){e.onChange(t,n,a)}return tr.a.createElement(ch,{disabled:i,title:n,extra:tr.a.createElement(uh,{disabled:i,color:c,defaultColor:e.defaultColor,onSelect:l,onClear:function(){return l("rgba(0, 0, 0, 0)")},domContainer:e.domContainer,palette:r&&r.palette},tr.a.createElement("div",{className:ir()("lake-diagram-fill",{"multi-properties-selection":"multiValue"===o}),style:{backgroundColor:c}}))})}function fh(e){var t=e.path,n=e.title,r=e.diagram,a=e.selections.filter((function(e){return e.canStroke()})),i=function(e,t){return ch.get(e,t)||(e.length>0&&!e[0].isRoot?ch.get(e,"treeEdge.stroke"):void 0)}(a,t)||"rgba(0, 0, 0, 0)",o=0===a.length||a.some((function(e){return e.locked})),c="multiValue"===i?"#FFFFFF":i;function l(n){e.onChange(t,n,a)}return tr.a.createElement(ch,{disabled:o,title:n||vo("线条颜色"),extra:tr.a.createElement(uh,{disabled:o,color:c,defaultColor:e.defaultColor,onSelect:l,onClear:function(){return l("rgba(0, 0, 0, 0)")},domContainer:e.domContainer,palette:r&&r.palette},tr.a.createElement("div",{className:ir()("lake-diagram-stroke",{"multi-properties-selection":"multiValue"===i}),style:{backgroundColor:c}}))})}function ph(e){var t=e.selections,n=e.path,r=0===t.length||t.some((function(e){return e.locked})),a=t.filter((function(e){return e.canStrokeWidth()})),i=ch.get(a,n);function o(t){var r=Math.min(Math.max(t,1),10);r!==i&&e.onChange(n,r,a)}function c(e){o(parseFloat(e.target.value))}return tr.a.createElement(ch,{className:"lake-diagram-stroke-width-control",disabled:r,title:vo("线条粗细"),extra:tr.a.createElement(Kn.a,{disabled:r,min:1,max:10,value:i,onBlur:c,onPressEnter:c,onStep:o})})}uh.propTypes={color:rr.a.string,defaultColor:rr.a.string,children:rr.a.node,disabled:rr.a.bool,onClear:rr.a.func,onSelect:rr.a.func,palette:rr.a.object},mr("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-control .lake-diagram-fill {\n  border: 4px solid #ffffff;\n  border-radius: 2px;\n  width: 100%;\n  height: 32px;\n}\n.lake-diagram-control.disabled .lake-diagram-fill {\n  display: none;\n}\n"),dh.defaultProps={defaultColor:"transparent",title:vo("填充颜色"),onChange:function(){}},dh.propTypes={defaultColor:rr.a.string,selections:rr.a.arrayOf(rr.a.object).isRequired,path:rr.a.string.isRequired,title:rr.a.string,onChange:rr.a.func.isRequired,domContainer:rr.a.object.isRequired,diagram:rr.a.object},dh.key="FillControl",mr("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-control.disabled .lake-diagram-stroke {\n  display: none;\n}\n.lake-diagram-stroke {\n  border: 4px solid #ffffff;\n  height: 30px;\n}\n"),fh.defaultProps={defaultColor:"transparent",onChange:function(){}},fh.propTypes={defaultColor:rr.a.string,selections:rr.a.arrayOf(rr.a.object).isRequired,path:rr.a.string.isRequired,onChange:rr.a.func.isRequired,domContainer:rr.a.object.isRequired,title:rr.a.string,diagram:rr.a.object},fh.key="StrokeControl",mr("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-stroke-width-control .lake-diagram-control-extra {\n  border: none;\n}\n.lake-diagram-stroke-width-control .ant-input-number {\n  width: 100%;\n}\n"),ph.defaultProps={onChange:function(){}},ph.propTypes={selections:rr.a.arrayOf(rr.a.object).isRequired,path:rr.a.string.isRequired,onChange:rr.a.func.isRequired},ph.key="StrokeWidthControl";var hh,mh,gh,vh=window.getSelection(),yh=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g()(this,e),Object.assign(this,t)}return y()(e,[{key:"updateEditRange",value:function(){var e=this.diagram;try{var t=vh.getRangeAt(0);e.canvasContainer.contains(t.commonAncestorContainer)&&!gh&&(hh=t.cloneRange()),mh=t.cloneRange()}catch(e){return}}},{key:"setRange",value:function(e){e&&(vh.removeAllRanges(),vh.addRange(e))}},{key:"getQuery",value:function(){var e,t=this.selections,n=this.diagram;if(t.length>1){var r=t.filter((function(e){return e.textAreaElement}));r.sort((function(e,t){return e.x-t.x}));var a=r.map((function(e){return e.textAreaElement.htmlContainer}));e=n.contentEditor.query(a[0],null)}else e=n.contentEditor.query();return e}},{key:"change",value:function(e,t){var n,r=this.selections,a=this.diagram,i=this.onChange;if(a.contentEditor.isBegin)hh.commonAncestorContainer!==mh.commonAncestorContainer&&(gh=!0),gh&&this.setRange(hh),a.contentEditor.execCommand(e,t),hh=vh.getRangeAt(0).cloneRange(),n=this.getQuery(),gh=!1;else{var o=r.filter((function(e){return e.textAreaElement})),c=o.map((function(e){return e.textAreaElement.htmlContainer})),l=c.map((function(e){return e.innerHTML}));a.contentEditor.batchEdit(c,e,t);var s=c.map((function(e){return e.innerHTML}));a.command.execute("UpdateCellContent",{id:o,startHTML:l,endHTML:s}),n=this.getQuery()}i(n)}}]),e}();function bh(e){var t=e.disabled,n=cr()(e,["disabled"]),r=Object(er.useState)(e.value),a=M()(r,2),i=a[0],o=a[1],c=Object(er.useState)(!1),l=M()(c,2),s=l[0],u=l[1];return Object(er.useEffect)((function(){o(e.value)}),[e.value]),tr.a.createElement("div",{className:ir()("lake-diagram-dropdown-input",{"lake-diagram-dropdown-input-focus":s})},tr.a.createElement(Hn.a,{disabled:t,value:i,onFocus:function(){u(!0)},onBlur:function(t){parseInt(t.target.value,10)>0&&e.onChange(t),u(!1)},onChange:function(e){o(e.target.value)},onKeyDown:function(t){"Enter"===t.key&&parseInt(t.target.value,10)>0&&(e.onChange(t),t.target.select())}}),tr.a.createElement(Vn.a,Jn()({disabled:t},n),tr.a.createElement(Un.a,null,tr.a.createElement("span",{className:"lake-icon lake-icon-dropdown-arrow"}))))}mr("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-dropdown-input {\n  position: relative;\n  overflow: hidden;\n  border: 1px solid #d9d9d9;\n  border-radius: 4px;\n  transition: border-color 0.3s;\n}\n.lake-diagram-dropdown-input:hover {\n  border-color: #47C479;\n}\n.lake-diagram-dropdown-input-focus {\n  border-color: #47C479;\n  box-shadow: 0 0 0 2px rgba(71, 196, 121, 0.2);\n  outline: none;\n}\n.lake-diagram-dropdown-input .ant-input {\n  padding-right: 24px;\n  border: none;\n}\n.lake-diagram-dropdown-input .ant-dropdown-trigger {\n  position: absolute;\n  top: -1px;\n  right: -1px;\n  padding: 0;\n  border-width: 0 0 0 1px;\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n  width: 24px;\n}\n.lake-diagram-dropdown-input .ant-dropdown-trigger .lake-icon {\n  position: absolute;\n  right: 8px;\n  top: 14px;\n  width: 8px;\n  height: 8px;\n  background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOCIgaGVpZ2h0PSI1IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgb3BhY2l0eT0iLjQ1Ij48cGF0aCBkPSJNMC0yaDh2OEgweiIvPjxwYXRoIGQ9Ik0uNTk2LjU1N2wzLjE1IDMuODIxYS4zMzIuMzMyIDAgMDAuNDk1IDBMNy40MDUuNTU3YS4zMzIuMzMyIDAgMDAtLjI0Ny0uNTUzSC44NDVjLS4yODggMC0uNDQuMzM5LS4yNDkuNTUzeiIgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIi8+PC9nPjwvc3ZnPg==);\n  background-repeat: no-repeat;\n}\n.lake-diagram-dropdown-input .ant-dropdown-trigger .lake-icon::before {\n  content: ' ';\n}\n.lake-diagram-dropdown-input .ant-dropdown-trigger:hover {\n  background: #f5f5f5;\n  border-color: #d9d9d9;\n}\n"),bh.propTypes={value:rr.a.oneOfType([rr.a.string,rr.a.number]),disabled:rr.a.bool,onChange:rr.a.func},mr("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-user-select-none {\n  user-select: none;\n}\n.text-format-control .text-format-font-color {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.text-format-control .text-format-li {\n  margin-bottom: 16px;\n}\n.text-format-control .text-format-li:last-child {\n  margin-bottom: 0;\n}\n.text-format-control .lake-diagram-control-extra {\n  display: inline-block;\n  vertical-align: bottom;\n  margin-left: 8px;\n}\n.text-format-control .lake-diagram-font-color {\n  border: 4px solid #ffffff;\n  border-radius: 2px;\n  width: 100%;\n  height: 30px;\n}\n.text-format-control.disabled .lake-diagram-font-color {\n  display: none;\n}\n.text-format-control .control-body {\n  display: flex;\n  justify-content: space-between;\n  flex-wrap: nowrap;\n}\n.text-format-control .bisu-btn {\n  padding: 0;\n  text-align: center;\n  width: 32px;\n  line-height: 30px;\n  margin-right: 8px;\n}\n.text-format-control .bisu-btn[disabled] {\n  border-color: #e8e8e8;\n}\n.text-format-control .bisu-btn.active {\n  border-color: #47C479;\n}\n.lake-diagram-control-extra.lake-diagrm-font-color-control-extra {\n  width: auto;\n  flex: auto;\n  max-width: 90px;\n}\n.text-format-font-size {\n  max-width: 90px;\n  display: inline-block;\n  flex: auto;\n  height: 32px;\n  line-height: 30px;\n  border: 1px solid #d9d9d9;\n  border-radius: 4px;\n  padding: 0 8px;\n  font-size: 14px;\n  font-weight: 400;\n}\n.text-format-font-size[disabled] {\n  color: #BFBFBF;\n  cursor: not-allowed;\n  border-color: #e8e8e8;\n}\n.text-format-font-size .lake-icon-arrow-down {\n  width: 8px;\n  height: 8px;\n  float: right;\n  margin-top: 12px;\n  background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjhweCIgaGVpZ2h0PSI1cHgiIHZpZXdCb3g9IjAgMCA4IDUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA1Mi41ICg2NzQ2OSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPkdyb3VwIENvcHkgNjwvdGl0bGU+DQogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+DQogICAgPGcgaWQ9IlN5bWJvbHMiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIG9wYWNpdHk9IjAuNDUiPg0KICAgICAgICA8ZyBpZD0idG9vbGJhciIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyOC4wMDAwMDAsIC0xOC4wMDAwMDApIj4NCiAgICAgICAgICAgIDxnIGlkPSJwYXJhZ3JhcGgtc3R5bGUiPg0KICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIyNi4wMDAwMDAsIDQuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJHcm91cC1Db3B5LTYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMi4wMDAwMDAsIDEyLjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZSIgeD0iMCIgeT0iMCIgd2lkdGg9IjgiIGhlaWdodD0iOCI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTAuNTk2MDkzNzUsMi41NTcwMzEyNSBMMy43NDUzMTI1LDYuMzc4MTI1IEMzLjg3NzM0Mzc1LDYuNTI1NzgxMjUgNC4xMDg1OTM3NSw2LjUyNTc4MTI1IDQuMjQwNjI1LDYuMzc4MTI1IEw3LjQwNTQ2ODc1LDIuNTU3MDMxMjUgQzcuNTk2MDkzNzUsMi4zNDI5Njg3NSA3LjQ0NDUzMTI1LDIuMDAzOTA2MjUgNy4xNTc4MTI1LDIuMDAzOTA2MjUgTDAuODQ0NTMxMjUsMi4wMDM5MDYyNSBDMC41NTcwMzEyNSwyLjAwMzkwNjI1IDAuNDA0Njg3NSwyLjM0Mjk2ODc1IDAuNTk2MDkzNzUsMi41NTcwMzEyNSBaIiBpZD0iU2hhcGUiIGZpbGw9IiMwMDAwMDAiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgPC9nPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+) no-repeat;\n}\n.text-format-font-size .lake-icon-arrow-down::before {\n  display: none;\n}\n.text-format-font-size-menu {\n  min-width: 104px;\n}\n.text-format-font-size-menu .ant-dropdown-menu-item {\n  text-align: center;\n  position: relative;\n}\n.text-format-font-size-menu .ant-dropdown-menu-item .lake-icon {\n  position: absolute;\n  left: 12px;\n  top: 9px;\n}\n.text-format-text-align.ant-radio-group {\n  display: flex;\n}\n.text-format-text-align.ant-radio-group .ant-radio-button-wrapper {\n  flex-grow: 1;\n  padding: 0 17.5px;\n  text-align: center;\n}\n.text-format-text-align.ant-radio-group .ant-radio-button-wrapper-disabled {\n  border-color: #e8e8e8;\n}\n.text-format-color {\n  margin-top: 8px;\n  width: 92px;\n  height: 32px;\n  border: 1px solid #d9d9d9;\n  border-radius: 4px;\n  padding: 4px;\n}\n.text-format-color-indicator {\n  width: 100%;\n  height: 100%;\n}\n.text-format-color[disabled] {\n  cursor: not-allowed;\n  border-color: #e8e8e8;\n}\n.text-format-color[disabled]-indicator {\n  display: none;\n}\n");var kh={left:"justifyLeft",center:"justifyCenter",right:"justifyRight",start:"justifyLeft"};function wh(e){var t=e.selections,n=e.diagram,r=0===t.length||t.some((function(e){return e.locked})),a=Object(er.useState)({}),i=M()(a,2),o=i[0],c=i[1],l=new yh({selections:t,diagram:n,onChange:function(e){c(e)}}),s=o.fontSize,u=o.color,d=o.textAlign,f=o.bold,p=o.italic,h=o.strikethrough,m=o.underline;return Object(er.useEffect)((function(){var e=zn()((function(){c(l.getQuery())}),200),t=function(){l.updateEditRange(),e()};return c(l.getQuery()),n.contentEditor.on("selectionchange",t),l.updateEditRange(),function(){n.contentEditor.off("selectionchange",t)}}),[n,t]),tr.a.createElement(ch,{disabled:r,className:"text-format-control"},tr.a.createElement("div",{className:"text-format-li",style:{display:"flex",justifyContent:"space-between"}},tr.a.createElement("span",{style:{display:"flex",flexWrap:"nowrap"}},tr.a.createElement(Un.a,{disabled:r,className:ir()("bisu-btn",{active:f}),onClick:function(){return l.change("bold")}},tr.a.createElement("span",{className:"lake-icon lake-icon-bold"})),tr.a.createElement(Un.a,{disabled:r,className:ir()("bisu-btn",{active:p}),onClick:function(){return l.change("italic")}},tr.a.createElement("span",{className:"lake-icon lake-icon-italic"})),tr.a.createElement(Un.a,{disabled:r,className:ir()("bisu-btn",{active:h}),onClick:function(){return l.change("strikethrough")}},tr.a.createElement("span",{className:"lake-icon lake-icon-strikethrough"})),tr.a.createElement(Un.a,{disabled:r,className:ir()("bisu-btn",{active:m}),onClick:function(){return l.change("underline")}},tr.a.createElement("span",{className:"lake-icon lake-icon-underline"}))),tr.a.createElement(bh,{disabled:r,trigger:["click"],value:s,onChange:function(e){return l.change("fontSize",parseInt(e.target.value))},overlay:tr.a.createElement(Fn.a,{"data-lake_prevent_click_unselect":!0,className:"lake-user-select-none text-format-font-size-menu",selectedKeys:[s&&s.toString()],onClick:function(e){var t=e.key;return l.change("fontSize",parseInt(t))}},[12,14,16,18,22,24,32,36,48,64,92].map((function(e){return tr.a.createElement(Fn.a.Item,{key:e},e===s&&tr.a.createElement("span",{className:"lake-icon lake-icon-success"}),e,"px")}))),placement:"bottomRight",getPopupContainer:function(){return e.domContainer}})),tr.a.createElement("div",{className:"text-format-li text-format-font-color"},vo("文本颜色"),tr.a.createElement("div",{className:"lake-diagram-control-extra lake-diagrm-font-color-control-extra"},tr.a.createElement(uh,{disabled:r,color:u,defaultColor:e.defaultColor,onSelect:zn()((function(e){return l.change("foreColor",e)}),16),domContainer:e.domContainer,palette:n.palette},tr.a.createElement("div",{className:"lake-diagram-font-color",style:{backgroundColor:u}})))),tr.a.createElement(Xn.a.Group,{className:"text-format-li text-format-text-align",disabled:r,defaultValue:"justifyLeft",value:kh[d]},tr.a.createElement(Xn.a.Button,{value:"justifyLeft",onClick:function(){return l.change("justifyLeft")}},tr.a.createElement("span",{className:"lake-icon lake-icon-left"})),tr.a.createElement(Xn.a.Button,{value:"justifyCenter",onClick:function(){return l.change("justifyCenter")}},tr.a.createElement("span",{className:"lake-icon lake-icon-center"})),tr.a.createElement(Xn.a.Button,{value:"justifyRight",onClick:function(){return l.change("justifyRight")}},tr.a.createElement("span",{className:"lake-icon lake-icon-right"}))))}function xh(e){var t=e.selections,n=0===t.length,r=t.filter((function(e){return e.isLine})),a=ch.get(r,"source.marker"),i=ch.get(r,"target.marker");return tr.a.createElement(ch,{className:"lake-diagram-edge-arrow-control lake-diagram-flowchart-properties-edge-arrow",disabled:n,title:vo("线条端点"),extra:tr.a.createElement("div",{style:{display:"flex",width:"100%",justifyContent:"space-between"}},tr.a.createElement(Un.a,{className:ir()({active:"arrow"===a,"lake-arrow-btn":!0}),disabled:n,onClick:function(){e.onChange("source.marker",a?null:"arrow",r)}},tr.a.createElement("span",{className:"lake-icon lake-icon-line-arrow-left"})),tr.a.createElement(Un.a,{className:ir()({active:"arrow"===i,"lake-arrow-btn":!0,"lake-target-arrow-btn":!0}),disabled:n,onClick:function(){e.onChange("target.marker",i?null:"arrow",r)}},tr.a.createElement("span",{className:"lake-icon lake-icon-line-arrow-right"})))})}function _h(e){var t=Object(er.useRef)(),n=e.width,r=e.height,a=e.shape,i=a&&cd.find((function(e){return e.name===a}));return Object(er.useEffect)((function(){if(t.current&&i){var e=new Af({stencil:i,width:n,height:r}).rendererElement;e.setAttribute("stroke","#595959"),e.setAttribute("fill","#ffffff"),Array.from(t.current.children,(function(e){return e.remove()})),t.current.appendChild(e)}}),[t,n,r,i]),i?tr.a.createElement("svg",{ref:t,width:n,height:r,viewBox:[0,0,n,r].join(" ")}):null}function Ch(e){var t=e.selections,n=0===t.length,r=t.filter((function(e){return e.isVertex})),a=ch.get(r,e.path);return tr.a.createElement(ch,{className:"lake-diagram-vertex-shape-control",disabled:n,title:vo("形状"),extra:tr.a.createElement(Vn.a,{disabled:n,overlay:tr.a.createElement(Fp,{onSelect:function(t){var n=t.key;e.onChange(e.path,n,r)},groups:e.groups}),placement:"bottomRight",trigger:["click"]},tr.a.createElement(Un.a,null,a&&tr.a.createElement(_h,{shape:a,width:40,height:40})))})}function Eh(e){var t=e.selections,n=0===t.length,r=t.filter((function(e){return e.isEdge})),a=ch.get(r,"shape");return tr.a.createElement(ch,{className:"lake-diagram-edge-shape-control lake-diagram-flowchart-properties-edge-shape",disabled:n,title:vo("线条类型"),extra:tr.a.createElement(Xn.a.Group,{disabled:n,value:a,onChange:function(t){e.onChange("shape",t.target.value,r)}},tr.a.createElement(Xn.a.Button,{value:"elbow"},tr.a.createElement("span",{className:"lake-icon lake-icon-elbow-line"})),tr.a.createElement(Xn.a.Button,{value:"straight"},tr.a.createElement("span",{className:"lake-icon lake-icon-straight-line"})))})}function Oh(e){var t=e.diagram;return tr.a.createElement("div",{className:"lake-diagram-properties-alignment"},tr.a.createElement(Xn.a.Group,{onChange:function(e){t.command.execute(e.target.value)},value:null},tr.a.createElement(Xn.a.Button,{value:"AlignLeft",disabled:!t.command.enable("AlignLeft")},tr.a.createElement("span",{className:"lake-icon lake-icon-align-left"})),tr.a.createElement(Xn.a.Button,{value:"AlignHCenter",disabled:!t.command.enable("AlignHCenter")},tr.a.createElement("span",{className:"lake-icon lake-icon-align-h-center"})),tr.a.createElement(Xn.a.Button,{value:"AlignRight",disabled:!t.command.enable("AlignRight")},tr.a.createElement("span",{className:"lake-icon lake-icon-align-right"})),tr.a.createElement(Xn.a.Button,{value:"AlignTop",disabled:!t.command.enable("AlignTop")},tr.a.createElement("span",{className:"lake-icon lake-icon-align-top"})),tr.a.createElement(Xn.a.Button,{value:"AlignVCenter",disabled:!t.command.enable("AlignVCenter")},tr.a.createElement("span",{className:"lake-icon lake-icon-align-v-center"})),tr.a.createElement(Xn.a.Button,{value:"AlignBottom",disabled:!t.command.enable("AlignBottom")},tr.a.createElement("span",{className:"lake-icon lake-icon-align-bottom"}))))}function Sh(e){var t=e.diagram,n=e.selections,r=t.getCells(),a=n.some((function(e){return e.locked}))||1===n.length&&n[0].getZIndex()===r.length-1,i=n.some((function(e){return e.locked}))||1===n.length&&0===n[0].getZIndex();function o(r){e.onChange((function(){t.command.execute(r.target.value,{cells:n})}))}return tr.a.createElement("div",{className:"lake-diagram-properties-z-index"},tr.a.createElement("div",{className:"lake-diagram-properties-z-index-btn-group"},tr.a.createElement(Xn.a.Group,{onChange:o,value:null},tr.a.createElement(Xn.a.Button,{value:"ToFront",disabled:a},tr.a.createElement("span",{className:"lake-icon lake-icon-to-front"})),tr.a.createElement(Xn.a.Button,{value:"ToBack",disabled:i},tr.a.createElement("span",{className:"lake-icon lake-icon-to-back"}))),tr.a.createElement("div",{className:"lake-diagram-properties-z-index-label-group"},tr.a.createElement("span",{className:"lake-diagram-properties-z-index-label"},vo("置顶")),tr.a.createElement("span",{className:"lake-diagram-properties-z-index-label"},vo("置底")))),tr.a.createElement("div",{className:"lake-diagram-properties-z-index-btn-group"},tr.a.createElement(Xn.a.Group,{onChange:o,value:null},tr.a.createElement(Xn.a.Button,{value:"Forward",disabled:a},tr.a.createElement("span",{className:"lake-icon lake-icon-forward"})),tr.a.createElement(Xn.a.Button,{value:"Backward",disabled:i},tr.a.createElement("span",{className:"lake-icon lake-icon-backward"}))),tr.a.createElement("div",{className:"lake-diagram-properties-z-index-label-group"},tr.a.createElement("span",{className:"lake-diagram-properties-z-index-label"},vo("上移")),tr.a.createElement("span",{className:"lake-diagram-properties-z-index-label"},vo("下移")))))}function Rh(e){var t=e.selections,n=0===t.length||t.some((function(e){return e.locked})),r={width:vo("宽度"),height:vo("高度")};function a(t,n){n>=1&&e.onChange(t,n)}return tr.a.createElement(ch,{className:"lake-diagram-size-control",disabled:n},Object.keys(r).map((function(e){return tr.a.createElement("div",{className:"lake-diagram-size-control-".concat(e),key:e},tr.a.createElement(Kn.a,{disabled:n,min:1,max:2560,value:Math.round(ch.get(t,e)),onBlur:function(t){return a(e,parseFloat(t.target.value))},onPressEnter:function(t){return a(e,parseFloat(t.target.value))},onStep:function(t){return a(e,t)}}),r[e])})))}function Dh(e){var t=e.path,n=e.selections,r=0===n.length||n.some((function(e){return e.locked}));return tr.a.createElement(ch,{className:"lake-diagram-ratio-control",disabled:r},tr.a.createElement($n.a,{disabled:r,checked:ch.get(n,t),onChange:function(n){e.onChange(t,n.target.checked)}},vo("保持宽高比")))}function Ah(e){var t=e.selections,n=e.onChange,r=0===t.length||t.some((function(e){return e.locked}));return tr.a.createElement(ch,{className:"lake-diagram-reset-size-control",disabled:r},tr.a.createElement(Un.a,{disabled:r,onClick:function(){var e=t[0];e.isImage?n({width:e.image.naturalWidth,height:e.image.naturalHeight}):e.isVertex&&n({width:e.stencil.width,height:e.stencil.height})}},vo("原始大小")))}function Th(e){var t=e.selections,n=0===t.length||t.some((function(e){return e.locked}));function r(t,n){e.onChange(t,n)}return tr.a.createElement(ch,{className:"lake-diagram-position-control",disabled:n},["x","y"].map((function(e){return tr.a.createElement("div",{className:"lake-diagram-position-control-".concat(e),key:e},tr.a.createElement(Kn.a,{disabled:n,value:Math.round(ch.get(t,e)),onBlur:function(t){return r(e,parseFloat(t.target.value))},onPressEnter:function(t){return r(e,parseFloat(t.target.value))},onStep:function(t){return r(e,t)}}),e.toUpperCase())})))}function Ph(e){return""===e?e:"".concat(Math.round(e),"°")}function jh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.replace("°","");return""===t?t:parseInt(t,10)%360||0}function Mh(e){var t=e.selections,n=0===t.length||t.some((function(e){return null==e.rotate}))||t.some((function(e){return e.locked}));function r(t){isFinite(t)&&e.onChange("rotate",t)}function a(e){r(parseFloat(e.target.value))}return tr.a.createElement(ch,{className:"lake-diagram-rotate-control",disabled:n},vo("旋转角度"),tr.a.createElement(Kn.a,{disabled:n,min:0,max:360,formatter:Ph,parser:jh,value:ch.get(t,"rotate"),onBlur:a,onPressEnter:a,onStep:r}))}function Nh(e){return""===e?e:"".concat(Math.round(100*e),"%")}function Lh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.replace("%","");return""===t?t:Math.min(Math.max(parseFloat(t)/100||0,0),1)}function Ih(e){var t=e.selections,n=0===t.length||t.some((function(e){return e.locked})),r=parseFloat(ch.get(t,"opacity"))||1,a=$()((function(t){isFinite(t)&&e.onChange("opacity",t)}),16);function i(e){a(Lh(e.target.value))}return Object(er.useEffect)((function(){return function(){return a.cancel()}})),tr.a.createElement(ch,{className:"lake-diagram-opacity-control",disabled:n},tr.a.createElement(Zn,{disabled:n,min:0,max:1,step:.01,tooltipVisible:!1,value:r,onChange:a}),tr.a.createElement(Kn.a,{disabled:n,min:0,max:1,step:.01,value:r,formatter:Nh,parser:Lh,onBlur:i,onPressEnter:i,onStep:a}))}wh.defaultProps={defaultColor:"#262626"},wh.propTypes={defaultColor:rr.a.string,selections:rr.a.arrayOf(rr.a.object).isRequired,onChange:rr.a.func.isRequired,domContainer:rr.a.object.isRequired,diagram:rr.a.object.isRequired},wh.key="TextFormat",mr("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-flowchart-properties-edge-arrow .lake-diagram-control-extra {\n  border: none;\n  background-color: rgba(255, 255, 255, 0);\n}\n.lake-diagram-flowchart-properties-edge-arrow .lake-diagram-control-extra button {\n  padding: 0 13px;\n}\n.lake-diagram-flowchart-properties-edge-arrow .lake-diagram-control-extra button.active {\n  border: 1px solid #47C479;\n}\n"),xh.defaultProps={onChange:function(){}},xh.propTypes={selections:rr.a.arrayOf(rr.a.object).isRequired,onChange:rr.a.func.isRequired,domContainer:rr.a.object.isRequired},xh.key="LineArrowControl",mr("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-vertex-shape-control .lake-diagram-control-extra {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.lake-diagram-vertex-shape-control .lake-diagram-control-extra .ant-btn {\n  background: none;\n  border: none;\n  height: 40px;\n  width: 100%;\n  padding: 0;\n}\n"),_h.propTypes={width:rr.a.number,height:rr.a.number,shape:rr.a.string},Ch.defaultProps={path:"shape",groups:["flowchart"],onChange:function(){}},Ch.propTypes={selections:rr.a.arrayOf(rr.a.object).isRequired,path:rr.a.string.isRequired,groups:rr.a.array,onChange:rr.a.func.isRequired},Ch.key="VertexShapeControl",mr(".lake-diagram-flowchart-properties-edge-shape .lake-diagram-control-extra {\n  border: none;\n  background-color: rgba(255, 255, 255, 0);\n}\n.lake-diagram-flowchart-properties-edge-shape .lake-diagram-control-extra button {\n  padding: 0 13px;\n}\n"),Eh.defaultProps={path:"shape",onChange:function(){}},Eh.propTypes={selections:rr.a.arrayOf(rr.a.object).isRequired,onChange:rr.a.func.isRequired,domContainer:rr.a.object.isRequired,diagram:rr.a.object},Eh.key="EdgeShapeControl",mr(".lake-diagram-properties-alignment {\n  margin-top: 8px;\n  margin-bottom: 16px;\n}\n.lake-diagram-properties-alignment .ant-radio-group {\n  display: flex;\n}\n.lake-diagram-properties-alignment .ant-radio-group label {\n  flex-grow: 1;\n  padding: 0;\n  text-align: center;\n}\n"),Oh.defaultProps={},Oh.propTypes={diagram:rr.a.object.isRequired,selections:rr.a.arrayOf(rr.a.object).isRequired},Oh.key="AlignControl",mr(".lake-diagram-properties-z-index {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 8px;\n}\n.lake-diagram-properties-z-index .ant-radio-button-wrapper {\n  padding: 0 14px;\n}\n.lake-diagram-properties-z-index .lake-diagram-properties-z-index-label {\n  display: inline-block;\n  width: 50%;\n  text-align: center;\n}\n.lake-diagram-properties-z-index .lake-diagram-properties-z-index-btn-group {\n  width: calc(50% - 4px);\n}\n.lake-diagram-properties-z-index .lake-diagram-properties-z-index-btn-group .ant-radio-group {\n  display: flex;\n}\n.lake-diagram-properties-z-index .lake-diagram-properties-z-index-btn-group .ant-radio-group label {\n  text-align: center;\n  flex-grow: 1;\n  flex-shrink: 1;\n}\n"),Sh.defaultProps={onChange:function(){}},Sh.propTypes={onChange:rr.a.func.isRequired,diagram:rr.a.object.isRequired,selections:rr.a.arrayOf(rr.a.object).isRequired},Sh.key="ZIndexControl",mr(".lake-diagram-size-control .lake-diagram-control-body {\n  display: flex;\n  justify-content: space-between;\n}\n.lake-diagram-size-control-width,\n.lake-diagram-size-control-height {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: calc(50% - 4px);\n}\n.lake-diagram-size-control-width .ant-input-number,\n.lake-diagram-size-control-height .ant-input-number {\n  width: 100%;\n}\n"),Rh.propTypes={selections:rr.a.array,onChange:rr.a.func},Dh.defaultProps={path:"constraints.proportion"},Dh.propTypes={path:rr.a.string,selections:rr.a.array,onChange:rr.a.func},mr(".lake-diagram-reset-size-control .lake-diagram-control-body {\n  margin-top: 12px;\n}\n.lake-diagram-reset-size-control .ant-btn {\n  width: 100%;\n}\n"),Ah.propTypes={selections:rr.a.array,onChange:rr.a.func},mr(".lake-diagram-position-control .lake-diagram-control-body {\n  display: flex;\n  justify-content: space-between;\n}\n.lake-diagram-position-control-x,\n.lake-diagram-position-control-y {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: calc(50% - 4px);\n}\n.lake-diagram-position-control-x .ant-input-number,\n.lake-diagram-position-control-y .ant-input-number {\n  width: 100%;\n}\n"),Th.propTypes={selections:rr.a.array,onChange:rr.a.func},mr(".lake-diagram-rotate-control .lake-diagram-control-body {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n"),Mh.propTypes={selections:rr.a.arrayOf(rr.a.object),onChange:rr.a.func},mr(".lake-diagram-opacity-control .lake-diagram-control-body {\n  display: flex;\n  justify-content: space-between;\n}\n.lake-diagram-opacity-control .lake-diagram-control-body .ant-slider {\n  flex: 1 0 auto;\n  margin-left: 0;\n  margin-right: 16px;\n}\n"),Ih.propTypes={selections:rr.a.arrayOf(rr.a.object),onChange:rr.a.func},mr(".lake-diagram-stroke-style-item {\n  width: 92px;\n  height: 32px;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.lake-diagram-stroke-style-selected {\n  line-height: 0;\n}\n.lake-diagram-stroke-style-selected .lake-diagram-stroke-style-selected-item {\n  width: 70px;\n  display: inline-block;\n}\n.lake-diagram-stroke-style-selected .lake-properties-stroke-style-dropdown-icon {\n  width: 10x;\n  height: 10px;\n  float: right;\n  margin-top: 11px;\n  margin-right: 10px;\n  color: #8C8C8C;\n}\n.lake-diagram-stroke-style-selected .lake-diagram-properties-stroke-style {\n  width: 100%;\n  height: 100%;\n}\n");var zh={none:"https://gw.alipayobjects.com/zos/bmw-prod/5e3dbea7-f3c3-418f-91de-cfbcb825343c.svg",dash:"https://gw.alipayobjects.com/zos/bmw-prod/3d7118e9-1bac-465d-acb9-cc0766ece25e.svg"};function Bh(e){var t=e.selections,n=e.path,r=0===t.length,a=t.filter((function(e){return e.canStrokeStyle()})),i=ch.get(a,n);return tr.a.createElement(ch,{className:"lake-diagram-properties-stroke-style",disabled:r,title:vo("线条样式"),extra:tr.a.createElement(Vn.a,{disabled:r,trigger:["click"],overlay:tr.a.createElement(Fn.a,{"data-lake_prevent_click_unselect":!0,onClick:function(t){var r=t.key;e.onChange(n,"none"===r?null:r,a)}},tr.a.createElement(Fn.a.Item,{className:"lake-diagram-stroke-style-item","test-id":"lake-diagram-stroke-style-item-none",key:"none",style:{backgroundImage:"url(".concat(zh.none,")")}}),tr.a.createElement(Fn.a.Item,{className:"lake-diagram-stroke-style-item","test-id":"lake-diagram-stroke-style-item-dash",key:"dash",style:{backgroundImage:"url(".concat(zh.dash,")")}})),placement:"bottomRight"},tr.a.createElement("div",{className:"lake-diagram-stroke-style-selected"},tr.a.createElement("span",{className:"lake-diagram-stroke-style-item lake-diagram-stroke-style-selected-item",style:{backgroundImage:"url(".concat(zh[i||"none"],")")}}),tr.a.createElement(dr,{className:"lake-properties-stroke-style-dropdown-icon",style:{color:"#8C8C8C",fontSize:"10px"}})))})}function Fh(e){var t=e.diagram,n=e.domContainer,r=e.selections,a={tabs:[{name:vo("样式"),key:"style"},{name:vo("文本"),key:"text"},{name:vo("排列"),key:"arrangement"}],menus:[{name:vo("填充"),tabKey:"style",condition:function(e){return e.some((function(e){return e.isVertex}))},controls:[{path:"shape",Control:Ch},{path:"fill.color",Control:dh}]},{name:vo("线条/边框"),tabKey:"style",condition:function(e){return e.some((function(e){return e.isVertex}))&&e.some((function(e){return e.isEdge}))},controls:[{path:"stroke.color",Control:fh},{path:"stroke.width",Control:ph},{Control:Eh},{Control:xh}]},{name:vo("线条"),tabKey:"style",condition:function(e){return e.every((function(e){return e.isEdge}))},controls:[{path:"stroke.color",Control:fh},{path:"stroke.width",Control:ph},{Control:Eh},{Control:Bh},{Control:xh}]},{name:vo("边框"),tabKey:"style",condition:function(e){return e.every((function(e){return e.isVertex}))},controls:[{path:"stroke.color",Control:fh},{path:"stroke.width",Control:ph},{Control:Bh}]},{name:vo("不透明度"),tabKey:"style",condition:function(e){return e.length>0&&e.every((function(e){return null!=e.opacity}))},controls:[{Control:Ih}]},{name:vo("文本"),tabKey:"text",condition:function(e){return e.length>0},controls:[{Control:wh}]},{name:vo("排列"),tabKey:"arrangement",condition:function(e){return e.length>0},controls:[{Control:Oh},{Control:Sh}]},{name:vo("大小"),tabKey:"arrangement",condition:function(e){return e.length>0&&e.every((function(e){return e.isVertex}))},controls:[{Control:Rh},{Control:Dh},{Control:Ah}]},{name:vo("位置"),tabKey:"arrangement",condition:function(e){return e.length>0&&e.every((function(e){return e.isVertex}))},controls:[{Control:Th}]},{name:vo("旋转"),tabKey:"arrangement",condition:function(e){return e.length>0&&e.every((function(e){return null!=e.rotate}))},controls:[{Control:Mh}]}],diagram:t,domContainer:n,emptyImg:"https://gw.alipayobjects.com/zos/bmw-prod/209ef531-e33b-4e55-8273-5b56b6df44be.svg",selections:r};return tr.a.createElement(oh,a)}Bh.defaultProps={onChange:function(){},path:"stroke.style"},Bh.propTypes={selections:rr.a.arrayOf(rr.a.object).isRequired,onChange:rr.a.func.isRequired,path:rr.a.string.isRequired},Bh.key="StrokeStyleControl",Fh.defaultProps={diagram:null,domContainer:null},Fh.propTypes={diagram:rr.a.object,domContainer:rr.a.object.isRequired,selections:rr.a.arrayOf(rr.a.object)},mr("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-control.lake-diagram-layout-control .lake-diagram-control-extra {\n  padding: 0;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n}\n.lake-diagram-layout-current {\n  background: #ffffff;\n  width: 100%;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  border-radius: 4px;\n}\n.lake-diagram-layout-current .lake-diagram-layout-thumb:hover {\n  background-color: transparent;\n}\n.lake-diagram-layout-dropdown.ant-dropdown {\n  width: 210px;\n  border-radius: 4px;\n  border: 1px solid #e8e8e8;\n  display: flex;\n  flex-wrap: wrap;\n  background: #ffffff;\n  justify-content: space-between;\n  padding: 8px;\n}\n.lake-diagram-layout-dropdown.ant-dropdown.ant-dropdown-hidden {\n  display: none;\n}\n.lake-diagram-layout-thumb {\n  width: 64px;\n  height: 40px;\n  border-radius: 2px;\n  background-position: center;\n  background-repeat: no-repeat;\n  cursor: pointer;\n}\n.lake-diagram-layout-thumb.indent-left {\n  background-image: url(https://gw.alipayobjects.com/zos/basement_prod/29050582-81d2-4ebf-af6d-affd9f4e72f4.svg);\n}\n.lake-diagram-layout-thumb.indent-right {\n  background-image: url(https://gw.alipayobjects.com/zos/basement_prod/5ffa7165-b948-4718-b79c-978d6fdf3eef.svg);\n}\n.lake-diagram-layout-thumb.standard-up {\n  background-image: url(https://gw.alipayobjects.com/zos/basement_prod/fce2388a-fbb5-4a2b-8e53-c343f05daaca.svg);\n}\n.lake-diagram-layout-thumb.standard-down {\n  background-image: url(https://gw.alipayobjects.com/zos/basement_prod/4d3338d4-8878-4aec-9058-a0512175a0d8.svg);\n}\n.lake-diagram-layout-thumb.standard-left {\n  background-image: url(https://gw.alipayobjects.com/zos/basement_prod/c2d55088-e202-4069-9bce-23b4c33e3a61.svg);\n}\n.lake-diagram-layout-thumb.standard-right {\n  background-image: url(https://gw.alipayobjects.com/zos/basement_prod/33549767-d955-42be-871e-1c23d434f59e.svg);\n}\n.lake-diagram-layout-thumb.standard-horizontal {\n  background-image: url(https://gw.alipayobjects.com/zos/basement_prod/f0d5a243-0f85-46c9-b2a6-775bf477ba06.svg);\n}\n.lake-diagram-layout-thumb:hover,\n.lake-diagram-layout-thumb.selected {\n  background-color: #fafafa;\n}\n");var Vh=["standard-horizontal","standard-right","standard-left","standard-up","standard-down","indent-right","indent-left"];function Uh(e){var t=e.selections.filter((function(e){return e.isMindmap&&e.isRoot})),n=function(e){if(0!==e.length){var t=[];return e.forEach((function(e){var n,r=ch.get([e],"layout"),a=r.type,i=r.direction,o=r.quadrants;0===i[0]?n=i[1]>0?"down":"up":0===i[1]&&(n=o>1?"horizontal":i[0]>0?"right":"left"),t.push("".concat(a,"-").concat(n))})),t.every((function(e){return e===t[0]}))?t[0]:"multiValue"}}(t),r=Object(er.useState)(!1),a=M()(r,2),i=a[0],o=a[1];function c(n){e.onChange("layout",function(e){var t,n=e.split("-"),r=M()(n,2),a=r[0],i=r[1],o=1;return"indent"===a?t=["right"===i?1:-1,0]:"horizontal"===i?(t=[1,0],o=2):t={up:[0,-1],right:[1,0],down:[0,1],left:[-1,0]}[i],{type:a,direction:t,quadrants:o}}(n),t)}return tr.a.createElement(ch,{className:"lake-diagram-layout-control",title:vo("布局"),extra:tr.a.createElement(Vn.a,{overlay:tr.a.createElement(tr.a.Fragment,null,Vh.map((function(e){return tr.a.createElement("div",{key:e,"data-lake_prevent_click_unselect":"true",className:ir()("lake-diagram-layout-thumb",e,{selected:e===n}),onClick:function(){o(!i),c(e)}})}))),overlayClassName:"lake-diagram-layout-dropdown",placement:"bottomRight",onClick:function(){o(!i)},visible:i,onVisibleChange:function(e){o(e)},trigger:["click"],getPopupContainer:function(){return e.domContainer}},tr.a.createElement("div",{className:ir()("lake-diagram-layout-current",{"multi-properties-selection":"multiValue"===n})},tr.a.createElement("div",{className:"lake-diagram-layout-thumb ".concat(n)})))})}function qh(e){var t=e.selections,n=Object(er.useState)(!1),r=M()(n,2),a=r[0],i=r[1],o=0===t.length;return Object(er.useEffect)((function(){var e=ch.get(t,"model.width");i("multiValue"===e?"multiValue":null!=e)}),[t]),tr.a.createElement(ch,{disabled:o},tr.a.createElement($n.a,{disabled:o,indeterminate:"multiValue"===a,checked:!!a,onChange:function(n){var r=n.target.checked?ch.get(t,"width"):null;i(n.target.checked),e.onChange({width:r,height:null})},"data-testid":"checkbox-node-width"},vo("手动设置节点尺寸")))}Uh.defaultProps={onChange:function(){}},Uh.propTypes={domContainer:rr.a.object,selections:rr.a.arrayOf(rr.a.object).isRequired,onChange:rr.a.func.isRequired},Uh.key="LayoutControl",qh.propTypes={selections:rr.a.arrayOf(rr.a.object).isRequired,onChange:rr.a.func.isRequired},qh.key="NodeWidthControl",mr("/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-border-shape-body {\n  border: 1px solid #e8e8e8;\n  background: #ffffff;\n  display: flex;\n  align-items: center;\n  width: 100%;\n  height: 88px;\n  padding: 8px;\n  border-radius: 4px;\n}\n.lake-diagram-border-shape {\n  width: 72px;\n  height: 72px;\n  border-radius: 2px;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  margin-right: 8px;\n  cursor: pointer;\n}\n.lake-diagram-border-shape:hover,\n.lake-diagram-border-shape.selected {\n  background-color: #f5f5f5;\n}\n.lake-diagram-border-shape[data-shape=\"line\"]:before {\n  content: ' ';\n  display: block;\n  width: 40px;\n  height: 2px;\n  background-color: #595959;\n}\n.lake-diagram-border-shape[data-shape=\"rect\"]:before {\n  content: ' ';\n  display: block;\n  width: 48px;\n  height: 28px;\n  border-radius: 4px;\n  border: 2px solid #595959;\n}\n.lake-diagram-border-shape[data-shape=\"capsule\"]:before {\n  content: ' ';\n  display: block;\n  width: 48px;\n  height: 28px;\n  border-radius: 14px;\n  border: 2px solid #595959;\n}\n");var Hh=[{key:"line"},{key:"rect"},{key:"capsule"}];function Wh(e){var t=e.selections,n=ch.get(t,"border.shape","line")||null,r=t.length>0&&t.some((function(e){return e.isRoot}))?Hh.filter((function(e){return"line"!==e.key})):Hh,a=r.find((function(e){return e.key===n}))?n:"";return tr.a.createElement(ch,{disabled:0===t.length,title:vo("节点形状")},tr.a.createElement("div",{className:"lake-diagram-border-shape-body"},r.map((function(t){var n=t.key;return tr.a.createElement("div",{key:n,"data-shape":n,className:ir()("lake-diagram-border-shape",{selected:a===n}),onClick:function(){return function(t){t!==a&&e.onChange("border.shape",t)}(n)}})}))))}function Yh(e){var t=e.selections.filter((function(e){return e.canStroke()})),n=0===t.length,r=ch.get(t,"border.stroke-width");function a(n){var a=Math.min(Math.max(n,1),10);a!==r&&e.onChange("border.stroke-width",a,t)}function i(e){a(parseFloat(e.target.value))}return tr.a.createElement(ch,{className:"lake-diagram-border-stroke-width-control",disabled:n,title:vo("边框粗细"),extra:tr.a.createElement(Kn.a,{disabled:n,min:1,max:10,value:r,onBlur:i,onPressEnter:i,onStep:a})})}function Gh(e){var t=e.selections.filter((function(e){return e.isMindmap&&e.isRoot})),n=Object(er.useState)(!1),r=M()(n,2),a=r[0],i=r[1];return Object(er.useEffect)((function(){i(ch.get(t,"rainbow"))}),[t]),tr.a.createElement(ch,null,tr.a.createElement($n.a,{indeterminate:"multiValue"===a,checked:!!a,onChange:function(n){var r=n.target.checked;i(r),e.onChange("rainbow",r,t)}},vo("彩虹分支")))}function Kh(e){var t=e.selections,n=e.diagram,r=ch.get(t,"treeEdge.stroke","#A287E1"),a="multiValue"===r?"#FFFFFF":r;return tr.a.createElement(ch,{disabled:0===t.length,title:vo("分支颜色"),extra:tr.a.createElement(uh,{disabled:0===t.length,color:a,onSelect:function(t){e.onChange("treeEdge.stroke",t)},domContainer:e.domContainer,palette:n&&n.palette},tr.a.createElement("div",{className:ir()("lake-diagram-tree-edge-stroke",{"multi-properties-selection":"multiValue"===r})},tr.a.createElement("svg",{width:"64",viewBox:"0 0 64 12",xmlns:"http://www.w3.org/2000/svg"},tr.a.createElement("path",{d:"M64 2c-27.42 0-35.012 8-64 8",stroke:"multiValue"===r?"none":r,strokeWidth:"4",fill:"none",fillRule:"evenodd"}))))})}function Xh(e){var t=e.selections.filter((function(e){return e.isMindmap&&e.isRoot})),n=ch.get(t,"tapered");return tr.a.createElement(ch,null,tr.a.createElement($n.a,{indeterminate:"multiValue"===n,checked:!!n,onChange:function(n){var r=n.target.checked;e.onChange("tapered",r,t)}},vo("分支线条宽度逐渐变细")))}function $h(e){var t=e.selections,n=e.onChange,r=Sr(t.map((function(e){return e.root}))),a=ch.get(r,"treeEdge.shape",null);a="multiValue"===a?null:void 0===a?"curve":a;var i=0===t.length;return tr.a.createElement(ch,{className:"lake-diagram-properties-edge-shape",disabled:i,title:vo("分支类型"),extra:tr.a.createElement(Xn.a.Group,{disabled:i,value:a,onChange:function(e){var t="curve"===e.target.value?null:e.target.value;n("treeEdge.shape",t,r)}},tr.a.createElement(Xn.a.Button,{value:"curve"},tr.a.createElement("span",{className:"lake-icon lake-icon-mind-tree-edge-curve"})),tr.a.createElement(Xn.a.Button,{value:"polyline"},tr.a.createElement("span",{className:"lake-icon lake-icon-mind-tree-edge-straight"})))})}function Zh(e){var t=e.diagram,n=e.domContainer,r={tabs:[{name:vo("样式"),key:"style"},{name:vo("文本"),key:"text"}],menus:[{name:vo("节点"),tabKey:"style",condition:function(e){return e.some((function(e){return e.isMindmap}))},controls:[{Control:Wh},{path:"border.fill",Control:dh},{path:"border.stroke",title:vo("边框颜色"),Control:fh},{Control:Yh},{Control:qh}]},{name:vo("分支"),tabKey:"style",condition:function(e){return e.every((function(e){return e.isMindmap&&e.isRoot}))},controls:[{Control:Gh},{Control:Xh},{Control:$h}]},{name:vo("分支"),tabKey:"style",condition:function(e){return e.every((function(e){return e.isMindmap&&!e.isRoot}))},controls:[{Control:Kh},{Control:$h}]},{name:vo("分支"),tabKey:"style",condition:function(e){return e.every((function(e){return e.isMindmap}))&&e.some((function(e){return!e.isRoot}))&&e.some((function(e){return e.isRoot}))},controls:[{Control:Kh},{Control:$h},{Control:Gh},{Control:Xh}]},{name:vo("结构"),tabKey:"style",condition:function(e){return e.some((function(e){return e.isMindmap&&e.isRoot}))},controls:[{Control:Uh}]},{name:vo("文本"),tabKey:"text",condition:function(e){return e.length>0},controls:[{Control:wh}]},{name:vo("连接线"),tabKey:"style",condition:function(e){return e.some((function(e){return e.isLine}))>0},controls:[{path:"stroke.color",Control:fh},{path:"stroke.width",Control:ph},{Control:Bh},{Control:xh}]}],diagram:t,domContainer:n,emptyImg:"https://gw.alipayobjects.com/zos/bmw-prod/67092b02-26ae-4e8b-8629-855a5ecd5326.svg"};return tr.a.createElement(oh,r)}Wh.propTypes={selections:rr.a.arrayOf(rr.a.object).isRequired,onChange:rr.a.func.isRequired},Wh.key="BorderShapeControl",mr("/* stylelint-disable */\n.lake-diagram-border-stroke-width-control .ant-input-number {\n  border: none;\n  width: 100%;\n}\n.lake-diagram-border-stroke-width-control .ant-input-number.ant-input-number-disabled {\n  background-color: #fafafa;\n}\n"),Yh.defaultProps={onChange:function(){}},Yh.propTypes={selections:rr.a.arrayOf(rr.a.object).isRequired,onChange:rr.a.func.isRequired},Yh.key="BorderStrokeWidthControl",Gh.propTypes={selections:rr.a.arrayOf(rr.a.object).isRequired,onChange:rr.a.func},Gh.key="TreeEdgeRainbowControl",mr(".lake-diagram-tree-edge-stroke {\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n}\n"),Kh.defaultProps={onChange:function(){}},Kh.propTypes={selections:rr.a.arrayOf(rr.a.object).isRequired,onChange:rr.a.func.isRequired,domContainer:rr.a.object.isRequired,diagram:rr.a.object},Kh.key="TreeEdgeStrokeControl",Xh.propTypes={selections:rr.a.arrayOf(rr.a.object).isRequired,onChange:rr.a.func},Xh.key="TreeEdgeTaperedControl",mr(".lake-diagram-properties-edge-shape .lake-diagram-control-extra {\n  border: none;\n  background-color: rgba(255, 255, 255, 0);\n}\n.lake-diagram-properties-edge-shape .lake-diagram-control-extra button {\n  padding: 0 13px;\n}\n"),$h.defaultProps={onChange:function(){}},$h.propTypes={selections:rr.a.arrayOf(rr.a.object).isRequired,onChange:rr.a.func.isRequired},$h.key="TreeEdgeShapeControl",Zh.defaultProps={diagram:null,domContainer:null},Zh.propTypes={diagram:rr.a.object,domContainer:rr.a.object.isRequired},mr('/*\n* ============================================\n* SITE COLOR PALETTE\n* Please be careful to modify this file.\n* ============================================\n*/\n.lake-diagram-heading-control {\n  margin-bottom: 12px;\n}\n.lake-diagram-heading-control .ant-dropdown-trigger {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n  height: 66px;\n  border: 1px solid #e8e8e8;\n  border-radius: 4px;\n  background: #ffffff;\n  padding: 16px;\n}\n.lake-diagram-heading-control.disabled .ant-dropdown-trigger {\n  background: #f5f5f5;\n  color: #BFBFBF;\n}\n.lake-diagram-heading-control.disabled [data-heading] {\n  color: #BFBFBF;\n}\n.lake-diagram-heading-control .ant-dropdown-menu-item,\n.lake-diagram-heading-menu .ant-dropdown-menu-item {\n  padding: 7px 16px;\n}\n.lake-diagram-heading-control [data-heading],\n.lake-diagram-heading-menu [data-heading] {\n  line-height: 1.35;\n}\n.lake-diagram-heading-control [data-heading="title"],\n.lake-diagram-heading-menu [data-heading="title"] {\n  font-size: 32px;\n  color: #262626;\n}\n.lake-diagram-heading-control [data-heading="title-small"],\n.lake-diagram-heading-menu [data-heading="title-small"] {\n  font-size: 26px;\n  color: #262626;\n}\n.lake-diagram-heading-control [data-heading="subtitle"],\n.lake-diagram-heading-menu [data-heading="subtitle"] {\n  font-size: 20px;\n  color: #262626;\n}\n.lake-diagram-heading-control [data-heading="body"],\n.lake-diagram-heading-menu [data-heading="body"] {\n  font-size: 16px;\n}\n');var Qh={title:{fontSize:92,label:vo("大标题")},"title-small":{fontSize:64,label:vo("小标题")},subtitle:{fontSize:48,label:vo("副标题")},body:{fontSize:32,label:vo("正文")}};function Jh(e){var t=e.diagram,n=e.selections,r=Object(er.useState)({fontSize:32}),a=M()(r,2),i=a[0],o=a[1],c=Object.keys(Qh).find((function(e){return i.fontSize===Qh[e].fontSize}))||"body",l=0===n.length||n.some((function(e){return e.locked})),s=new yh({selections:n,diagram:t,onChange:function(e){o(e)}});Object(er.useEffect)((function(){function e(){s.updateEditRange(),o(s.getQuery())}return o(s.getQuery()),t.contentEditor.on("selectionchange",e),s.updateEditRange(),function(){t.contentEditor.off("selectionchange",e)}}),[t,n]);var u=tr.a.createElement(Fn.a,{className:"lake-diagram-heading-menu lake-user-select-none","data-lake_prevent_click_unselect":"true",onClick:function(e){var t=e.key;s.change("fontSize",Qh[t].fontSize)}},Object.keys(Qh).map((function(e){return tr.a.createElement(Fn.a.Item,{key:e,"data-heading":e},Qh[e].label)})));return tr.a.createElement(ch,{className:"lake-diagram-heading-control",disabled:l},tr.a.createElement(Vn.a,{overlay:u,disabled:l,trigger:["click"],getPopupContainer:function(){return e.domContainer}},tr.a.createElement("div",null,tr.a.createElement("span",{"data-heading":c},Qh[c].label),tr.a.createElement("span",{className:"lake-icon lake-icon-dropdown-arrow"}))))}function em(e){var t=e.selections,n=e.diagram,r=t.filter((function(e){return e.canMove()})).length<3;return tr.a.createElement("div",{className:"lake-diagram-properties-distribute"},tr.a.createElement(Xn.a.Group,{onChange:function(e){n.command.execute(e.target.value)},value:null},tr.a.createElement(Xn.a.Button,{value:"DistributeHorizontally",disabled:r},tr.a.createElement("span",{className:"lake-icon lake-icon-horizontally"})),tr.a.createElement(Xn.a.Button,{value:"DistributeVertically",disabled:r},tr.a.createElement("span",{className:"lake-icon lake-icon-vertically"}))),tr.a.createElement("div",{className:"lake-diagram-properties-distribute-label-group"},tr.a.createElement("span",{className:"lake-diagram-properties-distribute-label"},vo("水平分布")),tr.a.createElement("span",{className:"lake-diagram-properties-distribute-label"},vo("垂直分布"))))}function tm(e){var t=e.diagram,n=e.domContainer,r=e.selections,a={tabs:[{name:vo("样式"),key:"style"},{name:vo("文本"),key:"text"},{name:vo("排列"),key:"arrangement"}],menus:[{name:vo("填充"),tabKey:"style",condition:function(e){return e.some((function(e){return e.isFlowchart}))},controls:[{path:"shape",props:{groups:["basic","flowchart"]},Control:Ch},{path:"fill.color",Control:dh}]},{name:vo("线条/边框"),tabKey:"style",condition:function(e){return e.some((function(e){return e.isVertex}))&&e.some((function(e){return e.isEdge}))},controls:[{path:"stroke.color",Control:fh},{path:"stroke.width",Control:ph},{Control:Eh},{Control:xh}]},{name:vo("线条"),tabKey:"style",condition:function(e){return e.every((function(e){return e.isEdge}))},controls:[{path:"stroke.color",Control:fh},{path:"stroke.width",Control:ph},{Control:Eh},{Control:xh}]},{name:vo("边框"),tabKey:"style",condition:function(e){return e.every((function(e){return e.isVertex}))},controls:[{path:"stroke.color",Control:fh},{path:"stroke.width",Control:ph}]},{name:vo("不透明度"),tabKey:"style",condition:function(e){return e.length>0&&e.every((function(e){return null!=e.opacity}))},controls:[{Control:Ih}]},{name:vo("文本"),tabKey:"text",condition:function(e){return e.length>0&&e.some((function(e){return e.isVertex}))&&!e.some((function(e){return e.isImage}))},controls:[{Control:Jh},{Control:wh}]},{name:vo("排列"),tabKey:"arrangement",condition:function(e){return e.length>0},controls:[{Control:Oh},{Control:em},{Control:Sh}]},{name:vo("大小"),tabKey:"arrangement",condition:function(e){return e.length>0&&e.every((function(e){return e.isVertex}))},controls:[{Control:Rh},{Control:Dh},{Control:Ah}]},{name:vo("位置"),tabKey:"arrangement",condition:function(e){return e.length>0&&e.every((function(e){return e.isVertex}))},controls:[{Control:Th}]},{name:vo("旋转"),tabKey:"arrangement",condition:function(e){return e.length>0&&e.every((function(e){return null!=e.rotate}))},controls:[{Control:Mh}]}],diagram:t,domContainer:n,emptyImg:"https://gw.alipayobjects.com/zos/bmw-prod/209ef531-e33b-4e55-8273-5b56b6df44be.svg",selections:r};return tr.a.createElement(oh,a)}function nm(e){var t=e.diagram,n=e.domContainer,r=e.selections,a=e.onChange;if(r.every((function(e){return e.isCell})))return tr.a.createElement(tm,{diagram:t,domContainer:n,selections:r});var i={tabs:[{name:vo("幻灯片布局"),key:"layout"}],menus:[{name:vo("背景"),tabKey:"layout",condition:function(){return!0},controls:[{path:"fill.color",title:vo("背景颜色"),Control:dh}]}],diagram:t,domContainer:n,selections:r,onChange:a};return tr.a.createElement(oh,i)}Jh.propTypes={diagram:rr.a.object,selections:rr.a.array,domContainer:rr.a.object,onChange:rr.a.func},mr(".lake-diagram-properties-distribute {\n  margin-bottom: 8px;\n}\n.lake-diagram-properties-distribute .ant-radio-group {\n  width: 100%;\n}\n.lake-diagram-properties-distribute .ant-radio-button-wrapper {\n  width: 50%;\n  text-align: center;\n}\n.lake-diagram-properties-distribute-label-group {\n  width: 100%;\n}\n.lake-diagram-properties-distribute-label {\n  display: inline-block;\n  width: 50%;\n  text-align: center;\n}\n"),em.propTypes={selections:rr.a.arrayOf(rr.a.object),diagram:rr.a.object},tm.propTypes={diagram:rr.a.object,domContainer:rr.a.object.isRequired,selections:rr.a.arrayOf(rr.a.object)},nm.defaultProps={diagram:null,domContainer:null},nm.propTypes={diagram:rr.a.object,domContainer:rr.a.object.isRequired,selections:rr.a.arrayOf(rr.a.object),onChange:rr.a.func};var rm=Object.freeze({__proto__:null,Flowchart:Fh,Mindmap:Zh,Show:nm});function am(e){var t,n=e.diagram,r=e.readonly,a=Object(er.useState)(null),i=M()(a,2),o=i[0],c=i[1],l=Object(er.useState)(""),s=M()(l,2),u=s[0],d=s[1],f=Object(er.useState)(null),p=M()(f,2),h=p[0],m=p[1],g=Object(er.useRef)();return Object(er.useEffect)((function(){function e(e){var t=e.cell,n=t.getKeyShape().getBoundingClientRect();c(null),c([n.x+n.width,n.y+n.height/2]),m(t),d(t.note.content)}return n.on("opennote",e),function(){n.off("opennote",e)}}),[n,o,c,m,u]),Object(er.useEffect)((function(){setTimeout((function(){var e=document.querySelector("textarea.lake-diagram-note-area");if(e){var t=e.value.length;e.focus(),e.setSelectionRange(t,t)}}),16)}),[o,g.current,h]),t=r?tr.a.createElement("div",{className:"lake-diagram-note-area"},u):tr.a.createElement("textarea",{className:"lake-diagram-note-area",value:u,onChange:function(e){var t=e.target.value;d(t)},ref:g}),tr.a.createElement(Hp,{placement:"right",content:t,visible:!0,overlayClassName:"lake-diagram-note-popover",diagram:n,coord:o,onClose:function(){o&&h&&(m(null),c(null),h.note.content!==u&&n.command.execute("Update",{id:h,model:{note:u?{content:u}:null}}))}})}function im(e){return tr.a.createElement(am,e)}function om(e){return tr.a.createElement(am,Jn()({},e,{readonly:!0}))}mr("/* stylelint-disable */\n.lake-diagram-note-popover {\n  z-index: 1033;\n}\n.lake-diagram-note-popover .lake-diagram-note-area {\n  font-size: 12px;\n  border: none;\n  resize: none;\n  outline: none;\n  box-shadow: none;\n  width: 294px;\n  height: 128px;\n  padding: 16px 18px;\n  overflow-x: hidden;\n  overflow-y: auto;\n  word-break: break-word;\n}\n"),am.defaultProps={diagram:null,readonly:!1},am.propTypes={diagram:rr.a.object,readonly:rr.a.bool},im.defaultProps={diagram:null},im.propTypes={diagram:rr.a.object},om.defaultProps={diagram:null},om.propTypes={diagram:rr.a.object};var cm=Object.freeze({__proto__:null,Editor:im,Reader:om}),lm=Object.freeze({__proto__:null,Properties:rm,Note:cm,Toolbar:jp,LinkEditor:Bp,ShapeOverlay:Fp,Dropdown:Dp,ZoomTool:Up,ContextMenu:th})},,,,function(e,t,n){"use strict";e.exports={WORKFLOW_EVENT:{error:"error",message:"message",change:"change",saveTitle:"saveTitle",miniExpand:"miniExpand",editableChange:"editableChange",collabUsersChange:"collabUsersChange",editModeChange:"editModeChange",docStatusChange:"docStatusChange",afterSaveSuccess:"afterSaveSuccess",afterPublishSuccess:"afterPublishSuccess",started:"started"},ACTION:{save:"save",publish:"publish"},SAVE_TYPE:{FORCE:1,AUTO:2,USER_SAVE:3,USER_PUBLISH:4,USER_SAVE_AS_VERSION:5},ERROR_CODE:{INIT_FAILED:"INIT_FAILED",SAVE_FAILED:"SAVE_FAILED",PUBLISH_FAILED:"PUBLISH_FAILED",DOC_DELETED:"DOC_DELETED",DOC_NOT_EXIST:"DOC_NOT_EXIST",DOC_SAVE_CONFLICT:"DOC_SAVE_CONFLICT",CACHE_FAILED:"CACHE_FAILED",DISCONNECTED:"DISCONNECTED",CONNECT_COLLAB_SERVER_FAILED:"CONNECT_COLLAB_SERVER_FAILED",LOCK_FAILED:"LOCK_FAILED",LOCKED_BY_COLLAB:"LOCKED_BY_COLLAB",LOCKED_BY_SELF:"LOCKED_BY_SELF",LOCKED_BY_SELF_FORCE:"LOCKED_BY_SELF_FORCE",LOCKED_BY_DESKTOP:"LOCKED_BY_DESKTOP",LOCKED_BY_OTHER:"LOCKED_BY_OTHER",LOCKED_BY_VERSIONCONFLICT:"LOCKED_BY_VERSIONCONFLICT"},MESSAGE:{DOC_PUBLISHED:"DOC_PUBLISHED",DOC_DELETED:"DOC_DELETED",DOC_CACHE_SAVED:"DOC_CACHE_SAVED",SAVE_FAILED:"SAVE_FAILED",SAVING:"SAVING",PUBLISHING:"PUBLISHING",DISCONNECT:"DISCONNECT",UNREADY:"UNREADY",CACHE_FAILED:"CACHE_FAILED",RENDER_BIG_DOCUMENT:"RENDER_BIG_DOCUMENT",BUZY:"BUZY",CLEAR:"CLEAR",EDIT_DISABLE:"EDIT_DISABLE"},DOC_STATUS:{loading:"loading",loaded:"loaded",saving:"saving",saved:"saved",publishing:"publishing",published:"published",changed:"changed",deleted:"deleted"},NET_STATUS:{connecting:"connecting",offline:"offline",connected:"connected"},DOC_DOMAIN:{DOCLET:"Doclet",DOC:"Doc"},DOC_VERSION:{ORIGIN:{manual:1,cache:2}},DOCLET_CATEGORY:{BOOK_INDEX_PAGE:"book_index_page",NOTE:"note",ORG_BOARD:"org_board"},SUMMARY_NODES_COUNT:50,BIG_DOCUMENT_BLOCK_COUNT:200,EDIT_MODE:{LOCK:"lock",COLLAB:"collab",OFFLINE:"offline"},EDIT_SCENE:{NOTE:"note",DESKTOP:"desktop",WEB:"web"}}},,,,,function(e,t,n){"use strict";n(1832);var r=n(499),a=n(0),i=n.n(a),o=n(2),c=n.n(o),l=n(7),s=n.n(l),u=n(52),d=n.n(u);n(492);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var v=i.a.forwardRef((function(e,t){var n=e.className,a=g(e,["className"]),o=s()("larkui-form",n);return i.a.createElement(r.a,m({className:o,ref:t},a))}));v.propTypes=p(p({},r.a.CardProps),{},{className:c.a.string}),d()(v,r.a),v.Item=i.a.forwardRef((function(e,t){var n=e.className,a=g(e,["className"]),o=s()("larkui-form-item",n);return i.a.createElement(r.a.Item,m({className:o,ref:t},a,{colon:!1}))})),t.a=v},,,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";e.exports={MODE:{pac:"PAC",http:"HTTP"},TYPE:{http:"HTTP",socks4:"SOCKS4",socks5:"SOCKS5"}}},,,,,,,,,,,,,function(e,t,n){},,,function(e,t){var n,r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];t.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},t.getSymbolTotalCodewords=function(e){return r[e]},t.getBCHDigit=function(e){for(var t=0;0!==e;)t++,e>>>=1;return t},t.setToSJISFunction=function(e){if("function"!=typeof e)throw new Error('"toSJISFunc" is not a valid function.');n=e},t.isKanjiModeEnabled=function(){return void 0!==n},t.toSJIS=function(e){return n(e)}},function(e,t,n){var r=n(388),a=n(389);t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!r.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},t.getBestModeForData=function(e){return a.testNumeric(e)?t.NUMERIC:a.testAlphanumeric(e)?t.ALPHANUMERIC:a.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},t.isValid=function(e){return e&&e.bit&&e.ccBits},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+e)}}(e)}catch(e){return n}}},function(e,t,n){},,,,,,,,,function(e,t,n){},,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(220);i.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}();var a=i.TYPED_ARRAY_SUPPORT?2147483647:1073741823;function i(e,t,n){return i.TYPED_ARRAY_SUPPORT||this instanceof i?"number"==typeof e?l(this,e):function(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer)return function(e,t,n,r){if(n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");var a;a=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);i.TYPED_ARRAY_SUPPORT?a.__proto__=i.prototype:a=s(e,a);return a}(e,t,n,r);if("string"==typeof t)return function(e,t){var n=0|d(t),r=c(e,n),a=r.write(t);a!==n&&(r=r.slice(0,a));return r}(e,t);return function(e,t){if(i.isBuffer(t)){var n=0|o(t.length),r=c(e,n);return 0===r.length||t.copy(r,0,0,n),r}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(a=t.length)!=a?c(e,0):s(e,t);if("Buffer"===t.type&&Array.isArray(t.data))return s(e,t.data)}var a;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}(this,e,t,n):new i(e,t,n)}function o(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function c(e,t){var n;return i.TYPED_ARRAY_SUPPORT?(n=new Uint8Array(t)).__proto__=i.prototype:(null===(n=e)&&(n=new i(t)),n.length=t),n}function l(e,t){var n=c(e,t<0?0:0|o(t));if(!i.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)n[r]=0;return n}function s(e,t){for(var n=t.length<0?0:0|o(t.length),r=c(e,n),a=0;a<n;a+=1)r[a]=255&t[a];return r}function u(e,t){var n;t=t||1/0;for(var r=e.length,a=null,i=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!a){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&i.push(239,191,189);continue}a=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&(t-=3)>-1&&i.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function d(e){return i.isBuffer(e)?e.length:"undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer)?e.byteLength:("string"!=typeof e&&(e=""+e),0===e.length?0:u(e).length)}i.TYPED_ARRAY_SUPPORT&&(i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1})),i.prototype.write=function(e,t,n){void 0===t||void 0===n&&"string"==typeof t?(n=this.length,t=0):isFinite(t)&&(t|=0,isFinite(n)?n|=0:n=void 0);var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");return function(e,t,n,r){return function(e,t,n,r){for(var a=0;a<r&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}(u(t,e.length-n),e,n,r)}(this,e,t,n)},i.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),i.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=i.prototype;else{var a=t-e;n=new i(a,void 0);for(var o=0;o<a;++o)n[o]=this[o+e]}return n},i.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var a,o=r-n;if(this===e&&n<t&&t<r)for(a=o-1;a>=0;--a)e[a+t]=this[a+n];else if(o<1e3||!i.TYPED_ARRAY_SUPPORT)for(a=0;a<o;++a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},i.prototype.fill=function(e,t,n){if("string"==typeof e){if("string"==typeof t?(t=0,n=this.length):"string"==typeof n&&(n=this.length),1===e.length){var r=e.charCodeAt(0);r<256&&(e=r)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=i.isBuffer(e)?e:new i(e),c=o.length;for(a=0;a<n-t;++a)this[a+t]=o[a%c]}return this},i.concat=function(e,t){if(!r(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c(null,0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var a=l(null,t),o=0;for(n=0;n<e.length;++n){var s=e[n];if(!i.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(a,o),o+=s.length}return a},i.byteLength=d,i.prototype._isBuffer=!0,i.isBuffer=function(e){return!(null==e||!e._isBuffer)},e.exports.alloc=function(e){var t=new i(e);return t.fill(0),t},e.exports.from=function(e){return new i(e)}},function(e,t,n){"use strict";n(392);var r=n(138),a=n(0),i=n.n(a),o=n(2),c=n.n(o),l=n(7),s=n.n(l),u=n(52),d=n.n(u);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var v=i.a.forwardRef((function(e,t){var n=e.className,a=e.overlayClassName,o=g(e,["className","overlayClassName"]);return i.a.createElement(r.a,m({className:s()(n,"larkui-dropdown-trigger"),overlayClassName:s()(a,"larkui-dropdown"),ref:t},o))}));v.propTypes=p(p({},r.a.DropDownProps),{},{className:c.a.string,overlayClassName:c.a.string}),d()(v,r.a);var y=v;function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var C=i.a.forwardRef((function(e,t){var n=e.className,a=e.overlayClassName,o=e.overlay,c=e.children,l=_(e,["className","overlayClassName","overlay","children"]),u=o?o.props:{};return i.a.createElement(r.a.Button,x({className:s()(n,"larkui-dropdown-trigger"),overlay:i.a.cloneElement(o,{className:s()(u.className,a,"larkui-dropdown-menu")}),ref:t},l),c)}));C.propTypes=k(k({},r.a.DropdownButtonProps),{},{className:c.a.string,overlayClassName:c.a.string,overlay:c.a.node,children:c.a.any}),d()(C,r.a.Button);var E=C,O=n(131),S=n.n(O),R=n(183),D=n.n(R),A=n(182),T=n(30),P=n(56);function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var M=function(e){var t=e.className,n=e.overlayClassName,r=e.currentValue,a=e.menus,o=e.disableMenus,c=void 0===o?[]:o,l=e.disableTip,u=e.handleChange,d=e.triggerPrefix,f=a.find((function(e){return e.value===r}));return i.a.createElement(y,j({},e,{trigger:["click"],className:s()("larkui-dropdown-selector",t),overlayClassName:s()("larkui-dropdown-selector-menu",n),overlay:i.a.createElement(T.a,{selectedKeys:[r]},a.map((function(e){var t=c.some((function(t){return t.value===e.value})),n=i.a.createElement("span",{className:"larkui-dropdown-selector-option"},i.a.createElement("span",{className:"larkui-dropdown-selector-option-name"},e.name),e.value===r&&i.a.createElement("span",{className:"larkui-dropdown-selector-option-checked"},i.a.createElement(D.a,null)));return i.a.createElement(T.a.Item,{key:e.value,disabled:t,onClick:function(){u(e.value)}},t&&l?i.a.createElement(P.a,{title:l,placement:"right"},n):n)})),e.externalActions&&i.a.createElement(T.a.Divider,null),e.externalActions&&e.externalActions())}),i.a.createElement("span",{className:"larkui-dropdown-selector-trigger"},i.a.createElement("span",null,d),i.a.createElement("span",null,f?f.name:Object(A.a)("请选择")),i.a.createElement("span",{className:"larkui-dropdown-selector-trigger-icon"},i.a.createElement(S.a,null))))};M.propTypes={className:c.a.string,overlayClassName:c.a.string,currentValue:c.a.string.isRequired,menus:c.a.arrayOf(c.a.shape({name:c.a.string.isRequired,value:c.a.string.isRequired})).isRequired,disableMenus:c.a.array,disableTip:c.a.node,handleChange:c.a.func.isRequired,externalActions:c.a.func,triggerPrefix:c.a.node};var N=M;y.Selector=N,y.Button=E;t.a=y},,,,,,,,,,,,,,,function(e,t,n){},,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"BrowserRouter",(function(){return d})),n.d(t,"HashRouter",(function(){return f})),n.d(t,"Link",(function(){return y})),n.d(t,"NavLink",(function(){return w}));var r=n(70);n.d(t,"MemoryRouter",(function(){return r.a})),n.d(t,"Prompt",(function(){return r.b})),n.d(t,"Redirect",(function(){return r.c})),n.d(t,"Route",(function(){return r.d})),n.d(t,"Router",(function(){return r.e})),n.d(t,"StaticRouter",(function(){return r.f})),n.d(t,"Switch",(function(){return r.g})),n.d(t,"generatePath",(function(){return r.i})),n.d(t,"matchPath",(function(){return r.j})),n.d(t,"useHistory",(function(){return r.k})),n.d(t,"useLocation",(function(){return r.l})),n.d(t,"useParams",(function(){return r.m})),n.d(t,"useRouteMatch",(function(){return r.n})),n.d(t,"withRouter",(function(){return r.o}));var a=n(86),i=n(0),o=n.n(i),c=n(59),l=(n(2),n(34)),s=n(71),u=n(83),d=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).history=Object(c.a)(t.props),t}return Object(a.a)(t,e),t.prototype.render=function(){return o.a.createElement(r.e,{history:this.history,children:this.props.children})},t}(o.a.Component);var f=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).history=Object(c.b)(t.props),t}return Object(a.a)(t,e),t.prototype.render=function(){return o.a.createElement(r.e,{history:this.history,children:this.props.children})},t}(o.a.Component);var p=function(e,t){return"function"==typeof e?e(t):e},h=function(e,t){return"string"==typeof e?Object(c.c)(e,null,null,t):e},m=function(e){return e},g=o.a.forwardRef;void 0===g&&(g=m);var v=g((function(e,t){var n=e.innerRef,r=e.navigate,a=e.onClick,i=Object(s.default)(e,["innerRef","navigate","onClick"]),c=i.target,u=Object(l.default)({},i,{onClick:function(e){try{a&&a(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||c&&"_self"!==c||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return u.ref=m!==g&&t||n,o.a.createElement("a",u)}));var y=g((function(e,t){var n=e.component,a=void 0===n?v:n,i=e.replace,c=e.to,d=e.innerRef,f=Object(s.default)(e,["component","replace","to","innerRef"]);return o.a.createElement(r.h.Consumer,null,(function(e){e||Object(u.default)(!1);var n=e.history,r=h(p(c,e.location),e.location),s=r?n.createHref(r):"",v=Object(l.default)({},f,{href:s,navigate:function(){var t=p(c,e.location);(i?n.replace:n.push)(t)}});return m!==g?v.ref=t||d:v.innerRef=d,o.a.createElement(a,v)}))})),b=function(e){return e},k=o.a.forwardRef;void 0===k&&(k=b);var w=k((function(e,t){var n=e["aria-current"],a=void 0===n?"page":n,i=e.activeClassName,c=void 0===i?"active":i,d=e.activeStyle,f=e.className,m=e.exact,g=e.isActive,v=e.location,w=e.sensitive,x=e.strict,_=e.style,C=e.to,E=e.innerRef,O=Object(s.default)(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return o.a.createElement(r.h.Consumer,null,(function(e){e||Object(u.default)(!1);var n=v||e.location,i=h(p(C,n),n),s=i.pathname,S=s&&s.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),R=S?Object(r.j)(n.pathname,{path:S,exact:m,sensitive:w,strict:x}):null,D=!!(g?g(R,n):R),A=D?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(f,c):f,T=D?Object(l.default)({},_,{},d):_,P=Object(l.default)({"aria-current":D&&a||null,className:A,style:T,to:i},O);return b!==k?P.ref=t||E:P.innerRef=E,o.a.createElement(y,P)}))}))},,,,,function(e,t,n){"use strict";var r=n(216),a=n(639),i=n(141),o=n(217),c=n(109),l=n(13);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t,n,r,a,i,o){try{var c=e[i](o),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){f(i,r,a,o,c,"next",e)}function c(e){f(i,r,a,o,c,"throw",e)}o(void 0)}))}}function h(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var g={isDocInToc:function(e,t,n){return"Column"===t.layout||"Card"===t.layout||!(!e||!Array.isArray(e))&&!!e.find((function(e){return e.url===n.slug||e.id===n.id}))},limitExceeded:function(e){return e&&e.length>=o.MAX_NODES_COUNT},shouldPublishToCatalog:function(e,t,n){return(!n||!n.tag)&&(!this.limitExceeded(e)&&!this.isDocInToc(e,t,n))},shouldShowToc:function(e){return!!e&&["Book","Custom"].includes(e.layout)},parseCatalogVersions:function(e){if(!e)return[];var t,n=[],a=h(e);try{for(a.s();!(t=a.n()).done;){var i=t.value,o=i.item.toc_yml;if(o)try{var c=Object(r.ymlToToc)(o),l=c[0];l&&l.published&&(i.meta=c[0],i.toc=c.slice(1),i.catalog_tree=Object(r.generateTreeFromYml)(o),n.push(i))}catch(e){}}}catch(e){a.e(e)}finally{a.f()}return n},parseVersion:function(e){if(e){try{var t,n=e.item.toc_yml,a=Object(r.ymlToToc)(n),i=h(a);try{for(i.s();!(t=i.n()).done;){var o=t.value;o.key=o.uuid}}catch(e){i.e(e)}finally{i.f()}var c=a[0];c?(e.meta=c,e.toc=a.slice(1)):e.toc=a,e.catalog_tree=Object(r.generateTreeByTocItems)(a)}catch(e){}return e}},updateNode:function(e,t){return p(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:if(!e.should_manually_create_uid){n.next=6;break}return n.next=5,i.webProxy.catalogNodes.ensureUpdateTocYml({book_id:e.id,toc_yml:Object(r.tocToYml)(e.toc)});case 5:e.should_manually_create_uid=!1;case 6:return n.prev=6,n.next=9,i.webProxy.catalogNodes.update(u({book_id:e.id,format:"list"},t),{ignoreGlobalMessage:!0,useOriginResp:!0});case 9:a=n.sent,n.next=16;break;case 12:throw n.prev=12,n.t0=n.catch(6),"limit_exceeded"===n.t0.code&&(n.t0.message=__("目录超过最大限制，建议拆分知识库")),n.t0;case 16:return n.abrupt("return",u({catalog_tree:Object(r.generateTreeByTocItems)(a.data),toc:a.data},a.meta));case 17:case"end":return n.stop()}}),n,null,[[6,12]])})))()},getCatalogNodes:function(e){var t=arguments;return p(regeneratorRuntime.mark((function n(){var a,o,c,l,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t.length>1&&void 0!==t[1]?t[1]:{},e){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,i.webProxy.catalogNodes.find(u({book_id:e},a),{useOriginResp:!0});case 5:o=n.sent,c=h(o.data);try{for(c.s();!(l=c.n()).done;)(s=l.value).key=s.uuid}catch(e){c.e(e)}finally{c.f()}return n.abrupt("return",u({catalog_tree:Object(r.generateTreeByTocItems)(o.data),toc:o.data},o.meta));case 9:case"end":return n.stop()}}),n)})))()},actionsForEdit:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=[];return e.type===o.TYPES.link?r.push(l.a.CATALOG.edit_link):r.push(l.a.CATALOG.rename),"lite"===t&&(n.create_doc&&(r.push(l.a.CATALOG.copy),r.push(l.a.CATALOG.move)),n.export&&r.push(l.a.CATALOG.export),n.create_doc&&r.push(l.a.CATALOG.destroy)),"full"===t&&(r.push(l.a.CATALOG.move),r.push(l.a.CATALOG.remove),e.type===o.TYPES.doc&&r.push(l.a.CATALOG.view_doc)),r},formatNode:function(e){return{type:e.type||c.TOC_TYPES.DOC,title:e.title,uuid:e.uuid||Object(a.nanoid)(16),url:e.url||null,prev_uuid:e.prev_uuid||null,sibling_uuid:e.sibling_uuid||null,child_uuid:e.child_uuid||null,parent_uuid:e.parent_uuid||null,doc_id:e.doc_id||null,level:e.level||0,id:e.doc_id||null,open_window:0===e.open_window?0:1,visible:0===e.visible?0:1}},insertNodeToCatalog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=g.formatNode(t),a=t.target_uuid,i=e.findIndex((function(e){return e.uuid===a}));if(i>=0){var o=e[i];n.level=o.level+1,e.splice(i+1,0,n)}else e.unshift(n);return{catalog_tree:Object(r.generateTreeByTocItems)(e),toc:e,node_uuid:n.uuid}},getRedirectURL:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.group,a=n.book,i=n.currentItem;if(i){var o,c=e.filter((function(e){return"DOC"===e.type&&e.id})),l=c.findIndex((function(e){return e.url&&e.url===i.url}));return c=t.filter((function(e){return"DOC"===e.type&&e.id})),l<0?o=c[0]:(o=c[l]||null)||(o=c[l-1]||null),o?"/".concat(r.login,"/").concat(a.slug,"/").concat(o.url):void 0}}};t.a=g},,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n(1828);var r=n(496),a=n(0),i=n.n(a),o=n(2),c=n.n(o),l=n(7),s=n.n(l),u=n(52),d=n.n(u),f=n(182),p=n(101);n(368);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var b=i.a.forwardRef((function(e,t){var n=e.className,a=e.emptyView,o=e.onLoadMore,c=e.dataSource,l=e.renderItem,u=e.loading,d=e.showLoadingMore,h=e.pagination,g=e.children,b=e.justify,k=e.customItem,w=e.loadMoreText,x=void 0===w?Object(f.a)("查看更多"):w,_=y(e,["className","emptyView","onLoadMore","dataSource","renderItem","loading","showLoadingMore","pagination","children","justify","customItem","loadMoreText"]),C=u;"boolean"==typeof C&&(C={spinning:C});var E=C&&C.spinning,O=c.length&&d?i.a.createElement("div",{className:"larkui-list-block-more"},E&&i.a.createElement(p.a,v({justify:"block"},C)),!E&&i.a.createElement("a",{className:"larkui-list-block-more-btn",onClick:function(e){e.preventDefault(),o&&o()}},x)):null;if(E&&!O)return i.a.createElement("div",{className:s()("larkui-list","larkui-list-loading")},i.a.createElement(p.a,v({justify:"block"},C)));var S=h;return S&&(S=h.total<=h.pageSize?null:m({showSizeChanger:!1},S)),i.a.createElement(r.b,v({ref:t,className:s()(n,"larkui-list",{"larkui-list-justify-block":"block"===b}),loading:!1,loadMore:O,pagination:S,dataSource:c.length>0?c:e.emptyView?["empty"]:[],renderItem:function(e,t){if("empty"===e)return i.a.createElement("div",{className:"blankslate"},a);var n=l(e,t);return n?k?n:i.a.createElement(r.b.Item,{key:e.id},n):i.a.createElement("div",null)}},_),g)}));b.defaultProps={dataSource:[],loading:!1,showLoadingMore:!1,justify:"flex"},b.propTypes=m(m({},r.b.ListProps),{},{className:c.a.string,emptyView:c.a.node,onLoadMore:c.a.func,dataSource:c.a.array,renderItem:c.a.func,loading:c.a.oneOfType([c.a.bool,c.a.object]),showLoadingMore:c.a.bool,pagination:c.a.object,children:c.a.node,justify:c.a.oneOf(["block","flex"]),customItem:c.a.bool}),d()(b,r.b),t.a=b},,function(e,t,n){"use strict";n(892);var r=n(494);n(391);t.a=r.a},,function(e,t,n){"use strict";n.d(t,"d",(function(){return a.s})),n.d(t,"a",(function(){return Rh})),n.d(t,"b",(function(){return jh})),n.d(t,"c",(function(){return yh})),n.d(t,"e",(function(){return Qp})),n.d(t,"f",(function(){return Nh})),n.d(t,"g",(function(){return kh})),n.d(t,"h",(function(){return xh})),n.d(t,"i",(function(){return yu})),n.d(t,"j",(function(){return Th})),n.d(t,"k",(function(){return Ph})),n.d(t,"l",(function(){return kp})),n.d(t,"m",(function(){return Mh}));var r=n(58),a=n(6),i=n(8),o=n.n(i),c=n(9),l=n.n(c),s=n(5),u=n.n(s),d=n(12),f=n.n(d),p=n(14),h=n.n(p),m=n(4),g=n.n(m),v=n(3),y=n.n(v),b=n(82),k=n.n(b),w=n(27),x=n.n(w),_=n(0),C=n.n(_),E=n(31),O=n.n(E),S=n(2),R=n.n(S),D=n(56),A=n(19),T=n(828),P=n(100),j=n(48),M=n(197),N=n(30),L=n(518),I=n(355),z=n(24),B=n(16),F=n(316),V=n(94),U=n(303),q=n(60),H=n(93),W=n(1729),Y=n(1989),G=n(313),K=n(101),X=n(314),$=n(44),Z=n.n($),Q=n(54),J=n.n(Q),ee=n(25),te=n(79),ne=n.n(te),re=n(92),ae=n.n(re),ie=n(15),oe=n.n(ie),ce=n(7),le=n.n(ce),se=n(81),ue=n.n(se),de=n(23),fe=n.n(de),pe=n(75),he=n.n(pe),me=n(29),ge=n.n(me),ve=n(123),ye=n(350),be=n.n(ye),ke=n(622),we=n.n(ke),xe=n(20),_e=n.n(xe),Ce=n(1994),Ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464H332V240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v68c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-68c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zm-40 376H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"unlock",theme:"outlined"},Oe=n(85),Se=function(e,t){return _.createElement(Oe.a,Object.assign({},e,{ref:t,icon:Ee}))};Se.displayName="UnlockOutlined";var Re=_.forwardRef(Se),De=n(1995),Ae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]},name:"clock-circle",theme:"outlined"},Te=function(e,t){return _.createElement(Oe.a,Object.assign({},e,{ref:t,icon:Ae}))};Te.displayName="ClockCircleOutlined";var Pe=_.forwardRef(Te),je=n(1770),Me={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"},Ne=function(e,t){return _.createElement(Oe.a,Object.assign({},e,{ref:t,icon:Me}))};Ne.displayName="WarningOutlined";var Le=_.forwardRef(Ne),Ie=n(2006),ze={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"}}]},name:"close",theme:"outlined"},Be=function(e,t){return _.createElement(Oe.a,Object.assign({},e,{ref:t,icon:ze}))};Be.displayName="CloseOutlined";var Fe=_.forwardRef(Be),Ve=n(249),Ue=n.n(Ve),qe=n(352),He=n.n(qe),We=n(834),Ye=n.n(We),Ge=n(254),Ke=n.n(Ge),Xe=n(147),$e=n.n(Xe),Ze=n(635),Qe=n.n(Ze),Je=n(173),et=n.n(Je),tt=n(88),nt=n.n(tt),rt=n(394),at=n.n(rt),it=n(95),ot=n.n(it),ct=n(1993),lt=n(22),st=n.n(lt),ut=n(170),dt=n.n(ut),ft=n(315),pt=n.n(ft),ht=n(550),mt=n.n(ht),gt=n(222);n(612);function vt(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}vt('.card-resize-button-ud {\n  position: absolute;\n  bottom: -3px;\n  right: 0px;\n  left: 0px;\n  margin: 0 auto;\n  z-index: 12;\n  border-radius: 6px;\n}\n.card-resize-button-ud:hover {\n  cursor: row-resize;\n}\n[data-lake-card].lake-card-margin {\n  margin: 16px 0;\n}\n[data-lake-card].lake-card-margin-top {\n  margin-top: 16px;\n}\n[data-lake-card].lake-card-margin-bottom {\n  margin-bottom: 16px;\n}\n.lake-scrollable::-webkit-scrollbar {\n  display: none;\n}\n.lake-scrollable.scroll-x {\n  padding-bottom: 10px;\n  overflow-x: hidden;\n}\n.lake-scrollable.scroll-x:hover {\n  overflow-x: auto;\n}\n.lake-scrollable.scroll-y {\n  padding-right: 10px;\n  overflow-y: hidden;\n}\n.lake-scrollable.scroll-y:hover {\n  overflow-y: auto;\n}\n.lake-scrollable:hover .lake-scrollbar {\n  display: block;\n}\n.lake-scrollable.scrolling {\n  user-select: none;\n}\n.lake-scrollable.scrolling .lake-scrollbar {\n  display: block;\n}\n.lake-scrollable .lake-scrollbar {\n  display: none;\n  position: absolute;\n  cursor: default;\n  transition: opacity 0.3s ease-in-out;\n}\n.lake-scrollable .lake-scrollbar .lake-scrollbar-trigger {\n  position: absolute;\n  background: #c1c1c1;\n  border-radius: 10px;\n  cursor: pointer;\n}\n.lake-scrollable .lake-scrollbar .lake-scrollbar-trigger:hover {\n  background: #888;\n}\n.lake-scrollable .lake-scrollbar.lake-scrollbar-x {\n  width: 100%;\n  height: 8px;\n  bottom: 0px;\n}\n.lake-scrollable .lake-scrollbar.lake-scrollbar-x .lake-scrollbar-trigger {\n  height: 8px;\n  min-width: 60px;\n}\n.lake-scrollable .lake-scrollbar.lake-scrollbar-y {\n  top: 0;\n  width: 8px;\n  height: 100%;\n  right: 0px;\n}\n.lake-scrollable .lake-scrollbar.lake-scrollbar-y .lake-scrollbar-trigger {\n  width: 8px;\n  min-height: 60px;\n}\n.lake-scrollable .scrollbar-shadow-left {\n  position: absolute;\n  z-index: 10;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  width: 4px;\n  opacity: 0.5;\n  background: linear-gradient(270deg, rgba(99, 114, 130, 0) 0, rgba(99, 114, 130, 0.16));\n  background: -webkit-linear-gradient(right, rgba(99, 114, 130, 0), rgba(99, 114, 130, 0.16));\n  pointer-events: none;\n}\n.lake-scrollable .scrollbar-shadow-right {\n  position: absolute;\n  z-index: 10;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  width: 4px;\n  opacity: 0.5;\n  background: linear-gradient(90deg, rgba(99, 114, 130, 0) 0, rgba(99, 114, 130, 0.16));\n  background: -webkit-linear-gradient(left, rgba(99, 114, 130, 0), rgba(99, 114, 130, 0.16));\n  pointer-events: none;\n}\n.lake-svg-icon {\n  width: 16px;\n  height: 16px;\n  display: inline-block;\n  vertical-align: -0.15em;\n  text-align: center;\n  text-transform: none;\n  line-height: 1;\n  text-rendering: auto;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.lake-svg-icon-helper-tips {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/45ba264b-0967-4439-9289-ee41b040a0c2.svg\');\n}\n.lake-svg-icon-alert {\n  width: 16px;\n  height: 16px;\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/be5b1e2a-b47e-479c-9217-430229bef84e.svg\');\n}\n.lake-svg-icon-file {\n  width: 14px;\n  height: 11px;\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/ecda03cc-fd8e-45d2-834c-c904048f9583.svg\');\n}\n.lake-svg-icon-image {\n  width: 14px;\n  height: 11px;\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/44718df0-a6d9-4b93-909d-8482f70476ab.svg\');\n}\n.lake-svg-icon-error-image {\n  width: 22px;\n  height: 18px;\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/2295f9e0-1cb2-4d63-86aa-e9799273b28d.svg\');\n}\n.lake-svg-icon-error-file {\n  width: 22px;\n  height: 18px;\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/42090c56-d17b-4cf0-be63-59e164e47ba6.svg\');\n}\n.lake-svg-icon-insert {\n  background-image: url("https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*o_5bR4s5I4QAAAAAAAAAAABjAQAAAQ/original");\n  width: 18px;\n  height: 18px;\n  margin-bottom: -1px;\n}\n.lake-svg-icon-label {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/20747dac-1cc8-49f6-a91a-0c8c501d189b.svg\');\n}\n.lake-svg-icon-new-card {\n  width: 30px;\n  height: 12px;\n  margin-top: 5px;\n  margin-left: 4px;\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/7e255d95-cbe3-4559-a4a3-dbe69cd3e38b.svg\');\n}\n.lake-svg-icon-puml {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/4d2be8de-b7b7-41df-a36f-77ff0b6a5b9f.svg\');\n}\n.lake-svg-icon-flowchart {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/c82343e1-60ab-4b62-8135-d71401191104.svg\');\n}\n.lake-svg-icon-graphviz {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/19178ae8-0b12-463e-b466-e927094e9ea0.svg\');\n}\n.lake-svg-icon-mermaid {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/a15d98ca-089f-4cc2-9c11-032cc56fcacb.svg\');\n}\n.lake-svg-icon-processon {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/5c0fa950-66ff-4a3b-a788-477ea178e6bb.svg\');\n}\n.lake-svg-icon-modao {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/04162a86-307b-409e-8f8c-71f2200891f5.svg\');\n}\n.lake-svg-icon-herbox {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/f6d5ceab-a3e0-413f-a1ab-3c9ded96d632.svg\');\n}\n.lake-svg-icon-deepinsight {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/69f6859c-220e-490c-8c8a-b3bdaa7cbcb3.svg\');\n}\n.lake-svg-icon-codepen {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/29539843-153d-4c7b-af8f-4475e743398b.svg\');\n}\n.lake-svg-icon-riddle {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/f0328014-fe24-4690-90a4-82c8e150c5bf.svg\');\n}\n.lake-svg-icon-figma {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/d0b58b9f-0ac3-4d0f-958a-c0aa8a3265eb.svg\');\n}\n.lake-svg-icon-xiami {\n  background-image: url(\'https://gw.alipayobjects.com/zos/bmw-prod/c71358bb-d7cc-45dc-96ae-19d28febbb03.svg\');\n}\n.lake-svg-icon-gaode {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/02def0ac-858f-4f90-886c-295290725024.svg\');\n}\n.lake-svg-icon-taobao {\n  background-image: url(\'https://gw.alipayobjects.com/zos/bmw-prod/57a7cb99-7f36-4869-8f94-d9c87d069cd6.svg\');\n}\n.lake-svg-icon-preview {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/95b6cdec-29f5-495f-8f1b-8835bcd2c541.svg\');\n}\n.lake-svg-icon-youku {\n  background-image: url(\'https://gw.alipayobjects.com/zos/bmw-prod/4825b4b8-96a3-463f-8e6a-c28ae8b792b0.svg\');\n}\n.lake-svg-icon-bilibili {\n  background-image: url(\'https://gw.alipayobjects.com/zos/bmw-prod/93d6bda1-2ab6-4b20-97e5-c0a73f2a42cd.svg\');\n}\n.lake-svg-icon-mmad {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/5e8132a4-5ec0-4c4e-95c4-7f5b19f23c19.svg\');\n}\n.lake-svg-icon-psd {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/df8dd01c-ecb1-4d33-99f6-8079591bb46c.svg\');\n}\n.lake-svg-icon-sketch {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/ef845454-388c-47b3-8066-298e335a2741.svg\');\n}\n.lake-svg-icon-xmind {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/46f6c8fc-5d56-41d7-b419-a89335f82dfc.svg\');\n}\n.lake-svg-icon-rp {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/f8f40533-79d9-4a3c-8051-31c34390f96d.svg\');\n}\n.lake-svg-icon-key {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/73dc752c-3f7b-4b0b-ada9-eb7e208d9b34.svg\');\n}\n.lake-svg-icon-mindnode {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/3fbedc10-029c-4670-a343-8b224ab0978e.svg\');\n}\n.lake-svg-icon-keynote {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/73dc752c-3f7b-4b0b-ada9-eb7e208d9b34.svg\');\n}\n.lake-svg-icon-xd {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/139561c7-309c-4669-882b-1107e217179c.svg\');\n}\n.lake-svg-icon-numbers {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/1eecfe2b-d250-4575-b3b4-78de3503007c.svg\');\n}\n.lake-svg-icon-pages {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/60e30d6d-9ee0-47b7-8955-cdd4aff6b2ac.svg\');\n}\n.lake-svg-icon-ppt,\n.lake-svg-icon-pptx,\n.lake-svg-icon-potx {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/d62af37c-9f13-4ca2-8861-f2b18c98f3a9.svg\');\n}\n.lake-svg-icon-xls {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/1874c8cc-a103-429b-8465-bb3adfe78d43.svg\');\n}\n.lake-svg-icon-xlsx {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/1874c8cc-a103-429b-8465-bb3adfe78d43.svg\');\n}\n.lake-svg-icon-doc {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/d98a673f-ef0f-46a6-83e3-ba6d01a4ec9d.svg\');\n}\n.lake-svg-icon-docx {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/d98a673f-ef0f-46a6-83e3-ba6d01a4ec9d.svg\');\n}\n.lake-svg-icon-pdf {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/02e0700b-d617-4afb-b4de-a4ea4c9bf7e7.svg\');\n}\n.lake-svg-icon-eddx {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/e1c51c39-f5b6-4e14-9ba9-0102d3579b9a.svg\');\n}\n.lake-svg-icon-eps {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/84b8024a-c65c-44e3-9be8-269af985af54.svg\');\n}\n.lake-svg-icon-insert-local-doc {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/f54a24bd-f973-4945-978c-abb923e20090.svg\');\n}\n.lake-svg-icon-insert-yuque {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/99e327dd-1cfe-40dd-b3e5-28c9d88d182d.svg\');\n}\n.lake-svg-icon-insert-table {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/a9cf6f64-3741-493b-a112-8952baedd1f6.svg\');\n}\n.lake-svg-icon-insert-image {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/dcf2220d-9226-41c9-b1f6-cc0c0a110dc1.svg\');\n}\n.lake-svg-icon-insert-file {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/2c7fe359-ac3d-493e-998d-f285305d28bd.svg\');\n}\n.lake-svg-icon-insert-video {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/1ef56c12-3adc-42c6-bb7c-9cb13111d8e2.svg\');\n}\n.lake-svg-icon-insert-thirdparty {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/e3ebe9af-b207-4d94-8dc4-2fdf5469f5e7.svg\');\n}\n.lake-svg-icon-insert-youku {\n  background-image: url(\'https://gw.alipayobjects.com/zos/bmw-prod/4825b4b8-96a3-463f-8e6a-c28ae8b792b0.svg\');\n}\n.lake-svg-icon-insert-codeblock {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/7fd18334-db2e-49d0-ba80-b92689b81b3f.svg\');\n}\n.lake-svg-icon-insert-math {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/762f00b4-45d7-47b8-8c7b-2c9f886612b5.svg\');\n}\n.lake-svg-icon-insert-mindmap {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/f6510a5f-33d9-4bcb-8b54-5dc30bd89e79.svg\');\n}\n.lake-svg-icon-insert-puml {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/10a9cc50-3a01-4a5c-8335-9a194fdcb614.svg\');\n}\n.lake-svg-icon-insert-flowchart {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/0e0309c1-2b5c-433c-b9d7-e0d2486ce885.svg\');\n}\n.lake-svg-icon-insert-graphviz {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/44e449b2-9756-4de6-b227-bf4205964d20.svg\');\n}\n.lake-svg-icon-insert-mermaid {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/59cb287f-06f2-4712-a206-e1c4d173830b.svg\');\n}\n.lake-svg-icon-insert-lockedtext {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/bc8adb5a-18d2-4385-8ca4-710b57ad1664.svg\');\n}\n.lake-svg-icon-insert-calendar {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/2dd842ba-ea59-4cd1-994e-c5f31bd1ead2.svg\');\n}\n.lake-svg-icon-check-success {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/4c17d1ec-bd3f-4b86-a77b-dfd91e9c9626.svg\');\n}\n.lake-svg-icon-calendar-arrow-left {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/2f3e5fca-16d2-48b3-a5d2-fff2328df92c.svg\');\n}\n.lake-svg-icon-calendar-arrow-right {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/a03bff1a-3aef-4871-bc74-de2a3f81e3ff.svg\');\n}\n.lake-svg-icon-desc {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/a085f457-6982-434a-808d-372cac6624e7.svg\');\n}\n.lake-svg-icon-error {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/8f8fcc17-b080-421e-b733-7772d62be204.svg\');\n}\n.lake-svg-icon-warning {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/d1b4c5f6-8dcd-4d10-ab31-265abdbb9579.svg\');\n}\n.lake-svg-insert-yuan {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/b1c64e6e-3787-408c-bc49-dd0f9d9b2ebc.svg\');\n}\n.lake-svg-icon-yuan {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/6145eac0-5d9d-4b9b-84be-7ed8bfde32c7.svg\');\n}\n.lake-svg-icon-line-height {\n  background-image: url(\'https://gw.alipayobjects.com/zos/basement_prod/40d4fb04-d3c2-43e8-a99d-7f68345f7f0a.svg\');\n}\n.lake-svg-icon-yuque-doc {\n  background-image: url(\'https://gw.alipayobjects.com/zos/bmw-prod/11d695b4-30c1-478f-940a-e20095ccb2fe.svg\');\n}\n.lake-svg-icon-yuque-thread {\n  background-image: url(\'https://gw.alipayobjects.com/zos/bmw-prod/1f4ca629-5760-465a-9207-7a7f49d01ca6.svg\');\n}\n.lake-svg-icon-yuque-design {\n  background-image: url(\'https://gw.alipayobjects.com/zos/bmw-prod/f0eded1a-a849-44f6-a5e2-3d8f5724ebef.svg\');\n}\n.lake-svg-icon-yuque-sheet {\n  background-image: url(\'https://gw.alipayobjects.com/zos/bmw-prod/34c09a2c-3c80-44c8-a49a-20fa92774b34.svg\');\n}\n.lake-svg-icon-yuque-mind {\n  background-image: url(\'https://gw.alipayobjects.com/zos/bmw-prod/b74e7bab-1935-48ae-80f8-82ea648697e5.svg\');\n}\n.lake-svg-icon-yuque-repo-mind {\n  background-image: url(\'https://gw.alipayobjects.com/zos/bmw-prod/b74e7bab-1935-48ae-80f8-82ea648697e5.svg\');\n}\n.lake-svg-icon-yuque-repo-sheet {\n  background-image: url(\'https://gw.alipayobjects.com/zos/bmw-prod/3be374af-05cc-4115-a9ac-477131b54212.svg\');\n}\n.lake-svg-icon-yuque-repo-doc {\n  background-image: url(\'https://gw.alipayobjects.com/zos/bmw-prod/2a1ba540-5d0d-46a2-98fb-6753300d3749.svg\');\n}\n.lake-svg-icon-yuque-repo-thread {\n  background-image: url(\'https://gw.alipayobjects.com/zos/bmw-prod/3f6aa5c3-e7b1-4d78-932e-b00379e8d38c.svg\');\n}\n.lake-svg-icon-yuque-repo-design {\n  background-image: url(\'https://gw.alipayobjects.com/zos/bmw-prod/48e3d64b-aec0-4f3f-9838-d1f685781dfd.svg\');\n}\n.lake-svg-icon-search {\n  background-image: url(\'https://gw.alipayobjects.com/zos/bmw-prod/086f31be-d7f0-4675-aa2c-8c8cf21c088b.svg\');\n}\n.lake-svg-icon-plus {\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/fa994e91-3fa4-421d-b0fc-9823dc5cf330.svg");\n}\n.lake-svg-icon-video {\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/31499aa4-1105-4a4b-a8c7-f33ceaf8e012.svg");\n}\n.lake-svg-icon-canva {\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/c1678a81-2534-4fdd-b38b-a510d69a6661.svg");\n}\n.lake-svg-icon-yuque-for-embed {\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/5dfd3248-3206-41dc-bc2c-1d7fb9847ecb.svg");\n}\n.lake-svg-icon-file-for-embed {\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/6ac1386e-5c04-45a5-a351-7d94a61d7bba.svg");\n}\n.lake-svg-icon-jinshuju {\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/3f11de9a-3da8-402d-a8bc-81df6ec52d2c.svg");\n}\n.lake-svg-icon-vote {\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/929ed4d4-a244-4d78-96e2-f472642daf2a.svg");\n}\n.lake-svg-icon-cloud {\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/58c42f2b-cdf1-49c3-a77a-d5e63c561a36.svg");\n}\n.lake-svg-icon-folder {\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/9890c046-6d10-4d2f-917a-b40a8e92ea7f.svg");\n}\n.lake-svg-icon-audio {\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/4aa43d0f-2881-46ab-a894-afd617b08afc.svg");\n}\n.lake-svg-icon-audio-icon {\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/b9d51288-551f-447e-930f-7e1132a4a90b.svg");\n}\n.lake-svg-icon-audio-error-icon {\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/dc01c10b-e433-4bb3-bf7e-8b679725b823.svg");\n}\n.lake-svg-icon-regret {\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/9436ba3b-352d-4dd2-a97b-b3c525390508.svg");\n}\n.lake-svg-icon-note-file {\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/a8cab1ab-68dd-48be-82ab-c667e0c43556.svg");\n}\n.lake-svg-icon-note-image {\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/6efcc064-f6e7-4823-983e-a09d449fcf55.svg");\n}\n.lake-svg-icon-note-tasklist {\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/32d03522-996b-4c48-bd08-274a2ed15204.svg");\n}\n.lake-svg-icon-note-link {\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/a232cebb-7862-420f-a220-31eff086e997.svg");\n}\n.lake-svg-icon-emoji {\n  width: 16px;\n  height: 16px;\n  margin-bottom: 1px;\n  background-size: contain;\n  background-image: url("https://gw.alipayobjects.com/zos/bmw-prod/72fc758e-01ca-4317-b9c9-1d25e9b3a577.svg");\n}\n.lake-alert {\n  font-variant: tabular-nums;\n  line-height: 1.5;\n  color: rgba(0, 0, 0, 0.65);\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n  list-style: none;\n  position: relative;\n  padding: 8px 15px 8px 37px;\n  border-radius: 4px;\n}\n.lake-alert.lake-alert-no-icon {\n  padding: 8px 15px;\n}\n.lake-alert-icon {\n  top: 11.5px;\n  left: 16px;\n  position: absolute;\n}\n.lake-alert-description {\n  font-size: 14px;\n  line-height: 22px;\n  display: none;\n}\n.lake-alert-success {\n  border: 1px solid #b7eb8f;\n  background-color: #f6ffed;\n}\n.lake-alert-success .lake-alert-icon {\n  color: #52c41a;\n}\n.lake-alert-info {\n  border: 1px solid #91d5ff;\n  background-color: #e6f7ff;\n}\n.lake-alert-info .lake-alert-icon {\n  color: #1890ff;\n}\n.lake-alert-warning {\n  border: 1px solid #ffe58f;\n  background-color: #fffbe6;\n}\n.lake-alert-warning .lake-alert-icon {\n  color: #faad14;\n}\n.lake-alert-error {\n  border: 1px solid #ffa39e;\n  background-color: #fff1f0;\n}\n.lake-alert-error .lake-alert-icon {\n  color: #f5222d;\n}\n.lake-alert-close-icon {\n  font-size: 12px;\n  position: absolute;\n  right: 16px;\n  top: 8px;\n  line-height: 22px;\n  overflow: hidden;\n  cursor: pointer;\n}\n.lake-alert-close-icon .anticon-close {\n  color: rgba(0, 0, 0, 0.45);\n  -webkit-transition: color 0.3s;\n  transition: color 0.3s;\n}\n.lake-alert-close-icon .anticon-close:hover {\n  color: #404040;\n}\n.lake-alert-close-text {\n  position: absolute;\n  right: 16px;\n}\n.lake-alert-with-description {\n  padding: 15px 15px 15px 64px;\n  position: relative;\n  border-radius: 4px;\n  color: rgba(0, 0, 0, 0.65);\n  line-height: 1.5;\n}\n.lake-alert-with-description.lake-alert-no-icon {\n  padding: 15px;\n}\n.lake-alert-with-description .lake-alert-icon {\n  position: absolute;\n  top: 16px;\n  left: 24px;\n  font-size: 24px;\n}\n.lake-alert-with-description .lake-alert-close-icon {\n  position: absolute;\n  top: 16px;\n  right: 16px;\n  cursor: pointer;\n  font-size: 14px;\n}\n.lake-alert-with-description .lake-alert-message {\n  font-size: 16px;\n  color: rgba(0, 0, 0, 0.85);\n  display: block;\n  margin-bottom: 4px;\n}\n.lake-alert-with-description .lake-alert-description {\n  display: block;\n}\n.lake-alert.lake-alert-close {\n  height: 0 !important;\n  margin: 0;\n  padding-top: 0;\n  padding-bottom: 0;\n  -webkit-transition: all 0.3s cubic-bezier(0.78, 0.14, 0.15, 0.86);\n  transition: all 0.3s cubic-bezier(0.78, 0.14, 0.15, 0.86);\n  -webkit-transform-origin: 50% 0;\n  -ms-transform-origin: 50% 0;\n  transform-origin: 50% 0;\n}\n.lake-max-editor .lake-toolbar-content {\n  margin: 0 auto;\n}\n.lake-max-editor .lake-toolbar .lake-button-fontsize {\n  font-weight: bold;\n  width: 58px;\n  padding-right: 20px;\n}\n.lake-mini-editor .lake-toolbar {\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: initial;\n  padding: 0;\n  border-radius: 0 0 3px 3px;\n  border-top: 1px dashed #d9d9d9;\n  border-bottom: 0;\n  height: 40px;\n  min-width: 200px;\n  /* 最左侧一组 toolbar + ... */\n}\n.lake-mini-editor .lake-toolbar-content {\n  text-align: left;\n  height: 40px;\n}\n.lake-mini-editor .lake-toolbar-content-plugins {\n  white-space: nowrap;\n  width: 100%;\n}\n.lake-mini-editor .lake-toolbar .lake-button-set-list-emoji-mini {\n  transform: translateY(2px);\n  white-space: normal;\n}\n.lake-mini-editor .lake-toolbar .lake-toolbar-area {\n  padding: 3px 0 3px 4px;\n}\n.lake-mini-editor .lake-toolbar .lake-button-set-list-to-top {\n  top: auto;\n  bottom: 100%;\n}\n.lake-toolbar {\n  position: relative;\n  width: 100%;\n  height: 40px;\n  padding: 0;\n  line-height: 1.5;\n  background: #fcfcfc;\n  border-bottom: 1px solid #e8e8e8;\n  transition: all 0.25s cubic-bezier(0.3, 1.2, 0.2, 1);\n  z-index: 200;\n  -webkit-user-select: none;\n  user-select: none;\n}\n.lake-toolbar-content {\n  position: relative;\n  flex-direction: row;\n  background: transparent;\n  display: none;\n  text-align: center;\n  width: 100%;\n  height: 39px;\n}\n.lake-toolbar-content-active {\n  display: block;\n}\n.lake-toolbar-plugins-hide {\n  display: none;\n}\n.lake-toolbar-content-extras {\n  position: absolute;\n  right: 0;\n  border-left: 1px solid #e8e8e8;\n}\n.lake-toolbar-area {\n  padding: 4px 8px 3px;\n  height: 39px;\n  width: auto;\n  display: inline-block;\n  border-left: 1px solid #e8e8e8;\n}\n.lake-toolbar-area-hide {\n  display: none;\n}\n.lake-toolbar-area-first-group {\n  border-left: none;\n}\n.lake-toolbar-area:nth-child(1) {\n  border-left: none;\n}\n.lake-toolbar-active {\n  background-color: #f9f9f9;\n  border-bottom: 1px solid #d9d9d9;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.08);\n}\n.lake-toolbar-split {\n  width: 0;\n  border-right: 1px solid #d9d9d9;\n  margin: 0 6px 0 6px;\n}\n.lake-mobile-toolbar {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  border-bottom: 0;\n  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.2);\n  transition: none;\n}\n.lake-mobile-toolbar .lake-button-set-trigger .lake-button {\n  padding-right: 8px;\n}\n.lake-mobile-toolbar .lake-button-set-trigger .lake-button .lake-icon-arrow {\n  display: none;\n}\n.lake-mobile-toolbar .lake-button-icon-list > span > .lake-icon {\n  margin-right: 0;\n}\n.lake-mobile-toolbar .lake-toolbar-area {\n  padding-left: 0;\n  border-left: 0;\n}\n.lake-mobile-toolbar .lake-button {\n  min-width: 32px;\n}\n.lake-mobile-toolbar .lake-button.toolbar-icon-action,\n.lake-mobile-toolbar .lake-button.toolbar-icon-action-default {\n  background: #f0f0f0;\n  font-size: 14px;\n  margin: 3px 5px;\n  line-height: 16px;\n  padding: 0 8px;\n  height: 26px;\n}\n.lake-mobile-toolbar .lake-button.toolbar-icon-action {\n  background: #25b864;\n  color: #fff;\n}\n.lake-mobile-toolbar .lake-button[accessbilityid="main-mobile:confirm-button"] {\n  color: #25b864;\n}\n.lake-editor.lake-maximize-card .lake-toolbar {\n  position: fixed;\n  top: 56px;\n  min-width: 1280px;\n  z-index: 1033;\n}\n.lake-editor.lake-toolbar-hidden .lake-toolbar,\n.lake-mini-editor.lake-maximize-card .lake-toolbar {\n  display: none;\n}\n.lake-editor.lake-toolbar-hidden .lake-card-block-max > [data-card-element="body"] > [data-card-element="center"].edit,\n.lake-mini-editor.lake-maximize-card .lake-card-block-max > [data-card-element="body"] > [data-card-element="center"].edit {\n  top: 56px;\n}\n.lake-sidebar {\n  position: absolute;\n  top: 40px;\n  padding-top: 16px;\n  overflow: hidden;\n  display: none;\n  min-width: 220px;\n  max-width: 480px;\n}\n.lake-sidebar .lake-sidebar-close {\n  position: absolute;\n  top: 0;\n  right: 0;\n  cursor: pointer;\n}\n.lake-sidebar-active {\n  display: block;\n}\n.lake-sidebar-title {\n  position: relative;\n  margin-bottom: 10px;\n  font-size: 14px;\n  font-weight: bold;\n  padding: 0 2px;\n  padding-bottom: 8px;\n  border-bottom: 1px solid #e8e8e8;\n}\n.lake-common-sidebar {\n  width: calc(50% - 454px);\n  left: calc(50% + 436px);\n  padding-left: 28px;\n  /* ---  新增一个样式组，用于支持付费阅读的 sidebar 样式 --- */\n}\n.lake-common-sidebar .lake-sidebar-content {\n  padding: 0 2px;\n  overflow: hidden;\n  position: relative;\n}\n.lake-common-sidebar .lake-sidebar-group {\n  margin-bottom: 16px;\n  padding-bottom: 12px;\n  border-bottom: 1px solid #e8e8e8;\n}\n.lake-common-sidebar .lake-sidebar-group:last-child:not(:first-child) {\n  border-bottom: 0;\n}\n.lake-common-sidebar .lake-sidebar-group-title {\n  font-size: 14px;\n  color: #595959;\n  margin-bottom: 12px;\n}\n.lake-common-sidebar .lake-sidebar-group-item {\n  font-size: 14px;\n  color: #595959;\n  margin-bottom: 16px;\n}\n.lake-common-sidebar .lake-sidebar-group-item .lake-icon {\n  font-size: 16px;\n}\n.lake-common-sidebar .lake-sidebar-group-item:last-child:not(:first-child) {\n  margin-bottom: 0;\n}\n.lake-common-sidebar .lake-image-sidebar-group {\n  border-bottom: none;\n}\n.lake-common-sidebar .lake-image-sidebar-group button.active {\n  color: #47C479;\n  border-color: #47C479;\n}\n.lake-common-sidebar .lake-sidebar-image-style .ant-btn-group,\n.lake-common-sidebar .lake-sidebar-image-percent .ant-btn-group {\n  display: flex;\n}\n.lake-common-sidebar .lake-sidebar-image-style .ant-btn-group .ant-btn-sm,\n.lake-common-sidebar .lake-sidebar-image-percent .ant-btn-group .ant-btn-sm {\n  flex: auto;\n  line-height: 1;\n  padding: 0 7px;\n}\n.lake-common-sidebar .lake-sidebar-image-spacing .ant-checkbox-group {\n  display: flex;\n  flex-direction: column;\n}\n.lake-common-sidebar .lake-sidebar-image-spacing .ant-checkbox-group label {\n  margin-bottom: 8px;\n}\n.lake-common-sidebar .lake-sidebar-image-spacing .ant-checkbox-group label:last-child {\n  margin-bottom: 0;\n}\n.lake-common-sidebar .lake-sidebar-size-input,\n.lake-common-sidebar .lake-sidebar-size-title {\n  padding-top: 2px;\n  display: flex;\n}\n.lake-common-sidebar .lake-sidebar-width,\n.lake-common-sidebar .lake-sidebar-height,\n.lake-common-sidebar .lake-sidebar-width-title,\n.lake-common-sidebar .lake-sidebar-height-title {\n  flex: auto;\n}\n.lake-common-sidebar .lake-sidebar-lock {\n  display: inline-block;\n  width: 20px;\n  text-align: center;\n}\n.lake-common-sidebar .lake-sidebar-width-title,\n.lake-common-sidebar .lake-sidebar-height-title {\n  font-size: 12px;\n  display: inline-block;\n  text-align: center;\n}\n.lake-common-sidebar .lake-sidebar-noborder-group {\n  font-size: 12px;\n  margin-bottom: 24px;\n}\n.lake-common-sidebar .lake-sidebar-noborder-group-title {\n  font-size: 14px;\n  line-height: 22px;\n  font-weight: bold;\n  display: flex;\n  flex-direction: row;\n  align-items: baseline;\n}\n.lake-common-sidebar .lake-sidebar-noborder-group-title a {\n  color: #096DD9;\n  font-weight: normal;\n  font-size: 12px;\n  flex: auto;\n  text-align: right;\n}\n.lake-common-sidebar .lake-sidebar-noborder-group-title,\n.lake-common-sidebar .lake-sidebar-noborder-group-item {\n  margin-bottom: 8px;\n}\n.lake-common-sidebar .lake-sidebar-noborder-group .lake-sidebar-desc {\n  font-size: 12px;\n}\n.lake-common-sidebar .lake-sidebar-noborder-group .lake-sidebar-desc a {\n  color: #096DD9;\n}\n.lake-repository-sidebar {\n  height: calc(100% - 24px);\n  top: 24px;\n}\n.lake-repository-sidebar .lake-sidebar-content {\n  height: 100%;\n  overflow-x: hidden;\n  overflow-y: auto;\n  padding: 0;\n  background-color: #fff;\n  border-left: 1px solid #e9e9e9;\n  border-right: 1px solid #e9e9e9;\n}\n@media screen and (max-width: 1330px) {\n  .lake-sidebar {\n    padding-right: 26px;\n  }\n  .lake-adaptive-width .lake-sidebar {\n    padding-right: unset;\n  }\n}\n.lake-button {\n  display: inline-block;\n  height: 32px;\n  width: auto;\n  min-width: 32px;\n  margin: 0;\n  text-align: center;\n  padding: 0 7px;\n  background-color: transparent;\n  border: 1px solid transparent;\n  border-radius: 3px 3px;\n  font-size: 16px;\n  cursor: pointer;\n  color: #595959;\n  outline: none;\n  line-height: 32px;\n}\n.lake-button:hover {\n  border: 1px solid transparent;\n  background-color: #f5f5f5;\n}\n.lake-button:active,\n.lake-button-active,\n.lake-button-active:hover {\n  background-color: #e8e8e8;\n  border: 1px solid transparent;\n}\n.lake-button-disabled,\n.lake-button-disabled:hover {\n  background-color: transparent;\n  border: 1px solid transparent;\n  box-shadow: none;\n  color: #000;\n  opacity: 0.25;\n  cursor: not-allowed;\n}\n.lake-button-save {\n  position: relative;\n}\n.lake-button-save::after {\n  content: \' \';\n  visibility: hidden;\n  opacity: 0;\n  width: 6px;\n  height: 6px;\n  border-radius: 6px 6px;\n  background: #25b864;\n  position: absolute;\n  top: 6px;\n  right: 6px;\n  transition: all 0.3s linear;\n}\n.lake-button-save-active::after {\n  opacity: 1;\n  visibility: visible;\n}\n.lake-button-heading {\n  font-weight: bold;\n  min-width: 73px;\n}\n.lake-button-inner-text {\n  font-size: 12px;\n  margin-left: 2px;\n  vertical-align: top;\n}\n.lake-button-hotkey {\n  font-size: 12px;\n  color: rgba(255, 255, 255, 0.85);\n}\n.lake-button-group {\n  position: relative;\n  display: inline-block;\n  width: auto;\n}\n.lake-button-set {\n  position: relative;\n  display: inline-block;\n  z-index: 10;\n}\n.lake-button-set-trigger {\n  display: inline-block;\n}\n.lake-button-set-trigger .lake-button {\n  padding: 0 12px 0 7px;\n}\n.lake-button-set-trigger .lake-button.lark-button-more {\n  padding: 0 7px;\n}\n.lake-button-set-trigger .lake-icon-arrow {\n  position: absolute;\n  right: 6px;\n  top: 14px;\n  width: 8px;\n  height: 8px;\n  background-image: url(\'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjhweCIgaGVpZ2h0PSI1cHgiIHZpZXdCb3g9IjAgMCA4IDUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA1Mi41ICg2NzQ2OSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPkdyb3VwIENvcHkgNjwvdGl0bGU+DQogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+DQogICAgPGcgaWQ9IlN5bWJvbHMiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIG9wYWNpdHk9IjAuNDUiPg0KICAgICAgICA8ZyBpZD0idG9vbGJhciIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyOC4wMDAwMDAsIC0xOC4wMDAwMDApIj4NCiAgICAgICAgICAgIDxnIGlkPSJwYXJhZ3JhcGgtc3R5bGUiPg0KICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIyNi4wMDAwMDAsIDQuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJHcm91cC1Db3B5LTYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMi4wMDAwMDAsIDEyLjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZSIgeD0iMCIgeT0iMCIgd2lkdGg9IjgiIGhlaWdodD0iOCI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTAuNTk2MDkzNzUsMi41NTcwMzEyNSBMMy43NDUzMTI1LDYuMzc4MTI1IEMzLjg3NzM0Mzc1LDYuNTI1NzgxMjUgNC4xMDg1OTM3NSw2LjUyNTc4MTI1IDQuMjQwNjI1LDYuMzc4MTI1IEw3LjQwNTQ2ODc1LDIuNTU3MDMxMjUgQzcuNTk2MDkzNzUsMi4zNDI5Njg3NSA3LjQ0NDUzMTI1LDIuMDAzOTA2MjUgNy4xNTc4MTI1LDIuMDAzOTA2MjUgTDAuODQ0NTMxMjUsMi4wMDM5MDYyNSBDMC41NTcwMzEyNSwyLjAwMzkwNjI1IDAuNDA0Njg3NSwyLjM0Mjk2ODc1IDAuNTk2MDkzNzUsMi41NTcwMzEyNSBaIiBpZD0iU2hhcGUiIGZpbGw9IiMwMDAwMDAiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgPC9nPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+\');\n  background-repeat: no-repeat;\n  transition: all 0.25s cubic-bezier(0.3, 1.2, 0.2, 1);\n}\n.lake-button-set-trigger-double {\n  padding: 0 2px;\n}\n.lake-button-set-trigger-double .lake-button {\n  padding: 0;\n}\n.lake-button-set-trigger-double .lake-button:first-child {\n  width: 26px;\n}\n.lake-button-set-trigger-double .lake-button-current {\n  margin-right: 0;\n  min-width: 26px;\n  border-radius: 3px 0 0 3px;\n}\n.lake-button-set-trigger-double .lake-button-current:active {\n  background-color: #e8e8e8;\n}\n.lake-button-set-trigger-double .lake-button-dropdown {\n  margin-left: -1px;\n  min-width: 17px;\n  text-align: center;\n  padding: 0 0;\n  border-radius: 0 3px 3px 0;\n}\n.lake-button-set-trigger-double .lake-button-dropdown .lake-icon-arrow {\n  right: 7px;\n}\n.lake-button-set-trigger-double .lake-button-dropdown:hover,\n.lake-button-set-trigger-double .lake-button-dropdown:active {\n  background-color: #e8e8e8;\n}\n.lake-button-set-trigger-double:hover .lake-button {\n  border: 1px solid #e8e8e8;\n}\n.lake-button-set-trigger-double-active .lake-button,\n.lake-button-set-trigger-double-active:hover .lake-button {\n  border: 1px solid #e8e8e8;\n}\n.lake-button-set-list {\n  position: absolute;\n  top: 32px;\n  left: 0;\n  min-width: 104px;\n  font-size: 12px;\n  background: #ffffff;\n  border: 1px solid #e8e8e8;\n  border-radius: 3px 3px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.12);\n  padding: 5px 0;\n  height: auto;\n  opacity: 0;\n  visibility: hidden;\n  transition: all 0.25s cubic-bezier(0.3, 1.2, 0.2, 1);\n  z-index: 999;\n  transform: translateY(-10px);\n}\n.lake-button-set-list-active {\n  opacity: 1;\n  visibility: visible;\n  transform: translateY(0);\n}\n.lake-button-set-list-item {\n  display: block;\n  padding: 2px 16px 2px 16px;\n  line-height: 30px;\n  color: #595959;\n  text-align: left;\n  position: relative;\n  white-space: nowrap;\n}\n.lake-button-set-list-item-split {\n  display: block;\n  margin: 5px 0;\n  border-bottom: 1px solid #d9d9d9;\n}\n.lake-button-set-list-item span {\n  display: inline-block;\n}\n.lake-button-set-list-item .lake-icon {\n  margin-right: 8px;\n  color: #BFBFBF;\n  vertical-align: -0.15em;\n}\n.lake-button-set-list-item .lake-icon-dot {\n  position: absolute;\n  top: 50%;\n  left: 8px;\n  margin-top: -7px;\n  width: 14px;\n  height: 14px;\n  display: block;\n  background-image: url(\'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTRweCIgaGVpZ2h0PSIxNHB4IiB2aWV3Qm94PSIwIDAgMTQgMTQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUyLjQgKDY3Mzc4KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5VbnRpdGxlZDwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIG9wYWNpdHk9IjAuNDUiPgogICAgICAgIDxnIGlkPSJjaGVjayIgZmlsbD0iIzAwMDAwMCI+CiAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUiIG9wYWNpdHk9IjAiIHg9IjAiIHk9IjAiIHdpZHRoPSIxNCIgaGVpZ2h0PSIxNCI+PC9yZWN0PgogICAgICAgICAgICA8cGF0aCBkPSJNMTIuNDY4NzUsMi41OTc2NTYyNSBMMTEuNTEzMDg1OSwyLjU5NzY1NjI1IEMxMS4zNzkxMDE2LDIuNTk3NjU2MjUgMTEuMjUxOTUzMSwyLjY1OTE3OTY5IDExLjE2OTkyMTksMi43NjQ0NTMxMiBMNS41MzMwMDc4MSw5LjkwNTI3MzQ0IEwyLjgzMDA3ODEyLDYuNDgwNDY4NzUgQzIuNzQ2Njc5NjksNi4zNzUxOTUzMSAyLjYyMDg5ODQ0LDYuMzEzNjcxODcgMi40ODY5MTQwNiw2LjMxMzY3MTg3IEwxLjUzMTI1LDYuMzEzNjcxODcgQzEuNDM5NjQ4NDQsNi4zMTM2NzE4NyAxLjM4OTA2MjUsNi40MTg5NDUzMSAxLjQ0NTExNzE5LDYuNDkwMDM5MDYgTDUuMTg5ODQzNzUsMTEuMjM0MTc5NyBDNS4zNjQ4NDM3NSwxMS40NTU2NjQxIDUuNzAxMTcxODcsMTEuNDU1NjY0MSA1Ljg3NzUzOTA2LDExLjIzNDE3OTcgTDEyLjU1NDg4MjgsMi43NzI2NTYyNSBDMTIuNjEwOTM3NSwyLjcwMjkyOTY5IDEyLjU2MDM1MTYsMi41OTc2NTYyNSAxMi40Njg3NSwyLjU5NzY1NjI1IFoiIGlkPSJQYXRoIj48L3BhdGg+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=\');\n  background-repeat: no-repeat;\n}\n.lake-button-set-list-item .lake-icon-check {\n  position: absolute;\n  right: 6px;\n  top: 11px;\n  text-align: right;\n  color: #52c41a;\n}\n.lake-button-set-list-item-heading1,\n.lake-button-set-list-item-heading2,\n.lake-button-set-list-item-heading3,\n.lake-button-set-list-item-heading4 {\n  line-height: 1.6;\n  font-weight: bold;\n  color: #262626;\n}\n.lake-button-set-list-item-heading1 {\n  font-size: 28px;\n}\n.lake-button-set-list-item-heading2 {\n  font-size: 24px;\n}\n.lake-button-set-list-item-heading3 {\n  font-size: 20px;\n}\n.lake-button-set-list-item-heading4 {\n  font-size: 16px;\n}\n.lake-button-set-list-item:hover {\n  color: #262626;\n  background-color: #f5f5f5;\n}\n.lake-button-set-list-item-icon .lake-icon {\n  color: #595959;\n  font-size: 16px;\n}\n.lake-button-set-list-hoz {\n  padding: 0 0;\n  right: 0;\n  left: auto;\n  height: 40px;\n  white-space: nowrap;\n}\n.lake-button-set-list-with-dot .lake-button-set-list-item {\n  padding-left: 30px;\n  padding-right: 16px;\n  white-space: nowrap;\n}\n.lake-button-set-list-colorboard {\n  left: 2px;\n}\n.lake-button-set-emode {\n  text-align: left;\n}\n.lake-button-set-emode .lake-button-set-list {\n  width: 240px;\n  left: 50%;\n  margin-left: -120px;\n  padding: 12px 12px;\n}\n.lake-button-set-emode .button-set-list-item {\n  display: block;\n  padding: 8px 12px 8px 48px;\n  border: 1px solid transparent;\n  position: relative;\n  margin-bottom: 8px;\n  border-radius: 3px 3px;\n}\n.lake-button-set-emode .button-set-list-item:last-child {\n  margin-bottom: 0;\n}\n.lake-button-set-emode .button-set-list-item .icon {\n  position: absolute;\n  width: 24px;\n  height: 24px;\n  line-height: 24px;\n  display: block;\n  top: 16px;\n  left: 17px;\n  text-align: center;\n  color: #ddd;\n}\n.lake-button-set-emode .button-set-list-item .title {\n  display: block;\n  font-size: 14px;\n  color: #666;\n}\n.lake-button-set-emode .button-set-list-item .desc {\n  display: block;\n  font-size: 12px;\n  color: #999;\n}\n.lake-button-set-emode .button-set-list-item:hover {\n  border: 1px solid #e8e8e8;\n  background: #f8f8f8;\n}\n.lake-button-set-emode .button-set-list-item-active .icon,\n.lake-button-set-emode .button-set-list-item-active:hover .icon {\n  color: #25b864;\n}\n.lake-button-emoji-popover .ant-popover-inner-content {\n  padding: 0;\n}\n.lake-button-emoji-popover .lake-button-emoji-panel {\n  width: 224px;\n  padding: 4px 4px;\n  transition: none;\n}\n.lake-button-emoji-popover .lake-button-emoji-panel .lake-button-set-list-item {\n  width: 72px;\n  height: 96px;\n  padding: 4px 4px;\n  display: inline-block;\n  line-height: unset;\n  text-align: center;\n}\n.lake-button-emoji-popover .lake-button-emoji-panel .lake-button-set-list-item img {\n  margin: 0 auto;\n  height: 64px;\n  width: 64px;\n}\n.lake-button-emoji-popover .lake-button-emoji-panel .lake-button-set-list-item .lake-emoji-title {\n  font-size: 12px;\n  color: #8C8C8C;\n  line-height: 24px;\n}\n.lake-mini-editor .lake-button-set-list {\n  transition: none;\n}\n.lake-toolbar-more .lake-button-set {\n  z-index: 9;\n}\n.lake-button-icon-list > span > .lake-icon {\n  margin-right: 5px;\n}\n.lake-icon-svgs svg {\n  margin-bottom: -2px;\n}\n.lake-colorboard-group {\n  display: flex;\n  width: 100%;\n  height: auto;\n  position: relative;\n}\n.lake-colorboard-group:first-child {\n  margin-bottom: 10px;\n}\n.lake-colorboard-group:nth-child(2) {\n  margin-bottom: 6px;\n}\n.lake-colorboard-group:last-child {\n  margin-bottom: 0px;\n}\n.lake-colorboard-group-item {\n  width: 24px;\n  height: 24px;\n  padding: 2px 2px;\n  display: inline-block;\n  border-radius: 3px 3px;\n  border: 1px solid transparent;\n  flex: 0 0 auto;\n  cursor: pointer;\n  background-color: #fff;\n}\n.lake-colorboard-group-item > span {\n  position: relative;\n  width: 18px;\n  height: 18px;\n  display: block;\n  border-radius: 2px 2px;\n  border: 1px solid transparent;\n}\n.lake-colorboard-group-item > span svg {\n  position: absolute;\n  top: -1px;\n  left: 1px;\n  width: 12px;\n  height: 12px;\n}\n.lake-colorboard-group-item-border > span {\n  border: 1px solid #e8e8e8;\n}\n.lake-colorboard-group-item-special {\n  position: relative;\n}\n.lake-colorboard-group-item-special:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: 10px;\n  left: 0px;\n  z-index: 1;\n  width: 22px;\n  height: 0;\n  border-bottom: 2px solid #ff5151;\n  transform: rotate(45deg);\n}\n.lake-colorboard-group-item-special svg {\n  z-index: 2;\n}\n.lake-colorboard-group-item:hover {\n  border: 1px solid #d9d9d9;\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.12);\n}\n.lake-collapse-button .lake-button {\n  padding: 0 6px;\n}\n.lake-toolbar-collapse {\n  min-width: 200px;\n  font-weight: normal;\n  max-height: calc(90vh - 120px);\n  overflow-y: auto;\n}\n.lake-toolbar-collapse .lake-sub-new-tag {\n  display: inline-block;\n  position: relative;\n  height: 12px;\n  background: #25B864;\n  color: white;\n  border-radius: 1px;\n  margin-left: 12px;\n  margin-top: 5px;\n  padding-left: 6px;\n  padding-right: 2px;\n  line-height: 11px;\n  font-size: 10px;\n  outline: 1px solid #25B864;\n}\n.lake-toolbar-collapse .lake-collapse-item-sub-title {\n  display: block;\n  font-size: 12px;\n  margin-top: 6px;\n  white-space: nowrap;\n  color: rgba(0, 0, 0, 0.45);\n}\n.lake-toolbar-collapse .lake-sub-new-tag::before {\n  content: \' \';\n  width: 6px;\n  height: 6px;\n  background: #25B864;\n  transform: rotate(45deg);\n  position: absolute;\n  left: -4px;\n  top: 3px;\n  border-radius: 1px;\n}\n.lake-toolbar-collapse.lake-scrollable.scroll-y {\n  padding-right: 0;\n}\n.lake-toolbar-collapse.ant-collapse {\n  background-color: #fff;\n  border: 0;\n  line-height: 1.5;\n}\n.lake-toolbar-collapse.ant-collapse > .ant-collapse-item {\n  border: 0;\n}\n.lake-toolbar-collapse.ant-collapse > .ant-collapse-item > .ant-collapse-header {\n  padding: 2px 16px;\n  text-align: left;\n  color: #8C8C8C;\n  font-weight: bold;\n  font-size: 12px;\n  line-height: 24px;\n}\n.lake-toolbar-collapse.ant-collapse .ant-collapse-item-disabled > .ant-collapse-header {\n  color: rgba(0, 0, 0, 0.45);\n  cursor: default;\n}\n.lake-toolbar-collapse .ant-collapse-content {\n  border: 0;\n}\n.lake-toolbar-collapse .ant-collapse-content > .ant-collapse-content-box {\n  padding: 0;\n}\n.lake-toolbar-collapse .ant-upload.ant-upload-select {\n  display: block;\n}\n.lake-toolbar-collapse .lake-collapse-list-item {\n  display: flex;\n  padding: 16px;\n  padding-top: 6px;\n  padding-bottom: 4px;\n  height: 36px;\n  overflow: hidden;\n  min-width: 200px;\n  cursor: pointer;\n}\n.lake-toolbar-collapse .lake-collapse-list-item.disable {\n  cursor: not-allowed;\n}\n.lake-toolbar-collapse .lake-collapse-list-item.disable > div {\n  opacity: 0.3;\n}\n.lake-toolbar-collapse .lake-collapse-list-item .lake-collapse-item-icon {\n  display: block;\n  line-height: 12px;\n  color: #ffffff;\n  background: #ffffff;\n  border: 1px solid #e8e8e8;\n  border-radius: 2px;\n  width: 24px;\n  height: 24px;\n}\n.lake-toolbar-collapse .lake-collapse-list-item .lake-collapse-item-icon .lake-svg-icon {\n  width: 22px;\n  height: 22px;\n}\n.lake-toolbar-collapse .lake-collapse-list-item .lake-collapse-item-text {\n  display: block;\n  text-align: left;\n  margin-left: 8px;\n  font-size: 14px;\n}\n.lake-toolbar-collapse .lake-collapse-list-item .lake-collapse-item-text .lake-collapse-item-title {\n  display: block;\n  color: #595959;\n  line-height: 24px;\n}\n.lake-toolbar-collapse .lake-collapse-list-item .lake-collapse-item-text .lake-collapse-item-description {\n  display: block;\n  color: #8C8C8C;\n  font-size: 12px;\n}\n.lake-toolbar-collapse .lake-collapse-list-item .uploader {\n  display: none;\n}\n.lake-toolbar-collapse .lake-collapse-list-item-active {\n  background-color: #f4f4f4;\n}\n.lake-toolbar-collapse-description {\n  color: #8C8C8C;\n  padding: 4px 16px 0 16px;\n}\n.lake-toolbar-collapse-description .description {\n  font-size: 12px;\n  line-height: 20px;\n  text-align: left;\n  padding-bottom: 8px;\n  margin-bottom: 6px;\n  border-bottom: 1px solid #e8e8e8;\n}\n.lake-toolbar-collapse-description .description code {\n  background-color: #F5F5F5;\n  border-radius: 4px;\n  padding: 2px;\n  border: 1px solid #D9D9D9;\n}\n.lake-toolbar-collapse-no-header .ant-collapse-header,\n.lake-button-set-list-search .ant-collapse-header {\n  display: none;\n}\n.lake-cardselect-list .lake-toolbar-collapse {\n  min-width: 200px;\n  max-height: 450px;\n}\n.lake-cardselect-list .lake-toolbar-collapse .lake-collapse-list-item {\n  min-width: 200px;\n}\n.lake-cardselect-list .lake-toolbar-collapse .ant-collapse-item {\n  padding: 16px 0 0 0;\n}\n.lake-cardselect-list .lake-toolbar-collapse .ant-collapse-item:last-child {\n  padding-bottom: 16px;\n}\n.lake-cardselect-list .lake-toolbar-collapse .ant-collapse-item .ant-collapse-header {\n  font-size: 12px!important;\n  line-height: 12px!important;\n  padding-top: 0!important;\n  padding-bottom: 0!important;\n  margin-bottom: 12px!important;\n  color: rgba(0, 0, 0, 0.25) !important;\n  font-weight: normal!important;\n}\n.lake-cardselect-list .lake-toolbar-collapse .ant-collapse-item .ant-collapse-content {\n  border-radius: unset!important;\n}\n.lake-cardselect-list .lake-toolbar-collapse .ant-collapse-item .ant-collapse-content .lake-collapse-list-item {\n  padding-top: 6px;\n  padding-bottom: 6px;\n}\n.lake-cardselect-list .lake-toolbar-collapse .ant-collapse-item .ant-collapse-content .lake-collapse-list-item.no-border {\n  padding-top: 8px;\n  padding-bottom: 8px;\n}\n.lake-cardselect-list .lake-toolbar-collapse .ant-collapse-item .ant-collapse-content .lake-collapse-list-item.no-border .lake-collapse-item-icon {\n  border: none;\n}\n.lake-cardselect-list .lake-toolbar-collapse .ant-collapse-item .ant-collapse-content .lake-collapse-list-item.no-border .lake-collapse-item-icon .lake-svg-icon {\n  width: 24px;\n  height: 24px;\n  background-size: 24px 24px;\n}\n.lake-cardselect-list .lake-button-set-list {\n  margin-left: 1px;\n  padding: 0;\n}\n.lake-cardselect-list .lake-button-set-list.lake-button-set-list-to-top {\n  top: auto;\n  bottom: 100%;\n}\n.lake-toolbar-collapse-hot-key-tips {\n  color: rgba(0, 0, 0, 0.65);\n  border-bottom: 1px solid #E8E8E8;\n  margin: 2px 16px;\n  padding-top: 2px;\n  padding-bottom: 6px;\n}\n.lake-upload-panel-popover.ant-popover-placement-rightBottom {\n  padding-left: 5px;\n}\n.lake-upload-panel-popover .ant-popover-arrow {\n  display: none;\n}\n.lake-upload-panel-popover .ant-popover-inner-content {\n  padding: 0;\n}\n.lake-upload-panel-main-btns {\n  font-size: 14px;\n  line-height: 18px;\n  color: rgba(0, 0, 0, 0.65);\n  padding: 14px 20px;\n  cursor: pointer;\n}\n.lake-upload-panel-main-btns:HOVER {\n  color: rgba(0, 0, 0, 0.85);\n  background-color: #F4F4F4;\n}\n.lake-upload-panel-main-btns .lake-svg-icon {\n  width: 16px;\n  height: 16px;\n  margin: 0 16px 0 4px;\n  transform: translateY(0.5px);\n}\n.lake-upload-panel-item-box {\n  border-top: 1px solid #EBEBEB;\n  padding: 12px 0;\n}\n.lake-upload-panel-item {\n  display: flex;\n  cursor: pointer;\n  padding: 6px 20px;\n  user-select: none;\n}\n.lake-upload-panel-item:HOVER {\n  color: rgba(0, 0, 0, 0.85);\n  background-color: #F4F4F4;\n}\n.lake-upload-panel-item-title {\n  font-size: 14px;\n  line-height: 18px;\n  color: rgba(0, 0, 0, 0.65);\n}\n.lake-upload-panel-item-title:last-child {\n  line-height: 24px;\n}\n.lake-upload-panel-item-subtitle {\n  font-size: 12px;\n  line-height: 12px;\n  margin-top: 8px;\n  color: rgba(0, 0, 0, 0.35);\n}\n.lake-upload-panel-item-icon {\n  width: 24px;\n  height: 24px;\n  margin-right: 12px;\n}\n.lake-upload-panel-item-icon .lake-svg-icon {\n  width: 24px;\n  height: 24px;\n  background-size: 24px 24px;\n}\n.lake-upload-panel-group-title {\n  padding: 4px 20px;\n  margin-bottom: 2px;\n  font-size: 12px;\n  color: rgba(0, 0, 0, 0.25);\n}\n.lake-upload-panel-localdoc {\n  min-width: 273px;\n}\n.lake-upload-panel-thirdparty {\n  min-width: 169px;\n}\n.lake-zoom {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 1033;\n  width: 100%;\n  height: 100vh;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n}\n.lake-zoom-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.9);\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity 0.1s;\n  cursor: zoom-out;\n}\n.lake-zoom-overlay-active {\n  opacity: 1;\n  visibility: visible;\n}\n.lake-zoom-toolbar {\n  position: absolute;\n  width: 100%;\n  height: 40px;\n  background: rgba(0, 0, 0, 0.5);\n  top: 0;\n  left: 0;\n  right: 0;\n  display: block;\n  z-index: 1100;\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity 0.1s;\n}\n.lake-zoom-toolbar .text {\n  display: inline-block;\n  padding: 0 5px;\n}\n.lake-zoom-toolbar-active {\n  opacity: 1;\n  visibility: visible;\n}\n.lake-zoom-toolbar-item {\n  float: right;\n  display: block;\n  width: 40px;\n  height: 40px;\n  line-height: 40px;\n  font-size: 16px;\n  color: rgba(255, 255, 255, 0.8);\n  text-align: center;\n}\n.lake-zoom-toolbar-item:hover {\n  color: rgba(255, 255, 255, 0.96);\n}\n.lake-zoom-toolbar-item-left {\n  float: left;\n  width: auto;\n  padding: 0 16px;\n}\n.lake-zoom-center {\n  position: relative;\n  width: 1px;\n  height: 1px;\n  display: flex;\n  justify-content: center;\n  flex-shrink: 0;\n  transition: transform 0.1s, top 0.1s, left 0.1s, opacity 0.1s;\n  cursor: pointer;\n}\n.lake-zoom-center-canzoom {\n  cursor: zoom-in;\n}\n.lake-zoom-center img {\n  background: #fff;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);\n  border-radius: 2px 2px;\n}\n.lake-zoom-center-iszooming {\n  cursor: -webkit-grab;\n  cursor: -moz-grab;\n  cursor: -o-grab;\n  cursor: -ms-grab;\n  cursor: grab;\n}\n.lake-zoom-center-isdraging {\n  cursor: -webkit-grabbing;\n  cursor: -moz-grabbing;\n  cursor: -o-grabbing;\n  cursor: -ms-grabbing;\n  cursor: grabbing;\n}\n.lake-zoom-content {\n  transition: transform 0.1s, top 0.1s, left 0.1s;\n}\n.lake-zoom-content-iswheeling,\n.lake-zoom-content-isdraging {\n  transition: none;\n}\n.lake-zoom-next,\n.lake-zoom-prev {\n  position: absolute;\n  width: 48px;\n  height: 48px;\n  display: block;\n  top: 50%;\n  margin-top: -24px;\n  background: rgba(0, 0, 0, 0.8);\n  z-index: 1100;\n  text-align: center;\n  line-height: 48px;\n  cursor: pointer;\n}\n.lake-zoom-next:hover,\n.lake-zoom-prev:hover {\n  color: #f9f9f9;\n  background: rgba(0, 0, 0, 0.9);\n}\n.lake-zoom-prev {\n  left: 0;\n}\n.lake-zoom-next {\n  right: 0;\n}\n.lake-engine [data-card-type][data-lake-card="emoji"] *::selection {\n  background: rgba(27, 162, 227, 0.2) !important;\n}\n.lake-emoji {\n  display: inline-block;\n  width: 18px;\n  height: 18px;\n  line-height: inherit;\n  vertical-align: middle;\n  background-size: contain;\n  background-position: 0 0;\n  background-repeat: no-repeat;\n  margin-top: -3px;\n  margin-left: 1px;\n  margin-right: 1px;\n}\n.lake-emoji-portal {\n  position: absolute;\n  background: #ffffff;\n  border: 1px solid #e8e8e8;\n  border-radius: 3px 3px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.12);\n  height: auto;\n  width: 175px;\n  padding: 5px 5px;\n  z-index: 1;\n}\n.lake-emoji-portal-list-item {\n  width: 30px;\n  height: 30px;\n  padding: 5px 5px;\n  display: inline-block;\n  vertical-align: middle;\n  margin: 0 1px;\n}\n.lake-emoji-portal-list-item img {\n  display: block;\n  margin: 0 auto;\n  height: 20px;\n  width: 20px;\n}\n.lake-emoji-portal-list-item:hover,\n.lake-emoji-portal-list-item-active {\n  background: #f5f5f5;\n  cursor: pointer;\n}\n.lake-emoji-que {\n  width: 64px;\n  height: 64px;\n}\n@keyframes lake-plugin-loading {\n  0% {\n    opacity: 0.5;\n    transform: translate3d(0, -40%, 0) scale(0.6);\n  }\n  30% {\n    opacity: 1;\n  }\n  70% {\n    opacity: 1;\n    transform: translate3d(0, -40%, 0) scale(1);\n  }\n  100% {\n    opacity: 0;\n    transform: translate3d(0, -160%, 0) scale(1);\n  }\n}\n.lake-plugin-loading {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin-top: -3px;\n  margin-left: -12px;\n  display: inline-block;\n  width: 24px;\n  height: 6px;\n}\n.lake-plugin-loading span,\n.lake-plugin-loading:before,\n.lake-plugin-loading:after {\n  display: block;\n  position: absolute;\n  width: 6px;\n  height: 6px;\n  border-radius: 3px 3px;\n  background: rgba(0, 0, 0, 0.2);\n}\n.lake-plugin-loading:before {\n  content: " ";\n  left: 0px;\n  animation: lake-plugin-loading 0.8s infinite;\n}\n.lake-plugin-loading span {\n  left: 50%;\n  margin-left: -3px;\n  animation: lake-plugin-loading 0.8s infinite 0.1s;\n}\n.lake-plugin-loading:after {\n  content: " ";\n  right: 0px;\n  animation: lake-plugin-loading 0.8s infinite 0.2s;\n}\n.lake-anticon {\n  display: inline-block;\n  font-style: normal;\n  vertical-align: -0.125em;\n  text-align: center;\n  text-transform: none;\n  line-height: 0;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n}\n.lake-anticon svg {\n  display: inline-block;\n}\n.lake-anticon .lake-anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n.lake-anticon > * {\n  line-height: 1;\n}\nspan[data-lake-card="image"].lake-card-block.lake-image-left,\nspan[data-lake-card="image"].lake-card-block.lake-image-center,\nspan[data-lake-card="image"].lake-card-block.lake-image-right {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  align-items: flex-start;\n}\nspan[data-lake-card="image"].lake-card-block.lake-image-right {\n  text-align: right;\n  justify-content: flex-end;\n}\nspan[data-lake-card="image"].lake-card-block.lake-image-left {\n  text-align: left;\n  justify-content: flex-start;\n}\nspan[data-lake-card="image"].lake-card-block.lake-image-center {\n  text-align: center;\n  justify-content: center;\n}\n.lake-image-meta {\n  position: relative;\n  color: #595959;\n  line-height: 0;\n}\n.lake-image-meta::before {\n  content: \' \';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 1;\n  pointer-events: none;\n}\n.lake-image-meta.border::before {\n  border: 1px solid #e5e5e5;\n}\n.lake-image-meta.shadow::before {\n  box-shadow: 0 3px 6px 0 rgba(0, 0, 0, 0.15);\n}\n.lake-image-meta-loading {\n  background: #f5f5f5;\n}\n.lake-image-meta-isgif .gif {\n  position: absolute;\n  top: 4px;\n  right: 10px;\n  width: 24px;\n  height: 24px;\n  background: url(\'https://gw.alipayobjects.com/zos/rmsportal/TIlWxRwDPKtkAhmXUmVV.png\') no-repeat 0 0;\n  background-size: cover;\n  display: inline-block;\n  opacity: 1;\n  visibility: visible;\n  transition: all 0.3s ease-in-out;\n}\n.lake-image-meta-isgif .gif-active {\n  opacity: 0;\n  visibility: hidden;\n}\n.lake-image-meta .desc {\n  color: #8C8C8C;\n}\n.lake-image-meta .title {\n  line-height: 24px;\n  font-size: 14px;\n  display: inline-block;\n  color: #262626;\n  font-weight: 400;\n}\n.lake-image-meta .size {\n  color: #8C8C8C;\n}\n.lake-image-meta .progress {\n  padding-left: 8px;\n  color: rgba(255, 255, 255, 0.9);\n}\n.lake-image-meta .progress .anticon {\n  color: rgba(255, 255, 255, 0.9);\n  line-height: 24px;\n  margin-right: 10px;\n}\n.lake-image-meta .lake-image-warning {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin-top: -12px;\n  margin-left: -12px;\n  display: inline-block;\n  width: 24px;\n  height: 24px;\n  font-size: 24px;\n  color: #faad14;\n  cursor: pointer;\n}\n.lake-image-content {\n  position: relative;\n  border-radius: 3px 3px;\n  background: #f5f5f5;\n}\n.lake-image-content .lake-void-first {\n  left: -3px;\n}\n.lake-image-content .lake-void-last {\n  right: -3px;\n}\n.lake-image-content-isover,\n.lake-image-content-issuccess {\n  border: 1px solid #b7eb8f;\n  background: #f6ffed;\n}\n.lake-image-content-isfail:not(.lake-image-content-isover) {\n  border: 0;\n  background: #f5f5f5;\n}\n.lake-image-content-istmp,\n.lake-image-content-isvalid {\n  display: inline-block;\n  border-radius: 0 0;\n  padding: 0 0;\n  background: transparent;\n  border-color: transparent;\n}\n.lake-image-content-istmp .lake-image-meta,\n.lake-image-content-isvalid .lake-image-meta {\n  display: inline-block;\n}\n.lake-image-content-istmp .lake-image-meta .image,\n.lake-image-content-isvalid .lake-image-meta .image {\n  display: inline-block;\n  width: 100%;\n  opacity: 0.6;\n  text-align: left;\n  cursor: pointer;\n  transition: opacity 0.3s ease-in-out, box-shadow 0.3s ease-in-out;\n  -webkit-user-select: none;\n  user-select: none;\n}\n.lake-image-content-istmp .lake-image-meta .progress,\n.lake-image-content-isvalid .lake-image-meta .progress {\n  font-family: \'Lucida Console\', Consolas, Monaco, \'Andale Mono\', \'Ubuntu Mono\', monospace;\n  position: absolute;\n  bottom: 8px;\n  right: 8px;\n  font-size: 12px;\n  line-height: 24px;\n  color: rgba(255, 255, 255, 0.9);\n  padding: 0 6px;\n  border-radius: 2px 2px;\n  background: rgba(0, 0, 0, 0.8);\n  white-space: nowrap;\n}\n.lake-image-content-isvalid .lake-image-meta .image {\n  opacity: 1;\n}\n.lake-image-editor {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  z-index: 1;\n}\n.lake-image-editor-holder {\n  position: absolute;\n  width: 12px;\n  height: 12px;\n  border: 2px solid #fff;\n  background: #1890ff;\n  display: inline-block;\n}\n.lake-image-editor-holder-45 {\n  top: -6px;\n  right: -6px;\n  cursor: nesw-resize;\n}\n.lake-image-editor-holder-135 {\n  bottom: -6px;\n  right: -6px;\n  cursor: nwse-resize;\n}\n.lake-image-editor-holder-225 {\n  bottom: -6px;\n  left: -6px;\n  cursor: nesw-resize;\n}\n.lake-image-editor-holder-315 {\n  left: -6px;\n  top: -6px;\n  cursor: nwse-resize;\n}\n.lake-image-editor-bg {\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  cursor: pointer;\n  width: 100%;\n  height: 100%;\n  opacity: 0;\n}\n.lake-image-editor-bg-active {\n  opacity: 0.3;\n}\n.lake-image-editor-number {\n  position: absolute;\n  display: inline-block;\n  line-height: 24px;\n  padding: 0 4px;\n  font-size: 12px;\n  border-radius: 3px 3px;\n  background: rgba(0, 0, 0, 0.86);\n  color: rgba(255, 255, 255, 0.96);\n  font-family: \'Lucida Console\', Consolas, Monaco, \'Andale Mono\', \'Ubuntu Mono\', monospace;\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity 0.3s ease-in-out;\n  transform: scale(0.8);\n}\n.lake-image-editor-number-45 {\n  top: 0;\n  right: -6px;\n  transform: translateX(100%) scale(0.8);\n}\n.lake-image-editor-number-135 {\n  right: -6px;\n  bottom: 0;\n  transform: translateX(100%) scale(0.8);\n}\n.lake-image-editor-number-225 {\n  left: -6px;\n  bottom: 0;\n  transform: translateX(-100%) scale(0.8);\n}\n.lake-image-editor-number-315 {\n  left: -6px;\n  top: 0;\n  transform: translateX(-100%) scale(0.8);\n}\n.lake-image-editor-number-active {\n  opacity: 1;\n  visibility: visible;\n}\n.lake-image-editor-maximize {\n  position: absolute;\n  z-index: 2;\n  right: 10px;\n  top: 10px;\n  background-color: rgba(0, 0, 0, 0.65);\n  width: 20px;\n  height: 20px;\n  text-align: center;\n  font-size: 16px;\n  color: #fff;\n  line-height: 20px;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.08);\n  cursor: pointer;\n}\n.lake-image-editor-maximize .lake-icon-full-screen {\n  margin-left: 1px;\n}\n.lake-image {\n  position: relative;\n  display: inline-block;\n  font-size: 14px;\n  text-align: left;\n  border-radius: 3px 3px;\n  line-height: 24px;\n  text-indent: 0;\n  -webkit-user-select: none;\n  user-select: none;\n}\n.lake-image .ant-upload-drag-container {\n  position: relative;\n}\n.lake-image-block {\n  display: block;\n}\n.lake-image:hover .lake-image-content:not(.lake-image-content-isover):not(.lake-image-content-isfail):not(.lake-image-content-isvalid):not(.lake-image-content-istmp),\n.lake-image-active .lake-image-content:not(.lake-image-content-isover):not(.lake-image-content-isfail):not(.lake-image-content-isvalid):not(.lake-image-content-istmp) {\n  border-color: #f5f5f5;\n  background: #f5f5f5;\n}\n.lake-image:hover .lake-embed-toolbar-inline {\n  opacity: 1;\n  visibility: visible;\n}\n.lake-image .ant-upload.ant-upload-drag {\n  padding: 0;\n  border: none;\n  text-align: left;\n}\n.lake-image .ant-upload.ant-upload-drag.ant-upload-drag-hover:not(.ant-upload-disabled) {\n  border: none;\n}\n.lake-image .lake-embed-toolbar-item-input {\n  padding-left: 10px;\n  padding-right: 10px;\n}\n.lake-engine-view .lake-image-content-isvalid .lake-image-meta > .image {\n  cursor: zoom-in;\n  user-select: auto;\n}\n.lake-engine-view a .lake-image-content-isvalid .lake-image-meta > .image {\n  cursor: pointer;\n}\n.lake-image.doc-embed-view .lake-image-content-isvalid .lake-image-meta > .image {\n  cursor: default;\n}\n.lake-image.doc-embed-view .lake-image-editor-maximize {\n  display: none;\n}\n.lake-image-mask {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n}\n.lake-image-mask-point {\n  position: absolute;\n  display: inline-block;\n  color: transparent !important;\n  pointer-events: none;\n  min-height: auto !important;\n  line-height: 1 !important;\n  text-shadow: none !important;\n  white-space: nowrap;\n  word-break: break-all;\n}\n[data-lake-card="file"] {\n  background: transparent;\n}\n[data-lake-card="file"] .lake-card-toolbar.lake-embed-toolbar-block {\n  top: -40px;\n  min-width: unset;\n}\n.lake-engine [data-lake-card="file"] {\n  border: none;\n}\n.lake-engine-view .lake-card-embed-toolbar-active .lake-file-done {\n  background-color: #f5f5f5;\n}\n@media only screen and (max-width: 960px) {\n  .lake-engine-view .lake-card-embed-toolbar-active .lake-file-done {\n    background-color: rgba(27, 162, 227, 0.2);\n  }\n}\n.lake-file {\n  display: flex;\n  height: 24px;\n  line-height: 24px;\n  cursor: pointer;\n  white-space: nowrap;\n}\n.lake-file .lake-file-icon {\n  flex: auto;\n  width: 24px;\n  height: 24px;\n  font-size: 16px;\n  text-align: center;\n  margin-right: 4px;\n}\n.lake-file .lake-file-title {\n  flex: auto;\n  font-size: 14px;\n  margin-right: 8px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.lake-file .lake-file-size {\n  flex: auto;\n  font-size: 12px;\n}\n.lake-file-done {\n  color: #096DD9;\n}\n.lake-file-transfering {\n  color: #999;\n}\n.lake-file-uploading,\n.lake-file-error {\n  color: #595959;\n}\n.lake-file-uploading .lake-file-size,\n.lake-file-error .lake-file-size {\n  color: #8C8C8C;\n}\n.lake-toc-sidebar .lake-sidebar-content {\n  overflow: auto;\n  height: calc(100vh - 164px);\n  margin-left: -30px;\n}\n.lake-sidebar.lake-toc-sidebar {\n  overflow: visible;\n}\n.lake-card-cover-mask {\n  position: absolute;\n  opacity: 0;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 3;\n}\n.lake-engine::selection {\n  background: rgba(27, 162, 227, 0.2);\n  color: inherit;\n}\n.lake-engine ::selection {\n  background: rgba(27, 162, 227, 0.2);\n  color: inherit;\n}\n.lake-engine [data-lake-card]::selection {\n  background: transparent;\n}\n.lake-engine [data-lake-card="codeblock"] *::selection,\n.lake-engine [data-lake-card="diagram"] *::selection {\n  background: transparent !important;\n}\n.lake-engine [data-lake-card] *::selection {\n  background: transparent;\n}\n.lake-engine [data-card-type="block"].lake-activated *::selection {\n  background: rgba(27, 162, 227, 0.2);\n}\n.lake-engine [data-card-type].lake-activated input::selection {\n  background: rgba(27, 162, 227, 0.2);\n}\n.lake-engine [data-card-type].lake-activated textarea::selection {\n  background: rgba(27, 162, 227, 0.2);\n}\n.lake-engine [data-lake-card].lake-selected [data-card-element="center"].lake-selected-background {\n  background: rgba(27, 162, 227, 0.2);\n}\n.lake-engine [data-lake-card].lake-selected [data-card-element="center"].lake-selected-outline {\n  outline: 2px solid #1890ff;\n}\n.lake-engine.show-placeholder::before {\n  display: block;\n}\n.lake-engine::before {\n  display: none;\n  position: absolute;\n  content: attr(data-placeholder);\n  color: #bfbfbf;\n}\n*,\n*::before,\n*::after {\n  box-sizing: border-box;\n}\n.lake-toolbar-tooltip.ant-tooltip {\n  white-space: nowrap;\n}\n.lake-max-editor {\n  position: relative;\n  width: 100%;\n  min-width: 1440px;\n  height: calc(100vh - 56px);\n}\n.lake-max-editor-wrapper {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  background-color: #f9f9f9;\n  transition: height 0.25s cubic-bezier(0.3, 1.2, 0.2, 1);\n}\n.lake-max-editor-wrapper-content {\n  width: 100%;\n  height: calc(100% - 40px);\n  overflow: auto;\n}\n.lake-max-editor-wrapper-content .lake-max-editor-content {\n  width: 100%;\n  margin: 0 auto;\n  background-color: #f9f9f9;\n  padding: 16px 0 64px 0;\n}\n.lake-max-editor-wrapper-content .lake-content-editor {\n  border: 1px solid #e8e8e8;\n  box-shadow: 0 2px 8px rgba(115, 115, 115, 0.08);\n}\n.lake-max-editor-wrapper-content .lake-content-editor-extra {\n  position: relative;\n  padding: 32px 60px 0 60px;\n}\n.lake-max-editor-wrapper-content .lake-content-editor-extra .lake-meta {\n  padding-bottom: 32px;\n  border-bottom: 1px solid #e8e8e8;\n}\n.lake-max-editor-wrapper-content .lake-content-editor-core {\n  position: relative;\n  background-color: transparent;\n  min-height: 1024px;\n  padding: 20px 60px 90px 60px;\n}\n.lake-mini-editor {\n  position: relative;\n  border: 1px solid #e8e8e8;\n  border-radius: 3px 3px;\n  padding-bottom: 40px;\n}\n.lake-mini-editor .lake-content-editor {\n  padding: 0;\n  width: 100%;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n  border-radius: 3px 3px;\n}\n.lake-mini-editor .lake-content-editor-core {\n  min-height: 180px;\n  padding: 8px;\n}\n.lake-mini-editor .lake-engine {\n  padding-bottom: 40px;\n}\n.lake-content-editor {\n  position: relative;\n  margin: 0 auto;\n  background: #ffffff;\n  width: 874px;\n  font-family: \'Tahoma For Number\', \'Chinese Quote\', -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, \'PingFang SC\', \'Hiragino Sans GB\', \'Microsoft YaHei\', \'Helvetica Neue\', Helvetica, Arial, sans-serif;\n  font-size: 14px;\n  color: #262626;\n  cursor: text;\n  white-space: normal;\n}\n.lake-mobile-editor {\n  position: relative;\n  min-height: 100vh;\n  padding-top: 40px;\n  overflow: auto;\n}\n.lake-mobile-editor .lake-content-editor {\n  width: 100%;\n  min-height: 100%;\n  overflow: auto;\n}\n.lake-mobile-editor .lake-content-editor .lake-content-editor-core {\n  min-height: calc(100vh - 60px);\n  padding: 10px 16px;\n}\n.lake-mobile-editor .lake-content-editor .lake-content-editor-extra {\n  margin: 0 16px;\n  padding-top: 16px;\n}\n.lake-mobile-editor .lake-content-editor .lake-content-editor-extra .bi-meta-title {\n  padding-bottom: 0;\n}\n.lake-mobile-editor .lake-content-editor .lake-content-editor-extra .bi-meta-title-input {\n  font-size: 24px;\n}\n@media only screen and (max-width: 1440px) {\n  .lake-max-editor {\n    min-width: 1280px;\n  }\n}\n@media only screen and (min-width: 1884px) {\n  .lake-common-sidebar {\n    right: calc(50% - 480px - 436px + 12px);\n  }\n}\n.lake-max-editor.lake-adaptive-width {\n  min-width: 646px;\n}\n.lake-max-editor.lake-adaptive-width .lake-toolbar-content-plugins.lake-toolbar-content-plugins-hide {\n  height: 39px;\n  overflow: hidden;\n}\n.lake-max-editor.lake-adaptive-width .lake-content-editor {\n  width: calc(100% - 32px);\n}\n.lake-max-editor.lake-adaptive-width .lake-toolbar-content {\n  padding-left: 72px;\n  text-align: left;\n  white-space: nowrap;\n}\n.lake-max-editor.lake-adaptive-width .lake-common-sidebar {\n  left: 80%;\n  width: calc(20% - 24px);\n}\n.lake-max-editor.lake-adaptive-width .lake-common-sidebar.lake-toc-sidebar {\n  left: 80.7%;\n  width: calc(19.3% - 24px);\n}\n.lake-max-editor.lake-adaptive-width .lake-no-paper .lake-content-editor {\n  width: calc(100%);\n}\n.lake-max-editor.lake-adaptive-width.lake-has-sidebar .lake-content-editor {\n  margin-right: calc(19.7% - 8px);\n  width: calc(80.3% - 8px);\n}\n.lake-max-editor.lake-adaptive-width.lake-has-sidebar .lake-max-editor-wrapper-content.lake-has-scroll-bar .lake-content-editor {\n  width: calc(80.3% + 8px);\n  margin-right: calc(19.7% - 22px);\n}\n.lake-max-editor.lake-adaptive-width.lake-no-paper .lake-content-editor {\n  width: calc(100%);\n  border: none;\n  box-shadow: none;\n}\n.lake-max-editor.lake-adaptive-width.lake-no-paper .lake-toolbar-content {\n  padding-left: 56px;\n}\n.lake-max-editor.lake-adaptive-width.lake-no-paper .lake-max-editor-wrapper-content .lake-max-editor-content {\n  padding: 0;\n  background-color: white;\n}\n.lake-max-editor.lake-adaptive-width.lake-no-paper .lake-sidebar {\n  padding-top: 44px;\n  background: white;\n}\n.lake-max-editor.lake-adaptive-width.lake-has-sidebar.lake-no-paper .lake-content-editor {\n  margin-right: calc(19.7% + 8px + 8px);\n  width: calc(80.3% - 8px - 8px);\n}\n.lake-max-editor.lake-adaptive-width.lake-has-sidebar.lake-no-paper .lake-max-editor-wrapper-content.lake-has-scroll-bar .lake-content-editor {\n  width: calc(80.3% + 8px - 8px);\n  margin-right: calc(19.7% - 8px + 8px);\n}\n.lake-max-editor.lake-adaptive-width.lake-no-paper.lake-has-sidebar .lake-content-editor-core {\n  padding-right: 8px;\n}\n.lake-max-editor.lake-adaptive-width.lake-no-paper.lake-has-sidebar .lake-content-editor-extra {\n  padding-right: 8px;\n}\n@media only screen and (max-width: 1351px) {\n  .lake-max-editor.lake-adaptive-width .lake-content-editor {\n    width: calc(100% - 32px);\n  }\n  .lake-max-editor.lake-adaptive-width .lake-common-sidebar {\n    padding-left: 0;\n  }\n  .lake-max-editor.lake-adaptive-width.lake-has-sidebar .lake-content-editor {\n    margin-right: 252px;\n    width: calc(100% - 252px - 2 * 8px);\n  }\n  .lake-max-editor.lake-adaptive-width.lake-has-sidebar .lake-common-sidebar {\n    left: calc(100% - 252px + 2 * 8px);\n    width: 220px;\n  }\n  .lake-max-editor.lake-adaptive-width.lake-has-sidebar .lake-common-sidebar.lake-toc-sidebar {\n    left: calc(100% - 252px + 3.5 * 8px);\n    width: 220px;\n  }\n  .lake-max-editor.lake-adaptive-width.lake-has-sidebar .lake-max-editor-wrapper-content.lake-has-scroll-bar .lake-content-editor {\n    margin-right: 252px;\n    width: calc(100% - 252px - 2 * 8px);\n  }\n  .lake-max-editor.lake-adaptive-width.lake-has-sidebar .lake-max-editor-wrapper-content.lake-has-scroll-bar .lake-common-sidebar {\n    left: calc(100% - 252px + 2 * 8px - 14px);\n    width: 220px;\n  }\n  .lake-max-editor.lake-adaptive-width.lake-no-paper .lake-common-sidebar {\n    left: calc(80.3% - 16px - 8px);\n    width: 19.7%;\n  }\n  .lake-max-editor.lake-adaptive-width.lake-has-sidebar.lake-no-paper .lake-content-editor {\n    margin-right: 252px;\n    width: calc(100% - 252px);\n  }\n  .lake-max-editor.lake-adaptive-width.lake-has-sidebar.lake-no-paper .lake-common-sidebar {\n    left: calc(100% - 252px + 2 * 8px);\n    width: 220px;\n  }\n  .lake-max-editor.lake-adaptive-width.lake-has-sidebar.lake-no-paper .lake-max-editor-wrapper-content.lake-has-scroll-bar .lake-content-editor {\n    margin-right: 252px;\n    width: calc(100% - 252px);\n  }\n  .lake-max-editor.lake-adaptive-width.lake-has-sidebar.lake-no-paper .lake-max-editor-wrapper-content.lake-has-scroll-bar .lake-common-sidebar {\n    left: calc(100% - 252px + 2 * 8px - 14px + 4px);\n    width: 220px;\n  }\n}\n.lake-anchor-button.lake-icon {\n  position: absolute;\n  width: 24px;\n  height: 24px;\n  line-height: 24px;\n  text-align: center;\n  font-size: 14px;\n  display: block;\n  background: rgba(255, 255, 255, 0.9);\n  color: #BFBFBF;\n  border-radius: 2px 2px;\n  cursor: pointer;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  opacity: 0;\n  visibility: hidden;\n  -webkit-transition: opacity 0.3s ease-in-out;\n  transition: opacity 0.3s ease-in-out;\n}\n.lake-anchor-button.lake-icon.lake-anchor-button-active {\n  opacity: 1;\n  visibility: visible;\n}\n.lake-anchor-button.lake-icon .lake-icon {\n  width: 18px;\n}\n.lake-anchor-button.lake-icon:hover {\n  background: #f5f5f5;\n  color: #595959;\n}\n.lake-engine-view h1,\n.lake-engine-view h2,\n.lake-engine-view h3,\n.lake-engine-view h4,\n.lake-engine-view h5,\n.lake-engine-view h6 {\n  position: relative;\n}\n.lake-engine-view h1 .lake-anchor,\n.lake-engine-view h2 .lake-anchor,\n.lake-engine-view h3 .lake-anchor,\n.lake-engine-view h4 .lake-anchor,\n.lake-engine-view h5 .lake-anchor,\n.lake-engine-view h6 .lake-anchor {\n  position: absolute;\n  left: -30px;\n  display: none;\n  width: 30px;\n}\n.lake-engine-view h1 .lake-anchor .lake-anchor-button,\n.lake-engine-view h2 .lake-anchor .lake-anchor-button,\n.lake-engine-view h3 .lake-anchor .lake-anchor-button,\n.lake-engine-view h4 .lake-anchor .lake-anchor-button,\n.lake-engine-view h5 .lake-anchor .lake-anchor-button,\n.lake-engine-view h6 .lake-anchor .lake-anchor-button {\n  position: relative;\n  visibility: visible;\n  opacity: 1;\n  text-align: center;\n}\n.lake-engine-view h1:hover,\n.lake-engine-view h2:hover,\n.lake-engine-view h3:hover,\n.lake-engine-view h4:hover,\n.lake-engine-view h5:hover,\n.lake-engine-view h6:hover {\n  position: relative;\n}\n.lake-engine-view h1:hover .lake-anchor,\n.lake-engine-view h2:hover .lake-anchor,\n.lake-engine-view h3:hover .lake-anchor,\n.lake-engine-view h4:hover .lake-anchor,\n.lake-engine-view h5:hover .lake-anchor,\n.lake-engine-view h6:hover .lake-anchor {\n  display: inline-block;\n}\n.lake-engine-view h1:target,\n.lake-engine-view h2:target,\n.lake-engine-view h3:target,\n.lake-engine-view h4:target,\n.lake-engine-view h5:target,\n.lake-engine-view h6:target {\n  position: relative;\n}\n.lake-engine-view h1:target .lake-anchor,\n.lake-engine-view h2:target .lake-anchor,\n.lake-engine-view h3:target .lake-anchor,\n.lake-engine-view h4:target .lake-anchor,\n.lake-engine-view h5:target .lake-anchor,\n.lake-engine-view h6:target .lake-anchor {\n  display: inline-block;\n  color: #51b063;\n}\n.lake-table-selected {\n  outline: 2px solid #1890FF;\n}\n.lake-table {\n  position: relative;\n  table-layout: fixed;\n  border-collapse: collapse;\n  border-spacing: 0;\n  word-wrap: break-word;\n  word-break: normal;\n  margin: 0;\n  font-weight: 400;\n  box-sizing: border-box;\n  border: 1px solid #d9d9d9;\n  cursor: default;\n  width: 96%;\n}\n.lake-table [data-lake-card="image"] {\n  margin: 0!important;\n}\n.lake-table.lake-no-border {\n  border: 1px solid transparent;\n}\n.lake-table.lake-no-border td {\n  border: 1px solid transparent;\n}\n.lake-table.drag-select {\n  cursor: nwse-resize;\n}\n.lake-table.drag-select.drag_n {\n  cursor: ns-resize;\n}\n.lake-table.drag-select.drag_s {\n  cursor: ns-resize;\n}\n.lake-table.drag-select.drag_w {\n  cursor: ew-resize;\n}\n.lake-table.drag-select.drag_e {\n  cursor: ew-resize;\n}\n.lake-table.drag-select.drag_nw {\n  cursor: nwse-resize;\n}\n.lake-table.drag-select.drag_se {\n  cursor: nwse-resize;\n}\n.lake-table.drag-select.drag_n td {\n  cursor: ns-resize;\n}\n.lake-table.drag-select.drag_s td {\n  cursor: ns-resize;\n}\n.lake-table.drag-select.drag_w td {\n  cursor: ew-resize;\n}\n.lake-table.drag-select.drag_e td {\n  cursor: ew-resize;\n}\n.lake-table.drag-select.drag_nw td {\n  cursor: nwse-resize;\n}\n.lake-table.drag-select.drag_se td {\n  cursor: nwse-resize;\n}\n.lake-table tbody,\n.lake-table tr,\n.lake-table th,\n.lake-table td {\n  margin: 0;\n  font-weight: 400;\n  box-sizing: border-box;\n}\n.lake-table tr {\n  height: 33px;\n}\n.lake-table tr th,\n.lake-table tr td {\n  min-width: 90px;\n  white-space: normal;\n  word-wrap: break-word;\n  border: 1px solid #d9d9d9;\n  vertical-align: top;\n  padding: 4px 8px;\n  cursor: default;\n}\n.lake-table .CodeMirror {\n  padding: 16px;\n}\n.table-wrapper {\n  position: relative;\n  cursor: default;\n}\n.table-wrapper.editing .table-header {\n  visibility: visible;\n}\n.table-wrapper.editing .table-cols-header {\n  visibility: visible;\n}\n.table-wrapper.editing .table-rows-header {\n  visibility: visible;\n}\n.table-wrapper.editing .rows-addition {\n  display: block;\n}\n.table-wrapper.editing .table-viewport {\n  margin-bottom: 0;\n  padding-bottom: 8px;\n}\n.table-wrapper .table-textarea {\n  position: fixed;\n  opacity: 0;\n  overflow: hidden;\n  width: 100px;\n  height: 0;\n  padding: 0;\n  border: 0;\n  resize: none;\n  left: 0;\n  top: 0;\n}\n.table-wrapper .multi-addition {\n  display: none;\n  position: absolute;\n  width: 60px;\n  height: 34px;\n  z-index: 10;\n  bottom: 0;\n}\n.table-wrapper .multi-addition .ant-input-number {\n  width: 60px;\n}\n.table-wrapper .multi-addition .ant-input-number:hover {\n  border-color: #008dff;\n}\n.table-wrapper .multi-addition .ant-input-number .ant-input-number-handler:hover {\n  color: #008dff;\n}\n.table-wrapper .multi-addition .ant-input-number-focused {\n  border-color: #008dff;\n  box-shadow: 0 0 0 2px rgba(112, 183, 243, 0.2);\n}\n.table-wrapper .multi-addition .up {\n  position: absolute;\n  right: 0;\n  top: 0;\n  width: 16px;\n  height: 16px;\n  text-align: center;\n  font-size: 12px;\n  line-height: 16px;\n  border-bottom: 1px solid #e8e8e8;\n}\n.table-wrapper .multi-addition .down {\n  position: absolute;\n  right: 0;\n  bottom: 0;\n  width: 16px;\n  height: 16px;\n  text-align: center;\n  font-size: 12px;\n  line-height: 16px;\n}\n.table-wrapper .multi-addition .number {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 37px;\n  height: 32px;\n  border-right: 1px solid #e8e8e8;\n  text-align: center;\n  font-size: 14px;\n  line-height: 32px;\n}\n.table-wrapper .table-header {\n  position: absolute;\n  visibility: hidden;\n  left: -16px;\n  top: 24px;\n  width: 12px;\n  height: 12px;\n  background: #fff;\n  border: 1px solid #e8e8e8;\n  border-top-left-radius: 2px;\n  cursor: pointer;\n}\n.table-wrapper .table-header.selected {\n  background: #4daaff;\n  border: 1px solid #008dff;\n}\n.table-wrapper .table-cols-header {\n  position: relative;\n  height: 40px;\n  padding-top: 24px;\n  display: none;\n  width: 100%;\n  cursor: default;\n}\n.table-wrapper .table-cols-header .table-cols-header-item {\n  position: relative;\n  height: 12px;\n  width: auto;\n  border: 1px solid #E8E8E8;\n  border-right-width: 0;\n  overflow: visible;\n  background: #fff;\n  cursor: pointer;\n}\n.table-wrapper .table-cols-header .table-cols-header-item:last-child {\n  border-top-right-radius: 2px;\n  border-right-width: 1px;\n}\n.table-wrapper .table-cols-header .table-cols-header-item.active {\n  background: #f5f5f5;\n}\n.table-wrapper .table-cols-header .table-cols-header-item.selected {\n  background: #fff;\n  border-color: #fff;\n  z-index: 1;\n  border-radius: 0;\n  height: 16px;\n  border-bottom: 0;\n  cursor: move;\n}\n.table-wrapper .table-cols-header .table-cols-header-item.selected .table-col-header-btns {\n  display: flex;\n}\n.table-wrapper .table-cols-header .table-cols-header-item.selected.multi-selected .table-col-header-btns {\n  display: none;\n}\n.table-wrapper .table-cols-header .table-cols-header-item.selected .col-dragger {\n  display: block;\n  position: absolute;\n  left: -1px;\n  top: -1px;\n  right: -1px;\n  bottom: 3px;\n  background: #4daaff;\n  border: 1px solid #008dff;\n  border-radius: 0;\n  z-index: 1;\n}\n.table-wrapper .table-cols-header .table-cols-header-item.selected .col-dragger .drag-info {\n  display: none;\n}\n.table-wrapper .table-cols-header .table-cols-header-item.no-dragger .table-col-header-btns {\n  display: none;\n}\n.table-wrapper .table-cols-header .table-cols-header-item.no-dragger .table-row-header-btns {\n  display: none;\n}\n.table-wrapper .table-cols-header .table-cols-header-item.no-dragger .col-dragger .lake-icon {\n  display: none;\n}\n.table-wrapper .table-cols-header .table-cols-header-item.dragging .table-col-header-btns {\n  display: none;\n}\n.table-wrapper .table-cols-header .table-cols-header-item.dragging .col-dragger {\n  height: 46px;\n}\n.table-wrapper .table-cols-header .table-cols-header-item.dragging .col-dragger .drag-info {\n  margin-top: -16px;\n  height: 34px;\n  line-height: 34px;\n  display: block;\n  background: #fff;\n}\n.table-wrapper .table-cols-header .table-cols-header-item .cols-trigger {\n  position: absolute;\n  right: -4px;\n  top: -1px;\n  width: 7px;\n  height: 16px;\n  z-index: 10;\n  cursor: col-resize;\n}\n.table-wrapper .table-cols-header .table-cols-header-item .cols-trigger:hover {\n  background: #0589f3;\n}\n.table-wrapper .table-cols-header .table-cols-header-item .cols-trigger.dragging {\n  width: 2px;\n  background: #0589f3;\n  right: -1px;\n}\n.table-wrapper .table-cols-header .table-cols-header-item .col-dragger {\n  text-align: center;\n  display: none;\n}\n.table-wrapper .table-cols-header .table-cols-header-item .col-dragger .lake-icon-drag {\n  transform: rotate(90deg);\n  font-size: 10px;\n  color: #fff;\n  position: relative;\n  top: -8px;\n}\n.table-wrapper .table-cols-header.dragging .table-cols-header-item .cols-trigger {\n  display: none;\n}\n.table-wrapper .table-cols-header.resize .table-cols-header-item {\n  cursor: col-resize;\n}\n.table-wrapper .table-cols-header .cols-addition-header {\n  position: absolute;\n  right: -31px;\n  width: 32px;\n  background: #fff;\n  text-align: center;\n  z-index: 1;\n  color: #aaa;\n  padding: 0;\n  border: 0;\n  cursor: pointer;\n}\n.table-wrapper .table-cols-header .cols-addition-header .multi-trigger {\n  width: 32px;\n  height: 16px;\n  background: #fff;\n  border: 1px solid #e8e8e8;\n  display: flex;\n}\n.table-wrapper .table-cols-header .cols-addition-header .cols-addition {\n  position: absolute;\n  top: 24px;\n  width: 32px;\n  height: 34px;\n  line-height: 30px;\n  font-size: 20px;\n  font-weight: 300;\n  background: #ffff;\n  border: 1px solid #e8e8e8;\n}\n.table-wrapper .table-cols-header .cols-addition-header .cols-addition:hover {\n  background: #f6f6f6;\n}\n.table-wrapper .table-rows-header {\n  position: absolute;\n  left: -16px;\n  top: 40px;\n  width: 12px;\n  z-index: 1;\n  visibility: hidden;\n}\n.table-wrapper .table-rows-header .table-rows-header-item {\n  position: relative;\n  height: 32px;\n  width: 12px;\n  border: 1px solid #e8e8e8;\n  border-bottom-width: 0;\n  background: #fff;\n  cursor: pointer;\n}\n.table-wrapper .table-rows-header .table-rows-header-item:last-child {\n  border-top-left-radius: 2px;\n  border-bottom-width: 1px;\n}\n.table-wrapper .table-rows-header .table-rows-header-item.active {\n  background: #f5f5f5;\n}\n.table-wrapper .table-rows-header .table-rows-header-item.selected {\n  width: 16px;\n  background: #fff;\n  border-color: #fff;\n  cursor: move;\n}\n.table-wrapper .table-rows-header .table-rows-header-item.selected .row-dragger {\n  display: flex;\n  position: absolute;\n  align-items: center;\n  text-align: left;\n  white-space: nowrap;\n  content: \' \';\n  left: -1px;\n  top: -1px;\n  bottom: -1px;\n  right: 3px;\n  background: #4daaff;\n  border: 1px solid #008dff;\n  border-radius: 0;\n  z-index: 1;\n}\n.table-wrapper .table-rows-header .table-rows-header-item.selected .row-dragger .drag-info {\n  display: none;\n}\n.table-wrapper .table-rows-header .table-rows-header-item.selected .table-row-header-btns {\n  display: flex;\n}\n.table-wrapper .table-rows-header .table-rows-header-item.selected.multi-selected .table-row-header-btns {\n  display: none;\n}\n.table-wrapper .table-rows-header .table-rows-header-item.no-dragger .row-dragger .lake-icon {\n  display: none;\n}\n.table-wrapper .table-rows-header .table-rows-header-item.dragging .table-row-header-btns {\n  display: none;\n}\n.table-wrapper .table-rows-header .table-rows-header-item.dragging .row-dragger {\n  width: 150px;\n}\n.table-wrapper .table-rows-header .table-rows-header-item.dragging .row-dragger .drag-info {\n  width: 137px;\n  display: flex;\n  padding: 10px;\n  background: #fff;\n}\n.table-wrapper .table-rows-header .table-rows-header-item .rows-trigger {\n  position: absolute;\n  bottom: -4px;\n  height: 7px;\n  width: 16px;\n  left: -1px;\n  z-index: 10;\n  cursor: row-resize;\n}\n.table-wrapper .table-rows-header .table-rows-header-item .rows-trigger:hover {\n  background: #0589f3;\n}\n.table-wrapper .table-rows-header .table-rows-header-item .rows-trigger.dragging {\n  height: 2px;\n  background: #0589f3;\n  bottom: -1px;\n}\n.table-wrapper .table-rows-header .table-rows-header-item .row-dragger {\n  display: none;\n}\n.table-wrapper .table-rows-header .table-rows-header-item .row-dragger .lake-icon-drag {\n  font-size: 10px;\n  color: #fff;\n  margin-left: -1px;\n}\n.table-wrapper .table-rows-header .table-rows-header-item .row-dragger .drag-info {\n  height: 100%;\n  display: flex;\n  align-items: center;\n}\n.table-wrapper .table-rows-header.dragging .table-rows-header-item .rows-trigger {\n  display: none;\n}\n.table-wrapper .table-rows-header.resize .table-rows-header-item {\n  cursor: row-resize;\n}\n.table-wrapper .table-rows-header .rows-addition-header {\n  position: relative;\n  height: 33px;\n  border: 1px solid #e8e8e8;\n}\n.table-wrapper .table-rows-header .rows-addition-header .multi-trigger {\n  height: 33px;\n  width: 100%;\n}\n.table-wrapper .table-viewport {\n  position: relative;\n  overflow: hidden;\n  overflow-y: hidden;\n  padding: 0 3px;\n  margin-left: -3px;\n  margin-right: -3px;\n}\n.table-wrapper .table-viewport:hover {\n  overflow-x: auto;\n}\n.table-wrapper .table-viewport .scrollbar-shadow-left {\n  top: 24px;\n  bottom: 34px;\n}\n.table-wrapper .table-viewport .scrollbar-shadow-right {\n  top: 24px;\n  bottom: 34px;\n}\n.table-wrapper .lake-table-inner {\n  position: relative;\n}\n.table-wrapper .table-active-td {\n  position: absolute;\n  width: 0;\n  height: 0;\n  z-index: 3;\n  display: none;\n}\n.table-wrapper .table-active-td .l {\n  position: absolute;\n  left: 0;\n  height: 100%;\n  width: 1px;\n  background: #0589f3;\n  z-index: 1;\n}\n.table-wrapper .table-active-td .r {\n  position: absolute;\n  right: 0;\n  height: 100%;\n  width: 1px;\n  background: #0589f3;\n  z-index: 1;\n}\n.table-wrapper .table-active-td .t {\n  position: absolute;\n  top: 0;\n  width: 100%;\n  height: 1px;\n  background: #0589f3;\n  z-index: 1;\n}\n.table-wrapper .table-active-td .b {\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  height: 1px;\n  background: #0589f3;\n  z-index: 1;\n}\n.table-wrapper .table-active-td .mask {\n  position: absolute;\n  display: none;\n  width: 100%;\n  height: 100%;\n  background: #0589f3;\n  opacity: 0.1;\n  cursor: default;\n  z-index: 1;\n}\n.table-wrapper .table-active-td .mask.drag_n {\n  cursor: ns-resize;\n}\n.table-wrapper .table-active-td .mask.drag_s {\n  cursor: ns-resize;\n}\n.table-wrapper .table-active-td .mask.drag_w {\n  cursor: ew-resize;\n}\n.table-wrapper .table-active-td .mask.drag_e {\n  cursor: ew-resize;\n}\n.table-wrapper .table-active-td .mask.drag_nw {\n  cursor: nwse-resize;\n}\n.table-wrapper .table-active-td .mask.drag_se {\n  cursor: nwse-resize;\n}\n.table-wrapper .table-active-td .mask-row,\n.table-wrapper .table-active-td .mask-col {\n  position: absolute;\n  background: #f15a5a;\n  border: 1px solid #fff;\n  display: none;\n  opacity: 0.1;\n  z-index: 1;\n}\n.table-wrapper .table-active-td .table-active-td-trigger {\n  position: absolute;\n  height: 8px;\n  width: 8px;\n  border: 1px solid #fff;\n  background: #0589f3;\n  border-radius: 11px;\n  z-index: 1;\n}\n.table-wrapper .table-active-td .nw {\n  cursor: nwse-resize;\n  left: -4px;\n  top: -4px;\n  z-index: 1;\n}\n.table-wrapper .table-active-td .se {\n  cursor: nwse-resize;\n  z-index: 1;\n}\n.table-wrapper .table-active-td .n {\n  cursor: ns-resize;\n  display: none;\n  z-index: 1;\n}\n.table-wrapper .table-active-td .s {\n  cursor: ns-resize;\n  display: none;\n  z-index: 1;\n}\n.table-wrapper .table-active-td .w {\n  cursor: ew-resize;\n  display: none;\n  z-index: 1;\n}\n.table-wrapper .table-active-td .e {\n  cursor: ew-resize;\n  display: none;\n  z-index: 1;\n}\n.table-wrapper .table-active-td.col .n,\n.table-wrapper .table-active-td.col .s,\n.table-wrapper .table-active-td.col .nw,\n.table-wrapper .table-active-td.col .se {\n  display: none;\n}\n.table-wrapper .table-active-td.col .w,\n.table-wrapper .table-active-td.col .e {\n  display: block;\n}\n.table-wrapper .table-active-td.col .mask {\n  display: block;\n}\n.table-wrapper .table-active-td.row .e,\n.table-wrapper .table-active-td.row .w,\n.table-wrapper .table-active-td.row .nw,\n.table-wrapper .table-active-td.row .se {\n  display: none;\n}\n.table-wrapper .table-active-td.row .n,\n.table-wrapper .table-active-td.row .s {\n  display: block;\n}\n.table-wrapper .table-active-td.row .mask {\n  display: block;\n}\n.table-wrapper .table-active-td.total .mask {\n  display: block;\n}\n.table-wrapper .table-active-td .sub-editor {\n  position: absolute;\n  background: #fff;\n  top: 1px;\n  left: 1px;\n  width: 100px;\n  display: none;\n  cursor: text;\n}\n.table-wrapper .table-active-td .sub-editor .sub-editor-content {\n  display: table-cell;\n  padding: 4px 8px;\n  white-space: normal;\n  word-wrap: break-word;\n}\n.table-wrapper .table-active-td .sub-editor .sub-editor-content pre {\n  padding-top: 5px;\n}\n.table-wrapper .table-active-td.editing .l,\n.table-wrapper .table-active-td.editing .r {\n  width: 2px;\n}\n.table-wrapper .table-active-td.editing .t,\n.table-wrapper .table-active-td.editing .b {\n  height: 2px;\n}\n.table-wrapper .table-active-td.editing .b {\n  margin-top: -1px;\n}\n.table-wrapper .table-active-td.editing .r {\n  margin-left: -1px;\n}\n.table-wrapper .table-active-td.preview-mask-row .mask-row {\n  display: block;\n}\n.table-wrapper .table-active-td.preview-mask-col .mask-col {\n  display: block;\n}\n.table-wrapper .table-placeholder {\n  position: absolute;\n  border: 1px solid #008dff;\n  background: #008dff;\n  display: none;\n}\n.table-wrapper .table-menubar {\n  position: fixed;\n  display: none;\n  padding: 4px 0;\n  border-radius: 4px;\n  border: 1px solid #e9e9e9;\n  box-shadow: 0px 1px 4px 0px rgba(0, 0, 0, 0.08);\n  background: #fff;\n  /* 代码块的 codemirror 默认给每行代码的 pre 设置了 z-index 2, 如果表格在代码块前面，造成右键菜单无法点击 */\n  z-index: 10;\n  min-width: 200px;\n}\n.table-wrapper .table-menubar .table-menubar-item {\n  padding: 6px 16px;\n  cursor: default;\n}\n.table-wrapper .table-menubar .table-menubar-item:hover {\n  background: #f0f0f0;\n}\n.table-wrapper .table-menubar .table-menubar-item.disabled {\n  color: #aaa;\n  display: none;\n}\n.table-wrapper .table-menubar .split {\n  height: 0;\n  border-top: 1px solid #e8e8e8;\n  margin: 2px 0;\n}\n.table-wrapper .table-menubar .split.disabled {\n  display: none;\n}\n.table-wrapper .rows-addition {\n  border: 0;\n  position: relative;\n  display: none;\n  line-height: 32px;\n  height: 32px;\n  color: #aaa;\n  background: #fff;\n  cursor: pointer;\n}\n.table-wrapper .rows-addition:hover {\n  background: #fff;\n}\n.table-wrapper .rows-addition .plus {\n  position: absolute;\n  text-align: left;\n  padding-left: 10px;\n  left: 0;\n  right: 0;\n  border: 1px solid #e8e8e8;\n  border-top: 0;\n  background: #fff;\n  height: 32px;\n  font-size: 20px;\n  font-weight: 300;\n  line-height: 30px;\n  border-radius: 0;\n}\n.table-wrapper .rows-addition .plus:hover {\n  background: #f0f0f0;\n}\n.table-wrapper .table-indicator {\n  position: absolute;\n  display: none;\n  background-color: #0589f3;\n  margin-left: 3px;\n}\n.table-wrapper .table-indicator.col-line {\n  width: 2px;\n  top: 0;\n  left: 0;\n  bottom: 8px;\n  display: block;\n}\n.table-wrapper .table-indicator.row-line {\n  height: 2px;\n  margin-top: 40px;\n  top: 0;\n  left: 0;\n  display: block;\n}\n.table-wrapper .table-col-header-btns {\n  position: absolute;\n  top: -24px;\n  right: 0;\n  height: 20px;\n  display: none;\n}\n.table-wrapper .table-col-header-btns .table-control-icon-btn {\n  border-right-width: 0;\n}\n.table-wrapper .table-col-header-btns .table-control-icon-btn:first-child {\n  border-radius: 2px 0 0 2px;\n}\n.table-wrapper .table-col-header-btns .table-control-icon-btn:last-child {\n  border-right-width: 1px;\n  border-radius: 0 2px 2px 0;\n}\n.table-wrapper .table-row-header-btns {\n  position: absolute;\n  left: -24px;\n  bottom: 0;\n  width: 20px;\n  display: none;\n  flex-direction: column;\n}\n.table-wrapper .table-row-header-btns .table-control-icon-btn {\n  border-bottom-width: 0;\n}\n.table-wrapper .table-row-header-btns .table-control-icon-btn:first-child {\n  border-radius: 2px 2px 0 0;\n}\n.table-wrapper .table-row-header-btns .table-control-icon-btn:last-child {\n  border-bottom-width: 1px;\n  border-radius: 0 0 2px 2px;\n}\n.table-wrapper .table-control-icon-btn {\n  width: 20px;\n  height: 20px;\n  font-size: 12px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: #595959;\n  background-color: #fff;\n  border: 1px solid #D9D9D9;\n  position: relative;\n}\n.table-wrapper .table-control-icon-btn:after {\n  content: \' \';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n.table-wrapper .table-control-icon-btn:HOVER {\n  background-color: #f5f5f5;\n}\n.lake-engine div[data-lake-card="table"] > div[data-card-element="body"] > .lake-card-dnd {\n  left: -38px;\n  top: -4px;\n}\n.lake-engine div[data-lake-card="table"] > div[data-card-element="body"] > .lake-embed-toolbar {\n  z-index: 99;\n}\n.lake-toolbar-table-selector .lake-toolbar-table-selector-tr {\n  display: flex;\n  flex-wrap: nowrap;\n}\n.lake-toolbar-table-selector .lake-toolbar-table-selector-tr .lake-toolbar-table-selector-td {\n  width: 20px;\n  height: 16px;\n  border: 1px solid #d9d9d9;\n  margin-right: -1px;\n  margin-bottom: -1px;\n  cursor: pointer;\n}\n.lake-toolbar-table-selector .lake-toolbar-table-selector-tr .lake-toolbar-table-selector-td.actived {\n  background: #ddefff;\n}\n.lake-toolbar-table-selector .lake-toolbar-table-selector-info {\n  text-align: center;\n}\n.lake-card-block-max[data-lake-card="table"] .lake-table {\n  background: #fff;\n}\n.lake-card-block-max[data-lake-card="table"] div[data-card-element="center"] {\n  padding: 20px;\n  min-height: auto !important;\n}\n.lake-card-block-max[data-lake-card="table"] .lake-table-reader {\n  margin-top: 0;\n}\n.lake-card-block-max[data-lake-card="table"] .table-wrapper {\n  margin-left: 20px;\n  z-index: 130;\n}\n.lake-table-reader {\n  padding-right: 20px;\n  overflow: auto;\n  padding-bottom: 0px !important;\n}\n.lake-table-reader tr:first-child [data-lake-card="file"] .lake-embed-toolbar-block {\n  top: 24px;\n}\n.lake-table-reader + .lake-scrollbar.lake-scrollbar-x {\n  bottom: 22px;\n}\n.lake-table-reader .scrollbar-shadow-left {\n  bottom: 10px;\n}\n.lake-table-reader .scrollbar-shadow-right {\n  bottom: 10px;\n}\n.tmp-table {\n  position: absolute;\n  left: -9999px;\n}\n.lake-mobile-editor .table-wrapper .table-rows-header {\n  visibility: hidden;\n}\n.lake-mobile-editor .table-wrapper .table-header {\n  visibility: hidden;\n}\n.lake-mobile-editor [data-lake-card="table"] .lake-card-toolbar.lake-embed-toolbar-block {\n  top: -17px;\n}\n[data-lake-card="table"] > [data-card-element="body"] > [data-card-element="center"] {\n  z-index: 98;\n}\n[data-lake-card="table"] [data-card-element="center"] {\n  overflow: hidden;\n}\n[data-lake-card="table"] .lake-file {\n  display: inline-block;\n  white-space: normal;\n}\n[data-lake-card="table"] span[data-card-type="inline"] span[data-card-element="left"],\n[data-lake-card="table"] span[data-card-type="inline"] span[data-card-element="right"] {\n  display: inline;\n}\n.lake-engine [data-lake-card="table"] .lake-embed-toolbar {\n  top: -64px;\n}\n[data-lake-card="table"].lake-activated:not(.lake-card-block-max) [data-card-element="center"] {\n  position: relative;\n  overflow: initial;\n}\n[data-lake-card="table"].lake-activated:not(.lake-card-block-max) .table-wrapper {\n  position: absolute;\n  top: -40px;\n  width: 100%;\n  z-index: 130;\n}\n[data-lake-card="table"].lake-activated .table-cols-header {\n  display: flex;\n}\n[data-lake-card="table"].lake-activated .lake-table.lake-no-border {\n  border: 1px dashed #d9d9d9;\n}\n[data-lake-card="table"].lake-activated .lake-table.lake-no-border td {\n  border: 1px dashed #d9d9d9;\n}\n@keyframes rotateLoading {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n[data-lake-card="video"] [data-lake-card="table"] {\n  outline: 1px solid #ddd;\n}\n.lake-video-content {\n  position: relative;\n  height: 420px;\n  background: #f7f7f7;\n}\n.lake-video-content video {\n  width: 100%;\n  max-height: 450px;\n  outline: none;\n}\n@media screen and (max-width: 750px) {\n  .lake-video-content {\n    height: 240px;\n  }\n  video {\n    max-height: 200px !important;\n  }\n}\n.lake-video-uploading,\n.lake-video-uploaded,\n.lake-video-error {\n  border: 1px solid #e6e6e6;\n  background: #f6f6f6;\n}\n.lake-video-done {\n  position: relative;\n  height: auto;\n  border: none;\n  background: none;\n  line-height: 0;\n}\n.lake-video-content-active {\n  outline: 1px solid #d9d9d9;\n}\n.lake-video-center {\n  position: absolute;\n  top: 50%;\n  margin-top: -48px;\n  width: 100%;\n  height: 96px;\n}\n.lake-video-center .lake-video-icon,\n.lake-video-center .lake-video-name,\n.lake-video-center .lake-video-message,\n.lake-video-center .lake-video-progress,\n.lake-video-center .lake-video-converting {\n  text-align: center;\n}\n.lake-video-center .lake-video-icon {\n  font-size: 24px;\n  color: #BFBFBF;\n  margin-bottom: 12px;\n}\n.lake-video-center .lake-video-name {\n  color: #595959;\n  margin-bottom: 12px;\n}\n.lake-video-center .lake-video-message {\n  color: #595959;\n}\n.lake-video-center .lake-video-anticon {\n  display: inline-block;\n  font-style: normal;\n  vertical-align: -0.125em;\n  text-align: center;\n  text-transform: none;\n  line-height: 0;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  margin-right: 5px;\n}\n.lake-video-center .lake-video-anticon .lake-video-anticon-spin {\n  display: inline-block;\n  -webkit-animation: rotateLoading 1s infinite linear;\n  animation: rotateLoading 1s infinite linear;\n}\n.lake-video-center .lake-error-icon {\n  width: 16px;\n  height: 16px;\n  display: inline-block;\n  background: #F5222D;\n  text-align: center;\n  font-size: 12px;\n  color: #ffffff;\n  padding: 1px 0 0 0;\n  line-height: 16px;\n  border-radius: 100%;\n  vertical-align: middle;\n  margin: -2px 5px 0 0;\n}\n[data-card-type][data-lake-card="math"].lake-activated textarea::selection {\n  background: transparent !important;\n}\n[data-card-type][data-lake-card="math"] {\n  vertical-align: middle !important;\n}\n[data-card-type][data-lake-card="math"] [data-card-element="center"] {\n  vertical-align: middle !important;\n  min-height: 28px;\n}\n[data-card-type][data-lake-card="math"] .textarea-focus textarea::selection {\n  background: rgba(27, 162, 227, 0.2) !important;\n}\n.lake-engine .lake-math-content-tmp,\n.lake-engine-view .lake-math-content-tmp {\n  line-height: 32px;\n  padding: 0 6px;\n  border-radius: 3px 3px;\n  height: 100%;\n  color: rgba(0, 0, 0, 0.25);\n  display: inline-block;\n}\n.lake-engine span[data-lake-card="math"]:not(.lake-selected) .lake-math-content-tmp {\n  background: #f5f5f5;\n}\n.lake-engine-view span[data-lake-card="math"] .lake-math-content-tmp {\n  background: #f5f5f5;\n}\n.lake-engine span[data-lake-card="math"] .lake-math-container {\n  display: inline-block;\n}\n.lake-engine span[data-lake-card="math"] .lake-card-math-editor {\n  outline: none;\n  width: 420px;\n  border-radius: 3px 3px;\n  position: fixed;\n  border: 1px solid #e8e8e8;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);\n  z-index: 20;\n  text-indent: 0;\n}\n.lake-engine span[data-lake-card="math"] textarea {\n  width: 100%;\n  border: none;\n  min-width: 400px;\n  min-height: 88px;\n  padding: 6px 6px;\n  line-height: 24px;\n  color: #595959;\n  outline: none;\n  font-family: \'Lucida Console\', Consolas, Monaco, \'Andale Mono\', \'Ubuntu Mono\', monospace;\n  vertical-align: bottom;\n  font-size: 14px;\n  font-weight: 400;\n}\n.lake-engine span[data-lake-card="math"] .lake-math-editor-toolbar {\n  position: relative;\n  height: 40px;\n  background: #f9f9f9;\n  border-top: 1px solid #e8e8e8;\n  line-height: 24px;\n  padding: 8px 8px;\n  text-align: left;\n  text-indent: 0;\n}\n.lake-engine span[data-lake-card="math"] .lake-math-editor-toolbar .lake-icon-question {\n  vertical-align: middle;\n}\n.lake-engine span[data-lake-card="math"] .lake-math-editor-toolbar .lake-math-editor-toolbar-tips {\n  font-size: 12px;\n  color: #8C8C8C;\n}\n.lake-engine span[data-lake-card="math"] .lake-math-editor-toolbar .lake-math-editor-toolbar-tips .text {\n  color: #8C8C8C;\n  padding-left: 4px;\n}\n.lake-engine span[data-lake-card="math"] .lake-math-editor-toolbar .lake-math-editor-toolbar-tips .lake-embed-toolbar-btn {\n  width: 48px;\n  margin-left: 10px;\n  font-size: 14px;\n}\n.lake-engine div[data-lake-card="riddle"],\n.lake-engine-view div[data-lake-card="riddle"] {\n  background: transparent;\n}\n@keyframes loadingRiddle {\n  0% {\n    transform: scale(1);\n  }\n  20% {\n    transform: scale(1.1);\n  }\n  50% {\n    transform: scale(1);\n  }\n}\n.lake-riddle {\n  position: relative;\n  width: 100%;\n}\n.lake-riddle-content {\n  position: relative;\n  height: 360px;\n  border: 1px solid #e6e6e6;\n  background: #f6f6f6;\n}\n.lake-riddle-content-active {\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.12);\n}\n.lake-riddle-content-frame {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  transition: all 0.3s linear;\n}\n.lake-riddle-content-frame-loaded {\n  opacity: 1;\n  visibility: visible;\n  z-index: 2;\n  background: #fff;\n}\n.lake-riddle-tips {\n  position: relative;\n  background: #fff;\n  border: 1px solid #d9d9d9;\n  height: 50px;\n  border-radius: 2px 2px;\n  padding: 0;\n  padding-left: 18px;\n}\n.lake-riddle-input {\n  width: calc(100% - 150px);\n  border: 0;\n  height: 40px;\n  line-height: 40px;\n  margin: 4px 0;\n  font-size: 14px;\n  outline: none;\n}\n.lake-riddle-input::placeholder {\n  color: #8C8C8C;\n}\n.lake-riddle-input:focus {\n  outline: none;\n}\n.lake-riddle-button {\n  position: absolute;\n  top: 9px;\n  right: 12px;\n}\n.lake-riddle:hover .lake-plugin-toolbar-inline {\n  opacity: 1;\n  visibility: visible;\n}\n.lake-mention-list {\n  position: absolute;\n  top: 24px;\n  left: 0;\n  width: 280px;\n  max-height: 300px;\n  overflow-y: auto;\n  padding: 0;\n  margin: 0;\n  list-style-type: none;\n  min-width: 280px;\n  height: auto;\n  bottom: auto;\n  z-index: 1031;\n  font-size: 14px;\n  font-weight: normal;\n  background: #fff;\n  border-radius: 2px 2px;\n  border: 1px solid #d9d9d9;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.12);\n  -webkit-user-select: none;\n  user-select: none;\n}\n.lake-mention-active {\n  display: block;\n}\n.lake-mention-item {\n  display: flex;\n  padding: 6px 8px;\n  cursor: pointer;\n}\n.lake-mention-item .match {\n  font-weight: bold;\n  color: #262626;\n}\n.lake-mention-item-avatar {\n  width: 36px;\n  height: 36px;\n  display: block;\n  padding: 3px 3px;\n}\n.lake-mention-item-avatar img {\n  width: 100%;\n  height: 100%;\n  border-radius: 28px;\n}\n.lake-mention-item-text {\n  display: block;\n  padding-left: 8px;\n}\n.lake-mention-item-text-item {\n  width: 200px;\n  display: block;\n  line-height: 18px;\n  word-break: break-all;\n}\n.lake-mention-item-name {\n  color: #595959;\n}\n.lake-mention-item-dep,\n.lake-mention-item-id {\n  color: #8C8C8C;\n}\n.lake-mention-item-selected {\n  background: #f4f4f4;\n}\n.lake-mention-at {\n  position: relative;\n  text-decoration: none;\n  font-size: 14px;\n}\na.lake-mention-at {\n  color: #096DD9;\n}\n.lake-mention-tips {\n  color: #BFBFBF;\n  padding: 0 10px;\n}\n.lake-dialog {\n  position: fixed;\n  top: 92px;\n  right: 32px;\n  z-index: 1034;\n  background: #fff;\n  border-radius: 6px;\n  padding: 16px;\n  padding-top: 0px;\n  box-shadow: 0px 2px 4px 0px rgba(225, 225, 225);\n}\n.lake-search input {\n  width: 325px;\n  height: 49;\n}\n.lake-search button {\n  margin-left: 8px;\n}\n.lake-search .lake-icon-close:hover {\n  cursor: pointer;\n}\n.lake-search p {\n  margin-bottom: 8px;\n}\n.lake-search .count {\n  color: #d9d9d9;\n}\n.lake-translate-sidebar .lake-sidebar-content {\n  overflow: auto;\n  height: calc(100vh - 164px);\n}\n.lake-translate-sidebar .lake-translate-panel {\n  margin-right: 20px;\n}\n.lake-translate-sidebar pre {\n  width: 100%;\n  height: 361px;\n  border: 1px solid #D9D9D9;\n  background: white;\n  border-radius: 4px;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  padding: 8px;\n  margin-bottom: 8px;\n}\n.lake-translate-sidebar pre:hover {\n  cursor: text;\n}\n.lake-embed-outline ul {\n  list-style: square;\n}\n.lake-embed-outline li {\n  margin: 0;\n}\n.lake-embed-outline .lake-embed-outline-1 {\n  margin-left: 1em;\n}\n.lake-embed-outline .lake-embed-outline-2 {\n  margin-left: 2em;\n}\n.lake-embed-outline .lake-embed-outline-3 {\n  margin-left: 3em;\n}\n.lake-embed-outline .lake-embed-outline-4 {\n  margin-left: 4em;\n}\n@keyframes loading {\n  0% {\n    transform: rotate(0);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n.lake-embed-form {\n  position: relative;\n  border-radius: 2px;\n}\n.lake-embed-icon {\n  margin-left: 12px;\n}\n.lake-embed-editor {\n  margin-left: 10px;\n}\n.lake-embed-input {\n  width: calc(100% - 200px);\n  border: 0;\n  height: 40px;\n  line-height: 40px;\n  margin: 4px 0;\n  font-size: 14px;\n  outline: none;\n}\n.lake-embed-input::placeholder {\n  color: rgba(0, 0, 0, 0.25);\n}\n.lake-embed .lake-embed-example-button {\n  border: 0;\n  padding: 0;\n  background: none;\n  cursor: pointer;\n  outline: none;\n  color: #595959;\n  margin-right: 16px;\n}\n.lake-embed .lake-embed-help-button {\n  color: #595959;\n  margin-right: 18px;\n}\n.lake-embed .lake-embed-help-button:hover {\n  color: #595959;\n}\n.lake-embed-button {\n  position: absolute;\n  top: 9px;\n  right: 12px;\n}\n.lake-embed .card-resize-button-ud {\n  position: absolute;\n  bottom: -3px;\n  right: 0px;\n  left: 0px;\n  margin: 0 auto;\n  z-index: 12;\n}\n.lake-embed .card-resize-button-ud:hover {\n  cursor: row-resize;\n}\n.lake-embed .lake-embed-mask {\n  opacity: 0;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  height: 100%;\n  z-index: 3;\n  display: block;\n  transition: all 0.3s cubic-bezier(0.3, 1.2, 0.2, 1);\n}\n.lake-embed .lake-embed-mask:hover {\n  cursor: pointer;\n}\n.lake-embed-content {\n  background: #f6f6f6;\n  line-height: 0px;\n}\n.lake-embed-content-bg {\n  width: 80px;\n  height: 80px;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin-top: -40px;\n  margin-left: -40px;\n  text-align: center;\n  line-height: 80px;\n  color: #666;\n  font-size: 36px;\n  z-index: 1;\n  visibility: visible;\n  opacity: 1;\n  transition: all 0.3s linear;\n  animation: loading 0.8s linear infinite;\n}\n.lake-embed-content-active {\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.12);\n}\n.lake-embed-content-frame {\n  position: relative;\n  width: 100%;\n  top: 0;\n  left: 0;\n  background: transparent;\n  opacity: 0;\n  visibility: hidden;\n}\n.lake-embed-content-frame-loaded {\n  opacity: 1;\n  visibility: visible;\n  z-index: 2;\n  background: #fff;\n}\n.lake-embed-upload {\n  border-radius: 2px;\n  background: #FAFAFA;\n  padding-top: 8px;\n}\n.lake-embed-upload .lake-embed-upload-file-name,\n.lake-embed-upload .lake-embed-upload-collapse-name {\n  text-overflow: ellipsis;\n  overflow: hidden;\n  display: inline-block;\n  white-space: nowrap;\n  max-width: 500px;\n}\n.lake-embed-upload a {\n  color: rgba(0, 0, 0, 0.65);\n}\n.lake-embed-upload a {\n  color: rgba(0, 0, 0, 0.65);\n}\n.lake-embed-upload .lake-embed-upload-body {\n  line-height: 0px;\n  position: relative;\n  user-select: none;\n}\n.lake-embed-upload .lake-embed-upload-body iframe {\n  padding: 0;\n  margin: 0;\n  width: 100%;\n  position: relative;\n  border-top: 1px solid #d9d9d9;\n  z-index: 2;\n}\n.lake-embed-upload .lake-embed-upload-header {\n  color: rgba(0, 0, 0, 0.65);\n  height: 18px;\n  margin-bottom: 8px;\n  line-height: 16px;\n  font-size: 12px;\n  padding: 0px 12px;\n}\n.lake-embed-upload .lake-embed-upload-header span {\n  vertical-align: middle;\n}\n.lake-embed-upload .lake-svg-icon-preview {\n  width: 16px;\n  height: 10px;\n  background-size: 16px 10px;\n  float: right;\n  margin-top: 4px;\n  color: rgba(0, 0, 0, 0.45);\n}\n.lake-embed-upload .lake-svg-icon-preview:hover {\n  color: rgba(0, 0, 0, 0.45);\n}\n.lake-embed-upload .lake-embed-upload-icon {\n  display: inline-block;\n  border: none;\n}\n.lake-embed-upload .lake-embed-upload-file-icon {\n  float: left;\n  margin-top: 2px;\n  margin-right: 6px;\n  width: 12.6px;\n  height: 13.5px;\n  background-size: 12.6px 13.5px;\n}\n.lake-embed-upload-collapse {\n  height: 48px;\n  border-radius: 2px;\n  padding: 0px;\n  background: white;\n}\n.lake-embed-upload-collapse .lake-embed-upload-collapse-body {\n  line-height: 22px;\n  margin-top: 12px;\n  float: left;\n}\n.lake-embed-upload-collapse .lake-embed-upload-collapse-body .lake-embed-upload-collapse-name {\n  color: #4E4C4C;\n}\n.lake-embed-upload-collapse .lake-embed-upload-collapse-body .lake-embed-upload-collapse-file-size {\n  margin-left: 8px;\n  color: rgba(0, 0, 0, 0.25);\n}\n.lake-embed-upload-collapse .lake-embed-upload-file-icon {\n  margin: 13px 12px;\n  width: 20px;\n  height: 20px;\n  float: left;\n  background-size: 20px 20px;\n}\n.lake-embed-upload-collapse .lake-svg-icon-preview {\n  float: right;\n  margin: 19px 12px;\n}\n.lake-third-party-card-error {\n  display: flex;\n  height: 50px;\n  align-items: center;\n  justify-content: center;\n}\n[data-lake-card="thirdparty"] [data-card-element="center"],\n[data-lake-card="yuque"] [data-card-element="center"],\n[data-lake-card="youku"] [data-card-element="center"] {\n  border-radius: 2px;\n}\n[data-card-type][data-lake-card="label"].lake-activated input::selection {\n  background: transparent !important;\n}\n[data-card-type][data-lake-card="label"] {\n  display: initial !important;\n}\n[data-card-type][data-lake-card="label"] .input-focus input::selection {\n  background: rgba(27, 162, 227, 0.2) !important;\n}\n.lake-engine span[data-lake-card="label"] .lake-card-label-editor,\n.lake-engine-view span[data-lake-card="label"] .lake-card-label-editor {\n  outline: none;\n  position: fixed;\n  top: 36px;\n  left: -8px;\n  z-index: 20;\n  background: white;\n  border: 1px solid rgba(226, 226, 226, 0.84);\n  width: 162px;\n  padding: 8px;\n  border-radius: 3px;\n  box-shadow: 0px 2px 4px rgba(225, 225, 225, 0.5);\n}\n.lake-engine span[data-lake-card="label"] .lake-card-label-editor .lake-colorboard,\n.lake-engine-view span[data-lake-card="label"] .lake-card-label-editor .lake-colorboard {\n  margin-top: 8px;\n}\n.lake-engine span[data-lake-card="label"] .lake-card-label-editor .lake-colorboard-group,\n.lake-engine-view span[data-lake-card="label"] .lake-card-label-editor .lake-colorboard-group {\n  margin-bottom: 4px;\n  padding: 0;\n}\n.lake-engine span[data-lake-card="label"] .lake-card-label-container,\n.lake-engine-view span[data-lake-card="label"] .lake-card-label-container {\n  font-weight: 400;\n  font-size: 12px;\n  overflow: hidden;\n  max-width: 200px;\n  display: inline-block;\n  white-space: nowrap;\n  margin-bottom: -4px;\n  border-radius: 4px;\n  border: 2px solid rgba(0, 0, 0, 0);\n  padding: 0px 3px;\n  text-overflow: ellipsis;\n  line-height: 14px;\n}\n.lake-engine span[data-lake-card="label"] .lake-card-label-container.lake-label-selected,\n.lake-engine-view span[data-lake-card="label"] .lake-card-label-container.lake-label-selected {\n  border: 2px solid rgba(24, 144, 255);\n}\n.lake-lockedtext {\n  border: 1px solid #d9d9d9;\n  border-radius: 2px;\n  position: relative;\n}\n.lake-lockedtext .lake-lockedtext-header {\n  height: 40px;\n  position: relative;\n  background: #f9f9f9;\n  line-height: 40px;\n  border-bottom: 1px solid #d9d9d9;\n}\n.lake-lockedtext .lake-lockedtext-header h5 {\n  font-size: 14px;\n  padding: 0 10px;\n  margin: 0;\n  line-height: 40px;\n}\n.lake-lockedtext .lake-lockedtext-header h5 .title-desc {\n  font-weight: 400;\n  color: #595959;\n  margin-left: 20px;\n}\n.lake-lockedtext .lake-lockedtext-header .lockstatus {\n  position: absolute;\n  color: #BFBFBF;\n  font-size: 12px;\n  right: 120px;\n  top: 0;\n}\n.lake-lockedtext .lake-lockedtext-header .locktrigger {\n  position: absolute;\n  cursor: pointer;\n  color: #595959;\n  right: 10px;\n  top: 8px;\n  border: 1px solid #d9d9d9;\n  line-height: 1.2;\n  padding: 3px 6px;\n  border-radius: 3px;\n}\n.lake-lockedtext .lake-lockedtext-content .lockedtext {\n  border: 0;\n  width: 100%;\n  height: 200px;\n  outline: none;\n  resize: none;\n  padding: 8px;\n}\n.lake-lockedtext .lock-panel {\n  position: absolute;\n  padding: 20px;\n  padding-top: 50px;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: #fafafa;\n}\n.lake-lockedtext .lock-panel .lock-title {\n  color: #595959;\n}\n.lake-lockedtext .lock-panel .lock-icon {\n  width: 180px;\n  height: 150px;\n  background: transparent url(https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*VhgARpqXhsYAAAAAAAAAAABjARQnAQ) no-repeat;\n  background-size: contain;\n  position: absolute;\n  left: 100px;\n  top: 60px;\n}\n.lake-lockedtext .lock-panel p {\n  margin: 8px 0;\n  margin-left: 50%;\n  width: 40%;\n}\n.lake-lockedtext .lock-panel .ant-btn {\n  margin-right: 8px;\n}\n.lake-lockedtext .unlock-panel {\n  position: absolute;\n  padding: 20px;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: #fafafa;\n}\n.lake-lockedtext .unlock-panel p {\n  margin: 5px auto;\n  width: 50%;\n}\n.lake-lockedtext .unlock-panel .error-info,\n.lake-lockedtext .unlock-panel .lock-info {\n  display: none;\n  color: #f5222d;\n  text-align: center;\n}\n.lake-lockedtext .unlock-panel .lock-icon {\n  width: 180px;\n  height: 110px;\n  background: transparent url(https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*VhgARpqXhsYAAAAAAAAAAABjARQnAQ) no-repeat;\n  background-size: contain;\n  margin: 20px auto;\n}\n.lake-lockedtext .unlock-panel .ant-input-group-addon {\n  cursor: pointer;\n}\n.lake-lockedtext .unlock-panel .ant-input-group-addon .anticon {\n  margin-right: 8px;\n}\n.lake-lockedtext .unlock-container.reading .unlock-panel {\n  padding: 0;\n}\n.lake-lockedtext .unlock-container.reading .unlock-panel .lock-icon {\n  height: 100px;\n}\n.lake-lockedtext .unlock-container.error .ant-input,\n.lake-lockedtext .unlock-container.error .ant-input-group-addon {\n  border-color: #f00;\n}\n.lake-lockedtext .unlock-container.error .ant-input-group {\n  border-radius: 3px;\n  box-shadow: 0 0 0 3px #fdd;\n}\n.lake-lockedtext .unlock-container.error .unlock-panel .error-info {\n  display: block;\n}\n.lake-lockedtext .unlock-container.locked .unlock-panel .lock-info {\n  display: block;\n}\n.lake-lockedtext .unlock-container.locked .unlock-panel .error-info {\n  display: none;\n}\n.lake-engine div[data-lake-card="youku"],\n.lake-engine-view div[data-lake-card="youku"] {\n  background: transparent;\n}\n.lake-engine div[data-lake-card="youku"] [data-card-element="center"],\n.lake-engine-view div[data-lake-card="youku"] [data-card-element="center"] {\n  border: 1px solid rgba(0, 0, 0, 0);\n}\n.lake-engine div[data-lake-card="youku"] .youku-error,\n.lake-engine-view div[data-lake-card="youku"] .youku-error {\n  text-align: center;\n  padding: 70px 20px;\n  background: rgba(0, 0, 0, 0.45);\n  font-weight: 400;\n  color: #ddd;\n  line-height: 3;\n}\n.lake-engine div[data-lake-card="youku"] .youku-error .lake-icon-warning,\n.lake-engine-view div[data-lake-card="youku"] .youku-error .lake-icon-warning {\n  font-size: 30px;\n}\n[data-lake-card="premium"].lake-activated .lake-premium-view {\n  background-color: #FAFAFA;\n}\n[data-lake-card="premium"] .lake-card-dnd {\n  margin-top: 8px;\n}\n.lake-engine .lake-premium-view:hover {\n  background-color: #FAFAFA;\n}\n.lake-premium-view {\n  position: relative;\n  z-index: 1;\n  height: 40px;\n}\n.lake-premium-view-tip {\n  display: flex;\n  flex-direction: row;\n  height: 100%;\n  align-items: center;\n}\n.lake-premium-view-tip:before,\n.lake-premium-view-tip:after {\n  content: \' \';\n  height: 1px;\n  flex: auto;\n}\n.lake-premium-view-tip-content {\n  padding: 0 10px;\n}\n.lake-premium-view-tip-content .lake-icon {\n  margin-right: 9px;\n}\n.lake-premium-view .lake-premium-shadow-mask {\n  display: none;\n}\n.lake-premium-view .lake-premium-view-tip {\n  color: #F5BC57;\n  font-size: 12px;\n}\n.lake-premium-view .lake-premium-view-tip:before,\n.lake-premium-view .lake-premium-view-tip:after {\n  background: #F5BC57;\n}\n.lake-premium-view.expired .lake-premium-view-tip {\n  color: rgba(0, 0, 0, 0.25);\n}\n.lake-premium-view.expired .lake-premium-view-tip:before,\n.lake-premium-view.expired .lake-premium-view-tip:after {\n  background: rgba(0, 0, 0, 0.25);\n}\n.lake-premium-view.expired .lake-premium-view-tip.paid {\n  color: #F5BC57;\n}\n.lake-premium-view.expired .lake-premium-view-tip.paid:before,\n.lake-premium-view.expired .lake-premium-view-tip.paid:after {\n  background: #F5BC57;\n}\n.lake-mobile-editor .lake-premium-view-tip-content {\n  max-width: 190px;\n  display: flex;\n  align-items: center;\n}\n/* --- 阅读视图 --- */\n.lake-engine-view.expired .lake-premium-shadow-mask {\n  display: none;\n}\n.lake-engine-view .lake-premium-shadow-mask {\n  display: block;\n  position: absolute;\n  top: -60px;\n  width: 100%;\n  height: 60px;\n  background: linear-gradient(0deg, #fff, rgba(255, 255, 255, 0.8) 80%, rgba(255, 255, 255, 0));\n}\n/* ---- sidebar ---- */\n.lake-premium-sidebar .lake-sidebar-content {\n  overflow: auto;\n  height: calc(100vh - 134px);\n}\n.lake-premium-sidebar .lake-sidebar-input-group-item {\n  line-height: 0;\n  margin-bottom: 0;\n}\n.lake-premium-sidebar .ant-form-explain {\n  padding: 5px 0;\n}\n.lake-premium-sidebar .lake-sidebar-premium {\n  padding-right: 10px;\n}\n.lake-premium-sidebar .lake-sidebar-premium-input {\n  width: 97px;\n  height: 32px;\n}\n.lake-premium-sidebar .lake-sidebar-premium-textarea {\n  width: 216px;\n  line-height: 22px;\n  resize: none;\n  margin: 0;\n}\n.lake-editor-traditional .lake-toc .lake-toc-item {\n  font-size: 12px;\n}\n.lake-editor-classic .lake-toc .lake-toc-item {\n  font-size: 14px;\n}\n.lake-doc-recommend-panel {\n  position: absolute;\n  top: 100%;\n  left: -1px;\n  z-index: 9999;\n  margin-top: 6px;\n  width: 310px;\n  height: 330px;\n  border-radius: 4px;\n  border: 1px solid #E9E9E9;\n  box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.08);\n  background-color: #fff;\n}\n.lake-doc-recommend-panel.focused .lake-doc-recommend-panel-item:HOVER {\n  background-color: #fff;\n}\n.lake-doc-recommend-panel-header {\n  height: 32px;\n  padding: 0 16px;\n  color: #8C8C8C;\n  font-size: 12px;\n  line-height: 32px;\n}\n.lake-doc-recommend-panel-body {\n  height: 262px;\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.lake-doc-recommend-panel-loading,\n.lake-doc-recommend-panel-error {\n  height: 100%;\n  color: #8C8C8C;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.lake-doc-recommend-panel-item {\n  padding: 12px 16px;\n  height: 58px;\n  cursor: pointer;\n  display: flex;\n}\n.lake-doc-recommend-panel-item:HOVER {\n  background-color: #F5F5F5;\n}\n.lake-doc-recommend-panel-item.selected {\n  background-color: #F5F5F5 !important;\n}\n.lake-doc-recommend-panel-item .lake-svg-icon {\n  margin-right: 12px;\n}\n.lake-doc-recommend-panel-item-content {\n  width: 234px;\n}\n.lake-doc-recommend-panel-item-content dt {\n  color: #262626;\n  font-size: 14px;\n  font-weight: normal;\n  line-height: 14px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.lake-doc-recommend-panel-item-content dd {\n  color: #8C8C8C;\n  font-size: 12px;\n  line-height: 14px;\n  margin-top: 6px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.lake-doc-recommend-panel-footer {\n  font-size: 12px;\n  height: 36px;\n  line-height: 34px;\n  border-top: 1px solid #e8e8e8;\n  color: #8C8C8C;\n  padding: 0 16px;\n}\n.lake-doc-search-panel {\n  position: absolute;\n  top: 100%;\n  left: -1px;\n  z-index: 9999;\n  margin-top: 6px;\n  width: 310px;\n  height: 330px;\n  border-radius: 4px;\n  border: 1px solid #E9E9E9;\n  box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.08);\n  background-color: #fff;\n}\n.lake-doc-search-panel.focused .lake-doc-search-panel-item {\n  background-color: #fff;\n}\n.lake-doc-search-panel-body {\n  height: 294px;\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.lake-doc-search-panel-item {\n  padding: 12px 16px;\n  height: 58px;\n  cursor: pointer;\n  display: flex;\n}\n.lake-doc-search-panel-item:HOVER {\n  background-color: #F5F5F5;\n}\n.lake-doc-search-panel-item.selected {\n  background-color: #F5F5F5 !important;\n}\n.lake-doc-search-panel-item em {\n  color: #25b864;\n  font-style: normal;\n}\n.lake-doc-search-panel-item .lake-svg-icon {\n  margin-right: 12px;\n}\n.lake-doc-search-panel-item-content {\n  width: 234px;\n}\n.lake-doc-search-panel-item-content dt {\n  color: #262626;\n  font-size: 14px;\n  font-weight: normal;\n  line-height: 14px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.lake-doc-search-panel-item-content dd {\n  color: #8C8C8C;\n  font-size: 12px;\n  line-height: 14px;\n  margin-top: 6px;\n}\n.lake-doc-search-panel-footer {\n  font-size: 12px;\n  height: 36px;\n  line-height: 34px;\n  border-top: 1px solid #e8e8e8;\n  color: #8C8C8C;\n  padding: 0 16px;\n}\n.lake-doc-search-panel-tip {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n.lake-doc-search-panel-tip .lake-svg-icon-search {\n  width: 28px;\n  height: 28px;\n}\n.lake-doc-search-panel-tip-content {\n  text-align: center;\n  font-size: 14px;\n  line-height: 22px;\n  color: #595959;\n  margin-top: 10px;\n}\n.lake-doc-search-panel-waiting,\n.lake-doc-search-panel-error {\n  height: 100%;\n  color: #8C8C8C;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.lake-doc-card-view {\n  width: 100%;\n  cursor: pointer;\n  user-select: none;\n  position: relative;\n}\n.lake-doc-card-view .lake-group-avatar {\n  border-radius: 100%;\n  transform: none;\n}\n.lake-doc-card-view-loading,\n.lake-doc-card-view-error {\n  width: 100%;\n  height: 98px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  font-size: 14px;\n  color: #A6A6A6;\n  background-color: #f5f5f5;\n}\n.lake-doc-card-view-error-tip {\n  max-width: 100%;\n  padding: 0 20px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  user-select: text;\n}\n.lake-doc-card-view-box {\n  width: 100%;\n  height: 100%;\n  padding: 20px;\n  background-color: #fff;\n  cursor: pointer;\n  display: flex;\n}\n.lake-doc-card-view-box .lake-svg-icon {\n  width: 24px;\n  height: 24px;\n}\n.lake-doc-card-view-content {\n  width: calc(100% - 50px);\n  margin-left: 12px;\n}\n.lake-doc-card-view-content.has-cover {\n  padding-right: 186px;\n}\n.lake-doc-card-view-title {\n  font-size: 14px;\n  line-height: 14px;\n  color: #262626;\n  font-weight: bold;\n}\n.lake-doc-card-view-desc {\n  font-size: 12px;\n  line-height: 12px;\n  color: #8C8C8C;\n  margin-top: 10px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.lake-doc-card-view-belong {\n  font-size: 12px;\n  line-height: 12px;\n  color: #595959;\n  margin-top: 10px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.lake-doc-unsupported-view {\n  width: 100%;\n  cursor: pointer;\n  user-select: none;\n  line-height: 98px;\n  text-align: center;\n  font-size: 14px;\n  color: #A6A6A6;\n  background-color: #f5f5f5;\n}\n[data-lake-card="yuque"] [data-card-element="body"] > .lake-embed-toolbar {\n  z-index: 9999;\n}\n[data-lake-card="yuqueinline"] ::selection {\n  background-color: transparent!important;\n}\n.le-card-yuque-inline {\n  line-height: 20px;\n}\n.le-card-yuque-inline .lake-svg-icon {\n  width: 20px;\n  height: 20px;\n  display: inline-block !important;\n  transform: translateY(2px);\n  margin-right: 10px;\n}\n.le-card-yuque-inline .lake-group-avatar {\n  margin-right: 10px;\n}\n.le-card-yuque-inline-content {\n  color: #096DD9;\n}\n.doc-article-content .le-card-yuque-inline .lake-svg-icon-yuque-doc {\n  width: 36px;\n  height: 36px;\n}\n.lake-svg-icon-yuque-doc,\n.lake-svg-icon-yuque-book,\n.lake-svg-icon-yuque-sheet,\n.lake-svg-icon-yuque-repo-thread {\n  background-size: contain;\n}\n.lake-group-avatar {\n  width: 20px;\n  height: 20px;\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n  transform: translateY(5px);\n  color: #fff;\n  border-radius: 100%;\n  overflow: hidden;\n}\n.lake-group-avatar.lake-group-text-avatar {\n  transform: translateY(-2px);\n}\n.lake-group-avatar img {\n  width: 100%;\n  height: 100%;\n}\n.lake-group-avatar span {\n  font-size: 10px;\n}\n.lake-bookmark-link {\n  width: 100%;\n  height: 98px;\n  cursor: pointer;\n  border: 1px solid #D8D8D8;\n  border-radius: 2px;\n  user-select: none;\n  position: relative;\n  overflow: hidden;\n}\n.lake-bookmark-link-loading,\n.lake-bookmark-link-error {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  font-size: 14px;\n  color: #A6A6A6;\n  background-color: #f5f5f5;\n}\n.lake-bookmark-link-error-tip {\n  max-width: 100%;\n  padding: 0 20px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  user-select: text;\n}\n.lake-bookmark-link-content {\n  width: 100%;\n  height: 100%;\n  padding: 20px;\n  background-color: #fff;\n  cursor: pointer;\n}\n.lake-bookmark-link-content.has-cover {\n  padding-right: 186px;\n}\n.lake-bookmark-link-content .lake-svg-icon {\n  width: 24px;\n  height: 24px;\n}\n.lake-bookmark-link-cover {\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: 166px;\n  height: 96px;\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: right;\n}\n.lake-bookmark-link-title {\n  font-size: 14px;\n  line-height: 14px;\n  color: #262626;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.lake-bookmark-link-desc {\n  font-size: 12px;\n  line-height: 12px;\n  color: #8C8C8C;\n  margin-top: 10px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.lake-bookmark-link-belong {\n  font-size: 12px;\n  line-height: 12px;\n  color: #595959;\n  margin-top: 10px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: flex;\n  align-items: center;\n}\n.lake-bookmark-link-belong img.favicon {\n  width: 12px;\n  height: 12px;\n  margin-right: 5px;\n}\n[data-lake-card="cardselect"] .lake-cardselect-placeholder {\n  width: 4em!important;\n}\n.lake-cardselect-list .lake-button-set-list {\n  top: 100%;\n}\n.lake-cardselect-list .lake-button-set-list.lake-button-set-list-to-top {\n  top: 100%;\n  bottom: auto;\n}\n.lake-cardselect-list-mask {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 1;\n}\n.lake-diagram-wrapper {\n  background-color: white;\n}\n.lake-diagram-wrapper.lake-diagram-hide-scroll {\n  overflow: hidden;\n}\n[data-lake-card="mindmap"] [data-card-element="center"] {\n  border: 1px solid rgba(0, 0, 0, 0);\n}\n.lake-editor-card-diagram-properties-container .lake-diagram-panel-properties {\n  background-color: rgba(0, 0, 0, 0);\n}\n.lake-editor-card-diagram-properties-container .text-format-text-align.ant-radio-group .ant-radio-button-wrapper {\n  padding: 0 17.2px;\n}\n.lake-diagram-sidebar .lake-diagram-panel-properties {\n  border-left: none;\n  padding: 0;\n}\n.lake-diagram-sidebar .lake-diagram-panel-head {\n  display: none;\n}\n.lake-diagram-sidebar .lake-sidebar-content {\n  overflow: auto;\n  height: calc(100vh - 164px);\n}\n.lake-toolbar-content .lake-diagram-toolbar-dropdown button {\n  height: 32px;\n  line-height: 34px;\n  display: inline-block;\n  border-radius: 3px 3px;\n  vertical-align: inherit;\n}\n');var yt=function(e){f()(n,k.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e,r,i,c){var l;return o()(this,n),l=t.call(this),y()(u()(l),"scrollX",(function(e){if(l.slideX.dragging){var t=e.clientX-l.slideX.startX,n=l.slideX.startScrollLeft+t;n=Math.max(0,Math.min(n,l.oWidth-l.xWidth)),l.slideX.css("left",n+"px");var r=n/(l.oWidth-l.xWidth);r=Math.min(1,r);var a=(l.sWidth-l.oWidth)*r;l.container[0].scrollLeft=a}})),y()(u()(l),"scrollY",(function(e){if(l.slideY.dragging){var t=e.clientY-l.slideY.startY,n=l.slideY.startScrollTop+t;n=Math.max(0,Math.min(n,l.oHeight-l.yHeight)),l.slideY.css("top",n+"px");var r=n/(l.oHeight-l.yHeight);r=Math.min(1,r);var a=(l.sHeight-l.oHeight)*r;l.container[0].scrollTop=a}})),y()(u()(l),"scrollXEnd",(function(){l.slideX.dragging=!1,document.body.removeEventListener("mousemove",l.scrollX),document.body.removeEventListener("mouseup",l.scrollXEnd),l.container.removeClass("scrolling")})),y()(u()(l),"scrollYEnd",(function(){l.slideY.dragging=!1,document.body.removeEventListener("mousemove",l.scrollY),document.body.removeEventListener("mouseup",l.scrollYEnd),l.container.removeClass("scrolling")})),y()(u()(l),"bindXScrollEvent",(function(){l.option.x&&l.slideX.on("mousedown",l._handleXScroll,!1)})),y()(u()(l),"unbindXScrollEvent",(function(){l.slideX&&l.slideX.off("mousedown",l._handleXScroll,!1)})),y()(u()(l),"_handleXScroll",(function(e){l.container.addClass("scrolling"),l.slideX.dragging=!0,l.slideX.startX=e.clientX,l.slideX.startScrollLeft=parseInt(l.slideX.css("left")),document.body.addEventListener("mousemove",l.scrollX),document.body.addEventListener("mouseup",l.scrollXEnd)})),y()(u()(l),"bindYScrollEvent",(function(){l.option.y&&l.slideY&&l.slideY.on("mousedown",l._handleYScroll,!1)})),y()(u()(l),"unbindYScrollEvent",(function(){l.slideY&&l.slideY.off("mousedown",l._handleYScroll,!1)})),y()(u()(l),"_handleYScroll",(function(e){l.container.addClass("scrolling"),l.slideY.dragging=!0,l.slideY.startY=e.clientY,l.slideY.startScrollTop=parseInt(l.slideY.css("top")),document.body.addEventListener("mousemove",l.scrollY),document.body.addEventListener("mouseup",l.scrollYEnd)})),y()(u()(l),"reRenderShadow",(function(e){l.option.needShadow&&(l.shadowLeft.css("left",e+"px"),l.shadowRight.css("left",e+l.oWidth-4+"px"),l.shadowLeft.css("display","none"),l.shadowRight.css("display","none"),l.shadowTimer&&clearTimeout(l.shadowTimer),l.shadowTimer=setTimeout((function(){0!==e&&l.shadowLeft.css("display","block"),e!==l.maxScrollLeft&&l.shadowRight.css("display","block")}),100))})),y()(u()(l),"reRenderX",(function(e){if(l.option.x){l.scrollBarX.css("left",e+"px");var t=e/(l.sWidth-l.oWidth);t=Math.min(1,t);var n=(l.oWidth-l.xWidth)*t;l.slideX.css("left",n+"px"),l.reRenderShadow(e)}})),y()(u()(l),"reRenderY",(function(e){if(l.option.y){l.scrollBarY.css("top",e+"px");var t=e/(l.sHeight-l.oHeight);t=Math.min(1,t);var n=(l.oHeight-l.yHeight)*t;l.slideY.css("top",n+"px")}})),y()(u()(l),"bindEvents",(function(){l.container.on("scroll",l._handleScroll,{passive:!0}),Object(a.a)(window).on("resize",l.refresh,!1),l.bindXScrollEvent(),l.bindYScrollEvent()})),y()(u()(l),"unbindEvents",(function(){l.container.off("scroll",l._handleScroll,{passive:!0}),Object(a.a)(window).off("resize",l.refresh,!1),l.unbindXScrollEvent(),l.unbindYScrollEvent()})),y()(u()(l),"_handleScroll",(function(e){var t=e.target,n=t.scrollLeft,r=t.scrollTop;l.reRenderX(n),l.reRenderY(r)})),y()(u()(l),"refresh",(function(){if(!a.u.firefox&&!a.u.mobile){var e=l.container[0],t=e.offsetWidth,n=e.offsetHeight,r=e.scrollWidth,i=e.scrollHeight,o=e.scrollLeft,c=e.scrollTop;l.oWidth=t,l.oHeight=n,l.sWidth=r,l.sHeight=i,l.xWidth=Math.floor(t*t/r),l.yHeight=Math.floor(n*n/i),l.maxScrollLeft=r-t,l.option.x&&(l.slideX.css("width",l.xWidth+"px"),l.oWidth===l.sWidth?l.slideX.css("display","none"):l.slideX.css("display","block")),l.option.y&&(l.slideY.css("height",l.yHeight+"px"),l.oHeight===l.sHeight?l.slideY.css("display","none"):l.slideY.css("display","block")),l.reRenderX(o),l.reRenderY(c)}})),l.container=Object(a.a)(e),l.option={x:r,y:i,needShadow:c},l.init(),l}return l()(n,[{key:"init",value:function(){var e=this;if(!a.u.firefox&&!a.u.mobile){var t=this.container.children(),n=!1;t.each((function(e){Object(a.a)(e).hasClass("lake-scrollbar")&&(n=!0)})),n||(this.container.css("position","relative"),this.container.addClass("lake-scrollable"),this.option.x&&(this.scrollBarX=Object(a.a)('<div class="lake-scrollbar lake-scrollbar-x "><div class="lake-scrollbar-trigger"></div></div>'),this.slideX=this.scrollBarX.find(".lake-scrollbar-trigger"),this.container.append(this.scrollBarX),this.container.addClass("scroll-x")),this.option.y&&(this.scrollBarY=Object(a.a)('<div class="lake-scrollbar lake-scrollbar-y "><div class="lake-scrollbar-trigger"></div></div>'),this.slideY=this.scrollBarY.find(".lake-scrollbar-trigger"),this.container.append(this.scrollBarY),this.container.addClass("scroll-y")),this.option.needShadow&&(this.shadowLeft=Object(a.a)('<div class="scrollbar-shadow-left"></div>'),this.shadowRight=Object(a.a)('<div class="scrollbar-shadow-right"></div>'),this.container.append(this.shadowLeft),this.container.append(this.shadowRight)),requestAnimationFrame((function(){return e.refresh()})),this.bindEvents())}}},{key:"destroy",value:function(){this.unbindEvents(),this.scrollBarX&&this.scrollBarX.remove(),this.scrollBarY&&this.scrollBarY.remove(),this.shadowLeft&&this.shadowLeft.remove(),this.shadowRight&&this.shadowRight.remove()}}]),n}();var bt=a.n.escape,kt=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"render",value:function(){var e=this.props,t=e.code,n=e.locale,r=e.onFocus,a=e.onChange,i=e.onBlur;return C.a.createElement("div",null,C.a.createElement("textarea",{onFocus:r,onBlur:i,defaultValue:t,onChange:function(e){var t=e.target;a(t.value)}}),C.a.createElement("div",{className:"lake-math-editor-toolbar"},C.a.createElement("div",{className:"lake-math-editor-toolbar-tips"},C.a.createElement("a",{className:"text",href:"/help/editor-math",target:"_blank"},C.a.createElement("span",{className:"lake-icon lake-icon-question"}),bt(n.help))),C.a.createElement("div",{className:"lake-embed-toolbar lake-embed-toolbar-inline lake-embed-toolbar-active"},C.a.createElement(D.a,{title:n.enterTooltips},C.a.createElement("a",{className:"lake-embed-toolbar-btn","data-role":"save"},C.a.createElement("span",{className:"text"},bt(n.save)))))))}}]),n}(C.a.Component);y()(kt,"propTypes",{code:R.a.string,locale:R.a.object,onFocus:R.a.func,onBlur:R.a.func,onChange:R.a.func});var wt={}.toString,xt=function(e,t){return wt.call(e)==="[object "+t+"]"};function _t(e){return null==e}function Ct(e,t,n){try{return window.getComputedStyle?window.getComputedStyle(e,null)[t]:e.currentStyle[t]}catch(e){return _t(n)?null:n}}function Et(e,t){var n=Ct(e,"width",t);return n&&"auto"!==n||(n=e.offsetWidth),parseFloat(n)}function Ot(e,t){var n=Ct(e,"height",t);return n&&"auto"!==n||(n=e.offsetHeight),parseFloat(n)}function St(e,t){var n=[];if(e){if(t&&!t(e))return n;for(var r=e.childNodes,a=0;a<r.length;a++){var i=r[a],o=i.nodeType;3===o?n.push(i):1!==o&&9!==o&&11!==o||(n=n.concat(St(i,t)))}}return n}function Rt(e,t){var n=window.appData;return n&&void 0!==n[e]?n[e]:t}var Dt={locale:Rt("locale","zh-cn"),isYuque:Rt("isYuque",!1),isEnterprise:Rt("isEnterprise",!1),isPrivateCloud:Rt("isPrivateCloud",!1),supportOnlineViewer:Rt("supportOnlineViewer",!1),isPublicCloud:Rt("isPublicCloud",!1),imageServiceDomains:Rt("imageServiceDomains",[]),isWechatMiniApp:Rt("isWechatMiniApp",!1),docId:J()(window.appData||{},"doc.id")},At=[/^https?:\/\/\w+\.(nlark|alipay|alipayobjects|alibaba-inc|antfin-inc)\.com\//];function Tt(){var e=window.location,t=e.origin,n=e.pathname;return window.appData&&window.appData.docUrl||t+n.replace(/\/edit$/,"")}function Pt(e){return(e||"").replace(/<card\s+([^>]+)>/g,(function(e,t){var n=a.n.getAttrMap(e),r=n.name,i=n.value;if("mention"===r&&i){i=a.n.unescape(i);var o=a.n.decodeCardValue(i),c=o.login,l=o.name;if(c&&l)return c=a.n.escape(c),l=a.n.escape(l),'<card data-login="'.concat(c,'" data-name="').concat(l,'" ').concat(t,">")}return e}))}function jt(e,t,n){n=n||window.location.href;var r=e.replace(/^https?:\/\/[^\/]+/,"").replace(/^\/attachments\//,"");return"/"===r.charAt(0)&&(r=r.substr(1)),t=t||"",a.h.isOffice(r)||a.h.isMacOffice(r)||"pdf"===a.h.getFileExtname(e)?"".concat(t,"/office/").concat(r,"?from=").concat(encodeURIComponent(n)):"".concat(t,"/preview/").concat(r,"?from=").concat(encodeURIComponent(n))}function Mt(e){return/^data:image\//i.test(e||"")}function Nt(e,t){if("string"==typeof e&&(t=e,e=null),t=t||"",Dt.isYuque&&t.startsWith("https://intranetproxy.alipay.com/skylark/"))return!0;for(var n=0;n<Dt.imageServiceDomains.length;n++){var r=Dt.imageServiceDomains[n];if(t.startsWith("http://".concat(r))||t.startsWith("https://".concat(r)))return!1}if(!t.startsWith("http://")&&!t.startsWith("https://"))return!1;var a=null;try{a=new URL(t).host}catch(e){}if(!a)return!1;if(window.location.host===a)return!0;if(e){var i=(e.options||{}).localImageHostList;if(i)for(var o=0,c=i.length;o<c;o++){var l=i[o];if("string"==typeof l){if(l===a)return!1}else if(l.test&&l.test(a))return!1}return!0}for(var s=0;s<At.length;s++)if(At[s].test(t))return!1;return!0}function Lt(e){return(e=e||"").indexOf(":")>=0&&(e=e.split(":")[1]),e}function It(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{docVerstion:1,viewport:"fixed",typography:"classic"};e=Pt(e);var n=t.viewport,r=t.typography;return"fixed"!==n&&"adapt"!==n&&(n="fixed"),"classic"!==r&&"traditional"!==r&&(r="classic"),'<!doctype lake><meta name="doc-version" content="'.concat(t.docVerstion,'" /><meta name="viewport" content="').concat(n,'" /><meta name="typography" content="').concat(r,'" />').concat(e)}function zt(e){return e?a.n.escape(e):e}function Bt(e){var t=window.location,n=e+"?from=".concat(encodeURIComponent(t.href));return a.n.sanitizeUrl(n)}function Ft(e,t){if(!e||!t||"object"!==Z()(t))return e;try{var n=new URL(e,location.origin);Object.keys(t).forEach((function(e){n.searchParams.append(e,t[e])}));var r=n.search;return e.split("?")[0]+r}catch(t){return console.warn(t),e}}var Vt={"zh-cn":{copySuccess:"复制成功!"},en:{copySuccess:"Copy Success!"}},Ut=function(){function e(){var t=this;o()(this,e),y()(this,"onBeforeRenderImage",(function(e){return(0,t.getOptions().onBeforeRenderImage)(e)})),this.events=[],this.bodyOverflow=document.body.style.overflow}return l()(e,[{key:"embedToolbar",value:function(){}},{key:"toolbar",value:function(){}},{key:"maximize",value:function(){document.body.style.overflow="hidden"}},{key:"restore",value:function(){document.body.style.overflow=this.bodyOverflow}},{key:"render",value:function(){}},{key:"activate",value:function(){}},{key:"unactivate",value:function(){}},{key:"saveValue",value:function(){}},{key:"copyCardEmbedLink",value:function(){var e=this.value.id;if(e){var t=this.getLang(),n=a.c.exportParser&&a.c.exportParser.getDocUrl()||Tt();a.c.copyText("".concat(n,"?inner=").concat(e)),A.a.success(Vt[t].copySuccess)}}},{key:"select",value:function(){var e=this.container,t=this.constructor.selectStyleType;e[0].childNodes.length>0&&("background"===t?e.addClass("lake-selected-background"):e.addClass("lake-selected-outline"))}},{key:"unselect",value:function(){var e=this.container,t=this.constructor.selectStyleType;e[0].childNodes.length>0&&("background"===t?e.removeClass("lake-selected-background"):e.removeClass("lake-selected-outline"))}},{key:"selectByOther",value:function(e,t){var n=this.container,r=this.constructor.selectStyleType;n[0].childNodes.length>0&&("background"===r?n.css("background",t):n.css("outline","2px solid "+e))}},{key:"unselectByOther",value:function(){var e=this.container,t=this.constructor.selectStyleType;e[0].childNodes.length>0&&("background"===t?e.css("background",""):e.css("outline",""))}},{key:"activateByOther",value:function(e,t){return this.selectByOther(e,t)}},{key:"unactivateByOther",value:function(){this.unselectByOther()}},{key:"getContainerWidth",value:function(){return Et(this.container[0])}},{key:"getContainerHeight",value:function(){return Ot(this.container[0])}},{key:"hideMask",value:function(){this.mask&&(this.mask.hide(),this.isMaskShow=!1)}},{key:"showMask",value:function(){this.mask&&(this.mask.show(),this.isMaskShow=!0)}},{key:"preventMask",value:function(){return!1}},{key:"createMask",value:function(){var e=this,t=this.container,n=Object(a.a)('<div class="lake-card-cover-mask"></div>');t.css({position:"relative"}),t.append(n),this.isMaskShow=!0,n.on("click",(function(){e.isMaskShow&&e.hideMask()})),Object(a.a)(document).on("click",(function(n){e.isMaskShow||t[0].contains(n.target)||e.preventMask(n)||e.showMask()})),this.mask=n}},{key:"showRisizeController",value:function(){this.resizeController&&this.resizeController.show()}},{key:"hideRisizeController",value:function(){this.resizeController&&this.resizeController.hide()}},{key:"createResizeController",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.onResizing,i=n.onDragstart,o=n.onDragmove,c=n.onDragend,l=n.maxHeight;e=Object(a.a)(e);var s,u,d,f=80;this.resizeController=this._createResizeController({container:this.container,dragstart:i||function(){s=Ot(e[0]),u=!0},dragmove:o||function(t){u&&(d=(d=s+t)>=f?d:f,l&&d>l&&(d=l),e.css("height",d+"px"),e.addClass("manual-height"),r&&r(d))},dragend:c||function(){u&&(t.setValue({height:Ot(e[0])}),u=!1)}}),this.resizeController.hide()}},{key:"_createResizeController",value:function(e){var t,n=e.container,r=e.dragstart,i=e.dragmove,o=e.dragend,c=Object(a.a)('<img class="card-resize-button-ud" draggable="true" src="https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*vl1iS57KtIoAAAAAAAAAAABjAQAAAQ/original" />');return n.append(c),this.bindEvent(c,"dragstart",(function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0,t={x:e.clientX,y:e.clientY},r(t)})),this.bindEvent(Object(a.a)(document),"mousemove",(function(e){if(t){var n=e.clientY-t.y;i(n)}})),this.bindEvent(Object(a.a)(document),"mouseup",(function(){t=void 0,o()})),c.on("click",(function(e){e.stopPropagation()})),c}},{key:"destroy",value:function(){this.destroyed=!0,this.removeEvent()}},{key:"removeEvent",value:function(){this.events.forEach((function(e){var t=e.element,n=e.type,r=e.callback;t.off(n,r)})),this.events=[]}},{key:"getViewEngine",value:function(){return this.engine||this.contentView}},{key:"getTopEngine",value:function(){var e=this.engine||this.contentView;if(!e)return null;for(;e.parentEngine;)e=e.parentEngine;return e}},{key:"bindEvent",value:function(e,t,n){e.on(t,n),this.events.push({element:e,callback:n,type:t})}},{key:"getOptions",value:function(){return this.state.readonly?this.contentView.options:this.engine.options}},{key:"getLang",value:function(){return this.getOptions().lang}},{key:"setValue",value:function(e){var t=this.cardRoot;if(!this.state.readonly&&e){var n=this.engine,r=n.card,a=n.change;r.setValue(t,Object.assign(this.value,e)),a.change()}}},{key:"remove",value:function(){!this.state.readonly&&this.engine.change.removeCard(this.cardRoot)}},{key:"getMargin",value:function(){var e=(this.value||{}).margin;return void 0!==e&&e}},{key:"toggleMargin",value:function(){var e=this.getMargin();this.cardRoot.removeClass("lake-card-margin"),this.cardRoot.removeClass("lake-card-margin-top"),this.cardRoot.removeClass("lake-card-margin-bottom"),!0===e?this.cardRoot.addClass("lake-card-margin"):!1===e||"object"===Z()(e)&&(e.top&&this.cardRoot.addClass("lake-card-margin-top"),e.bottom&&this.cardRoot.addClass("lake-card-margin-bottom"))}},{key:"getMoreEmbedToolbarConfig",value:function(){var e=this;if(!this.engine)return[];var t=this.engine.locale;return[{type:"more",items:[{type:"switch",name:"margin",title:t.embedToolbar.toggleMargin,getState:function(){return!!e.getMargin()},onClick:function(){var t=(e.value||{}).margin,n=void 0!==t&&t;e.setValue({margin:!n}),e.toggleMargin()}},{type:"delete",title:t.embedToolbar.deleteCard}]}]}},{key:"refreshToolbar",value:function(){this.cardRoot&&(this.getViewEngine().card.updateToolbar(this),this.cardRoot.hasClass("lake-activated")&&this.getViewEngine().card.showToolbar(this.cardRoot))}},{key:"setToolbar",value:function(){this.embedToolbar&&!this.toolbarRendered&&(this.engine.card.setToolbar({cardRoot:this.cardRoot,component:this,engine:this.engine,contentView:this.contentView}),this.toolbarRendered=!0)}}]),e}();function qt(e){var t=ee.ua.desktop&&window.appData&&window.appData.space&&window.appData.space.host||"";return!ee.ua.desktop&&e&&(t=e),window&&window.____lakeEditorTestMockiMageGenerator||{generate:"".concat(t,"/api/services/graph/generate/"),generateRender:"".concat(t,"/api/services/graph/generate_redirect/"),preview:"".concat(t,"/api/services/graph/preview/")}}y()(Ut,"canSearch",!1);var Ht=qt();function Wt(e,t,n){return Object(r.ajax)({method:"post",url:"".concat(qt(n).generate).concat(e),data:{content:t,from:Dt.isYuque?"yuque":"skylark",user_id:Dt&&Dt.me&&Dt.me.id}}).promise.catch((function(n){return console&&console.error("generate ".concat(e," error: ").concat(n)),{url:"".concat(Ht.generateRender).concat(e,"?").concat(encodeURIComponent(t))}}))}function Yt(e,t,n){return Object(r.ajax)({method:"post",url:"".concat(qt(n).preview).concat(e),data:{content:t,from:Dt.isYuque?"yuque":"skylark",user_id:Dt&&Dt.me&&Dt.me.id}}).promise}function Gt(e){var t=function(){e.updateEditorPosition()};e.scrollAndResizeCallback=t,window.addEventListener("scroll",t,!0),window.addEventListener("resize",t,!0)}function Kt(e){var t=e.scrollAndResizeCallback;window.removeEventListener("scroll",t,!0),window.removeEventListener("resize",t,!0)}function Xt(e){e.css("cursor","pointer"),e.attr("draggable",!0),e.css("user-select","none")}function $t(e){var t=e.editorContainer,n=e.engine,r=e.cardRoot,a=e.callback,i=void 0===a?function(e){return-1!==[13,27].indexOf(e.keyCode)}:a;t.attr("tabIndex",0),t.on("keydown",(function(e){n&&i(e)&&(e.preventDefault(),n.change.activateCard(document.body,"manual"),n.change.focusCard(r))})),t.hide()}function Zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zt(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Jt=a.u.chrome?14/17.4:1,en=function(e){f()(n,Ut);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){var e;return o()(this,n),(e=t.call(this)).renderMath=ne()((function(t){e._renderMath(t)}),300),e}return l()(n,[{key:"renderImage",value:function(e){var t=this.getMaxWidth(),n=e[0],r=n.naturalWidth,a=n.naturalHeight,i=parseInt(Jt*r),o=parseInt(Jt*a);e.css("width","".concat(i,"px")),e.css("height","".concat(o,"px")),e.css("max-width","".concat(t,"px")),this.value=Object.assign(this.value,{width:i,height:o})}},{key:"_renderMath",value:function(e){var t=this;if(e){var n=this.getTopEngine();Yt("latex",e,n.options.previewOrigin).then((function(n){var r=n.success,i=n.svg;if(t.hasSave=!1,r&&i){var o="data:image/svg+xml,"+encodeURIComponent(i).replace(/'/g,"%27").replace(/"/g,"%22"),c=new Image;c.src=o,c.onload=function(){t.renderImage(Object(a.a)(c)),t.viewContainer.empty(),t.viewContainer.append(c),t.updateEditorPosition()},t.svg=i}else t.renderPureText(e),t.svg=void 0,t.value=Object.assign(t.value,{code:e,src:null})}))}}},{key:"getMaxWidth",value:function(){var e=this.getViewEngine(),t=window.getComputedStyle(e.editArea[0]),n=parseInt(t.width)-parseInt(t["padding-left"])-parseInt(t["padding-right"]);return this.state.readonly?n:n-2}},{key:"renderPureText",value:function(e){var t=this.getMaxWidth();this.viewContainer.html('<span class="lake-math-content-tmp" style="max-width: '.concat(t,'px">').concat(a.n.escape(e),"</span>")),this.updateEditorPosition()}},{key:"focusTextarea",value:function(){this.editorContainer.find("textarea")[0].focus()}},{key:"unactivate",value:function(){this.state.readonly||(this.engine.readonly(!1),this.editorContainer.hide(),Kt(this))}},{key:"updateEditorPosition",value:function(){if(this.editorContainer){var e=this.viewContainer.getBoundingClientRect();this.editorContainer.css("left","".concat(e.left,"px")),this.editorContainer.css("top","".concat(e.bottom+8,"px"))}}},{key:"activate",value:function(){this.state.readonly||(this.editorContainer.show(),this.updateEditorPosition(),Gt(this))}},{key:"renderView",value:function(){var e=this,t=this.value,n=this.container,r=this.locale,i=t.src,o=t.code,c=t.width,l=t.height,s=Object(a.a)('<span class="lake-math-container"></span>');if(n.append(s),this.viewContainer=s,i){var u=Object(a.a)('<img src="'.concat(a.n.escape(i),'" />'));s.append(u),c&&u.css("wdith","".concat(c,"px")),l&&u.css("height","".concat(l,"px")),this.img=u,u[0].onload=function(){e.renderImage(u)},u[0].onerror=function(){e._renderMath(o)}}else o?this._renderMath(o):this.renderPureText(r.placeholder);!this.state.readonly&&Xt(s)}},{key:"onChange",value:function(e){this.value=Object.assign(this.value,{code:e,src:null}),this.code=e,this.renderMath(e)}},{key:"onConfirm",value:function(){this.value&&this.setValue(this.value)}},{key:"renderEditor",value:function(){var e=this,t=this.container,n=this.value,r=this.engine,i=this.cardRoot,o=this.locale,c=Object(a.a)('<div class="lake-card-math-editor"></div>');this.editorContainer=c,t.append(c),$t({editorContainer:c,engine:r,cardRoot:i,callback:function(e){return 27===e.keyCode||13===e.keyCode&&(e.ctrlKey||e.metaKey)}}),O.a.render(C.a.createElement(kt,{code:n.code,locale:o,onFocus:function(){c.addClass("textarea-focus"),e.engine.readonly(!0)},onBlur:function(){e.onConfirm(),c.removeClass("textarea-focus")},onChange:function(t){e.onChange(t)}}),c[0],(function(){c.find('[data-role="save"]').on("click",(function(e){e.stopPropagation(),e.preventDefault(),r.change.activateCard(document.body,"manual"),r.change.focusCard(i)}));var e=c.find("textarea");e.on("mousedown",(function(){e[0].focus()}))})),this.bindEvent(r.asyncEvent,"save:before",(function(){if(!1===e.hasSave)return Wt("latex",e.code).then((function(t){var n=t.url;e.hasSave=!0,e.setValue({src:n},!1)}))}))}},{key:"getDefaultValue",value:function(){return{src:null,code:""}}},{key:"render",value:function(){var e=this.getViewEngine().locale.math,t=this.getDefaultValue();this.locale=e,this.value=this.value||{},this.value=Qt(Qt({},t),this.value),this.defaultValue=t,this.value.code?this.code=this.value.code:this.value.src=null,this.renderView(),this.state.readonly||this.renderEditor()}},{key:"destroy",value:function(){x()(g()(n.prototype),"destroy",this).call(this),Kt(this)}}]),n}();y()(en,"type","inline"),y()(en,"selectStyleType","background");var tn=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"render",value:function(){var e,t=this,n=this.props,r=n.onBeforeUpload,a=n.onAfterUpload,i=n.onBeforeInsertCard,o=n.uploader,c=this.props,l=c.engine,s=c.getEngine,u=Lt(this.props.name);return(l=s()||l).uploader&&(e=l.uploader.getAccept(u)),C.a.createElement("span",{onClick:function(){return t.fileInput.click()},"data-lake_prevent_click_unselect":null!=o},C.a.createElement("input",{type:"file",accept:e,ref:function(e){t.fileInput=e},onChange:function(e){for(var n=t.fileInput.files,c=[],s=0,d=n.length;s<d;s++)c.push(n[s]);o?o.post(u,c):l.uploader.post(u,c,{onBeforeUpload:r,onAfterUpload:a,onBeforeInsertCard:i}),e.target.value=null},style:{display:"none"},multiple:"multiple"}),this.props.children)}}]),n}(C.a.Component);y()(tn,"propTypes",{name:R.a.string,engine:R.a.object,getEngine:R.a.func,children:R.a.object,onBeforeUpload:R.a.func,onAfterUpload:R.a.func,onBeforeInsertCard:R.a.func,uploader:R.a.object});var nn=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),r=t.call(this,e),y()(u()(r),"onSelect",(function(e,t,n){r.props.onSelect(e,t+1,n+1)})),y()(u()(r),"onHover",(function(e,t){var n=Math.max(r.state.minRows,Math.min(r.state.maxRows,e+2)),a=Math.max(r.state.minCols,Math.min(r.state.maxCols,t+2));r.setState({currentRows:n,currentCols:a,selectedRows:e+1,selectedCols:t+1})})),y()(u()(r),"renderTr",(function(e,t){for(var n=r.state,a=n.selectedRows,i=n.selectedCols,o=[],c=function(t){var n=le()({"lake-toolbar-table-selector-td":!0,actived:e<a&&t<i});o.push(C.a.createElement("div",{className:n,key:t,onMouseDown:function(n){return r.onSelect(n,e,t)},onMouseOver:function(){return r.onHover(e,t)}}))},l=0;l<t;l++)c(l);return o})),y()(u()(r),"renderTable",(function(e,t){for(var n=[],a=0;a<e;a++)n.push(C.a.createElement("div",{className:"lake-toolbar-table-selector-tr",key:a},r.renderTr(a,t)));return n})),r.state={maxRows:10,maxCols:10,minRows:4,minCols:4,currentCols:4,currentRows:4,selectedCols:0,selectedRows:0},r}return l()(n,[{key:"render",value:function(){var e=this.state,t=e.currentCols,n=e.currentRows,r=e.selectedRows,a=void 0===r?0:r,i=e.selectedCols,o=void 0===i?0:i;return C.a.createElement("div",{className:"lake-toolbar-table-selector","data-lake-element":"table-selector"},this.renderTable(n,t),C.a.createElement("div",{className:"lake-toolbar-table-selector-info"},a," x ",o))}}]),n}(C.a.Component);y()(nn,"propTypes",{className:R.a.string,onSelect:R.a.func}),vt(".lake-card-tooltip-container .lake-card-tooltip-content-container {\n  font-size: 12px;\n  color: rgba(0, 0, 0, 0.65);\n  max-width: 354px;\n}\n.lake-card-tooltip-container .lake-card-tooltip-content-container p {\n  margin-bottom: 8px;\n}\n.lake-card-tooltip-container .lake-card-tooltip-content-container .lake-svg-icon {\n  background-size: 24px 24px;\n  width: 24px;\n  height: 24px;\n  margin-right: 14px;\n}\n.lake-card-tooltip-container .lake-card-tooltip-content-container .lake-card-tooltip-title {\n  font-weight: bold;\n  font-size: 14px;\n  margin-bottom: 12px;\n}\n.lake-card-tooltip-container .lake-card-tooltip-content-container .lake-card-tooltip-flat-cell {\n  display: inline-block;\n  margin-right: 12px;\n}\n.lake-card-tooltip-container .lake-card-tooltip-content-container .lake-card-tooltip-flat-cell .lake-svg-icon {\n  margin-top: 10px;\n}\n.lake-card-tooltip-container .lake-card-tooltip-content-container .lake-svg-icon-helper-tips {\n  width: 12px;\n  height: 12px;\n  background-size: 12px 12px;\n  vertical-align: middle;\n  margin-top: -3px;\n}\n.lake-card-tooltip-container .lake-card-tooltip-content-container .lake-card-tooltip-gif-title {\n  max-width: 205px;\n}\n.lake-card-tooltip-container .lake-card-tooltip-content-container .lake-card-tooltip-gif-img {\n  margin-top: 8px;\n}\n.lake-card-tooltip-container .lake-card-tooltip-content-container .lake-card-tooltip-hierarchy-cell .lake-card-tooltip-hierarchy-name-container {\n  margin-bottom: 8px;\n}\n.lake-card-tooltip-container .lake-card-tooltip-content-container .lake-card-tooltip-hierarchy-cell .lake-card-tooltip-hierarchy-name-container .lake-card-tooltip-hierarchy-name {\n  font-size: 14px;\n}\n.lake-card-tooltip-container .lake-card-tooltip-content-container .lake-card-tooltip-hierarchy-cell .lake-card-tooltip-hierarchy-name-container .lake-card-tooltip-hierarchy-sub-name {\n  color: rgba(0, 0, 0, 0.45);\n}\n.lake-card-tooltip-container .ant-tooltip {\n  max-width: 390px;\n}\n.lake-card-tooltip-container .ant-tooltip .ant-tooltip-inner {\n  background-color: white;\n  padding: 14px;\n  display: inline-block;\n}\n.lake-card-tooltip-container .ant-tooltip .ant-tooltip-arrow {\n  border-bottom-color: white;\n  border-left-color: white;\n}\n.lake-card-tooltip-container .ant-tooltip .ant-tooltip-arrow::before {\n  background-color: white;\n}\n");var rn={"zh-cn":{supportFollowingExts:"支持以下格式"},en:{supportFollowingExts:"The following file formats are supported"}}[window.appData&&"zh-cn"!==window.appData.locale?"en":"zh-cn"],an=document.createElement("div");an.setAttribute("class","lake-card-tooltip-container lake-prevent-card-activated"),an.addEventListener("click",(function(e){e.stopPropagation()})),document.body.appendChild(an);var on=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"renderSubTitle",value:function(e){return e.map((function(e,t){var n=e.children.map((function(e,n){return C.a.createElement("span",{className:"lake-svg-icon lake-svg-icon-".concat(e.icon),key:"".concat(t).concat(n)})}));return C.a.createElement("div",{key:"".concat(t),className:"lake-card-tooltip-hierarchy-cell"},C.a.createElement("p",{className:"lake-card-tooltip-hierarchy-name-container"},C.a.createElement("span",{className:"lake-card-tooltip-hierarchy-name"},e.name)," ",C.a.createElement("span",{className:"lake-card-tooltip-hierarchy-sub-name"},e.subName)),C.a.createElement("p",null,n))}))}},{key:"renderCommon",value:function(e){return e.map((function(e,t){return C.a.createElement("div",{key:"0".concat(t),className:"lake-card-tooltip-flat-cell"},C.a.createElement("span",null,e.name),C.a.createElement("br",null),C.a.createElement("span",{className:"lake-svg-icon lake-svg-icon-".concat(e.icon)}))}))}},{key:"renderGif",value:function(e){return C.a.createElement("img",{className:"lake-card-tooltip-gif-img",src:e,height:132})}},{key:"renderHelperTips",value:function(e){return C.a.createElement("a",{href:e,target:"_blank",className:"lake-svg-icon lake-svg-icon-helper-tips"})}},{key:"getTitle",value:function(){var e=this.props.data;if(!e||null===e.title)return"";var t="lake-card-tooltip-title lake-card-tooltip-".concat(e.type,"-title"),n=e.title?e.title:rn.supportFollowingExts;return e.helperTipsLink?C.a.createElement("p",{className:t},n," ",this.renderHelperTips(e.helperTipsLink)):C.a.createElement("p",{className:t},n)}},{key:"renderTooltip",value:function(){var e,t=this.props.data,n=this.getTitle();return t&&("subTitle"===t.type?e=this.renderSubTitle(t.content):"common"===t.type?e=this.renderCommon(t.content):"gif"===t.type&&(e=t.src?this.renderGif(t.src):"")),C.a.createElement("div",{className:"lake-card-tooltip-content-container"},n,e)}},{key:"render",value:function(){var e=this.props,t=e.children;return e.data?C.a.createElement(D.a,{title:this.renderTooltip(),placement:"right",getPopupContainer:function(){return an}},t):C.a.createElement("div",null,t)}}]),n}(C.a.Component);on.defaultProps={data:null},on.propTypes={data:R.a.object,children:R.a.object};var cn=function(){function e(){o()(this,e)}return l()(e,null,[{key:"check",value:function(e,t){if(!window.__member_message_ref)return null;var n;switch(e){case"image":n="max_single_image_size";break;case"video":n="max_single_video_size";break;default:n="max_single_file_size"}try{var r=window.__member_message_ref.current.getMessageWithFile({filesize:t},n)||null;if(r)return{level:r.level||"error",msg:r.msg||"unknown error",alwaysOpen:!!r.alwaysOpen,callback:r.callback||function(){},result:r}}catch(e){return console.log(e),null}return null}},{key:"getMessageByCode",value:function(e,t){if(!window.__member_message_ref)return null;try{var n=window.__member_message_ref.current.getMessage(e,{},t)||null;if(n)return{level:n.level||"error",msg:n.msg||"unknown error",alwaysOpen:!!n.alwaysOpen,callback:n.callback||function(){}}}catch(e){return console.log(e),null}return null}}]),e}();function ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ln(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ln(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var un=a.u.macos?"⌘":"Ctrl",dn={fontColor:"Text color",bgColor:"Highlight color",moreColor:"More"},fn={layout:"Layout",layoutBlock:"Break text",layoutInline:"In line"},pn={alignment:"Align",alignLeft:"Left align",alignCenter:"Centre align",alignRight:"Right align"},hn={uploadFailed:"Failed to upload the file, please retry",notSupportExt:"This file type is not supported"},mn={dndTips:"<span>Drag to reposition<br />Click for more options </span>",dndInsert:"Insert newline",dndClone:"Clone",dndCopy:"Copy anchor",dndCopySuccess:"Copied successfully",dndEdit:"Edit anchor",dndDelete:"Delete"},gn={linkPlaceholder:"Please input a link or an anchor",linkSave:"Apply",linkEdit:"Change",linkDelete:"Remove",linkOpen:"Open"},vn={editorModalClose:"Discard",editorModalPopupTips:"Are you sure?",editorModalPopupCancel:"Cancel",editorModalPopupConfirm:"Discard",editorModalSave:"Apply",editorModalConfirm:"Do you want to discard changes?",editorModalDiscardAndExit:"Discard and exit",editorModalCancel:"Cancel",editorModalSaveAndExit:"Save and exit"},yn={edit:"Change",delete:"Delete",save:"Save Draft",help:"Help",undo:"Undo",redo:"Redo",insertSibling:"Sibling Topic",insertChild:"Sub Topic",insertRoot:"Main Topic",createLink:"Create link",attachImage:"Attach image",collapse:"Fold subtopics",expand:"Unfold subtopics",autoAdjust:"Auto",properties:"Settings panel",insertRootAfterMaximize:"Add main node after maximizing",propertiesAfterMaximize:"Set styling after maximizing",downloadImage:"Download Image",style:"Style"},bn={pure:{support:"support"},editor:{save:"Save draft",print:"Print",file:"File",edit:"Edit",view:"View",insert:"Insert",format:"Format",lab:"Lab",version:"Version",help:"Help"},alignment:{buttonTitle:"Align",alignLeft:"Left align",alignCenter:"Centre align",alignRight:"Right align",alignJustify:"Justify"},background:dn,blockquote:{buttonTitle:"Quotation",menuTitle:"Quotation"},bold:{macTitle:"Bold ⌘+B",winTitle:"Bold Ctrl+B",text:"Bold"},paintformat:{buttonTitle:"Paint format"},clearFormat:{buttonTitle:"Clear formatting"},code:{macTitle:"Inline code",winTitle:"Inline code",text:"Inline code"},codeBlock:sn(sn({},mn),{},{buttonTitle:"Code block",menuTitle:"Code block",preview:"Preview",delete:"Delete",copyCode:"Copy Code",copySuccess:"Successful copy!",autoWrap:"Auto wrap"}),color:dn,emoji:{buttonTitle:"Moods"},localdoc:sn(sn({},hn),{},{formatError:"The file embed preview is not supported",allowDownload:"Allow downloading of files under the reading page",items:{office:"Windows office suite",officeDesc:"Supported Word, Excel, PPT",mac:"Mac office suite",macDesc:"Supported Pages, Numbers, Keynote",design:"Design files",designDesc:"Supported Axure, Photoshop, Sketch",mind:"Mind map file",mindDesc:"Supported MindManager, XMind, MindNote",pdf:"PDF",video:"Local video",localFile:"Local file",audio:"Local audio"}}),preview:{office:"Office preview, upload file size is limited to 100 MB",macOffice:"The local file preview, file size is limited to 200 MB",pdf:"PDF preview, upload file size is limited to 100 MB"},premium:{sidebar:{title:"Paid Reading",moreLink:"Learn More",desc:'By paying for reading, original content can be valued to generate income. Please abide by <a href="https://www.yuque.com/terms/pay_to_read" target="_blank">the service agreement of paying for reading</a>.',price:{title:"Pricing",desc:"Pricing can only be set once and cannot be modified after release.",unit:"YUAN",error:{required:"please set the pricing",invalid:"invalid input",range:"beyond legal scope"}},daysCount:{title:"Duration",desc:"Pay for reading days, you need to pay for reading. After paying for the number of reading days, the document is automatically set to read the full text for free. <strong>The duration can only be set once and cannot be modified after publishing.</strong>",unit:"Day",error:{required:"please set the duration",invalid:"invalid input",range:"beyond legal scope"}},tip:{title:"Custom split line copy",error:{length:"copywriting supports up to 20 words"}}},defaultTip:"Pay for the following content",paidTip:"Paid, the following is the paid content",expiredTip:"The payment time has been exceeded, and the document has been automatically published for free."},file:sn(sn(sn({},hn),mn),{},{buttonTitle:"Attachment",menuTitle:"Attachment",stillUploading:"Some files are still in the process of uploading",stillTransfering:"Some files are still transfering",formatError:"Unsupported file format, please compress it to ZIP before uploading",sizeError:"Failed to upload for the file size is larger than 500M",placeholder:"Upload an attachment(maximum file size: 500M)",preview:"Preview",replace:"Replace",download:"Download",delete:"Delete",transfering:"Transferring...",invalid:"Attachment invalid",failReadFile:"File read failed, please re-upload"}),heading:sn(sn({},mn),{},{buttonTitle:"Heading and text",normal:"Normal",heading_1:"Heading 1",heading_2:"Heading 2",heading_3:"Heading 3",heading_4:"Heading 4",heading_5:"Heading 5",heading_6:"Heading 6"}),fontsize:{buttonTitle:"Font size"},history:{undo:"Undo",redo:"Redo"},hr:sn(sn({},mn),{},{buttonTitle:"Horizontal line",menuTitle:"Horizontal line"}),image:sn(sn(sn(sn(sn(sn({},hn),fn),pn),mn),gn),{},{buttonTitle:"Image",menuTitle:"Image",sizeError:"Failed to upload the image (maximum image size: 10M)",uploadFailed:"Failed to upload the image, please retry",stillUploading:"Some images are still in the process of uploading",uploadTips:"Drag an image here or click to choose one to upload (maximum image size: 10M)",copyFailed:"Failed to copy the image",copyFailedTips:"Image does not support copy, please copy and upload separately",loadFailed:"Network error, can't display image",placeholder:"Upload an image (maximum image size: 10M)",sizeTitle:"Size",width:"Width",formatError:"This file type is not supported",height:"Height",originSize:"Original size",linkTitle:"Link",linkPlaceholder:"Link address",linkTargetTips:"Open on current page",replace:"Replace",delete:"Delete",preferences:"Preferences",style:"Style",none:"None",stroke:"Stroke",shadow:"Shadow",spacing:"Spacing",topSpacingTips:"Add top margin to picture",bottomSpacingTips:"Add bottom margin to picture"}),indent:{buttonTitle:"Indent",decrease:"Decrease indent",increase:"Increase indent"},lineHeight:{buttonTitle:"Line Height",defaultTitle:"Default"},italic:{macTitle:"Italic ⌘+I",winTitle:"Italic Ctrl+I",text:"Italic"},link:sn(sn({},gn),{},{buttonTitle:"Link",menuTitle:"Link"}),linkCard:{buttonTitle:"Bookmark Link",title:"Bookmark Link"},list:{buttonTitle:"List",orderedList:"Numbered list",unorderedList:"Bulleted list",taskList:"To-Do list"},mark:{macTitle:"Highlight text",winTitle:"Highlight text",text:"Highlight text"},math:sn(sn(sn(sn(sn({},fn),pn),mn),gn),{},{buttonTitle:"Equation",menuTitle:"Equation",success:"Copied successfully",placeholder:"New equation",edit:"Change",copy:"Copy source code",delete:"Delete",cancel:"Cancel",save:"Apply",sourceCodeRequired:"Please input source code",syntaxInvalid:"Syntax error",help:"Help",enterTooltips:"".concat(un," + Enter")}),flowchart:sn(sn(sn(sn(sn({},pn),mn),vn),yn),{},{insertText:"Insert Text",insertShape:"Insert Shape",InsertEdge:"Insert Edge"}),mindmap:sn(sn(sn(sn(sn({},pn),mn),vn),yn),{},{defaultRootText:"Mind Map",newNode:"New Node",menuTitle:"Mind Map",buttonTitle:"Mind Map",editorTitle:"Mind Map",line:"Line"}),moremark:{buttonTitle:"More text styles"},paste:{copy:"Copy",cut:"Cut",paste:"Paste",pastePlainText:"Paste plain text",pasteMarkdown:"Paste Markdown",selectAll:"Select all"},textDiagram:sn(sn(sn(sn({},pn),mn),vn),{},{edit:"Edit",save:"Save",preview:"Preview",template:"Template",help:"Help",winPreviewTooltip:"Ctrl+Shift+P",macPreviewTooltip:"⌘+Shift+P"}),riddle:sn(sn({},mn),{},{buttonTitle:"Riddle",menuTitle:"Riddle",active:"Click to active",replace:"Replace",delete:"Delete",addressInvalid:"Invalid hyperlink",placeholder:"Please input link to your riddle and then enter to insert it"}),strikethrough:{macTitle:"Strike-through ⌘+Shift+X",winTitle:"Strike-through Ctrl+Shift+X",text:"Strike-through"},sub:{macTitle:"Subscript",winTitle:"Subscript",text:"Subscript"},sup:{macTitle:"Superscript",winTitle:"Superscript",text:"Superscript"},table:{buttonTitle:"Table",menuTitle:"Table",copy:"Copy",cut:"Cut",merge:"Merge cells",unmerge:"Unmerge cells",clear:"Clear content",deleteColumn:"Delete selected column(s)",deleteRow:"Delete selected row(s)",deleteTable:"Delete table"},underline:{macTitle:"Underline ⌘+U",winTitle:"Underline Ctrl+U",text:"Underline"},video:sn(sn(sn({},hn),mn),{},{buttonTitle:"Video",menuTitle:"Video",play:"Play",replace:"Replace",download:"Download",delete:"Delete",sizeError:"Failed to upload the video"}),toc:{title:"TOC",open:"Open TOC",close:"Close TOC"},card:{mindmapFile:"MindMap File",designingFile:"Designing File",officeFile:"Office File",localdocSubTitle:"Support Office, XMind, Sketch, etc.",label:"Label",labelDescription:"simple label tag",localdoc:"Local File",localdocDescription:"Support Office, XMind, Sketch, etc.",iframeOverLimit:"Documents support up to ${limit} embedded cards",sizeOverLimit:"File support up to ${sizeLimit} to preview",placeholder:"card name",embed:"embed",common:"common",yuque:"Yuque content",yuqueSubTitle:"Support for repository, whole or partial snippet documents",yuqueTooltipTitle:"Copy links to the repository, documents, paragraphs, etc., and embed them in this document",yuqueDescription:"Supports embedded text documents, tables, brain maps",buttonTitle:"Insert image, table,<br />attachment, codeblock, etc.",miniButtonTitle:"Insert image, label,<br />Yuque doc, etc.",normal:" ",media:"Media",engineering:"Engineering",description:"Enter  <code>".concat(un,"</code> + <code>/</code>  quickly insert a card"),table:"Table",tableDescription:"Insert online table",image:"Image",imageDescription:"Upload one or more images",video:"Local video",videoDescription:"Upload local video",youku:"Online video",youkuName:"Youku",youkuDescription:"Youku, Bilibili, Taobao video",youkuSubTitle:"Youku, Bilibli, Taobao Video",youkuTooltipTitle:"Supports the following websites",youkuSiteDesc:"Youku, Bilibli, Taobao Video",thirdparty:"Third party Service",internalThirdpartySubTitle:"Xiami, Riddle, Deepinsight, etc.",thirdpartySubTitle:"MoDao, ProcessOn, Codepen, etc.",thirdpartyTooltipTitle:"Supports the following services",processonName:"ProcessOn",modaoName:"Mockingbot",music:"music",gaodeDesc:"Amap",toolsDesc:"Coding",designDesc:"Design",designSubDesc:"（Mockingbot，ProcessOn，Figma）",internalGaodeDesc:"Amap",internalToolDesc:"Coding",internalChartDesc:"Data",bilibili:"bilibili",bilibiliName:"Bilibili",bilibiliDescription:"Insert Bilibili video",codeblock:"Code block",codeblockDescription:"Enter code snippet",file:"Attachment",fileDescription:"Upload one or more files",math:"Formula",mathDescription:"Enter Latex formula",calendar:"Calendar",calendarDescription:"Insert calendar",riddle:"Riddle",riddleDescription:"Insert Riddle code snippet",mindmap:"Mind map",mindmapDescription:"Draw a simple mind map",flowchart:"Flowchart",flowchartDescription:"Draw a Flowchart diagram",puml:"PlantUML",pumlDescription:"Draw a PlantUML diagram",mermaid:"Mermaid",mermaidDescription:"Draw a Mermaid diagram",graphviz:"Graphviz",graphvizDescription:"Draw a Graphviz diagram",diagram:"Text diagram",diagramDescription:"Draw text based diagram",diagramSubTitle:"PlantUML, Mermaid, etc.",lockedtextTitle:"LockedText",lockedtextDescription:"Locked text",premium:"Paid reading",premiumDescription:"You need to pay to view",vote:"Vote"},embedCardMenu:{embed:"embed",introduction:"introduction"},thirdparty:{tip:"Paste a link from site %s, eg.:%s",defaultTip:"Paste a link",placeholders:{modao:"Paste embed code from Modao, eg.: <iframe src=…"},names:{amap:"AMap",codepen:"CodePen",deepinsight:"DeepInsight",figma:"Figma",herbox:"Herbox",processon:"ProcessOn",modao:"Mockingbot",riddle:"Riddle",music163:"163 Music",xiami:"XiaMi Music",ximalaya:"Himalaya",youtube:"YouTube",youku:"Youku",bilibili:"Bilibili",taobao:"TaoBao Video",canva:"Canva",jinshuju:"JinShuJu"},category:{map:"Map",media:"Media",development:"Development",form:"Form",data:"Data",design:"Design"}},mention:{text:"Mention"},markdown:{pasteTitle:"Do you need to do a style conversion?",pasteContent:"It is detected that the paste content conforms to the Markdown syntax. Do you need to do style conversion?",pasteButton:"Convert now"},search:{searchAndReplace:"Search & Replace",search:"search",replace:"replace",replaceAll:"replace all",replaceTo:"replace to",pleaseEnter:"please enter",next:"next",previous:"prevs"},translate:{title:"Translate",subTitle:"source & target",automaticDetection:"automatic detection",zh:"chinese",en:"english",translation:"translation",insertDoc:"Insert document",placeholder:"please select what needs to be translated in the document."},repository:{title:"Resource"},calendar:{format:"MMM YYYY",weekdays:["Su","Mo","Tu","We","Th","Fr","Sa"],today:"Today",tip:{title:"Untitled",desc:"Add a description",error:"failed to render calendar"},lang:"en"},bookmarkLink:{untitled:"Untitled",toLink:"Convert to link",loading:"Loading ...",loadingError:"Failed to load"},yuque:{untitled:"Untitled",unsupportedThread:"Does not support displaying thread",recently:"Recently Used",recommendTip:"Paste links to quickly associate content",searchRange:"Search range: ",loading:"Loading ...",loadingError:"Failed to load",searching:"Searching ...",searchError:"Failed to search",emptySearchTip:"No content found",emptySearchSubTip:"Try to paste the link directly"},audio:{transcodeError:"Transcode failed",failedToQuery:"Query failed",uploadError:"Upload failed",invalidAudio:"Invalid audio, please upload again",copyright:"Due to copyright protection, local audio files do not support direct playback in publicly shared documents",notSupport:"Audio playback is not supported here",cantPlay:"Audio file cannot be played",query:"Query audio information...",linkTip:"Click to open"},ui:{subPanel:{uploadBtn:"Upload"}},embedToolbar:{toggleMargin:"Add spacing to card",deleteCard:"Delete card",saveToResource:"Save to resource"},errorMessage:{currentDOCURL:"Does not support embedding the current document",notSupportURL:"Does not support embedding the link"},repositorySidebar:{title:"Resource",searchTip:"Search",searchResultTip:"Result",topLevelBreadcrumbName:"All Resource",emptySearchTip:"No matching results",noResourceBook:"No resource repository, immediately ",create:"create",error:"Can't fetch resource"},copyParagraphLink:"Copy paragraph link",copySuccess:"Copy success!",note:{image:"Image",todo:"TODO list",link:"Link card",localFile:"Local file"}};function kn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kn(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xn=a.u.macos?"⌘":"Ctrl",_n={fontColor:"字体颜色",bgColor:"背景颜色",moreColor:"更多颜色"},Cn={layout:"布局方式",layoutBlock:"独占一行",layoutInline:"嵌入行内"},En={alignment:"对齐方式",alignLeft:"靠左对齐",alignCenter:"居中对齐",alignRight:"靠右对齐"},On={uploadFailed:"文件上传失败，请重试",notSupportExt:"不支持该文件类型"},Sn={dndTips:"<span>拖动 调整位置<br />点击 打开更多菜单</span>",dndInsert:"插入空行",dndClone:"克隆",dndCopy:"拷贝锚点",dndCopySuccess:"已拷贝到粘贴板",dndEdit:"编辑锚点",dndDelete:"删除"},Rn={linkPlaceholder:"请输入链接地址或者锚点",linkSave:"保存",linkEdit:"编辑",linkDelete:"取消链接",linkOpen:"打开链接"},Dn={editorModalClose:"关闭",editorModalPopupTips:"确认要放弃刚才编辑的草稿吗？",editorModalPopupCancel:"返回编辑",editorModalPopupConfirm:"确认",editorModalSave:"保存并插入",editorModalConfirm:"要在退出前保存本次修改吗？",editorModalDiscardAndExit:"放弃编辑并退出",editorModalCancel:"取消",editorModalSaveAndExit:"保存并退出"},An={edit:"编辑",delete:"删除",save:"保存草稿",help:"帮助",undo:"撤销",redo:"重做",insertSibling:"插入同级",insertChild:"插入子级",insertRoot:"插入主节点",createLink:"插入链接",attachImage:"插入图片",collapse:"折叠",expand:"展开",autoAdjust:"适应画布",properties:"设置面板",insertRootAfterMaximize:"最大化后添加主节点",propertiesAfterMaximize:"最大化后进行样式设置",downloadImage:"下载图片",style:"样式"},Tn={pure:{support:"支持"},editor:{save:"保存草稿",print:"打印",file:"文档",edit:"编辑",view:"视图",insert:"插入",format:"格式",lab:"实验室",version:"历史",help:"帮助",publish:"发布更新"},alignment:{buttonTitle:"对齐方式",alignLeft:"左对齐",alignCenter:"居中对齐",alignRight:"右对齐",alignJustify:"两端对齐"},background:_n,blockquote:{buttonTitle:"插入引用",menuTitle:"引用"},bold:{macTitle:"粗体 ⌘+B",winTitle:"粗体 Ctrl+B",text:"粗体"},paintformat:{buttonTitle:"格式刷"},clearFormat:{buttonTitle:"清除格式"},code:{macTitle:"行内代码",winTitle:"行内代码",text:"行内代码"},codeBlock:wn(wn({},Sn),{},{buttonTitle:"插入代码块",menuTitle:"代码块",preview:"预览",delete:"删除",copyCode:"复制代码",copySuccess:"复制成功！",autoWrap:"自动换行"}),color:_n,emoji:{buttonTitle:"表情"},localdoc:wn(wn({},On),{},{formatError:"不支持该文件嵌入预览",allowDownload:"允许在阅读页下载文件",items:{office:"Office 文件",officeDesc:"支持 Word，Excel，PPT",mac:"Mac 办公套件",macDesc:"支持 Pages，Numbers，Keynote",design:"设计文件",designDesc:"支持 Axure, Photoshop, Sketch",mind:"思维导图文件",mindDesc:"支持 MindManager, XMind, MindNote",pdf:"PDF 文件",video:"本地视频",localFile:"本地文件",audio:"本地音频"}}),preview:{office:"Office 预览，上传文件大小限制为 100 MB",macOffice:"本地文件预览，文件大小限制为 200 MB",pdf:"PDF 预览，上传文件大小限制为 100 MB"},premium:{sidebar:{title:"付费阅读",moreLink:"了解更多",desc:'通过付费阅读，可以让原创内容得到价值创收，请遵守<a href="https://www.yuque.com/terms/pay_to_read" target="_blank">《语雀付费阅读服务协议》</a>。',price:{title:"付费定价",desc:"定价只能设置一次，发布后不可修改",unit:"元",error:{required:"请设置定价",invalid:"无效的输入",range:"超出合法范围"}},daysCount:{title:"付费时长",desc:"付费阅读天数内，需付费才能阅读。付费阅读天数后，文档会自动设置为免费就可阅读全文。<strong>时长只能设置一次，发布后不可修改</strong>",unit:"天",error:{required:"请设置时长",invalid:"无效的输入",range:"超出合法范围"}},tip:{title:"自定义分割线文案",error:{length:"文案最多支持 20 字"}}},defaultTip:"以下内容需付费阅读",paidTip:"已付费，以下为付费内容",expiredTip:"已超过付费时长，文档已自动免费公开"},file:wn(wn(wn({},On),Sn),{},{buttonTitle:"上传附件",menuTitle:"附件",stillUploading:"有文件还在上传中",stillTransfering:"有文件还在转存中",formatError:"该类型文件请压缩为 ZIP 文件上传",sizeError:"上传失败，附件大小限制为 500M",placeholder:"上传附件，限制 500M",preview:"预览",replace:"替换",download:"下载",delete:"删除",transfering:"转存中…",invalid:"附件已失效",failReadFile:"文件读取失败，请重新上传"}),heading:wn(wn({},Sn),{},{buttonTitle:"正文与标题",normal:"正文",heading_1:"标题 1",heading_2:"标题 2",heading_3:"标题 3",heading_4:"标题 4",heading_5:"标题 5",heading_6:"标题 6"}),fontsize:{buttonTitle:"字号"},history:{undo:"撤销",redo:"重做"},hr:wn(wn({},Sn),{},{buttonTitle:"插入分割线",menuTitle:"分割线"}),image:wn(wn(wn(wn(wn(wn({},On),Cn),En),Sn),Rn),{},{buttonTitle:"插入图片",menuTitle:"图片",sizeError:"上传图片失败：图片大小超过 10M",uploadFailed:"上传图片失败，请重试",stillUploading:"有图片还在上传中",uploadTips:"将图片拖至此处或点击选择一个上传，大小限制为 10M",copyFailed:"复制图片失败",copyFailedTips:"图片不支持拷贝复制，请单独复制上传",loadFailed:"网络异常，图片无法展示",placeholder:"上传图片，限制 10M",sizeTitle:"大小",formatError:"不支持该文件类型",width:"宽度",height:"高度",originSize:"原始大小",linkTitle:"链接",linkPlaceholder:"目标链接",linkTargetTips:"在当前页面打开",replace:"替换",delete:"删除",preferences:"图片设置",style:"样式",none:"无",stroke:"描边",shadow:"阴影",spacing:"间距",topSpacingTips:"为图片添加上间距",bottomSpacingTips:"为图片添加下间距"}),indent:{buttonTitle:"缩进",decrease:"减少缩进",increase:"增加缩进"},lineHeight:{buttonTitle:"行高",defaultTitle:"默认"},italic:{macTitle:"斜体 ⌘+I",winTitle:"斜体 Ctrl+I",text:"斜体"},link:wn(wn({},Rn),{},{buttonTitle:"插入链接",menuTitle:"链接"}),linkCard:{buttonTitle:"插入链接卡片",title:"插入链接卡片"},list:{buttonTitle:"列表",orderedList:"有序列表",unorderedList:"无序列表",taskList:"任务列表"},mark:{macTitle:"高亮文字",winTitle:"高亮文字",text:"高亮文字"},math:wn(wn(wn(wn(wn({},Cn),En),Sn),Rn),{},{buttonTitle:"公式",menuTitle:"公式",success:"操作成功",placeholder:"添加 Tex 公式",edit:"编辑",copy:"拷贝源码",delete:"删除",cancel:"取消",save:"确定",sourceCodeRequired:"请输入源码",syntaxInvalid:"输入公式不合法",help:"了解 LaTeX 语法",enterTooltips:"".concat(xn," + Enter")}),flowchart:wn(wn(wn(wn(wn({},En),Sn),Dn),An),{},{insertText:"插入文本",insertShape:"插入形状",InsertEdge:"插入连线"}),mindmap:wn(wn(wn(wn(wn({},En),Sn),Dn),An),{},{defaultRootText:"思维导图",newNode:"新建节点",menuTitle:"思维导图",buttonTitle:"思维导图",editorTitle:"思维导图",line:"线条"}),moremark:{buttonTitle:"更多文本样式"},paste:{copy:"复制",cut:"剪切",paste:"粘贴",pastePlainText:"粘贴纯文本",pasteMarkdown:"粘贴 Markdown",selectAll:"全选"},textDiagram:wn(wn(wn(wn({},En),Sn),Dn),{},{edit:"编辑",save:"保存",preview:"预览",template:"模板",help:"帮助",genImageError:"生成预览失败，请修改内容",winPreviewTooltip:"Ctrl+Shift+P",macPreviewTooltip:"⌘+Shift+P"}),riddle:wn(wn({},Sn),{},{buttonTitle:"Riddle",menuTitle:"Riddle",active:"Click to active",replace:"替换",delete:"删除",addressInvalid:"请输入正确的链接地址",placeholder:"输入 Riddle 地址，按 Enter 生成"}),strikethrough:{macTitle:"删除线 ⌘+Shift+X",winTitle:"删除线 Ctrl+Shift+X",text:"删除线"},sub:{macTitle:"下标",winTitle:"下标",text:"下标"},sup:{macTitle:"上标",winTitle:"上标",text:"上标"},table:{buttonTitle:"插入表格",menuTitle:"表格",copy:"复制",cut:"剪切",merge:"合并单元格",unmerge:"拆分单元格",clear:"清空选中区域",deleteColumn:"删除选中列",deleteRow:"删除选中行",deleteTable:"删除表格"},underline:{macTitle:"下划线 ⌘+U",winTitle:"下划线 Ctrl+U",text:"下划线"},video:wn(wn(wn({},On),Sn),{},{buttonTitle:"插入视频",menuTitle:"视频",play:"播放",replace:"替换",download:"下载",delete:"删除",sizeError:"上传失败"}),toc:{title:"大纲",open:"打开大纲",close:"关闭大纲"},card:{mindmapFile:"思维导图",designingFile:"设计文件",officeFile:"办公文件",localdocSubTitle:"支持 Office、XMind、Sketch 等",label:"标签",labelDescription:"简易文本标签",localdoc:"本地文件",localdocDescription:"支持 Office、XMind、Sketch 等",iframeOverLimit:"文档最多支持 ${limit} 张嵌入卡片",sizeOverLimit:"该本地文件卡片限制预览大小为 ${sizeLimit}，可选择上传附件",placeholder:"卡片名",embed:"引入",common:"常用",yuque:"语雀内容",yuqueSubTitle:"支持知识库、文档、文档片段等",yuqueTooltipTitle:"复制语雀知识库、文档、段落等内容链接，嵌入到本文档中",yuqueDescription:"支持嵌入语雀文档、表格、思维导图",buttonTitle:"插入图片、表格、<br />附件、代码块等卡片",miniButtonTitle:"插入图片、标签、<br/>语雀文档等",normal:" ",media:"媒体",engineering:"工程",description:"输入  <code>".concat(xn,"</code> + <code>/</code>  快速插入卡片"),table:"表格",tableDescription:"插入在线表格",image:"图片",imageDescription:"上传一张或多张图片",video:"本地视频",videoDescription:"上传一个本地视频",youku:"在线视频",youkuName:"优酷",youkuDescription:"插入在线视频",youkuSubTitle:"支持优酷、哔哩哔哩、淘宝视频",youkuTooltipTitle:"支持以下网站",youkuSiteDesc:"优酷、哔哩哔哩、淘宝视频",thirdparty:"第三方服务",music:"音乐",internalThirdpartySubTitle:"支持虾米、Riddle、DeepInsight 等",thirdpartySubTitle:"支持墨刀，ProcessOn，CodePen 等",thirdpartyTooltipTitle:"支持以下服务",processonName:"ProcessOn",modaoName:"墨刀",gaodeDesc:"地图",toolsDesc:"开发",designDesc:"设计",designSubDesc:"（墨刀，ProcessOn，Figma）",internalGaodeDesc:"地图",internalToolDesc:"开发",internalChartDesc:"数据",bilibili:"bilibili",bilibiliName:"哔哩哔哩",bilibiliDescription:"插入哔哩哔哩视频",codeblock:"代码块",codeblockDescription:"输入代码片段",file:"附件",fileDescription:"上传单个或多个附件",math:"公式",mathDescription:"输入 Latex 公式",calendar:"日历",calendarDescription:"插入日历",riddle:"代码演示（Riddle）",riddleDescription:"插入 Riddle 代码片段",mindmap:"思维导图",mindmapDescription:"绘制简易思维导图",puml:"PlantUML",pumlDescription:"绘制 PlantUML 图",flowchart:"流程图",flowchartDescription:"绘制 Flowchart 图",mermaid:"Mermaid",mermaidDescription:"绘制 Mermaid 图",diagram:"文本绘图",diagramDescription:"通过代码绘图",diagramSubTitle:"支持PlantUML、Mermaid 等",graphviz:"Graphviz",graphvizDescription:"绘制 Graphviz 图",lockedtextTitle:"加密文本",lockedtextDescription:"需要密码才可查看",premium:"付费阅读",premiumDescription:"需要付费才能查看",vote:"投票"},embedCardMenu:{embed:"嵌入",introduction:"引入"},thirdparty:{tip:"粘贴%s链接，如%s",defaultTip:"粘贴第三方服务的链接到此处",placeholders:{modao:"粘贴墨刀分享中的嵌入代码，如 <iframe src=…"},names:{amap:"高德地图",codepen:"CodePen",deepinsight:"DeepInsight",figma:"Figma",herbox:"Herbox",processon:"ProcessOn",modao:"墨刀",riddle:"Riddle",music163:"网易云音乐",xiami:"虾米",ximalaya:"喜马拉雅",youtube:"YouTube",youku:"优酷",bilibili:"哔哩哔哩",taobao:"淘宝视频",canva:"Canva",jinshuju:"金数据"},category:{map:"地图",media:"媒体",development:"开发",form:"表单",data:"数据",design:"设计"}},mention:{text:"提及"},markdown:{pasteTitle:"是否需要做样式转换？",pasteContent:"检测到粘贴内容符合 Markdown 语法，是否需要做样式转换？",pasteButton:"立即转换"},search:{searchAndReplace:"查找并替换",search:"查找",replace:"替换",replaceAll:"替换全部",replaceTo:"替换为",pleaseEnter:"请输入",next:"下一个",previous:"上一个"},translate:{title:"翻译",subTitle:"源 & 目标",automaticDetection:"自动检测",zh:"中文",en:"英文",translation:"译文",insertDoc:"插入文档",placeholder:"请在文档中选择需要翻译的内容"},repository:{title:"插入资源"},calendar:{format:"YYYY 年 M 月",weekdays:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],today:"今天",tip:{title:"添加日程标题",desc:"添加说明",error:"日历渲染出错"},lang:"zh"},importDoc:{addressInvalid:"请输入正确的链接地址"},bookmarkLink:{untitled:"无标题",toLink:"转为链接",loading:"内容加载中 ...",loadingError:"获取内容失败"},yuque:{untitled:"无标题",unsupportedThread:"暂不支持显示话题",recently:"最近使用",recommendTip:"在文档中贴入链接可快速关联内容",searchRange:"搜索范围：",loading:"内容加载中 ...",loadingError:"获取内容失败",searching:"搜索中 ...",searchError:"搜索失败",emptySearchTip:"搜索不到结果",emptySearchSubTip:"可以尝试贴入链接引入"},audio:{transcodeError:"转码失败",failedToQuery:"查询失败",uploadError:"上传失败",invalidAudio:"无效音频，请重新上传",copyright:"由于版权保护，不支持在公开文档中直接播放该音频，可点击文件名播放",notSupport:"此处不支持播放音频，可点击文件名播放",cantPlay:"音频文件不能播放",query:"查询音频信息中...",linkTip:"点击打开"},ui:{subPanel:{uploadBtn:"上传文件"}},embedToolbar:{toggleMargin:"为卡片添加间距",deleteCard:"删除卡片",saveToResource:"保存到资源知识库"},errorMessage:{currentDOCURL:"不支持嵌入当前文档",notSupportURL:"不支持嵌入该链接"},repositorySidebar:{title:"插入资源",searchTip:"输入资源名称",searchResultTip:"搜索结果",topLevelBreadcrumbName:"所有资源知识库",emptySearchTip:"没有资源",noResourceBook:"无资源知识库，立刻",create:"创建",error:"不能获取资源文件"},copyParagraphLink:"复制段落链接",copySuccess:"复制成功！",note:{image:"插入图片",todo:"插入待办",link:"插入书签",localFile:"插入附件"}};function Pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pn(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Mn={en:bn,"zh-cn":Tn},Nn=ue()("editor:toolbar:uploader"),Ln=J()(window,"AliyunUpload.Vod"),In=function(){function e(t){o()(this,e),this.trigger=t.trigger,this.engine=t.engine,this.onToolBarClick=t.onToolBarClick,this.onToolBarError=t.onToolBarError,this.cardRoot=null,this.selectedFile=null,this.data={},this.initUploader()}return l()(e,[{key:"getLang",value:function(){return this.engine&&this.engine.options.lang||"zh-cn"}},{key:"getErrorMessageByCode",value:function(e){var t=Mn[this.getLang()].video;return(void 0===t?{}:t)[e]}},{key:"initUploader",value:function(){var e=this;if(Ln&&this.trigger){var t=new Ln({timeout:6e4,partSize:1048576,parallel:5,retryCount:3,retryDuration:2,region:"",userId:"1057412961847317",addFileSuccess:function(n){e.onToolBarClick();var r=n.file;e.insertCard(r);var a=cn.check("video",r.size);null===a?(Nn("上传:文件选择: %j",r),e.selectedFile=r,t.startUpload()):e.setCardError(e.getErrorMessageByCode("sizeError"),a)},onUploadFailed:function(t,n,r){e.setCardError(r||e.getErrorMessageByCode("uploadFailed"))},onUploadstarted:function(n){var a=n.file,i=a.name,o=a.size,c=window.appData.doc,l=c.id,s=c.type;Object(r.ajax)({method:"post",url:J()(e.engine,"options.video.uploadInfoAction")||"/api/video/upload_info",dataType:"json",data:{filename:i,filesize:o,attachable_id:l,attachable_type:s},success:function(e){var r=e.data,a=r.UploadAuth,i=r.UploadAddress,o=r.VideoId;t.setUploadAuthAndAddress(n,a,i,o)},error:function(t){try{var n=JSON.parse(t.xhr.response);if(n&&400===n.status&&n.code){var r=cn.getMessageByCode(n.code,n);r&&e.setCardError(e.getErrorMessageByCode("uploadFailed"),r)}}catch(t){console.log(t)}e.onToolBarError({code:-100})},processData:!0})},onUploadSucceed:function(t){var n=t.videoId,a=t.file,i=a.name,o=a.size,c=a.type,l=window.appData.doc,s=l.id,u=l.type,d=i.split(".").pop();d&&(d=".".concat(d)),Object(r.ajax)({method:"post",url:J()(e.engine,"options.video.videoInfoAction")||"/api/video/video_info",dataType:"json",data:{filename:i,filesize:o,type:c||d||"unknow",attachable_id:s,attachable_type:u,video_id:n},success:function(){e.updateCard({status:"uploaded",videoId:n}),Nn("上传:成功: videoId %s",n)},error:function(){e.onToolBarError({code:-100}),e.setCardError(e.getErrorMessageByCode("uploadFailed"))},processData:!0})},onUploadTokenExpired:function(){e.setCardError(e.getErrorMessageByCode("uploadFailed"))},onUploadProgress:function(t,n,r){var a=Math.ceil(100*r);Nn("上传:进度: %j",a),a>98||e.updatePercent({percent:a})}});this.trigger.addEventListener("change",(function(n){var r=n.target.files[0];t.addFile(r,null,null,null,null),e.trigger.value=""}),!1),window.uploader=t}}},{key:"insertCard",value:function(e){var t=this.engine;return this.data={status:"uploading",name:e.name,size:e.size,percent:0},this.cardRoot=t.change.insertCard("video",jn(jn({},this.data),{},{margin:!0})),this.cardRoot}},{key:"updatePercent",value:function(e){this.cardRoot.find("[data-role=percent]").html("".concat(zt(e.percent),"%"))}},{key:"setCardError",value:function(e,t){t?t.callback(A.a[t.level](t.msg,t.alwaysOpen?0:void 0)):A.a.error(e),this.cardRoot&&a.q.updateCard(this.engine,this.cardRoot,jn(jn({},this.data),{},{message:e,status:"error"}))}},{key:"updateCard",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.engine;this.data=Object.assign(this.data,e),t.history.hold(),t.change.updateCard(this.cardRoot,this.data)}}]),e}();var zn=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),(r=t.call(this,e)).state={activated:!1},r.videoTrigger=null,r.videoUploader=null,r}return l()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.onToolBarClick,n=e.engine;this.videoUploader=new In({trigger:this.videoTrigger,engine:n,onToolBarClick:t,onToolBarError:this.videoError})}},{key:"videoError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.code;-100===t&&A.a.error("网络异常：Failed to fetch")}},{key:"handleMouseEnter",value:function(){this.setState({activated:!0})}},{key:"handleMouseLeave",value:function(){this.setState({activated:!1})}},{key:"renderCommon",value:function(){var e=this.props,t=e.item,n=e.index,r=e.itemOnClick,a=this.state.activated?" lake-collapse-list-item-active":"",i=!(!t.isDisable||!t.isDisable()),o=i?" disable":"",c=t.subTitle?{height:"auto"}:{};return C.a.createElement("div",{"data-aspm-click":"".concat(t.name),"data-card-category":t.category||t.name,accessbilityid:"".concat(t.name,"-card-button"),className:"lake-collapse-list-item".concat(a).concat(o).concat(t.noBorder?" no-border":""),key:n,"data-index":n,onClick:i?null:r,onMouseEnter:this.handleMouseEnter.bind(this),onMouseLeave:this.handleMouseLeave.bind(this),style:c},C.a.createElement("div",{className:"lake-collapse-item-icon",dangerouslySetInnerHTML:{__html:t.icon}}),C.a.createElement("div",{className:"lake-collapse-item-text"},C.a.createElement("div",{className:"lake-collapse-item-title"},t.title,t.subTitle&&C.a.createElement("span",{className:"lake-collapse-item-sub-title"},t.subTitle),t.subNew&&C.a.createElement("span",{className:"lake-sub-new-tag"},t.subNew),t.isNew?C.a.createElement("span",{className:"lake-svg-icon-new-card"}):"")))}},{key:"formatAcceptExts",value:function(){return[".3gp",".asf",".avi",".dv",".flv",".f4v",".gif",".m2t",".m4v",".mj2",".mjpeg",".mkv",".mov",".mp4",".mpg",".mpeg",".mts",".ogg",".rm",".rmvb",".swf",".ts",".vob",".wmv",".webm"].join(",")}},{key:"renderVideo",value:function(){var e=this,t=this.props,n=t.item,r=t.index,a=this.state.activated?" lake-collapse-list-item-active":"";return C.a.createElement("div",{"data-aspm-click":"".concat(n.name),"data-card-category":n.category||n.name,className:"lake-collapse-list-item".concat(a),key:r,"data-index":r,onMouseEnter:this.handleMouseEnter.bind(this),onMouseLeave:this.handleMouseLeave.bind(this),onClick:function(){e.videoTrigger.click()}},C.a.createElement("div",{className:"lake-collapse-item-icon",dangerouslySetInnerHTML:{__html:n.icon}}),C.a.createElement("div",{className:"lake-collapse-item-text"},C.a.createElement("div",{className:"lake-collapse-item-title"},n.title)),C.a.createElement("input",{ref:function(t){return e.videoTrigger=t},type:"file",accept:this.formatAcceptExts(),className:"uploader"}))}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.item,r="video"===t?this.renderVideo():this.renderCommon();return C.a.createElement(on,{data:n.tooltip},r)}}]),n}(C.a.PureComponent);zn.propTypes={engine:R.a.object,type:R.a.string,item:R.a.object,index:R.a.number,itemOnClick:R.a.func,onToolBarClick:R.a.func};var Bn=[".3gp",".asf",".avi",".dv",".flv",".f4v",".gif",".m2t",".m4v",".mj2",".mjpeg",".mkv",".mov",".mp4",".mpg",".mpeg",".mts",".ogg",".rm",".rmvb",".swf",".ts",".vob",".wmv",".webm"],Fn=Bn.join(","),Vn=ee.EXTS.AUDIO_EXT.map((function(e){return".".concat(e)})).join(",");function Un(e){return"msOffice"===e?ee.EXTS.DOC_MS_OFFICE_STR:"macOffice"===e?ee.EXTS.DOC_MAC_OFFICE_STR:"design"===e?ee.EXTS.DOC_DESIGN_STR:"mind"===e?ee.EXTS.DOC_MIND_STR:"pdf"===e?".pdf":"video"===e?Fn:"audio"===e?Vn:"localdoc"===e?ee.EXTS.OFFICE_EXT_STR+", "+ee.EXTS.MAC_OFFICE_STR:ee.EXTS.OFFICE_EXT_STR+", "+ee.EXTS.MAC_OFFICE_STR+", "+Fn}function qn(e,t){if(1===e.name.split(".").length)return null;var n=e.name.toLowerCase();if(t&&!(t=t.split(/\s*,\s*/)).some((function(e){return n.endsWith(e)})))return null;var r=Bn.some((function(e){return n.endsWith(e)})),a=ee.EXTS.AUDIO_EXT.some((function(e){return n.endsWith(e)}));return{isVideo:r,isAudio:a,isDoc:!r&&!a,file:e}}var Hn=function(e){f()(r,k.a);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(r);function r(){return o()(this,r),n.apply(this,arguments)}return l()(r,[{key:"run",value:(t=he()(fe.a.mark((function e(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),r}();var Wn=function(e){f()(i,Hn);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(i);function i(e,t,r,c){var l;return o()(this,i),l=n.call(this),y()(u()(l),"id",-1),y()(u()(l),"_engine",null),y()(u()(l),"_file",null),y()(u()(l),"_url",null),y()(u()(l),"_params",null),l.id=a.n.randomId(12),l._engine=e,l._file=t,l._url=r,l._params=c,l}return l()(i,[{key:"run",value:(t=he()(fe.a.mark((function e(){var t=this;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n=new FormData,a=new URL(t._url,location.href);t._params&&Object.keys(t._params).forEach((function(e){a.searchParams.append(e,t._params[e])})),n.append("multipart",t._file),Object(r.ajax)({method:"post",url:a.href,dataType:"json",data:n,processData:!0,xhr:function(){t.emit("start");var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",(function(e){t.emit("progress",e)}),!1),e},success:function(n){t._handleSuccess(n),e({success:!0,res:n})},error:function(n){t._handleError(n),e({success:!1,error:n})}})})));case 1:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"_handleSuccess",value:function(e){this.emit("success",e)}},{key:"_handleError",value:function(e){this.emit("error",e)}}]),i}();function Yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yn(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Kn=function(){function e(){o()(this,e)}return l()(e,null,[{key:"hasTask",value:function(e,t){return!(!e.uploadManager||!e.uploadManager.hasTask(t))}},{key:"checkStatus",value:function(e,t){var n=!0;return{cancel:function(){n=!1},promise:Xn(e,t,(function(){return n}))}}},{key:"uploadVideo",value:function(e,t){var n=e.uploadManager,r=J()(e||{},"options.localVideo.uploadAction")||"/api/video",a=new Wn(e,t,r,{format:"video"}),i=function(e,t,n){return e.change.insertCard("video",{status:"pending",name:t.name,size:t.size,percent:0,taskId:n,margin:!0})}(e,t,a.id),o=cn.check("video",t.size);null===o?(n.addTask(a),a.on("start",(function(){er(e,i,{status:"uploading",percent:0})})),a.on("progress",(function(t){if(t.lengthComputable){var n=parseInt(t.loaded/t.total*100,10);er(e,i,{status:"uploading",percent:n})}})),a.on("success",(function(t){er(e,i,{status:"uploaded",videoId:t.data.video_id})})),a.on("error",(function(t){var n={};try{n=JSON.parse(t.xhr.response)}catch(e){n={}}var r=n&&n.code?cn.getMessageByCode(n.code,n):null;tr(e,i,Jn(e,"uploadFailed")+(n.message||""),r)}))):tr(e,i,Jn(e,"sizeError"),o)}},{key:"uploadAudio",value:function(e,t){var n=e.uploadManager,r=J()(e||{},"options.localVideo.uploadAction")||"/api/video",a=new Wn(e,t,r,{format:"audio"}),i=function(e,t,n){return e.change.insertCard("audio",{status:"pending",name:t.name,size:t.size,percent:0,taskId:n,margin:!0})}(e,t,a.id);n.addTask(a),a.on("start",(function(){er(e,i,{status:"uploading",percent:0})})),a.on("progress",(function(t){if(t.lengthComputable){var n=parseInt(t.loaded/t.total*100,10);er(e,i,{status:"uploading",percent:n})}})),a.on("success",(function(t){var n=t.data;er(e,i,{status:"uploaded",fileSize:n.filesize,fileName:n.filename,audioId:n.video_id})})),a.on("error",(function(t){tr(e,i,Jn(e,"uploadFailed")+(t.message||""))}))}}]),e}();function Xn(e,t,n){return $n.apply(this,arguments)}function $n(){return($n=he()(fe.a.mark((function e(t,n,r){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=he()(fe.a.mark((function e(a,i){var o;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zn(t,n);case 2:if(o=e.sent,r()){e.next=5;break}return e.abrupt("return");case 5:if(!o){e.next=10;break}if(o.success){e.next=9;break}return i(new Error("query failed")),e.abrupt("return");case 9:return e.abrupt("return",a(o));case 10:setTimeout((function(){r()&&a(Xn(t,n,r))}),3e3);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zn(e,t){return Qn.apply(this,arguments)}function Qn(){return(Qn=he()(fe.a.mark((function e(t,n){var a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){var a=J()(t||{},"options.localVideo.queryAction")||"/api/video";Object(r.ajax)({method:"get",url:a,data:{video_id:n},success:function(t){"success"===t.data.status?e({done:!0,data:t.data.info}):"fail"===t.data.status?e({error:!0}):"transcoding"===t.data.status&&e({done:!1})},error:function(t){console.error(t),e({error:!0})}})}));case 2:if(!(a=e.sent).error){e.next=5;break}return e.abrupt("return",{success:!1});case 5:if(!a.done){e.next=7;break}return e.abrupt("return",{success:!0,data:a.data});case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jn(e,t){var n=(e.locale||{}).video;return(void 0===n?{}:n)[t]}function er(e,t,n){nr(e,t,n)}function tr(e,t,n,r){r?r.callback(A.a[r.level](r.msg,r.alwaysOpen?0:void 0)):A.a.error(n),nr(e,t,{status:"error",message:n})}function nr(e,t,n){var r=e.card.getValue(t),a=e.card.getComponent(t);a&&a.setValue&&(e.history.hold(),a.setValue(Gn(Gn({},r),n)),a.rerender())}var rr=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.engine,r=t.getEngine;n=r()||n;var a=this.getAccept();return C.a.createElement("span",{onClick:function(){return e.fileInput.click()}},C.a.createElement("input",{type:"file",accept:a,ref:function(t){e.fileInput=t},onChange:function(t){for(var r=e.fileInput.files,i=[],o=0,c=r.length;o<c;o++){var l=qn(r[o],a);l&&i.push(l)}0!==i.length?(e.onChange(i),t.target.value=null):A.a.error(n.locale.localdoc.notSupportExt)},style:{display:"none"},multiple:"multiple"}),this.props.children)}},{key:"getAccept",value:function(){var e=this.props,t=e.engine,n=e.getEngine,r=e.accept;if(t=n()||t,r)return"function"==typeof r?r(t):r;var a=Lt(this.props.name);return t.uploader&&t.uploader.getAccept?t.uploader.getAccept(a):void 0}},{key:"onChange",value:function(e){var t=this.props,n=t.onBeforeUpload,r=t.onAfterUpload,a=t.onBeforeInsertCard,i=this.props,o=i.engine;o=(0,i.getEngine)()||o;var c=[],l=[],s=[];if(e.forEach((function(e){e.isDoc?c.push(e.file):e.isVideo?l.push(e.file):s.push(e.file)})),!c.length)return l.length?(this.props.onClick&&this.props.onClick(),void Kn.uploadVideo(o,l[0])):s.length?(this.props.onClick&&this.props.onClick(),void Kn.uploadAudio(o,s[0])):void 0;o.uploader.post("localdoc",c,{onBeforeUpload:n,onAfterUpload:r,onBeforeInsertCard:a})}}]),n}(C.a.Component);y()(rr,"propTypes",{name:R.a.string,engine:R.a.object,getEngine:R.a.func,children:R.a.object,onBeforeUpload:R.a.func,onAfterUpload:R.a.func,onBeforeInsertCard:R.a.func,onClick:R.a.func,accept:R.a.oneOfType([R.a.string,R.a.func])}),y()(rr,"defaultProps",{onClick:function(){}});var ar=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"render",value:function(){var e="lake-upload-panel ".concat(this.props.className||"");return C.a.createElement("div",{className:e,onClick:function(e){var t=new MouseEvent("mouseout");t.initEvent("mouseout",!0,!0),e.currentTarget.dispatchEvent(t)}},this.renderMainButtons(),C.a.createElement("div",{className:"lake-upload-panel-item-box"},this.renderItems()))}},{key:"renderMainButtons",value:function(){var e=this.props.data.items.filter((function(e){return e.mainButton}));if(!e.length)return null;var t=e[0];return C.a.createElement("div",{className:"lake-upload-panel-main-btns"},C.a.createElement(rr,oe()({},this.props,{accept:t.accept}),C.a.createElement("div",{className:"lake-upload-panel-btn"},C.a.createElement("span",{className:"lake-svg-icon lake-svg-icon-".concat(t.icon)}),t.title)))}},{key:"renderItems",value:function(){var e=this,t=this.props.data;return t.items?t.items.map((function(t,n){return t.mainButton?null:e.renderItem(t,n)})):null}},{key:"renderItem",value:function(e,t){return"newupload"===e.type?this.renderUpload(e,t):"button"===e.type?this.renderButton(e,t):"group"===e.type?this.renderGroup(e,t):null}},{key:"renderGroup",value:function(e,t){var n=this;return C.a.createElement("div",{className:"lake-upload-panel-group",key:e.title+""+t},C.a.createElement("div",{className:"lake-upload-panel-group-title"},e.title),C.a.createElement("div",{className:"lake-upload-panel-group-items"},e.items.map((function(e,t){return n.renderItem(e,t)}))))}},{key:"renderUpload",value:function(e,t){var n=null;return e.icon&&(n=e.icon.startsWith("<")?C.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.icon}}):C.a.createElement("span",{className:"lake-svg-icon lake-svg-icon-".concat(e.icon)})),C.a.createElement(rr,oe()({},this.props,{accept:e.accept,name:e.name,key:e.name+""+t}),C.a.createElement("div",{className:"lake-upload-panel-item","data-aspm-click":e.name,"data-card-category":e.category||e.name,accessbilityid:"".concat(e.name,"-card-button")},C.a.createElement("div",{className:"lake-upload-panel-item-icon"},n),C.a.createElement("div",{className:"lake-upload-panel-item-text"},C.a.createElement("div",{className:"lake-upload-panel-item-title"},e.title),e.desc?C.a.createElement("div",{className:"lake-upload-panel-item-subtitle"},e.desc):null)))}},{key:"renderButton",value:function(e,t){var n=this;return C.a.createElement("div",{"data-aspm-click":e.name,"data-card-category":e.category||e.name,accessbilityid:"".concat(e.name,"-card-button"),className:"lake-upload-panel-item",key:t,onClick:function(t){n.props.onClick(t),e.onClick&&e.onClick(t)}},C.a.createElement("div",{className:"lake-upload-panel-item-icon"},C.a.createElement("span",{className:"lake-svg-icon lake-svg-icon-".concat(e.icon)})),C.a.createElement("div",{className:"lake-upload-panel-item-text"},C.a.createElement("div",{className:"lake-upload-panel-item-title"},e.title),e.desc?C.a.createElement("div",{className:"lake-upload-panel-item-subtitle"},e.desc):null))}}]),n}(C.a.Component);function ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}y()(ar,"propTypes",{showAllUploadBtn:R.a.bool,data:R.a.object,engine:R.a.object,getEngine:R.a.func,className:R.a.string,onClick:R.a.func}),y()(ar,"defaultProps",{showAllUploadBtn:!0,onClick:function(){}});var or=T.a.Panel,cr=document.createElement("div");cr.className="lake-prevent-card-activated",document.body.appendChild(cr);var lr=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),r=t.call(this,e),y()(u()(r),"handleClick",(function(e,t,n){e.preventDefault(),e.stopPropagation(),r.props.disableClick||(r.props.onClick(),t.onClick(n))})),r.listNode=C.a.createRef(),r.engine=e.engine,r}return l()(n,[{key:"renderItem",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=function(){};return r||"upload"===e.type||"newupload"===e.type||(a=function(t){return n.handleClick(t,e)}),C.a.createElement(zn,{item:e,index:t,itemOnClick:a,key:"collapseItem".concat(t),engine:this.engine})}},{key:"renderVideo",value:function(e,t){return C.a.createElement(zn,{item:e,index:t,type:"video",key:"collapseItem".concat(t),onToolBarClick:this.props.onClick,engine:this.engine})}},{key:"renderTable",value:function(e,t){var n=this;return e.disableSelector?this.renderItem(e,t):C.a.createElement(P.a,{key:t,content:C.a.createElement(nn,{onSelect:function(t,r,a){n.handleClick(t,e,{rows:r,cols:a})}}),placement:"rightTop"},C.a.createElement("div",null,this.renderItem(e,t)))}},{key:"renderLocalDoc",value:function(e,t){var n=this;return C.a.createElement(P.a,{key:t,overlayClassName:"lake-upload-panel-popover",placement:"rightTop",getPopupContainer:function(){return cr},content:C.a.createElement(ar,oe()({},this.props,{className:"lake-upload-panel-localdoc",data:e,getEngine:function(){return n.props.engine}}))},C.a.createElement("div",null,this.renderItem(e,t,!0)))}},{key:"renderThirdparty",value:function(e,t){var n=this;return C.a.createElement(P.a,{key:t,overlayClassName:"lake-upload-panel-popover",placement:"rightTop",getPopupContainer:function(){return cr},content:C.a.createElement(ar,{className:"lake-upload-panel-thirdparty",data:e,engine:this.props.engine,getEngine:function(){return n.props.engine},onClick:this.props.onClick,showAllUploadBtn:!1})},C.a.createElement("div",null,this.renderItem(e,t,!0)))}},{key:"componentDidMount",value:function(){this.resetPosition()}},{key:"componentDidUpdate",value:function(){this.resetPosition()}},{key:"resetPosition",value:function(){var e=this.listNode.current;if(e&&this.props.active){var t=e.parentNode;if(t){var n=t.getBoundingClientRect();window.innerHeight-n.bottom<n.top?e.classList.add("lake-button-set-list-to-top"):e.classList.remove("lake-button-set-list-to-top")}}}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.data,a=t.description,i=t.active,o=t.activeKeys,c="";return a&&(c=C.a.createElement("div",{className:"lake-toolbar-collapse-description"},C.a.createElement("div",{className:"description",dangerouslySetInnerHTML:{__html:a}}))),C.a.createElement("div",{className:le()("lake-button-set-list",n,{"lake-toolbar-collapse-no-header":r.length<=1,"lake-button-set-list-active":i}),ref:this.listNode,"data-aspm":"card_selector"},c,C.a.createElement(T.a,{className:"lake-toolbar-collapse",defaultActiveKey:o},r.map((function(t,n){return C.a.createElement(or,{showArrow:!1,header:t.title,disabled:!0,key:n},t.items.map((function(t,n){if("upload"===t.type){var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ir(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.props);return r.name=t.name,r.getEngine=t.getEngine,r.getEngine||(r.getEngine=function(){return r.engine}),C.a.createElement(tn,oe()({key:n},r),e.renderItem(t,n))}return"newupload"===t.type?C.a.createElement(rr,oe()({},e.props,{accept:t.accept,name:t.name,key:"NewUpload_".concat(t.name,"_").concat(n),getEngine:function(){return e.props.engine}}),e.renderItem(t,n)):"table"===t.name?e.renderTable(t,n):"localdoc"===t.name?e.renderLocalDoc(t,n):"thirdparty"===t.name?e.renderThirdparty(t,n):"video"===t.name?e.renderVideo(t,n):e.renderItem(t,n)})))}))))}}]),n}(C.a.Component);y()(lr,"propTypes",{className:R.a.string,data:R.a.array,active:R.a.bool,activeKeys:R.a.array,onClick:R.a.func,description:R.a.string,engine:R.a.object,disableClick:R.a.bool}),y()(lr,"defaultProps",{disableClick:!1});var sr=[{id:"good",package:"que",title:{"zh-cn":"棒","en-us":"Good"},url:"https://gw.alipayobjects.com/mdn/rms_15e52e/afts/img/A*UHsnTpLQ48gAAAAAAAAAAAAAARQnAQ"},{id:"fighting",package:"que",title:{"zh-cn":"加油","en-us":"Fighting"},url:"https://gw.alipayobjects.com/mdn/rms_15e52e/afts/img/A*pm-hQY3BLV8AAAAAAAAAAAAAARQnAQ"},{id:"hooray",package:"que",title:{"zh-cn":"撒花","en-us":"Hooray"},url:"https://gw.alipayobjects.com/mdn/rms_15e52e/afts/img/A*9T62QYqFFhYAAAAAAAAAAAAAARQnAQ"},{id:"humble",package:"que",title:{"zh-cn":"卑微","en-us":"Humble"},url:"https://gw.alipayobjects.com/mdn/rms_15e52e/afts/img/A*BHK1RpChRAwAAAAAAAAAAAAAARQnAQ"},{id:"pat",package:"que",title:{"zh-cn":"摸头","en-us":"Pat"},url:"https://gw.alipayobjects.com/mdn/rms_15e52e/afts/img/A*2eERTp0nd5IAAAAAAAAAAAAAARQnAQ"},{id:"angry",package:"que",title:{"zh-cn":"生气","en-us":"Angry"},url:"https://gw.alipayobjects.com/mdn/rms_15e52e/afts/img/A*b8hcRpIQ-QUAAAAAAAAAAAAAARQnAQ"},{id:"pensive",package:"que",title:{"zh-cn":"思考","en-us":"Pensive"},url:"https://gw.alipayobjects.com/mdn/rms_15e52e/afts/img/A*TJ7dTIRWjVoAAAAAAAAAAAAAARQnAQ"},{id:"xiaoku",package:"que",title:{"zh-cn":"笑哭","en-us":"XiaoKu"},url:"https://gw.alipayobjects.com/mdn/rms_15e52e/afts/img/A*qOVbRIyytEIAAAAAAAAAAAAAARQnAQ"},{id:"yes",package:"que",title:{"zh-cn":"击掌","en-us":"Yes"},url:"https://gw.alipayobjects.com/mdn/rms_15e52e/afts/img/A*uJPyRLbsRS4AAAAAAAAAAAAAARQnAQ"}];function ur(e){try{return localStorage.getItem(e)}catch(e){console.warn(e)}return null}function dr(e,t){try{return localStorage.setItem(e,t)}catch(e){console.warn(e)}}function fr(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];e.command.add(t,{autoSave:function(){return a},queryState:function(){return!!e[r]&&("sidebar"===r?e[r].activate===t:e[r].storeConfig&&ur("lake-"+r)===t)},execute:function(a){if(!0!==a&&e.command.queryState(t))e[r].close();else{var i=n.call(e);e[r].set(i)}}})}function pr(e,t,n){fr(e,t,n,"sidebar")}function hr(e,t,n){var r=e.locale,a=e.iframeHelper;if(e.iframeHelper.canAdd())e.command.execute(t,n);else{var i=a.options.limit;e.messageError(r.card.iframeOverLimit.replace("${limit}",i))}}var mr=["youku","bilibili","taobao","xiami","amap","riddle","herbox","deepinsight"],gr=["youku","bilibili","taobao","xiami","amap","modao","figma","canva","processon","codepen","jinshuju"];function vr(){return!(!Dt||Dt.isYuque)}function yr(e){var t=vr();return Array.isArray(e)&&(e=e.filter((function(e){return-1!==mr.indexOf(e)||-1!==gr.indexOf(e)}))).length?e:t?mr.slice():gr.slice()}var br=function(e,t){var n=e.locale,r={name:"video",type:"newupload",title:n.localdoc.items.video,pinyin:"视频,sp,shipin,video,mp4,avi",icon:'<span class="lake-svg-icon lake-svg-icon-video" />',accept:Un("video")},a=[{name:"image",type:"upload",icon:'<span class="lake-svg-icon lake-svg-icon-insert-image" />',title:n.card.image,pinyin:"图片,tp,tupian,image",description:n.card.imageDescription},{name:"table",icon:'<span class="lake-svg-icon lake-svg-icon-insert-table" />',title:n.card.table,pinyin:"表格,bg,biaoge,table",description:n.card.tableDescription,onClick:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{rows:3,cols:3};e.command.execute("table",t)}},{name:"yuque",icon:'<span class="lake-svg-icon lake-svg-icon-insert-yuque" />',title:n.card.yuque,pinyin:"语雀,yqwd,yuquewendang,yuquedoc",description:n.card.yuqueDescription,onClick:function(){hr(e,"yuque")}},{name:"thirdparty",icon:'<span class="lake-svg-icon lake-svg-icon-insert-thirdparty" />',title:n.card.thirdparty,description:n.card.thirdpartyDescription,items:kr(e)},{name:"codeblock",icon:'<span class="lake-svg-icon lake-svg-icon-insert-codeblock" />',title:n.card.codeblock,pinyin:"代码块,dmk,daimakuai,code",description:n.card.codeblockDescription,onClick:function(){e.command.execute("codeblock","")}},{name:"file",type:"upload",icon:'<span class="lake-svg-icon lake-svg-icon-insert-file" />',title:n.card.file,pinyin:"附件,fj,fujian,file,attachment",description:n.card.fileDescription},{name:"math",icon:'<span class="lake-svg-icon lake-svg-icon-insert-math" />',title:n.card.math,pinyin:"数学公式,sxgs,公式,gs,gongshi,formula,math,latex",description:n.card.mathDescription,onClick:function(){e.command.execute("math")}},{name:"calendar",icon:'<span class="lake-svg-icon lake-svg-icon-insert-calendar" />',title:n.card.calendar,pinyin:"日历,rl,rili,calendar",description:n.card.calendarDescription,onClick:function(){e.command.execute("calendar")}},{name:"mindmap",icon:'<span class="lake-svg-icon lake-svg-icon-insert-mindmap" />',title:n.card.mindmap,pinyin:"nt,dt,swnt,siweinaotu,siweidaotu,swdt,mindmap,脑图,思维导图",description:n.card.mindmapDescription,onClick:function(){e.command.execute("mindmap")}},{name:"flowchart",icon:'<span class="lake-svg-icon lake-svg-icon-insert-flowchart" />',title:n.card.flowchart,pinyin:"lct,liuchengtu,flowchart,流程图",description:n.card.flowchartDescription,onClick:function(){e.command.execute("flowchart")}},{name:"diagram",icon:'<span class="lake-svg-icon lake-svg-icon-insert-puml" />',title:n.card.diagram,pinyin:"文本绘图,wbht,ht,huitu,wenbenhuitu,puml,graphviz,mermaid,flowchart,plantuml",description:n.card.diagramDescription,onClick:function(){e.command.execute("diagram")}},{name:"lockedtext",icon:'<span class="lake-svg-icon lake-svg-icon-insert-lockedtext" />',title:n.card.lockedtextTitle,pinyin:"加密文本,jmwb,jiamiwenben,lockedtext",description:n.card.lockedtextDescription,onClick:function(){e.command.execute("lockedtext")}},{name:"localdoc",type:"uploadPanel",icon:'<span class="lake-svg-icon lake-svg-icon-insert-local-doc" />',title:n.card.localdoc,pinyin:"本地文档,bdwd,bendiwendang,localdocument,pdf,word,excel,ppt,powerpoint,keynote,pages,numbers,mindnode,mindmanager,mmap,axure,psd,sketch",items:[{name:"uploadbtn",category:"localdoc",type:"newupload",mainButton:!0,title:n.ui.subPanel.uploadBtn,icon:"plus",accept:function(e){return e.options.allCardNames&&!e.options.allCardNames.video?Un("localdoc"):Un("localdoc_video")}},{name:"msOffice",category:"localdoc",type:"newupload",title:n.localdoc.items.office,desc:n.localdoc.items.officeDesc,pinyin:"word,excel,ppt,powerpoint,office",icon:"doc",accept:Un("msOffice")},{name:"macOffice",category:"localdoc",type:"newupload",title:n.localdoc.items.mac,desc:n.localdoc.items.macDesc,pinyin:"keynote,pages,numbers",icon:"keynote",accept:Un("macOffice")},{name:"mind",category:"localdoc",type:"newupload",title:n.localdoc.items.mind,desc:n.localdoc.items.mindDesc,pinyin:"mindnode,mindmanager,mmap",icon:"mindnode",accept:Un("mind")},{name:"design",category:"localdoc",type:"newupload",title:n.localdoc.items.design,desc:n.localdoc.items.designDesc,pinyin:"axure,psd,sketch",icon:"sketch",accept:Un("design")},{name:"pdf",category:"localdoc",type:"newupload",title:n.localdoc.items.pdf,pinyin:"pdf",icon:"pdf",accept:".pdf"},r,{name:"audio",type:"newupload",title:n.localdoc.items.audio,pinyin:"音频,本地音频,yp,yinpin,bdyp,bendiyinpin,audio,mp3,sound,music,flac",icon:'<span class="lake-svg-icon lake-svg-icon-audio" />',accept:Un("audio")}]},{name:"label",icon:'<span class="lake-svg-icon lake-svg-icon-label" />',title:n.card.label,pinyin:"标签,bq,biaoqian,label",description:n.card.labelDescription,onClick:function(){e.command.execute("label")}},{name:"vote",icon:'<span class="lake-svg-icon lake-svg-icon-vote" />',title:n.card.vote,pinyin:"toupiao,tp,vote,投票",onClick:function(){e.command.execute("vote")}},{name:"premium",icon:'<span class="lake-svg-icon lake-svg-insert-yuan" />',title:n.card.premium,pinyin:"付费阅读,ffyd,fufeiyuedu,premium,reading",description:n.card.premiumDescription,isDisable:function(){return e.card.getComponentsByName("premium").length>0},onClick:function(){e.command.execute("premium")}}];return t&&t.includes("video")&&!t.includes("localdoc")&&a.push(r),a};function kr(e){var t=e.locale,n=[{type:"group",category:"thirdparty",title:t.thirdparty.category.media,items:[{type:"button",name:"youku",category:"thirdparty",icon:"youku",title:t.thirdparty.names.youku,keywords:["优酷","yk","youku"],onClick:function(){hr(e,"thirdparty",{entrance:"youku"})}},{type:"button",category:"thirdparty",name:"bilibili",icon:"bilibili",keywords:["bilibili"],title:t.thirdparty.names.bilibili,onClick:function(){hr(e,"thirdparty",{entrance:"bilibili"})}},{type:"button",category:"thirdparty",name:"taobao",icon:"taobao",title:t.thirdparty.names.taobao,keywords:["淘宝","tb","taobao"],onClick:function(){hr(e,"thirdparty",{entrance:"taobao"})}},{type:"button",category:"thirdparty",name:"xiami",icon:"xiami",title:t.thirdparty.names.xiami,keywords:["虾米","xm","xiami"],onClick:function(){hr(e,"thirdparty",{entrance:"xiami"})}}]},{type:"group",category:"thirdparty",title:t.thirdparty.category.map,items:[{type:"button",category:"thirdparty",name:"amap",icon:"gaode",keywords:["gaode","ditu","amap","高德","gd"],title:t.thirdparty.names.amap,pinyin:"gaode,ditu,ampa",onClick:function(){hr(e,"thirdparty",{entrance:"amap"})}}]},{type:"group",category:"thirdparty",title:t.thirdparty.category.design,items:[{type:"button",category:"thirdparty",name:"modao",icon:"modao",title:t.thirdparty.names.modao,keywords:["modao","md","墨刀"],onClick:function(){hr(e,"thirdparty",{entrance:"modao"})}},{type:"button",category:"thirdparty",name:"figma",icon:"figma",title:t.thirdparty.names.figma,keywords:["figma"],onClick:function(){hr(e,"thirdparty",{entrance:"figma"})}},{type:"button",category:"thirdparty",name:"canva",icon:"canva",title:t.thirdparty.names.canva,keywords:["canva"],onClick:function(){hr(e,"thirdparty",{entrance:"canva"})}},{type:"button",category:"thirdparty",name:"processon",icon:"processon",title:t.thirdparty.names.processon,keywords:["processon"],onClick:function(){hr(e,"thirdparty",{entrance:"processon"})}}]},{type:"group",category:"thirdparty",title:t.thirdparty.category.development,items:[{type:"button",category:"thirdparty",name:"codepen",icon:"codepen",title:t.thirdparty.names.codepen,keywords:["codepen"],onClick:function(){hr(e,"thirdparty",{entrance:"codepen"})}},{type:"button",name:"riddle",icon:"riddle",title:t.thirdparty.names.riddle,keywords:["riddle"],onClick:function(){hr(e,"thirdparty",{entrance:"riddle"})}},{type:"button",category:"thirdparty",name:"herbox",icon:"herbox",title:"Herbox",keywords:["herbox"],onClick:function(){hr(e,"thirdparty",{entrance:"herbox"})}}]},{type:"group",category:"thirdparty",title:t.thirdparty.category.data,items:[{type:"button",category:"thirdparty",name:"deepinsight",icon:"deepinsight",title:t.thirdparty.names.deepinsight,keywords:["deepinsight"],onClick:function(){hr(e,"thirdparty",{entrance:"deepinsight"})}}]},{type:"group",category:"thirdparty",title:t.thirdparty.category.form,items:[{type:"button",category:"thirdparty",name:"jinshuju",icon:"jinshuju",title:t.thirdparty.names.jinshuju,keywords:["jinshuju","jsj","金数据"],onClick:function(){hr(e,"thirdparty",{entrance:"jinshuju"})}}]}],r=yr(e.options.thirdPartyService);return n.forEach((function(e){e.items=e.items.filter((function(e){return e.keywords&&(e.pinyin=e.keywords.join(",")),-1!==r.indexOf(e.name)}))})),n.filter((function(e){return e.items.length>0}))}var wr={"en-us":bn,"zh-cn":Tn},xr=function(e){return[{name:"bold",text:(e=e||wr[Dt.locale]).bold.text,keys:["Command","+","B"]},{name:"italic",text:e.italic.text,keys:["Command","+","I"]},{name:"strikethrough",text:e.strikethrough.text,keys:["Command","+","Shift","+","X"]},{name:"underline",text:e.underline.text,keys:["Command","+","U"]},{name:"sup",text:e.sup.text,keys:["Command","+","Shift","+","."]},{name:"sub",text:e.sub.text,keys:["Command","+","Shift","+",","]},{name:"link",text:e.link.buttonTitle,keys:["Command","+","K"]},{name:"mention",text:e.mention.text,keys:["@"]},{name:"card",text:e.card.buttonTitle,keys:["Command","+","/"]},{name:"print",text:e.editor.print,keys:["Command","+","P"]},{name:"alignleft",text:e.alignment.alignLeft,keys:["Command","+","Shift","+","L"]},{name:"aligncenter",text:e.alignment.alignCenter,keys:["Command","+","Shift","+","C"]},{name:"alignright",text:e.alignment.alignRight,keys:["Command","+","Shift","+","R"]},{name:"alignjustify",text:e.alignment.alignJustify,keys:["Command","+","Shift","+","J"]},{name:"orderedlist",text:e.list.orderedList,keys:["Command","+","Shift","+","7"]},{name:"unorderedlist",text:e.list.unorderedList,keys:["Command","+","Shift","+","8"]},{name:"tasklist",text:e.list.taskList,keys:["Command","+","Option","+","T"]},{name:"indent",text:e.indent.increase,keys:["Command","+","]"]},{name:"outdent",text:e.indent.decrease,keys:["Command","+","["]},{name:"save",text:e.editor.save,keys:["Command","+","S"]},{name:"undo",text:e.history.undo,keys:["Command","+","Z"]},{name:"redo",text:e.history.redo,keys:["Command","+","Shift","+","Z"]},{name:"paste",text:e.paste.paste,keys:["Command","+","V"]},{name:"pasteplaintext",text:e.paste.pastePlainText,keys:a.u.safari?["Command","+","Option","+","Shift","+","V"]:["Command","+","Shift","+","V"]},{name:"findandreplace",text:e.search.searchAndReplace,keys:["Command","+","Shift","+","G"]},{name:"inlinecode",text:e.code.text,keys:["Command","+","E"]},{name:"clearformat",text:e.clearFormat.buttonTitle,keys:["Command","+","\\"]}]},_r=a.u.macos?"⌘":"Ctrl";function Cr(e,t){return e&&e.length>0?t.filter((function(t){return t.items&&(t.items=Cr(e,t.items)),e.includes(t.category||t.name)})):t}function Er(e,t){return e&&e.length>0?t.filter((function(t){return t.items&&(t.items=Er(e,t.items)),!e.includes(t.category||t.name)})):t}function Or(e){return"classic"===e.getTypography()?"1515":"11"}var Sr={ICON:32,DROPDOWN:42,SPLIT_BUTTON:42,FONTSIZE:58,HEADING:73},Rr=function(e){var t=e.locale,n={};xr(t).forEach((function(e){e.keyText=e.keys.map((function(e){return"command"===e.toLowerCase()&&(e=a.u.macos?"⌘":"Ctrl"),"option"===e.toLowerCase()&&(e=a.u.macos?e:"Alt"),e})).join(""),n[e.name]=e}));var r={p:t.heading.normal,h1:t.heading.heading_1,h2:t.heading.heading_2,h3:t.heading.heading_3,h4:t.heading.heading_4,h5:t.heading.heading_5,h6:t.heading.heading_6},i=[{key:"9",value:"12px"},{key:"10",value:"13px"},{key:"11",value:"14px"},{key:"1515",value:"15px"},{key:"12",value:"16px"},{key:"14",value:"19px"},{key:"16",value:"22px"},{key:"18",value:"24px"},{key:"22",value:"29px"},{key:"24",value:"32px"},{key:"30",value:"40px"},{key:"36",value:"48px"}],o={};i.forEach((function(e){var t=e.key,n=e.value;o[t]=n}));var c=function(e){var t=e.locale,n=e.options,r=n.cardWhitelist,a=n.cardBlacklist,i={};br(e,r).forEach((function(e){i[e.name]=e}));var o=[],c=[i.image,i.table,i.file,i.calendar,i.premium,i.codeblock,i.math,i.mindmap,i.flowchart,i.diagram,i.lockedtext,i.label,i.vote];i.video&&c.push(i.video),c=Er(a,c=Cr(r,c)),o.push({title:t.card.normal,items:c});var l=[i.yuque,i.localdoc,i.thirdparty];(l=Er(a,l=Cr(r,l))).length>0&&o.push({title:t.card.embed,items:l});var s={};return function e(t,n){n&&n.length&&n.forEach((function(n){n.items&&e(t,n.items);var r=n.category||n.name;r&&(t[r]=!0)}))}(s,o),e.options.allCardNames=s,o}(e),l=[{name:"note-image",type:"note-upload-button",title:t.note.image,icon:'<span class="lake-svg-icon lake-svg-icon-note-image" />',size:Sr.ICON,className:"lake-button-icon-note-wrapper"},{name:"note-file",type:"note-upload-button",title:t.note.localFile,icon:'<span class="lake-svg-icon lake-svg-icon-note-file" />',size:Sr.ICON,className:"lake-button-icon-note-wrapper"},{name:"note-tasklist",title:t.note.todo,hotkey:n.tasklist.keyText,icon:'<span class="lake-svg-icon lake-svg-icon-note-tasklist" />',size:Sr.ICON,className:"lake-button-icon-note-wrapper",getActive:function(){return"tasklist"===e.command.queryState("tasklist")},onClick:function(){e.command.execute("tasklist","tasklist")}},{name:"note-link",title:t.note.link,icon:'<span class="lake-svg-icon lake-svg-icon-note-link" />',size:Sr.ICON,className:"lake-button-icon-note-wrapper",onClick:function(){e.command.execute("linkCard")}}];return[{name:"card",title:C.a.createElement("span",{dangerouslySetInnerHTML:{__html:"mini"===e.options.editorType?Dr(e.lang,e.options.allCardNames):t.card.buttonTitle}}),type:"collapse",icon:'<span class="lake-svg-icon lake-svg-icon-insert" />',size:Sr.ICON,data:c,description:t.card.description,onClick:function(t){e.command.execute(t)}},{name:"save",title:t.editor.save,hotkey:n.save.keyText,icon:'<span class="lake-icon lake-icon-save" />',size:Sr.ICON,onClick:function(){e.command.execute("save")}},{name:"undo",title:t.history.undo,hotkey:n.undo.keyText,icon:'<span class="lake-icon lake-icon-undo" />',size:Sr.ICON,getDisabled:function(){return!e.command.queryState("undo")},onClick:function(){e.command.execute("undo")}},{name:"redo",title:t.history.redo,hotkey:n.redo.keyText,icon:'<span class="lake-icon lake-icon-redo" />',size:Sr.ICON,getDisabled:function(){return!e.command.queryState("redo")},onClick:function(){e.command.execute("redo")}},{name:"paintformat",title:t.paintformat.buttonTitle,icon:'<span class="lake-icon lake-icon-paintformat" />',size:Sr.ICON,getActive:function(){return e.command.queryState("paintformat")},onClick:function(){e.command.execute("paintformat")},onDblClick:function(){e.command.execute("paintformat","repeat")}},{name:"removeformat",title:t.clearFormat.buttonTitle,icon:'<span class="lake-icon lake-icon-clean" />',size:Sr.ICON,hotkey:n.clearformat.keyText,onClick:function(){e.command.execute("removeformat")}},{name:"emoji",type:"emoji",title:t.emoji.buttonTitle,icon:'<span class="lake-svg-icon lake-svg-icon-emoji" />',size:Sr.ICON,data:sr,onClick:function(t){e.command.execute("emoji",t)}},{name:"heading",type:"dropdown",size:Sr.HEADING,title:t.heading.buttonTitle,className:"lake-button-heading",data:[{key:"p",value:r.p,className:""},{key:"h1",value:r.h1,className:"lake-button-set-list-item-heading1"},{key:"h2",value:r.h2,className:"lake-button-set-list-item-heading2"},{key:"h3",value:r.h3,className:"lake-button-set-list-item-heading3"},{key:"h4",value:r.h4,className:"lake-button-set-list-item-heading4"}],getActive:function(){return e.command.queryState("heading")||"p"},getCurrentText:function(e){return r[e]||t.heading.normal},onClick:function(t){e.command.execute("heading",t)}},{name:"bold",title:t.bold.text,hotkey:n.bold.keyText,icon:'<span class="lake-icon lake-icon-bold" />',size:Sr.ICON,getActive:function(){return e.command.queryState("bold")},getDisabled:function(){var t=e.command.queryState("heading")||"p";return/^h\d$/.test(t)},onClick:function(){e.command.execute("bold")}},{name:"italic",title:t.italic.text,hotkey:n.italic.keyText,icon:'<span class="lake-icon lake-icon-italic" />',size:Sr.ICON,getActive:function(){return e.command.queryState("italic")},onClick:function(){e.command.execute("italic")}},{name:"strikethrough",title:t.strikethrough.text,hotkey:n.strikethrough.keyText,icon:'<span class="lake-icon lake-icon-strikethrough" />',size:Sr.ICON,getActive:function(){return e.command.queryState("strikethrough")},onClick:function(){e.command.execute("strikethrough")}},{name:"underline",title:t.underline.text,hotkey:n.underline.keyText,icon:'<span class="lake-icon lake-icon-underline" />',size:Sr.ICON,getActive:function(){return e.command.queryState("underline")},onClick:function(){e.command.execute("underline")}},{name:"fontsize",type:"dropdown",title:t.fontsize.buttonTitle,className:"lake-button-fontsize",size:Sr.FONTSIZE,data:i,getActive:function(){return e.command.queryState("fontsize")||Or(e)},getDisabled:function(){var t=e.command.queryState("heading")||"p";return/^h\d$/.test(t)},getCurrentText:function(t){return o[t]||o[Or(e)]},onClick:function(t){e.command.execute("fontsize",t)}},{name:"fontcolor",type:"color",title:t.color.fontColor,moreTitle:t.color.moreColor,defaultColor:"#262626",currentColor:"#F5222D",size:Sr.SPLIT_BUTTON+4,getActive:function(){return e.command.queryState("fontcolor")||""},onClick:function(t){e.command.execute("fontcolor",t,"#262626")}},{name:"highlight",type:"color",title:t.color.bgColor,moreTitle:t.color.moreColor,defaultColor:"transparent",currentColor:"#FADB14",size:Sr.SPLIT_BUTTON+4,getActive:function(){return e.command.queryState("backcolor")||""},onClick:function(t){e.command.queryState("backcolor")===t&&(t="#FFFFFF"),e.command.execute("backcolor",t,"#FFFFFF")}},{name:"moremark",type:"dropdown",title:t.moremark.buttonTitle,icon:'<span class="lake-icon lake-icon-moremark" />',size:Sr.DROPDOWN,className:"lake-button-icon-list",data:[{key:"sup",icon:'<span class="lake-icon lake-icon-sup" />',title:t.sup.text,className:"lake-button-set-list-item-icon",shortcut:"".concat(_r,"+shift+.")},{key:"sub",icon:'<span class="lake-icon lake-icon-sub" />',title:t.sub.text,className:"lake-button-set-list-item-icon",shortcut:"".concat(_r,"+shift+,")},{key:"code",icon:'<span class="lake-icon lake-icon-code" />',title:t.code.text,className:"lake-button-set-list-item-icon",shortcut:"".concat(_r,"+E")}],getActive:function(){return e.command.queryState("moremark")},onClick:function(t){e.command.execute("moremark",t)}},{name:"alignment",type:"dropdown",title:t.alignment.buttonTitle,icon:'<span class="lake-icon lake-icon-left" />',size:Sr.DROPDOWN,className:"lake-button-icon-list",data:[{key:"left",icon:'<span class="lake-icon lake-icon-left" />',title:t.alignment.alignLeft,className:"lake-button-set-list-item-icon",shortcut:"".concat(_r,"+Shift+L")},{key:"center",icon:'<span class="lake-icon lake-icon-center" />',title:t.alignment.alignCenter,className:"lake-button-set-list-item-icon",shortcut:"".concat(_r,"+Shift+C")},{key:"right",icon:'<span class="lake-icon lake-icon-right" />',title:t.alignment.alignRight,className:"lake-button-set-list-item-icon",shortcut:"".concat(_r,"+Shift+R")},{key:"justify",icon:'<span class="lake-icon lake-icon-justify" />',title:t.alignment.alignJustify,className:"lake-button-set-list-item-icon",shortcut:"".concat(_r,"+Shift+J")}],getActive:function(){return e.command.queryState("alignment")},onClick:function(t){e.command.execute("alignment",t)}},{name:"list",type:"dropdown",title:t.list.buttonTitle,icon:'<span class="lake-icon lake-icon-oList" />',size:Sr.DROPDOWN,className:"lake-button-icon-list",data:[{key:"orderedlist",icon:'<span class="lake-icon lake-icon-oList" />',title:t.list.orderedList,className:"lake-button-set-list-item-icon"},{key:"unorderedlist",icon:'<span class="lake-icon lake-icon-uList" />',title:t.list.unorderedList,className:"lake-button-set-list-item-icon"}],getActive:function(){return e.command.queryState("tasklist")},onClick:function(t){e.command.execute("tasklist",t)}},{name:"orderedlist",title:t.list.orderedList,hotkey:n.orderedlist.keyText,icon:'<span class="lake-icon lake-icon-oList" />',size:Sr.ICON,getActive:function(){return"orderedlist"===e.command.queryState("tasklist")},onClick:function(){e.command.execute("tasklist","orderedlist")}},{name:"unorderedlist",title:t.list.unorderedList,hotkey:n.unorderedlist.keyText,icon:'<span class="lake-icon lake-icon-uList" />',size:Sr.ICON,getActive:function(){return"unorderedlist"===e.command.queryState("tasklist")},onClick:function(){e.command.execute("tasklist","unorderedlist")}},{name:"indent",type:"dropdown",title:t.indent.buttonTitle,icon:'<span class="lake-icon lake-icon-indent-right" />',size:Sr.DROPDOWN,className:"lake-button-icon-list",data:[{key:"indent",icon:'<span class="lake-icon lake-icon-indent-right" />',title:t.indent.increase,className:"lake-button-set-list-item-icon",shortcut:"".concat(_r,"+]")},{key:"outdent",icon:'<span class="lake-icon lake-icon-indent-left" />',title:t.indent.decrease,className:"lake-button-set-list-item-icon",shortcut:"".concat(_r,"+[")}],onClick:function(t){e.command.execute(t)}},{name:"lineheight",type:"dropdown",title:t.lineHeight.buttonTitle,icon:'<span class="lake-icon lake-icon-line-height" />',size:Sr.DROPDOWN,className:"lake-button-icon-list",data:[{key:"17",title:t.lineHeight.defaultTitle},{key:"1",title:"1"},{key:"115",title:"1.15"},{key:"15",title:"1.5"},{key:"2",title:"2"},{key:"25",title:"2.5"},{key:"3",title:"3"}],getDisabled:function(){return!e.command.queryState("lineheight")},getActive:function(){return e.command.queryState("lineheight")},onClick:function(t){e.command.execute("lineheight",t)}},{name:"tasklist",title:t.list.taskList,hotkey:n.tasklist.keyText,icon:'<span class="lake-icon lake-icon-tList" />',size:Sr.ICON,getActive:function(){return"tasklist"===e.command.queryState("tasklist")},onClick:function(){e.command.execute("tasklist","tasklist")}},{name:"link",title:t.link.buttonTitle,className:"lake-button-link",hotkey:n.link.keyText,icon:'<span class="lake-icon lake-icon-link" />',size:Sr.ICON,onClick:function(){e.command.execute("link")}},{name:"link-card",title:t.linkCard.buttonTitle,className:"lake-button-link-card",icon:'<span class="lake-icon lake-icon-link" />',size:Sr.ICON,onClick:function(){e.command.execute("linkCard")}},{name:"image",type:"upload",title:t.image.buttonTitle,icon:'<span class="lake-icon lake-icon-image" />',size:Sr.ICON},{name:"file",type:"upload",title:t.file.buttonTitle,icon:'<span class="lake-icon lake-icon-attachment" />',size:Sr.ICON},{name:"quote",title:t.blockquote.buttonTitle,icon:'<span class="lake-icon lake-icon-quote" />',size:Sr.ICON,getActive:function(){return e.command.queryState("quote")},onClick:function(){e.command.execute("quote")}},{name:"hr",title:t.hr.buttonTitle,icon:'<span class="lake-icon lake-icon-hr" />',size:Sr.ICON,onClick:function(){e.command.execute("hr")}},{name:"toc",title:t.toc.title,icon:'<span class="lake-icon lake-icon-toc" accessbilityid="toc-button" />',size:Sr.ICON,getActive:function(){return e.command.queryState("toc")},onClick:function(){e.command.execute("toc")}},{name:"search",title:t.search.searchAndReplace,icon:'<span class="lake-icon lake-icon-searchreplace" accessbilityid="searchreplace-button" />',size:Sr.ICON,getActive:function(){return e.command.queryState("search")},onClick:function(){e.command.execute("search")}},{name:"translate",title:t.translate.title,icon:'<span class="lake-icon lake-icon-translate" accessbilityid="translate-button" />',size:Sr.ICON,getActive:function(){return e.command.queryState("translate")},onClick:function(){e.command.execute("translate")}},{name:"repository",title:t.repository.title,icon:'<span class="lake-svg-icon lake-svg-icon-folder" accessbilityid="repository-button" />',size:Sr.ICON,getActive:function(){return e.command.queryState("repository")},onClick:function(){e.command.execute("repository")}}].concat(l)};function Dr(e,t){e="en"===e?"en":"zh";var n=[{name:"image",en:"image",zh:"图片"},{name:"label",en:"label",zh:"标签"},{name:"yuque",en:"Yuque doc",zh:"语雀文档"}].filter((function(e){return t[e.name]}));if(0===n.length)return"en"===e?"Insert card":"插入卡片";var r=n.map((function(t){return t[e]})).join("en"===e?",":"、"),a="";return n.length>1&&(a="en"===e?", etc.":" 等"),"en"===e?"Insert ".concat(r).concat(a):"插入 ".concat(r).concat(a)}function Ar(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ar(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ar(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pr(e){return e?e.startsWith("<")?e:'<span class="lake-svg-icon lake-svg-icon-'.concat(e,'" />'):e}function jr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Mr="lake-plugin-cardselect",Nr=function(e){f()(n,Ut);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;if(o()(this,n),r=t.call(this),y()(u()(r),"showMask",(function(){r.lastX=null,r.lastY=null,r.$listMask.css("display","block")})),y()(u()(r),"hideMask",(function(e){if(!r.lastX)return r.lastX=e.clientX,void(r.lastY=e.clientY);(Math.abs(e.clientX-r.lastX)>5||Math.abs(e.clientY-r.lastY)>5)&&(r.container.find(".lake-collapse-list-item-active").removeClass("lake-collapse-list-item-active"),r.$listMask.css("display","none"),r.lastX=null,r.lastY=null)})),y()(u()(r),"handlePreventDefault",(function(e){if(0!==r.cardRoot.closest("body").length)return e.preventDefault(),!1})),y()(u()(r),"getClickNode",(function(e){var t=e.find(".lake-collapse-list-item-active"),n=t.closest("div.ant-upload-select");return n.length>0&&(t=n.parent()),t})),y()(u()(r),"scrollItem",(function(e){var t=r.container.find(".lake-toolbar-collapse"),n=t.find(".lake-collapse-list-item"),a=t.find(".lake-collapse-list-item-active");r.showMask();var i=0;n.each((function(e,t){e===a[0]&&(i=t)}));var o="up"===e?n.eq(i-1):n.eq(i+1);if(o&&(r.selectItem(o),a.length)){var c=t.find(".ant-collapse-header")[0].clientHeight,l=o.closest(".ant-collapse-item");l.parent().find(".ant-collapse-item").each((function(e){if(e===l[0])return!1;c+=e.clientHeight})),c+=a[0].clientHeight*o.attr("data-index"),t[0].scrollTop=c-t[0].clientHeight/2}})),y()(u()(r),"selectItem",(function(e){r.container.find(".lake-toolbar-collapse").find(".lake-collapse-list-item-active").removeClass("lake-collapse-list-item-active"),e.addClass("lake-collapse-list-item-active");var t=r.engine;if(t.scrollNode){var n=e.getBoundingClientRect(),a=window.innerHeight||Math.max(document.documentElement.clientHeight,document.body.clientHeight);if(n.bottom>a){var i=n.bottom-a+20;t.scrollNode.scrollTop+=i}}})),y()(u()(r),"searchData",(function(e){var t=[];"string"==typeof e&&(e=e.toLowerCase()),r.data.forEach((function(n){n.items.forEach((function(n){"string"==typeof n.pinyin&&(n.pinyin=n.pinyin.trim().split(/\s*,\s*/)),Array.isArray(n.pinyin)&&n.pinyin.some((function(r){return!!r.startsWith(e)&&(t.find((function(e){return e.name===n.name}))||t.push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jr(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n)),!0)}))}))}));var n=[];return t.length>0&&n.push({title:"",items:t}),n})),y()(u()(r),"handleInput",(function(){var e=r.engine;if(!e.domEvent.isComposing){var t=r.keywordNode[0].innerText;if(""===t)return r.removeCardSelect(),void e.change.removeCard(r.cardRoot);var n=t.substr(1);if(""!==n){var a=r.searchData(n);a.length>0?r.renderCardSelect(a):r.changeToText()}else r.renderCardSelect(r.data)}})),y()(u()(r),"removeCardSelect",(function(){var e=r.container.find(".lake-cardselect-list");e.length>0&&(O.a.unmountComponentAtNode(e[0]),e.remove())})),y()(u()(r),"removeCard",(function(){r.removeCardSelect(),r.engine.change.removeCard(r.cardRoot)})),y()(u()(r),"changeToText",(function(){if(r.cardRoot.isEditable()){var e=r.keywordNode[0].innerText;r.removeCard(),r.engine.change.insertText(e)}})),y()(u()(r),"handleClick",(function(){r.removeCardSelect(),r.engine.change.removeCard(r.cardRoot)})),y()(u()(r),"onBeforeInsertCard",(function(){r.unbindEvents(),r.removeCardSelect(),r.cardRoot.remove()})),y()(u()(r),"handleBeforeUpload",(function(){r.cardRoot.hide(),Object(a.a)(document.body).append(r.cardRoot),r.unbindEvents()})),y()(u()(r),"handleAfterUpload",(function(){r.removeCardSelect(),r.cardRoot.remove()})),y()(u()(r),"renderCardSelect",(function(e){r.unbindEvents();var t=r.engine;r.removeCardSelect();var n=Object(a.a)('<div class="lake-cardselect-list" />');r.container.append(n);var i=[],o=r.cardRoot.offset(),c=Object(a.a)(".lark-editor-header"),l=0;if(c.length>0){var s=t.editArea.closest(".lake-editor").find(".lake-toolbar");s.length>0&&(l=c[0].clientHeight+s[0].clientHeight)}o.top-l>482&&i.push("lake-button-set-list-to-top"),""===e[0].title&&i.push("lake-button-set-list-search");var u={className:i.length>0?i.join(" "):void 0,active:!0,engine:t,locale:t.locale,data:e,activeKeys:e.map((function(e,t){return String(t)})),onClick:r.handleClick,onBeforeUpload:r.handleBeforeUpload,onAfterUpload:r.handleAfterUpload,onBeforeInsertCard:r.onBeforeInsertCard};O.a.render(C.a.createElement(lr,u),n[0]);var d=n.find(".lake-collapse-list-item");d.length>0&&r.selectItem(d.eq(0)),r.bindEvents(),r.initListMask()})),r.engine=e,r.readonly=!e,r.readonly)return h()(r);var i=Rr(e).find((function(e){return"card"===e.name}));return"max"===e.options.editorType?r.data=function(e,t,n){if(!n||!n.length)return n;var r=null,a=null,i=null,o=null,c=null;return n.forEach((function(n){n.items.forEach((function(n){"localdoc"===n.name?i=function(e,t,n){var r=[];return n.items.forEach((function(e){e.mainButton||r.push(Tr(Tr({},e),{},{noBorder:!0,icon:Pr(e.icon)}))})),r.push({name:"localdoc_video",type:"newupload",title:t.localdoc.items.localFile,pinyin:"file,bendi,wenjian,local",noBorder:!0,accept:e.video?Un("localdoc_video"):Un("localdoc"),icon:'<span class="lake-svg-icon lake-svg-icon-file-for-embed" />'}),r}(e,t,n):"yuque"===n.name?c={name:n.name,title:n.title,icon:'<span class="lake-svg-icon lake-svg-icon-yuque-for-embed"></span>',noBorder:!0,onClick:n.onClick,pinyin:n.pinyin}:"thirdparty"===n.name?o=function(e,t){var n=[];return t.items.forEach((function(e){e.items.forEach((function(e){n.push(Tr(Tr({},e),{},{noBorder:!0,icon:Pr(e.icon)}))}))})),{name:t.name+"_for_embed",title:e.embedCardMenu.introduction,items:n}}(t,n):(delete(n=Tr({},n)).tooltip,delete n.subTitle,"table"===n.name&&(n.disableSelector=!0),r||(r={name:"generic",title:t.card.common,items:[]}),r.items.push(n))}))})),(i||c)&&(a={name:"localdoc_for_embed",title:t.embedCardMenu.embed,items:[c].concat(ge()(i||[])).filter(Boolean)}),[r,a,o].filter(Boolean)}(e.options.allCardNames||{},e.locale,i.data):r.data=i.data,r}return l()(n,[{key:"destroy",value:function(){this.unbindEvents(),this.removeCardSelect()}},{key:"unactivate",value:function(){this.unbindEvents(),this.changeToText()}},{key:"unbindEvents",value:function(){ae.a.deleteScope(Mr),ae.a.unbind("enter",Mr),ae.a.unbind("up",Mr),ae.a.unbind("down",Mr),ae.a.unbind("esc",Mr),this.engine&&this.engine.off("keydown:enter",this.handlePreventDefault)}},{key:"bindEvents",value:function(){var e=this;this.unbindEvents(),ae.a.setScope(Mr),ae()("enter",Mr,(function(t){if(0!==e.cardRoot.closest("body").length){t.preventDefault();var n=e.container.find(".lake-toolbar-collapse"),r=e.getClickNode(n),a=r.find("input[type=file]");a.length>0?a[0].click():r[0].click()}})),ae()("up",Mr,(function(t){0!==e.cardRoot.closest("body").length&&(t.preventDefault(),e.scrollItem("up"))})),ae()("down",Mr,(function(t){0!==e.cardRoot.closest("body").length&&(t.preventDefault(),e.scrollItem("down"))})),ae()("esc",Mr,(function(t){t.preventDefault(),e.unbindEvents(),e.changeToText()})),this.engine.on("keydown:enter",this.handlePreventDefault)}},{key:"initListMask",value:function(){var e=this.container.find(".lake-button-set-list");if(this.$buttonList)e.append(this.$listMask),this.showMask();else{var t=Object(a.a)('<div class="lake-cardselect-list-mask"></div>');e.append(t),this.$listMask=t,t.on("mousemove",this.hideMask,!1)}}},{key:"resetPlaceHolder",value:function(){"/"===this.keywordNode[0].innerText?this.placeholder.show():this.placeholder.hide()}},{key:"render",value:function(e){var t=this;if(!this.readonly){this.cardRoot.attr("data-transient","true"),this.cardRoot.attr("contenteditable",!1),e.append('\n      <span class="lake-cardselect-keyword" contenteditable="true">/</span>\n      <span class="lake-cardselect-placeholder" style="\n        color: rgba(0,0,0,0.25);\n        pointer-events: none;\n        position: absolute;\n        width: 76px;\n        left: 7px;\n      ">'.concat(this.engine.locale.card.placeholder,"</span>\n    "));var n=e.find(".lake-cardselect-keyword");this.keywordNode=n,this.placeholder=e.find(".lake-cardselect-placeholder"),n.on("keydown",(function(e){Object(a.t)("enter",e)&&e.preventDefault()}));var r=Date.now();n.on("input",(function(){if(t.resetPlaceHolder(),Date.now()-r<100){var e=n.first();if(e&&e.isText()&&"/、"===e[0].nodeValue||"//"===e[0].nodeValue){var i=e[0].splitText(1);Object(a.a)(i).remove()}}setTimeout((function(){t.handleInput()}),10)})),setTimeout((function(){var e=t.engine.change.getRange();e&&n[0]&&(n[0].contains(e.startContainer)||n[0].contains(e.endContainer))&&(t.renderCardSelect(t.data),n[0].focus())}),10)}}}]),n}();y()(Nr,"type","inline"),y()(Nr,"singleSelectable",!1);var Lr=function(e){f()(n,Ut);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),r=t.call(this),y()(u()(r),"handleClick",(function(){var e=r.cardRoot;r.engine.change.focusCard(e)})),r.engine=e,r.readonly=!e,r}return l()(n,[{key:"select",value:function(){}},{key:"normalizeValue",value:function(e){return"string"==typeof e&&(e={src:e,package:"default"}),e.src=a.n.sanitizeUrl(e.src),e}},{key:"render",value:function(e,t){t=this.normalizeValue(t);var n='<img class="lake-emoji lake-emoji-'.concat(t.package,'" src="').concat(a.n.escape(t.src),'" />');e.append(n),this.readonly||this.container.on("click",this.handleClick)}}]),n}();function Ir(e){return new Promise((function(t,n){var r=new Image;r.src=e,r.crossOrigin="Anonymous",r.onload=function(){return t(r)},r.onerror=n}))}y()(Lr,"type","inline"),y()(Lr,"selectStyleType","background"),y()(Lr,"singleSelectable",!1),y()(Lr,"canCollab",!0);var zr=Math.ceil(window.devicePixelRatio||1);function Br(e){if(!e||"string"!=typeof e)return e;try{var t=new URL(e),n=t.searchParams.get("x-oss-process");if(!n)return e;var r=function(e){if(!e.startsWith("image/"))return null;var t=(e=e.substring("image".length)).split("/");if(""!==t[0])return null;var n={};return t.slice(1).forEach((function(e){var t=e.split(",");n[t[0]]=t.slice(1).join(",")})),n}(n);if(!r)return e;r.watermark&&delete r.watermark;var a=function(e){var t=Object.keys(e).map((function(t){return"".concat(t,",").concat(e[t])})).join("/");return t?"image/"+t:""}(r);return a?t.searchParams.set("x-oss-process",a):t.searchParams.delete("x-oss-process"),t.toString()}catch(e){console.warn(e)}return e}var Fr=function(){function e(t){var n=this;o()(this,e),y()(this,"onMouseDown",(function(e,t){e.preventDefault(),e.stopPropagation(),n.root.css("top",45===t||315===t?"auto":0),n.root.css("left",225===t||315===t?"auto":0),n.root.css("bottom",225===t||135===t?"auto":0),n.root.css("right",45===t||135===t?"auto":0);var r=e.clientX,i=e.clientY;a.u.mobile&&(r=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY),n.mouse={x:r,y:i},n.angle=t,n.resizing=!0,n.find("number")[0].className="lake-image-editor-number lake-image-editor-number-".concat(t," lake-image-editor-number-active"),n.image.show(),a.u.mobile?(document.addEventListener("touchmove",n.onMouseMove,{passive:!1}),document.addEventListener("touchend",n.onMouseUp,{passive:!1})):(document.addEventListener("mousemove",n.onMouseMove),document.addEventListener("mouseup",n.onMouseUp))})),y()(this,"onMouseMove",(function(e){e.preventDefault(),e.stopPropagation();var t=e.clientX,r=e.clientY;if(a.u.mobile&&(t=e.changedTouches[0].clientX,r=e.changedTouches[0].clientY),t!==n.mouse.x||r!==n.mouse.y){var i=n.mouse.x-t,o=n.mouse.y-r;n.updateImageSize(i,o)}n.resizing=!0})),y()(this,"onMouseUp",(function(e){e.preventDefault(),e.stopPropagation(),n.width=n.root[0].clientWidth,n.height=n.root[0].clientHeight,n.angle=0,n.resizing=!1,n.find("number")[0].className="lake-image-editor-number",a.u.mobile?(document.removeEventListener("touchmove",n.onMouseMove),document.removeEventListener("touchend",n.onMouseUp)):(document.removeEventListener("mousemove",n.onMouseMove),document.removeEventListener("mouseup",n.onMouseUp)),n.config.onChange(n.width,n.height),n.image.hide()})),y()(this,"updateImageSize",(function(e){var t;(t=n.angle<180?n.width-e:n.width+e)<24&&(t=24),t>n.maxWidth&&(t=n.maxWidth);var r=t*n.config.rate;r<24&&(t=(r=24)/n.config.rate),t=Math.round(t),r=Math.round(r),n.setSize(t,r)})),y()(this,"setSize",(function(e,t){n.root.css({width:e+"px",height:t+"px"}),n.find("number").html("".concat(zt(e),"·").concat(zt(t)))})),y()(this,"closeZoom",(function(){var e=Object(a.a)("#lake-image-zoom-container");e[0]&&O.a.unmountComponentAtNode(e[0]),e.remove(),n.config.onClose()})),this.config=t,this.root=Object(a.a)('\n  <div class="lake-image-editor" draggable="true">\n    <img data-role="image-bg" class="lake-image-editor-bg lake-image-editor-bg-active" src="'.concat(zt(t.src),'">\n    <div data-role="holder-45" class="lake-image-editor-holder lake-image-editor-holder-45"></div>\n    <div data-role="holder-135" class="lake-image-editor-holder lake-image-editor-holder-135"></div>\n    <div data-role="holder-225" class="lake-image-editor-holder lake-image-editor-holder-225"></div>\n    <div data-role="holder-315" class="lake-image-editor-holder lake-image-editor-holder-315"></div>\n    <span data-role="number" class="lake-image-editor-number"></span>\n  </div>\n  ')),this.image=this.find("image-bg"),this.resizing=!1,this.width=t.width,this.height=t.height,this.maxWidth=t.maxWidth,this.openZoom=t.openZoom}return l()(e,[{key:"find",value:function(e){var t="[data-role=".concat(e,"]");return this.root.find(t)}},{key:"destroy",value:function(){this.root.remove(),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp)}},{key:"render",value:function(e){var t=this,n=this.config,r=n.width,i=n.height;this.root.css({width:"".concat(r,"px"),height:"".concat(i,"px")}),e.append(this.root),this.image.on("dblclick",this.openZoom),this.image.hide(),a.u.mobile?(this.find("holder-45").on("touchstart",(function(e){return t.onMouseDown(e,45)}),{passive:!1}),this.find("holder-135").on("touchstart",(function(e){return t.onMouseDown(e,135)}),{passive:!1}),this.find("holder-225").on("touchstart",(function(e){return t.onMouseDown(e,225)}),{passive:!1}),this.find("holder-315").on("touchstart",(function(e){return t.onMouseDown(e,315)}),{passive:!1})):(this.find("holder-45").on("mousedown",(function(e){return t.onMouseDown(e,45)})),this.find("holder-135").on("mousedown",(function(e){return t.onMouseDown(e,135)})),this.find("holder-225").on("mousedown",(function(e){return t.onMouseDown(e,225)})),this.find("holder-315").on("mousedown",(function(e){return t.onMouseDown(e,315)})))}}]),e}();vt(".lake-error-tips {\n  padding: 6px 8px 6px 20px;\n  background: #f5f5f5;\n  display: inline-block;\n  border-radius: 2px;\n}\n.lake-error-tips .lake-error-tips-card-icon {\n  display: inline-block;\n  margin-right: 4px;\n}\n.lake-error-tips .lake-error-tips-card-icon span {\n  vertical-align: middle;\n}\n.lake-error-tips .lake-error-tips-info {\n  display: inline-block;\n}\n.lake-error-tips .lake-error-tips-info span {\n  vertical-align: top;\n}\n.lake-error-tips .lake-error-tips-variable-content {\n  display: inline-block;\n  max-width: 200px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.lake-error-tips .lake-svg-icon-alert {\n  width: 16px;\n  height: 16px;\n  background-image: url(https://gw.alipayobjects.com/zos/basement_prod/be5b1e2a-b47e-479c-9217-430229bef84e.svg);\n  vertical-align: middle;\n  display: inline-block;\n}\n.lake-error-tips .lake-svg-icon-alert:hover {\n  cursor: pointer;\n}\n.lake-error-tips .lake-error-tips-slash {\n  color: #e8e8e8;\n  margin: 0 6px;\n}\n");var Vr={"zh-cn":{copyMessage:"复制错误信息",copySuccess:"复制成功！"},en:{copyMessage:"Copy error information",copySuccess:"Successful copy!"}}[window.appData&&"zh-cn"!==window.appData.locale?"en":"zh-cn"],Ur=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"render",value:function(){var e=this.props,t=e.cardIcon,n=e.variableContent,r=e.fixedContent,i=e.message,o=e.block,c=e.docWidth;return C.a.createElement("div",{className:"lake-error-tips",style:{width:o?"100%":"auto"}},C.a.createElement("div",{className:"lake-error-tips-card-icon",dangerouslySetInnerHTML:{__html:t}}),C.a.createElement("div",{className:"lake-error-tips-info"},C.a.createElement("span",{className:"lake-error-tips-variable-content",style:{maxWidth:o?"".concat(c-200,"px"):"220px"}},n),C.a.createElement("span",{className:"lake-error-tips-fixed-content"},r)),i?C.a.createElement(D.a,{title:Vr.copyMessage,placement:"bottom"},C.a.createElement("span",{className:"lake-error-tips-slash"},"|"),C.a.createElement("span",{className:"lake-svg-icon lake-svg-icon-alert",onClick:function(){a.c.copyText(JSON.stringify(i,null,"  ")),A.a.success(Vr.copySuccess)}})," "):"")}}]),n}(C.a.Component);function qr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qr(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Ur.propTypes={cardIcon:R.a.string,variableContent:R.a.string,fixedContent:R.a.string,message:R.a.object,block:R.a.bool,docWidth:R.a.number};var Wr,Yr=Object(r.getImageBrowser)(),Gr=a.n.escape,Kr=a.n.sanitizeUrl,Xr=!(!(Wr=document.createElement("canvas")).getContext||!Wr.getContext("2d"))&&(a.u.chrome||a.u.firefox||0===Wr.toDataURL("image/webp").indexOf("data:image/webp"));function $r(e,t,n,a){return e=t(e,n&&n(e)),r.OssUtil.tryAddWebpFormat(e,Xr,a)}function Zr(e){var t=e.data,n=e.readonly,i=e.maxWidth,o=e.onBeforeRenderImage,c=e.isRemoteImage,l=e.src,s=e.ossProcessDomains;if("error"===t.status)return function(e){var t=Gr(e.message),n=document.createElement("div");return O.a.render(C.a.createElement(Ur,{cardIcon:'<span class="lake-svg-icon lake-svg-icon-error-image"></span>',variableContent:t,message:e}),n),n}(t);var u,d='\n  <span data-role="progress" class="progress">\n    <i class="lake-anticon lake-anticon-loading">\n      <svg viewBox="0 0 1024 1024" class="lake-anticon-spin" data-icon="loading" width="1em" height="1em" fill="currentColor" aria-hidden="true">\n        <path d="M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"></path>\n      </svg>\n    </i>\n    <span data-role="percent" class="percent">'.concat(Gr(t.percent||0),"%</span>\n  </span>\n  "),f=l;if("uploading"!==t.status&&l&&(l=$r(l,o,c,s)),n){var p=r.OssUtil.resizeImage({maxWidth:i,src:l,data:t,ossProcessDomains:s});p&&(f=l,l=p)}var h=t.name?Gr(t.name):"",m=h?' alt="'.concat(h,'" title="').concat(h,'"'):"";if(t.link&&n){var g="";""!==t.linkTarget&&(g=' target="_blank"'),u='<a href="'.concat(Gr(Kr(t.link)),'"').concat(g,'><img data-role="image" src="').concat(Gr(Kr(l)),'" data-raw-src="').concat(Gr(Kr(f)),'" class="image lake-drag-image"').concat(m," /></a>")}else u='<img data-role="image" src="'.concat(Gr(Kr(l)),'" data-raw-src="').concat(Gr(Kr(f)),'" class="image lake-drag-image"').concat(m," />");var v='<span data-role="maximize" class="lake-image-editor-maximize" style="display: none;"><span class="lake-icon lake-icon-full-screen"></span></span>';(!t.width&&t.originWidth<100||"number"==typeof t.width&&t.width<100||a.u.mobile)&&(v="");var y="";if(!a.u.mobile&&t.ocrLocations){var b=Math.min(i,t.width)/t.originWidth;y+='<div class="lake-image-mask">',t.ocrLocations.forEach((function(e){e.height>e.width&&(e.height=e.width);var n=Math.min(e.height*b,50),r="font-size: ".concat(n,"px;left: ").concat(e.x/t.originWidth*100,"%;top: ").concat(e.y/t.originHeight*100,"%;");y+='<p class="lake-image-mask-point" style="'.concat(Gr(r),'">').concat(Gr(e.text),"</p>")})),y+="</div>"}return'\n  <span class="lake-image">\n    <span class="lake-image-content lake-image-content-istmp">\n      <span data-role="detail" class="lake-image-detail">\n        <span class="lake-image-meta">\n          <span class="lake-image-warning" style="display: none;">\n            <i class="anticon anticon-exclamation-circle">\n              <svg viewBox="64 64 896 896" class="" data-icon="exclamation-circle" width="1em" height="1em" fill="currentColor" aria-hidden="true">\n                <path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"></path><path d="M464 688a48 48 0 1 0 96 0 48 48 0 1 0-96 0zM488 576h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"></path>\n              </svg>\n            </i>\n          </span>\n          '.concat(u,"\n          ").concat(d,"\n          ").concat(v,"\n          ").concat(y,"\n        </span>\n      </span>\n    </span>\n  </span>\n  ")}var Qr=function(){function e(t,n){var i=this;o()(this,e),y()(this,"destroy",(function(){window.removeEventListener("resize",i.onWindowResize),i.closeZoom()})),y()(this,"focus",(function(){i.readonly||(i.root.addClass("lake-image-active"),"done"===i.status&&(i.destroyEditor(),i.renderEditor()))})),y()(this,"blur",(function(){i.readonly||(i.root.removeClass("lake-image-active"),"done"===i.status&&i.destroyEditor(),Object(a.a)("div[data-lake-element=embed-tooltip]").remove())})),y()(this,"getMaxWidth",(function(e){return a.b.getClosestBlock(e)[0].clientWidth-6})),y()(this,"isSvg",(function(){return i.src.endsWith(".svg")||i.src.startsWith("data:image/svg+xml")})),y()(this,"getValue",(function(){var e,t=i.config.value,n={src:i.src,originWidth:i.originWidth,originHeight:i.originHeight,name:t.name,size:t.size,display:i.display,align:i.align,angle:i.angle,link:i.link,linkTarget:i.linkTarget,status:i.status,ocrLocations:t.ocrLocations,style:i.style,search:(e=t.ocrLocations,e?e.map((function(e){return e.text})).join(" "):""),margin:i.margin};return Mt(n.src)&&delete n.src,i.width&&(n.width=i.width),i.height&&(n.height=i.height),"uploading"===i.status&&i.uid&&(n.uid=i.uid),n})),y()(this,"onWindowResize",(function(){var e=i.card.closest(i.root);if(e){i.maxWidth=i.getMaxWidth(e),i.resetImageSize();var t=i.image[0].clientWidth,n=i.image[0].clientHeight;i.resizer&&(i.resizer.maxWidth=i.maxWidth,i.resizer.setSize(t,n))}})),y()(this,"handleChangeSize",(function(e,t){var n=i.card.closest(i.root);if(n){i.changeSize(e,t);var r=i.getValue();i.card.setValue(n,r),"image"===i.engine.sidebar.activate&&i.setSidebar()}})),y()(this,"setSidebar",(function(){var e=i.getValue();i.engine.sidebar.set({name:"image",title:i.locale.preferences,className:"lake-image-sidebar",data:e})})),y()(this,"changeSize",(function(e,t){e<24&&(t=(e=24)*i.rate);var n=i.config.value.originWidth||i.maxWidth;e>n&&(t=(e=n)*i.rate),t<24&&(e=(t=24)/i.rate),e=Math.round(e),t=Math.round(t),i.width=e,i.height=t,i.image.css({width:"".concat(e,"px"),height:"".concat(Math.round(Math.min(i.maxWidth,e)*i.rate),"px")}),i.destroyEditor(),i.renderEditor()})),y()(this,"changeLink",(function(e,t){i.link=e,i.linkTarget=t})),y()(this,"openZoom",(function(e){if(!i.config.docEmbedView){e.preventDefault(),e.stopPropagation();var t=i.config.engine||i.config.contentView,n=t.options.onBeforeRenderImage,o=[],c=i.cardRoot,l=0;t.editArea.find('[data-lake-card="image"]').toArray().filter((function(e){return(e=Object(a.a)(e)).find('[data-role="image"]').length>0})).forEach((function(e,i){var s=(e=Object(a.a)(e)).find('[data-role="image"]'),u=t.card.getValue(e),d=parseInt(s.css("width")),f=parseInt(s.css("height")),p=u.width||d,h=u.height||f,m=u.originWidth||d*zr,g=u.originHeight||f*zr,v=a.u.mobile?1e3:4e3,y=t.options.ossProcessDomains,b=$r(u.src,n,t.isRemoteImage,y),k=r.OssUtil.resizeImage({maxWidth:v,src:b,data:{width:m,originWidth:m,originHeight:g,ossProcessDomains:y}}),w=s.attr("src"),x=s.attr("data-override-src");x?o.push({src:x,msrc:x,w:m,h:g}):k?o.push({src:k,msrc:w,w:v,h:h/p*v}):o.push({src:b,msrc:w,w:m,h:g}),e[0]===c[0]&&(l=i)})),Yr.open(o,l)}})),y()(this,"closeZoom",(function(){Yr.close()})),y()(this,"resetImageSize",(function(){i.detailInner.css({"background-color":"",width:"",height:""}),i.image.css({width:"",height:""});var e=i.image[0],t=i.width,n=i.height;"number"!=typeof t||n?t||"number"!=typeof n?"number"==typeof t&&"number"==typeof n?(n=Math.round(i.rate*t),i.height=n):(t=e.clientWidth,n=e.clientHeight,i.isSvg()&&i.originWidth&&i.originHeight&&(t=i.originWidth,n=i.originHeight)):t=Math.round(n/i.rate):n=Math.round(i.rate*t),t>i.maxWidth&&(t=i.maxWidth,n=Math.round(t*i.rate)),i.image.css("width","".concat(t,"px")),i.image.css("height","".concat(n,"px"))})),y()(this,"addToolbarDelete",(function(e){var t=i.config.locale;e.push({type:"button",name:"delete",iconName:"delete",title:t.delete,onClick:i.config.onRemove})})),y()(this,"onLoad",(function(){var e=i.card.closest(i.root);if(e){"done"===i.status&&(i.root.find(".lake-image-content").addClass("lake-image-content-isvalid"),i.root.find(".lake-image-content").removeClass("lake-image-content-istmp"));var t=i.image[0],n=t.naturalWidth,r=t.naturalHeight;if(i.rate=r/n,i.originWidth=n,i.originHeight=r,i.scaleByPixelRatio&&(i.width=n/zr,i.height=r/zr),i.resetImageSize(),i.image.css("visibility","visible"),i.image.css("background-color",""),i.image.css("background-repeat",""),i.image.css("background-position",""),i.image.css("background-image",""),i.width||(i.width=n),i.height||(i.height=r),!i.readonly||!i.viewEngine.isReadonly&&"uploading"===i.status){var a=i.getValue();i.card.setValue(e,a)}window.removeEventListener("resize",i.onWindowResize),window.addEventListener("resize",i.onWindowResize),i.resizer&&i.resizer.setSize(t.clientWidth,t.clientHeight)}})),y()(this,"onError",(function(){i.container.empty();var e=Object(a.a)(Zr({data:Hr(Hr({},i.config.value),{},{status:"error",message:i.locale.loadFailed})}));i.container.append(e)})),this.component=t,this.config=n,this.readonly=!n.engine,this.locale=n.locale,this.uid=n.uid;var c=n[n.engine?"engine":"contentView"],l=c.options.onBeforeRenderImage;this.maxWidth=this.getMaxWidth(n.cardRoot),this.viewEngine=c;var s=!1;try{new URL(location.href).searchParams.has("export_type")&&(s=!0)}catch(e){console.warn(e)}this.src=this.readonly&&s?Br(n.src):n.src,this.root=Object(a.a)(Zr({data:n.value,src:this.src,locale:this.locale,readonly:this.readonly,maxWidth:this.maxWidth,onBeforeRenderImage:l,isRemoteImage:c.isRemoteImage,ossProcessDomains:c.options.ossProcessDomains})),n.docEmbedView&&this.root.addClass("doc-embed-view"),this.image=this.find("image"),this.detail=this.find("detail"),this.detailInner=this.detail.find(".lake-image-meta"),this.engine=n.engine,this.card=n.card,n.engine&&(this.options=n.engine.options.image||{}),this.status=n.value.status,this.width=n.value.width,this.height=n.value.height,this.scaleByPixelRatio=n.value.scaleByPixelRatio,this.display=n.value.display,this.align=n.value.align,this.link=n.value.link,this.linkTarget=n.value.linkTarget,this.margin=n.value.margin||{top:!1,bottom:!1},this.style=n.value.style||"none"}return l()(e,[{key:"find",value:function(e){var t="[data-role=".concat(e,"]");return this.root.find(t)}},{key:"changeStyle",value:function(e){var t=!1,n=!1;switch(e){case"stroke":t=!0;break;case"shadow":n=!0;break;default:e="none"}this.style=e,t?this.detailInner.addClass("border"):this.detailInner.removeClass("border"),n?this.detailInner.addClass("shadow"):this.detailInner.removeClass("shadow")}},{key:"changeMargin",value:function(e){this.margin=e}},{key:"destroyEditor",value:function(){this.resizer&&this.resizer.destroy()}},{key:"renderEditor",value:function(){var e=this,t=this.image[0].offsetWidth,n=this.image[0].offsetHeight;if(t&&n){var r=this.card.closest(this.root),a=new Fr({src:this.src,width:t,height:n,rate:this.rate,angle:this.angle,maxWidth:this.maxWidth,onChange:this.handleChangeSize,openZoom:this.openZoom,onClose:function(){e.engine.change.focus();var t=e.engine.change.getRange();e.card.focus(t,r,!1)}});a.render(this.detail),this.resizer=a}}},{key:"render",value:function(e){var t=this;if(this.cardRoot=this.card.closest(e),this.container=e,this.readonly){if("error"===this.status)return;this.viewEngine.isReadonly&&"uploading"===this.status&&(this.status="done")}if("error"!==this.status){if("uploading"===this.status?this.find("progress").show():this.find("progress").remove(),this.readonly){if(this.width&&this.height){var n=this.width,r=this.height;this.maxWidth<n&&(n=this.maxWidth,r=Math.round(n*this.height/this.width)),this.image.css("width",n+"px"),this.image.css("height",r+"px"),this.image.css("background-color","#FAFAFA"),this.image.css("background-repeat","no-repeat"),this.image.css("background-position","center"),this.image.css("background-image","url(https://gw.alipayobjects.com/zos/basement_prod/b665217b-bdc4-464d-ad47-d2a8fc938552.svg)")}}else this.image.css("visibility","hidden");this.changeStyle(this.style);var a=null;if(this.viewEngine&&this.viewEngine.readyStateManager&&(a=this.viewEngine.readyStateManager.add()),this.image.on("load",(function(){a&&a(),t.onLoad()})),this.image.on("error",(function(){a&&a(),t.onError()})),e.append(this.root),!("done"!==this.status||this.readonly&&this.image.isEditable())){var i=this.find("maximize");this.root.on("mouseenter",(function(){return i.show()})),this.root.on("mouseleave",(function(){return i.hide()})),this.readonly&&0===this.image.closest("a").length&&this.image.on("click",this.openZoom),this.image.on("dblclick",this.openZoom),i.on("click",this.openZoom)}if(!Mt(this.src)&&("uploading"===this.status||"done"===this.status)){var o=!!this.image[0].clientHeight;if("uploading"!==this.status||o||this.detailInner.css("background-color","#F5F5F5"),"number"==typeof this.width&&this.width>this.maxWidth){var c=this.maxWidth;this.detailInner.css("width","".concat(c,"px"))}else{if(this.width){var l=this.width;l="number"==typeof l?"".concat(l,"px"):l,this.detailInner.css("width",l)}else!o&&this.detailInner.css("width","300px");if(this.height){var s=this.height;s="number"==typeof s?"".concat(s,"px"):s,this.detailInner.css("height",s)}else!o&&this.detailInner.css("height","200px")}}this.readonly}else e.append(this.root)}}]),e}();function Jr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ea(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jr(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ta=function(e){f()(n,Ut);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e,r){var i;return o()(this,n),i=t.call(this),y()(u()(i),"onRemove",(function(){i.imageNode.blur();var e=i.cardRoot;i.engine.change.removeCard(e)})),y()(u()(i),"onSaveBefore",(function(){return new Promise((function(e,t){"uploading"!==i.value.status?e():t(i.locale.stillUploading)}))})),y()(u()(i),"saveCardValue",(function(){var e=i.cardRoot,t=i.imageNode.getValue();i.card.setValue(e,t)})),i.card=a.s.card,i.engine=e,i.contentView=r,i.docEmbedView=window.location.search.indexOf("view=doc_embed")>0,i}return l()(n,[{key:"embedToolbar",value:function(){var e=this;if(this.engine){var t=[];return this.value&&"done"===this.value.status&&(t.push({type:"copy"}),t.push({type:"separator"}),this.engine&&this.value&&!1!==this.engine.options.allowResource&&!1!==this.engine.options.allowSaveToResource&&"done"===this.value.status&&t.push({type:"button",name:"saveToResource",iconName:"save-folder",title:this.engine.locale.embedToolbar.saveToResource,onClick:function(){var t=e.getTopEngine();t&&t.event.trigger("saveToResource",{name:"image",data:ea({},e.value)})}})),t.push({type:"delete"}),t}}},{key:"destroy",value:function(){this.imageNode&&this.imageNode.destroy();var e=this.getTopEngine();e&&e.asyncEvent&&e.asyncEvent.off("save:before",this.onSaveBefore),this.restoreSideBar()}},{key:"didInsert",value:function(e){if("uploading"===e.status){var t=this.getTopEngine();e.uid&&t.uploader&&t.uploader.uploadingFiles[e.uid]&&t&&t.asyncEvent&&t.asyncEvent.on("save:before",this.onSaveBefore)}}},{key:"activate",value:function(){this.unselect(),this.imageNode.focus(),this.openSidebar()}},{key:"select",value:function(){this.state.activated||x()(g()(n.prototype),"select",this).call(this)}},{key:"openSidebar",value:function(){var e=this.engine;e&&(this.openPreferences||e.sidebar.disable||function(e){var t=Object(a.a)(e);if(!t)return!1;for(;t&&!t.isRoot();)t=t.parent();return!!t&&t.closest("[data-lake-card]").length>0}(this.cardRoot)||this.value&&"done"===this.value.status&&(this.imageNode.setSidebar(),this.openPreferences=!0))}},{key:"restoreSideBar",value:function(){this.engine&&this.openPreferences&&(this.engine.sidebar.restore("image"),this.openPreferences=!1)}},{key:"unactivate",value:function(){this.engine&&x()(g()(n.prototype),"unselect",this).call(this),this.restoreSideBar(),this.imageNode.blur()}},{key:"changeSize",value:function(e,t){this.imageNode.changeSize(e,t),this.saveCardValue()}},{key:"changeStyle",value:function(e){this.imageNode.changeStyle(e),this.saveCardValue()}},{key:"changeMargin",value:function(e){this.imageNode.changeMargin(e),this.saveCardValue(),this.toggleMargin()}},{key:"changeLink",value:function(e,t){this.imageNode.changeLink(e,t),this.saveCardValue()}},{key:"getSrc",value:function(){if(this.value.src)return this.value.src;var e=this.getViewEngine();if(e&&e.uploader){var t=e.uploader;if(t&&this.value.uid){var n=t.uploadingFiles[this.value.uid];if(n)return n.src}}return""}},{key:"render",value:function(e,t){var n=!this.engine,r=n?this.contentView.locale.image:this.engine.locale.image;t=t||{},this.value=t,this.locale=r;var a=this.card,i=this.getSrc();this.fixImageStatus(),t.status=t.status||"done",t.align=t.align||"left",t.linkTarget=void 0===t.linkTarget?"_blank":t.linkTarget,t.display=n&&t.display||"inline",t.src&&Mt(t.src)&&(t.src="",this.card.setValue(this.cardRoot,t)),t.message=t.message||r.uploadFailed;var o=this.card.closest(e);"block"===t.display&&o.addClass("lake-card-block"),"block"===t.display&&t.align&&o.addClass("lake-image-".concat(t.align));var c=new Qr(this,{uid:t.uid,locale:r,engine:this.engine,contentView:this.contentView,card:a,src:i,value:t,cardRoot:o,onChange:this.onChange,onRemove:this.onRemove,docEmbedView:this.docEmbedView});c.render(e),this.imageNode=c,this.card.setToolbar({cardRoot:o,engine:this.engine,component:this}),this.toggleMargin()}},{key:"fixImageStatus",value:function(){this.value&&"error"===this.value.status&&this.value.src&&this.value.src.startsWith("https://cdn.nlark.com/")&&(this.value.status="done")}}]),n}();function na(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ra(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?na(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):na(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}y()(ta,"type","inline");var aa=a.n.escape,ia=a.n.sanitizeUrl;var oa=function(e){f()(n,Ut);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e,r){var i;return o()(this,n),i=t.call(this,e),y()(u()(i),"allowToolbarFollowUser",!0),y()(u()(i),"destroy",(function(){window.removeEventListener("resize",i.onWindowResize);var e=i.getTopEngine();e&&e.asyncEvent&&e.asyncEvent.off("save:before",i.onSaveBefore)})),y()(u()(i),"getMaxWidth",(function(){return a.b.getClosestBlock(i.cardRoot)[0].clientWidth-6})),y()(u()(i),"onWindowResize",(function(){i.maxWidth=i.getMaxWidth(),i.updateMaxWidth()})),y()(u()(i),"onSaveBefore",(function(){return new Promise((function(e,t){"uploading"!==i.value.status?"transfering"!==i.value.status?e():t(i.locale.stillTransfering):t(i.locale.stillUploading)}))})),y()(u()(i),"updateMaxWidth",(function(){i.cardRoot.find(".lake-file-title").css("max-width",i.maxWidth-100+"px")})),y()(u()(i),"focusCard",(function(){i.engine.change.focusCard(i.cardRoot)})),y()(u()(i),"previewFile",(function(){var e=jt(i.value.src),t=i.getTopEngine();t&&t.options&&t.options.previewFileHandler?t.options.previewFileHandler(ia(e),i.value.src):window.open(ia(e))})),y()(u()(i),"downloadFile",(function(){var e=i.value,t=e.src,n=e.name;if(t){var r=i.getTopEngine();r.options&&r.options.downloadFileHandler?r.options.downloadFileHandler(t,n):window.open(Bt(t))}})),i.card=a.s.card,i.engine=e,i.contentView=r,i.isEditMode=!!e,i.maxWidth=752,i}return l()(n,[{key:"getToolbarConfig",value:function(){var e=this,t=[];return"done"===this.value.status&&(function(e,t,n){if(Dt.isPrivateCloud)return a.h.isImage(e)||a.h.isTextFile(e)||["mp3","wav","mp4","pdf"].includes(e);t=t||0;var r=function(e,t){var n;return a.h.isOffice("a.".concat(e))?n="previewOffice":a.h.isMacOffice("a.".concat(e))&&(n="previewMacOffice"),!!n&&a.h.isSizeLimit(n,t)}(e=String(e||""),t),i=a.e.MAC_OFFICE_EXT.concat(a.e.OFFICE_EXT);return!!(a.h.isImage(e)||a.h.isTextFile(e)||["mp3","wav"].indexOf(e)>=0||i.indexOf(e)>=0&&r||a.h.isMMap(e)&&r)}(this.value.ext,this.value.size,this.value)&&t.push({type:"button",name:"preview",iconName:"preview",title:this.locale.preview,onClick:this.previewFile}),t.push({type:"button",name:"download",iconName:"download",title:this.locale.download,onClick:this.downloadFile}),this.isEditMode&&(this.engine&&!1!==this.engine.options.allowResource&&!1!==this.engine.options.allowSaveToResource&&t.push({type:"button",name:"saveToResource",iconName:"save-folder",title:this.getTopEngine().locale.embedToolbar.saveToResource,onClick:function(){var t=e.getTopEngine();t&&t.event.trigger("saveToResource",{name:"file",data:ra({},e.value)})}}),t.push({type:"copy"}),t.push({type:"separator"}),t.push({type:"delete"}))),t}},{key:"didInsert",value:function(e){if("uploading"===e.status||"transfering"===e.status){var t=this.getTopEngine();if(!e.uid||!t.uploader||!t.uploader.uploadingFiles[e.uid])return;t&&t.asyncEvent&&t.asyncEvent.on("save:before",this.onSaveBefore)}}},{key:"activate",value:function(){this.container.find("lake-file").addClass("lake-file-active")}},{key:"unactivate",value:function(){this.container.find("lake-file").removeClass("lake-file-active")}},{key:"updateProgress",value:function(e){this.value.progress&&(this.value.progress.percent=e),this.card.setValue(this.cardRoot,this.value)}},{key:"renderViewMode",value:function(){var e=this;this.cardRoot.on("click",this.downloadFile);var t=this.getToolbarConfig(),n=new a.f({list:t});n.root.addClass("lake-card-toolbar"),n.render(this.cardRoot.first());var r=!0;this.cardRoot.on("mouseenter",(function(t){r=!1,e.contentView.editArea.find('[data-lake-card="file"]').each((function(t){e.card.hideCardToolbar(Object(a.a)(t))})),e.card.showCardToolbar(e.cardRoot,t.clientX)})),this.cardRoot.on("mouseleave",(function(){r=!0,window.setTimeout((function(){r&&e.card.hideCardToolbar(e.cardRoot)}),300)})),n.hide()}},{key:"renderEditMode",value:function(){var e=this;this.embedToolbar=function(){return e.getToolbarConfig()},this.card.setToolbar({cardRoot:this.cardRoot,engine:this.engine,component:this})}},{key:"render",value:function(e,t){this.locale=this.engine?this.engine.locale.file:this.contentView.locale.file,this.maxWidth=this.getMaxWidth(),t=t||{},this.value=t,t.status=t.status||"done",!t.ext&&t.src&&(t.ext=a.h.getFileExtname(t.src));var n=Object(a.a)(function(e,t){if("error"===e.status){var n=document.createElement("div");return O.a.render(C.a.createElement(Ur,{cardIcon:'<span class="lake-svg-icon lake-svg-icon-error-file"></span>',variableContent:e.message?e.message:t.invalid,fixedContent:e.name?e.name:"",message:e}),n),n}var r='<span class="lake-icon lake-icon-attachment"></span>';"uploading"!==e.status&&"transfering"!==e.status||(r='\n    <i class="lake-anticon lake-anticon-loading">\n      <svg viewBox="0 0 1024 1024" class="lake-anticon-spin" data-icon="loading" width="1em" height="1em" fill="currentColor" aria-hidden="true">\n        <path d="M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"></path>\n      </svg>\n    </i>\n    ');var i="",o=e.size&&a.h.getFileSize(e.size);o&&(i='\n    <span class="lake-file-size">('.concat(aa(o),")</span>\n    "));var c="";return"uploading"===e.status?c='<span data-role="percent">'.concat(e.progress&&void 0!==e.progress.percent?aa(e.progress.percent)+"%":"","</span> &nbsp;"):"transfering"===e.status&&(c="<span></span> &nbsp;"),'\n  <span class="lake-file lake-file-'.concat(aa(e.status),'">\n    <span class="lake-file-icon">').concat(r,"</span>\n    ").concat(c,'\n    <span class="lake-file-title">').concat(aa(e.name),"</span>").concat(i,"\n  </span>\n  ")}(t,this.locale));!this.state.readonly&&n.attr("draggable",!0),e.append(n),this.updateMaxWidth(),window.removeEventListener("resize",this.onWindowResize),window.addEventListener("resize",this.onWindowResize),this.engine?this.renderEditMode():this.renderViewMode()}}]),n}();function ca(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function la(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ca(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ca(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sa(e){return be.a.deflate(JSON.stringify({body:[{id:"4a749c6b",html:e.defaultRootText,type:"mindmap",children:[{id:"8308b1b9",html:e.newNode,treeEdge:{stroke:"#A287E1"}},{id:"06492f3c",html:e.newNode,treeEdge:{stroke:"#E48484"}},{id:"fc4c524c",html:e.newNode,treeEdge:{stroke:"#69B1E4"}}]}]}),{to:"string"})}y()(oa,"type","inline"),y()(oa,"selectStyleType","background"),y()(oa,"uid",!0);var ua={initialize:function(){var e=this;this.command.add("mindmap",{sideEffect:!0,execute:function(){var t={diagramData:sa(e.locale.mindmap)},n=e.change.insertCard("mindmap",la(la({},t),{},{margin:!0})),r=e.card.getComponent(n);r.onFirstRendering=function(){var e=r.diagram;r.diagram.selector.select(e.getCells().find((function(e){return e.isRoot})))}}})}};var da=ve.b.exportData,fa=ve.c.LinkEditor,pa=ve.c.ZoomTool,ha=function(e){f()(n,Ut);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o()(this,n),(e=t.call(this)).zoomStep=.1,e.currentZoom=1,e.minHeight=460,e.plugins=[],e.head={},e.scrollBarSize=18,e.updateToolbarState=ne()((function(){e.engine.toolbar.updateState()}),16),e.isModelChange=!0,Object.assign(u()(e),r),e}return l()(n,[{key:"getChangeDataCommandNames",value:function(){}},{key:"embedToolbar",value:function(){var e=this,t=ee.ua.mobile?[{type:"copy"},{type:"delete"}]:[{type:"dnd"},{type:"maximize"},{type:"separator"},{type:"copy"},{type:"copyCardLink",onClick:function(){return e.copyCardEmbedLink()}},{type:"button",name:"download",iconName:"download",title:this.locale.downloadImage,onClick:function(){e.diagram.exporter.download("jpg")}},{type:"separator"}].concat(ge()(this.getMoreEmbedToolbarConfig()));return this.state.readonly&&(t=[{type:"maximize"},{type:"copyCardLink",onClick:function(){return e.copyCardEmbedLink()}},{type:"button",name:"download",iconName:"download",title:this.locale.downloadImage,onClick:function(){e.diagram.exporter.download("jpg")}}]),t}},{key:"activate",value:function(){var e=this;this.engine&&(this.setTopToolbar(),this.showRisizeController(),this.container.css("border","1px solid #D9D9D9"),this.showProperties(),this.hideMask(),setTimeout((function(){e.diagram.viewportContainer.contains(document.activeElement)||e.diagram&&e.diagram.focus()}),16))}},{key:"unactivate",value:function(){!1===this.state.activated||this.destroyed||this.engine&&(this.container.css("border","1px solid rgba(0,0,0,0)"),this.restoreSidebar(),this.hideProperties(),this.engine.toolbar.restore(),this.hideRisizeController())}},{key:"restoreSidebar",value:function(){this.engine&&this.isSetPropertiesSidebar&&(this.engine.sidebar.restore("diagram"),this.isSetPropertiesSidebar=!1)}},{key:"showZoomTool",value:function(){this.zoomContainer&&this.zoomContainer.show()}},{key:"hideZoomTool",value:function(){this.zoomContainer&&this.zoomContainer.hide()}},{key:"createZoomController",value:function(){var e=this,t=this.scrollWrapper,n=this.container;t=Object(a.a)(t);var r=Object(a.a)("<div></div>");t.append(r),this.zoomContainer=r,this.renderZoomController(),this.hideZoomTool();var i=!1;n.on("click",(function(){i||(e.showZoomTool(),i=!0,e.container.css("border","1px solid #D9D9D9"))})),this.bindEvent(Object(a.a)(window),"click",(function(t){!i||n[0].contains(t.target)||n[0]===t.target||t.target.closest(".lake-toolbar")||e.engine&&e.state.activated||(e.hideZoomTool(),i=!1,e.container.css("border","1px solid rgba(0,0,0,0)"))}))}},{key:"getPropertiesActivated",value:function(){return this.propertiesContainer&&this.container[0].contains(this.propertiesContainer)}},{key:"showProperties",value:function(){this.engine&&this.propertiesContainer&&(this.state.maximize?this.showMaximizeProperties():(this.restoreSidebar(),this.showDocEmbedProperties()),this.isPropertiesShow=!0)}},{key:"hideProperties",value:function(){this.engine&&this.propertiesContainer&&(this.state.maximize?Object(a.a)(this.propertiesContainer).remove():this.restoreSidebar(),this.isPropertiesShow=!1)}},{key:"showMaximizeProperties",value:function(){this.propertiesContainer.style.top="".concat(this.container.getBoundingClientRect().top,"px"),this.propertiesContainer.style.width="".concat(286,"px"),this.propertiesContainer.style["z-index"]="1033",document.body.appendChild(this.propertiesContainer)}},{key:"showDocEmbedProperties",value:function(){var e=this;this.propertiesContainer.style.top="0px",this.propertiesContainer.style.width="100%",this.propertiesContainer.style["z-index"]="1",this.engine.sidebar.set({name:"diagram",title:null,className:"lake-diagram-sidebar",onClose:function(){e.hideProperties(),e.updateToolbarState()},data:{element:this.propertiesContainer,preventAppend:function(){return e.state.maximize}}}),this.isSetPropertiesSidebar=!0}},{key:"switchProperties",value:function(){this.propertiesContainer&&(this.isPropertiesShow?this.hideProperties():this.showProperties(),this.changeSize()),this.updateToolbarState()}},{key:"topToolbar",value:function(){var e=this;return[{type:"separator"},{name:"mindmap:properties",title:this.locale.properties,getActive:function(){return e.isPropertiesShow},hotkey:ee.ua.macos?"⌘+I":"Ctrl+I",icon:'<span class="lake-icon lake-icon-properties" />',onClick:function(t){t.stopPropagation(),e.switchProperties()}}]}},{key:"setTopToolbar",value:function(){this.engine&&this.engine.toolbar.set(this.topToolbar())}},{key:"renderZoomController",value:function(){var e=this.zoomContainer,t=this.diagram;O.a.render(C.a.createElement(pa,{diagram:t}),e[0])}},{key:"getWidth",value:function(){return this.propertiesContainer&&document.body.contains(this.propertiesContainer)&&this.state.maximize?this.getContainerWidth()-286:this.getContainerWidth()}},{key:"preventMask",value:function(e){return this.state.maximize||e.target.closest(".lake-toolbar")||e.target.closest(".lake-diagram-panel-body")}},{key:"getHeight",value:function(){var e=this.value;return this.state.maximize?this.getContainerHeight():e.height||this.minHeight}},{key:"changeSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getWidth(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getHeight(),n=this.diagram,r=this.scrollWrapper,a=this.scrollBarSize;if(!n.destroyed&&e&&t){r.style.width="".concat(e,"px"),r.style.height="".concat(t,"px");var i=this.state.maximize?e:e+a,o=this.state.maximize?t:t+a;n.changeSize(i,o)}}},{key:"createScrollWrapper",value:function(){var e=this.container,t=this.getWidth(),n=this.getHeight(),r=document.createElement("div");r.className="lake-diagram-wrapper lake-diagram-hide-scroll",r.style.width="".concat(t,"px"),r.style.height="".concat(n,"px"),r.style["max-width"]="100%",r.style.position="relative",e[0].appendChild(r),this.scrollWrapper=r}},{key:"processSaveModel",value:function(){}},{key:"saveValue",value:function(){var e=this.diagram;this.setValue({viewportSetting:e.viewport.toObject(),diagramData:be.a.deflate(JSON.stringify(da(e)),{to:"string"})},!0)}},{key:"renderProperties",value:function(){var e=this.Properties,t=this.diagram,n=document.createElement("div");n.dataset.lake_prevent_click_unselect=!0,n.className="lake-editor-card-diagram-properties-container lake-prevent-card-activated",n.style.cursor="default",n.style.position="absolute",n.style.top="0px",n.style.right="0",n.style.bottom="0",n.style.width="".concat(286,"px"),n.style.overflow="auto",this.propertiesContainer=n,O.a.render(C.a.createElement(e,{diagram:t,domContainer:n}),n)}},{key:"renderLinkEditor",value:function(){var e=this.diagram,t=document.createElement("div");this.linkEditorContainer=t,t.className="lake-prevent-card-activated",document.body.appendChild(t),O.a.render(C.a.createElement(fa,{diagram:e}),t)}},{key:"renderContextMenu",value:function(){}},{key:"renderInner",value:function(){var e=this,t=this.diagram,n=this.value;t.import(n.diagramData),this.renderContextMenu(),this.state.readonly?n.viewportSetting&&n.viewportSetting.width?t.viewport.setWYSIWYG(n.viewportSetting):t.viewport.autoFit():(this.renderProperties(),this.renderLinkEditor(),n.viewportSetting?t.viewport.set(n.viewportSetting):t.viewport.focusFirstRoot(),t.on("afterselectionchange",(function(){e.updateToolbarState()})),t.contentEditor.on("selectionchange",(function(){e.updateToolbarState()})),t.on("keydown",(function(t){Object(a.t)("mod+i",t)&&e.switchProperties()})),t.on("aftercommandexecute",ne()((function(n){n.isModelChange&&!t.destroyed&&e.saveValue()}),300)),t.on("aftercommandexecute",(function(t){t.isModelChange&&(e.isModelChange=!0)})),this.bindEvent(this.engine.asyncEvent,"save:before",he()(fe.a.mark((function n(){var a,i;return fe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.cardRoot.attr("data-cell_count",t.getCells().length),e.saveValue(),!e.isModelChange){n.next=12;break}return e.isModelChange=!1,n.next=6,t.exporter.blob();case 6:if(a=n.sent){n.next=9;break}return n.abrupt("return");case 9:return(i=new FormData).append("file",a,"lake_card_mindmap.jpeg"),n.abrupt("return",Object(r.ajax)({method:"post",url:e.engine.options.image.uploadAction,data:i,success:function(n){var r=n.data.url,a=t.getCells().map((function(e){return e.textAreaElement&&e.textAreaElement.htmlContainer.innerText})).join(" ");e.setValue({src:r,search:a},!1)}}).promise);case 12:case"end":return n.stop()}}),n)})))),this.bindEvent(Object(a.a)(window),"resize",(function(){e.changeSize()}))),this.onFirstRendering&&this.onFirstRendering()}},{key:"createDiagram",value:function(){var e=this,t=this.plugins,n=this.scrollBarSize,r=this.scrollWrapper,a=this.head,i=this.getWidth(),o=this.getHeight(),c=new ve.e({container:r,width:i+n,height:o+n,head:a,plugins:t,paper:{size:"auto"},mode:this.state.readonly?"read":"edit"});return this.diagram=c,we()(r,{loaded:function(){e.renderInner()}}).observe(),c}},{key:"createResizeController",value:function(){var e=this,t=this.scrollWrapper;x()(g()(n.prototype),"createResizeController",this).call(this,t,{onResizing:function(t){var n=e.getWidth();e.changeSize(n,t)}})}},{key:"focusMainRoot",value:function(){this.diagram.viewport.autoFit();var e=this.diagram.getCells().filter((function(e){return e.isRoot}))[0];e&&(this.diagram.viewport.focus([e.x+e.width/2,e.y+e.height/2]),this.diagram.viewport.setViewport(1))}},{key:"maximize",value:function(){var e=this.diagram;x()(g()(n.prototype),"maximize",this).call(this),this.restoreViewportSetting=e.viewport.toObject(),this.showProperties(),this.changeSize(),this.hideRisizeController(),this.container.css({overflow:"hidden"}),this.maximizeViewportSetting?this.diagram.viewport.set(this.maximizeViewportSetting):this.focusMainRoot(),this.renderZoomController(),this.setTopToolbar()}},{key:"restore",value:function(){var e=this.diagram;x()(g()(n.prototype),"restore",this).call(this),this.maximizeViewportSetting=e.viewport.toObject(),this.showProperties(),this.changeSize(),this.container.css({overflow:"initial"}),this.restoreViewportSetting?this.diagram.viewport.set(this.restoreViewportSetting):this.focusMainRoot(),this.renderZoomController(),this.state.readonly||this.showRisizeController(),this.setTopToolbar()}},{key:"destroyDiagram",value:function(){var e=this.diagram;e&&e.destroy()}},{key:"normalizeValue",value:function(){var e=this.value;if(e.diagramData&&"string"==typeof e.diagramData){var t=be.a.inflate(e.diagramData,{to:"string"});e.diagramData=JSON.parse(t)}}},{key:"render",value:function(){this.normalizeValue(),this.createScrollWrapper(),this.createDiagram(),this.createZoomController(),this.createResizeController(),this.createMask(),this.toggleMargin(),this.container.css("border","1px solid rgba(0,0,0,0)")}},{key:"destroy",value:function(){this.destroyDiagram(),x()(g()(n.prototype),"destroy",this).call(this),this.restoreSidebar(),this.engine&&this.engine.toolbar.restore()}}]),n}();y()(ha,"type","block"),y()(ha,"uid",!0);var ma=ve.h.Mindmap,ga=ve.a.deepTreeTraversal,va=ve.c.Properties,ya=ve.c.Dropdown,ba=ve.c.Note,ka=ve.c.ContextMenu,wa=ve.b.uploadMindmapImage,xa=ve.b.onBeforeSave,_a=ve.b.mindmapInsertLine,Ca=ve.b.collapseActive,Ea=ve.b.enableCollapseExpand,Oa=ve.b.executeCollapseExpand,Sa=function(e){f()(n,ha);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e,a){var i;if(o()(this,n),(i=t.call(this,{plugins:[ma],head:{type:"mindmap"},Properties:va.Mindmap})).locale=(e||a).locale.mindmap,e){var c=e.options.docId||"unknow",l=new r.Uploader({docId:c,imageAction:e.options.image.uploadAction});i.uploader=l,i.bindEvent(e.asyncEvent,"save:before",(function(){i.onBeforeSave()}))}return i}return l()(n,[{key:"renderContextMenu",value:function(){var e=this.diagram,t=this.container,n=document.createElement("div");this.contextMenuContainer=n,n.className="lake-prevent-card-activated",t.append(n),O.a.render(C.a.createElement(ka.Mind,{diagram:e}),n)}},{key:"renderNote",value:function(){var e=this.diagram,t=this.container,n=document.createElement("div");t.append(n),this.noteContainer=n,this.state.readonly?O.a.render(C.a.createElement(ba.Reader,{diagram:e}),n):O.a.render(C.a.createElement(ba.Editor,{diagram:e}),n)}},{key:"renderInner",value:function(){this.renderNote(),x()(g()(n.prototype),"renderInner",this).call(this)}},{key:"onBeforeSave",value:function(){return xa(this,this.uploader)}},{key:"createDiagram",value:function(){var e=this;x()(g()(n.prototype),"createDiagram",this).call(this),this.diagram.on("importimage",(function(t){var n=e.uploader,r=e.diagram;wa({file:t.files[0],uploader:n,diagram:r,from:"clipboard"})}))}},{key:"topToolbar",value:function(){var e=this,t=this.engine,r=this.locale,a=this.diagram,i=x()(g()(n.prototype),"topToolbar",this).call(this);return[{name:"save",title:r.save,hotkey:ee.ua.macos?"⌘+S":"Ctrl+S",icon:'<span class="lake-icon lake-icon-save" />',onClick:function(e){e.stopPropagation(),t.command.execute("save")}},{name:"mindmap:undo",title:r.undo,hotkey:ee.ua.macos?"⌘+Z":"Ctrl+Z",icon:'<span class="lake-icon lake-icon-undo" />',getDisabled:function(){return!a.command.enable("Undo")},onClick:function(e){e.stopPropagation(),a.command.execute("Undo")}},{name:"mindmap:redo",title:r.redo,hotkey:ee.ua.macos?"⌘+Shift+Z":"Ctrl+Shift+Z",icon:'<span class="lake-icon lake-icon-redo" />',getDisabled:function(){return!a.command.enable("Redo")},onClick:function(e){e.stopPropagation(),a.command.execute("Redo")}},{type:"separator"},{name:"mindmap:beginInsertRoot",title:r.insertRoot,icon:'<span class="lake-icon lake-icon-insert-root" />',onClick:function(e){e.stopPropagation(),a.selector.clear(),a.command.execute("MindmapBeginInsertRoot")}},{name:"mindmap:append",title:r.insertSibling,hotkey:"Enter",icon:'<span class="lake-icon lake-icon-insert-sibling" />',getDisabled:function(){return!a.command.enable("MindmapAppendSibling")},onClick:function(e){e.stopPropagation(),a.command.execute("MindmapAppendSibling")}},{name:"mindmap:appendChild",title:r.insertChild,hotkey:"Tab",icon:'<span class="lake-icon lake-icon-insert-child" />',getDisabled:function(){return!a.command.enable("MindmapAppendChild")},onClick:function(e){e.stopPropagation(),a.command.execute("MindmapAppendChild")}},{type:"separator"},{name:"mindmap:insertLine",type:"custom",hotkey:ee.ua.macos?"⌘+L":"Ctrl+L",CustomButton:C.a.createElement(ya,{title:r.line,mode:"button",defaultKey:"curve-arrow",menuClassName:"lake-prevent-card-activated lake-diagram-dropdown-menu",data:[{key:"curve",icon:"line-curve"},{key:"curve-arrow",icon:"line-curve-arrow"}],onClick:function(e){var t=e.key;_a(a,t)},onSelect:function(e){var t=e.key;_a(a,t)}})},{name:"mindmap:insertNote",title:"备注",icon:'<span class="lake-icon lake-icon-diagram-toolbar-note" />',getDisabled:function(){return!a.command.enable("MindmapOpenNote")},onClick:function(){a.command.execute("MindmapOpenNote")}},{name:"mindmap:image",title:r.attachImage,type:"upload",icon:'<span class="lake-icon lake-icon-image" />',getDisabled:function(){return!a.command.enable("MindmapAttachImage")},uploader:{post:function(t,n){var r=e.uploader,a=e.diagram;wa({file:n[0],uploader:r,diagram:a,from:"button"})}}},{name:"mindmap:createLink",title:r.createLink,hotkey:ee.ua.macos?"⌘+K":"Ctrl+K",icon:'<span class="lake-icon lake-icon-link" />',getDisabled:function(){return!a.command.enable("MindmapCreateLink")},onClick:function(e){e.stopPropagation(),a.command.execute("MindmapCreateLink")}},{type:"separator"},{name:"mindmap:collapse-expand",title:r.collapse,hotkey:ee.ua.macos?"⌘+/":"Ctrl+/",icon:'<span class="lake-icon lake-icon-collapse-node" />',getActive:function(){return Ca(a)},getDisabled:function(){return!Ea(a)},onClick:function(e){e.stopPropagation(),Oa(a)}}].concat(i)}},{key:"preventMask",value:function(e){return x()(g()(n.prototype),"preventMask",this).call(this,e)||e.target.closest(".lake-diagram-dropdown-menu")||e.target.closest(".lake-prevent-card-activated")}},{key:"normalizeValue",value:function(){var e=this.value;if(e.width&&(e.width=Number(e.width)),e.height&&(e.height=Number(e.height)),e.graphData&&e.graphData.roots&&(e.graphData.roots.forEach((function(e){e.type="mindmap",ga(e,(function(t,n){n!==e&&delete t.side,t.label&&(t.html="".concat(t.label)),delete t.width,delete t.height,delete t.label}))})),e.diagramData={head:{version:"1.0.0"},body:e.graphData.roots},delete e.graphData),e.diagramData||(e.diagramData=sa(this.locale)),e.diagramData&&"string"==typeof e.diagramData){var t=be.a.inflate(e.diagramData,{to:"string"});e.diagramData=JSON.parse(t)}!e.diagramData.head||"1.0.0"!==e.diagramData.head.version&&"1.0.0"!==e.diagramData.head.verstion||"2.0.0"!==ve.i||e.diagramData.body.forEach((function(e){e.border={fill:"#577DF9"},e.rainbow=!1,e.tapered=!0,ga(e,(function(e){"left"===e.side&&(e.layout={quadrant:2})}))}))}}]),n}();function Ra(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Da(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ra(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ra(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Aa=ve.h.Flowchart,Ta=ve.c.ShapeOverlay,Pa=ve.c.Dropdown,ja=ve.c.Properties,Ma=function(e){f()(n,ha);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e,r){var a;return o()(this,n),(a=t.call(this,{plugins:[Aa],head:{type:"flowchart"},Properties:ja.Flowchart})).locale=(e||r).locale.flowchart,a}return l()(n,[{key:"topToolbar",value:function(){var e=this.engine,t=this.locale,r=this.diagram,a=x()(g()(n.prototype),"topToolbar",this).call(this);return[{name:"save",title:t.save,hotkey:ee.ua.macos?"⌘+S":"Ctrl+S",icon:'<span class="lake-icon lake-icon-save" />',onClick:function(t){t.stopPropagation(),e.command.execute("save")}},{name:"flowchart:undo",title:t.undo,hotkey:ee.ua.macos?"⌘+Z":"Ctrl+Z",icon:'<span class="lake-icon lake-icon-undo" />',getDisabled:function(){return!r.destroyed&&!r.command.enable("Undo")},onClick:function(e){e.stopPropagation(),r.command.execute("Undo")}},{name:"flowchart:redo",title:t.redo,hotkey:ee.ua.macos?"⌘+Shift+Z":"Ctrl+Shift+Z",icon:'<span class="lake-icon lake-icon-redo" />',getDisabled:function(){return!r.destroyed&&!r.command.enable("Redo")},onClick:function(e){e.stopPropagation(),r.command.execute("Redo")}},{type:"separator"},{name:"flowchart:insertText",title:t.insertText,icon:'<span class="lake-icon lake-icon-insert-text" />',onClick:function(e){e.stopPropagation(),r.command.execute("FlowchartBeginInsertText")}},{name:"flowchart:insertShape",type:"custom",CustomButton:C.a.createElement(Pa,{diagram:r,icon:"insert-shape",title:t.insertShape,overlay:C.a.createElement(Ta,{className:"lake-prevent-card-activated lake-diagram-shape-overlay",onSelect:function(e){var t=e.key;r.command.execute("FlowchartBeginInsertShape",{shape:t})}})})},{name:"flowchart:insertEdge",type:"custom",CustomButton:C.a.createElement(Pa,{title:t.insertShape,mode:"button",defaultKey:"elbow-line-arrow",menuClassName:"lake-prevent-card-activated lake-diagram-dropdown-menu",data:[{key:"straight-line",icon:"straight-line"},{key:"straight-line-arrow",icon:"straight-line-arrow"},{key:"elbow-line",icon:"elbow-line"},{key:"elbow-line-arrow",icon:"elbow-line-arrow"}],onClick:function(e){var t=e.key.split("-"),n=_e()(t,3),a=n[0],i=n[2];r.command.execute("FlowchartBeginInsertEdge",{shape:a,marker:i})},onSelect:function(e){var t=e.key.split("-"),n=_e()(t,3),a=n[0],i=n[2];r.settings.flowchart=Da(Da({},r.settings.flowchart),{},{edge:{shape:a,marker:i}}),r.command.execute("FlowchartBeginInsertEdge",{shape:a,marker:i})}})},{name:"flowchart:createLink",title:t.createLink,hotkey:ee.ua.macos?"⌘+K":"Ctrl+K",icon:'<span class="lake-icon lake-icon-link" />',getDisabled:function(){return!r.command.enable("CreateLink")},onClick:function(e){e.stopPropagation(),r.command.execute("CreateLink")}}].concat(a)}},{key:"preventMask",value:function(e){return x()(g()(n.prototype),"preventMask",this).call(this,e)||e.target.closest(".lake-diagram-shape-overlay, .lake-diagram-dropdown-menu")}},{key:"normalizeValue",value:function(){x()(g()(n.prototype),"normalizeValue",this).call(this);var e=this.value.diagramData;function t(t){if(!t)return!1;var n=t.id,r=t.connection;return!(null==n&&null==r||null!=n&&!e.body.find((function(e){return e.id===n})))}if(Array.isArray(e.body))for(var r=e.body,a=r.length-1;a>=0;a--){var i=r[a];"edge"===i.type&&(t(i.source)&&t(i.target)||r.splice(a,1))}}}]),n}(),Na={puml:{sequence:{id:"sequence",name:"时序图 (Sequence)",text:'@startuml\n\nautonumber\n\nactor "用户" as User\nparticipant "浏览器" as Browser\nparticipant "服务端" as Server #orange\n\nactivate User\n\nUser -> Browser: 输入 URL\nactivate Browser\n\nBrowser -> Server: 请求服务器\nactivate Server\n\nServer -> Server: 模板渲染\nnote right of Server: 这是一个注释\n\nServer -> Browser: 返回 HTML\ndeactivate Server\n\nBrowser --\x3e User\n\n@enduml',src:"https://cdn.nlark.com/__puml/b11b6192390c95750c4b71c2580ff529.svg"},"use-case":{id:"use-case",name:"用例图 (Use Case)",text:"@startuml\n\nactor A\nactor B\n\nA -up-> (up)\nA -right-> (center)\nA -down-> (down)\nA -left-> (left)\n\nB -up-> (up)\nB -left-> (center)\nB -right-> (right)\nB -down-> (down)\n\n@enduml",src:"https://lark-assets-prod.oss-cn-hangzhou.aliyuncs.com/__puml/a7908b49c22b05104624bebc463cd25d.svg"},class:{id:"class",name:"类图 (Class)",text:"@startuml\n\nclass Car {\n  color\n  model\n  +start()\n  #run()\n  #stop()\n}\n\nCar <|- Bus\nCar *-down- Tire\nCar *-down- Engine\nBus o-down- Driver\n\n@enduml",src:"https://lark-assets-prod.oss-cn-hangzhou.aliyuncs.com/__puml/e9cf4eba3cdaf0cf1bc68065406d9d43.svg"},flowchart:{id:"flowchart",name:"流程图 (Flow)",text:"@startuml\n\nstart\n\n:step 1;\n\nif (try) then (true)\n  :step 2;\n  :step 3;\nelse (false)\n  :error;\n  end\nendif\n\nstop\n\n@enduml",src:"https://lark-assets-prod.oss-cn-hangzhou.aliyuncs.com/__puml/48a1408972f20bc1f4837aa807254692.svg"},activity:{id:"activity",name:"活动图 (Activity)",text:"@startuml\n\n|A Section|\nstart\n:step1;\n|#AntiqueWhite|B Section|\n:step2;\n:step3;\n|A Section|\n:step4;\n|B Section|\n:step5;\nstop\n\n@enduml",src:"https://lark-assets-prod.oss-cn-hangzhou.aliyuncs.com/__puml/2aa76dcc256f08335083bd039b5b4e49.svg"},component:{id:"component",name:"组件图 (Component)",text:"@startuml\n\nDataAccess - [First Component]\n[First Component] ..> HTTP : use\n\n@enduml",src:"https://lark-assets-prod.oss-cn-hangzhou.aliyuncs.com/__puml/6b9de2b03b69402b018655ed491fcd34.svg"},state:{id:"state",name:"状态图 (State)",text:"@startuml\n\n[*] --\x3e State1\nState1 --\x3e [*]\nState1 : this is a string\nState1 : this is another string\n\nState1 -> State2\nState2 --\x3e [*]\n\n@enduml",src:"https://lark-assets-prod.oss-cn-hangzhou.aliyuncs.com/__puml/0d1c26fb399ed9669a2e1a29e98b4de4.svg"},object:{id:"object",name:"对象图 (Object)",text:"@startuml\n\nobject Car\nobject Bus\nobject Tire\nobject Engine\nobject Driver\n\nCar <|- Bus\nCar *-down- Tire\nCar *-down- Engine\nBus o-down- Driver\n\n@enduml",src:"https://lark-assets-prod.oss-cn-hangzhou.aliyuncs.com/__puml/1af2d7ebc3e554c752289bcce7679cdb.svg"}}},La=function(e){return Na[e]||null},Ia={TEXT_DIAGRAM_TYPES:{PUML:"puml",MERMAID:"mermaid",GRAPHVIZ:"graphviz",FLOWCHART:"flowchart"},TEXT_DIAGRAMS:[{type:"puml",name:"PlantUML"},{type:"mermaid",name:"Mermaid"},{type:"flowchart",name:"Flowchart"},{type:"graphviz",name:"Graphviz"}],TEXT_DIAGRAM_GUIDES:{puml:"https://www.yuque.com/yuque/help/editor-puml",flowchart:"https://www.yuque.com/yuque/help/flowchart",graphviz:"https://www.yuque.com/yuque/help/graphviz",mermaid:"https://www.yuque.com/yuque/help/mermaid"},TEXT_DIAGRAM_SYNTAX:{puml:"plantuml"},EDITOR_MODE:{CODE:"code",PREVIEW:"preview"},EDITOR_LAYOUT:{DEFAULT:"default",TWO_COLUMN:"two-column"}},za={};za.Preview=function(){return C.a.createElement("svg",{className:"preview-icon",width:"14px",height:"14px",viewBox:"0 0 14 14",version:"1.1"},C.a.createElement("g",{id:"Editor-Interface",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},C.a.createElement("g",{id:"16-PlantUML---编辑",transform:"translate(-1001.000000, -372.000000)",fill:"#25B864",fillRule:"nonzero"},C.a.createElement("g",{id:"Group-4",transform:"translate(1001.000000, 368.000000)"},C.a.createElement("path",{d:"M7,4 C3.134375,4 0,7.134375 0,11 C0,14.865625 3.134375,18 7,18 C10.865625,18 14,14.865625 14,11 C14,7.134375 10.865625,4 7,4 Z M9.2515625,11.1078125 L5.8390625,13.590625 C5.8171875,13.60625 5.7921875,13.6140625 5.765625,13.6140625 C5.696875,13.6140625 5.640625,13.5578125 5.640625,13.4890625 L5.640625,8.5265625 C5.640625,8.5 5.6484375,8.475 5.6640625,8.453125 C5.7046875,8.396875 5.7828125,8.384375 5.8390625,8.425 L9.2515625,10.90625 C9.2625,10.9140625 9.271875,10.9234375 9.2796875,10.934375 C9.3203125,10.9890625 9.3078125,11.0671875 9.2515625,11.1078125 Z",id:"Shape"})))))};var Ba=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),r=t.call(this,e),y()(u()(r),"onImgLoad",(function(){"function"==typeof r.props.onLoad&&r.props.onLoad()})),r.state={url:e.url,error:null},r}return l()(n,[{key:"componentDidMount",value:function(){!this.state.url&&this.props.code&&this.genImg()}},{key:"componentDidUpdate",value:function(e){this.props.code!==e.code&&this.genImg()}},{key:"genImg",value:function(){var e=this;Yt(this.props.type,this.props.code,this.props.origin).then((function(t){var n;t.success?e.setState({url:(n=t.svg,"data:image/svg+xml;utf8,".concat(encodeURIComponent(n))),error:null}):e.setState({error:t.message})})).catch((function(t){e.setState({error:t.message})}))}},{key:"render",value:function(){var e,t=this.props,n=t.type,r=t.className,a=void 0===r?"":r,i=this.state,o=i.url,c=i.error;return o=this.props.onBeforeRenderImage(o),e=null!==c?C.a.createElement("pre",null,c):o?C.a.createElement("img",{src:o,onLoad:this.onImgLoad,onDragStart:function(e){e.preventDefault(),e.stopPropagation()}}):C.a.createElement("span",{className:"lake-icon lake-icon-loading"}),C.a.createElement("div",{className:"lake-text-diagram-viewer lake-text-diagram-".concat(n," ").concat(a)},e)}}]),n}(C.a.PureComponent);Ba.propTypes={className:R.a.string,type:R.a.string.isRequired,code:R.a.string.isRequired,url:R.a.string,onBeforeRenderImage:R.a.func.isRequired,onLoad:R.a.func},vt(".lake-card-block-max .lake-text-diagram {\n  height: 100%;\n  background: #fff;\n}\n.lake-card-block-max .lake-text-diagram .diagram-preview {\n  display: none;\n}\n.lake-text-diagram-stage {\n  position: relative;\n  border-radius: 2px;\n  font-size: 14px;\n  border: 1px solid #e8e8e8;\n}\n.lake-text-diagram-stage ul.ant-dropdown-menu {\n  list-style: none;\n  margin: 0;\n}\n.lake-text-diagram-stage ul.ant-dropdown-menu li {\n  margin: 0;\n}\n.lake-text-diagram-nav {\n  border-bottom: 1px solid #e8e8e8;\n  line-height: 24px;\n  height: 32px;\n  padding: 4px 12px;\n  font-size: 14px;\n  color: #595959;\n}\n.lake-text-diagram-nav a,\n.lake-text-diagram-nav a:hover {\n  color: #595959;\n}\n.lake-text-diagram-nav .diagram-name {\n  font-weight: bold;\n}\n.lake-text-diagram-nav .diagram-template-selector,\n.lake-text-diagram-nav .diagram-help {\n  margin-right: 24px;\n}\n.lake-text-diagram-nav .lake-diagram-select {\n  position: absolute;\n}\n.lake-text-diagram-nav .diagram-actions {\n  float: right;\n}\n.lake-text-diagram-nav .diagram-actions .diagram-preview {\n  background: none;\n  border: 1px solid #fff;\n  height: 24px;\n  cursor: pointer;\n  line-height: 22px;\n}\n.lake-text-diagram-nav .diagram-actions .diagram-preview .anticon {\n  margin-right: 4px;\n}\n.lake-text-diagram-nav .diagram-actions .diagram-preview:focus {\n  outline: none;\n}\n.lake-text-diagram-nav .diagram-actions .diagram-preview-active {\n  border: 1px solid #e8e8e8;\n  border-radius: 2px;\n  background: #f5f5f5;\n}\n.lake-text-diagram-editor {\n  overflow: auto;\n  font-size: 12px;\n  background-color: #f9f9f9;\n}\n.lake-text-diagram-layout-default .lake-text-diagram-editor-wrap {\n  position: relative;\n  max-height: 480px;\n}\n.lake-text-diagram-layout-default .lake-text-diagram-preview {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  overflow: auto;\n  top: 0;\n  background-color: #fff;\n  z-index: 10;\n}\n.lake-text-diagram-layout-default .lake-text-diagram-editor {\n  /* 文本图默认 3 行 */\n  min-height: 80px;\n  /* 最大 480 像素，保证多数图不需要滚动条即可预览 */\n  max-height: 480px;\n}\n.lake-text-diagram-preview {\n  position: relative;\n}\n.lake-text-diagram-preview pre {\n  margin: 16px;\n}\n.lake-text-diagram-preview .lake-icon-loading {\n  width: 36px;\n  height: 36px;\n  position: absolute;\n  top: calc(50% - 22px);\n  left: 50%;\n  text-align: center;\n  color: #666;\n  font-size: 36px;\n  z-index: 1;\n  visibility: visible;\n  opacity: 1;\n  transition: all 0.3s linear;\n  animation: loading 0.8s linear infinite;\n}\n.lake-text-diagram-layout-two-column {\n  height: 100%;\n  border-radius: 0;\n  border: 0;\n  border-bottom: 1px solid #e8e8e8;\n}\n.lake-text-diagram-layout-two-column .lake-text-diagram-nav {\n  position: absolute;\n  padding-left: 18px;\n  top: 0;\n  width: 100%;\n}\n.lake-text-diagram-layout-two-column .lake-text-diagram-editor-wrap {\n  width: 100%;\n  height: 100%;\n  padding-top: 33px;\n  overflow: auto;\n  display: flex;\n}\n.lake-text-diagram-layout-two-column .lake-text-diagram-editor {\n  height: 100% !important;\n  max-height: unset;\n  width: 50%;\n}\n.lake-text-diagram-layout-two-column .lake-text-diagram-preview {\n  height: 100%;\n  width: 50%;\n  overflow: auto;\n  border-left: 1px solid #e8e8e8;\n  padding: 12px;\n}\n");var Fa=ue()("lake:text-diagram"),Va=Ia.EDITOR_MODE,Ua=Ia.EDITOR_LAYOUT,qa=Ia.TEXT_DIAGRAM_TYPES,Ha=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),r=t.call(this,e),y()(u()(r),"focusCM",(function(){r.instance.focus()})),y()(u()(r),"switchType",(function(e){if(e!==r.state.type){var t=r.getCodeMirrorMode(e);Fa("switch diagram type",{type:e,syntax:t}),r.setState({type:e,mode:Va.CODE,codeForPreview:null}),r.instance.codeMirror.setOption("mode",t),r.props.onDiagramTypeChange(e)}})),y()(u()(r),"switchLayout",(function(e){r.setState({layout:e,mode:Va.CODE}),r.instance&&r.instance.focus(),e===Ua.TWO_COLUMN&&(r.bodyRef.current.style.height="100%")})),y()(u()(r),"switchTemplate",(function(e){var t=La(r.state.type);if(t){var n=t[e];r.instance.codeMirror.setValue(n.text)}})),y()(u()(r),"switchView",(function(e){var t=r.instance.getValue();r.setState({mode:e,codeForPreview:e===Va.PREVIEW?t:null},(function(){e===Va.CODE&&r.fixEditorBodySize()}))})),y()(u()(r),"doPreview",(function(){var e=r.instance.getValue();Fa("preview",e),r.setState({codeForPreview:e})})),y()(u()(r),"getHelpUrl",(function(){return Ia.TEXT_DIAGRAM_GUIDES[r.state.type]})),y()(u()(r),"getRootDom",(function(){return r.rootRef.current})),y()(u()(r),"onPreviewDone",(function(){r.fixEditorBodySize()})),y()(u()(r),"handlePreviewButtonClick",(function(){var e=r.state,t=e.mode;e.layout!==Ua.TWO_COLUMN?t!==Va.PREVIEW?t===Va.CODE&&r.switchView(Va.PREVIEW):r.switchView(Va.CODE):r.doPreview()})),y()(u()(r),"needShowPreviewPanel",(function(){return r.state.layout===Ua.TWO_COLUMN||r.state.mode===Va.PREVIEW})),y()(u()(r),"renderPreview",(function(){var e=r.state,t=e.mode,n=e.layout,a=e.codeForPreview;return n===Ua.DEFAULT&&t===Va.CODE?null:a?C.a.createElement(Ba,{type:r.state.type,code:a,origin:r.props.origin,onBeforeRenderImage:r.props.onBeforeRenderImage,onLoad:r.onPreviewDone}):null})),y()(u()(r),"renderDiagramSelect",(function(){return C.a.createElement(j.a,{className:"lake-diagram-select",defaultValue:r.props.type,size:"small",style:{width:128},getPopupContainer:r.getRootDom,onSelect:function(e){r.switchType(e)}},Ia.TEXT_DIAGRAMS.map((function(e){return C.a.createElement(j.a.Option,{name:e.name.toLowerCase(),value:e.type,key:e.name},e.name)})))})),r.state={mode:Va.CODE,type:e.type||qa.PUML,layout:Ua.DEFAULT,codeForPreview:null},r.rootRef=C.a.createRef(),r.editorRef=C.a.createRef(),r.bodyRef=C.a.createRef(),r.templates=La(e.type),r.instance=null,r}return l()(n,[{key:"componentDidMount",value:function(){this.initEditor()}},{key:"initEditor",value:function(){var e=this,t=this.editorRef.current,n=this.props.type,r=this.getOptions(n),a=this.props.isMaximize,i=ne()((function(){e.doPreview()}),300),o=Ue.a.fromTextArea(t,r);o.on("change",(function(){var t=o.getValue();"function"==typeof e.props.onChange&&e.props.onChange(t),a()&&i()})),o.on("focus",(function(){"function"==typeof e.props.onFocus&&e.props.onFocus()})),o.on("blur",(function(){if("function"==typeof e.props.onBlur){var t=o.getValue();e.props.onBlur(t)}})),this.instance={codeMirror:o,switchLayout:this.switchLayout,focus:function(){o.focus()},getValue:function(){return o.getValue()},doPreview:function(){e.doPreview()}},"function"==typeof this.props.onLoad&&this.props.onLoad({editor:this.instance})}},{key:"getCodeMirrorMode",value:function(e){return Ia.TEXT_DIAGRAM_SYNTAX[e]||"simplemode"}},{key:"getDiagramName",value:function(e){var t=Ia.TEXT_DIAGRAMS.find((function(t){return t.type===e}));return t?t.name:""}},{key:"getOptions",value:function(e){return{tabSize:2,mode:this.getCodeMirrorMode(e),lineNumbers:!0,lineWrapping:!1,indentWithTabs:!0,styleActiveLine:!1,matchBrackets:!0,autofocus:!1,dragDrop:!1,readOnly:!1,scrollbarStyle:"null",viewportMargin:1/0}}},{key:"fixEditorBodySize",value:function(){var e=this.state,t=e.mode;if(e.layout===Ua.DEFAULT){var n=this.bodyRef.current,r=null;t===Va.PREVIEW?(r=n.querySelector(".lake-text-diagram-preview").scrollHeight,n.style.height=r+"px"):n.style.height="auto"}}},{key:"renderTemplates",value:function(){var e=this,t=this.props.locale,n=La(this.state.type);return n?C.a.createElement(M.a,{trigger:["click"],getPopupContainer:this.getRootDom,disabled:this.state.mode!==Va.CODE,placement:"bottomLeft",overlay:C.a.createElement(N.a,{onClick:function(t){var n=t.key;t.domEvent.stopPropagation(),e.switchTemplate(n)}},Object.values(n).map((function(e){return C.a.createElement(N.a.Item,{key:e.id},e.name)})))},C.a.createElement("a",{className:"diagram-template-selector"},t.template," ",C.a.createElement(Ce.a,null))):null}},{key:"render",value:function(){var e=this,t=this.props.locale,n=this.state,r=n.mode,i=n.layout;return C.a.createElement("div",{className:le()(["lake-text-diagram-stage","lake-text-diagram-layout-".concat(i)]),onKeyDown:function(t){(t.metaKey||t.ctrlKey)&&80===t.keyCode&&(t.preventDefault(),e.handlePreviewButtonClick())},ref:this.rootRef},C.a.createElement("div",{className:"lake-text-diagram-nav"},this.props.canChangeType?this.renderDiagramSelect():C.a.createElement("span",{className:"diagram-name"},this.getDiagramName(this.props.type)),C.a.createElement("div",{className:"diagram-actions"},this.renderTemplates(),C.a.createElement("a",{className:"diagram-help",href:this.getHelpUrl(),target:"_blank"},t.help),C.a.createElement(D.a,{title:a.u.macos?t.macPreviewTooltip:t.winPreviewTooltip},C.a.createElement("button",{size:"small",className:le()({"diagram-preview":!0,"diagram-preview-active":r===Va.PREVIEW}),onClick:this.handlePreviewButtonClick},C.a.createElement("span",{role:"img",className:"anticon"},C.a.createElement(za.Preview,null)),t.preview)))),C.a.createElement("div",{className:"lake-text-diagram-editor-wrap",ref:this.bodyRef,onClick:this.focusCM},C.a.createElement("div",{className:"lake-text-diagram-editor"},C.a.createElement("textarea",{value:this.props.code,ref:this.editorRef,autoComplete:"off",tabIndex:"1",readOnly:!0})),C.a.createElement("div",{className:"lake-text-diagram-preview",style:{display:this.needShowPreviewPanel()?"block":"none"}},this.renderPreview())))}}]),n}(C.a.PureComponent);Ha.propTypes={canChangeType:R.a.bool.isRequired,type:R.a.oneOf(Object.values(Ia.TEXT_DIAGRAM_TYPES)),code:R.a.string.isRequired,locale:R.a.object.isRequired,onChange:R.a.func,onDiagramTypeChange:R.a.func.isRequired,onBlur:R.a.func.isRequired,onFocus:R.a.func.isRequired,onBeforeRenderImage:R.a.func.isRequired,onLoad:R.a.func,isMaximize:R.a.func,origin:R.a.func};var Wa=ue()("lake:text-diagram"),Ya=Ia.EDITOR_LAYOUT,Ga=Ia.TEXT_DIAGRAM_TYPES,Ka=function(e){f()(n,Ut);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e,r){var a;return o()(this,n),a=t.call(this),y()(u()(a),"focusToCodeEditor",(function(){a.editor&&a.editor.focus()})),y()(u()(a),"onEditorChange",(function(e){e!==a.value.code&&(a.value.code=e,a.value.url=null),a.engine&&a.engine.setUserChanged()})),y()(u()(a),"changeDiagramType",(function(e){a.diagramType=e,a.prevValue={url:null,code:null}})),y()(u()(a),"onEditorBlur",(function(){Wa("editor blur"),a.engine.toolbar.disable(!1),a.saveDiagram()})),y()(u()(a),"onEditorFocus",(function(){Wa("editor focus"),a.engine.toolbar.disable(!0)})),y()(u()(a),"needConvertToImage",(function(){return a.value.code?!a.value.url:a.prevValue.code&&!a.prevValue.url})),y()(u()(a),"saveDiagram",(function(){if(a.value&&null!==a.value.code){var e={code:a.value.code,url:a.value.url,type:a.diagramType};Wa("save diagram",e),a.setValue(e)}})),y()(u()(a),"genImage",(function(e){return Wt(a.diagramType,e,a.getTopEngine().options.previewOrigin).then((function(e){e.url&&(a.value.url=e.url),a.engine.history.hold(),a.saveDiagram(),a.prevValue=a.value}))})),y()(u()(a),"onBeforeSave",(function(){return a.value.code&&!a.value.url?a.genImage(a.value.code):null})),y()(u()(a),"getDiagramType",(function(e){return"diagram"===a.name?e.type||Ga.PUML:a.name})),a.engine=e,a.contentView=r,a.value={url:null,code:null},a.prevValue={url:null,code:null},a.root=null,a.diagramType=null,a.editor=null,a}return l()(n,[{key:"embedToolbar",value:function(){var e=this,t=[{type:"dnd"},{type:"maximize"},{type:"separator"},{type:"copy"},{type:"copyCardLink",onClick:function(){return e.copyCardEmbedLink()}},{type:"separator"}].concat(ge()(this.getMoreEmbedToolbarConfig()));return this.state.readonly&&(t=[{type:"maximize"},{type:"copyCardLink",onClick:function(){return e.copyCardEmbedLink()}}]),t}},{key:"destroy",value:function(){this.engine&&this.engine.asyncEvent.off("save:before",this.onBeforeSave)}},{key:"maximize",value:function(){x()(g()(n.prototype),"maximize",this).call(this),this.state.readonly||(this.editor.switchLayout(Ya.TWO_COLUMN),this.editor.doPreview(),this.engine.toolbar.hide())}},{key:"restore",value:function(){x()(g()(n.prototype),"restore",this).call(this),this.state.readonly||(this.editor.switchLayout(Ya.DEFAULT),this.engine.toolbar.show())}},{key:"activate",value:function(){this.state.readonly||this.resizeController&&this.resizeController.show()}},{key:"unactivate",value:function(){Wa("[puml]card blur"),this.saveDiagram(),this.needConvertToImage()&&(Wa("[puml]card blur, gen image"),this.genImage(this.value.code)),this.state.readonly||this.resizeController&&this.resizeController.hide()}},{key:"renderEditor",value:function(e){var t=this;Wa("render editor"),O.a.render(C.a.createElement(Ha,{canChangeType:"diagram"===this.name,type:this.diagramType,code:e.code||"",onFocus:this.onEditorFocus,onBlur:this.onEditorBlur,onChange:this.onEditorChange,onDiagramTypeChange:this.changeDiagramType,onBeforeRenderImage:this.onBeforeRenderImage,isMaximize:function(){return t.state.maximize},origin:this.getTopEngine().options.previewOrigin,onLoad:function(e){var n=e.editor;t.editor=n},locale:this.locale}),this.root[0],(function(){var e=t.root.find(".lake-text-diagram-editor"),n=t.value.height;t.createResizeController(e),n&&e.css("height",n+"px")}))}},{key:"renderViewer",value:function(e){Wa("render puml code."),O.a.render(C.a.createElement("div",{className:"lake-text-diagram-viewer"},C.a.createElement(Ba,{type:this.diagramType,code:e.code,origin:this.getTopEngine().options.previewOrigin,onBeforeRenderImage:this.onBeforeRenderImage,url:e.url})),this.root[0])}},{key:"render",value:function(e,t){Wa("init card use:",t),t&&(this.prevValue=t),e.append('<div class="lake-text-diagram lake-text-diagram-root"></div>'),this.root=this.container.find(".lake-text-diagram-root"),this.diagramType=this.getDiagramType(t),this.engine?(this.locale=this.engine.locale.textDiagram,this.engine.on("save:before",this.saveDiagram),this.engine.asyncEvent.on("save:before",this.onBeforeSave),this.renderEditor(this.prevValue)):this.renderViewer(this.prevValue),this.toggleMargin()}}]),n}();y()(Ka,"type","block"),y()(Ka,"uid",!0);var Xa=[{value:"plain",syntax:"simplemode",name:"Plain Text"},{value:"bash",syntax:"shell",name:"Bash"},{value:"basic",syntax:"vbscript",name:"Basic"},{value:"c",syntax:"text/x-csrc",name:"C"},{value:"cpp",syntax:"text/x-c++src",name:"C++"},{value:"csharp",syntax:"text/x-csharp",name:"C#"},{value:"css",syntax:"css",name:"CSS"},{value:"dart",syntax:"dart",name:"Dart"},{value:"diff",syntax:"diff",name:"Diff"},{value:"dockerfile",syntax:"dockerfile",name:"Dockerfile"},{value:"erlang",syntax:"erlang",name:"Erlang"},{value:"git",syntax:"shell",name:"Git"},{value:"go",syntax:"go",name:"Go"},{value:"graphql",syntax:"simplemode",name:"GraphQL"},{value:"groovy",syntax:"groovy",name:"Groovy"},{value:"html",syntax:"htmlmixed",name:"HTML"},{value:"http",syntax:"http",name:"HTTP"},{value:"java",syntax:"text/x-java",name:"Java"},{value:"javascript",syntax:"text/javascript",name:"JavaScript"},{value:"json",syntax:"application/json",name:"JSON"},{value:"jsx",syntax:"jsx",name:"JSX"},{value:"katex",syntax:"simplemode",name:"KaTeX"},{value:"kotlin",syntax:"text/x-kotlin",name:"Kotlin"},{value:"less",syntax:"css",name:"Less"},{value:"makefile",syntax:"cmake",name:"Makefile"},{value:"markdown",syntax:"markdown",name:"Markdown"},{value:"matlab",syntax:"octave",name:"MATLAB"},{value:"nginx",syntax:"nginx",name:"Nginx"},{value:"objectivec",syntax:"text/x-objectivec",name:"Objective-C"},{value:"pascal",syntax:"pascal",name:"Pascal"},{value:"perl",syntax:"perl",name:"Perl"},{value:"php",syntax:"php",name:"PHP"},{value:"powershell",syntax:"powershell",name:"PowerShell"},{value:"protobuf",syntax:"protobuf",name:"Protobuf"},{value:"python",syntax:"python",name:"Python"},{value:"r",syntax:"r",name:"R"},{value:"ruby",syntax:"ruby",name:"Ruby"},{value:"rust",syntax:"rust",name:"Rust"},{value:"scala",syntax:"text/x-scala",name:"Scala"},{value:"shell",syntax:"shell",name:"Shell"},{value:"sql",syntax:"text/x-sql",name:"SQL"},{value:"plsql",syntax:"text/x-plsql",name:"PL/SQL"},{value:"swift",syntax:"swift",name:"Swift"},{value:"typescript",syntax:"text/typescript",name:"TypeScript"},{value:"vbnet",syntax:"vb",name:"VB.net"},{value:"velocity",syntax:"velocity",name:"Velocity"},{value:"xml",syntax:"xml",name:"XML"},{value:"yaml",syntax:"yaml",name:"YAML"},{value:"stex",syntax:"text/x-stex",name:"sTeX"},{value:"latex",syntax:"text/x-latex",name:"LaTeX"},{value:"systemverilog",syntax:"text/x-systemverilog",name:"SystemVerilog"},{value:"tcl",syntax:"text/x-tcl",name:"Tcl"},{value:"verilog",syntax:"text/x-verilog",name:"Verilog"},{value:"vue",syntax:"text/x-vue",name:"Vue"},{value:"lua",syntax:"text/x-lua",name:"Lua"}];vt('/* stylelint-disable */\n.lake-codeblock {\n  position: relative;\n  padding: 0;\n  overflow: visible;\n  border: 1px solid #e8e8e8;\n  border-radius: 2px 2px;\n  text-indent: 0;\n}\n.lake-codeblock .lake-embed-toolbar-item {\n  float: right;\n  line-height: 32px;\n}\n.lake-codeblock-header {\n  user-select: none;\n  padding: 4px 12px;\n  color: #595959;\n  border-bottom: 1px solid #e8e8e8;\n  display: flex;\n  justify-content: space-between;\n  /* AntD 组件中用了 ul 需要覆盖默认定义的文档中的 UL 的样式 */\n}\n.lake-codeblock-header ul {\n  margin: 0;\n  padding: 0;\n}\n.lake-codeblock-header li {\n  margin: 0;\n}\n.lake-codeblock-header .lake-codeblock-text {\n  margin-right: 8px;\n  color: #595959;\n  font-size: 14px;\n}\n.lake-codeblock-content {\n  background: #f9f9f9;\n  overflow: auto;\n  counter-reset: codeblock-lm;\n}\n.lake-codeblock-content .lake-preview-line-number::after {\n  counter-increment: codeblock-lm;\n  content: counter(codeblock-lm);\n}\n/* --- 预设行号pad - start ---- */\n.lake-lm-pad-level-1::before {\n  content: " ";\n}\n.lake-lm-pad-level-2::before {\n  content: "  ";\n}\n.lake-lm-pad-level-3::before {\n  content: "   ";\n}\n.lake-lm-pad-level-4::before {\n  content: "    ";\n}\n.lake-lm-pad-level-5 {\n  content: "     ";\n}\n.lake-lm-pad-level-6::before {\n  content: "      ";\n}\n.lake-lm-pad-level-7::before {\n  content: "       ";\n}\n.lake-lm-pad-level-8::before {\n  content: "        ";\n}\n.lake-lm-pad-level-9::before {\n  content: "         ";\n}\n.lake-lm-pad-level-10::before {\n  content: "          ";\n}\n/* --- 预设行号pad - end ---- */\n.lake-engine,\n.lake-engine-view {\n  /* BASICS */\n  /* PADDING */\n  /* GUTTER */\n  /* CURSOR */\n  /* Shown when moving in bi-directional text */\n  /* DEFAULT THEME */\n  /* 以 codemirror 默认为蓝本，部分颜色用 github 及 prism.js */\n  /* use github */\n  /* false null 等常量，use prism.js */\n  /* use github */\n  /* use github */\n  /* use github 蓝色 */\n  /* use github 绿色 */\n  /* use github */\n  /* 单行字符串，用 prism 颜色 origin #a11; */\n  /* 多行字符串，用 prism 颜色 origin #a11; */\n  /* c #include、java annotation 等，采用 vscode default light+ 颜色 */\n  /* use github */\n  /* html tag 名，use github */\n  /* html tag 属性名，use github */\n  /* md 语法 */\n  /* md 语法 */\n  /* 用 github 颜色 */\n  /* 用 github 蓝色，和 cm-def 一致 */\n  /* Default styles for common addons */\n  /* STOP */\n  /* The rest of this file contains styles related to the mechanics of\n    the editor. You probably shouldn\'t touch them. */\n  /* The fake, visible scrollbars. Used to force redraw during scrolling\n    before actual scrolling happens, thus preventing shaking and\n    flickering artifacts. */\n  /* Force content-box sizing for the elements where we expect it */\n  /* Used to force a border model for a node */\n  /* See issue #2901 */\n  /* Help users use markselection to safely style text background */\n}\n.lake-engine .CodeMirror,\n.lake-engine-view .CodeMirror {\n  /* 字体参照 github，考虑和 14px 文字在一起排版，字号用 13px */\n  font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;\n  font-size: 13px;\n  line-height: 21px;\n  color: #595959;\n  direction: ltr;\n}\n.lake-engine .CodeMirror-lines,\n.lake-engine-view .CodeMirror-lines {\n  padding: 8px 0;\n  /* Vertical padding around content */\n}\n.lake-engine .CodeMirror-scrollbar-filler,\n.lake-engine-view .CodeMirror-scrollbar-filler,\n.lake-engine .CodeMirror-gutter-filler,\n.lake-engine-view .CodeMirror-gutter-filler {\n  background-color: white;\n  /* The little square between H and V scrollbars */\n}\n.lake-engine .CodeMirror-gutters,\n.lake-engine-view .CodeMirror-gutters {\n  border: 0;\n  white-space: nowrap;\n  padding: 0 8px;\n  background-color: unset;\n}\n.lake-engine .CodeMirror-linenumber,\n.lake-engine-view .CodeMirror-linenumber {\n  padding: 0;\n  min-width: 20px;\n  text-align: right;\n  color: #BFBFBF;\n  white-space: nowrap;\n}\n.lake-engine .CodeMirror-guttermarker,\n.lake-engine-view .CodeMirror-guttermarker {\n  color: black;\n}\n.lake-engine .CodeMirror-guttermarker-subtle,\n.lake-engine-view .CodeMirror-guttermarker-subtle {\n  color: #999;\n}\n.lake-engine .CodeMirror-cursor,\n.lake-engine-view .CodeMirror-cursor {\n  border-left: 1px solid black;\n  border-right: none;\n  width: 0;\n}\n.lake-engine .CodeMirror div.CodeMirror-secondarycursor,\n.lake-engine-view .CodeMirror div.CodeMirror-secondarycursor {\n  border-left: 1px solid silver;\n}\n.lake-engine .cm-fat-cursor .CodeMirror-cursor,\n.lake-engine-view .cm-fat-cursor .CodeMirror-cursor {\n  width: auto;\n  border: 0 !important;\n  background: #7e7;\n}\n.lake-engine .cm-fat-cursor div.CodeMirror-cursors,\n.lake-engine-view .cm-fat-cursor div.CodeMirror-cursors {\n  z-index: 1;\n}\n.lake-engine .cm-fat-cursor-mark,\n.lake-engine-view .cm-fat-cursor-mark {\n  background-color: rgba(20, 255, 20, 0.5);\n  -webkit-animation: blink 1.06s steps(1) infinite;\n  -moz-animation: blink 1.06s steps(1) infinite;\n  animation: blink 1.06s steps(1) infinite;\n}\n.lake-engine .cm-animate-fat-cursor,\n.lake-engine-view .cm-animate-fat-cursor {\n  width: auto;\n  border: 0;\n  -webkit-animation: blink 1.06s steps(1) infinite;\n  -moz-animation: blink 1.06s steps(1) infinite;\n  animation: blink 1.06s steps(1) infinite;\n  background-color: #7e7;\n}\n@-moz-keyframes blink {\n  50% {\n    background-color: transparent;\n  }\n}\n@-webkit-keyframes blink {\n  50% {\n    background-color: transparent;\n  }\n}\n@keyframes blink {\n  50% {\n    background-color: transparent;\n  }\n}\n.lake-engine .cm-tab,\n.lake-engine-view .cm-tab {\n  display: inline-block;\n  text-decoration: inherit;\n}\n.lake-engine .CodeMirror-rulers,\n.lake-engine-view .CodeMirror-rulers {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: -50px;\n  bottom: -20px;\n  overflow: hidden;\n}\n.lake-engine .CodeMirror-ruler,\n.lake-engine-view .CodeMirror-ruler {\n  border-left: 1px solid #ccc;\n  top: 0;\n  bottom: 0;\n  position: absolute;\n}\n.lake-engine .cm-s-default .cm-header,\n.lake-engine-view .cm-s-default .cm-header {\n  color: blue;\n}\n.lake-engine .cm-s-default .cm-quote,\n.lake-engine-view .cm-s-default .cm-quote {\n  color: #090;\n}\n.lake-engine .cm-negative,\n.lake-engine-view .cm-negative {\n  color: #d44;\n}\n.lake-engine .cm-positive,\n.lake-engine-view .cm-positive {\n  color: #292;\n}\n.lake-engine .cm-header,\n.lake-engine-view .cm-header,\n.lake-engine .cm-strong,\n.lake-engine-view .cm-strong {\n  font-weight: bold;\n}\n.lake-engine .cm-em,\n.lake-engine-view .cm-em {\n  font-style: italic;\n}\n.lake-engine .cm-link,\n.lake-engine-view .cm-link {\n  text-decoration: underline;\n}\n.lake-engine .cm-strikethrough,\n.lake-engine-view .cm-strikethrough {\n  text-decoration: line-through;\n}\n.lake-engine .cm-s-default .cm-keyword,\n.lake-engine-view .cm-s-default .cm-keyword {\n  color: #d73a49;\n}\n.lake-engine .cm-s-default .cm-atom,\n.lake-engine-view .cm-s-default .cm-atom {\n  color: #905;\n}\n.lake-engine .cm-s-default .cm-number,\n.lake-engine-view .cm-s-default .cm-number {\n  color: #005cc5;\n}\n.lake-engine .cm-s-default .cm-def,\n.lake-engine-view .cm-s-default .cm-def {\n  color: #005cc5;\n}\n.lake-engine .cm-s-default .cm-variable-2,\n.lake-engine-view .cm-s-default .cm-variable-2 {\n  color: #005cc5;\n}\n.lake-engine .cm-s-default .cm-variable-3,\n.lake-engine-view .cm-s-default .cm-variable-3,\n.lake-engine .cm-s-default .cm-type,\n.lake-engine-view .cm-s-default .cm-type {\n  color: #22863a;\n}\n.lake-engine .cm-s-default .cm-comment,\n.lake-engine-view .cm-s-default .cm-comment {\n  color: #6a737d;\n}\n.lake-engine .cm-s-default .cm-string,\n.lake-engine-view .cm-s-default .cm-string {\n  color: #690;\n}\n.lake-engine .cm-s-default .cm-string-2,\n.lake-engine-view .cm-s-default .cm-string-2 {\n  color: #690;\n}\n.lake-engine .cm-s-default .cm-meta,\n.lake-engine-view .cm-s-default .cm-meta {\n  color: #1f7f9a;\n}\n.lake-engine .cm-s-default .cm-qualifier,\n.lake-engine-view .cm-s-default .cm-qualifier {\n  color: #555;\n}\n.lake-engine .cm-s-default .cm-builtin,\n.lake-engine-view .cm-s-default .cm-builtin {\n  color: #6f42c1;\n}\n.lake-engine .cm-s-default .cm-bracket,\n.lake-engine-view .cm-s-default .cm-bracket {\n  color: #997;\n}\n.lake-engine .cm-s-default .cm-tag,\n.lake-engine-view .cm-s-default .cm-tag {\n  color: #22863a;\n}\n.lake-engine .cm-s-default .cm-attribute,\n.lake-engine-view .cm-s-default .cm-attribute {\n  color: #6f42c1;\n}\n.lake-engine .cm-s-default .cm-hr,\n.lake-engine-view .cm-s-default .cm-hr {\n  color: #999;\n}\n.lake-engine .cm-s-default .cm-link,\n.lake-engine-view .cm-s-default .cm-link {\n  color: #00c;\n}\n.lake-engine .cm-s-default .cm-error,\n.lake-engine-view .cm-s-default .cm-error {\n  color: #f00;\n}\n.lake-engine .cm-invalidchar,\n.lake-engine-view .cm-invalidchar {\n  color: #f00;\n}\n.lake-engine .cm-s-default .cm-operator,\n.lake-engine-view .cm-s-default .cm-operator {\n  color: #d73a49;\n}\n.lake-engine .cm-s-default .cm-property,\n.lake-engine-view .cm-s-default .cm-property {\n  color: #005cc5;\n}\n.lake-engine .CodeMirror-composing,\n.lake-engine-view .CodeMirror-composing {\n  border-bottom: 2px solid;\n}\n.lake-engine div.CodeMirror span.CodeMirror-matchingbracket,\n.lake-engine-view div.CodeMirror span.CodeMirror-matchingbracket {\n  color: #0b0;\n}\n.lake-engine div.CodeMirror span.CodeMirror-nonmatchingbracket,\n.lake-engine-view div.CodeMirror span.CodeMirror-nonmatchingbracket {\n  color: #a22;\n}\n.lake-engine .CodeMirror-matchingtag,\n.lake-engine-view .CodeMirror-matchingtag {\n  background: rgba(255, 150, 0, 0.3);\n}\n.lake-engine .CodeMirror-activeline-background,\n.lake-engine-view .CodeMirror-activeline-background {\n  background: transparent;\n}\n.lake-engine .CodeMirror,\n.lake-engine-view .CodeMirror {\n  position: relative;\n  overflow: hidden;\n  height: auto;\n  background: transparent;\n}\n.lake-engine .CodeMirror-scroll,\n.lake-engine-view .CodeMirror-scroll {\n  overflow: scroll !important;\n  /* Things will break if this is overridden */\n  /* 30px is the magic margin used to hide the element\'s real scrollbars */\n  /* See overflow: hidden in .CodeMirror */\n  margin-bottom: -30px;\n  margin-right: -30px;\n  padding-bottom: 30px;\n  outline: none;\n  /* Prevent dragging from highlighting the element */\n  position: relative;\n}\n.lake-engine .CodeMirror-sizer,\n.lake-engine-view .CodeMirror-sizer {\n  position: relative;\n  border-right: 30px solid transparent;\n  min-height: auto !important;\n}\n.lake-engine .CodeMirror-vscrollbar,\n.lake-engine-view .CodeMirror-vscrollbar,\n.lake-engine .CodeMirror-hscrollbar,\n.lake-engine-view .CodeMirror-hscrollbar,\n.lake-engine .CodeMirror-scrollbar-filler,\n.lake-engine-view .CodeMirror-scrollbar-filler,\n.lake-engine .CodeMirror-gutter-filler,\n.lake-engine-view .CodeMirror-gutter-filler {\n  position: absolute;\n  z-index: 6;\n  display: none;\n}\n.lake-engine .CodeMirror-vscrollbar,\n.lake-engine-view .CodeMirror-vscrollbar {\n  right: 0;\n  top: 0;\n  overflow-x: hidden;\n  overflow-y: scroll;\n  display: none !important;\n}\n.lake-engine .CodeMirror-hscrollbar,\n.lake-engine-view .CodeMirror-hscrollbar {\n  bottom: 0;\n  left: 0;\n  overflow-y: hidden;\n  overflow-x: scroll;\n  display: none !important;\n}\n.lake-engine .CodeMirror-scrollbar-filler,\n.lake-engine-view .CodeMirror-scrollbar-filler {\n  right: 0;\n  bottom: 0;\n}\n.lake-engine .CodeMirror-gutter-filler,\n.lake-engine-view .CodeMirror-gutter-filler {\n  left: 0;\n  bottom: 0;\n}\n.lake-engine .CodeMirror-gutters,\n.lake-engine-view .CodeMirror-gutters {\n  position: absolute;\n  left: 0;\n  top: 0;\n  min-height: 100%;\n  z-index: 3;\n  background: #f9f9f9;\n}\n.lake-engine .CodeMirror-gutter,\n.lake-engine-view .CodeMirror-gutter {\n  white-space: normal;\n  height: 100%;\n  display: inline-block;\n  vertical-align: top;\n  margin-bottom: -30px;\n}\n.lake-engine .CodeMirror-gutter-wrapper,\n.lake-engine-view .CodeMirror-gutter-wrapper {\n  position: absolute;\n  z-index: 4;\n  background: none !important;\n  border: none !important;\n}\n.lake-engine .CodeMirror-gutter-background,\n.lake-engine-view .CodeMirror-gutter-background {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  z-index: 4;\n}\n.lake-engine .CodeMirror-gutter-elt,\n.lake-engine-view .CodeMirror-gutter-elt {\n  position: absolute;\n  cursor: default;\n  z-index: 4;\n}\n.lake-engine .CodeMirror-gutter-wrapper ::selection,\n.lake-engine-view .CodeMirror-gutter-wrapper ::selection {\n  background-color: transparent;\n}\n.lake-engine .CodeMirror-gutter-wrapper ::-moz-selection,\n.lake-engine-view .CodeMirror-gutter-wrapper ::-moz-selection {\n  background-color: transparent;\n}\n.lake-engine .CodeMirror-lines,\n.lake-engine-view .CodeMirror-lines {\n  cursor: text;\n  min-height: 1px;\n  /* prevents collapsing before first draw */\n}\n.lake-engine .CodeMirror pre,\n.lake-engine-view .CodeMirror pre {\n  /* Reset some styles that the rest of the page might have set */\n  -moz-border-radius: 0;\n  -webkit-border-radius: 0;\n  border-radius: 0;\n  border-width: 0;\n  background: transparent;\n  font-family: inherit;\n  font-size: inherit;\n  margin: 0;\n  white-space: pre;\n  word-wrap: normal;\n  line-height: inherit;\n  color: inherit;\n  z-index: 2;\n  position: relative;\n  overflow: visible;\n  -webkit-tap-highlight-color: transparent;\n  -webkit-font-variant-ligatures: contextual;\n  font-variant-ligatures: contextual;\n}\n.lake-engine .CodeMirror-wrap pre,\n.lake-engine-view .CodeMirror-wrap pre {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  word-break: normal;\n}\n.lake-engine .CodeMirror-linebackground,\n.lake-engine-view .CodeMirror-linebackground {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  z-index: 0;\n}\n.lake-engine .CodeMirror-linewidget,\n.lake-engine-view .CodeMirror-linewidget {\n  position: relative;\n  z-index: 2;\n  padding: 0.1px;\n  /* Force widget margins to stay inside of the container */\n}\n.lake-engine .CodeMirror-rtl pre,\n.lake-engine-view .CodeMirror-rtl pre {\n  direction: rtl;\n}\n.lake-engine .CodeMirror-code,\n.lake-engine-view .CodeMirror-code {\n  outline: none;\n}\n.lake-engine .CodeMirror-scroll,\n.lake-engine-view .CodeMirror-scroll,\n.lake-engine .CodeMirror-sizer,\n.lake-engine-view .CodeMirror-sizer,\n.lake-engine .CodeMirror-gutter,\n.lake-engine-view .CodeMirror-gutter,\n.lake-engine .CodeMirror-gutters,\n.lake-engine-view .CodeMirror-gutters,\n.lake-engine .CodeMirror-linenumber,\n.lake-engine-view .CodeMirror-linenumber {\n  -moz-box-sizing: content-box;\n  box-sizing: content-box;\n}\n.lake-engine .CodeMirror-measure,\n.lake-engine-view .CodeMirror-measure {\n  position: absolute;\n  width: 100%;\n  height: 0;\n  overflow: hidden;\n  visibility: hidden;\n}\n.lake-engine .CodeMirror-cursor,\n.lake-engine-view .CodeMirror-cursor {\n  position: absolute;\n  pointer-events: none;\n}\n.lake-engine .CodeMirror-measure pre,\n.lake-engine-view .CodeMirror-measure pre {\n  position: static;\n}\n.lake-engine div.CodeMirror-cursors,\n.lake-engine-view div.CodeMirror-cursors {\n  visibility: hidden;\n  position: relative;\n  z-index: 3;\n}\n.lake-engine div.CodeMirror-dragcursors,\n.lake-engine-view div.CodeMirror-dragcursors {\n  visibility: visible;\n}\n.lake-engine .CodeMirror-focused div.CodeMirror-cursors,\n.lake-engine-view .CodeMirror-focused div.CodeMirror-cursors {\n  visibility: visible;\n}\n.lake-engine .CodeMirror-selected,\n.lake-engine-view .CodeMirror-selected {\n  background: #e8e8e8;\n}\n.lake-engine .CodeMirror-focused .CodeMirror-selected,\n.lake-engine-view .CodeMirror-focused .CodeMirror-selected {\n  background: #b3d7fd;\n}\n.lake-engine .CodeMirror-crosshair,\n.lake-engine-view .CodeMirror-crosshair {\n  cursor: crosshair;\n}\n.lake-engine .CodeMirror-line::selection,\n.lake-engine-view .CodeMirror-line::selection,\n.lake-engine .CodeMirror-line > span::selection,\n.lake-engine-view .CodeMirror-line > span::selection,\n.lake-engine .CodeMirror-line > span > span::selection,\n.lake-engine-view .CodeMirror-line > span > span::selection {\n  background: #b3d7fd;\n}\n.lake-engine .CodeMirror-line::-moz-selection,\n.lake-engine-view .CodeMirror-line::-moz-selection,\n.lake-engine .CodeMirror-line > span::-moz-selection,\n.lake-engine-view .CodeMirror-line > span::-moz-selection,\n.lake-engine .CodeMirror-line > span > span::-moz-selection,\n.lake-engine-view .CodeMirror-line > span > span::-moz-selection {\n  background: #b3d7fd;\n}\n.lake-engine .cm-searching,\n.lake-engine-view .cm-searching {\n  background-color: #ffa;\n  background-color: rgba(255, 255, 0, 0.4);\n}\n.lake-engine .cm-force-border,\n.lake-engine-view .cm-force-border {\n  padding-right: 0.1px;\n}\n@media print {\n  .lake-engine,\n  .lake-engine-view {\n    /* Hide the cursor when printing */\n  }\n  .lake-engine .CodeMirror div.CodeMirror-cursors,\n  .lake-engine-view .CodeMirror div.CodeMirror-cursors {\n    visibility: hidden;\n  }\n}\n.lake-engine .cm-tab-wrap-hack::after,\n.lake-engine-view .cm-tab-wrap-hack::after {\n  content: \'\';\n}\n.lake-engine span.CodeMirror-selectedtext,\n.lake-engine-view span.CodeMirror-selectedtext {\n  background: none;\n}\n.lake-engine-view .lake-codeblock {\n  margin: 5px 0;\n}\n.lake-engine-view .CodeMirror {\n  padding: 16px;\n  overflow: initial;\n}\n.lake-engine-view .CodeMirror pre {\n  padding: 0;\n}\n.lake-content-editor .lake-engine .lake-codeblock .CodeMirror-lines {\n  min-height: 40px;\n}\n.lake-preview-line {\n  display: flex;\n}\n.lake-preview-line > .lake-preview-line-number {\n  color: #bfbfbf;\n  text-align: right;\n  white-space: pre;\n  margin: 0 8px 0 0;\n  flex-shrink: 0;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  user-select: none;\n}\n.lake-codeblock-auto-wrap .CodeMirror pre {\n  white-space: pre-wrap;\n  word-break: break-word;\n}\n.height-limit .CodeMirror-sizer {\n  max-height: 12600px;\n}\n.lake-codeblock-content.manual-height .CodeMirror-sizer {\n  max-height: initial;\n}\n');var $a=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){var e;o()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),y()(u()(e),"handlerFilter",(function(e,t){e=e.toLowerCase();var n=t.key||"",r=t.name||"";return r=r.toLowerCase(),n.includes(e)||r.includes(e)})),e}return l()(n,[{key:"render",value:function(){return C.a.createElement(C.a.Fragment,null,C.a.createElement(j.a,{className:"lake-codeblock-header-select",showSearch:!0,size:"small",style:{width:128},defaultValue:this.props.defaultValue,getPopupContainer:this.props.getPopupContainer,onSelect:this.props.onSelect,filterOption:this.handlerFilter,virtual:!1},Xa.map((function(e){return C.a.createElement(j.a.Option,{name:e.name,value:e.value,key:e.value},e.name)}))),C.a.createElement("div",{className:"lake-codeblock-autowrap"},C.a.createElement("span",{className:"lake-codeblock-text"},this.props.locale.autoWrap),C.a.createElement(L.a,{size:"small",onChange:this.props.onAutoWrapChange,defaultChecked:this.props.defaultAutoWrap})))}}]),n}(C.a.PureComponent);function Za(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Za(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Za(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}$a.propTypes={defaultValue:R.a.string,onSelect:R.a.func,getPopupContainer:R.a.func,locale:R.a.object,defaultAutoWrap:R.a.bool,onAutoWrapChange:R.a.func};var Ja={},ei={};Xa.forEach((function(e){Ja[e.value]=e.name,ei[e.value]=e.syntax}));var ti=["c","cpp","csharp","erlang","go","groovy","java","kotlin","makefile","objectivec","perl","python","rust","swift","vbnet"];function ni(e){return ei[e]||e}function ri(e){var t=e.mode,n=e.editPage;return'\n  <div class="lake-codeblock lake-codeblock-'.concat(a.n.escape(t)," ").concat(e.heightLimit?"height-limit":"",'">\n    ').concat(n?'<div class="lake-codeblock-header"></div>':"",'\n    <div class="lake-codeblock-content"></div>\n  </div>\n  ')}function ai(e,t,n,r){t=ni(t);var i=Object(a.a)('<div class="CodeMirror CodeMirror-sizer"><pre class="cm-s-default" /></div>');e.append(i),function(e,t,n,r){var a,i=Ue.a.getMode(Ue.a.defaults,t),o=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<9),c=n;if(n.appendChild){var l=r&&r.tabSize||Ue.a.defaults.tabSize;a=document.createDocumentFragment();var s,u=0,d=1;n=function(e,t,n){var r=(e+"").length-(d+"").length;if(!s){var i=document.createElement("span");i.className="lake-preview-line",i.innerHTML='<span class="lake-preview-line-number lake-lm-pad-level-'.concat(r,'"></span><span class="lake-preview-codeblock-content"></span>'),s=i.lastChild,a.appendChild(i)}if("\n"===t)return s.appendChild(document.createTextNode(o?"\r":t)),s=null,u=0,void d++;for(var c="",f=0;;){var p=t.indexOf("\t",f);if(-1===p){c+=t.slice(f),u+=t.length-f;break}u+=p-f,c+=t.slice(f,p);var h=l-u%l;u+=h;for(var m=0;m<h;++m)c+=" ";f=p+1}if(n){var g=s.appendChild(document.createElement("span"));g.className="cm-"+n.replace(/ +/g," cm-"),g.appendChild(document.createTextNode(c))}else s.appendChild(document.createTextNode(c))}}for(var f=Ue.a.splitLines(e),p=r&&r.state||Ue.a.startState(i),h=0,m=f.length;h<m;++h){h&&n(m,"\n");var g=new Ue.a.StringStream(f[h]);for(!g.string&&i.blankLine&&i.blankLine(p);!g.eol();){var v=i.token(g,p);n(m,g.current(),v,h,g.start,p),g.start=g.pos}}c.appendChild&&a&&c.appendChild(a)}(n||"",t,i.find("pre")[0],r)}var ii=function(e){f()(n,Ut);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;if(o()(this,n),r=t.call(this),y()(u()(r),"adaptMode",(function(e){return Ja[e.mode]?e.mode:r.mode})),y()(u()(r),"saveValue",(function(){if(!r.engine.domEvent.isComposing){var e=r.codeMirror.getValue();r.setValue({mode:r.mode,code:e},!0)}})),y()(u()(r),"focusToCodeEditor",(function(){r.codeMirror.focus()})),r.engine=e,!e)return h()(r);var a=r.getViewEngine();r.card=e.card,r.locale=a.locale.codeBlock;var i=r.loadOptions();return r.mode=Ja[i.mode]?i.mode:"plain",r}return l()(n,[{key:"loadOptions",value:function(){var e=ur("lake-codeblock");if(e)try{return JSON.parse(e)}catch(e){}return{}}},{key:"setOptions",value:function(e){dr("lake-codeblock",JSON.stringify(e))}},{key:"embedToolbar",value:function(){return[{type:"dnd"},{type:"copy"},{type:"copyContent",tips:this.getViewEngine().locale.codeBlock.copyCode},{type:"separator"}].concat(ge()(this.getMoreEmbedToolbarConfig()))}},{key:"copyContent",value:function(){var e=this.getViewEngine(),t=this.value.code,n=e.locale.codeBlock.copySuccess;a.c.copyText(t),A.a.success(n)}},{key:"destroy",value:function(){}},{key:"activate",value:function(){this.state.readonly||this.resizeController.show(),this.renderToolbar()}},{key:"unactivate",value:function(){this.setOptions({mode:this.mode}),this.saveValue(),this.state.readonly||this.resizeController.hide()}},{key:"renderToolbar",value:function(){var e=this;if(!this.toolbarRendered){this.blockHeader=this.container.find(".lake-codeblock-header");var t=this.blockHeader[0];O.a.render(C.a.createElement($a,{defaultValue:this.mode,onSelect:function(t){e.mode=t,e.updateMode(e.mode),e.saveValue(),e.focusToCodeEditor()},onAutoWrapChange:function(t){e.updateAutoWrap(t)},locale:this.locale,defaultAutoWrap:(this.value||{}).autoWrap,getPopupContainer:function(){return t}}),t),this.toolbarRendered=!0}}},{key:"createCodeEditor",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.codeMirror=Ue()(this.codeArea[0],Qa({mode:e,value:t,lineNumbers:!0,lineWrapping:!!(this.value||{}).autoWrap,styleActiveLine:!1,matchBrackets:!0,autofocus:!1,dragDrop:!1,readOnly:!1,scrollbarStyle:"null",viewportMargin:1/0},r)),this.codeMirror.on("focus",(function(){n.engine.toolbar.disable(!0),n.activate()})),this.codeMirror.on("blur",(function(){n.engine.toolbar.disable(!1)})),this.codeMirror.on("change",ne()((function(){n.engine.change.onChange(n.engine.change.getValue()),n.saveValue()}),1e3)),this.codeMirror.setOption("extraKeys",{Enter:function(e){var t=n.getCfg(e.getValue());for(var r in t)e.setOption(r,t[r]);e.execCommand("newlineAndIndent")}})}},{key:"getCfg",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mode,n=ti.includes(t)?4:2;return{tabSize:n,indentUnit:n}}},{key:"updateMode",value:function(e){var t=ni(e),n=this.codeMirror.getValue(),r=this.getCfg(n,e);this.codeArea.empty(),this.createCodeEditor(t,n||"",r)}},{key:"updateAutoWrap",value:function(e){e=!!e,this.codeMirror&&this.codeMirror.setOption("lineWrapping",e),this.setValue({autoWrap:e},!0)}},{key:"renderCode",value:function(e){this.codeArea=this.container.find(".lake-codeblock-content"),this.isAutoWrap()&&this.codeArea.addClass("lake-codeblock-auto-wrap"),ai(this.codeArea,this.mode,e,this.getCfg())}},{key:"isAutoWrap",value:function(){return(this.value||{}).autoWrap}},{key:"renderEditor",value:function(e){this.cardRoot=this.card.closest(this.container),this.codeArea=this.container.find(".lake-codeblock-content"),this.codeArea.on("click",this.focusToCodeEditor),this.lazyRenderCode(e),this.createResizeController(this.codeArea)}},{key:"lazyRenderCode",value:function(e){var t=this;setTimeout((function(){var n=ni(t.mode),r=t.getCfg(e,t.mode);t.createCodeEditor(n,e||"",r)}),0)}},{key:"render",value:function(e,t){t=t||{},this.mode=this.adaptMode(t),e.append(ri({heightLimit:!!t.heightLimit,mode:this.mode,editPage:!!this.engine})),this.engine?this.renderEditor(t.code):this.renderCode(t.code);var n=this.value.height;n&&(this.codeArea.css("height",n+"px"),this.codeArea.addClass("manual-height")),this.toggleMargin()}}]),n}();function oi(e){for(var t=[],n=e.rows,r=n.length,a=0;a<r;a++){var i=n[a].cells,o=i.length;t[a]=t[a]||[];for(var c=0;c<o;c++){for(var l=i[c],s=l.rowSpan,u=void 0===s?1:s,d=l.colSpan,f=void 0===d?1:d,p=u>1||f>1,h=c;t[a][h];)h++;if(t[a][h]={rowSpan:u,colSpan:f,isMulti:p,element:l},p)for(var m=u;m>0;){for(var g=f;g>0;){if(1!==g||1!==m){var v=a+m-1,y=h+g-1;t[v]=t[v]||[],t[v][y]={isEmpty:!0,parent:{row:a,col:h},element:null}}g--}m--}}}var b=t.map((function(e){return e.length})),k=Math.max.apply(Math,ge()(b));return t.forEach((function(e){if(e.length<k)for(var t=k-e.length;t--;)e.push({rowSpan:1,colSpan:1,isShadow:!0,element:null});for(var n=0;n<k;n++)e[n]||(e[n]={rowSpan:1,colSpan:1,isShadow:!0,element:null})})),{rows:t.length,cols:k,width:e.offsetWidth,table:t}}function ci(e){return 0===parseInt(e)?"auto":(e.endsWith("%")&&(e=parseFloat(e)/100*750),parseInt(e,10)+"px")}function li(e){var t=Object(a.a)(e);!function(e){var t=e.find("tr"),n=t[0],r=t[1];n&&(0===n.cells.length&&n.remove(),1===n.cells.length&&""===n.cells[0].innerText.trim()&&0===n.cells[0].getElementsByTagName("img").length&&0===n.cells[0].getElementsByTagName("div").length&&1===n.cells[0].colSpan&&1===n.cells[0].rowSpan&&r&&1!==r.cells.length&&n.remove())}(t),function(e){for(var t,n=(e=e[0]).rows,r=n.length,a=[],i=[],o=0,c=0,l=0,s=0;s<r;s++){for(var u=n[s].cells,d=0,f=0;f<u.length;f++){var p=u[f],h=p.rowSpan,m=p.colSpan;o+=h*m,d+=m,h>1&&(c+=(h-1)*m)}i[s]=d,0===s&&(t=d),l=Math.max(d,l)}if(Ye()(o/t)&&t===l){var g=0;if(i.forEach((function(e){g+=l-e})),g!==c&&Ye()((c-g)/l)){for(var v=[],y=0;y<r;y++){for(var b=n[y].cells;a[y+v.length]===l;)v.push(y+v.length);for(var k=y+v.length,w=0;w<b.length;w++){var x=b[w],_=x.rowSpan,C=x.colSpan;if(_>1)for(var E=1;E<_;E++)a[k+E]=(a[k+E]||0)+C}}v.forEach((function(t){e.insertRow(t)}))}}}(t),bi(t),t.addClass("lake-table");var n=ci(t.css("width"));t.css("width",n),t.css("background-color","");var r=oi(e),i=t.find("col");if(0!==i.length){for(var o=i.length-1;o>=0;o--){var c=Object(a.a)(i[o]).attr("width");if(c&&Object(a.a)(i[o]).attr("width",parseFloat(ci(c))),i[o].span>1)for(var l=i[o].span-1;l--;)i[o].parentNode.insertBefore(i[o].cloneNode(),i[o])}if((i=t.find("col")).length<r.cols)for(var s=i.length-1,u=r.cols-i.length;u--;)i[0].parentNode.appendChild(i[s].cloneNode());t.find("col").attr("span",1)}else{var d=t.find("colgroup")[0];d||(d=document.createElement("colgroup"),t.prepend(d));for(var f=function(e){var t=e.find("tr")[0],n=Object(a.a)(t).find("td"),r=[];n.each((function(e){var t=Object(a.a)(e).attr("data-colwidth"),n=Object(a.a)(e).attr("width"),i=Object(a.a)(e)[0].colSpan;t?t=t.split(","):n&&(n=parseInt(n)/i);for(var o=0;o<i;){var c=t&&t[o]?parseInt(t[o]):n?parseInt(n):void 0;r.push(c),o++}}));var i=e.find("td");return i.removeAttr("data-colwidth"),i.removeAttr("width"),r}(t),p=document.createElement("col"),h=0;h<r.cols;h++){var m=p.cloneNode();f[h]&&m.setAttribute("width",f[h]),d.appendChild(m)}}return r.table.forEach((function(t,n){e.rows[n]||e.insertRow(n);for(var r=t.filter((function(e){return e.isShadow})).length;r--;)0===n?e.rows[n].insertCell(0):e.rows[n].insertCell()})),t.find("tr").each((function(e){var t=Object(a.a)(e),n=Object(a.a)(e).css("height");n=parseInt(n)||33,t.css("height",n+"px")})),e}function si(e,t){var n=Object(a.a)(t),r=Object(a.a)(e);n.html(a.n.transformCustomTags(e.innerHTML)),ui(r,n)}function ui(e,t){var n=Object(a.a)(t),r=Object(a.a)(e);n.css("text-align",r.css("text-align")),n.css("vertical-align",r.css("vertical-align"));var i=r.css("background-color");i="rgba(0, 0, 0, 0)"!==i?i:"#fff",n.css("background-color",i),n.css("color",r.css("color")),n.css("font-weight",r.css("font-weight"))}y()(ii,"type","block");var di=null;function fi(e){di={html:e,text:Object(a.a)(e).innerText}}function pi(){return di}function hi(e){e=e.replace(/<p(>|\s+[^>]*>)/gi,"<div$1").replace(/<\/p>/gi,"</div>");var t=(new DOMParser).parseFromString(e,"text/html");return mi(t),t.body.innerHTML}function mi(e){vi(e,(function(e){return e.isBlock()&&(e.hasClass("bi-table")||"table"===e.attr("data-lake-card"))})),function(e){a.k.walkTree(e,(function(e){yi(e=Object(a.a)(e))}))}(e)}function gi(e){vi(e,(function(e){return e.isBlock()&&e.hasClass("bi-table")}))}function vi(e,t){a.k.walkTree(e,(function(e){if(e=Object(a.a)(e),t(e)){var n=e.find("table");if(n.length>0)return bi(n),void e.replaceWith(n);e.remove()}}))}function yi(e){if(e.isBlock()&&"codeblock"===e.attr("data-lake-card")){var t=a.n.decodeCardValue(e.attr("data-card-value"));if(t.code){var n=t.code.split("\n"),r=Object(a.a)("<p />");n.forEach((function(t){var n,i=r.clone();i.html((n=t,a.n.escape(n).replace(/\t/g,"&nbsp;&nbsp;").replace(/\s/g,"&nbsp;"))),e.before(i)})),e.remove()}}}function bi(e){a.k.walkTree(e,(function(e){(function(e){if(e.isBlock()){var t;switch(e.name){case"h1":(t=Object(a.a)('<span class="lake-fontsize-18"></span>')).html(e.html());break;case"h2":(t=Object(a.a)('<span class="lake-fontsize-16"></span>')).html(e.html());break;case"h3":case"h4":(t=Object(a.a)('<span class="lake-fontsize-14"></span>')).html(e.html());break;case"h5":case"h6":(t=Object(a.a)('<span class="lake-fontsize-12"></span>')).html(e.html())}t&&e.replaceWith(t)}})(e=Object(a.a)(e)),function(e){"a"===e.name&&((e.attr("href")||"").startsWith("#")||e.attr("target")||e.attr("target","_blank"))}(e),yi(e)}))}function ki(e){e.dataTransfer.clearData(),e.dataTransfer.setData("lake",null)}function wi(e){var t=e.getBoundingClientRect(),n=t.top,r=t.left,a=t.right,i=t.bottom,o=t.width,c=t.height;return{top:n,left:r,right:a,bottom:i,x:t.x,y:t.y,width:o,height:c}}function xi(e){return e.getBoundingClientRect().top}function _i(e){return e.getBoundingClientRect().left}function Ci(e){return parseFloat(e.style.width)||e.getBoundingClientRect().width}function Ei(e){if(!e)return 0;var t=e.offsetParent;return t?e.getBoundingClientRect().left-t.getBoundingClientRect().left:e.offsetLeft}function Oi(e){if(!e)return 0;var t=e.offsetParent;return t?e.getBoundingClientRect().top-t.getBoundingClientRect().top:e.offsetTop}function Si(e){return e.getBoundingClientRect().width}function Ri(e){return e.getBoundingClientRect().height}function Di(e,t,n){var r,i=e[t][n];return!(r=i.isEmpty?e[i.parent.row][i.parent.col].element:i.element)||""===r.innerText.trim()&&!Object(a.a)(r).find("img")[0]}var Ai="table-header-add-btn";var Ti=function(e){f()(n,k.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),r=t.call(this),y()(u()(r),"render",(function(e){var t,n=!0,a=!0;switch(e){case"insertRow":case"removeRow":case"heightchange":n=!1;break;case"clearFormat":case"align":case"fontcolor":case"background":a=!1,n=!1;break;case"input":case"select":case"paste":n=!1,t=r.card.selection.getEffectRows()}n&&r.renderColBars(),a&&r.renderRowBars(t)})),y()(u()(r),"renderColBars",(function(){var e=r.card,t=e.tableRoot,n=e.selection.getTableModel().table,i=t.find("col"),o=!0,c=Ci(t[0]),l={},s=0,u=0;i.each((function(e,t){var n=Object(a.a)(e).attr("width");n?(l[t]=parseInt(n),s+=parseInt(n),o=!1):u++}));var d=c;if(o){var f=[];n.forEach((function(e){e.forEach((function(e,t){f[t]||e.isEmpty||e.isMulti||!e.element||(f[t]=Si(e.element))}))}));for(var p=0,h=0,m=0;m<i.length;m++)f[m]?h+=f[m]:p++;var g=0;p>0&&(g=Math.floor((c-h)/p));for(var v=0;v<i.length;v++){var y=f[v]||Math.min(d,g);d-=y,Object(a.a)(i[v]).attr("width",y)}}else if(u){var b=Math.floor((c-s)/u);i.each((function(e,t){var n=void 0===l[t]?Math.min(b,d):l[t];d-=n,Object(a.a)(e).attr("width",n)}))}else r._isRepaired||(r._isRepaired=!0,i.each((function(e,t){var n=Math.min(d,Math.floor(c*l[t]/s));d-=n,Object(a.a)(e).attr("width",n)})));r.updateTableWidth()})),y()(u()(r),"renderRowBars",(function(e){var t=r.card,n=t.tableRoot,i=t.template,o=n[0].rows,c=r.rowsHeader.find(i.ROWS_HEADER_ITEM_CLASS),l=0,s=o.length-1;e&&(l=e.row_min,s=e.row_max);for(var u=l;u<=s;u++)Object(a.a)(c[u]).css("height",Ri(o[u])+"px");r.height=Ri(n[0])})),y()(u()(r),"onDragCol",(function(e){if(e.stopPropagation(),r.colDragging&&(void 0===r.rowDraggingPosiX&&(r.rowDraggingPosiX=e.offsetX),!(Math.abs(r.rowDraggingPosiX-e.offsetX)<3))){r.rowDraggingPosiX=e.offsetX,r.dragBar.removeClass("dragging");var t=Object(a.a)(e.target).closest("td"),n=Object(a.a)(e.target).closest(r.card.template.COLS_HEADER_ITEM_CLASS);if(t[0]||n[0])if(n[0]){var i=n.index(),o=e.offsetX>Si(n[0])/2?i+1:i;r.showPlaceHolder(o)}else{for(var c=r.colsHeader.find(r.card.template.COLS_HEADER_ITEM_CLASS),l=t[0].colSpan,s=r.card.selection.getTdRowCol(t[0]).col,u=s,d=0,f=0;f<l;f++){if(d+Si(c[s+f])/2>e.offsetX){u=s+f;break}if(d+Si(c[s+f])>e.offsetX){u=s+f+1;break}d+=Si(c[s+f])}r.showPlaceHolder(u)}}})),y()(u()(r),"onDragRow",(function(e){if(e.stopPropagation(),r.rowDragging&&(void 0===r.rowDraggingPosiY&&(r.rowDraggingPosiY=e.offsetY),!(Math.abs(r.rowDraggingPosiY-e.offsetY)<3))){r.rowDraggingPosiY=e.offsetY,r.dragBar.removeClass("dragging");var t=Object(a.a)(e.target).closest("td"),n=Object(a.a)(e.target).closest(r.card.template.ROWS_HEADER_ITEM_CLASS);if(t[0]||n[0])if(n[0]){var i=n.index()+1;r.showPlaceHolder(i)}else{for(var o=r.rowsHeader.find(r.card.template.ROWS_HEADER_ITEM_CLASS),c=t[0].rowSpan,l=r.card.selection.getTdRowCol(t[0]).row,s=l,u=0,d=0;d<c;d++){if(u+Ri(o[l+d])>e.offsetY){s=l+d+1;break}u+=Ri(o[l+d])}r.showPlaceHolder(s)}}})),y()(u()(r),"showPlaceHolder",(function(e){if(r.colDragging){if(e===r.dropCol)return;if(r.colDraggingIndex.col_min<=e&&e<=r.colDraggingIndex.col_max+1)return delete r.dropCol,void r.placeholder.css("display","none");r.dropCol=e;var t=r.colsHeader.find(r.card.template.COLS_HEADER_ITEM_CLASS),n=r.dropCol!==t.length?Ei(t[r.dropCol])+2:Ei(t[r.dropCol-1])+Si(t[r.dropCol-1])+2,a=r.viewport[0].scrollLeft,i=Si(r.viewport[0]);n<a&&(r.viewport[0].scrollLeft=n-5),n>a+i&&(r.viewport[0].scrollLeft=n-i+5),r.placeholder.css({width:"3px",height:r.height+"px",left:n+"px",top:"40px",display:"block"})}if(r.rowDragging){if(e===r.dropRow)return;if(r.rowDraggingIndex.row_min<=e&&e<=r.rowDraggingIndex.row_max+1)return delete r.dropRow,void r.placeholder.css("display","none");r.dropRow=e;var o=r.rowsHeader.find(r.card.template.ROWS_HEADER_ITEM_CLASS),c=r.dropRow<o.length?Oi(o[r.dropRow]):Oi(o[r.dropRow-1])+Ri(o[r.dropRow-1]);r.placeholder.css({height:"3px",width:r.width+"px",left:"3px",top:40+c+"px",display:"block"})}})),y()(u()(r),"onDragColEnd",(function(){if(r.unBindDragColEvent(),r.colDragging&&void 0!==r.dropCol){for(var e=r.card,t=e.command,n=e.selection,a=n.normalizeArea(),i=a.col_min,o=a.col_max,c=r.card.container.find(r.card.template.COLS_HEADER_ITEM_CLASS),l=[],s=i;s<=o;s++)l.push(Si(c[s]));var u=n.colCount();t.mockCopy(),i>r.dropCol?(t.insertColAt(r.dropCol,u,!1,!0,l),n.selectCols(r.dropCol,r.dropCol+u-1),t.mockPaste(!0),n.selectCols(i+u,o+u),t.removeCol(),n.selectCols(r.dropCol,r.dropCol+u-1)):(t.insertColAt(r.dropCol,u,!1,!0,l),n.selectCols(r.dropCol,r.dropCol+u-1),t.mockPaste(!0),n.selectCols(i,o),t.removeCol(),n.selectCols(r.dropCol-u,r.dropCol-1)),r.placeholder.css("display","none"),r.colDragging=!1,delete r.dropCol}})),y()(u()(r),"onDragRowEnd",(function(){if(r.unBindDragRowEvent(),r.rowDragging&&void 0!==r.dropRow){var e=r.card,t=e.command,n=e.selection,a=n.normalizeArea(),i=a.row_min,o=a.row_max;t.mockCopy(),i>r.dropRow?(t.insertRowAt(r.dropRow,r.dragCount,!1,!0),n.selectRows(r.dropRow,r.dropRow+r.dragCount-1),t.mockPaste(!0),n.selectRows(i+r.dragCount,o+r.dragCount),t.removeRow(),n.selectRows(r.dropRow,r.dropRow+r.dragCount-1)):(t.insertRowAt(r.dropRow,r.dragCount,!1,!0),n.selectRows(r.dropRow,r.dropRow+r.dragCount-1),t.mockPaste(!0),n.selectRows(i,o),t.removeRow(),n.selectRows(r.dropRow-r.dragCount,r.dropRow-1)),r.placeholder.css("display","none"),r.rowDragging=!1,delete r.dropRow}})),y()(u()(r),"unBindDragColEvent",(function(){r.colsHeader.find(r.card.template.COLS_HEADER_ITEM_CLASS).removeClass("dragging"),r.colsHeader.removeClass("dragging"),r.card.container.off("dragover",r.onDragCol),r.card.container.off("drop",r.onDragColEnd),r.card.container.off("dragend",r.onDragColEnd)})),y()(u()(r),"unBindDragRowEvent",(function(){r.rowsHeader.find(r.card.template.ROWS_HEADER_ITEM_CLASS).removeClass("dragging"),r.rowsHeader.removeClass("dragging"),r.card.container.off("dragover",r.onDragRow),r.card.container.off("drop",r.onDragRowEnd),r.card.container.off("dragend",r.onDragRowEnd)})),y()(u()(r),"bindDragColEvent",(function(){r.card.container.on("dragover",r.onDragCol),r.card.container.on("drop",r.onDragColEnd),r.card.container.on("dragend",r.onDragColEnd)})),y()(u()(r),"bindDragRowEvent",(function(){r.card.container.on("dragover",r.onDragRow),r.card.container.on("drop",r.onDragRowEnd),r.card.container.on("dragend",r.onDragRowEnd)})),y()(u()(r),"onDragStartColsHeader",(function(e){e.stopPropagation();var t=r.card.selection.area;if(t&&t.total_col){var n=Object(a.a)(e.target).closest(r.card.template.COLS_HEADER_ITEM_CLASS);if(n[0]){var i=n.index(),o=r.card.selection.normalizeArea(),c=o.col_min,l=o.col_max;i<c||i>l||(r.colDragging=!0,r.rowDragging=!1,r.dragBar=n,r.colDraggingIndex={col_min:c,col_max:l},r.dragCount=r.card.selection.colCount(),r.dragBar.addClass("dragging"),r.dragBar.find(".drag-info").html("正在移动 ".concat(r.dragCount," 列")),r.colsHeader.addClass("dragging"),ki(e),r.bindDragColEvent())}}})),y()(u()(r),"onDragStartRowsHeader",(function(e){e.stopPropagation();var t=r.card.selection.area;if(t&&t.total_row){var n=Object(a.a)(e.target).closest(r.card.template.ROWS_HEADER_ITEM_CLASS);if(n[0]){var i=n.index(),o=r.card.selection.normalizeArea(),c=o.row_min,l=o.row_max;i<c||i>l||(r.rowDragging=!0,r.colDragging=!1,r.dragBar=n,r.rowDraggingIndex={row_min:c,row_max:l},r.dragCount=r.card.selection.rowCount(),r.dragBar.addClass("dragging"),r.dragBar.find(".drag-info").html("正在移动 ".concat(r.dragCount," 行")),r.rowsHeader.addClass("dragging"),ki(e),r.bindDragRowEvent())}}})),y()(u()(r),"onMouseDownColsHeader",(function(e){var t=r.card,n=t.template,i=t.selection;if(r.trigger=Object(a.a)(e.target).closest(n.COLS_HEADER_TRIGGER_CLASS),r.trigger[0])r.startChangeCol(r.trigger,e);else if(2===e.button){var o=Object(a.a)(e.target).closest(n.COLS_HEADER_ITEM_CLASS);if(!o[0])return;var c=o.index(),l=!1;if(i.area&&i.area.total_col){var s=i.normalizeArea(),u=s.col_min,d=s.col_max;c>=u&&c<=d&&(l=!0)}l||r.emit("clickColsHeader",c),r.showContextMenu(e)}})),y()(u()(r),"startChangeCol",(function(e,t){t.stopPropagation(),t.preventDefault(),r.emit("startChangeCellSize"),r.dragging="col",r.draggingX=t.clientX,r.currentCol=Object(a.a)(e[0].parentNode),r.currentColWidth=Si(r.currentCol[0]),r.width=Si(r.colsHeader[0]),r.currentColIndex=r.currentCol.index(),r.bindChangeSizeEvent()})),y()(u()(r),"onMouseDownRowsHeader",(function(e){var t=r.card,n=t.template,i=t.selection;if(r.trigger=Object(a.a)(e.target).closest(n.ROWS_HEADER_TRIGGER_CLASS),r.trigger[0])r.startChangeRow(r.trigger,e);else if(2===e.button){var o=Object(a.a)(e.target).closest(n.ROWS_HEADER_ITEM_CLASS);if(!o[0])return;var c=o.index(),l=!1;if(i.area&&i.area.total_row){var s=i.normalizeArea(),u=s.row_min,d=s.row_max;c>=u&&c<=d&&(l=!0)}l||r.emit("clickRowsHeader",c),r.showContextMenu(e)}})),y()(u()(r),"startChangeRow",(function(e,t){t.stopPropagation(),t.preventDefault(),r.emit("startChangeCellSize"),r.dragging="row",r.draggingY=t.clientY,r.currentRow=Object(a.a)(e[0].parentNode),r.currentRowHeight=Ri(r.currentRow[0]),r.currentRowIndex=r.currentRow.index(),r.bindChangeSizeEvent()})),y()(u()(r),"onChangeSize",(function(e){r.dragging&&("row"===r.dragging?r.onChangeRowHeight(e):"col"===r.dragging&&r.onChangeColWidth(e))})),y()(u()(r),"onChangeColWidth",(function(e){var t=e.clientX-r.draggingX,n=Math.max(r.MIN_WIDTH,r.currentColWidth+t);t=n-r.currentColWidth;var a=r.width+t;r.currentCol.css("width",n+"px"),r.colsHeader.css("width",a+"px");var i=r.viewport[0],o=wi(i),c=Ei(r.currentCol[0])+Si(r.currentCol[0]);c-i.scrollLeft+20>o.width?i.scrollLeft=c+20-o.width:i.scrollLeft+o.width===i.scrollWidth&&(i.scrollLeft=Math.max(0,a+34-o.width)),r.clearActiveStatus(),r.hideContextMenu(),r.renderRowBars(),r.renderColSplitBars(),r.changeColWidth(n,a)})),y()(u()(r),"onChangeRowHeight",(function(e){var t=e.clientY-r.draggingY,n=Math.max(r.MIN_HEIGHT,r.currentRowHeight+t);t=n-r.currentRowHeight,r.currentRow.css("height",n+"px"),r.clearActiveStatus(),r.hideContextMenu(),r.renderRowSplitBars(),r.changeRowHeight(n),r.emit("heightchanging")})),y()(u()(r),"changeColWidth",(function(e){var t=r.card.tableRoot.find("col");Object(a.a)(t[r.currentColIndex]).attr("width",e),r.updateTableWidth()})),y()(u()(r),"changeRowHeight",(function(e){var t=r.card.tableRoot.find("tr");Object(a.a)(t[r.currentRowIndex]).css("height",e+"px")})),y()(u()(r),"renderColSplitBars",(function(){r.trigger.addClass("dragging").css("height",r.height+24+"px")})),y()(u()(r),"renderRowSplitBars",(function(){var e=Math.min(Si(r.viewport[0]),r.width);r.trigger.addClass("dragging").css("width",e+24+"px")})),y()(u()(r),"onChangeSizeEnd",(function(e){"mouseleave"===e.type&&r.card.container.contains(e.toElement)||r.dragging&&(r.trigger.removeClass("dragging"),"col"===r.dragging&&r.trigger.css("height","17px"),"row"===r.dragging&&r.trigger.css("width","17px"),r.dragging=null,r.renderRowBars(),r.unBindChangeSizeEvent(),r.width=Si(r.card.tableRoot[0]),r.height=Ri(r.card.tableRoot[0]),r.emit("sizeChanged"))})),y()(u()(r),"hide",(function(){r.tableWrapper.removeClass("editing"),r.hideContextMenu(),r.hideMultiAddition()})),y()(u()(r),"show",(function(){r.tableWrapper.addClass("editing")})),y()(u()(r),"clearActiveStatus",(function(){var e=r.card.template,t=r.colsHeader.find(e.COLS_HEADER_ITEM_CLASS),n=r.rowsHeader.find(e.ROWS_HEADER_ITEM_CLASS);t.removeClass("active"),t.removeClass("selected"),t.removeClass("no-dragger"),t.removeClass("multi-selected"),n.removeClass("active"),n.removeClass("selected"),n.removeClass("multi-selected"),n.removeClass("no-dragger"),r.tableHeader.removeClass("selected")})),y()(u()(r),"activeHeader",(function(){var e=r.card,t=e.selection,n=e.template,i=t.area,o=t.getTableModel();if(r.clearActiveStatus(),i){for(var c=r.colsHeader.find(n.COLS_HEADER_ITEM_CLASS),l=r.rowsHeader.find(n.ROWS_HEADER_ITEM_CLASS),s=i.total_col,u=i.total_row,d=i.total_table,f=t.normalizeArea(),p=f.row_min,h=f.row_max,m=f.col_min,g=f.col_max,v=h>p,y=g>m,b=p;b<=h;b++)Object(a.a)(l[b]).addClass("active"),(u||d)&&Object(a.a)(l[b]).addClass("selected"),v?Object(a.a)(l[b]).addClass("multi-selected"):Object(a.a)(l[b]).removeClass("multi-selected"),d&&Object(a.a)(l[b]).addClass("no-dragger");for(var k=m;k<=g;k++)Object(a.a)(c[k]).addClass("active"),(s||d)&&Object(a.a)(c[k]).addClass("selected"),y?Object(a.a)(c[k]).addClass("multi-selected"):Object(a.a)(c[k]).removeClass("multi-selected"),d&&Object(a.a)(c[k]).addClass("no-dragger");0===p&&h===o.rows-1&&0===m&&g===o.cols-1?r.tableHeader.addClass("selected"):r.tableHeader.removeClass("selected")}})),y()(u()(r),"removeRow",(function(e){var t=r.card.template,n=r.rowsHeader.find(t.ROWS_HEADER_ITEM_CLASS);r.rowsHeader[0].removeChild(n[e])})),y()(u()(r),"removeCol",(function(e){var t=r.card.template,n=r.colsHeader.find(t.COLS_HEADER_ITEM_CLASS);r.colsHeader[0].removeChild(n[e]),r.updateTableWidth()})),y()(u()(r),"clickRowsHeader",(function(e){var t=r.card.template;if(!Object(a.a)(e.target).closest(t.ROWS_HEADER_TRIGGER_CLASS)[0]){var n=Object(a.a)(e.target).closest(t.ROWS_HEADER_ITEM_CLASS);n[0]&&r.emit("clickRowsHeader",n.index())}})),y()(u()(r),"clickColsHeader",(function(e){var t=r.card.template;if(!Object(a.a)(e.target).closest(t.COLS_HEADER_TRIGGER_CLASS)[0]){var n=Object(a.a)(e.target).closest(t.COLS_HEADER_ITEM_CLASS);n[0]&&r.emit("clickColsHeader",n.index())}})),y()(u()(r),"clickTableHeader",(function(){r.emit("clickTableHeader")})),y()(u()(r),"handleClickContainer",(function(e){var t=r.card.template,n=Object(a.a)(e.target).closest("td");Object(a.a)(e.target).closest(t.MULTI_ADDITION_CLASS).length||r.hideMultiAddition(),(n[0]||Object(a.a)(e.target).closest(".mask")[0])&&(2===e.button?(e.preventDefault(),r.showContextMenu(e)):r.hideContextMenu())})),y()(u()(r),"handleHoverMenu",(function(e){var t=Object(a.a)(e.target).closest(".table-menubar-item");if(t[0]&&(e.stopPropagation(),!t.hasClass("disabled"))){var n=t.attr("data-action");r.card.selection.preview(n)}})),y()(u()(r),"handleLeaveMenu",(function(e){e.stopPropagation(),r.card.selection.preview()})),y()(u()(r),"handleAdditionColBtnEvent",(function(e,t){"mouseover"===e?r.showColIndicator(t):"mouseout"===e?r.hideIndicator():"click"===e&&(r.hideIndicator(),r.card.command.insertColAt(Object(a.a)(t).index()+1,1,!1,!1))})),y()(u()(r),"handleAdditionRowBtnEvent",(function(e,t){"mouseover"===e?r.showRowIndicator(t):"mouseout"===e?r.hideIndicator():"click"===e&&(r.hideIndicator(),r.card.command.insertRowAt(Object(a.a)(t).index()+1,1,!1,!1))})),y()(u()(r),"handleDeleteColBtnEvent",(function(){r.card.command.removeCol(!1)})),y()(u()(r),"handleDeleteRowBtnEvent",(function(){r.card.command.removeRow(!1)})),y()(u()(r),"handleClickMenu",(function(e){var t=Object(a.a)(e.target).closest(".table-menubar-item");if(t[0]){if(e.stopPropagation(),!t.hasClass("disabled")){var n=t.attr("data-action");r.card.command[n]()}r.hideContextMenu()}})),y()(u()(r),"hideContextMenu",(function(){r.contextVisible&&(r.contextVisible=!1,r.menuBar.css("display","none"))})),y()(u()(r),"getMenuDisabled",(function(e){switch(e){case"splitCell":return!r.card.selection.hasMergeCell();case"mergeCell":return r.card.selection.isSingleArea();case"mockPaste":return!r.card.command.hasCopyData();case"removeCol":case"insertColLeft":case"insertColRight":return r.card.selection.isRowSelected();case"removeRow":case"insertRowUp":case"insertRowDown":return r.card.selection.isColSelected();default:return!1}})),y()(u()(r),"showContextMenu",(function(e){var t=r.card.selection.area;if(Object(a.a)(e.target).closest("td")[0]||t){var n=r.menuBar.find(r.card.template.MENUBAR_ITEM_CLASS),i=r.menuBar.find(r.card.template.SPLIT_LINE_CLASS),o=Math.min(Math.max(120,document.body.offsetHeight-500),e.clientY);r.menuBar.children().removeClass("disabled"),n.each((function(e){var t=Object(a.a)(e).attr("data-action");r.getMenuDisabled(t)&&Object(a.a)(e).addClass("disabled")})),i.each((function(e){var t=Object(a.a)(e),n=t.next();if(n)for(;n;){if(n.hasClass("split"))return void t.addClass("disabled");if(!n.hasClass("disabled"))return;n=n.next()}else t.addClass("disabled")})),r.menuBar.css("left",e.clientX+30+"px"),r.menuBar.css("top",o+"px"),r.menuBar.css("display","block"),r.contextVisible=!0}})),y()(u()(r),"focusTextArea",(function(){a.r.log("focusTextArea"),r.focusTimer&&clearTimeout(r.focusTimer),r.focusTimer=setTimeout((function(){r.textArea[0].value="",r.textArea[0].blur(),r.textArea[0].focus()}),100)})),y()(u()(r),"filterEvent",(function(e){var t=r.card.template,n=(e.target||e.srcElement).tagName.toLocaleUpperCase();return!!Object(a.a)(e.target).closest(t.TABLE_TEXTAREA_CLASS)[0]||!("INPUT"===n||"SELECT"===n||"TEXTAREA"===n)})),y()(u()(r),"bindChangeSizeEvent",(function(){r.colsHeader.addClass("resize"),r.rowsHeader.addClass("resize"),document.addEventListener("mousemove",r.onChangeSize),document.addEventListener("mouseup",r.onChangeSizeEnd),document.addEventListener("mouseleave",r.onChangeSizeEnd)})),y()(u()(r),"unBindChangeSizeEvent",(function(){r.colsHeader.removeClass("resize"),r.rowsHeader.removeClass("resize"),document.removeEventListener("mousemove",r.onChangeSize),document.removeEventListener("mouseup",r.onChangeSizeEnd),document.removeEventListener("mouseleave",r.onChangeSizeEnd)})),y()(u()(r),"onMultiChangeRowCol",(function(e,t){var n=r.card.selection.getTableModel(),a=n.rows,i=n.cols;"row"===t&&((e=Math.max(r.contentRow+1,e))>a?r.card.command.insertRow("end",e-a):e<a&&(r.card.selection.selectRows(e,a-1),r.card.command.removeRow())),"col"===t&&((e=Math.max(r.contentCol+1,e))>i?r.card.command.insertCol("end",e-i):e<i&&(r.card.selection.selectCols(e,i-1),r.card.command.removeCol())),r.card.selection.clear()})),y()(u()(r),"showMultiAddition",(function(e,t){if(Object(a.a)(e.target).closest(".multi-trigger")[0]){var n=e.offsetX,i=e.offsetY,o=e.clientX,c=e.clientY;r.card.selection.clear();var l,s,u,d,f,p,h,m,g=function(e){for(var t=e.table,n=e.rows,r=e.cols,a=n-1,i=r-1,o=!1,c=!1;a>0&&!o;){for(var l=0;l<r;l++)if(!Di(t,a,l)){o=!0;break}o||a--}for(;i>0&&!c;){for(var s=0;s<n;s++)if(!Di(t,s,i)){c=!0;break}c||i--}return{row:a,col:i}}(r.card.selection.getTableModel()),v=g.row,y=g.col;r.contentRow=v,r.contentCol=y,"row"===t?(l="auto",u=0,s="auto",d="-2px",f="absolute",p=r.card.selection.getTableModel().rows,h=v+1,m=Math.max(h+50,p)):"col"===t&&(f="fixed",l=Math.max(0,o-n-28)+"px",s=c-i-17+"px",u="auto",d="auto",p=r.card.selection.getTableModel().cols,h=y+1,m=Math.max(h+10,p)),r.multiAddition.css({left:l,top:s,right:u,bottom:d,position:f,display:"block"}),r.multiAdditionVisible=!0,O.a.unmountComponentAtNode(r.multiAddition[0]),O.a.render(C.a.createElement(I.a,{defaultValue:p,min:h,max:m,step:1,onChange:function(e){r.onMultiChangeRowCol(Math.max(h,Math.min(m,e)),t)}}),r.multiAddition[0])}})),y()(u()(r),"hideMultiAddition",(function(){r.multiAdditionVisible&&(r.multiAdditionVisible=!1,r.multiAddition.css("display","none"))})),y()(u()(r),"refresh",(function(e){r.hideContextMenu(),r.render(e),r.show(),r.activeHeader(),r.focusTextArea()})),y()(u()(r),"bindEvents",(function(){r.colsHeader.on("mousedown",r.onMouseDownColsHeader).on("click",r.clickColsHeader).on("dragstart",r.onDragStartColsHeader),r.rowsHeader.on("mousedown",r.onMouseDownRowsHeader).on("click",r.clickRowsHeader).on("dragstart",r.onDragStartRowsHeader),r.tableHeader.on("click",r.clickTableHeader),r.card.container.on("mousedown",r.handleClickContainer),r.card.container.on("dragover",(function(e){return e.stopPropagation()})),r.menuBar.on("click",r.handleClickMenu),r.menuBar.on("mouseover",r.handleHoverMenu),r.menuBar.on("mouseleave",r.handleLeaveMenu),r.textArea.on("paste",r.card.command.shortcutPaste),r.textArea.on("copy",r.card.command.shortcutCopy),r.textArea.on("cut",r.card.command.shortcutCut),["mouseover","mouseout","click"].forEach((function(e){r.colsHeader.on(e,(function(t){var n=t.target;n.classList.contains(Ai)&&r.handleAdditionColBtnEvent(e,n.parentNode.parentNode)}),!1),r.rowsHeader.on(e,(function(t){var n=t.target;n.classList.contains(Ai)&&r.handleAdditionRowBtnEvent(e,n.parentNode.parentNode)}),!1)})),r.colsHeader.on("click",(function(e){var t=e.target;t.classList.contains("table-header-delete-btn")&&r.handleDeleteColBtnEvent(t.parentNode.parentNode)}),!1),r.rowsHeader.on("click",(function(e){var t=e.target;t.classList.contains("table-header-delete-btn")&&r.handleDeleteRowBtnEvent(t.parentNode.parentNode)}),!1)})),r.card=e,r.dragging=!1,r.draggingX=0,r.draggingY=0,r.width=0,r.height=0,r.MIN_WIDTH=40,r.MIN_HEIGHT=33,r.currentCol=null,r.currentColWidth=0,r.currentColIndex=0,r.currentRow=null,r.currentRowHeight=0,r.currentRowIndex=0,r._isRepaired=!1,r}return l()(n,[{key:"showColIndicator",value:function(e){var t=e.parentNode.getBoundingClientRect(),n=e.getBoundingClientRect();this.indicator.addClass("col-line").removeClass("row-line"),this.indicator.css({top:"40px",left:n.right-t.left+"px",width:"2px"})}},{key:"showRowIndicator",value:function(e){var t=e.parentNode.getBoundingClientRect(),n=e.getBoundingClientRect();this.indicator.addClass("row-line").removeClass("col-line"),this.indicator.css({top:n.bottom-t.top+"px",left:0,width:this.width+"px"})}},{key:"hideIndicator",value:function(){this.indicator.removeClass("col-line").removeClass("row-line")}},{key:"init",value:function(){var e=this.card,t=e.container,n=e.template;this.colsHeader=t.find(n.COLS_HEADER_CLASS),this.rowsHeader=t.find(n.ROWS_HEADER_CLASS),this.multiAddition=t.find(n.MULTI_ADDITION_CLASS),this.tableHeader=t.find(n.HEADER_CLASS),this.menuBar=t.find(n.MENUBAR_CLASS),this.textArea=t.find(n.TABLE_TEXTAREA_CLASS),this.viewport=t.find(n.VIEWPORT),this.placeholder=t.find(n.PLACEHOLDER_CLASS),this.tableWrapper=t.find(n.TABLE_WRAPPER_CLASS),this.indicator=t.find(n.INDICATOR_CLASS),this.bindEvents()}},{key:"updateTableWidth",value:function(){var e=this.card.tableRoot.find("col"),t=this.colsHeader.find(this.card.template.COLS_HEADER_ITEM_CLASS),n=0;return e.each((function(e,r){var i=parseInt(Object(a.a)(e).attr("width"));n+=i,Object(a.a)(t[r]).css("width",i+"px")})),Number.isNaN(n)?Ci(this.card.tableRoot[0]):(this.card.tableRoot.css("width",n+"px"),this.colsHeader.css("width","".concat(n,"px")),this.width=n,n)}}]),n}();function Pi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ji(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pi(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Mi=function(e){f()(n,k.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),r=t.call(this),y()(u()(r),"insertColLeft",(function(){r.insertCol("left")})),y()(u()(r),"insertColRight",(function(){r.insertCol("right")})),y()(u()(r),"insertRowUp",(function(){r.insertRow("up")})),y()(u()(r),"insertRowDown",(function(){r.insertRow("down")})),y()(u()(r),"insertColAt",(function(e,t,n,i,o){var c=r.card,l=c.container,s=c.selection,u=c.tableRoot,d=c.template,f=s.getTableModel().table,p=(n=0===e||n)?e:e-1,h=n?"after":"before",m=l.find(d.COLS_HEADER_ITEM_CLASS)[p],g=l.find(d.COLS_HEADER_CLASS),v=0;o||(o=m.offsetWidth),$e()(o)?o.forEach((function(e){v+=e})):Qe()(o)&&(v=t*o);var y=g[0].offsetWidth+v;g.css("width",y+"px"),u.css("width",y+"px");for(var b=u.find("colgroup"),k=l.find("tr"),w=u.find("col"),x=w[p].cloneNode(),_=e,C=t;C>0;){var E=Object(a.a)(m.outerHTML);Object(a.a)(m)[h](E);var O=x.cloneNode();Object(a.a)(O).attr("width",$e()(o)?o[t-C]:o);var S=w[_];b[0].insertBefore(O,S),C--}function R(e,t,n,r){for(var a=0;a<n;a++){var i=e.insertCell(t);i.innerHTML=d.EmptyCell,i.rowSpan=r.rowSpan,ui(r,i)}}if(k.each((function(e,r){var a=f[r][p],i=s.getTdIndex(r,_);if(a.isMulti)!n&&a.colSpan>1?a.element.colSpan=a.colSpan+t:R(e,i,t,a.element);else if(a.isEmpty){if(a.parent.col===p)return;var o=f[a.parent.row][a.parent.col];a.parent.col<_&&a.parent.col+o.colSpan-1>=_?o.element.colSpan=o.colSpan+t:a.parent.row===r&&R(e,i,t,o.element)}else R(e,i,t,a.element)})),r.emit("actioned","insertCol",i),s.area){var D=Object.assign(s.area,{col:e,col2:e+t-1});s.selectArea(D)}})),y()(u()(r),"insertCol",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,a=r.card.selection,i=a.area,o=a.getTableModel(),c="left"===e,l="end"===e||!e,s=r.card.container.find(r.card.template.COLS_HEADER_ITEM_CLASS),u=o.cols-1;if(!l&&(t=a.isSingleArea()?1:a.colCount(),i)){var d=a.normalizeArea(),f=d.col_min,p=d.col_max;u=c?f:p}var h=c?u:u+1,m=s[u].offsetWidth;if(r.insertColAt(h,t,c,n,m),l){var g=r.card.selection.viewport[0];g.scrollLeft=g.scrollWidth-g.offsetWidth}})),y()(u()(r),"removeCol",(function(e){var t=r.card,n=t.selection,a=t.tableRoot,i=t.controllBar,o=t.template,c=n.area,l=n.getTableModel();if(c){var s=l.table,u=c.col,d=c.col2,f=n.colCount(),p=Math.min(u,d),h=Math.max(u,d),m=a.find("colgroup"),g=a.find("tr"),v=m.find("col");if(h===v.length-1&&0===p)r.removeTable();else{for(var y=h;y>=p;y--)i.removeCol(y),v[y].remove();s.forEach((function(e,t){for(var n=h;n>=p;n--){var r=e[n];if(r.isEmpty){var a=s[r.parent.row][r.parent.col];if(r.parent.col<p){var i=Math.min(f,r.parent.col+a.colSpan-p);a.element.colSpan=a.colSpan-i}}else{if(r.isMulti){var c=n+r.colSpan-1>h,l=h+1-n;if(c){for(var u=0,d=0;d<=h;d++)e[d].isEmpty||u++;var m=g[t].insertCell(u);m.innerHTML=o.EmptyCell,m.colSpan=r.colSpan-l,m.rowSpan=r.rowSpan,ui(r.element,m)}}r.element.remove()}}})),r.emit("actioned","removeCol",e)}}})),y()(u()(r),"insertRowAt",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=r.card,c=o.container,l=o.selection,s=o.tableRoot,u=o.template,d=l.getTableModel(),f=d.table,p=(n=0===e||n)?"after":"before",h=n?e:e-1,m=c.find(u.ROWS_HEADER_ITEM_CLASS),g=m[h],v=n?h:h+1,y=f[h],b=[];y.forEach((function(e,r){if(e.isMulti)!n&&e.rowSpan>1?e.element.rowSpan=e.rowSpan+t:b.push({tdBase:e.element});else if(e.isEmpty){var a=f[e.parent.row][e.parent.col];e.parent.row<v&&e.parent.row+a.rowSpan-1>=v?a.element.rowSpan=a.rowSpan+t:e.parent.row<h&&e.parent.col===r&&b.push({tdBase:a.element})}else b.push({tdBase:e.element})}));for(var k=t,w=function(){var e=s[0].insertRow(v);b.forEach((function(t){var n=e.insertCell();n.innerHTML=u.EmptyCell,n.colSpan=t.tdBase.colSpan,ui(t.tdBase,n)})),Object(a.a)(g)[p](Object(a.a)(g.outerHTML)),k--};k>0;)w();if(r.emit("actioned","insertRow",i),l.area){var x=Object.assign(l.area,{row:e,row2:e+t-1});l.selectArea(x)}r.card.onTableSizeChange()})),y()(u()(r),"insertRow",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,a=r.card.selection,i=a.area,o=a.getTableModel(),c="up"===e,l="end"===e||!e,s=o.rows-1;if(!l&&(t=a.isSingleArea()?1:a.rowCount(),i)){var u=i.row,d=i.row2;s=c?Math.min(u,d):Math.max(u,d)}var f=c?s:s+1;r.insertRowAt(f,t,c,n)})),y()(u()(r),"removeRow",(function(e){var t=r.card,n=t.selection,a=t.tableRoot,i=t.controllBar,o=t.template,c=n.area,l=n.getTableModel();if(c){var s=l.table,u=c.row,d=c.row2,f=n.rowCount(),p=Math.min(u,d),h=Math.max(u,d),m=a.find("tr");if(h===l.rows-1&&0===p)r.removeTable();else{for(var g=function(e){s[e].forEach((function(t,r){if(t.isMulti&&t.rowSpan>1&&e+t.rowSpan-1>h){var a=n.getTdIndex(h+1,r),i=m[h+1].insertCell(a),c=h-e+1;i.innerHTML=o.EmptyCell,i.colSpan=t.colSpan,i.rowSpan=t.rowSpan-c}if(t.isEmpty){var l=s[t.parent.row][t.parent.col];if(t.parent.row<p){var u=Math.min(f,t.parent.row+l.rowSpan-p);l.element.rowSpan=l.rowSpan-u}}}))},v=p;v<=h;v++)g(v);for(var y=h;y>=p;y--)a[0].deleteRow(y),i.removeRow(y);r.emit("actioned","removeRow",e),r.card.onTableSizeChange()}}})),y()(u()(r),"mergeCell",(function(e){var t=r.card.selection,n=t.area;if(n){r.splitCell();var a,i=n.row,o=n.col,c=n.row2,l=n.col2,s=Math.min(i,c),u=Math.min(o,l),d=t.rowCount(),f=t.colCount(),p=[];t.each((function(e,t,n){if(n===u&&t===s)return(a=e.element).rowSpan=d,void(a.colSpan=f);e.element&&(""!==e.element.innerText.trim()&&p.unshift(e.element.innerHTML),e.element.remove())})),a.innerHTML=a.innerHTML+p.join(""),r.emit("actioned","mergeCell",e)}})),y()(u()(r),"splitCell",(function(e){var t=r.card,n=t.selection,a=t.tableRoot,i=t.template,o=n.area,c=n.getTableModel();if(o){var l=c.table,s=a.find("tr"),u=n.normalizeArea(),d=u.row_min,f=u.row_max,p=u.col_min,h=u.col_max;n.each((function(e,t,r){if(e.isMulti){if(e.element.colSpan=1,e.element.rowSpan=1,t+e.rowSpan-1>f){var a=f+1,o=r,c=n.getTdIndex(a,o),u=s[a].insertCell(c);u.rowSpan=t+e.rowSpan-1-f,u.colSpan=e.colSpan,ui(e.element,u),u.innerHTML=i.EmptyCell}if(r+e.colSpan-1>h){var m=t,g=h+1,v=n.getTdIndex(m,g),y=h-r,b=s[m].insertCell(v+y);b.rowSpan=Math.min(e.rowSpan,f-t+1),b.colSpan=r+e.colSpan-1-h,ui(e.element,b),b.innerHTML=i.EmptyCell}}if(e.isEmpty){var k=e.parent.row,w=e.parent.col,x=l[k][w],_=k+x.rowSpan-1,C=w+x.colSpan-1;if(k<d){var E=h>=C;if(x.element.rowSpan=d-k,x.element.colSpan=E?x.colSpan:h-w+1,!E&&r===h&&t===d){var O=h+1,S=k,R=n.getTdIndex(S,O),D=s[S].insertCell(R);D.rowSpan=x.rowSpan,D.colSpan=C-h,ui(x.element,D),D.innerHTML=i.EmptyCell}if(_>f&&r===Math.min(C,h)&&t===d){var A=f+1,T=w,P=n.getTdIndex(A,T),j=s[A].insertCell(P);j.rowSpan=_-f,j.colSpan=E?x.colSpan:h-w+1,ui(x.element,j),j.innerHTML=i.EmptyCell}}if(w<p){var M=f>=_;if(x.element.colSpan=p-w,x.element.rowSpan=M?x.rowSpan:f-k+1,!M&&t===f&&r===p){var N=f+1,L=w,I=n.getTdIndex(N,L),z=s[N].insertCell(I);z.colSpan=x.colSpan,z.rowSpan=_-f,ui(x.element,z),z.innerHTML=i.EmptyCell}if(C>h&&t===Math.min(_,f)&&r===h){var B=k,F=h+1,V=n.getTdIndex(B,F),U=s[B].insertCell(V);U.colSpan=C-h,U.rowSpan=M?x.rowSpan:f-k+1,ui(x.element,U),U.innerHTML=i.EmptyCell}}var q=n.getTdIndex(t,r);s[t].insertCell(q).innerHTML=i.EmptyCell}}),!0),r.emit("actioned","splitCell",e)}})),y()(u()(r),"changed",(function(){r.tableCleared=!1})),y()(u()(r),"clear",(function(){var e=r.card,t=e.selection,n=e.subEngine,a=e.template,i=t.area;if(i&&!n){if(i.total_table){if(r.tableCleared)return r.removeTable(),void(r.tableCleared=!1);r.tableCleared=!0}if(i.total_row){if(r.rowCleared)return r.removeRow(),void(r.rowCleared=!1);r.rowCleared=!0}if(i.total_col){if(r.colCleared)return r.removeCol(),void(r.colCleared=!1);r.colCleared=!0}t.each((function(e){e.element&&(e.element.innerHTML=a.EmptyCell)})),r.emit("actioned","clear")}})),y()(u()(r),"clearFormat",(function(){var e=r.card.selection;e.area&&(e.each((function(e){e.element&&e.element.removeAttribute("style")})),r.emit("actioned","clearFormat"))})),y()(u()(r),"hasCopyData",(function(){return pi()})),y()(u()(r),"mockPaste",(function(e){var t=pi();t&&r.paste(t,e)})),y()(u()(r),"shortcutPaste",(function(e){e.preventDefault(),e.stopPropagation();var t=a.c.getClipboardData(e);r.paste(t)})),y()(u()(r),"paste",(function(e,t){var n=r.card.selection,i=n.area,o=n.getTableModel();if(i){var c=n.normalizeArea(),l=c.row_min,s=c.col_min,u=c.row_max,d=c.col_max,f=l===u&&s===d,p=n.isSingleArea(),h=e.html,m=e.text,g=new a.i(h,r.card.engine.schema,r.card.engine.conversion).toValue(),v=function(e){for(var t=[],n=0,r=e.length-1;e[n]&&e[n].tagName&&"span"===e[n].tagName.toLowerCase()&&""===e[n].innerText.trim();)n++;for(;e[r]&&e[r].tagName&&"span"===e[r].tagName.toLowerCase()&&""===e[r].innerText.trim();)r--;if(n<=r)for(var i=n;i<=r;i++)t.push(e[i]);return t.length?Object(a.a)(t):e}(Object(a.a)(g));if("table"===v.name){li(v[0]);var y=oi(v[0]),b=y.rows,k=y.cols,w=y.table[0][0],x=w.rowSpan,_=w.colSpan;if(x===b&&_===k&&p)return si(y.table[0][0].element,o.table[l][s].element),void r.emit("actioned","paste",t);if(f){if(k+s>o.cols){var C=k+s-o.cols;r.insertCol("end",C,!0)}if(b+l>o.rows){var E=b+l-o.rows;r.insertRow("end",E,!0)}n.selectArea({row:l,col:s,row2:l+b-1,col2:s+k-1})}var O=n.area,S=Math.min(O.row,O.row2),R=Math.max(O.row,O.row2),D=Math.min(O.col,O.col2),A=Math.max(O.col,O.col2);r.splitCell(!0),n.each((function(e,t,n){var r=(t-S)%b,a=(n-D)%k,i=y.table[r][a];if(i)return i.isMulti?(e.element.rowSpan=Math.min(i.rowSpan,R-t+1),e.element.colSpan=Math.min(i.colSpan,A-n+1),void si(i.element,e.element)):void(i.isEmpty?e.element.remove():i.element&&si(i.element,e.element))}))}else{r.mergeCell(!0);var T=Object(a.a)(o.table[l][s].element);r.card.createEditor(T,h||new a.o(m).toHTML())}r.emit("actioned","paste",t)}})),y()(u()(r),"copy",(function(){var e=r.card.selection.getSelectionHtml();e&&(a.c.copyNode(e),fi(e))})),y()(u()(r),"mockCopy",(function(){var e=r.card.selection.getSelectionHtml();e&&fi(e)})),y()(u()(r),"shortcutCopy",(function(e){var t=r.card.selection.getSelectionHtml();t&&(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",Object(a.a)(t)[0].innerText),e.clipboardData.setData("text/html",t),fi(t),e.preventDefault())})),y()(u()(r),"cut",(function(){r.copy(),r.clear()})),y()(u()(r),"shortcutCut",(function(e){r.shortcutCopy(e),r.clear()})),y()(u()(r),"removeTable",(function(){r.emit("tableRemoved"),r.card.engine.change.removeCard(r.card.cardRoot)})),y()(u()(r),"alignLeft",(function(){r.align("left")})),y()(u()(r),"alignCenter",(function(){r.align("center")})),y()(u()(r),"alignRight",(function(){r.align("right")})),y()(u()(r),"align",(function(e){var t=r.card.selection;t.area&&(t.each((function(t){t.element&&Object(a.a)(t.element).css("text-align",e)})),r.emit("actioned","align"))})),y()(u()(r),"valign",(function(e){var t=r.card.selection;t.area&&(t.each((function(t){t.element&&Object(a.a)(t.element).css("vertical-align",e)})),r.emit("actioned","align"))})),y()(u()(r),"background",(function(e){var t=r.card.selection;t.area&&(t.each((function(t){t.element&&(e?Object(a.a)(t.element).css("background-color",e):Object(a.a)(t.element).css("background-color",""))})),r.emit("actioned","background"))})),y()(u()(r),"fontcolor",(function(e){var t=r.card.selection;t.area&&(t.each((function(t){t.element&&Object(a.a)(t.element).css("color",e||"#666")})),r.emit("actioned","fontcolor"))})),y()(u()(r),"toggleBorder",(function(){var e=r.card.tableRoot.hasClass("lake-no-border");e?r.card.tableRoot.removeClass("lake-no-border"):r.card.tableRoot.addClass("lake-no-border"),r.card.value=ji(ji({},r.card.value),{},{hideBorder:!e}),r.card.setCardValue(!1),r.emit("actioned","toggleBorder",!1)})),y()(u()(r),"queryState",(function(e){var t=r.card,n=t.selection,i=t.engine,o=t.subEngine;if("border"===e)return r.card.tableRoot.hasClass("lake-no-border");if(o)return o.command.queryState(e);if(!n.area)return!1;var c,l=n.getSelectionHtml(),s=""!==Object(a.a)(l)[0].innerText.trim(),u=!1;return n.each((function(t){if(t.element&&s&&!u&&""!==t.element.innerText.trim()){Object(a.a)(t.element).attr("contenteditable",!0);var n=i.change.getRange();n.selectNodeContents(t.element),i.change.select(n),i.change.marks=a.b.getActiveMarks(n),c=i.command.queryState(e),u=!0,Object(a.a)(t.element).removeAttr("contenteditable")}})),c})),y()(u()(r),"fill",(function(e){var t=r.card.selection,n=oi(e[0]),a=t.normalizeArea(),i=a.row_min,o=a.col_min;t.each((function(e,t,r){var a=t-i,c=r-o,l=n.table[a][c];l&&e.element&&e.element&&l.element&&(e.element.innerHTML=l.element.innerHTML)}))})),y()(u()(r),"execute",(function(){var e,t=r.card,n=t.selection,i=t.cardRoot,o=t.engine,c=t.subEngine,l=t.state;if(!l.readonly)if(c){var s;(s=c.command).execute.apply(s,arguments)}else{var u=n.area;if(u){var d=n.getSelectionHtml();d=new a.i(d,o.schema,o.conversion).toValue(),d=a.n.transformCustomTags(d);var f=Object(a.a)(d);i.append(f),f.attr("contenteditable",!0),f.addClass("tmp-table");var p=o.change.getRange();p.selectNodeContents(f[0]),o.change.select(p),(e=o.command).execute.apply(e,arguments),f.removeAttr("contenteditable"),r.fill(f),f.remove(),r.emit("actioned","fontstyle")}}})),r.card=e,r}return n}();var Ni=function(e){f()(n,k.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),r=t.call(this),y()(u()(r),"selectFirstCell",(function(){var e=r.card.tableRoot.find("td");r.selectCell(e[0])})),y()(u()(r),"rowCount",(function(){if(!r.area)return 0;var e=r.area,t=e.row,n=e.row2;return Math.abs(t-n)+1})),y()(u()(r),"colCount",(function(){if(!r.area)return 0;var e=r.area,t=e.col,n=e.col2;return Math.abs(t-n)+1})),y()(u()(r),"selectCell",(function(e,t){if(e&&e.tagName&&"td"===e.tagName.toLowerCase()){var n,a=r.getTableModel().table,i=e.parentNode,o=e.rowSpan,c=e.colSpan,l=i.rowIndex;a[l].forEach((function(t,r){t.element===e&&(n=r)}));var s={row:l,col:n,row2:l+o-1,col2:n+c-1};if(!t||!r.area)return r.area=s,delete r.from_col,delete r.from_row,delete r.shift_base_area,void r.renderActiveBox();var u=r.normalizeArea(),d=u.row_min,f=u.row_max,p=u.col_min,h=u.col_max;if("contextmenu"===t){if(d<=l&&l<=f&&p<=n&&n<=h)return;return r.area=s,delete r.shift_base_area,void r.renderActiveBox()}if("shift"===t)return r.shift_base_area=r.shift_base_area||r.area,r.area=r.getAdjustArea(r.shift_base_area,s),void r.renderActiveBox();switch(t){case"drag_nw":r.base_area=r.base_area||r._getSouthEastTdArea();break;case"drag_se":r.base_area=r.base_area||r._getNorthWestTdArea();break;case"drag_n":r.row_base=void 0!==r.row_base?r.row_base:f;break;case"drag_s":r.row_base=void 0!==r.row_base?r.row_base:d;break;case"drag_w":r.col_base=void 0!==r.col_base?r.col_base:h;break;case"drag_e":r.col_base=void 0!==r.col_base?r.col_base:p}r.base_area&&(r.area=r.getAdjustArea(r.base_area,s)),void 0!==r.col_base&&(r.area.col=r.col_base,r.area.col2=n),void 0!==r.row_base&&(r.area.row=r.row_base,r.area.row2=l),r.renderActiveBox()}})),y()(u()(r),"getAdjustArea",(function(e,t){for(var n=r.getTableModel().table,a=e.row,i=e.col,o=e.row2,c=e.col2,l=t.row,s=t.row2,u=t.col,d=t.col2,f=Math.min(a,o,l,s),p=Math.max(a,o,l,s),h=Math.min(i,c,u,d),m=Math.max(i,c,u,d),g={row:f,col:h,row2:p,col2:m},v=f;v<=p;v++)for(var y=h;y<=m;y++){if(n[v][y].isEmpty){var b=n[v][y].parent;if(b.row<f||b.col<h){var k=n[b.row][b.col],w={row:b.row,col:b.col,row2:b.row+k.rowSpan-1,col2:b.col+k.colSpan-1};return r.getAdjustArea(g,w)}}if(n[v][y].isMulti){var x=n[v][y];if(v+x.rowSpan-1>p||y+x.colSpan-1>m){var _={row:v,col:y,row2:v+x.rowSpan-1,col2:y+x.colSpan-1};return r.getAdjustArea(g,_)}}}return g})),y()(u()(r),"isSingleArea",(function(){var e=u()(r).area,t=r.getTableModel().table;if(!e)return!1;var n=r.normalizeArea(),a=n.row_min,i=n.row_max,o=n.col_min,c=n.col_max,l=t[a][o];return a+l.rowSpan-1===i&&o+l.colSpan-1===c})),y()(u()(r),"hasMergeCell",(function(){if(!u()(r).area)return!1;var e=!1;return r.each((function(t){(t.isEmpty||t.isMulti)&&(e=!0)})),e})),y()(u()(r),"_getSouthEastTdArea",(function(){var e=u()(r).area,t=r.getTableModel().table;if(!e)return null;var n=r.normalizeArea(),a=n.row_max,i=n.col_max,o=t[a][i],c=a,l=i;return o.isEmpty&&(c=(o=t[o.parent.row][o.parent.col]).parent.row,l=o.parent.col),{row:c,col:l,row2:a,col2:i}})),y()(u()(r),"_getNorthWestTdArea",(function(){var e=u()(r).area,t=r.getTableModel().table;if(!e)return null;var n=r.normalizeArea(),a=n.row_min,i=n.col_min,o=t[a][i];return{row:a,col:i,row2:a+o.rowSpan-1,col2:i+o.colSpan-1}})),y()(u()(r),"selectCol",(function(e){var t=r.getTableModel();r.area={row:0,row2:t.rows-1,col:ae.a.shift&&r.area.total_col?r.area.col:e,col2:e,total_col:!0},r.renderActiveBox()})),y()(u()(r),"selectCols",(function(e,t){var n=r.getTableModel();r.area={row:0,row2:n.rows-1,col:e,col2:t,total_col:!0},r.renderActiveBox()})),y()(u()(r),"selectRow",(function(e){var t=r.getTableModel();r.area={row:ae.a.shift&&r.area.total_row?r.area.row:e,row2:e,col:0,col2:t.cols-1,total_row:!0},r.renderActiveBox()})),y()(u()(r),"selectRows",(function(e,t){var n=r.getTableModel();r.area={row:e,row2:t,col:0,col2:n.cols-1,total_row:!0},r.renderActiveBox()})),y()(u()(r),"selectArea",(function(e){r.area=e,r.renderActiveBox()})),y()(u()(r),"selectTable",(function(e){if(r.card.active&&(!e||!r.card.subEngine)){var t=u()(r).area,n=r.getTableModel();t&&t.total_table?r.clear():r.selectArea({row:0,row2:n.rows-1,col:0,col2:n.cols-1,total_table:!0})}})),y()(u()(r),"selectLeft",(function(e,t){if(!r.card.subEngine){var n=u()(r).area,a=r.getTableModel();if(n){var i=r.normalizeArea(),o=i.row_min,c=i.col_min,l=r.from_row||o,s=Math.max(c-1,0);r.from_row=r.from_row||l,0===c&&t&&l>0&&(s=a.cols-1,l-=1,r.from_row=l),delete r.from_col,r.selectTd(l,s)}}})),y()(u()(r),"selectRight",(function(e,t){if(!r.card.subEngine){var n=u()(r).area,a=r.getTableModel();if(n){var i=r.normalizeArea(),o=i.row_min,c=i.col_max,l=r.from_row||o,s=Math.min(c+1,a.cols-1);r.from_row=r.from_row||l,c+1===a.cols&&t&&(s=0,(l+=1)===a.rows&&r.card.command.insertRow("end"),r.from_row=l),delete r.from_col,r.selectTd(l,s)}}})),y()(u()(r),"selectUp",(function(){if(!r.card.subEngine&&u()(r).area){var e=r.normalizeArea(),t=e.row_min,n=e.col_min,a=Math.max(t-1,0),i=r.from_col||n;r.from_col=r.from_col||n,delete r.from_row,r.selectTd(a,i)}})),y()(u()(r),"selectDown",(function(){if(!r.card.subEngine){var e=u()(r).area,t=r.getTableModel();if(e){var n=r.normalizeArea(),a=n.row_max,i=n.col_min,o=Math.min(a+1,t.rows-1),c=r.from_col||i;r.from_col=r.from_col||i,delete r.from_row,r.selectTd(o,c)}}})),y()(u()(r),"selectTab",(function(e){r.card.subEngine&&r.card.removeEditor(),e.preventDefault(),ae.a.shift?r.selectLeft(e,!0):r.selectRight(e,!0)})),y()(u()(r),"selectEnter",(function(e){r.card.subEngine||(e.preventDefault(),r.selectDown())})),y()(u()(r),"getTableModel",(function(){return r.tableModel||r.refreshModel(),r.tableModel})),y()(u()(r),"selectTd",(function(e,t){var n=r.getTableModel().table,a=n[e][t];if(a.isEmpty){var i=n[a.parent.row][a.parent.col];r.selectArea({row:a.parent.row,col:a.parent.col,row2:a.parent.row+i.rowSpan-1,col2:a.parent.col+i.colSpan-1})}else{r.selectArea({row:e,col:t,row2:e+a.rowSpan-1,col2:t+a.colSpan-1});var o=parseInt(r.activeBox.css("left")),c=wi(r.viewport[0]);o<r.viewport[0].scrollLeft?r.viewport[0].scrollLeft=o:o+80>r.viewport[0].scrollLeft+c.width&&(r.viewport[0].scrollLeft=o-c.width+80)}})),y()(u()(r),"renderActiveBox",(function(){r.hideSubEditor(),r.reRenderActiveBox(),r.emit("select")})),y()(u()(r),"reRenderActiveBox",(function(e){var t=u()(r).area,n=r.getTableModel(),a=r.card.template;if(t){r.single=r.isSingleArea();var i,o,c,l,s=n.table,d=r.normalizeArea(),f=d.row_min,p=d.row_max,h=d.col_min,m=d.col_max,g=r.card.tableRoot[0],v=wi(g.tHead||g.tBodies[0]||g);if(r.single){var y=wi(s[f][h].element);i=y.left-v.left,o=y.top-v.top,c=y.width,l=y.height}else{var b=r.colsHeader.find(a.COLS_HEADER_ITEM_CLASS),k=r.rowsHeader.find(a.ROWS_HEADER_ITEM_CLASS);i=_i(b[h])-v.left,o=xi(k[f])-v.top,c=b[m].getBoundingClientRect().right-_i(b[h]),l=function(e){return e.getBoundingClientRect().bottom}(k[p])-xi(k[f])}r.showActiveBox(i,o,l,c,e),r.areaWidth=c,r.areaHeight=l,r.areaLeft=i,r.areaTop=o,r.reRenderSubEditor(),r.td=r.single?s[f][h].element:null}})),y()(u()(r),"showActiveBox",(function(e,t,n,a,i){var o=u()(r),c=o.activeBox,l=o.hideTextarea,s=c.find(".l"),d=c.find(".r"),f=c.find(".t"),p=c.find(".b"),h=c.find(".mask"),m=c.find(".mask-col"),g=c.find(".mask-row"),v=c.find(".se"),y=c.find(".n"),b=c.find(".s"),k=c.find(".w"),w=c.find(".e");c.removeClass("col"),c.removeClass("row"),c.removeClass("total"),c.removeClass("preview-mask-col"),c.removeClass("preview-mask-row"),r.area.total_col&&c.addClass("col"),r.area.total_row&&c.addClass("row"),r.area.total_table&&c.addClass("total"),"removeCol"===i&&c.addClass("preview-mask-col"),"removeRow"===i&&c.addClass("preview-mask-row"),s.css("height","".concat(n,"px")),d.css("height","".concat(n+1,"px")),d.css("left","".concat(a,"px")),f.css("width","".concat(a,"px")),p.css("top","".concat(n,"px")),p.css("width","".concat(a,"px")),v.css("left","".concat(a-3,"px")),v.css("top","".concat(n-3,"px")),y.css("top","-4px"),y.css("left","".concat(a/2-3,"px")),b.css("top","".concat(n-3,"px")),b.css("left","".concat(a/2-3,"px")),k.css("left","-4px"),k.css("top","".concat(n/2-3,"px")),w.css("left","".concat(a-3,"px")),w.css("top","".concat(n/2-3,"px")),h.css("width","".concat(a,"px")),h.css("height","".concat(n,"px")),m.css("width","".concat(a+1,"px")),m.css("height","".concat(Ri(r.rowsHeader[0])-33,"px")),m.css("top","-".concat(t,"px")),g.css("height","".concat(n+1,"px")),g.css("width","".concat(Si(r.colsHeader[0]),"px")),g.css("left","-".concat(e,"px")),c.css("left","".concat(e,"px")),c.css("top","".concat(t,"px")),c.css("display","block"),l.css("left","".concat(r.clickX+10,"px")),l.css("top","".concat(r.clickY-10,"px"))})),y()(u()(r),"showSubEditor",(function(){r.reRenderSubEditor(),r.editArea.css("display","table"),r.activeBox.addClass("editing")})),y()(u()(r),"reRenderSubEditor",(function(){r.editAreaContent=r.editArea.find(r.card.template.SUB_EDITOR_CONTENT_CLASS),r.editArea.css("width","".concat(r.areaWidth-1,"px")),r.editAreaContent.css("width","".concat(r.areaWidth-2,"px")),r.editAreaContent.css("max-width","".concat(r.areaWidth-2,"px")),r.editAreaContent.css("height","".concat(r.areaHeight,"px")),ui(r.td,r.editAreaContent)})),y()(u()(r),"hideSubEditor",(function(){var e=r.card.template;r.editArea.html(""),r.editArea[0].remove(),r.editArea=Object(a.a)(e.SubEditor),r.activeBox.append(r.editArea),r.activeBox.removeClass("editing")})),y()(u()(r),"hideActiveBox",(function(){r.activeBox.css("display","none")})),y()(u()(r),"startDragTriggerToSelectCell",(function(e){var t=r.card.template,n=Object(a.a)(e.target).closest(t.ACTIVE_TD_TRIGGER_CLASS);if(n[0]){e.preventDefault();var i=n.attr("direction");r.dragSelecting=!0,r.dragDirection=i,r.addDragEvent()}})),y()(u()(r),"onTdMouseDown",(function(e){ae.a.shift=e.shiftKey;var t=Object(a.a)(e.target).closest("td");if(t[0]){var n;ae.a.shift&&(n="shift"),2===e.button&&(n="contextmenu"),r.card.active&&e.stopPropagation(),r.clickX=e.clientX,r.clickY=e.clientY;var i=r.td===t[0],o=r.card.isEditing(t);if(i&&!o&&!n)return a.r.log("active emit==="),void r.emit("active",t);r.card.isEditing(t)||(e.preventDefault(),r.selectCell(t[0],n),"contextmenu"!==n&&r.delayStartDrag(t))}})),y()(u()(r),"delayStartDrag",(function(e){r.dragTimer&&clearTimeout(r.dragTimer),r.card.container.on("mouseup",r.cancelStartDrag),r.dragTimer=setTimeout((function(){r.dragSelecting=!0,r.dragDirection="drag_se",r.dragoverTd=e[0],r.addDragEvent()}),100)})),y()(u()(r),"cancelStartDrag",(function(){r.dragTimer&&(clearTimeout(r.dragTimer),r.card.container.off("mouseup",r.cancelStartDrag))})),y()(u()(r),"addDragEvent",(function(){r.card.tableRoot.addClass("drag-select"),r.card.tableRoot.addClass(r.dragDirection),r.areaMask.addClass(r.dragDirection),r.card.container.on("mouseup",r.dragEnd).on("mouseleave",r.delayDragEnd).on("mousemove",r.dragToSelectCell)})),y()(u()(r),"removeDragEvent",(function(){r.card.tableRoot.removeClass("drag-select"),r.card.tableRoot.removeClass(r.dragDirection),r.areaMask.removeClass(r.dragDirection),r.card.container.off("mouseup",r.dragEnd).off("mouseleave",r.delayDragEnd).off("mousemove",r.dragToSelectCell)})),y()(u()(r),"dragToSelectCell",(function(e){if(r.dragSelecting){r.timer&&clearTimeout(r.timer);var t=Object(a.a)(e.target).closest("td");t[0]&&(t.isRoot()||e.preventDefault(),t[0]!==r.dragoverTd&&(r.selectCell(t[0],r.dragDirection),r.dragoverTd=t[0]))}})),y()(u()(r),"dragEnd",(function(){r.dragSelecting&&(r.dragSelecting=!1,delete r.base_area,delete r.row_base,delete r.col_base,r.removeDragEvent())})),y()(u()(r),"delayDragEnd",(function(){r.timer=setTimeout(r.dragEnd,500)})),y()(u()(r),"preview",(function(e){switch(e){case"removeCol":case"removeRow":r.reRenderActiveBox(e);break;default:r.reRenderActiveBox()}})),y()(u()(r),"clear",(function(){r.area=null,r.td=null,r.hideActiveBox(),r.emit("cancelSelect")})),y()(u()(r),"normalizeArea",(function(){if(r.area){var e=r.area,t=e.row,n=e.col,a=e.row2,i=e.col2;return{row_min:Math.min(t,a),row_max:Math.max(t,a),col_min:Math.min(n,i),col_max:Math.max(n,i)}}})),y()(u()(r),"getEffectRows",(function(){if(r.area){var e=r.normalizeArea(),t=e.row_min,n=e.row_max,a=r.getTableModel().table,i=t,o=n,c=a[t],l=a[n];return c.forEach((function(e){if(e.isEmpty){var t=e.parent.row,n=e.parent.col;i=Math.min(i,t),o=Math.max(o,t+a[t][n].rowSpan-1)}})),l.forEach((function(e){if(e.isEmpty){var t=e.parent.row,r=e.parent.col;o=Math.max(o,t+a[t][r].rowSpan-1)}e.isMulti&&(o=Math.max(o,n+e.rowSpan-1))})),{row_min:i,row_max:o}}})),y()(u()(r),"each",(function(e,t){var n=u()(r).area,a=r.getTableModel().table;if(n){var i=r.normalizeArea(),o=i.row_min,c=i.row_max,l=i.col_min,s=i.col_max;if(t)for(var d=c;d>=o;d--)for(var f=s;f>=l;f--)e(a[d][f],d,f);else for(var p=o;p<=c;p++)for(var h=l;h<=s;h++)e(a[p][h],p,h)}})),y()(u()(r),"getTdIndex",(function(e,t){for(var n=r.getTableModel().table[e],a=0,i=0;i<t;i++)n[i].element&&a++;return a})),y()(u()(r),"getTdElement",(function(e,t){var n=r.getTableModel().table,a=n[e][t];return a.element?a.element:a.isEmpty?n[a.parent.row][a.parent.col].element:void 0})),y()(u()(r),"getTdRowCol",(function(e){var t=r.getTableModel().table,n=e.parentNode.rowIndex,a=t[n],i=0;return a.forEach((function(t,n){t.element===e&&(i=n)})),{row:n,col:i}})),y()(u()(r),"getSelectionHtml",(function(){var e=u()(r),t=e.area,n=e.card,a=r.getTableModel().table,i=n.tableRoot;if(!t)return null;for(var o=r.normalizeArea(),c=o.row_min,l=o.row_max,s=o.col_min,d=o.col_max,f=i.find("col"),p=[],h=0,m=s;m<=d;m++)p.push('<col width="'.concat(f[m].width,'" />')),h+=parseInt(f[m].width);for(var g="<colgroup>".concat(p.join(""),"</colgroup>"),v=[],y=c;y<=l;y++){for(var b=[],k=s;k<=d;k++){var w=a[y][k],x=void 0,_=void 0,C=void 0;if(w.element&&(C=w.element.cloneNode(!0)),w.isMulti&&(x=Math.min(y+w.rowSpan-1,l)-y+1,_=Math.min(k+w.colSpan-1,d)-k+1),w.isEmpty){var E=a[w.parent.row][w.parent.col];if(w.parent.row===y&&w.parent.col<s&&k===s){var O=s-w.parent.col;_=Math.min(E.colSpan-O,d-s+1),x=E.rowSpan,C=E.element.cloneNode(!0)}if(w.parent.col===k&&w.parent.row<c&&y===c){var S=c-w.parent.row;x=Math.min(E.rowSpan-S,l-c+1),_=E.colSpan,C=E.element.cloneNode(!0)}}C&&(C.setAttribute("rowspan",x),C.setAttribute("colspan",_),b.push(C.outerHTML))}v.push("<tr>".concat(b.join(""),"</tr>"))}return'\x3c!--StartFragment--\x3e<table style="width: '.concat(h,'px">').concat(g).concat(v.join(""),"</table>\x3c!--EndFragment--\x3e")})),y()(u()(r),"refreshModel",(function(){r.tableModel=oi(r.card.tableRoot[0]),a.r.log(r.tableModel)})),y()(u()(r),"cancelSelect",(function(){r.card.subEngine?r.emit("cancelSelect"):r.clear()})),y()(u()(r),"onClickMask",(function(e){if(2!==e.button){var t=e.offsetX,n=e.offsetY,a=r.getTdByMaskXY(t,n);r.selectCell(a)}})),y()(u()(r),"onMouseMoveMask",(function(e){if(r.dragSelecting){var t=e.offsetX,n=e.offsetY,a=r.getTdByMaskXY(t,n);r.selectCell(a,r.dragDirection)}})),y()(u()(r),"getTdByMaskXY",(function(e,t){for(var n=r.getTableModel(),a=r.card.template,i=r.normalizeArea(),o=i.row_min,c=i.col_min,l=r.colsHeader.find(a.COLS_HEADER_ITEM_CLASS),s=r.rowsHeader.find(a.ROWS_HEADER_ITEM_CLASS),u=o,d=c,f=Si(l[d]),p=Ri(s[u]);f<e;)f+=Si(l[++d]);for(;p<t;)p+=Ri(s[++u]);var h=n.table[u][d];return h.isEmpty&&(h=n.table[h.parent.row][h.parent.col]),h.element})),y()(u()(r),"render",(function(e){r.refreshModel();var t=u()(r).area,n=r.getTableModel();if(t){var a=r.normalizeArea(),i=a.row_min,o=a.col_min;switch(e){case"removeRow":r.selectRow(Math.min(i,n.rows-1));break;case"removeCol":r.selectCol(Math.min(o,n.cols-1));break;default:r.renderActiveBox()}}})),r.card=e,r}return l()(n,[{key:"isRowSelected",value:function(){return this.area&&(this.area.total_row||this.area.total_table)}},{key:"isColSelected",value:function(){return this.area&&(this.area.total_col||this.area.total_table)}},{key:"isTableSelected",value:function(){return this.area&&this.area.total_table}},{key:"bindEvents",value:function(){this.card.container.on("mousedown",this.onTdMouseDown).on("dragstart",(function(e){return e.stopPropagation()})).on("contextmenu",(function(e){return e.preventDefault()})).on("select",(function(e){return e.preventDefault()})),this.activeBox.on("mousedown",this.startDragTriggerToSelectCell),this.areaMask.on("mousedown",this.onClickMask).on("mousemove",this.onMouseMoveMask)}},{key:"init",value:function(){var e=this.card,t=e.container,n=e.template;this.activeBox=t.find(n.ACTIVE_TD_CLASS),this.colsHeader=t.find(n.COLS_HEADER_CLASS),this.rowsHeader=t.find(n.ROWS_HEADER_CLASS),this.viewport=t.find(n.VIEWPORT),this.editArea=this.activeBox.find(n.SUB_EDITOR_CLASS),this.editAreaContent=this.editArea.find(this.card.template.SUB_EDITOR_CONTENT_CLASS),this.areaMask=this.activeBox.find(n.AREA_MASK),this.hideTextarea=this.activeBox.find(n.TABLE_TEXTAREA_CLASS),this.bindEvents()}}]),n}();function Li(e){return"classic"===e.getTypography()?"1515":"11"}var Ii=function(){function e(t){o()(this,e),this.card=t,this.data=[],this.index=0}return l()(e,[{key:"undo",value:function(){0!==this.index&&(this.index--,this.card.reRender(this.data[this.index]))}},{key:"redo",value:function(){this.data[this.index+1]&&(this.index++,this.card.reRender(this.data[this.index]))}},{key:"isEnd",value:function(){return this.index>=this.data.length-1}},{key:"clear",value:function(){this.data=[],this.index=0}},{key:"save",value:function(e){this.data[this.index]&&this.index++,this.data=this.data.slice(0,this.index),this.data.length>=100&&(this.data.shift(),this.index--),this.data[this.index]=e,this.index++}}]),e}(),zi={handler:{},filter:function(e){ae.a.filter=function(t){var n=e.template,r=(t.target||t.srcElement).tagName.toLocaleUpperCase();return!!Object(a.a)(t.target).closest(n.TABLE_TEXTAREA_CLASS)[0]||!("INPUT"===r||"SELECT"===r||"TEXTAREA"===r)}},add:function(e,t){var n=this;this.handler[e]?this.handler[e].push(t):(this.handler[e]=[t],ae()(e,(function(t){n.handler[e].forEach((function(e){e(t)}))})))},clear:function(){}},Bi=function(){function e(t){o()(this,e),this.card=t,zi.filter(t)}return l()(e,[{key:"add",value:function(e,t){var n=this;zi.add(e,(function(e){n.card&&n.card.active&&t(e)}))}}]),e}(),Fi=[{table:{class:["lake-table","lake-no-border"],style:{width:"@length"}}},"colgroup",{col:{width:"@number",span:"@number"}},"thead","tbody",{tr:{style:{height:"@length"}}},{td:{colspan:"@number",rowspan:"@number","data-colwidth":/^\d+(,\d+)*$/,width:"@number",style:{"text-align":["left","center","right","justify"],"vertical-align":["top","middle","bottom"],"background-color":"@color",background:"@color",color:"@color"}}},{th:{colspan:"@number",rowspan:"@number",style:{"text-align":["left","center","right","justify"],"vertical-align":["top","middle","bottom"],"background-color":"@color",background:"@color",color:"@color"}}}];function Vi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ui(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vi(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qi={en:{insertColLeft:"Insert column(s) left",insertColRight:"Insert column(s) right",insertRowUp:"Insert row(s) up",insertRowDown:"Insert row(s) down",mergeCell:"Merge cells",splitCell:"Unmerge cells",hideBorder:"Hide border",removeCol:"Delete selected column(s)",removeRow:"Delete selected row(s)",removeTable:"Delete table",copy:"Copy",cut:"Cut",paste:"Paste",clear:"Clear",align:"Align",verticalAlign:"Vertical Align",alignLeft:"Align left",alignCenter:"Align center",alignRight:"Align right",alignJustify:"Align justify",alignTop:"Align Top",alignMiddle:"Align middle",alignBottom:"Align bottom",undo:"Undo",redo:"Redo",paintformat:"Paint format",removeformat:"Clear format",bold:"Bold",italic:"Italic",strikethrough:"Strike-through",underline:"Underline",fontcolor:"Font color",highlightColor:"Highlight color",backcolor:"Background color",taskList:"Task list",list:"List",orderedList:"Order list",unorderedList:"UnOrder list",link:"Link",image:"Image",label:"Label",save:"Save",insertCard:"Insert card",fontsizeTitle:"Font",file:"Attachment",lineHeight:"Line Height",defaultText:"Default",fileDescription:"Upload one or more files"},"zh-cn":{insertColLeft:"左边插入列",insertColRight:"右边插入列",insertRowUp:"上方插入行",insertRowDown:"下方插入行",mergeCell:"合并单元格",splitCell:"拆分单元格",hideBorder:"隐藏边框",removeCol:"删除选中列",removeRow:"删除选中行",removeTable:"删除表格",copy:"复制",cut:"剪切",paste:"粘贴",clear:"清空选中区域",align:"水平对齐",verticalAlign:"垂直对齐",alignLeft:"左对齐",alignCenter:"水平居中",alignRight:"右对齐",alignJustify:"两端对齐",alignTop:"顶对齐",alignMiddle:"垂直居中",alignBottom:"底对齐",undo:"撤销",redo:"重做",paintformat:"格式刷",removeformat:"清除格式",bold:"粗体",italic:"斜体",strikethrough:"中划线",underline:"下划线",fontcolor:"字体颜色",highlightColor:"字体背景色",backcolor:"单元格背景色",taskList:"任务列表",list:"列表",orderedList:"有序列表",unorderedList:"无序列表",link:"链接",image:"图片",label:"状态",save:"保存",insertCard:"插入卡片",fontsizeTitle:"字号",file:"附件",lineHeight:"行高",defaultText:"默认",fileDescription:"上传单个或多个文件"}},Hi=function(e){f()(n,Ut);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e,r){var i,c,l,s;o()(this,n),s=t.call(this),y()(u()(s),"destroy",(function(){x()((i=u()(s),g()(n.prototype)),"destroy",i).call(i);var e=s.active;s.active=!1,s.unBindKeyEvents(),e&&s.engine&&s.engine.toolbar.restore()})),y()(u()(s),"activate",(function(){s.active=!0,s.container.css("user-select","none"),s.mobile||s.engine.toolbar.set(function(e){var t=e.engine,n=e.selection,r=e.command,i=e.locale,o=["file","image","label"],c=[{key:"9",value:"12px"},{key:"10",value:"13px"},{key:"11",value:"14px"},{key:"1515",value:"15px"},{key:"12",value:"16px"},{key:"14",value:"19px"},{key:"16",value:"22px"},{key:"18",value:"24px"},{key:"22",value:"29px"},{key:"24",value:"32px"},{key:"30",value:"40px"},{key:"36",value:"48px"}],l={};c.forEach((function(e){var t=e.key,n=e.value;l[t]=n}));var s=br(t);return s=s.filter((function(t){return-1!==o.indexOf(t.name)&&("label"===t.name&&(t.onClick=function(){e.subEngine.command.execute("label")}),t.name="table:"+t.name,!0)})),[{name:"table:card",type:"collapse",title:i.insertCard,icon:'<span class="lake-svg-icon lake-svg-icon-insert" />',size:Sr.ICON,getDisabled:function(){return!e.subEngine},data:[{items:s}],onClick:function(t){e.subEngine&&e.subEngine.command.execute(t)}},{type:"separator"},{name:"table:save",title:i.save,hotkey:a.u.macos?"⌘+S":"Ctrl+S",icon:'<span class="lake-icon lake-icon-save" />',size:Sr.ICON,onClick:function(){t.command.execute("save")}},{name:"table:undo",title:i.undo,hotkey:a.u.macos?"⌘+Z":"Ctrl+Z",icon:'<span class="lake-icon lake-icon-undo" />',size:Sr.ICON,getDisabled:function(){return!(e.subEngine&&e.subEngine.command.queryState("undo")||(e.fullscreen?0!==e.history.index:t.command.queryState("undo")))},onClick:function(){e.undo()}},{name:"table:redo",title:i.redo,hotkey:a.u.macos?"⌘+Shift+Z":"Ctrl+Shift+Z",icon:'<span class="lake-icon lake-icon-redo" />',size:Sr.ICON,getDisabled:function(){return(!e.subEngine||!e.subEngine.command.queryState("redo"))&&(e.fullscreen?e.history.isEnd():!t.command.queryState("redo"))},onClick:function(){e.redo()}},{name:"table:removeformat",title:i.removeformat,icon:'<span class="lake-icon lake-icon-clean" />',size:Sr.ICON,onClick:function(){r.clearFormat(),r.execute("removeformat")}},{type:"separator"},{name:"table:fontsize",type:"dropdown",title:i.fontsizeTitle,className:"lake-button-fontsize",data:c,size:Sr.FONTSIZE,getActive:function(){return e.command.queryState("fontsize")||Li(t)},getDisabled:function(){return!e.selection.area},getCurrentText:function(e){return l[e]||l[Li(t)]},onClick:function(t){e.command.execute("fontsize",t)}},{name:"table:bold",title:i.bold,hotkey:a.u.macos?"⌘+B":"Ctrl+B",icon:'<span class="lake-icon lake-icon-bold" />',size:Sr.ICON,getDisabled:function(){return!e.selection.area},getActive:function(){return e.command.queryState("bold")},onClick:function(){e.command.execute("bold")}},{name:"table:italic",title:i.italic,hotkey:a.u.macos?"⌘+I":"Ctrl+I",icon:'<span class="lake-icon lake-icon-italic" />',size:Sr.ICON,getDisabled:function(){return!e.selection.area},getActive:function(){return e.command.queryState("italic")},onClick:function(){e.command.execute("italic")}},{name:"table:strikethrough",title:i.strikethrough,key:a.u.macos?"⌘+Shift+X":"Ctrl+Shift+X",icon:'<span class="lake-icon lake-icon-strikethrough" />',size:Sr.ICON,getDisabled:function(){return!e.selection.area},getActive:function(){return e.command.queryState("strikethrough")},onClick:function(){e.command.execute("strikethrough")}},{name:"table:underline",title:i.underline,key:a.u.macos?"⌘+U":"Ctrl+U",icon:'<span class="lake-icon lake-icon-underline" />',size:Sr.ICON,getDisabled:function(){return!e.selection.area},getActive:function(){return e.command.queryState("underline")},onClick:function(){e.command.execute("underline")}},{type:"separator"},{name:"table:fontcolor",type:"color",title:i.fontcolor,moreTitle:i.fontcolor,defaultColor:"#000000",currentColor:"#F5222D",size:Sr.SPLIT_BUTTON,getActive:function(){return e.command.queryState("fontcolor")||[]},onClick:function(t){e.command.execute("fontcolor",t,"#000000")}},{name:"table:highlight",type:"color",title:i.highlightColor,moreTitle:i.highlightColor,defaultColor:"#FFFFFF",currentColor:"#FADB14",size:Sr.SPLIT_BUTTON,getActive:function(){return e.command.queryState("backcolor")||""},onClick:function(t){e.command.execute("backcolor",t,"#FFFFFF")}},{name:"table:backcolor",type:"color",title:i.backcolor,moreTitle:i.backcolor,defaultColor:"#FFFFFF",currentColor:"#f5f5f5",size:Sr.SPLIT_BUTTON,onClick:function(e){"#FFFFFF"===e?r.background():r.background(e)}},{name:"hideBorder",title:i.hideBorder,icon:'<span class="lake-icon lake-icon-table-border" />',getDisabled:function(){return!n.area},getActive:function(){return e.command.queryState("border")},onClick:function(){r.toggleBorder()}},{type:"separator"},{name:"insertRowUp",title:i.insertRowUp,icon:'<span class="lake-icon lake-icon-table-insert-row-up" />',size:Sr.ICON,getDisabled:function(){return!n.area},onClick:function(){e.removeEditor(),r.insertRowUp()}},{name:"insertRowDown",title:i.insertRowDown,icon:'<span class="lake-icon lake-icon-table-insert-row-down" />',size:Sr.ICON,getDisabled:function(){return!n.area},onClick:function(){e.removeEditor(),r.insertRowDown()}},{name:"removeRow",title:i.removeRow,icon:'<span class="lake-icon lake-icon-table-remove-row" />',size:Sr.ICON,getDisabled:function(){return!n.area},onClick:function(){e.removeEditor(),r.removeRow()}},{type:"separator"},{name:"insertColLeft",title:i.insertColLeft,icon:'<span class="lake-icon lake-icon-table-insert-col-left" />',size:Sr.ICON,getDisabled:function(){return!n.area},onClick:function(){e.removeEditor(),r.insertColLeft()}},{name:"insertColRight",title:i.insertColRight,icon:'<span class="lake-icon lake-icon-table-insert-col-right" />',size:Sr.ICON,getDisabled:function(){return!n.area},onClick:function(){e.removeEditor(),r.insertColRight()}},{name:"removeCol",title:i.removeCol,icon:'<span class="lake-icon lake-icon-table-remove-col" />',size:Sr.ICON,getDisabled:function(){return!n.area},onClick:function(){e.removeEditor(),r.removeCol()}},{type:"separator"},{name:"mergecell",title:i.mergeCell,icon:'<span class="lake-icon lake-icon-table-merge-cell" />',size:Sr.ICON,getDisabled:function(){return!n.area||n.isSingleArea()},onClick:function(){r.mergeCell()}},{name:"splitCell",title:i.splitCell,icon:'<span class="lake-icon lake-icon-table-split-cell" />',size:Sr.ICON,getDisabled:function(){return!n.hasMergeCell()},onClick:function(){e.removeEditor(),r.splitCell()}},{type:"separator"},{name:"table:alignment",type:"dropdown",title:i.align,icon:'<span class="lake-icon lake-icon-left" />',size:Sr.ICON,className:"lake-button-icon-list",data:[{key:"left",icon:'<span class="lake-icon lake-icon-left" />',title:i.alignLeft,className:"lake-button-set-list-item-icon"},{key:"center",icon:'<span class="lake-icon lake-icon-center" />',title:i.alignCenter,className:"lake-button-set-list-item-icon"},{key:"right",icon:'<span class="lake-icon lake-icon-right" />',title:i.alignRight,className:"lake-button-set-list-item-icon"},{key:"justify",icon:'<span class="lake-icon lake-icon-justify" />',title:i.alignJustify,className:"lake-button-set-list-item-icon"}],getActive:function(){},onClick:function(e){r.align(e)}},{name:"table:verticalAlignment",type:"dropdown",title:i.verticalAlign,icon:'<span class="lake-icon lake-icon-top" />',size:Sr.ICON,className:"lake-button-icon-list",data:[{key:"top",icon:'<span class="lake-icon lake-icon-top" />',title:i.alignTop,className:"lake-button-set-list-item-icon"},{key:"middle",icon:'<span class="lake-icon lake-icon-middle" />',title:i.alignMiddle,className:"lake-button-set-list-item-icon"},{key:"bottom",icon:'<span class="lake-icon lake-icon-bottom" />',title:i.alignBottom,className:"lake-button-set-list-item-icon"}],getActive:function(){},onClick:function(e){r.valign(e)}},{type:"separator"},{name:"table:unorderedlist",title:i.unorderedList,hotkey:a.u.macos?"⌘+Shift+8":"Ctrl+Shift+8",icon:'<span class="lake-icon lake-icon-uList" />',size:Sr.ICON,getDisabled:function(){return!e.subEngine},getActive:function(){return e.subEngine&&"unorderedlist"===e.subEngine.command.queryState("tasklist")},onClick:function(){e.subEngine&&e.subEngine.command.execute("tasklist","unorderedlist")}},{name:"table:orderedlist",title:i.orderedList,hotkey:a.u.macos?"⌘+Shift+7":"Ctrl+Shift+7",icon:'<span class="lake-icon lake-icon-oList" />',size:Sr.ICON,getDisabled:function(){return!e.subEngine},getActive:function(){return e.subEngine&&"orderedlist"===e.subEngine.command.queryState("tasklist")},onClick:function(){e.subEngine&&e.subEngine.command.execute("tasklist","orderedlist")}},{name:"table:tasklist",title:i.taskList,icon:'<span class="lake-icon lake-icon-tList" />',size:Sr.ICON,getDisabled:function(){return!e.subEngine},getActive:function(){return e.subEngine&&"tasklist"===e.subEngine.command.queryState("tasklist")},onClick:function(){e.subEngine&&e.subEngine.command.execute("tasklist","tasklist")}},{name:"lineheight",type:"dropdown",title:i.lineHeight,icon:'<span class="lake-icon lake-icon-line-height" />',size:Sr.ICON,className:"lake-button-icon-list",data:[{key:"17",title:i.defaultText},{key:"1",title:"1"},{key:"115",title:"1.15"},{key:"15",title:"1.5"},{key:"2",title:"2"},{key:"25",title:"2.5"},{key:"3",title:"3"}],getDisabled:function(){return!t.command.queryState("lineheight")},getActive:function(){return t.command.queryState("lineheight")},onClick:function(e){t.command.execute("lineheight",e)}},{type:"separator"},{name:"table:link",title:i.link,className:"lake-button-link",hotkey:a.u.macos?"⌘+K":"Ctrl+K",icon:'<span class="lake-icon lake-icon-link" />',size:Sr.ICON,getDisabled:function(){return!e.subEngine},onClick:function(){e.subEngine&&e.subEngine.command.execute("link")}}]}(u()(s))),s.selection.refreshModel(),s.controllBar.refresh(),s.onTableSizeChange()})),y()(u()(s),"unactivate",(function(){s.active=!1,s.container.css("user-select","auto"),s.selection.clear(),s.controllBar.hide(),s.removeEditor(),s.engine.toolbar.restore()})),y()(u()(s),"embedToolbar",(function(){var e=s.mobile?[{type:"copy"},{type:"delete"}]:[{type:"dnd"},{type:"maximize"},{type:"separator"},{type:"copy"},{type:"copyCardLink",onClick:function(){return s.copyCardEmbedLink()}},{type:"separator"}].concat(ge()(s.getMoreEmbedToolbarConfig()));return s.state.readonly&&(e=[{type:"maximize"},{type:"copyCardLink",onClick:function(){return s.copyCardEmbedLink()}}]),e})),y()(u()(s),"maximize",(function(){x()((c=u()(s),g()(n.prototype)),"maximize",c).call(c),s.scrollbar.refresh(),s.engine&&(s.fullscreen=!0,s.setCardValue(),s.controllBar.hideMultiAddition())})),y()(u()(s),"restore",(function(){x()((l=u()(s),g()(n.prototype)),"restore",l).call(l),s.scrollbar.refresh(),s.engine&&(s.fullscreen=!1,s.history.clear(),s.controllBar.hideMultiAddition())})),y()(u()(s),"handleTdChanged",(function(){if(s.changed=!0,s.subEngine){s.subEngine.td.html(a.n.transformCustomTags(s.subEngine.change.getValue())),s.subEngine.card.renderAll(s.subEngine.td,void 0,s.subEngine),s.command.changed(),s.delayToUpdateToolbar();var e=s.subEngine.td[0].offsetHeight;s.tdHeight&&e===s.tdHeight||(s.tdHeight=e,s.controllBar.render("heightchange"),s.selection.reRenderActiveBox(),s.onTableSizeChange()),s.lazySetCardValue()}})),y()(u()(s),"startEdit",(function(e){s.active&&Object(a.a)(e.target).closest(s.template.TABLE_TEXTAREA_CLASS)[0]&&("input"!==e.type||!e.isComposing&&"insertCompositionText"!==e.inputType&&"deleteCompositionText"!==e.inputType&&"insertFromComposition"!==e.inputType)&&(s.subEngine||s.selection.td&&s.selection.single&&s.createEditor(Object(a.a)(s.selection.td),"<p>".concat(e.data||e.target.value,"</p>")))})),y()(u()(s),"saveValue",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(s.changed=!0),s.setCardValue(!0)})),y()(u()(s),"lazySetCardValue",(function(){s.lazySetValueTimer&&clearTimeout(s.lazySetValueTimer),s.lazySetValueTimer=setTimeout((function(){s.setCardValue()}),500)})),y()(u()(s),"setCardValue",(function(e){var t=s.selection.getTableModel(),n=s.tableRoot[0].outerHTML;if(n!==s.lastSaveHtml&&s.changed){s.lastSaveHtml=n,n=new a.i(n,s.engine.schema,s.engine.conversion).toValue();var r={rows:t.rows,cols:t.cols,html:n,margin:!!(s.value||{}).margin,hideBorder:!!(s.value||{}).hideBorder};s.cardManage.setValue(s.cardRoot,r),s.changed=!1,e||s.fullscreen&&s.history.save(r)}})),y()(u()(s),"tryUndo",(function(){s.subEngine?0===s.subEngine.history.index&&s.removeEditor(!0):s.undo()})),y()(u()(s),"tryRedo",(function(){s.subEngine||s.redo()})),y()(u()(s),"undo",(function(){s.subEngine&&s.subEngine.history.hasUndo?s.subEngine.command.execute("undo"):s.subEngine?s.removeEditor(!0):s.fullscreen?s.history.undo():(s.focusCard(),s.engine.command.execute("undo"))})),y()(u()(s),"focusCard",(function(){s.engine.change.focusCard(s.cardRoot),s.engine.change.focus()})),y()(u()(s),"redo",(function(){s.subEngine?s.subEngine.command.execute("redo"):s.fullscreen?s.history.redo():s.engine.command.execute("redo")})),y()(u()(s),"delayToUpdateToolbar",(function(){s.toolbarTimer&&clearTimeout(s.toolbarTimer),s.toolbarTimer=setTimeout((function(){s.engine.toolbar.updateState()}),100)})),y()(u()(s),"isEditing",(function(e){return s.subEngine&&e[0]===s.subEngine.td[0]})),y()(u()(s),"createEditor",(function(e,t){if(!s.isEditing(e)){a.r.log("create subEditor"),s.selection.showSubEditor();var n=Ui(Ui({},s.engine.options.image),{},{fixSize:!0,hideEmbedToolbar:!1});if(s.subEngine=a.s.create(s.selection.editAreaContent,{plugins:["bold","italic","fontcolor","fontsize","strikethrough","underline","backcolor","removeformat","code","file","label","list","link","image","tasklist","indent","emoji","markdown"],lang:s.engine.options.lang,image:n,onBeforeRenderImage:s.engine.options.onBeforeRenderImage,file:s.engine.options.file,parentEngine:s.engine,typography:s.engine.typography}),s.engine&&s.subEngine.on("userchanged",(function(){s.engine.setUserChanged()})),s.subEngine.isRemoteImage=s.engine.isRemoteImage,s.subEngine.uploader=s.engine.uploader,s.subEngine.td=e,s.subEngine.locale=s.engine.locale,s.subEngine.schema.add(s.innerSchema),s.delayToUpdateToolbar(),s.subEngine.change.setValue(hi(e.html())),t){var r=hi(t);r=new a.i(r,s.subEngine.schema,s.subEngine.conversion).toValue(),s.subEngine.command.execute("selectall"),s.subEngine.change.setValue(r),s.handleTdChanged(),a.r.log("subEngine focus selectall")}setTimeout((function(){s.subEngine&&(s.subEngine.focusToEnd(),a.r.log("subEngine focus"))}),10),s.subEngine.on("change",s.handleTdChanged),s.subEngine.on("select",s.delayToUpdateToolbar),s.subEngine.on("paste:origin",mi),s.subEngine.on("keydown:tab",(function(){return!1}))}})),y()(u()(s),"removeEditor",(function(e){s.changed=!0,s.subEngine&&(s.handleTdChanged(),a.r.log("removeEditor"),s.subEngine.destroy(),s.subEngine=null,s.selection.hideSubEditor(),e||s.setCardValue(),s.lazySetValueTimer&&clearTimeout(s.lazySetValueTimer))})),y()(u()(s),"prevent",(function(e){Object(a.a)(e.target).closest(".lake-table")[0]&&e.preventDefault()})),y()(u()(s),"unBindKeyEvents",(function(){document.removeEventListener("contextmenu",s.prevent)})),y()(u()(s),"bindKeyEvents",(function(){s.hotkey.add("backspace, del, delete",s.command.clear),s.hotkey.add("up",s.selection.selectUp),s.hotkey.add("down",s.selection.selectDown),s.hotkey.add("left",s.selection.selectLeft),s.hotkey.add("right",s.selection.selectRight),s.hotkey.add("tab, shift+tab",s.tab),s.hotkey.add("enter",s.selection.selectEnter),s.hotkey.add("esc",s.selection.cancelSelect),s.hotkey.add("command+a, ctrl+a",s.selection.selectTable),s.hotkey.add("command+z, ctrl+z",s.tryUndo),s.hotkey.add("command+b, ctrl+b",(function(){s.subEngine||s.command.execute("bold")})),s.hotkey.add("command+i, ctrl+i",(function(){s.subEngine||s.command.execute("italic")})),s.hotkey.add("command+u, ctrl+u",(function(){s.subEngine||s.command.execute("underline")})),s.hotkey.add("command+shift+x, ctrl+shift+x",(function(){s.subEngine||s.command.execute("strikethrough")})),s.hotkey.add("command+y, command+shift+z, ctrl+y, ctrl+shift+z",s.tryRedo),document.addEventListener("contextmenu",s.prevent)})),y()(u()(s),"tab",(function(e){s.subEngine&&s.subEngine.command.queryState("tasklist")||s.selection.selectTab(e)})),y()(u()(s),"bindEditEvents",(function(){s.inited||(s.controllBar.on("startChangeCellSize",s.selection.clear),s.controllBar.on("clickColsHeader",s.selection.selectCol),s.controllBar.on("clickRowsHeader",s.selection.selectRow),s.controllBar.on("clickTableHeader",s.selection.selectTable),s.controllBar.on("sizeChanged",(function(){s.changed=!0,s.setCardValue(),s.scrollbar.refresh()})),s.controllBar.on("heightchanging",(function(){s.changed=!0,s.onTableSizeChange()})),s.command.on("actioned",(function(e,t){s.changed=!0,"paste"!==e&&"fontstyle"!==e||a.s.card.renderAll(s.container,void 0,s.engine),s.removeEditor(),s.controllBar.render(e),s.selection.render(e),s.scrollbar.refresh(),t||s.setCardValue(),s.onTableSizeChange()})),s.command.on("tableRemoved",s.destroy),s.selection.on("select",(function(){s.delayToUpdateToolbar(),s.removeEditor(),s.controllBar.refresh("select")})),s.selection.on("cancelSelect",(function(){s.removeEditor(),s.controllBar.clearActiveStatus()})),s.selection.on("active",s.createEditor),a.r.log("bindEvent"),s.container.on("compositionend",s.startEdit),s.container.on("input",s.startEdit),s.container.on("select",s.prevent),s.bindKeyEvents(),s.bindEvent(s.engine.event,"save:before",(function(){return s.setCardValue()})),s.inited=!0)})),y()(u()(s),"reRender",(function(e){s.delayToUpdateToolbar(),e&&(s.container.html(""),s.render(s.container,e,!0),s.selection.refreshModel(),s.controllBar.refresh())})),s.engine=e,s.contentView=r;var d,f=e?e.options.lang:r.options.lang;return s.locale=qi[f||"en"],s.constants={defaultRows:3,defaultCols:3,MENU:[{action:"cut",icon:"cut",text:(d=u()(s)).locale.cut},{action:"copy",icon:"copy",text:d.locale.copy},{action:"mockPaste",icon:"paste",text:d.locale.paste},{action:"clear",icon:"clear",text:d.locale.clear},{split:!0},{action:"insertColLeft",icon:"insert-col-left",text:d.locale.insertColLeft},{action:"insertColRight",icon:"insert-col-right",text:d.locale.insertColRight},{action:"insertRowUp",icon:"insert-row-up",text:d.locale.insertRowUp},{action:"insertRowDown",icon:"insert-row-down",text:d.locale.insertRowDown},{split:!0},{action:"mergeCell",icon:"merge-cell",text:d.locale.mergeCell},{action:"splitCell",icon:"split-cell",text:d.locale.splitCell},{split:!0},{action:"removeCol",icon:"remove-col",text:d.locale.removeCol},{action:"removeRow",icon:"remove-row",text:d.locale.removeRow},{split:!0},{action:"removeTable",icon:"remove-table",text:d.locale.removeTable}]},s.template=function(e){return{TABLE_WRAPPER_CLASS:".".concat("table-wrapper"),TABLE_CLASS:".".concat("lake-table"),COLS_HEADER_CLASS:".".concat("table-cols-header"),COLS_HEADER_ITEM_CLASS:".".concat("table-cols-header-item"),COLS_HEADER_TRIGGER_CLASS:".".concat("cols-trigger"),COLS_ADDITION_CLASS:".".concat("cols-addition"),COLS_ADDITION_HEADER_CLASS:".".concat("cols-addition-header"),ROWS_HEADER_CLASS:".".concat("table-rows-header"),ROWS_HEADER_ITEM_CLASS:".".concat("table-rows-header-item"),ROWS_HEADER_TRIGGER_CLASS:".".concat("rows-trigger"),ROWS_ADDITION_CLASS:".".concat("rows-addition"),ROWS_ADDITION_HEADER_CLASS:".".concat("rows-addition-header"),HEADER_CLASS:".".concat("table-header"),ACTIVE_TD_CLASS:".".concat("table-active-td"),ACTIVE_TD_TRIGGER_CLASS:".".concat("table-active-td-trigger"),AREA_MASK:".".concat("mask"),ROW_MASK:".".concat("mask-row"),COL_MASK:".".concat("mask-col"),SUB_EDITOR_CLASS:".".concat("sub-editor"),SUB_EDITOR_CONTENT_CLASS:".".concat("sub-editor-content"),MENUBAR_CLASS:".".concat("table-menubar"),MENUBAR_ITEM_CLASS:".".concat("table-menubar-item"),TABLE_TEXTAREA_CLASS:".".concat("table-textarea"),VIEWPORT:".".concat("table-viewport"),VIEWPORT_READER:".".concat("lake-table-reader"),PLACEHOLDER_CLASS:".".concat("table-placeholder"),MULTI_ADDITION_CLASS:".".concat("multi-addition"),SHADOW_LEFT_CLASS:".".concat("table-shadow-left"),SHADOW_RIGHT_CLASS:".".concat("table-shadow-right"),SPLIT_LINE_CLASS:".".concat("split"),COL_HEADER_BTNS:".".concat("table-col-header-btns"),ROW_HEADER_BTNS:".".concat("table-row-header-btns"),HEADER_DELETE_BTN:".".concat("table-header-delete-btn"),HEADER_ADD_BTN:".".concat(Ai),INDICATOR_CLASS:".".concat("table-indicator"),EmptyCell:"<p><br /></p>",SubEditor:'<div class="'.concat("sub-editor",'"><div class="').concat("sub-editor-content",'"></div></div>'),htmlEdit:function(t){var n=t.rows,r=t.cols,i=t.html,o="<td><p><br /></p></td>".repeat(r),c="<tr>".concat(o,"</tr>").repeat(n),l="<col />".repeat(r),s="<colgroup>".concat(l,"</colgroup>"),u='\n        <div class="'.concat("table-cols-header",'">\n          ').concat('<div class="'.concat("table-cols-header-item",'" draggable="true">\n            <div class="').concat("table-col-header-btns",'">\n              <a class="table-control-icon-btn ').concat("table-header-delete-btn",'">\n                <span class="lake-icon lake-icon-delete"></span>\n              </a>\n              <a class="table-control-icon-btn ').concat(Ai,'">\n                  <span class="lake-icon lake-icon-plus"></span>\n              </a>\n            </div>\n            <div class="col-dragger">\n              <span class="lake-icon lake-icon-drag"></span>\n              <p class="drag-info"></p>\n            </div>\n            <div class="').concat("cols-trigger",'"></div>\n            </div>').repeat(r),"\n        </div>\n      "),d='\n        <div class="'.concat("table-rows-header",'">\n          ').concat('<div class="'.concat("table-rows-header-item",'" draggable="true">\n            <div class="').concat("table-row-header-btns",'">\n              <a class="table-control-icon-btn ').concat("table-header-delete-btn",'">\n                <span class="lake-icon lake-icon-delete"></span>\n              </a>\n              <a class="table-control-icon-btn ').concat(Ai,'">\n                  <span class="lake-icon lake-icon-plus"></span>\n              </a>\n            </div>\n            <div class="row-dragger">\n              <span class="lake-icon lake-icon-drag"></span>\n              <span class="drag-info"></span>\n            </div>\n            <div class="').concat("rows-trigger",'"></div>\n            </div>').repeat(n),"\n        </div>\n      "),f='<div class="'.concat("table-header",'"></div>'),p='<textarea class="'.concat("table-textarea",'"></textarea>'),h='<div class="'.concat("table-active-td",'">\n        ').concat(p,'\n        <div class="').concat("mask-col",'"></div>\n        <div class="').concat("mask-row",'"></div>\n        <div class="l"></div>\n        <div class="r"></div>\n        <div class="t"></div>\n        <div class="b"></div>\n        <div class="').concat("mask",'"></div>\n        <div class="nw ').concat("table-active-td-trigger",'" direction="drag_nw"></div>\n        <div class="se ').concat("table-active-td-trigger",'" direction="drag_se"></div>\n        <div class="n ').concat("table-active-td-trigger",'" direction="drag_n"></div>\n        <div class="w ').concat("table-active-td-trigger",'" direction="drag_w"></div>\n        <div class="s ').concat("table-active-td-trigger",'" direction="drag_s"></div>\n        <div class="e ').concat("table-active-td-trigger",'" direction="drag_e"></div>\n        ').concat(this.SubEditor,"\n      </div>"),m='<div class="'.concat("table-indicator",'"></div>'),g='<div class="'.concat("table-placeholder",'"></div>'),v='<div class="'.concat("table-shadow-left",'"></div>'),y='<div class="'.concat("table-shadow-right",'"></div>'),b=e.constants.MENU.map((function(e){return e.split?'<div class="'.concat("split",'"></div>'):'<div class="'.concat("table-menubar-item",'" data-action="').concat(e.action,'">\n          <span class="lake-icon lake-icon-table-').concat(e.icon,'"></span>\n          ').concat(e.text,"\n        </div>")}));b='<div class="'.concat("table-menubar",'">').concat(b.join(""),"</div>"),i&&(i.includes("<colgroup>")||(a.r.log("before",i),i=i.replace(/^(<table[^>]+>)/,(function(e){return e+s})),a.r.log("after",i)),i=li(Object(a.a)(i)[0]).outerHTML);var k=i||'\n        <table class="'.concat("lake-table",'">\n          ').concat(s,"\n          ").concat(c,"\n        </table>");return'\n        <div class="'.concat("table-wrapper",'">\n          ').concat(f,'\n          <div class="').concat("table-viewport",'">\n            ').concat(u,'\n            <div class="').concat("lake-table-inner",'">\n              ').concat(h,"\n              ").concat(k,"\n            </div>\n            ").concat(g,"\n            ").concat(m,"\n            ").concat(v,"\n            ").concat(y,"\n          </div>\n          ").concat(d,"\n          ").concat(b,"\n        </div>")},htmlView:function(e){var t=e.html;return'<div class="'.concat("lake-table-reader",'">\n        ').concat(t,"\n      </div>")}}}(u()(s)),e?(s.change=e.change,s.cardManage=e.card,s.controllBar=new Ti(u()(s)),s.selection=new Ni(u()(s)),s.command=new Mi(u()(s)),s.hotkey=new Bi(u()(s)),s.innerSchema=function(e){return e.filter((function(e){var t=!0;return Ke()(e)?(e.table||e.tr||e.td||e.th||e.tbody||e.col||e.thead||e.h1||e.h2||e.h3||e.h4||e.h5||e.h6)&&(t=!1):"table"!==e&&"tr"!==e&&"td"!==e&&"th"!==e&&"col"!==e&&"colgroup"!==e&&"tbody"!==e&&"thead"!==e||(t=!1),t}))}(He.a),s.history=new Ii(u()(s)),s.mobile="mobile"===s.engine.options.type,s.changed=!1,s):h()(s)}return l()(n,[{key:"select",value:function(){if(this.state.readonly)x()(g()(n.prototype),"select",this).call(this);else{var e=this.container;e[0].childNodes.length>0&&e.addClass("lake-table-selected")}}},{key:"unselect",value:function(){if(this.state.readonly)x()(g()(n.prototype),"unselect",this).call(this);else{var e=this.container;e[0].childNodes.length>0&&e.removeClass("lake-table-selected")}}},{key:"selectByOther",value:function(e){var t=this.container;t[0].childNodes.length>0&&t.css("outline","2px solid "+e)}},{key:"unselectByOther",value:function(){var e=this.container;e[0].childNodes.length>0&&e.css("outline","")}},{key:"getTableHeight",value:function(){return Ot(this.tableRoot[0])}},{key:"onTableSizeChange",value:function(){this.container.css({"min-height":this.getTableHeight()+"px"})}},{key:"render",value:function(){this.doRender.apply(this,arguments)}},{key:"doRender",value:function(e,t,n){var r=this.engine;if(this.toggleMargin(),e.on("dragstart",(function(e){e.stopPropagation(),e.preventDefault()})),t.html&&(r||(this.contentView.schema.add(Fi),t.html=new a.i(t.html,this.contentView.schema,this.contentView.conversion).toValue()),t.html=a.n.transformCustomTags(t.html)),!r){var i=this.template.htmlView(t);return e.append(i),a.s.card.renderAll(e,void 0,this.contentView),this.viewport=e.find(this.template.VIEWPORT_READER),this.scrollbar=new yt(this.viewport,!0,!1,!0),void(0===this.contentView.docVerstion&&this.container.css({"margin-top":"24px","margin-bottom":"24px"}))}var o=this.template.htmlEdit(t);e.append(o),a.s.card.renderAll(e,void 0,r),this.tableRoot=e.find(this.template.TABLE_CLASS),this.viewport=e.find(this.template.VIEWPORT),this.selection.init(),this.controllBar.init(),this.scrollbar=new yt(this.viewport,!0,!1,!0),this.bindEditEvents(),t.html&&!n||(this.changed=!0,this.setCardValue(n))}}]),n}();y()(Hi,"type","block"),y()(Hi,"uid",!0),y()(Hi,"canSearch",!0);var Wi=a.n.escape,Yi=function(e,t){var n='\n      <div class="lake-video-icon">\n        <svg width="32px" height="24px" viewBox="0 0 32 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n          <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" fill-opacity="0.25">\n            <g transform="translate(-704.000000, -550.000000)" fill="#000000" fill-rule="nonzero">\n              <g transform="translate(704.000000, 550.000000)">\n                <g>\n                  <path d="M13.09375,17.30625 L20.65625,12.375 C20.95,12.16875 20.95,11.809375 20.65625,11.603125 L13.09375,6.696875 C12.66875,6.4 12,6.6375 12,7.084375 L12,16.921875 C12,17.365625 12.671875,17.603125 13.09375,17.30625 Z" id="Path"></path>\n                  <path d="M30,0 L2,0 C0.896875,0 0,0.896875 0,2 L0,22 C0,23.103125 0.896875,24 2,24 L30,24 C31.103125,24 32,23.103125 32,22 L32,2 C32,0.896875 31.103125,0 30,0 Z M5.25,21.25 C5.25,21.525 5.025,21.75 4.75,21.75 L2.5,21.75 C2.225,21.75 2,21.525 2,21.25 L2,18.5 C2,18.225 2.225,18 2.5,18 L4.75,18 C5.025,18 5.25,18.225 5.25,18.5 L5.25,21.25 Z M5.25,13.375 C5.25,13.65 5.025,13.875 4.75,13.875 L2.5,13.875 C2.225,13.875 2,13.65 2,13.375 L2,10.625 C2,10.35 2.225,10.125 2.5,10.125 L4.75,10.125 C5.025,10.125 5.25,10.35 5.25,10.625 L5.25,13.375 Z M5.25,5.5 C5.25,5.775 5.025,6 4.75,6 L2.5,6 C2.225,6 2,5.775 2,5.5 L2,2.75 C2,2.475 2.225,2.25 2.5,2.25 L4.75,2.25 C5.025,2.25 5.25,2.475 5.25,2.75 L5.25,5.5 Z M24.75,21.75 L7.25,21.75 L7.25,2.25 L24.75,2.25 L24.75,21.75 Z M30,21.25 C30,21.525 29.775,21.75 29.5,21.75 L27.25,21.75 C26.975,21.75 26.75,21.525 26.75,21.25 L26.75,18.5 C26.75,18.225 26.975,18 27.25,18 L29.5,18 C29.775,18 30,18.225 30,18.5 L30,21.25 Z M30,13.375 C30,13.65 29.775,13.875 29.5,13.875 L27.25,13.875 C26.975,13.875 26.75,13.65 26.75,13.375 L26.75,10.625 C26.75,10.35 26.975,10.125 27.25,10.125 L29.5,10.125 C29.775,10.125 30,10.35 30,10.625 L30,13.375 Z M30,5.5 C30,5.775 29.775,6 29.5,6 L27.25,6 C26.975,6 26.75,5.775 26.75,5.5 L26.75,2.75 C26.75,2.475 26.975,2.25 27.25,2.25 L29.5,2.25 C29.775,2.25 30,2.475 30,2.75 L30,5.5 Z" id="Shape"></path>\n                </g>\n              </g>\n            </g>\n          </g>\n        </svg>\n      </div>\n    ',r='\n      <i class="lake-video-anticon">\n        <svg viewBox="0 0 1024 1024" class="lake-video-anticon-spin" data-icon="loading" width="1em" height="1em" fill="currentColor" aria-hidden="true">\n          <path d="M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"></path>\n        </svg>\n      </i>\n    ';if("pending"===e.status)return'\n      <div class="lake-video">\n        <div class="lake-video-content lake-video-uploading">\n          <div class="lake-video-center">\n            '.concat(n,'\n            <div class="lake-video-name">').concat(Wi(e.name)," (").concat(et()(e.size),')</div>\n            <div data-role="progress" class="lake-video-progress">\n              ').concat(r,'\n              <span data-role="percent" class="percent">').concat(Wi(t.pending),"</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    ");if("uploading"===e.status)return'\n      <div class="lake-video">\n        <div class="lake-video-content lake-video-uploading">\n          <div class="lake-video-center">\n            '.concat(n,'\n            <div class="lake-video-name">').concat(Wi(e.name)," (").concat(et()(e.size),')</div>\n            <div data-role="progress" class="lake-video-progress">\n              ').concat(r,'\n              <span data-role="percent" class="percent">').concat(Wi(e.percent),"%</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    ");if("uploaded"===e.status||"done"===e.status)return'\n      <div class="lake-video">\n        <div class="lake-video-content">\n          <div class="lake-video-center">\n            '.concat(n,'\n            <div class="lake-video-name">').concat(Wi(e.name)," ").concat(e.size?"("+et()(e.size)+")":"",'</div>\n            <div class="lake-video-converting">\n              ').concat(r,"\n              <span>").concat(Wi("done"===e.status?t.fetching:t.transcoding),"</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    ");if("error"===e.status){var a="";switch(e.code){case"reject":a=t.rejectError;break;default:a=t.commonError}var i="reject"===e.code;return'\n      <div class="lake-video">\n        <div class="lake-video-content lake-video-error">\n          <div class="lake-video-center">\n            '.concat(i?'\n      <div class="lake-video-icon">\n        <svg width="41px" height="29px" viewBox="0 0 41 29" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n          <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n            <g transform="translate(-704.000000, -550.000000)">\n              <g id="Group-2" transform="translate(704.000000, 550.000000)">\n                <g id="video" fill="#000000" fill-rule="nonzero" opacity="0.449999988">\n                  <path d="M13.09375,17.30625 C12.671875,17.603125 12,17.365625 12,16.921875 L12,7.084375 C12,6.6375 12.66875,6.4 13.09375,6.696875 L20.65625,11.603125 C20.95,11.809375 20.95,12.16875 20.65625,12.375 L13.09375,17.30625 Z M30,0 C31.103125,0 32,0.896875 32,2 L32,22 C32,23.103125 31.103125,24 30,24 L2,24 C0.896875,24 0,23.103125 0,22 L0,2 C0,0.896875 0.896875,0 2,0 L30,0 Z M5.25,21.25 L5.25,18.5 C5.25,18.225 5.025,18 4.75,18 L2.5,18 C2.225,18 2,18.225 2,18.5 L2,21.25 C2,21.525 2.225,21.75 2.5,21.75 L4.75,21.75 C5.025,21.75 5.25,21.525 5.25,21.25 Z M5.25,13.375 L5.25,10.625 C5.25,10.35 5.025,10.125 4.75,10.125 L2.5,10.125 C2.225,10.125 2,10.35 2,10.625 L2,13.375 C2,13.65 2.225,13.875 2.5,13.875 L4.75,13.875 C5.025,13.875 5.25,13.65 5.25,13.375 Z M5.25,5.5 L5.25,2.75 C5.25,2.475 5.025,2.25 4.75,2.25 L2.5,2.25 C2.225,2.25 2,2.475 2,2.75 L2,5.5 C2,5.775 2.225,6 2.5,6 L4.75,6 C5.025,6 5.25,5.775 5.25,5.5 Z M24.75,21.75 L24.75,2.25 L7.25,2.25 L7.25,21.75 L24.75,21.75 Z M30,21.25 L30,18.5 C30,18.225 29.775,18 29.5,18 L27.25,18 C26.975,18 26.75,18.225 26.75,18.5 L26.75,21.25 C26.75,21.525 26.975,21.75 27.25,21.75 L29.5,21.75 C29.775,21.75 30,21.525 30,21.25 Z M30,13.375 L30,10.625 C30,10.35 29.775,10.125 29.5,10.125 L27.25,10.125 C26.975,10.125 26.75,10.35 26.75,10.625 L26.75,13.375 C26.75,13.65 26.975,13.875 27.25,13.875 L29.5,13.875 C29.775,13.875 30,13.65 30,13.375 Z M30,5.5 L30,2.75 C30,2.475 29.775,2.25 29.5,2.25 L27.25,2.25 C26.975,2.25 26.75,2.475 26.75,2.75 L26.75,5.5 C26.75,5.775 26.975,6 27.25,6 L29.5,6 C29.775,6 30,5.775 30,5.5 Z" id="Combined-Shape"></path>\n                </g>\n                <g id="error-fill" transform="translate(21.000000, 10.000000)">\n                  <rect id="Rectangle" fill="#000000" opacity="0" x="0" y="0" width="20" height="20"></rect>\n                  <path d="M19.0267927,16.510301 L19.0272631,16.5111171 C19.4269215,17.2064579 18.9263267,18.0729167 18.125,18.0729167 L1.875,18.0729167 C1.07367326,18.0729167 0.573078461,17.2064579 0.973207261,16.510301 L9.0970084,2.44988987 C9.28650026,2.11750251 9.63068515,1.92708333 10,1.92708333 C10.368224,1.92708333 10.7098796,2.11659543 10.9017927,2.447801 L19.0267927,16.510301 Z" id="Path" stroke="#FFFFFF" stroke-width="0.833333333" fill="#FFFFFF"></path>\n                  <path d="M18.6660156,16.71875 L10.5410156,2.65625 C10.4199219,2.44726562 10.2109375,2.34375 10,2.34375 C9.7890625,2.34375 9.578125,2.44726562 9.45898438,2.65625 L1.33398438,16.71875 C1.09375,17.1367188 1.39453125,17.65625 1.875,17.65625 L18.125,17.65625 C18.6054688,17.65625 18.90625,17.1367188 18.6660156,16.71875 Z M9.375,8.125 C9.375,8.0390625 9.4453125,7.96875 9.53125,7.96875 L10.46875,7.96875 C10.5546875,7.96875 10.625,8.0390625 10.625,8.125 L10.625,11.71875 C10.625,11.8046875 10.5546875,11.875 10.46875,11.875 L9.53125,11.875 C9.4453125,11.875 9.375,11.8046875 9.375,11.71875 L9.375,8.125 Z M10,15 C9.48242188,15 9.0625,14.5800781 9.0625,14.0625 C9.0625,13.5449219 9.48242188,13.125 10,13.125 C10.5175781,13.125 10.9375,13.5449219 10.9375,14.0625 C10.9375,14.5800781 10.5175781,15 10,15 Z" id="Shape" fill="#FAAD14" fill-rule="nonzero"></path>\n                </g>\n              </g>\n            </g>\n          </g>\n        </svg>\n      </div>\n    ':"",'\n            <div class="lake-video-name">').concat(Wi(e.name||""),'</div>\n            <div class="lake-video-message">').concat(i?"":'<span class="lake-error-icon">X</span>').concat(Wi(e.message||a),"</div>\n          </div>\n        </div>\n      </div>\n    ")}return'\n    <div class="lake-video">\n      <div class="lake-video-content lake-video-done"></div>\n    </div>\n  '};var Gi=ue()("editor:card:video"),Ki=a.n.sanitizeUrl,Xi=["vod.yuque.com","intranetproxy.alipay.com","cdn.nlark.com","lark.alipay.com"],$i=function(e){f()(n,Ut);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var a;return o()(this,n),a=t.call(this),y()(u()(a),"focusCard",(function(){a.engine.change.focusCard(a.cardRoot)})),y()(u()(a),"startChecker",(function(e,t){var n=u()(a);Gi("初始化状态轮询: %j",a.value),function r(){n.queryStates((function(){e()}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"reject"===e.code?t(e):setTimeout(r,3e3)}))}()})),y()(u()(a),"hasOldCoverUrl",(function(){return a.value.coverUrl&&a.value.coverUrl.includes("?auth_key=")})),y()(u()(a),"handleOldCoverageUrl",(function(){a.hasOldCoverUrl()&&(a.value.coverUrl=null)})),y()(u()(a),"getDocUrl",(function(){var e=window.appData,t=J()(e,"group.login"),n=J()(e,"book.slug"),r=J()(e,"doc.slug");if(t&&n&&r)return"".concat(location.protocol,"//").concat(location.host,"/").concat(t,"/").concat(n,"/").concat(r)})),y()(u()(a),"updatePlayerState",(function(e){a.value.aliyunVideoSrc=e.aliyunVideoSrc||null,a.value.taobaoVideoId=e.taobaoVideoId||null,a.value.uploaderId=e.userId||null,e.taobaoVideoId&&e.userId&&a.getTopEngine().setGlobalData("video.autoKey."+e.taobaoVideoId,e.auth_key),a.value.docUrl=a.getDocUrl(),a.setValue(a.value)})),y()(u()(a),"queryStates",(function(e,t){a.num=a.num||0,a.num++;var n=function(t){var n=J()(t,"PlayInfoList.PlayInfo");a.updatePlayerState({aliyunVideoSrc:n[n.length-1].PlayURL}),e()},i=function(t){a.updatePlayerState(t),e()},o=function(e,t){var n=J()(e,"snapShotRes.MediaSnapshot");if(n&&n.Total){var r=Math.floor(n.Total/2),i=J()(n,"Snapshots.Snapshot");if(a.value.coverUrl=J()(n,i?"Snapshots.Snapshot[".concat(r,"].Url"):"Snapshots[".concat(r,"].Url")),a.isContentView)return t();a.engine.asyncEvent.emitAsync("video:coverurl",{url:a.value.coverUrl}).then((function(e){e&&e[0]&&(a.value.coverUrl=e[0],a.setValue(a.value)),t()}))}else t()};Object(r.ajax)({method:"get",url:J()(a.engine||a.contentView,"options.video.queryAction")||"/api/video/query",dataType:"json",data:{video_id:a.value.videoId},success:function(e){var r=e.data;Gi("第 %d 次查询结果: %j",a.num,a.value),r.RequestId?"Forbidden.IllegalStatus"===r.Code?t():(a.handleOldCoverageUrl(),a.value.coverUrl?n(r):o(r,(function(){return n(r)}))):6===r.state?(a.handleOldCoverageUrl(),a.value.coverUrl?i(r):o(r,(function(){return i(r)}))):5===r.state?t({code:"reject"}):t()},error:function(e){t({code:"server-query"}),Gi("状态轮询异常: %O",e)},processData:!0})})),y()(u()(a),"initPlayer",(function(e){if(a.value.uploaderId&&a.value.taobaoVideoId){e="https://cloud.video.taobao.com/play/u/".concat(a.value.uploaderId,"/p/1/e/6/t/1/").concat(a.value.taobaoVideoId,".mp4");var t=a.getTopEngine().getGlobalData("video.autoKey."+a.value.taobaoVideoId);t&&(e+="?auth_key=".concat(t)),Gi("鉴权auth_key: %s",t)}a.value.aliyunVideoSrc&&(e=a.value.aliyunVideoSrc),Gi("初始化播放器: %s",e),a.src=Ki(e),a.createPlayer(a.src,a.value.coverUrl)})),a.engine=e,a.isContentView=!e,a.isContentView?h()(a):(a.card=e.card,a)}return l()(n,[{key:"embedToolbar",value:function(){var e=this,t=[];return this.state.readonly&&this.value.download?t=[{type:"download",onClick:this.downloadFile.bind(this)}]:this.state.readonly||"done"!==this.value.status||(t=[{type:"download",onClick:this.downloadFile.bind(this)},{type:"separator"}]),t.concat([{type:"dnd"},{type:"copy"},{type:"preferences",onClick:function(){e.setSidebar(),e.openPreferences=!0}},{type:"separator"}].concat(ge()(this.getMoreEmbedToolbarConfig())))}},{key:"setSidebar",value:function(){var e=this.value,t=this.locale;this.engine.sidebar.set({name:"video",title:t.preferences,className:"lake-video-sidebar",data:e})}},{key:"downloadFile",value:function(){this.src&&(this.engine&&this.engine.options&&this.engine.options.downloadVideoHandler?this.engine.options.downloadVideoHandler(this.src):window.open(this.src))}},{key:"activate",value:function(){this.container.find(".lake-video-content").addClass("lake-video-content-active")}},{key:"restoreSideBar",value:function(){this.engine&&this.openPreferences&&(this.engine.sidebar.restore("video"),this.openPreferences=!1)}},{key:"unactivate",value:function(){this.container.find(".lake-video-content").removeClass("lake-video-content-active"),this.restoreSideBar()}},{key:"isEqualValue",value:function(e,t){return e.coverUrl===t.coverUrl&&e.docUrl===t.docUrl&&e.name===t.name&&e.percent===t.percent&&e.size===t.size&&e.status===t.status&&e.taobaoVideoId===t.taobaoVideoId&&e.uploaderId===t.uploaderId&&e.videoId===t.videoId}},{key:"createPlayer",value:function(e,t){var n=this,r=window.lozad_observer,a=document.createElement("video");a.preload="none",a.setAttribute(r?"data-src":"src",e),a.setAttribute("webkit-playsinline","webkit-playsinline"),a.setAttribute("playsinline","playsinline"),this.value&&this.value.width&&(a.style.width=this.value.width+"px",a.style.maxWidth="100%"),this.value&&this.value.height&&(a.style.height=this.value.height+"px"),a.className="lozad",t&&(a.poster=t);var i=this.container.find(".lake-video-content");i.addClass("lake-video-done"),i.empty(),i.append(a),r&&r.observe(),a.oncontextmenu=function(){return!1},setTimeout((function(){a.controls=!0,n.isContentView&&(a.controlsList="nodownload")}),0)}},{key:"isInWhiteList",value:function(e){var t=e.aliyunVideoSrc||e.src;if(t)try{var n=new URL(t).hostname;if(n)return Xi.includes(n)}catch(e){}return!0}},{key:"render",value:function(e,t){var n=this;this.container=e,this.value=t||{},e.empty();var r=Object(a.a)(Yi(this.value,this.locale));if(this.value.src){if(!this.isInWhiteList(this.value))return;return e.append(r),void this.initPlayer(this.value.src)}if(this.isContentView){if(Gi("阅读模式渲染: %j",this.value),!this.isInWhiteList(this.value))return;if("error"===this.value.status)return;"done"===this.value.status?this.queryStates((function(){e.append(r),n.initPlayer()}),(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.value.status="error",n.value.code=t.code,r=Object(a.a)(Yi(n.value,n.locale)),e.append(r)})):"error"===this.value.status&&e.append(r)}else Gi("编辑模式渲染: %j",this.value),"uploaded"===this.value.status?(e.append(r),this.startChecker((function(){n.value.status="done",n.setValue(n.value),n.render(n.container,n.value)}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.value.status="error",n.value.code=e.code,n.setValue(n.value),n.render(n.container,n.value)}))):"done"===this.value.status?this.queryStates((function(){e.append(r),n.initPlayer()}),(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.value.status="error",n.value.code=t.code,r=Object(a.a)(Yi(n.value,n.locale)),e.append(r)})):e.append(r)}},{key:"_renderError",value:function(e){var t=this.container,n=this.locale,r=Object(a.a)(Yi(e,n));t.empty(),t.append(r)}},{key:"destroy",value:function(){x()(g()(n.prototype),"destroy",this).call(this),this.restoreSideBar()}}]),n}();y()($i,"type","block"),y()($i,"uid",!0),vt(".lake-video-resizer {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 2;\n}\n.lake-video-resizer.show .lt,\n.lake-video-resizer.show .rt,\n.lake-video-resizer.show .rb,\n.lake-video-resizer.show .lb {\n  display: block;\n}\n.lake-video-resizer .lt,\n.lake-video-resizer .rt,\n.lake-video-resizer .rb,\n.lake-video-resizer .lb {\n  display: none;\n  position: absolute;\n  width: 8px;\n  height: 8px;\n  background: #1890FF;\n  border: 0 solid #fff;\n}\n.lake-video-resizer .lt {\n  top: 0;\n  left: 0;\n  border-width: 0 2px 2px 0;\n  cursor: nwse-resize;\n}\n.lake-video-resizer .rt {\n  top: 0;\n  right: 0;\n  border-width: 0 0 2px 2px;\n  cursor: nesw-resize;\n}\n.lake-video-resizer .lb {\n  bottom: 0;\n  left: 0;\n  border-width: 2px 2px 0 0;\n  cursor: nesw-resize;\n}\n.lake-video-resizer .rb {\n  bottom: 0;\n  right: 0;\n  border-width: 2px 0 0 2px;\n  cursor: nwse-resize;\n}\n.lake-video-resizer .resize-rect {\n  display: none;\n  position: absolute;\n  border: 1px dashed #000;\n  z-index: 2;\n}\n");var Zi=function(){function e(){o()(this,e)}return l()(e,null,[{key:"delegate",value:function(e,t,n,r){var i=!1,o=function(n){var o=n.clientX,c=n.clientY,l=e[0].getBoundingClientRect(),s=t[0].getBoundingClientRect();i=!0;var u=nt()((function(e){i&&r(!0,l,s,e.clientX-o,e.clientY-c)}),32),d=function(e){u(e)};Object(a.a)(document).on("mousemove",d,!1),Object(a.a)(document).on("mouseup",(function e(t){Object(a.a)(document).off("mousemove",d,!1),Object(a.a)(document).off("mouseup",e,!1),i?(i=!1,r(!1,l,s,t.clientX-o,t.clientY-c)):i=!1}),!1)};return n.on("mousedown",o,!1),function(){n.off("mousedown",o,!1)}}}]),e}();function Qi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ji(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qi(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var eo=function(e){f()(n,k.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e,r){var a;return o()(this,n),a=t.call(this),y()(u()(a),"_$boundaryNode",null),y()(u()(a),"_$container",null),y()(u()(a),"_$resizePanel",null),y()(u()(a),"_handlers",[]),y()(u()(a),"_lt",null),y()(u()(a),"_rt",null),y()(u()(a),"_lb",null),y()(u()(a),"_rb",null),a._$boundaryNode=e,a._$container=r,r.append('<div class="lake-video-resizer"><div class="lt"></div><div class="rt"></div><div class="rb"></div><div class="lb"></div><div class="resize-rect"></div></div>'),a._$resizePanel=r.find(".lake-video-resizer"),a._lt=a._$resizePanel.find(".lt"),a._rt=a._$resizePanel.find(".rt"),a._lb=a._$resizePanel.find(".lb"),a._rb=a._$resizePanel.find(".rb"),a._resizeRect=a._$resizePanel.find(".resize-rect"),a._bindEvent(),a}return l()(n,[{key:"_bindEvent",value:function(){var e=this;this._handlers.push(Zi.delegate(this._$boundaryNode,this._$container,this._lt,(function(t,n,r,a,i){a<0&&(a=0);var o=Math.max(Math.min(n.width,r.width-a),300),c=Math.max(Math.min(450,r.height-i),150);e._onChange(t,o,c,"lt")}))),this._handlers.push(Zi.delegate(this._$boundaryNode,this._$container,this._rt,(function(t,n,r,a,i){var o=Math.max(Math.min(n.width,r.width+a),300),c=Math.max(Math.min(450,r.height-i),150);e._onChange(t,o,c,"rt")}))),this._handlers.push(Zi.delegate(this._$boundaryNode,this._$container,this._lb,(function(t,n,r,a,i){a<0&&(a=0);var o=Math.max(Math.min(n.width,r.width-a),300),c=Math.max(Math.min(450,r.height+i),150);e._onChange(t,o,c,"lb")}))),this._handlers.push(Zi.delegate(this._$boundaryNode,this._$container,this._rb,(function(t,n,r,a,i){var o=Math.max(Math.min(n.width,r.width+a),300),c=Math.max(Math.min(450,r.height+i),150);e._onChange(t,o,c,"rb")})))}},{key:"_unbindEvent",value:function(){this._handlers.forEach((function(e){e&&e()})),this._$resizePanel.remove()}},{key:"show",value:function(){this._$resizePanel.addClass("show")}},{key:"hide",value:function(){this._$resizePanel.removeClass("show")}},{key:"destroy",value:function(){this._unbindEvent()}},{key:"_onChange",value:function(e,t,n,r){e?this._updateResizeRect(t,n,r):(this.emit("change",{width:t,height:n}),this._hideResizeRect())}},{key:"_updateResizeRect",value:function(e,t,n){var r={width:e+"px",height:t+"px",display:"block"};"lt"===n?r=Ji(Ji({},r),{},{right:0,bottom:0,top:"auto",left:"auto"}):"rt"===n?r=Ji(Ji({},r),{},{left:0,bottom:0,top:"auto",right:"auto"}):"lb"===n?r=Ji(Ji({},r),{},{right:0,top:0,left:"auto",bottom:"auto"}):"rb"===n&&(r=Ji(Ji({},r),{},{left:0,top:0,right:"auto",bottom:"auto"})),this._resizeRect.css(r)}},{key:"_hideResizeRect",value:function(){this._resizeRect.css("display","none")}}]),n}(),to=function(){function e(t,n){o()(this,e),y()(this,"_videoCard",null),y()(this,"_cb",null),y()(this,"_resizer",null),this._videoCard=t,this._cb=n}return l()(e,[{key:"createResizer",value:function(){var e=this._videoCard,t=this._cb,n=e.container.find(".lake-video-done");n.length&&(this._resizer=new eo(e.container,n),this._resizer.on("change",(function(e){var n=e.width,r=e.height;t&&t(n,r)})))}},{key:"enable",value:function(){this._resizer?this._resizer.show():(this.createResizer(),this._resizer&&this._resizer.show())}},{key:"disable",value:function(){this._resizer&&this._resizer.hide()}},{key:"destroy",value:function(){this._resizer&&this._resizer.destroy()}}]),e}();var no=a.n.sanitizeUrl,ro={en:{download:"Download",rejectError:"Video content is broken",commonError:"Video playback error, please try again later",transcoding:"Transcoding, please wait a moment",preferences:"Local video settings",pending:"Waiting...",aborted:"Upload interrupted",transcodeError:"Transcoding failed",networkError:"Network error",invalidVideo:"The video is damaged",queryError:"Query transcoding failed",fetching:"Getting video"},"zh-cn":{download:"下载",rejectError:"视频链接已损坏",commonError:"视频无法播放，请稍后重试",transcoding:"正在转码中，请稍候...",preferences:"本地视频设置",pending:"等待上传中...",aborted:"上传被中断",transcodeError:"转码失败",networkError:"网络错误，请稍后再试",invalidVideo:"视频已损坏",queryError:"查询转码失败",fetching:"获取视频中"}},ao=function(e){f()(n,$i);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"render",value:function(e,t){this.value&&"done"===this.value.status&&this.videoURL||this.forceRender(e,t)}},{key:"forceRender",value:function(e,t){if(this.container=e,this.value=t||{},this.locale=this.locale||ro[this.getLang()],this.toggleMargin(),this.refreshToolbar(),"done"!==this.value.status&&"uploaded"!==this.value.status&&(!this.value.src||this.value.status)||this.value.taskId||this.value.videoId)return this._renderNewVideo();x()(g()(n.prototype),"render",this).call(this,e,this.value)}},{key:"activate",value:function(){var e=this;this.videoSizeController?this.videoSizeController.enable():this.engine&&"done"===this.value.status&&this.engine.options.allowResizeVideo&&(this.videoSizeController=new to(this,(function(t,n){e._setVideoSize(t,n)})),this.videoSizeController.enable())}},{key:"unactivate",value:function(){this.videoSizeController&&this.videoSizeController.disable()}},{key:"_setVideoSize",value:function(e,t){this.setValue({width:e,height:t},!0);var n=this.container.find("video");n.length&&n.css({width:e+"px",height:t+"px",maxWidth:"100%"})}},{key:"rerender",value:function(){this.render(this.container,this.value)}},{key:"destroy",value:function(){this.checker&&this.checker.cancel(),this.videoSizeController&&this.videoSizeController.destroy(),x()(g()(n.prototype),"destroy",this).call(this)}},{key:"_renderNewVideo",value:function(){var e=this,t=this._checkError();if(t)this._renderError(t);else{var n=this.container,r=Object(a.a)(Yi(this.value,this.locale));if(n.empty(),n.append(r),!this.value.videoId&&(this.value.src||this.value.aliyunVideoSrc))return this.src=this.value.src||this.value.aliyunVideoSrc,this.setValue({status:"done"},!0),this.value.status="done",this.refreshToolbar(),void this._initNewPlayer(this.src);if(this.value.videoId&&!this.statusIsChecked)if(this.videoURL)this.src=this.videoURL,this.setValue({status:"done"},!0),this.value.status="done",this.refreshToolbar(),this._initNewPlayer(this.videoURL,this.coverURL);else{var i=Kn.checkStatus(this.getViewEngine(),this.value.videoId);this.checker=i,i.promise.then((function(t){e.statusIsChecked=!0,t.success?(e.coverURL=no(t.data.cover),e.videoURL=no(t.data.video),e.src=e.videoURL,e.setValue({status:"done"},!0),e.value.status="done",e.refreshToolbar(),e._initNewPlayer(e.videoURL,e.coverURL)):(e.setValue({status:"error",message:e.locale.transcodeError}),e.value.status="error",e.value.message=e.locale.transcodeError,e.rerender())})).catch((function(t){e.statusIsChecked=!0,console.error(t),e._renderError({status:"error",message:e.locale.networkError})}))}}}},{key:"_initNewPlayer",value:function(e,t){var n=Object(a.a)(Yi(this.value,this.locale));this.container.empty(),this.container.append(n),this.createPlayer(e,t)}},{key:"_renderError",value:function(e){var t=this.container,n=this.locale,r=Object(a.a)(Yi(e,n));t.empty(),t.append(r)}},{key:"_checkError",value:function(){var e=this.value;if(!e)return{status:"error",message:this.locale.aborted};if(e.src||e.aliyunVideoSrc)return this.isInWhiteList(this.value)?null:{status:"error",message:this.locale.invalidVideo};if("uploaded"!==e.status&&"done"!==e.status&&"error"!==e.status){if(!e.taskId||!Kn.hasTask(this.engine,e.taskId))return{status:"error",name:e.name,message:this.locale.aborted}}else if(!e.videoId){if("done"===e.status||"uploaded"===e.status)return{status:"error",name:e.name,message:this.locale.invalidVideo};if("error"!==e.status)return{status:"error",name:e.name,message:this.locale.queryError}}return null}}]),n}(),io={en:{download:"Download",placeholder:"Please paste the link here",submit:"submit",addressInvalid:"Link error, please check and re-enter",validUrl:"Illegal link, can't be embedded",uploading:"uploading",iframeOverLimit:"Documents support up to ${limit} embedded cards",iframeOverLimitCardView:"Embed cards can't be more than ${limit}",canNotShowCard:"Card cannot be displayed",stillTransfering:"Some files are still transfering",stillUploading:"Some files are still in the process of uploading",transfering:"Transferring",invalid:"Attachment invalid",wechatAlert:"Wechat does not support third-party content",example:"Example",help:"Help"},"zh-cn":{download:"下载",placeholder:"请在此粘贴链接",submit:"确定",addressInvalid:"链接错误，请检查后重新输入",validUrl:"输入链接有误，无法嵌入",uploading:"上传中",iframeOverLimit:"文档最多支持 ${limit} 张嵌入卡片",iframeOverLimitCardView:"嵌入卡片不能多于 ${limit} 张",canNotShowCard:"卡片无法展示",stillTransfering:"有文件还在转存中",stillUploading:"有文件还在上传中",transfering:"转存中",invalid:"附件已失效",wechatAlert:"小程序不支持查看第三方内容",example:"查看示例",help:"帮助"}};function oo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var co=function(e){f()(n,Ut);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),(r=t.call(this,e)).options=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oo(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({minHeight:80,defaultHeight:136,transition:"all 0.3s linear",resize:!0},e),r}return l()(n,[{key:"isError",value:function(){return!1}},{key:"getHeight",value:function(){var e=this.options.defaultHeight;return this.value.height||e}},{key:"renderError",value:function(){}},{key:"addIframeItem",value:function(){var e=this.getViewEngine().iframeHelper,t={};return this.iframeItem=t,!e||e.add(t)}},{key:"renderIframe",value:function(e,t,n){var r=this.getViewEngine();r.iframeHelper?this.iframeItem&&(this.iframeItem.iframe=e,this.iframeItem.url=t,r.iframeHelper.render(this.iframeItem,n,this.state.readonly)):e.attr("src",t)}},{key:"hitBlack",value:function(){return!0}},{key:"activate",value:function(){this.showRisizeController(),this.hideMask()}},{key:"restoreSideBar",value:function(){this.engine&&this.openPreferences&&(this.engine.sidebar.restore(this.sidebarName),this.openPreferences=!1)}},{key:"unactivate",value:function(){this.hideRisizeController(),this.showMask(),this.restoreSideBar()}},{key:"onResizeComplete",value:function(e){this.setValue({height:e})}},{key:"renderResizeController",value:function(){var e,t,n,r=this,a=this.root,i=this.options.minHeight;this.createResizeController(a,{onDragstart:function(){n=Ot(r.iframe[0]),r.iframe.css("transition","none"),r.showMask(),e=!0},onDragmove:function(e){t=(t=n+e)>=i?t:i,r.iframe.css("height",t+"px"),r.iframe.attr("data-height",t)},onDragend:function(){r.iframe.css("transition",r.transition),e&&(r.hideMask(),e=void 0,r.onResizeComplete(Ot(r.iframe[0]))),t=void 0}}),!0===this.state.activated&&this.showRisizeController()}},{key:"showMask",value:function(){this.mask&&this.mask.show()}},{key:"hideMask",value:function(){this.mask&&this.mask.hide()}},{key:"_removeIframe",value:function(){var e=this.getViewEngine();this.iframeItem&&e.iframeHelper&&(e.iframeHelper.remove(this.iframeItem),this.iframeItem=void 0)}},{key:"destroy",value:function(){this._removeIframe(),x()(g()(n.prototype),"destroy",this).call(this)}},{key:"clear",value:function(){this._removeIframe(),this.container.empty(),this.removeEvent()}},{key:"saveValue",value:function(){var e=this.iframe;e&&this.setValue({height:Ot(e[0])})}},{key:"getEmbedEmbedTitle",value:function(){return""}},{key:"renderOverLimitView",value:function(){var e=this.locale;this.container.append('<div style="\n      background: #fafafa;\n      border: 1px solid #d9d9d9;\n      color: rgba(0,0,0,0.45);\n      text-align: center;\n      padding: 0 12px;\n    ">\n      <p style="margin-bottom: 22px; padding-top: 4px; text-align: left; color: rgba(0,0,0,.65)">'.concat(this.getEmbedEmbedTitle(),'</p>\n      <p style="margin-bottom: 8px;"><img src="https://gw.alipayobjects.com/zos/basement_prod/e2bcbfed-6e3a-4f3b-957f-f52a460cfa43.svg"/></p>\n      <p>').concat(e.canNotShowCard,'</p>\n      <p style="margin-bottom: 40px">').concat(this.getiframeOverLimitCardViewTips(),"</p>\n    </div>"))}},{key:"getUrl",value:function(){}},{key:"getiframeOverLimitCardViewTips",value:function(){var e=this.locale,t=this.getViewEngine().iframeHelper;if(t)return e.iframeOverLimitCardView.replace("${limit}",t.options.limit)}},{key:"getiframeOverLimitTips",value:function(){var e=this.locale,t=this.getViewEngine().iframeHelper;if(t)return e.iframeOverLimit.replace("${limit}",t.options.limit)}},{key:"renderView",value:function(){var e=this,t=this.state.readonly,n=this.getUrl();if(this.clear(),this.isError()){if(t)return;this.renderError()}else this.addIframeItem()?n&&this.hitBlack(n)?A.a.error(this.locale.validUrl):t?this.renderReadView():(this.renderEditView(),this.bindEvent(this.engine,"save:before",(function(){return e.saveValue()}))):n?this.renderOverLimitView():(A.a.error(this.getiframeOverLimitTips()),this.remove())}},{key:"render",value:function(){var e=this.getLang(),t=io[e];this.locale=t,this.value=this.value||{},this.renderView(),this.toggleMargin(),this.state.readonly&&this.isError()||this.container.css("border","1px solid #d9d9d9")}}]),n}();function lo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function so(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lo(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var uo=a.n.escape,fo=a.n.sanitizeUrl,po=function(e){f()(n,co);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){var e;o()(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return e=t.call.apply(t,[this].concat(i)),y()(u()(e),"handleInputKeydown",(function(t){Object(a.t)("tab",t)&&(t.preventDefault(),t.stopPropagation()),Object(a.t)("enter",t)&&e.handleSubmit(e.getSrcFromInput())})),y()(u()(e),"handleSubmit",(function(t){var n=e.getOptions(),r=null,a=null;if(e.getDocEmbedURLWithError){var i=e.getDocEmbedURLWithError(t);r=i.url,a=i.message}else r=n.getDocEmbedURL?n.getDocEmbedURL(t):e.getDocEmbedURL(t);var o=null;r&&"object"===Z()(r)&&(o=r.name,a=r.message,r=r.url);var c=u()(e).locale;r?(o&&e.cardRoot.attr("data-card-alias",o),e.setValue(so(so({},e.getInitData()),{},{url:r,src:t})),e.render(),e.afterHandleSubmit()):e.engine.messageError(a||c.addressInvalid)})),y()(u()(e),"handleInsertExample",(function(){var t=e.getExampleURL(),n=e.getExampleInitData();e.setValue(so(so({},n||{}),{},{url:t,src:t})),e.render(),e.afterHandleSubmit()})),e}return l()(n,[{key:"getDocEmbedURL",value:function(){return!1}},{key:"embedToolbar",value:function(){return[{type:"dnd"},{type:"copy"},{type:"separator"}].concat(ge()(this.getMoreEmbedToolbarConfig()))}},{key:"getUrl",value:function(){var e=this.value,t=e.src;return e.url||t||void 0}},{key:"getExampleURL",value:function(){return null}},{key:"getExampleInitData",value:function(){return{}}},{key:"getInitData",value:function(){return{}}},{key:"getSrcFromInput",value:function(){return this.find("url")[0].value.trim()}},{key:"afterHandleSubmit",value:function(){}},{key:"unactivate",value:function(){x()(g()(n.prototype),"unactivate",this).call(this),this.container.find(".lake-embed-content").removeClass("lake-embed-content-active")}},{key:"find",value:function(e){var t="[data-role=".concat(e,"]");return this.container.find(t)}},{key:"focusInput",value:function(){var e=this;setTimeout((function(){var t=e.find("url")[0];t&&t.focus()}),50)}},{key:"getPlaceHolder",value:function(){var e=this.locale;return uo(e.placeholder)}},{key:"renderInput",value:function(){var e=this,t=this.container,n=this.locale,r=this.getPlaceHolder(),i=!!this.getExampleURL(),o=Object(a.a)('\n    <div class="lake-embed lake-embed-active">\n      <div class="lake-embed-form">\n        <span class="lake-embed-editor">\n          <input data-role="url" placeholder="'.concat(uo(r),'" spellcheck="false" class="lake-embed-input" value="" autocomplete="off"/>\n        </span>\n        <span class="lake-embed-button">\n          ').concat(i?'<button class="lake-embed-example-button" data-role="example">'.concat(n.example,"</button>"):"",'\n          <button class="lake-ui-button" data-role="submit"><span>').concat(uo(n.submit),"</span>\n        </button></span>\n      </div>\n    </div>\n    "));t.append(o);var c=this.find("url");c.on("keydown",this.handleInputKeydown),this.find("submit").on("click",(function(){var t=e.getSrcFromInput();e._handleSubmit?e._handleSubmit(t):e.handleSubmit(t)})),this.find("example").on("click",this.handleInsertExample),this.handleInputBoxInput&&c.on("input",this.handleInputBoxInput),this.handleInputBoxFocus&&c.on("focus",this.handleInputBoxFocus),this.handleInputBoxBlur&&c.on("blur",this.handleInputBoxBlur)}},{key:"getEmbedEmbedTitle",value:function(){return this.getUrl()}},{key:"renderIframeView",value:function(){var e=this.container,t=this.value,n=this.options,r=this.getHeight(),i=n.transition,o=Object(a.a)('\n      <div class="lake-embed lake-embed-active">\n        <div class="lake-embed-content">\n          <div class="lake-embed-mask"></div>\n          <div class="lake-embed-content-bg">\n            <span class="lake-icon lake-icon-loading"></span>\n          </div>\n          <iframe data-role="iframe"\n            class="lake-embed-content-frame"\n            frameborder="0"\n            '.concat(n.allow?'allow="'+uo(n.allow)+'"':"",'\n            allowfullscreen="true"\n            style="height: ').concat(uo(r),"px; transition: ").concat(uo(i),'"\n          >\n          </iframe>\n        </div>\n      </div>\n    ')),c=o.find(".lake-embed-mask"),l=o.find("iframe");t.height&&l.attr("data-height",r),l.on("load",(function(){o.find(".lake-embed-content-bg").hide(),l.addClass("lake-embed-content-frame-loaded")})),e.append(o);var s=this.getUrl();this.root=o,this.mask=c,this.iframe=l,this.renderIframe(l,fo(s)),!0===this.state.activated&&this.hideMask()}},{key:"renderEditView",value:function(){var e=this.value,t=this.options.resize;e.url?(this.renderIframeView(),t&&this.renderResizeController()):this.renderInput()}},{key:"renderReadView",value:function(){this.value.url&&(this.renderIframeView(),this.hideMask())}}]),n}();function ho(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}y()(po,"type","block");var mo=/^https?:\/\/riddle\.alibaba-inc\.com.*/,go=function(e){f()(n,po);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){return o()(this,n),t.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ho(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ho(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({defaultHeight:530,resize:!1},e))}return l()(n,[{key:"getPlaceHolder",value:function(){return"en"===this.getLang()?"Please enter a Riddle link address":"请输入 Riddle 链接地址"}},{key:"hitBlack",value:function(e){return function(e){return!e.match(mo)}(e)}},{key:"getDocEmbedURL",value:function(e){return function(e){if(e.match(mo))return e.endsWith("iframe")||(e+="/iframe"),e}(e)}}]),n}();function vo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yo(e){var t,n;if(n=e.match(/^https?:\/\/\w+\.youku\.com\/v_show\/id_([^\.]+)/i))return t=n[1],"https://player.youku.com/embed/".concat(t);if(n=e.match(/^https?:\/\/\w+\.bilibili\.com\/video\/av(\d+)/i)){t=n[1];var r=e.match(/p=(\d+)/);return r&&(r=r[1]),"https://player.bilibili.com/player.html?aid=".concat(t).concat(r?"&p=".concat(r):"")}return e.startsWith("https://cloud.video.taobao.com/")?e:void 0}var bo=function(e){f()(n,po);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),(r=t.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vo(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({resize:!1},e))).onResize=function(){r.iframe&&r.iframe.css("height","".concat(r.getHeight(),"px"))},window.addEventListener("resize",r.onResize,!1),r}return l()(n,[{key:"getHeight",value:function(){var e=this.getContainerWidth();return Math.min(e/(16/9),window.innerHeight/7*5)}},{key:"getExampleURL",value:function(){return yo("https://v.youku.com/v_show/id_XNDQ2Mzc1OTEyOA==.html")}},{key:"getPlaceHolder",value:function(){return"en"===this.getLang()?"Paste a link from site like Youku, Bilibili, Taobao Video":"粘贴视频链接，已支持优酷、哔哩哔哩、淘宝视频"}},{key:"hitBlack",value:function(e){return function(e){return!e.match(/^https:.*\.youku\.com\//)&&!e.match(/^https:.*\.bilibili\.com\//)&&!e.startsWith("https://cloud.video.taobao.com/")}(e)}},{key:"getDocEmbedURL",value:function(e){return yo(e)}},{key:"isError",value:function(){return!!Dt.isWechatMiniApp}},{key:"renderError",value:function(){var e=this.container,t=this.locale;e.append('\n      <div class="youku-error">\n        <p><span class="lake-icon lake-icon-warning"></span></p>\n        <p>'.concat(t.wechatAlert,"</p>\n      </div>\n    "))}},{key:"destroy",value:function(){window.removeEventListener("resize",this.onResize),x()(g()(n.prototype),"destroy",this).call(this)}}]),n}();var ko=a.n.escape,wo="lake-plugin-mention",xo=function(e){f()(n,Ut);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var i,c;return o()(this,n),i=t.call(this),y()(u()(i),"getDefaultSuggestions",(function(){var e=i.engine.options.mention||{};return e.defaultSuggestions?e.defaultSuggestions:e.getDefaultSuggestions?e.getDefaultSuggestions():[]})),y()(u()(i),"handleSearchResult",(c=he()(fe.a.mark((function e(t,n){var r,a,o;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},r=(r=t||[]).map((function(e){return a[e.login]=!0,e.avatar=e.avatar_url||e.avatar,e})),o=i.getDefaultSuggestions(),r=o.filter((function(e){var t=a[e.login];return!t&&e.login&&(t=-1!==e.login.toLowerCase().indexOf(n)),!t&&e.name&&(t=-1!==e.name.toLowerCase().indexOf(n)),t})).concat(r),r=at()(r,"login"),e.next=8,i.renderSuggestion(r);case 8:case"end":return e.stop()}}),e)}))),function(e,t){return c.apply(this,arguments)})),y()(u()(i),"handleSearch",function(){var e=he()(fe.a.mark((function e(t){var n,a,o,c,l,s;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.engine,a=n.options.mention||{},o=a.action,c=a.paramName,!a.getData){e.next=10;break}return e.next=6,a.getData(t);case 6:return l=e.sent,e.next=9,i.handleSearchResult(l,t);case 9:return e.abrupt("return",e.sent);case 10:i.ajax&&i.ajax.abort(),(s={url:o,data:{},method:"get",success:function(e){i.ajax=null,i.handleSearchResult(e.data,t).then()},error:function(e){console.error(e)}}).data[c]=t,i.ajax=Object(r.ajax)(s);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),y()(u()(i),"handleItemClick",(function(e){e.preventDefault();var t=Object(a.a)(e.target).closest(".lake-mention-item");i.updateCard(t),i.focusCard()})),y()(u()(i),"handlePreventDefault",(function(e){if(0!==i.cardRoot.closest("body").length)return e.preventDefault(),!1})),y()(u()(i),"handleInput",function(){var e=he()(fe.a.mark((function e(t){var n,r,a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.engine.domEvent.isComposing){e.next=2;break}return e.abrupt("return");case 2:if(""!==(n=t[0].innerText)){e.next=6;break}return i.engine.change.removeCard(i.cardRoot),e.abrupt("return");case 6:if(""!==(r=n.trim().substr(1))){e.next=12;break}return a=i.getDefaultSuggestions(),e.next=11,i.renderSuggestion(a);case 11:return e.abrupt("return",e.sent);case 12:i.handleSearch(r);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),y()(u()(i),"focusCard",(function(){i.engine.change.focusCard(i.cardRoot)})),y()(u()(i),"renderSuggestion",function(){var e=he()(fe.a.mark((function e(t){var n;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t?i._handleRenderSuggestion(t):(n=i.getDefaultSuggestions(),i._handleRenderSuggestion(n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),y()(u()(i),"_handleRenderSuggestion",(function(e){if(i.unbindEvents(),i.container.find(".lake-mention-list").remove(),0!==e.length){var t=Object(a.a)('<div class="lake-mention-list" />');t.on("mousedown",(function(e){return e.preventDefault()})),e.forEach((function(e,n){e.index=n,e.avatar=e.avatar_url||e.avatar;var r=Object(a.a)(function(e){var t="";if(e.dep){var n=e.dep&&e.dep.split("-")[0];t='<span class="lake-mention-item-dep">'.concat(ko(n),'</span><span class="lake-mention-item-split">-</span>')}var r,a=e.nick_name?'data-nick-name="'.concat(ko(e.nick_name),'"'):"";return'\n  <div class="lake-mention-item" data-index="'.concat(ko(e.index),'" data-login="').concat(ko(e.login),'" ').concat(a,' data-name="').concat(ko(e.name),'">\n    <span class="lake-mention-item-avatar">\n      <img src="').concat(ko((r=e.avatar,r&&(r.startsWith("http")&&r||window.appData.space.host+r))),'">\n    </span>\n    <span class="lake-mention-item-text">\n      <span class="lake-mention-item-text-item">\n        <span class="lake-mention-item-name">').concat(ko(e.name),'</span>\n      </span>\n      <span class="lake-mention-item-text-item" style="font-size: 12px;">\n        ').concat(t,'<span class="lake-mention-item-id">').concat(ko(e.login),"</span>\n      </span>\n    </span>\n  </div>\n  ")}(e));0===n&&r.addClass("lake-mention-item-selected"),r.on("click",i.handleItemClick),r.on("mouseenter",(function(){i.selectItem(r)})),t.append(r)})),i.container.append(t),i.bindEvents()}})),i.engine=e,i.readonly=!e,i}return l()(n,[{key:"destroy",value:function(){this.unbindEvents()}},{key:"activate",value:function(){"done"!==this.status&&(this.container.find(".lake-mention-list").show(),this.bindEvents())}},{key:"unactivate",value:function(){"done"!==this.status&&(this.container.find(".lake-mention-list").hide(),this.unbindEvents())}},{key:"unbindEvents",value:function(){this.engine&&(ae.a.deleteScope(wo),ae.a.unbind("enter",wo),ae.a.unbind("up",wo),ae.a.unbind("down",wo),this.engine&&this.engine.off("keydown:enter",this.handlePreventDefault))}},{key:"bindEvents",value:function(){var e=this;this.engine&&(this.unbindEvents(),ae.a.setScope(wo),ae()("enter",wo,(function(t){if(0!==e.cardRoot.closest("body").length){t.preventDefault();var n=e.container.find(".lake-mention-list").find(".lake-mention-item-selected");e.updateCard(n),e.focusCard()}})),ae()("up",wo,(function(t){0!==e.cardRoot.closest("body").length&&(t.preventDefault(),e.scrollItem("up"))})),ae()("down",wo,(function(t){0!==e.cardRoot.closest("body").length&&(t.preventDefault(),e.scrollItem("down"))})),this.engine.on("keydown:enter",this.handlePreventDefault))}},{key:"scrollItem",value:function(e){var t=this.container.find(".lake-mention-list"),n=t.find(".lake-mention-item-selected"),r="up"===e?n.prevElement():n.nextElement();if(r){this.selectItem(r);var a=t[0].clientHeight,i=n[0].clientHeight*r.attr("data-index");t[0].scrollTop=i-a/2}}},{key:"selectItem",value:function(e){this.container.find(".lake-mention-list").find(".lake-mention-item-selected").removeClass("lake-mention-item-selected"),e.addClass("lake-mention-item-selected")}},{key:"updateCard",value:function(e){this.unbindEvents();var t={login:e.attr("data-login"),name:e.attr("data-name")},n=e.attr("data-nick-name");n&&(t.nickName=n),this.engine.history.hold(),this.engine.change.updateCard(this.cardRoot,t)}},{key:"render",value:function(e,t){var r=this,i=this.engine;if(this.readonly){if(!t)return;e.append(n.getValueHTML(this.getTopEngine(),t))}else{t&&t.name?(e.append(n.getValueHTML(this.getTopEngine(),t)),this.status="done"):(e.append('<a class="lake-mention-at" contenteditable="true">@</a>'),this.status="inputting");var o=e.find(".lake-mention-at");if(o.on("click",(function(e){e.preventDefault()})),"done"!==this.status){o.on("keydown",(function(e){var t=Object(a.t)("space",e),n=Object(a.t)("enter",e),c=Object(a.t)("esc",e);if(t||n||c){if(e.preventDefault(),n&&r.container.find(".lake-mention-list").find(".lake-mention-item-selected").length>0)return;r.unbindEvents();var l=o[0].innerText.substr(1);if(""===l)return i.change.removeCard(r.cardRoot),void i.change.insertText("@");i.change.removeCard(r.cardRoot),i.change.insertText("@"+l)}})),o.on("blur",(function(){var e=r.engine,t=r.cardRoot,n=e.card.getComponent(t);n&&(n.value||(e.change.removeCard(r.cardRoot),e.change.insertText(o[0].innerText)))}));var c=Date.now();o.on("input",(function(){if(Date.now()-c<100){var e=o.first();if(e&&e.isText()&&"@@"===e[0].nodeValue){var t=e[0].splitText(1);Object(a.a)(t).remove()}}setTimeout((function(){r.handleInput(o).then()}),10)}))}}}}],[{key:"getValueHTML",value:function(e,t){var n=t=t||{},r=n.login,a=n.nickName,i=n.name;if(r){var o,c=J()(e||{},"options.mention.origin"),l="";return c?l=' target="_blank"':c=J()(window,"appData.space.host")||window.location.origin,o=a?"".concat(ko(a),"(").concat(ko(r),")"):"".concat(ko(i||r),"(").concat(ko(r),")"),'<a class="lake-mention-at" href="'.concat(ko(c),"/").concat(ko(r),'"').concat(l,">@").concat(o,"</a>")}return'<span class="lake-mention-at">@'.concat(ko(a||i),"</span>")}}]),n}();function _o(e){var t,n=e||{},r=n.type,a=n.targetType,i="";return"group"===r?function(e){return e.image&&/^https?:\/\//.test(e.image)?'<span class="lake-group-avatar"><img src="'.concat(encodeURI(e.image),'"></span>'):'<span class="lake-group-avatar lake-group-text-avatar" style="background-color: '.concat(function(e){if(!e)return Ro[0];var t=e.charCodeAt(0);return Ro[t%Ro.length]||Ro[0]}(e.title),'"><span>').concat(zt(function(e){var t=e.codePointAt(0);if(t=String.fromCodePoint(t),!/[0-9a-zA-Z\u4e00-\u9fa5]/.test(t)){var n=e.match(/[\u4e00-\u9fa5]/);n||(n=e.match(/[0-9a-zA-Z]/)),n&&(t=n[0])}return t}(e.title)),"</span></span>")}(e):(a&&"book"===a.toLowerCase()&&(i="repo-"),t="lake-svg-icon-yuque-".concat(i,"sheet"===r?"sheet":"design"===r?"design":"thread"===r?"thread":"mind"===r?"mind":"doc"),'<span class="lake-svg-icon '.concat(t,'"></span>'))}function Co(e,t){return e&&e.title?e.title:J()(t,"yuque.untitled","Untitled")}function Eo(e){var t=J()(e,"options.yuqueCard",{}).groupLoginName;return!t&&window.appData&&(t=(window.appData.group||{}).login),t||null}function Oo(e,t){var n=t.pathname;return e.filter((function(e){var r=e.url,a=new URL(r,t.origin).pathname;return a!==n&&a+"/edit"!==n}))}function So(e){var t=e.parentNode,n=t.getBoundingClientRect(),r=e.getBoundingClientRect();r.bottom>n.bottom?t.scrollTop=t.scrollTop+(r.bottom-n.bottom)+50:r.top<n.top&&(t.scrollTop=t.scrollTop-(n.top-r.top)-50)}y()(xo,"type","inline"),y()(xo,"selectStyleType","background");var Ro=["#3988E4","#B97940","#2F9547","#235B9D","#59AF9A"];function Do(){if(this.engine&&!this._recommendPanelVisible){var e=Mo.call(this);e[0].style.display="block",this._recommendPanelIndex=-1,this._recommendPanelVisible=!0,this._uiForRecommendPanel.find(".lake-doc-recommend-panel-body")[0].scrollTop=0,e.removeClass("focused"),zo.call(this)}}function Ao(){this._recommendPanelVisible&&(this._recommendPanelVisible=!1,this._recommendPanelIndex=-1,this._uiForRecommendPanel.find(".selected").removeClass("selected"),this._uiForRecommendPanel[0].style.display="none")}function To(){if(this._recommendPanelVisible){var e=Lo.call(this);e&&0!==e.length&&(this._recommendPanelIndex++,this._recommendPanelIndex>e.length-1&&(this._recommendPanelIndex=-1),No.call(this))}}function Po(){if(this._recommendPanelVisible){var e=Lo.call(this);e&&0!==e.length&&(this._recommendPanelIndex--,this._recommendPanelIndex<-1&&(this._recommendPanelIndex=e.length-1),No.call(this))}}function jo(){if(this._recommendPanelVisible&&-1!==this._recommendPanelIndex){var e=this._uiForRecommendPanel.find(".lake-doc-recommend-panel-item")[this._recommendPanelIndex];return e?e.getAttribute("data-href"):null}}function Mo(){if(this._uiForRecommendPanel)return this._uiForRecommendPanel;var e=this.getLocale().yuque;return this._uiForRecommendPanel=Object(a.a)('\n    <div class="lake-doc-recommend-panel">\n        <div class="lake-doc-recommend-panel-header">'.concat(e.recently,'</div>\n        <div class="lake-doc-recommend-panel-body"></div>\n        <div class="lake-doc-recommend-panel-footer">').concat(e.recommendTip,"</div>\n    </div>\n    ")),this.container.find(".lake-embed-form").append(this._uiForRecommendPanel),this._handleRecommendItemMousedown=Io.bind(this),this._uiForRecommendPanel.on("mousedown",this._handleRecommendItemMousedown,!1),this._uiForRecommendPanel}function No(){var e=this._recommendPanelIndex;if(this._uiForRecommendPanel.find(".selected").removeClass("selected"),-1!==e){var t=this._uiForRecommendPanel.find(".lake-doc-recommend-panel-item")[e];t&&(this._uiForRecommendPanel.addClass("focused"),Object(a.a)(t).addClass("selected"),So(t))}else this._uiForRecommendPanel.find(".lake-doc-recommend-panel-body")[0].scrollTop=0}function Lo(){var e=Eo(this.getViewEngine());return qo.call(this,e)}function Io(e){e.preventDefault();var t=e.target,n=Object(a.a)(t).closest(".lake-doc-recommend-panel-item");if(n.length){var r=n.attr("data-href");r&&this._handleSubmit(r)}}function zo(){var e=Eo(this.getViewEngine());if(e){var t=qo.call(this,e);t?Vo.call(this,e,t):(Bo.call(this,e),Fo.call(this))}else Ao.call(this)}function Bo(e){var t=this;Object(r.ajax)({method:"get",url:J()(this.getTopEngine(),"options.yuque.recentAction")||"/api/editor/recent",data:{type:"doc",scope:e},success:function(n){var r=Oo((n.data||[]).slice(0,10),t.getViewEngine().getPageLocation()),a=Eo(t.getViewEngine());Ho.call(t,e,r),a===e&&Vo.call(t,e,r)},error:function(){Uo.call(t)}})}function Fo(){var e=this.getLocale().yuque;this._uiForRecommendPanel.find(".lake-doc-recommend-panel-body").html('<div class="lake-doc-recommend-panel-loading">'.concat(e.loading,"</div>"))}function Vo(e,t){if(this._recommendPanelVisible&&this._lastRenderedGruop!==e){this._lastRenderedGruop=e;var n=this.getViewEngine().getPageLocation().origin,r=t.map((function(e){var t=_o(e),r=new URL(e.url,n).href;return'<div class="lake-doc-recommend-panel-item" data-href="'.concat(encodeURI(r),'">\n        ').concat(t,'\n        <dl class="lake-doc-recommend-panel-item-content">\n            <dt>').concat(zt(e.title),"</dt>\n            <dd>").concat(zt(e.belong),"</dd>\n        </dl>\n    </div>")})).join("\n");this._uiForRecommendPanel.find(".lake-doc-recommend-panel-body").html(r)}}function Uo(){var e=this.getLocale().yuque;this._uiForRecommendPanel.find(".lake-doc-recommend-panel-body").html('<div class="lake-doc-recommend-panel-error">'.concat(e.loadingError,"</div>"))}function qo(e){var t=this.engine;return t._cachedRecommend?t._cachedRecommend[e]:null}function Ho(e,t){var n=this.engine;n._cachedRecommend||(n._cachedRecommend={}),n._cachedRecommend[e]=t}function Wo(e){var t=Ko.call(this);Go.call(this,e),this._searchPanelVisible||(t[0].style.display="block",this._searchPanelVisible=!0),this._searchPanelIndex=-1,this._uiForSearchPanel.find(".lake-doc-search-panel-body")[0].scrollTop=0,this._uiForSearchPanel.removeClass("focused")}function Yo(){this._searchPanelVisible&&(nc.call(this),this._searchPanelVisible=!1,this._searchPanelIndex=-1,this._uiForSearchPanel.find(".selected").removeClass("selected"),this._uiForSearchPanel[0].style.display="none")}function Go(e){this._searchCache||(this._searchCache={});var t=this._searchCache;t[e]?(nc.call(this),Zo.call(this,t[e])):(tc.call(this,e),Xo.call(this))}function Ko(){if(this._uiForSearchPanel)return this._uiForSearchPanel;var e=this.getLocale().yuque,t=function(e){var t=J()(e,"options.yuqueCard",{}).groupName;return!t&&window.appData&&(t=(window.appData.group||{}).name),t||null}(this.getViewEngine());return this._uiForSearchPanel=Object(a.a)('\n    <div class="lake-doc-search-panel">\n        <div class="lake-doc-search-panel-body"></div>\n        <div class="lake-doc-search-panel-footer">'.concat(e.searchRange," ").concat(zt(t),"</div>\n    </div>\n    ")),this.container.find(".lake-embed-form").append(this._uiForSearchPanel),this._handleSearchItemMousedown=rc.bind(this),this._uiForSearchPanel.on("mousedown",this._handleSearchItemMousedown,!1),this._uiForSearchPanel}function Xo(){var e=this.getLocale().yuque;this._uiForSearchPanel.find(".lake-doc-search-panel-body").html('<div class="lake-doc-search-panel-waiting">'.concat(e.searching,"</div>"))}function $o(){var e=this.getLocale().yuque;this._uiForSearchPanel.find(".lake-doc-search-panel-body").html('<div class="lake-doc-search-panel-error">'.concat(e.searchError,"</div>"))}function Zo(e){if(e.length){var t=this.getViewEngine(),n=t.locale,r=e.map((function(e){var r=_o(e),a=new URL(e.url,t.getPageLocation().origin),i=Co(e,n);return'<div class="lake-doc-search-panel-item" data-href="'.concat(a,'">\n                ').concat(r,'\n                <dl class="lake-doc-search-panel-item-content">\n                    <dt>').concat(i,"</dt>\n                    <dd>").concat(zt(e.belong||"-"),"</dd>\n                </dl>\n            </div>")})).join("\n");this._uiForSearchPanel.find(".lake-doc-search-panel-body").html(r)}else{var a=this.getLocale().yuque;this._uiForSearchPanel.find(".lake-doc-search-panel-body").html('<div class="lake-doc-search-panel-tip">\n        <span class="lake-svg-icon lake-svg-icon-search"></span>\n        <div class="lake-doc-search-panel-tip-content">\n            <div>'.concat(a.emptySearchTip,"</div>\n            <div>").concat(a.emptySearchSubTip,"</div>\n        </div>\n    </div>"))}}function Qo(){if(this._searchPanelVisible){var e=this._uiForSearchPanel.find(".lake-doc-search-panel-item");if(e.length){if(this._uiForSearchPanel.find(".selected").removeClass("selected"),this._searchPanelIndex++,this._searchPanelIndex>e.length-1)return this._searchPanelIndex=-1,void(this._uiForSearchPanel.find(".lake-doc-search-panel-body")[0].scrollTop=0);this._uiForSearchPanel.addClass("focused");var t=e[this._searchPanelIndex];t&&(Object(a.a)(t).addClass("selected"),So(t))}}}function Jo(){if(this._searchPanelVisible){var e=this._uiForSearchPanel.find(".lake-doc-search-panel-item");if(e.length)if(this._uiForSearchPanel.find(".selected").removeClass("selected"),this._searchPanelIndex--,-1!==this._searchPanelIndex){this._searchPanelIndex<-1&&(this._searchPanelIndex=e.length-1);var t=e[this._searchPanelIndex];t&&(Object(a.a)(t).addClass("selected"),So(t))}else this._uiForSearchPanel.find(".lake-doc-search-panel-body")[0].scrollTop=0}}function ec(){if(this._searchPanelVisible&&-1!==this._searchPanelIndex){var e=this._uiForSearchPanel.find(".lake-doc-search-panel-item")[this._searchPanelIndex];return e?e.getAttribute("data-href"):null}}function tc(e){var t=this;nc.call(this);var n=Object(r.ajax)({method:"get",url:J()(this.getTopEngine(),"options.yuque.searchAction")||"/api/editor/search",data:{q:e,type:"doc",scope:Eo(this.getViewEngine())},success:function(n){var r=Oo((n.data||[]).slice(0,10),t.getViewEngine().getPageLocation());t._searchCache[e]=r,Zo.call(t,r)},error:function(){n.xhr._aborted||$o.call(t)}});this._searchHandle=n,this._searchHandle.promise.then((function(){t._searchHandle===n&&(t._searchHandle=null)}))}function nc(){this._searchHandle&&(this._searchHandle.xhr.abort(),this._searchHandle=null)}function rc(e){e.preventDefault();var t=e.target,n=Object(a.a)(t).closest(".lake-doc-search-panel-item");if(n.length){var r=n.attr("data-href");r&&this._handleSubmit(r)}}var ac=function(){function e(t){o()(this,e),y()(this,"handle",null),y()(this,"cardComponent",null),this.cardComponent=t}return l()(e,[{key:"getCache",value:function(e){var t=this.cardComponent.getViewEngine();return!!t._docCardCache&&t._docCardCache[e]}},{key:"get",value:function(e){var t=this;if(this.handle&&this.handle.url===e)return this.handle.promise;this._cancel();var n=new Promise((function(n){var a=e;try{a=new URL(a).toString()}catch(e){}var i=Object(r.ajax)({method:"get",url:J()(t.cardComponent.getTopEngine(),"options.yuque.linkDetailAction")||"/api/editor/link_detail",data:{url:a},success:function(r){t.handle=null,t._saveCache(e,r.data),n({success:!0,data:r.data})},error:function(){t.handle=null,n({success:!1})}});t.handle={resolve:n,request:i,promise:null,url:e}}));return this.handle.promise=n,n}},{key:"_saveCache",value:function(e,t){var n=this.cardComponent.getViewEngine();n._docCardCache||(n._docCardCache={}),n._docCardCache[e]=t}},{key:"_cancel",value:function(){this.handle&&(this.handle.resolve({success:!1}),this.handle=null)}}]),e}();function ic(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ic(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ic(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cc(){var e=this,t=this.value,n=t.src,r=t.detail;if(this.contentView)r?sc.call(this,r):uc.call(this);else{this.detailFetcher||(this.detailFetcher=new ac(this));var a=this.detailFetcher.getCache(n);a||this.detailFetcher.get(n).then((function(t){var n=t.success,a=t.data;n?(a=oc(oc({},r),a),e.setValue({detail:a}),e.value.detail=a,e.value.mode&&"card"!==e.value.mode||sc.call(e,a)):r||uc.call(e)})),r||a?r?sc.call(this,r):(this.setValue({detail:a}),sc.call(this,a)):lc.call(this)}}function lc(){var e=this.getLocale().yuque;dc.call(this,'<div class="lake-doc-card-view"><div class="lake-doc-card-view-loading">'.concat(e.loading,"</div></div>"))}function sc(e){var t=this.getViewEngine().locale,n=_o(e),r=zt(Co(e,t)),a=e.desc?'<div class="lake-doc-card-view-desc">'.concat(zt(e.desc),"</div>"):"";dc.call(this,'<div class="lake-doc-card-view">\n        <div class="lake-doc-card-view-box">\n          '.concat(n,'\n          <div class="lake-doc-card-view-content">\n            <div class="lake-doc-card-view-title">').concat(r,"</div>\n            ").concat(a,'\n            <div class="lake-doc-card-view-belong">').concat(zt(e.belong||e.url)||"-","</div>\n          </div>\n        </div>\n      </div>"))}function uc(){var e=this.getLocale().yuque;dc.call(this,'<div class="lake-doc-card-view"><div class="lake-doc-card-view-error"><div>'.concat(e.loadingError,'</div><div class="lake-doc-card-view-error-tip">').concat(this.value.src,"</div></div></div>"))}function dc(e){this.engine||(e='<a href="'.concat(encodeURI(this.value.src),'" target="_blank">').concat(e,"</a>")),this.container.html(e)}function fc(){var e=this.getLocale().yuque;pc.call(this,'<div class="lake-doc-unsupported-view">'.concat(e.unsupportedThread,"</div>"))}function pc(e){this.engine||(e='<a href="'.concat(encodeURI(this.value.src),'" target="_blank">').concat(e,"</a>")),this.container.html(e)}function hc(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var mc=["0.0.0.0","255.255.255.255",/^127\./,/^192\.168\./,/^10\./],gc=[["view","doc_embed"]],vc=[["inner",2],["view","doc_embed"]],yc=[["inner",5],["view","doc_embed"]];function bc(e){try{var t=new URL(e,"http://localhost").hostname;return!(!t||"localhost"===t||/^\d+\.\d+.\d+.\d+$/.test(t)&&mc.some((function(e){return"string"==typeof e?e===t:e.test(t)})))}catch(e){return!1}}var kc=[/\.yuque\.com$/,/(^|\.)yuque(\-pre)?\.(antfin|alibaba)-inc\.com$/,/(^|\.)yuque(\-pre)?\.antfin\.com$/,/\.alipay\.net$/];function wc(e,t){var n="";return t.forEach((function(t){var r=t[0],a=t[1];"number"==typeof a&&(a=e[a]),n+="".concat(r,"=").concat(a,"&")})),n.substring(0,n.length-1)}function xc(e,t){for(var n=!1,r=0;r<e.length;r++){var a=e[r],i=a[0],o=a[1],c=t.match(o);if(c){n="".concat(c[1],"?").concat(wc(c,i));break}}return n}var _c=function(){function e(t,n){o()(this,e),y()(this,"currentLocation",null),y()(this,"locale",null),y()(this,"whiteList",null),y()(this,"blackList",null),this.currentLocation=t,this.locale=n||{errorMessage:{}},this.locale.errorMessage||(this.locale.errorMessage={}),this._initWithList(),this._initBlackList()}return l()(e,[{key:"_initWithList",value:function(){var e=hc(this.currentLocation.origin);this.whiteList={insite:[[vc,new RegExp("("+e+"\\/[^/]{1,100}\\/[^/]{1,100}(?:\\/[^/]{1,100})?)\\?.*inner=([^/]{1,100})&")],[vc,new RegExp("("+e+"\\/[^/]{1,100}\\/[^/]{1,100}(?:\\/[^/]{1,100})?)\\?.*inner=(.*)")],[vc,new RegExp("("+e+"\\/[^/]{1,100}\\/[^/]{1,100}(?:\\/[^/]{1,100})?)#(.*)")],[gc,new RegExp("("+e+"\\/[^/]{1,100}\\/[^/]{1,100}(\\/.*)?)")]],yuque:[[vc,/(^https:\/\/[^/]{1,100}yuque\.com\/[^/]{1,100}\/[^/]{1,100}(?:\/[^/]{1,100})?)\?.*inner=([^/]{1,100})&/],[vc,/(^https:\/\/[^/]{1,100}yuque\.com\/[^/]{1,100}\/[^/]{1,100}(?:\/[^/]{1,100})?)\?.*inner=(.*)/],[vc,/(^https:\/\/[^/]{1,100}yuque\.com\/[^/]{1,100}\/[^/]{1,100}(?:\/[^/]{1,100})?)#(.*)/],[gc,/^(https:\/\/[^/]{1,100}(yuque)\.com\/[^/]{1,100}\/[^/]{1,100}(\/.*)?)/]],lark:[[yc,/(^https:\/\/[^/]{1,100}(((antfin|alibaba)-inc)|antfin)\.com\/[^/]{1,100}\/[^/]{1,100}(?:\/[^/]{1,100})?)\?.*inner=([^/]{1,100})&/],[yc,/(^https:\/\/[^/]{1,100}(((antfin|alibaba)-inc)|antfin)\.com\/[^/]{1,100}\/[^/]{1,100}(?:\/[^/]{1,100})?)\?.*inner=(.*)/],[yc,/(^https:\/\/[^/]{1,100}(((antfin|alibaba)-inc)|antfin)\.com\/[^/]{1,100}\/[^/]{1,100}(?:\/[^/]{1,100})?)#(.*)/],[gc,/^(https:\/\/[^/]{1,100}(((antfin|alibaba)-inc)|antfin)\.com\/[^/]{1,100}\/[^/]{1,100}(\/.*)?)/]]}}},{key:"_initBlackList",value:function(){var e=this,t=this.locale,n=hc(this.currentLocation.origin);this.blackList=[{rule:function(t,n){var r=new URL(t,e.currentLocation.origin).pathname;return!(/^\/[^\/]{2,}\/[^\/]+(\/[^\/]+)?$/.test(r)||n&&/^\/[^\/]{2,}$/.test(r))},message:t.errorMessage.notSupportURL},{rule:function(t){if(!e.currentLocation.pathname)return!1;var n=new URL(t,e.currentLocation.origin).pathname,r=e.currentLocation.pathname;return n===r||n+"/edit"===r},message:t.errorMessage.currentDOCURL},{rule:function(t){return!t.match(new RegExp(n+"\\/[^/]{1,100}"))&&!e.isYuque(t)&&!e.isLark(t)},message:t.errorMessage.notSupportURL},{rule:function(t){var n,r=(t=new URL(t,e.currentLocation.origin)).pathname,a=["/settings/applications/","/login/callback","/login/oauth","/sites/","/settings/callback/","/dashboard/","/about/"],i=["/topics/"],o=["/invitation","/apply","/settings/basic","/settings/advanced","/settings/lab","/topics/kanban","/settings/logs","/s","/watchers","/stargazers","/new","/dashboard"];for(n=0;n<a.length;n++){var c=a[n];if(r.startsWith(c))return!0}for(n=0;n<i.length;n++){var l=i[n];if(-1!==r.indexOf(l))return!0}for(n=0;n<o.length;n++){var s=o[n];if(r.endsWith(s))return!0}return!1},message:t.errorMessage.notSupportURL}]}},{key:"isYuque",value:function(e){return e.match(/^(https:\/\/[^/]{1,100}yuque\.com\/[^/]{1,100}(?:\/.*)?)/)}},{key:"isLark",value:function(e){try{var t=new URL(e);return["yuque.antfin.com","yuque.antfin-inc.com","yuque.alibaba-inc.com"].includes(t.host)}catch(e){return!1}}},{key:"parseLarkSameOrigin",value:function(e){if(this.isLark(e)&&this.isLark(this.currentLocation.href)){var t=new URL(e,this.currentLocation.origin).origin;return e.replace(t,this.currentLocation.origin)}return e}},{key:"isYuqueLink",value:function(e){var t=new URL(e,this.currentLocation.origin),n=t.origin,r=t.hostname;return n===this.currentLocation.origin||kc.some((function(e){return e.test(r)}))}},{key:"getURLInfo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={isYuqueURL:this.isYuqueLink(e),valid:!1,url:e};return t="object"===Z()(t)&&t?t:{},n.isYuqueURL?(n.url=this.getDocEmbedURL(e,!1,!!t.group),n.valid=!!n.url):n.valid=bc(e),n}},{key:"hitBlack",value:function(e,t){return this._hitBlack(e,t).hit}},{key:"_hitBlack",value:function(e,t){for(var n=0;n<this.blackList.length;n++){var r=this.blackList[n];if(r.rule(e,t))return console.warn("命中黑名单：规则 %d, url: %s",n,e),{hit:!0,message:r.message}}return{hit:!1}}},{key:"getDocEmbedURL",value:function(e,t,n){var r=window.appData||{},a=this.whiteList,i=a.yuque,o=a.lark,c=a.insite,l=this._hitBlack(e,n);return l.hit?!!t&&{url:null,message:l.message}:n&&Cc(e)?e:r.isYuque?xc(c.concat(i),e):xc(c.concat(o,i),e)}}]),e}();function Cc(e){var t=new URL(e,window.location.origin).pathname;return/^\/[^\/]{2,}$/.test(t)}var Ec=function(){function e(){o()(this,e)}return l()(e,null,[{key:"fix",value:function(e,t){if(!e)return e;var n=new URL(e,window.location.origin);return"file:"!==n.protocol?e:new URL(n.pathname+n.search+n.hash,t.origin).href}}]),e}();function Oc(e){var t=new URL(e,window.location.origin).pathname;return/^\/[^\/]{2,}\/[^\/]+$/.test(t)}window.addEventListener("message",(function(e){var t=e.data;if(t&&t.isYuqueEmbed)for(var n=t.href,r=t.contentHeight,i=document.querySelectorAll('[data-lake-card="yuque"] iframe'),o=0;o<i.length;o++){var c=i[o];if(c.getAttribute("src")===n){var l=a.s.card.getComponent(Object(a.a)(c).closest('[data-lake-card="yuque"]'));l&&l.onPageSendHeight(r)}}}),!1);var Sc=function(e){f()(n,po);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){var e;return o()(this,n),e=t.call(this,{defaultHeight:467}),y()(u()(e),"handleInputKeydown",(function(t){if(t.stopPropagation(),Object(a.t)("tab",t)&&(t.preventDefault(),t.stopPropagation()),Object(a.t)("enter",t)){var n=jo.call(u()(e))||ec.call(u()(e));n?e._handleSubmit(n):e._handleSubmit(e.getSrcFromInput())}else Object(a.t)("down",t)?(t.preventDefault(),To.call(u()(e)),Qo.call(u()(e))):Object(a.t)("up",t)&&(t.preventDefault(),Po.call(u()(e)),Jo.call(u()(e)))})),y()(u()(e),"handleInputBoxInput",(function(t){var n=t.target.value;n?(Ao.call(u()(e)),/^https?:\/\//.test(n)?Yo.call(u()(e)):Wo.call(u()(e),n)):(Yo.call(u()(e)),Do.call(u()(e)))})),y()(u()(e),"handleInputBoxFocus",(function(t){t.target.value||Do.call(u()(e))})),y()(u()(e),"handleInputBoxBlur",(function(){Ao.call(u()(e)),Yo.call(u()(e))})),e}return l()(n,[{key:"onPageSendHeight",value:function(e){if(this.value.url){var t=this.getTopEngine(),n="yuque.page.height."+this.value.url,r=t.getGlobalData(n);t.setGlobalData(n,e),e&&r!==e&&this.isAdaptiveHeightMode()&&this.resizeView()}}},{key:"embedToolbar",value:function(){var e=this,t=[];return this.value&&this.value.src?(this.isDisableEmbedView()&&"embed"===this.value.mode&&(this.value.mode="card"),"card"===this.value.mode?(t.push({type:"doc-title",onClick:function(){e.toggleMode("title")}}),this.isDisableEmbedView()||Oc(this.value.src)||Cc(this.value.src)||t.push({type:"doc-embed",onClick:function(){e.toggleMode("embed")}})):t.push({type:"doc-title",onClick:function(){e.toggleMode("title")}},{type:"doc-card",onClick:function(){e.toggleMode("card")}},{type:"separator"},{type:"height-mode-default",disabled:this.isDefaultHeightMode(),onClick:function(){e.toggleHeightMode("default")}},{type:"height-mode-adaptive",disabled:this.isAdaptiveHeightMode(),onClick:function(){e.toggleHeightMode("adaptive")}}),[{type:"dnd"}].concat(t,[{type:"separator"},{type:"gotolink",onClick:function(){e.value&&e.value.src&&e.getTopEngine().openLink(e.value.src)}},{type:"copy"},{type:"separator"}],ge()(this.getMoreEmbedToolbarConfig()))):[{type:"copy"},{type:"separator"}].concat(ge()(this.getMoreEmbedToolbarConfig()))}},{key:"isDisableEmbedView",value:function(){return!!J()(this.getTopEngine(),"options.disableYuqueCardEmbedView")}},{key:"isAllowToDefaultHeight",value:function(){var e=this.value.heightMode;return e&&"default"!==e}},{key:"isAllowToAdaptiveHeight",value:function(){var e=this.value.heightMode;return!e||"adaptive"!==e}},{key:"getUrl",value:function(){var e=x()(g()(n.prototype),"getUrl",this).call(this);return e?e=this.validator.parseLarkSameOrigin(e):e}},{key:"getLocale",value:function(){return this.getViewEngine().locale}},{key:"getHeight",value:function(){var e=this.options.defaultHeight;if(this.isDefaultHeightMode())return e;var t="yuque.page.height."+this.value.url;return this.isAdaptiveHeightMode()&&this.value.url?this.getTopEngine().getGlobalData(t)||e:this.isCustomHeightMode()&&this.value.height||e}},{key:"isDefaultHeightMode",value:function(){var e=this.value,t=e.heightMode;return void 0===e.height&&(!t||"default"===t)}},{key:"isAdaptiveHeightMode",value:function(){return"adaptive"===this.value.heightMode}},{key:"isCustomHeightMode",value:function(){var e=this.value,t=e.heightMode;return void 0!==e.height||"custom"===t}},{key:"toggleMode",value:function(e){if("mode"!==this.value.mode){if("title"===e)return this.engine.constructor.plugin.executePluginMethod(this.engine,"yuque","toggleToTitleMode",this);this.setValue({mode:e}),this.rerender(),this.refreshToolbar()}}},{key:"toggleHeightMode",value:function(e){this.value.heightMode!==e&&(this.setValue({heightMode:e,height:"custom"!==e?void 0:this.value.height}),this.resizeView(),this.refreshToolbar())}},{key:"resizeView",value:function(){if("embed"===this.value.mode){var e=this.getHeight(),t=this.cardRoot.find("iframe")[0];t&&(t.style.height=e+"px",t.dataset.height=e)}}},{key:"refreshToolbar",value:function(){this.getViewEngine().card.updateToolbar(this),this.getViewEngine().card.showToolbar(this.cardRoot)}},{key:"getPlaceHolder",value:function(){return"en"===this.getLang()?"Search for documents, tables or paste links":"搜索语雀文档、表格或贴入链接"}},{key:"getExampleURL",value:function(){return this.getDocEmbedURL("https://www.yuque.com/yuque/help/about")}},{key:"getInitData",value:function(){return{mode:this.isDisableEmbedView()?"card":"embed"}}},{key:"getExampleInitData",value:function(){return{mode:this.isDisableEmbedView()?"card":"embed"}}},{key:"hitBlack",value:function(e){var t=new URL(e,window.location.origin),n=!(!this.value||"card"!==this.value.mode);return!!this.validator.hitBlack(e,n)||(!n||!Cc(e))&&-1===t.search.indexOf("view=doc_embed")}},{key:"getDocEmbedURL",value:function(e){return this.validator.getDocEmbedURL(e)}},{key:"getDocEmbedURLWithError",value:function(e){var t=this.validator.getDocEmbedURL(e,!0);return!1===t?{url:null}:"object"!==Z()(t)?{url:t}:t?{url:t.url,message:t.message}:{url:t}}},{key:"renderEmbedEmbedView",value:function(){var e=this.getLang(),t="en"===e?"Displaying online documents is not supported in embedded cards":"嵌入卡片中暂不支持展示在线文档";this.container.append('<div style="background: #fafafa; height: 80px; padding-top: 28px; text-align: center; color: rgba(0,0,0,0.45);">\n    '.concat(t,'。<a href="').concat(window.location.href,'">').concat("en"===e?"Original Document link":"原文链接","</href>\n    </div>"))}},{key:"render",value:function(){this.value&&this.fixFileProtocol(),this.isDisableEmbedView()&&"embed"===this.value.mode&&(this.value.mode="card"),(this.value.src&&this.value.url||!this.getTopEngine().isReadonly)&&(this.validator||(a.u.desktop?this.validator=new _c(this.getTopEngine().getPageLocation(),this.getLocale()):this.validator=new _c(window.location,this.getLocale())),this.toggleMargin(),this.value=this.value||{},window.location.search.indexOf("view=doc_embed")>0?this.renderEmbedEmbedView():x()(g()(n.prototype),"render",this).call(this))}},{key:"rerender",value:function(){this.render()}},{key:"onResizeComplete",value:function(e){x()(g()(n.prototype),"onResizeComplete",this).call(this,e),this.toggleHeightMode("custom")}},{key:"renderEditView",value:function(){var e=this.value,t=this.options.resize;if(e.url)if("card"===e.mode)this.renderCardView();else{if(function(e){return!(!e||"thread"!==e.type||"Book"===e.target_type)}(this.value.detail))return void this.renderUnsupportedView();this.renderIframeView(),t&&this.renderResizeController(),this.showRisizeController()}else this.renderInput()}},{key:"renderReadView",value:function(){var e=this.value,t=e.url,r=e.mode;t&&("card"===r?cc.call(this):x()(g()(n.prototype),"renderReadView",this).call(this))}},{key:"renderCardView",value:function(){cc.call(this)}},{key:"_handleSubmit",value:function(e){var t=this.getTopEngine(),n=new URL(e,t.getPageLocation());/^\/[^\/]+\/[^\/]+\/?$/.test(n.pathname)?t.messageError(this.getLocale().errorMessage.notSupportURL):this.handleSubmit(e)}},{key:"afterHandleSubmit",value:function(){this.refreshToolbar()}},{key:"renderUnsupportedView",value:function(){fc.call(this)}},{key:"fixFileProtocol",value:function(){var e=this.getTopEngine();if(e){var t=Ec.fix(this.value.src,e.getPageLocation()),n=Ec.fix(this.value.url,e.getPageLocation());t!==this.value.src&&this.setValue({src:t}),n!==this.value.url&&this.setValue({url:n})}}}]),n}();var Rc=function(e){f()(n,Ut);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){var e;o()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),y()(u()(e),"detailFetcher",new ac(u()(e))),e}return l()(n,[{key:"embedToolbar",value:function(){var e=this;return[{type:"doc-card",onClick:function(){e.toggleMode("card")}},this.isDisableEmbedView()||Oc(this.value.src)||Cc(this.value.src)?null:{type:"doc-embed",onClick:function(){e.toggleMode("embed")}},{type:"separator"},{type:"gotolink",onClick:function(){e.value&&e.value.src&&e.getTopEngine().openLink(e.value.src)}},{type:"copy"},{type:"delete"}].filter(Boolean)}},{key:"getLocale",value:function(){return this.getViewEngine().locale}},{key:"toggleMode",value:function(e){return this.engine.constructor.plugin.executePluginMethod(this.engine,"yuque","toggleToBlockMode",this,e)}},{key:"render",value:function(){this.value=this.value||{},this.rerender()}},{key:"rerender",value:function(){var e=this.value,t=e.detail,n=e.src;if(this.contentView)t?this.renderDetail(t):this.renderError();else{var r=this.detailFetcher.getCache(n);t||r?(t||this.setValue({detail:r}),this.renderDetail(t||r)):this.renderLoading()}}},{key:"isDisableEmbedView",value:function(){return!!J()(this.getTopEngine(),"options.disableYuqueCardEmbedView")}},{key:"renderDetail",value:function(e){var t=zt(Co(e,this.getViewEngine().locale)),n=_o(e);this.container.html(this.wrap('<span class="le-card-yuque-inline">'.concat(n,'<span class="le-card-yuque-inline-content">').concat(t,"</span></span>")))}},{key:"renderLoading",value:function(){this.fetchData(this.value.src),this.container.html(this.wrap('<span class="le-card-yuque-inline"><span class="lake-svg-icon lake-svg-icon-yuque-doc"></span><span class="le-card-yuque-inline-content">内容获取中...</span></span>'))}},{key:"renderError",value:function(){this.container.html(this.wrap('<span class="le-card-yuque-inline"><span class="lake-svg-icon lake-svg-icon-yuque-doc"></span><span class="le-card-yuque-inline-content">未能获取内容</span></span>'))}},{key:"wrap",value:function(e){return this.engine?e:'<a href="'.concat(encodeURI(this.value.src),'" target="_blank">').concat(e,"</a>")}},{key:"fetchData",value:function(e){var t=this;e&&this.detailFetcher.get(e).then((function(e){var n=e.success,r=e.data;n?(t.setValue({detail:r}),t.value.detail=r,t.renderDetail(r)):t.value.detail||t.renderError()}))}}]),n}();y()(Rc,"selectStyleType","background"),y()(Rc,"type","inline");var Dc={en:{title:"Locked Text",lock:"Lock",setPassword:"Set Password",unlock:"Unlock",lockInputPlaceholder:"Recommend to set more than 6 digits",lockInputTitle:"Set the password (careful custody, the text cannot be retrieved after the password is lost)",passwordPattern:"Passwords only support: numbers, letters and common symbols",unlockInputPlaceholder:"Enter Password to unlock",ok:"OK",cancel:"Cancel",errorFeedback:"Incorrect password",lockedFeedback:"Password has gone wrong more than 5 times, please try again after 1 minute",contentFeedback:"Please enter content in the card",encryptoError:"Encryption failed",unLockedInfo:"Currently unencrypted",noPassword:"Please enter password"},"zh-cn":{title:"加密文本",lock:"锁住",setPassword:"设置密码",unlock:"解锁",lockInputPlaceholder:"建议设置 6 位以上",lockInputTitle:"设置密码 (谨慎保管，丢失后无法找回)：",passwordPattern:"密码仅支持：数字、字母及常见符号",unlockInputPlaceholder:"请输入密码",ok:"确认",cancel:"取消",errorFeedback:"密码有误",lockedFeedback:"密码出错超过 5 次，请 1 分钟后再尝试",contentFeedback:"请在加密卡片中输入内容",encryptoError:"加密失败",unLockedInfo:"未设置密码，将明文显示",noPassword:"请输入密码"}};var Ac=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){var e;o()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),y()(u()(e),"changeUnlockPassword",(function(t){e.password=t.target.value})),y()(u()(e),"unLock",(function(){e.props.onUnlock(e.password)})),y()(u()(e),"onPressEnter",(function(t){e.props.onUnlock(t.target.value)})),e}return l()(n,[{key:"render",value:function(){return C.a.createElement("div",{className:"unlock-panel"},C.a.createElement("div",{className:"lock-icon"}),C.a.createElement("p",null,C.a.createElement(z.a,{type:"password",placeholder:this.props.locale.unlockInputPlaceholder,onChange:this.changeUnlockPassword,onPressEnter:this.onPressEnter,autoComplete:"nope",addonAfter:C.a.createElement("span",{className:"unlock-btn",onClick:this.unLock},C.a.createElement(Re,null),this.props.locale.unlock)})),C.a.createElement("p",{className:"error-info"},this.props.locale.errorFeedback),C.a.createElement("p",{className:"lock-info"},this.props.locale.lockedFeedback))}}]),n}(C.a.Component);y()(Ac,"propTypes",{onUnlock:R.a.func,locale:R.a.object});var Tc=/[^a-zA-Z0-9\`\~\!\@\#\$\%\^\&\*\(\)\_\+\-\=\{\}\|\[\]\\\:\"\;\'\<\>\?\,\.\/]/,Pc=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){var e;o()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),y()(u()(e),"changeLockPassword",(function(t){e.password=t.target.value})),y()(u()(e),"lock",(function(){e.password?e.password.match(Tc)?A.a.error(e.props.locale.passwordPattern):e.props.onLock(e.password):A.a.error(e.props.locale.noPassword)})),e}return l()(n,[{key:"render",value:function(){return C.a.createElement("div",{className:"lock-panel"},C.a.createElement("div",{className:"lock-icon"}),C.a.createElement("p",{className:"lock-title"},this.props.locale.lockInputTitle),C.a.createElement("p",null,C.a.createElement(z.a,{placeholder:this.props.locale.lockInputPlaceholder,onChange:this.changeLockPassword,autoComplete:"nope"})),C.a.createElement("p",null,C.a.createElement(B.a,{type:"primary",onClick:this.lock},this.props.locale.ok),C.a.createElement(B.a,{onClick:this.props.onCancelLock},this.props.locale.cancel)))}}]),n}(C.a.Component);y()(Pc,"propTypes",{onLock:R.a.func,onCancelLock:R.a.func,locale:R.a.object});var jc={},Mc={},Nc=function(e){f()(n,Ut);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e,i){var c;return o()(this,n),c=t.call(this),y()(u()(c),"destroy",(function(){c.engine&&c.engine.toolbar.disable(!1),delete jc[c.getId()]})),y()(u()(c),"updateValue",(function(e){c.password?c.crypting&&!e||(c.crypting=!0,Object(r.ajax)({method:"post",url:c.cyptoApi,data:{pwd:c.password,text:c.originData,action:"encrypt"},success:function(t){c.crypting=!1,c.crypted=!0,c.cryptoData=t.data,c.setValue({locked:!0,cryptoData:c.cryptoData,originData:""},!0),e&&c.showUnLockpanel(),c.showStatus()},error:function(){c.crypting=!1,e&&c.engine.messageError(c.locale.encryptoError)}})):c.setValue({locked:!1,originData:c.originData},!0)})),y()(u()(c),"lock",(function(e){if(void 0!==e&&c.cachePassword(e),c.engine){if(!c.password)return void c.showLockPanel();c.updateValue(!0)}})),y()(u()(c),"unLock",(function(e){e&&c.cryptoData&&(c.disabled||c.decrypting||(c.decrypting=!0,Object(r.ajax)({method:"post",url:c.cyptoApi,data:{pwd:e,text:c.cryptoData,action:"decrypt"},success:function(t){c.decrypting=!1,c.originData=void 0!==t.data?t.data:"",c.cachePassword(e),c.showOriginData(c.originData),c.locktrigger.find(".text").html(c.locale.lock),c.showStatus()},error:function(){c.decrypting=!1,c.showError()}})))})),y()(u()(c),"showError",(function(){c.errorCount+=1,5===c.errorCount&&(c.disabled=!0,Object(a.a)(c.unLockContainer).addClass("locked"),c.delayClearLockStatus()),Object(a.a)(c.unLockContainer).addClass("error")})),y()(u()(c),"delayClearLockStatus",(function(){setTimeout((function(){c.disabled=!1,c.errorCount=0,Object(a.a)(c.unLockContainer).removeClass("error"),Object(a.a)(c.unLockContainer).removeClass("locked")}),6e4)})),y()(u()(c),"showOriginData",(function(e){c.clear(),c.textarea[0].value=e,c.textarea.attr("data-origin-data",e),c.originData=e,c.locked=!1,Mc[c.getId()]=!0})),y()(u()(c),"showLockPanel",(function(){c.clear(),O.a.render(C.a.createElement(Pc,{onLock:c.lock,onCancelLock:c.onCancelLock,locale:c.locale}),c.lockContainer)})),y()(u()(c),"showUnLockpanel",(function(){c.locked=!0,c.clear(),O.a.render(C.a.createElement(Ac,{onUnlock:c.unLock,locale:c.locale}),c.unLockContainer),delete Mc[c.getId()]})),y()(u()(c),"cachePassword",(function(e){c.password=e,jc[c.getId()]=e})),y()(u()(c),"clear",(function(){Object(a.a)(c.unLockContainer).removeClass("error"),Object(a.a)(c.unLockContainer).removeClass("locked"),O.a.unmountComponentAtNode(c.unLockContainer),c.lockContainer&&O.a.unmountComponentAtNode(c.lockContainer)})),y()(u()(c),"onCancelLock",(function(){c.clear()})),y()(u()(c),"onChangeValue",(function(e){var t=e.target.value;c.originData!==t&&(c.originData=t,c.updateValue())})),y()(u()(c),"onInput",(function(e){c.timer&&clearTimeout(c.timer),c.timer=setTimeout((function(){c.onChangeValue(e)}),3e3)})),y()(u()(c),"bindLockEvent",(function(){c.locktrigger=c.container.find(".locktrigger"),c.locktrigger.on("click",(function(){c.lock()}))})),y()(u()(c),"showStatus",(function(){c.engine&&(c.value.cryptoData?c.lockstatus.html(""):c.lockstatus.html(c.locale.unLockedInfo))})),y()(u()(c),"renderHTML",(function(e){if(c.cryptoData=c.value.cryptoData||"",c.originData=c.value.originData||"",c.container.append(Object(a.a)(function(e,t){return'\n    <div class="lake-lockedtext">\n      '.concat(e?'\n      <div class="lake-lockedtext-header">\n        <h5>'.concat(t.title,'</h5>\n        <span class="lockstatus"></span>\n        <span class="locktrigger">\n          <span class="lake-icon lake-icon-lock"></span>\n          <span class="text">').concat(t.setPassword,"</span>\n        </span>\n      </div>"):"",'\n      <div class="lake-lockedtext-content">\n        <textarea class="lockedtext"></textarea>\n      </div>\n      <div class="unlock-container ').concat(e?"editing":"reading",'"></div>\n      <div class="lock-container"></div>\n    </div>\n  ')}(e,c.locale))),c.textarea=c.container.find(".lockedtext"),c.unLockContainer=c.container.find(".unlock-container")[0],c.lockContainer=c.container.find(".lock-container")[0],c.lockstatus=c.container.find(".lockstatus"),c.bindLockEvent(),c.showStatus(),c.locked=!Mc[c.getId()]&&c.locked,!e)if(c.cryptoData)c.locked=!0;else if(c.originData)return void c.showOriginData(c.originData);if(!c.locked){if(c.originData)return void c.showOriginData(c.originData);if(jc[c.getId()])return void c.unLock(jc[c.getId()])}c.cryptoData&&c.showUnLockpanel()})),c.engine=e,c.contentView=i,e?(c.card=e.card,c.locale=Dc[e.options.lang],c.cyptoApi=e.options&&e.options.lockedtext&&e.options.lockedtext.action?e.options.lockedtext.action:"/api/services/crypto"):(c.locale=Dc[i.options.lang],c.cyptoApi=i.options&&i.options.lockedtext&&i.options.lockedtext.action?i.options.lockedtext.action:"/api/services/crypto"),c.originData="",c.cryptoData="",c.password="",c.locked=!1,c.errorCount=0,c}return l()(n,[{key:"embedToolbar",value:function(){return[{type:"dnd"},{type:"copy"},{type:"separator"}].concat(ge()(this.getMoreEmbedToolbarConfig()))}},{key:"activate",value:function(){this.engine&&this.engine.toolbar.disable(!0)}},{key:"unactivate",value:function(){this.engine&&this.engine.toolbar.disable(!1)}},{key:"renderView",value:function(){this.renderHTML(),this.toggleMargin(),this.textarea.attr("readonly",!0)}},{key:"renderEditor",value:function(){this.renderHTML(!0),this.toggleMargin(),this.textarea.on("change",this.onChangeValue),this.textarea.on("input",this.onInput)}},{key:"getId",value:function(){return this.value.uid||this.value.id}},{key:"render",value:function(e,t){this.value=t||{},this.contentView?this.renderView():this.renderEditor()}}]),n}();function Lc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}y()(Nc,"type","block"),y()(Nc,"uid",!0);var Ic=a.n.escape,zc=a.n.sanitizeUrl,Bc=function(e){f()(n,co);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),r=t.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lc(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({defaultHeight:467},e)),y()(u()(r),"downloadFile",(function(){var e=r.value,t=e.src,n=e.name;if(t){var a=r.getTopEngine();a&&a.options&&a.options.downloadFileHandler?a.options.downloadFileHandler(Bt(t),n):window.open(Bt(t))}})),y()(u()(r),"onSaveBefore",(function(){return new Promise((function(e,t){"uploading"!==r.value.status?"transfering"!==r.value.status?e():t(r.locale.stillTransfering):t(r.locale.stillUploading)}))})),r}return l()(n,[{key:"hitBlack",value:function(e){return!(e=new URL(e,location.origin)).pathname.startsWith("/office/")&&!e.pathname.startsWith("/preview/")}},{key:"embedToolbar",value:function(){var e=this,t=[{type:"dnd"},{type:"copy"},{type:"separator"},{type:"expand"},{type:"collapse"},{type:"preferences",onClick:function(){e.setSidebar(),e.openPreferences=!0}},{type:"separator"}].concat(ge()(this.getMoreEmbedToolbarConfig()));return this.state.readonly&&!this.value.download||t.unshift({type:"download",onClick:this.downloadFile.bind(this)}),t}},{key:"setSidebar",value:function(){}},{key:"collapse",value:function(){this.setValue({collapsed:!0}),this.render()}},{key:"expand",value:function(){this.setValue({collapsed:!1}),this.render()}},{key:"getUrl",value:function(){var e=this.getTopEngine().options,t=jt(this.value.src,e.previewOrigin,e.previewFrom);return zc(t)}},{key:"correctURL",value:function(e){return e}},{key:"resolvePreview",value:function(e){return Ft(e.replace("/office/","/preview/"),{json:!0})}},{key:"getAcceptExt",value:function(){var e=this.value,t=e.ext;return e.name&&/\.mindnode\.zip$/.test(e.name)?t="mindnode":e.name&&/\.xmind\.zip$/.test(e.name)&&(t="xmind"),t}},{key:"renderCollapse",value:function(){var e=this.value,t=this.getUrl(),n=this.correctURL(t),r=this.getAcceptExt(),i=this.container.append('\n      <div class="lake-embed lake-embed-upload lake-embed-upload-collapse" style="position: relative">\n        <div class="lake-embed-upload-file-icon lake-svg-icon-'.concat(Ic(r),'"></div>\n        <div class="lake-embed-upload-collapse-body">\n          <div class="lake-embed-upload-collapse-name" >\n            <a href="').concat(n,'" target="_blank">').concat(Ic(e.name),'</a>\n            <span class="lake-embed-upload-collapse-file-size">').concat(Ic(a.h.getFileSize(e.size)),'</span>\n          </div>\n        </div>\n        <a class="lake-embed-upload-icon lake-svg-icon-preview" href="').concat(n,'" target="_blank"></a>\n      </div>\n    '));this.root=i}},{key:"getStatusTips",value:function(){var e=this.value,t=this.locale;return"uploading"===e.status?t.uploading:""}},{key:"renderExpand",value:function(){var e=this.value,t=this.options,n=e.status,r=e.ext,i=this.getHeight(),o=this.getUrl(),c=this.correctURL(o),l=t.transition,s=this.state.readonly?" lake-card-readonly":"",u=this.getStatusTips(),d=this.getAcceptExt(),f=Object(a.a)('\n      <div class="lake-embed lake-embed-upload'.concat(s,'">\n        <div class="lake-embed-upload-header">\n          <span class="lake-embed-upload-icon lake-embed-upload-file-icon lake-svg-icon-').concat(Ic(d),'"></span>\n          <a href="').concat(Ic(c),'" target="_blank">\n            <span class="lake-embed-upload-file-name" style="max-width: calc(100% - 60px)"> ').concat(Ic(e.name),' </span>\n            <span data-role="status-tips">').concat(u,'</span> <span data-role="percent"></span>\n          </a>\n          <a class="lake-embed-upload-icon lake-svg-icon-preview" href="').concat(Ic(c),'" target="_blank"></a>\n        </div>\n        <div class="lake-embed-upload-body">\n          <div class="lake-embed-content-bg">\n            <span class="lake-icon lake-icon-loading"></span>\n          </div>\n          <iframe\n            frameborder="0"\n            allowfullscreen="true"\n            style="height: ').concat(Ic(i),"px; transition: ").concat(Ic(l),'"\n          ></iframe>\n          <div class="lake-embed-mask"></div>\n        </div>\n      </div>\n    ')),p=f.find("iframe");if(this.container.append(f),this.root=f,this.iframe=p,this.mask=f.find(".lake-embed-mask"),e.height&&p.attr("data-height",i),"done"===n)if("xls"!==r&&"xlsx"!==r||p.css("border-top","none"),ee.ua.desktop&&["mindnode.zip","mindnode","pdf","psd","xmind"].includes(r)){var h=this,m=window.appConfig.pdfViewer;this._fetchPreviewURL(c,(function(e){try{var t="".concat(m,"?file=").concat(encodeURIComponent(e));h.renderIframe(p,t,2e3)}catch(e){}}))}else this.renderIframe(p,"".concat(Ft(c,{view:"doc_embed"})),2e3);!0===this.state.activated&&this.hideMask()}},{key:"renderReadView",value:function(){this.state.collapsed?this.renderCollapse():(this.renderExpand(),this.hideMask())}},{key:"didInsert",value:function(e){if("uploading"===e.status||"transfering"===e.status){var t=this.getTopEngine();if(!e.uid||!t.uploader||!t.uploader.uploadingFiles[e.uid])return;t&&t.asyncEvent&&this.bindEvent(t.asyncEvent,"save:before",this.onSaveBefore)}}},{key:"getEmbedEmbedTitle",value:function(){var e=this.getAcceptExt(),t=this.value;return'\n        <span class="lake-svg-icon-'.concat(Ic(e),'" style="\n          float: left;\n          margin-top: 5px;\n          margin-right: 6px;\n          width: 12.6px;\n          height: 13.5px;\n          background-size: 12.6px 13.5px;\n        "></span>\n        ').concat(Ic(t.name),"\n    ")}},{key:"renderEditView",value:function(){this.state.collapsed?this.renderCollapse():(this.renderExpand(),this.renderResizeController())}},{key:"isError",value:function(){return"error"===this.value.status}},{key:"renderError",value:function(){var e=this.value,t=this.container,n=this.locale;O.a.render(C.a.createElement(Ur,{cardIcon:'<span class="lake-svg-icon lake-svg-icon-error-file"></span>',variableContent:(e.message?e.message:n.invalid)+" "+e.name,fixedContent:e.ext?e.ext:"",message:e,block:!0,docWidth:this.getContainerWidth()}),t[0])}},{key:"render",value:function(){var e=this.state,t=this.value||{},r=t.collapsed;this.value=t,t.status=t.status||"done",e.collapsed=void 0!==r&&r,!t.ext&&t.src&&(t.ext=a.h.getFileExtname(t.src)),x()(g()(n.prototype),"render",this).call(this),this.toggleMargin(),this.refreshToolbar()}},{key:"destroy",value:function(){x()(g()(n.prototype),"destroy",this).call(this),this.restoreSideBar()}},{key:"_fetchPreviewURL",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;Object(r.ajax)({method:"get",url:this.resolvePreview(e),success:function(e){var n=e.data;t(n.url)},error:function(){a>0&&setTimeout((function(){n._fetchPreviewURL(e,t,a-1)}),3e3)}})}}]),n}();function Fc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fc(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}y()(Bc,"type","block");var Uc={en:{preferences:"Local File Preferences"},"zh-cn":{preferences:"本地文件设置"}},qc=function(e){f()(n,Bc);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){var e;o()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),y()(u()(e),"sidebarName","localdoc"),e}return l()(n,[{key:"embedToolbar",value:function(){var e=this,t=x()(g()(n.prototype),"embedToolbar",this).call(this);return t&&this.engine&&this.value&&!1!==this.engine.options.allowResource&&!1!==this.engine.options.allowSaveToResource&&"done"===this.value.status&&t.splice(2,0,{type:"button",name:"saveToResource",iconName:"save-folder",title:this.engine.locale.embedToolbar.saveToResource,onClick:function(){var t=e.getTopEngine();t&&t.event.trigger("saveToResource",{name:"localdoc",data:Vc({},e.value)})}}),t}},{key:"setSidebar",value:function(){var e=this.value,t=Uc[this.getLang()];this.engine.sidebar.set({name:"localdoc",title:t.preferences,className:"lake-localdoc-sidebar",data:e})}},{key:"correctURL",value:function(e){var t=this.engine||this.contentView;return t&&t.options&&t.options.localdoc&&t.options.localdoc.domain?new URL(e,t.options.localdoc.domain).href:e}}]),n}(),Hc={colors:[["#000000","#262626","#595959","#8C8C8C","#BFBFBF","#D9D9D9","#E9E9E9","#F5F5F5","#FAFAFA","#FFFFFF"],["#F5222D","#FA541C","#FA8C16","#FADB14","#52C41A","#13C2C2","#1890FF","#2F54EB","#722ED1","#EB2F96"],["#FFE8E6","#FFECE0","#FFEFD1","#FFF8BD","#E4F7D2","#D3F5F0","#D4EEFC","#DEE8FC","#EFE1FA","#FAE1EB"],["#FFA39E","#FFBB96","#FFD591","#FFF08F","#B7EB8F","#87E8DE","#91D5FF","#ADC6FF","#D3ADF7","#FFADD2"],["#FF4D4F","#FF7A45","#FFA940","#FFEC3D","#73D13D","#36CFC9","#40A9FF","#597EF7","#9254DE","#F759AB"],["#CF1322","#D4380D","#D46B08","#D4B106","#389E0D","#08979C","#096DD9","#1D39C4","#531DAB","#C41D7F"],["#820014","#871400","#873800","#614700","#135200","#00474F","#003A8C","#061178","#22075E","#780650"]]};function Wc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}Hc._map=function(){for(var e={},t=Hc.colors,n=0,r=t.length;n<r;n++)for(var a=0,i=t[n].length;a<i;a++)e[t[n][a]]={y:n,x:a};return e}(),Hc.getStroke=function(e){var t=Hc._map[e];return t&&(2===t.y||3===t.y&&t.x>2&&t.x<5)?this.colors[4][t.x]:e},Hc.getColors=function(){return this.colors};var Yc=function(e){f()(n,e);var t=Wc(n);function n(){var e;o()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),y()(u()(e),"toState",(function(e,t){var n=e.hex?ot()(e.hex):ot()(e),r=n.toHsl(),a=n.toHsv(),i=n.toRgb(),o=n.toHex();return 0===r.s&&(r.h=t||0,a.h=t||0),{hsl:r,hex:"000000"===o&&0===i.a?"transparent":"#".concat(o),rgb:i,hsv:a,oldHue:e.h||t||r.h,source:e.source}})),y()(u()(e),"getContrastingColor",(function(t){if(!t)return"#fff";var n=e.toState(t);return"transparent"===n.hex?"rgba(0,0,0,0.4)":(299*n.rgb.r+587*n.rgb.g+114*n.rgb.b)/1e3>=210?"#8C8C8C":"#FFFFFF"})),y()(u()(e),"onSelect",(function(t,n){n.preventDefault(),n.stopPropagation(),e.props.onSelect&&e.props.onSelect(t)})),e}return l()(n,[{key:"render",value:function(){var e=this.props,t=e.color,n=e.activeColors,r=e.defaultColor,a=e.setStroke,i=["#FFFFFF","#FAFAFA"].indexOf(t)>=0,o=n.indexOf(t)>=0,c=t===r,l={check:{fill:this.getContrastingColor(t),display:o?"block":"none"},block:{backgroundColor:"".concat(t)}};return a&&(l.block.border="1px solid ".concat(Hc.getStroke(t))),C.a.createElement("span",{className:le()("lake-colorboard-group-item",{"lake-colorboard-group-item-border":i,"lake-colorboard-group-item-active":o,"lake-colorboard-group-item-special":c}),onClick:this.onSelect.bind(this,t)},C.a.createElement("span",{style:l.block},C.a.createElement("svg",{style:l.check,viewBox:"0 0 18 18"},C.a.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))))}}]),n}(C.a.Component);y()(Yc,"propTypes",{color:R.a.string,activeColors:R.a.array,defaultColor:R.a.string,onSelect:R.a.func,setStroke:R.a.bool});var Gc=function(e){f()(n,e);var t=Wc(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"render",value:function(){var e=this.props,t=e.data,n=void 0===t?[]:t,r=e.activeColors,a=e.defaultColor,i=e.onSelect,o=e.setStroke;return C.a.createElement("span",{className:"lake-colorboard-group"},n.map((function(e){return C.a.createElement(Yc,{color:e,key:e,activeColors:r,defaultColor:a,onSelect:i,setStroke:o})})))}}]),n}(C.a.Component);y()(Gc,"propTypes",{activeColors:R.a.array,defaultColor:R.a.string,data:R.a.array,onSelect:R.a.func,setStroke:R.a.bool});var Kc=function(e){f()(n,e);var t=Wc(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"render",value:function(){var e=this.props.activeColors,t=this.props,n=t.defaultColor,r=t.onSelect,a=t.setStroke,i=this.props.colors;return i||(i=Hc.getColors()),(0===e.length||1===e.length&&""===e[0])&&(e=[n]),C.a.createElement("div",{className:"lake-colorboard"},i.map((function(t,i){return C.a.createElement(Gc,{data:t,key:i,activeColors:e,defaultColor:n,onSelect:r,setStroke:a})})))}}]),n}(C.a.Component);function Xc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xc(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}y()(Kc,"propTypes",{activeColors:R.a.array,defaultColor:R.a.string,onSelect:R.a.func,colors:R.a.array,setStroke:R.a.bool});var Zc=a.n.escape,Qc=a.n.unescape,Jc=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;o()(this,n),r=t.call(this,e);var a=e.cardValue.colorIndex;return r.state={activeColors:[e.colors[a]]},r}return l()(n,[{key:"change",value:function(e){this.props.onChange($c($c({},this.props.cardValue),e))}},{key:"render",value:function(){var e=this,t=this.props,n=t.colors,r=t.onPressEnter,a=t.onFocus,i=t.onBlur,o=this.state.activeColors;return C.a.createElement("div",null,C.a.createElement(z.a,{defaultValue:Qc(this.props.cardValue.label),onChange:function(t){e.change({label:Zc(t.target.value.trim())})},draggable:"false",onDragStart:function(e){e.preventDefault(),e.stopPropagation()},onClick:function(e){e.stopPropagation()},onMouseDown:function(e){e.stopPropagation(),e.target.focus()},onFocus:a,onBlur:i,onPressEnter:r}),C.a.createElement(Kc,{activeColors:o,setStroke:!0,onSelect:function(t){e.change({colorIndex:n.indexOf(t)}),e.setState({activeColors:[t]})},colors:[n]}))}}]),n}(C.a.Component);y()(Jc,"propTypes",{onChange:R.a.func,cardValue:R.a.object,colors:R.a.array,onFocus:R.a.func,onBlur:R.a.func,onPressEnter:R.a.func});var el={en:{defaultLabel:"SET LABEL"},"zh-cn":{defaultLabel:"设置标签"}};function tl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tl(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rl=Hc.getColors(),al=[[rl[2][0],rl[6][0]],[rl[2][3],rl[6][3]],[rl[2][4],rl[6][4]],[rl[0][6],rl[0][2]],[rl[2][6],rl[6][6]],[rl[2][7],rl[6][7]]],il=function(e){f()(n,Ut);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"onChange",value:function(e){this.value=Object.assign(this.value,e),this.updateLabel(),this.engine&&this.engine.setUserChanged()}},{key:"onConfirm",value:function(){this.value&&this.setValue(this.value)}},{key:"focusInput",value:function(){this.editorContainer.find("input")[0].focus()}},{key:"unactivate",value:function(){this.state.readonly||(this.editorContainer.hide(),this.setValue({},!0),this.labelContainer.removeClass("lake-label-selected"),this.engine.readonly(!1),Kt(this))}},{key:"updateEditorPosition",value:function(){var e=this.labelContainer.getBoundingClientRect();this.editorContainer.css("left","".concat(e.left,"px")),this.editorContainer.css("top","".concat(e.top+24,"px"))}},{key:"activate",value:function(){this.state.readonly||(this.editorContainer.show(),this.labelContainer.addClass("lake-label-selected"),this.updateEditorPosition(),Gt(this))}},{key:"select",value:function(){this.labelContainer.addClass("lake-label-selected")}},{key:"unselect",value:function(){this.state.activated&&!this.state.readonly||this.labelContainer.removeClass("lake-label-selected")}},{key:"selectByOther",value:function(e){this.labelContainer.css("border","2px solid "+e)}},{key:"unselectByOther",value:function(){this.labelContainer.css("border","")}},{key:"updateLabel",value:function(){var e=this.value,t=e.colorIndex,n=e.label,r=al[t][0],i=al[t][1],o=n,c=1;n||(o=this.locale.defaultLabel,c=.45),this.labelContainer.css("background",r),this.labelContainer.css("color",i),this.labelContainer.css("opacity",c),this.state.activated?this.labelContainer.addClass("lake-label-selected"):this.labelContainer.removeClass("lake-label-selected"),this.labelContainer.text(a.n.unescape(o))}},{key:"renderView",value:function(){var e=this.container;this.labelContainer=Object(a.a)('\n      <span class="lake-card-label-container"></span>\n    '),e.append(this.labelContainer),this.updateLabel(),!this.state.readonly&&Xt(this.labelContainer)}},{key:"renderEditor",value:function(){var e=this,t=this.container,n=this.value,r=this.engine,i=this.cardRoot,o=Object(a.a)('<div class="lake-card-label-editor"></div>');this.editorContainer=o,t.append(o),$t({editorContainer:o,engine:r,cardRoot:i}),O.a.render(C.a.createElement(Jc,{colors:al.map((function(e){return e[0]})),onChange:function(t){e.onChange(t)},onFocus:function(){o.addClass("input-focus"),e.engine.readonly(!0)},onBlur:function(){e.onConfirm(),o.removeClass("input-focus")},onPressEnter:function(){e.onConfirm()},cardValue:n,defaultValue:this.defaultValue}),o[0])}},{key:"getDefaultValue",value:function(){return{label:"",colorIndex:0}}},{key:"render",value:function(){var e=this.getLang(),t=el[e],n=this.getDefaultValue();this.locale=t,this.value=this.value||{},this.value=nl(nl({},n),this.value),this.defaultValue=n,this.renderView(),this.state.readonly||this.renderEditor()}},{key:"destroy",value:function(){x()(g()(n.prototype),"destroy",this).call(this),Kt(this)}}]),n}();y()(il,"type","inline");var ol="https://".concat("wxmp.processon.com","/embed/"),cl="https://".concat("www.processon.com","/embed/"),ll="https://".concat("www.processon.com","/chart_image/id/"),sl="https://assets.processon.com/embed/";function ul(e){return e.startsWith(cl)||e.startsWith("https://www.processon.com/view/link/")||e.startsWith(ol)||e.startsWith(sl)}function dl(e){if(e.startsWith("<iframe")){var t=e.match(/src="([^>]{1,200}[^>])"/);e=t?t[1]:""}return e.startsWith("https://www.processon.com/mindmap/")?e.replace("https://www.processon.com/mindmap/",cl):e.startsWith("https://www.processon.com/diagraming/")?e.replace("https://www.processon.com/diagraming/",cl):e.startsWith("https://www.processon.com/apps/")?e.replace("https://www.processon.com/apps/",cl):ul(e)?e:void 0}var fl=["https://free.modao.cc/app/","https://org.modao.cc/","https://modao.cc/"],pl=["https://free.modao.cc/app/design/"];function hl(e){if(!e)return!1;for(var t=0,n=pl.length;t<n;t++)if(e.startsWith(pl[t]))return!1;for(var r=0;r<fl.length;r++){var a=fl[r];if(e.startsWith(a))return!0}return!1}var ml=["https://map.gaode.com/","https://ditu.gaode.com/","https://www.gaode.com/","https://www.amap.com/","https://ditu.amap.com/","https://ditu.amap.com/","https://gaode.com/"];function gl(e){if(!e)return!1;for(var t=0,n=ml.length;t<n;t++)if(e.startsWith(ml[t]))return!0;return!1}var vl=null;function yl(e){vl||(vl=new DOMParser);try{var t=vl.parseFromString(e,"text/html");if(!t.body)return null;var n=t.body.firstChild;if("IFRAME"!==n.nodeName)return null;if(n)return n.src||null}catch(e){return null}}var bl=[/^https:\/\/codepen\.io\/[^\/]+\/(embed|pen|full)\//];function kl(e){return bl.some((function(t){return t.test(e)}))}var wl=["https://herbox-embed.alipay.com/"];function xl(e){return e&&wl.some((function(t){return e.startsWith(t)}))}var _l=[/^https:\/\/www\.figma\.com\/embed/];function Cl(e){return _l.some((function(t){return t.test(e)}))}var El=[/https:\/\/deepinsight\.alipay\.com\/pc\.htm\?reportId=[^\/]+/];function Ol(e){return El.some((function(t){return t.test(e)}))}var Sl=[/^https?:\/\/riddle\.alibaba-inc\.com.*/];function Rl(e){return Sl.some((function(t){return t.test(e)}))}function Dl(e){return e.startsWith("http://music.163.com/outchain/player")||e.startsWith("https://music.163.com/outchain/player")}var Al=/https?:\/\/\S*\.xiami\.com\/song\/([^\/?#]+)/;function Tl(e){return e.startsWith("https://h5.xiami.com/app")||e.startsWith("http://h5.xiami.com/app")||e.startsWith("https://www.xiami.com/webapp/")}function Pl(e){return e.startsWith("http://www.ximalaya.com/thirdparty/player/sound/")||e.startsWith("https://www.ximalaya.com/thirdparty/player/sound/")}function jl(e){return e.startsWith("https://www.youtube.com/embed/")}function Ml(e){return e.match(/^https:.*\.youku\.com\//)}function Nl(e){return e&&e.match(/^https:.*\.bilibili\.com\//)}function Ll(e){return e.startsWith("https://cloud.video.taobao.com/")}var Il=/^(https?:\/\/[\S]+?\.canva\.cn\/design\/)((?:[^\/]+\/)+)(view|edit)$/i;function zl(e){return e&&e.match(/^https:\/\/[\S]+?\.canva\.cn\//)}var Bl=/^[a-z0-9]/i,Fl=/[a-z0-9]$/i;function Vl(e){return Bl.test(e)&&(e=" "+e),Fl.test(e)&&(e+=" "),e}function Ul(e){return e&&e.match(/^https:\/\/([^\/]+\.)?jinshuju\.(com|net)\//)}var ql,Hl,Wl=[{isMatchDomain:function(e){return e&&Ml(e)},isDomain:Ml,getDocEmbedURL:function(e){if(e.startsWith("https://player.youku.com/embed/"))return e;var t=e.match(/^https?:\/\/\w+\.youku\.com\/v_show\/id_([^\.]+)/i);return t?"https://player.youku.com/embed/".concat(t[1]):null},simple:"https://v.youku.com/v_show…",example:"https://player.youku.com/embed/XNDQ2Mzc1OTEyOA==",name:"youku"},{isMatchDomain:function(e){return Nl(e)},isDomain:Nl,getDocEmbedURL:function(e){if(e.startsWith("<iframe")&&(e=yl(e)),e.startsWith("https://player.bilibili.com/player.html?"))return e;if(e.startsWith("http://player.bilibili.com/player.html?"))return e.replace(/^http:/i,"https:");var t=e.match(/^https?:\/\/\w+\.bilibili\.com\/video\/av(\d+)/i);if(t){var n=t[1],r=e.match(/p=(\d+)/);return r&&(r=r[1]),"https://player.bilibili.com/player.html?aid=".concat(n).concat(r?"&p=".concat(r,"&page=").concat(r):"")}var a=new URL(e,location.origin),i=(a.origin+a.pathname).match(/^https?:\/\/\w+\.bilibili\.com\/video\/(bv[^\/]+)\/?$/i);if(i){var o,c=i[1];return/\b(?:p=(\d+))/.test(a.search)&&(o=RegExp.$1),"https://player.bilibili.com/player.html?bvid=".concat(c).concat(o?"&p=".concat(o,"&page=").concat(o):"")}return null},simple:"https://www.bilibili.com…",example:"https://player.bilibili.com/player.html?aid=55895675",name:"bilibili"},{isMatchDomain:function(e){return e&&Ll(e)},isDomain:Ll,getDocEmbedURL:function(e){return e.startsWith("https://cloud.video.taobao.com/")?e:null},simple:"https://cloud.video.taobao.com…",name:"taobao"},{isMatchDomain:function(e){return zl(e)},isDomain:zl,getDocEmbedURL:function(e){e=(e=new URL(e,location.origin)).origin+e.pathname;var t=Il.exec(e);if(t&&t[2]){var n=t[2].split("/"),r=t[2];return n.length>1&&n[0]&&(r=n[0]+"/"),t[1]+r+"view?embed"}return null},simple:"https://www.canva.cn/design/…",example:"https://www.canva.cn/design/DAD3c63mhHU/view?embed",name:"canva"},{isMatchDomain:function(e){return!!e&&(e.startsWith("https://h5.xiami.com/")||e.startsWith("http://h5.xiami.com/")||e.startsWith("https://www.xiami.com/"))},isDomain:Tl,getDocEmbedURL:function(e){return e.startsWith("<iframe")?e=(e=yl(e))&&e.replace("autoPlay=1&",""):Al.test(e)&&(e="https://www.xiami.com/webapp/embed-player?id="+RegExp.$1),Tl(e)?e:null},showInPlaceholder:{extranet:!0,intranet:!0},simple:"https://xiami.com/song/181…",example:"https://www.xiami.com/webapp/embed-player?id=1816059093",name:"xiami"},{isMatchDomain:function(e){return e&&/^https:\/\/jb\.modao\.cc\//.test(e)},isDomain:hl,getDocEmbedURL:function(e){if(e.startsWith("<iframe")){var t=e.match(/src="([^>]{1,200}?[^>])"/);e=t?t[1]:""}if(hl(e)){var n=new URL(e,fl[2]);return(e=n.origin+n.pathname).endsWith("embed")?e=e.replace("embed","embed/v2"):e.endsWith("/embed/v2")||(e+="/embed/v2"),e+n.hash}},showInPlaceholder:{extranet:!0,intranet:!1},placeholder:function(e){return e.thirdparty.placeholders.modao},example:"https://free.modao.cc/app/2cd26580a6717a147454df7470e7ec464093cba3/embed/v2#screen=sk71k6d1dfxulzx",name:"modao"},{isMatchDomain:function(e){return e&&Rl(e)},isDomain:Rl,getDocEmbedURL:function(e){return e.startsWith("<iframe")&&(e=yl(e)),Rl(e)?(e.endsWith("iframe")||(e+="/iframe"),e):null},showInPlaceholder:{extranet:!1,intranet:!0},simple:"https://riddle.alibaba-inc.co…",example:"https://riddle.alibaba-inc.com/riddles/1d4aee7c",name:"riddle"},{isMatchDomain:function(e){return e&&e.startsWith("https://deepinsight.alipay.com/")},isDomain:Ol,getDocEmbedURL:function(e){return Ol(e)?e:null},showInPlaceholder:{extranet:!1,intranet:!0},simple:"https://deepinsight.alipay.com…",name:"deepinsight"},{isMatchDomain:function(e){return gl(e)},isDomain:gl,getDocEmbedURL:function(e){return gl(e)?e:null},name:"amap",showInPlaceholder:{extranet:!0,intranet:!0},simple:"https://ditu.amap.com…",example:"https://ditu.amap.com/"},{isMatchDomain:function(e){return xl(e)},isDomain:xl,getDocEmbedURL:function(e){return xl(e)?e:null},simple:"https://herbox-embed.alipa…",example:"https://herbox-embed.alipay.com/s/doc-aliui-calendar",name:"herbox"},{isMatchDomain:function(e){return e&&e.startsWith("https://music.163.com/")},isDomain:Dl,getDocEmbedURL:function(e){return e.startsWith("<iframe")&&(e=yl(e)),Dl(e)?e:null},name:"music163"},{isMatchDomain:function(e){return e&&Pl(e)},isDomain:Pl,getDocEmbedURL:function(e){return e.startsWith("<iframe")&&(e=yl(e)),Pl(e)?e:null},name:"ximalaya"},{isMatchDomain:function(e){return e&&jl(e)},isDomain:jl,getDocEmbedURL:function(e){return e.startsWith("<iframe")&&(e=yl(e)),jl(e)?e:null},name:"youtube"},{isMatchDomain:function(e){return e&&e.startsWith("https://www.figma.com/")},isDomain:Cl,getDocEmbedURL:function(e){return e.startsWith("<iframe")?e=yl(e):e.match(/^https:\/\/www\.figma\.com\/file|proto\//)&&(e="https://www.figma.com/embed?embed_host=share&url="+encodeURIComponent(e)),Cl(e)?e:null},showInPlaceholder:{extranet:!0,intranet:!1},example:"https://www.figma.com/embed?embed_host=share&url=https%3A%2F%2Fwww.figma.com%2Ffile%2FqwccoVDBmt1FZ6U4eGus2p%2F%25E8%25AF%25AD%25E9%259B%2580%25E6%258F%2592%25E5%259B%25BE",simple:"https://www.figma.com…",name:"figma"},{isMatchDomain:function(e){return e&&e.startsWith("https://codepen.io/")},isDomain:kl,getDocEmbedURL:function(e){return e.startsWith("<iframe")&&(e=yl(e)),kl(e)?e.replace("/pen/","/embed/"):null},showInPlaceholder:{extranet:!0,intranet:!1},simple:"https://codepen.io/afc163…",example:"https://codepen.io/afc163-1472555193/embed/oNXqWGP",name:"codepen"},{isMatchDomain:function(e){return e&&(e.startsWith("https://www.processon.com/")||e.startsWith("https://wxmp.processon.com/"))},isDomain:ul,getDocEmbedURL:dl,name:"processon",simple:"https://www.processon.c…",example:"https://www.processon.com/embed/5d006c43e4b071ad5a206ed2",processonEmbedUrl:cl,processonImageUrl:ll,processonAssetsUrl:sl},{isMatchDomain:function(e){return Ul(e)},isDomain:Ul,getDocEmbedURL:function(e){var t=!1;if(e.startsWith("<iframe")&&(e=yl(e),t=!0),!Ul(e))return null;var n=new URL(e,location.origin),r=n.pathname,a=n.origin;return r.startsWith("/f/")?t?e:a+r+"?background=white&banner=show&embedded=true":/^\/forms\/([^\/]+)(?:\/[^\/]*)?$/.test(r)?a+"/f/"+RegExp.$1+"?background=white&banner=show&embedded=true":null},simple:"https://www.jinshuju.net/f/…",example:null,name:"jinshuju"}],Yl={"zh-cn":{illegalURL:C.a.createElement("span",null,"无法显示链接内容，请查看",C.a.createElement("a",{href:"https://www.yuque.com/yuque/help/fuu6h3",target:"_blank"},"帮助")),illegalDomain:"暂不支持显示该网站内容"},en:{illegalURL:C.a.createElement("span",null,"Unable to display the link content, please check the ",C.a.createElement("a",{href:"https://www.yuque.com/yuque/help/fuu6h3",target:"_blank"},"help")),illegalDomain:"No support for displaying the content of this website"}},Gl=["ximalaya","youtube","music163"],Kl=["ximalaya","music163"],Xl=function(e){f()(n,po);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){var e;return o()(this,n),e=t.call(this,{defaultHeight:500}),y()(u()(e),"thirdparts",[]),e}return l()(n,[{key:"init",value:function(){var e=this.getTopEngine();if(e.isReadonly)this.thirdparts=Wl.slice(0);else{var t=vr()?Gl:Kl,n=yr(e.options.thirdPartyService);n=n.concat(t),this.thirdparts=Wl.filter((function(e){return-1!==n.indexOf(e.name)}))}}},{key:"activate",value:function(){var e=this;x()(g()(n.prototype),"activate",this).call(this),setTimeout((function(){!e.state.readonly&&e.engine.toolbar.disable(!0)}),200),this.state.readonly||this.iframe&&this.container.css("border","1px solid #d9d9d9")}},{key:"unactivate",value:function(){x()(g()(n.prototype),"unactivate",this).call(this),!1===this.state.activated||this.destroyed||this.state.readonly||(this.engine.toolbar.disable(!1),this.iframe&&this.container.css("border","1px solid rgba(0,0,0,0)"))}},{key:"getExampleURL",value:function(){var e=this.getThirdPartyByEntrance(this.value.entrance);return e&&e.example||null}},{key:"getThirdPartyByEntrance",value:function(e){if(!e)return null;for(var t=this.thirdparts,n=0,r=t.length;n<r;n++)if(t[n].name===e)return t[n];return null}},{key:"getHeight",value:function(){return this.state.maximize?this.getContainerHeight():x()(g()(n.prototype),"getHeight",this).call(this)}},{key:"maximize",value:function(){this.iframe.css("height",this.getHeight()+"px"),this.iframe.css("transition","none"),this.container.css("overflow","hidden"),this.state.readonly||(this.engine.toolbar.hide(),this.hideRisizeController())}},{key:"restore",value:function(){this.iframe.css("height",this.getHeight()+"px"),this.container.css("overflow","initial"),this.state.readonly||(this.engine.toolbar.show(),this.showRisizeController())}},{key:"isError",value:function(){return!!Dt.isWechatMiniApp}},{key:"getLocale",value:function(){var e=this.getViewEngine();return e?e.locale:null}},{key:"getPlaceHolder",value:function(){var e=this.getLocale();if(!e)return"";var t=this.getThirdPartyByEntrance(this.value.entrance);return t?t.placeholder?t.placeholder(e):e.thirdparty.tip.replace("%s",Vl(e.thirdparty.names[t.name])).replace("%s",Vl(t.simple)):e.thirdparty.defaultTip}},{key:"embedToolbar",value:function(){var e=this.alias;if(!e&&this.value.url){var t=this.getDocEmbedURL(this.value.url);t&&(e=t.name)}var r=x()(g()(n.prototype),"embedToolbar",this).call(this);return!e||this.isMusic(e)||this.isOnlineVideo(e)?this.state.readonly?[]:r:(r.length>0&&r.unshift({type:"separator"}),r.unshift({type:"maximize"}),r)}},{key:"hitBlack",value:function(e){return this.thirdparts.every((function(t){return!t.isDomain(e)}))}},{key:"refreshToolbar",value:function(){var e=this.getViewEngine();e&&this.cardRoot&&(e.card.updateToolbar(this),e.card.showToolbar(this.cardRoot))}},{key:"afterHandleSubmit",value:function(){this.refreshToolbar()}},{key:"getDocEmbedURL",value:function(e){for(var t=this.thirdparts,n=0,r=t.length;n<r;n++){var a=t[n].getDocEmbedURL(e);if(a)return{name:t[n].name,url:a}}for(var i=!1,o=0,c=t.length;o<c;o++)if(t[o].isMatchDomain(e)){i=!0;break}var l=(this.getTopEngine().options||{}).lang||"zh-cn",s=Yl[l];return{url:null,message:i?s.illegalURL:s.illegalDomain}}},{key:"isMusic",value:function(e){return"xiami"===e||"music163"===e||"ximalaya"===e}},{key:"isOnlineVideo",value:function(e){return"youku"===e||"taobao"===e||"bilibili"===e}},{key:"destroy",value:function(){x()(g()(n.prototype),"destroy",this).call(this),this.state.readonly||this.engine.toolbar.disable(!1)}},{key:"render",value:function(){if(this.value||(this.value={}),this.value.src&&this.value.url||!this.getTopEngine().isReadonly){this.updateAlias();var e=this.alias,t=this.isMusic(e);this.isOnlineVideo(e)&&(this.options.resize=!1),"xiami"===e?(this.value.height=110,this.options.resize=!1):"music163"===e?(this.value.height=86,this.options.resize=!1):"ximalaya"===e&&(this.value.height=36,this.options.resize=!1),"riddle"===e&&(this.options.allow="clipboard-write https://riddle.alibaba-inc.com;"),x()(g()(n.prototype),"render",this).call(this),this.state.readonly?this.iframe&&t&&this.container.css("border","1px solid rgba(0,0,0,0)"):this.iframe&&!this.state.activated&&t&&this.container.css("border","1px solid rgba(0,0,0,0)")}}},{key:"updateAlias",value:function(){if(!this.alias){var e=this.cardRoot.attr("data-card-alias");if(e)this.alias=e;else{var t=(this.value||{}).src;if(t)for(var n=Object.keys(this.thirdparts),r=0,a=n.length;r<a;r++){var i=this.thirdparts[n[r]];if(i.getDocEmbedURL(t))return this.cardRoot.attr("data-card-alias",i.name),void(this.alias=i.name)}}}}},{key:"renderError",value:function(){var e=this.container,t=this.locale;e.append('\n      <div class="lake-third-party-card-error">\n        <p><span class="lake-icon lake-icon-warning"></span></p>\n        <p>'.concat(t.wechatAlert,"</p>\n      </div>\n    "))}}]),n}(),$l="price",Zl="daysCount",Ql="tip",Jl=(y()(ql={},Zl,{max:365,min:1}),y()(ql,$l,{max:99,min:1}),y()(ql,Ql,{max:20,min:0}),ql),es=(y()(Hl={},$l,!0),y()(Hl,Zl,!0),Hl);function ts(e,t,n){if(es[t]&&function(e){return null==e||""===e}(n))return e.premium.sidebar[t].error.required;switch(t){case $l:case Zl:return function(e,t,n){return""===n||null==n?null:function(e,t,n,r,a){var i=e.premium.sidebar[t],o=Number(n);return function(e){return e=Number(e),Number.isNaN?Number.isNaN(e):window.isNaN(e)}(o)||!function(e){return Number.isInteger?Number.isInteger(e):(Number.parseInt?Number.parseInt(e,10):parseInt(e,10))===e}(o)||o+""!=n+""?i.error.invalid:o>a||o<r?i.error.range:null}(e,t,n,Jl[t].min,Jl[t].max)}(e,t,n);case Ql:return function(e,t,n){return""===(n=(n||"").replace(/\n+/g,""))||null==n?null:function(e,t,n,r,a){var i=e.premium.sidebar[t],o=n.length;return o<r||o>a?i.error.length:null}(e,t,n,Jl[t].min,Jl[t].max)}(e,t,n);default:return null}}var ns=function(e){f()(n,_.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"render",value:function(){var e=this.props.data,t=e.expired;return e.readonly&&(t=e.expired&&"PAID"!==e.role),C.a.createElement("div",{className:"lake-premium-view ".concat(t?"expired":"")},this.renderShadowMask(),C.a.createElement("div",{className:"lake-premium-view-tip ".concat("PAID"===e.role?"paid":"")},this.renderTip()))}},{key:"renderTip",value:function(){return this.props.data.readonly?this.renderPreviewTip():this.renderEditingTip()}},{key:"renderPreviewTip",value:function(){var e,t=this.props.data;return e="OWNER"===t.role?this._renderOwnerPreviewTip():"PAID"===t.role?this._renderPaidPreviewTip():this._renderUnpaidPreviewTip(),C.a.createElement("div",{className:"lake-premium-view-tip-content"},e)}},{key:"renderEditingTip",value:function(){var e=this.props,t=e.data,n=e.engine,r=t.expired?n.locale.premium.expiredTip:n.locale.premium.defaultTip;return C.a.createElement("div",{className:"lake-premium-view-tip-content"},C.a.createElement("span",{className:"lake-icon lake-icon-yuan"}),(t.tip||"").substring(0,Jl.tip.max)||r)}},{key:"renderShadowMask",value:function(){var e=this.props.data;return e.expired||"OWNER"===e.role||"PAID"===e.role?null:C.a.createElement("div",{className:"lake-premium-shadow-mask"})}},{key:"_renderOwnerPreviewTip",value:function(){return this._renderUnpaidPreviewTip()}},{key:"_renderPaidPreviewTip",value:function(){return C.a.createElement(C.a.Fragment,null,C.a.createElement("span",{className:"lake-icon lake-icon-yuan"}),this.props.engine.locale.premium.paidTip)}},{key:"_renderUnpaidPreviewTip",value:function(){var e=this.props,t=e.data,n=e.engine;return t.expired?C.a.createElement(C.a.Fragment,null,n.locale.premium.expiredTip):C.a.createElement(C.a.Fragment,null,C.a.createElement("span",{className:"lake-icon lake-icon-yuan"}),(t.tip||"").substring(0,Jl.tip.max)||n.locale.premium.defaultTip)}}]),n}();function rs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function as(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rs(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}y()(ns,"propTypes",{engine:R.a.object.isRequired,data:R.a.shape({readonly:R.a.bool.isRequired,role:R.a.string,expired:R.a.bool,tip:R.a.string})}),y()(ns,"defaultProps",{data:{}});var is=function(e){f()(n,Ut);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e,r){var a;return o()(this,n),a=t.call(this,e,r),y()(u()(a),"__engine",null),y()(u()(a),"__contentView",null),y()(u()(a),"__cardRoot",null),y()(u()(a),"__rootNode",null),y()(u()(a),"_sideBarIsShow",!1),y()(u()(a),"__onSaveBefore",(function(e){return e?Promise.resolve():new Promise((function(e,t){var n=a.getValue(),r=a.currentEngine().locale,i=ts(r,$l,n.price);return i||(i=ts(r,Zl,n.daysCount))||(i=ts(r,Ql,n.tip))?t(i):void e()})).catch((function(e){return a.__showSidebar(),Promise.reject(e)}))})),y()(u()(a),"__onSyncUserInput",(function(e){a.__setCardValue(as(as({},a.__getCardValue()),e)),a.__updateView()})),a.__engine=e,a.__contentView=r,a.__disabled=(a.currentEngine().options.cardBlacklist||[]).includes("premium"),a}return l()(n,[{key:"currentEngine",value:function(){return this.__engine||this.__contentView}},{key:"isReadonly",value:function(){return!this.__engine}},{key:"embedToolbar",value:function(){return ee.ua.mobile?[{type:"delete"}]:[{type:"dnd"},{type:"delete"}]}},{key:"activate",value:function(){x()(g()(n.prototype),"activate",this).call(this),this.__showSidebar()}},{key:"unactivate",value:function(){x()(g()(n.prototype),"unactivate",this).call(this),this.__hideSidebar()}},{key:"currentDocID",value:function(){return(this.currentEngine().metaManager.getRawMeta("skylark")||{}).docID}},{key:"getMargin",value:function(){return!0}},{key:"render",value:function(e,t){if(!this.__disabled)if(t&&t.docID&&t.docID!==this.currentDocID()){var n=this.currentEngine();this.isReadonly()?n.card.removeNode(this.cardRoot):n.card.removeNode(this.cardRoot,n)}else e=Object(a.a)(e)[0],this.__rootNode!==e&&this.__reset(e),this.__setCardValue(t),this.__rootNode?this.__updateView():this.__initView(e),this.toggleMargin()}},{key:"getValue",value:function(){var e,t=this.__getCardViewData();return y()(e={},$l,+t.price||null),y()(e,Zl,+t.daysCount||null),y()(e,Ql,(t.tip||"").substring(0,Jl.tip.max)||null),y()(e,"freeze",t.freeze),y()(e,"expired",t.expired),e}},{key:"destroy",value:function(){this.__destroyView(),this.__hideSidebar(),x()(g()(n.prototype),"destroy",this).call(this);var e=this.getTopEngine();e&&e.asyncEvent&&e.asyncEvent.off("save:before",this.__onSaveBefore)}},{key:"didInsert",value:function(){if(this.__cardRoot){var e=this.getTopEngine();e&&e.asyncEvent&&e.asyncEvent.on("save:before",this.__onSaveBefore)}}},{key:"__getCardValue",value:function(){return this.currentEngine().card.getValue(this.__cardRoot)||{}}},{key:"__setCardValue",value:function(e){this.currentEngine().card.setValue(this.__cardRoot,e)}},{key:"__initView",value:function(e){if(!this.__rootNode){if(this.__rootNode&&this.__rootNode!==e)return this.__destroyView(),this.__initView(e);this.__rootNode=e,O.a.render(C.a.createElement(ns,{engine:this.currentEngine(),data:this.__getCardViewData()}),this.__rootNode)}}},{key:"__updateView",value:function(){O.a.render(C.a.createElement(ns,{engine:this.currentEngine(),data:this.__getCardViewData()}),this.__rootNode)}},{key:"__getCardViewData",value:function(){var e=this.__getCardValue(),t=this.currentEngine().metaManager.getRawMeta("premium")||{},n=t.price||0===t.price;n&&(e.price=t.price,e.daysCount=t.daysCount);var r=this.isReadonly();return as(as({},e),{},{readonly:r,role:t.role||(r?"UNPAID":"OWNER"),freeze:!!n,expired:!!t.expired})}},{key:"__showSidebar",value:function(){var e=this.currentEngine();this._sideBarIsShow||e.sidebar.disable||e.isSub()||(this._sideBarIsShow=!0,e.sidebar.set({name:"premium",title:null,className:"lake-premium-sidebar",data:as(as({},this.__getCardViewData()),{},{onChange:this.__onSyncUserInput,validate:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ts.apply(void 0,[e.locale].concat(n))}}),showCloseBtn:!1}))}},{key:"__hideSidebar",value:function(){var e=this.currentEngine();this._sideBarIsShow&&(e.sidebar.disable||e.isSub()||(this._sideBarIsShow=!1,e.sidebar.restore("premium")))}},{key:"__reset",value:function(e){this.__destroyView(),this.__cardRoot=this.currentEngine().card.closest(e)}},{key:"__destroyView",value:function(){this.__rootNode&&O.a.unmountComponentAtNode(this.__rootNode),this.__rootNode=null}}]),n}();function os(){var e=this,t=this.value,n=t.src,r=t.detail;if(this.contentView)r?ss.call(this,r):ls.call(this);else{this.detailFetcher||(this.detailFetcher=new ac(this));var a=this.detailFetcher.getCache(n);a||this.detailFetcher.get(n).then((function(t){var n=t.success,a=t.data;n?(e.setValue({detail:a}),e.value.mode&&"card"!==e.value.mode||ss.call(e,a)):r||ls.call(e)})),r||a?r?ss.call(this,r):(this.setValue({detail:a}),ss.call(this,a)):cs.call(this)}}function cs(){var e=this.getLocale().bookmarkLink;us.call(this,'<div class="lake-bookmark-link"><div class="lake-bookmark-link-loading">'.concat(e.loading,"</div></div>"))}function ls(){var e=this.getLocale().bookmarkLink;us.call(this,'<div class="lake-bookmark-link"><div class="lake-bookmark-link-error"><div>'.concat(e.loadingError,'</div><div class="lake-bookmark-link-error-tip">').concat(zt(this.value.src)||"","</div></div></div>"))}function ss(e){var t="";e.icon&&(t='<img class="favicon" src="'.concat(zt(e.icon),'"/>'));var n=zt(function(e,t){return e.title?e.title:t.bookmarkLink.untitled}(e,this.getViewEngine().locale)),r=e.desc?zt(e.desc):"&nbsp;",a=zt(e.belong||e.url||"")||"&nbsp;",i="lake-bookmark-link-content ".concat(e.image?"has-cover":""),o=e.image?'<div class="lake-bookmark-link-cover" style="background-image: url('.concat(zt(e.image),')"/>'):"";us.call(this,'<div class="lake-bookmark-link">\n        <div class="'.concat(i,'">\n          <div class="lake-bookmark-link-title">').concat(n,'</div>\n          <div class="lake-bookmark-link-desc">').concat(r,'</div>\n          <div class="lake-bookmark-link-belong">').concat(t).concat(a,"</div>\n        </div>\n        ").concat(o,"\n      </div>"))}function us(e){this.engine||(e='<a href="'.concat(encodeURI(this.value.src),'" target="_blank">').concat(e,"</a>")),this.container.html(e)}y()(is,"type","block");var ds=function(e){f()(n,Ut);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"embedToolbar",value:function(){var e=this;return this.engine?[{type:"dnd"},{type:"gotolink",onClick:function(){e.value&&e.value.src&&e.getTopEngine().openLink(e.value.src)}},{type:"copy"},{type:"separator"}].concat(ge()(this.getMoreEmbedToolbarConfig())):[]}},{key:"getLocale",value:function(){return this.getViewEngine().locale}},{key:"rerender",value:function(){os.call(this)}},{key:"render",value:function(){this.value||(this.value={}),this.rerender(),this.toggleMargin()}}]),n}();y()(ds,"type","block");var fs=function(){function e(){o()(this,e)}return l()(e,null,[{key:"gen",value:function(){return ct.a.apply(void 0,arguments)}}]),e}(),ps={lang:oe()({placeholder:"请选择日期",yearPlaceholder:"请选择年份",quarterPlaceholder:"请选择季度",monthPlaceholder:"请选择月份",weekPlaceholder:"请选择周",rangePlaceholder:["开始日期","结束日期"],rangeYearPlaceholder:["开始年份","结束年份"],rangeMonthPlaceholder:["开始月份","结束月份"],rangeWeekPlaceholder:["开始周","结束周"]},{locale:"zh_CN",today:"今天",now:"此刻",backToToday:"返回今天",ok:"确定",timeSelect:"选择时间",dateSelect:"选择日期",weekSelect:"选择周",clear:"清除",month:"月",year:"年",previousMonth:"上个月 (翻页上键)",nextMonth:"下个月 (翻页下键)",monthSelect:"选择月份",yearSelect:"选择年份",decadeSelect:"选择年代",yearFormat:"YYYY年",dayFormat:"D日",dateFormat:"YYYY年M月D日",dateTimeFormat:"YYYY年M月D日 HH时mm分ss秒",previousYear:"上一年 (Control键加左方向键)",nextYear:"下一年 (Control键加右方向键)",previousDecade:"上一年代",nextDecade:"下一年代",previousCentury:"上一世纪",nextCentury:"下一世纪"}),timePickerLocale:oe()({},{placeholder:"请选择时间",rangePlaceholder:["开始时间","结束时间"]})};ps.lang.ok="确 定";var hs={lang:oe()({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"}),timePickerLocale:oe()({},{placeholder:"Select time",rangePlaceholder:["Start time","End time"]})},ms={single:"单选",multiple:"多选",dataError:"获取投票数据失败",illegalData:"投票数据异常",voting:"投票中...",votingMessage:"正在投票中",fetching:"正在获取投票数据...",submitting:"正在提交投票数据中...",deleteConfirm:"确定删除该选项？",invalidVote:"投票数据无效",voteSuccess:"投票成功",voteFailure:"投票失败",closed:"已截止",closeText:"截止",reVote:"重新投票",memberCountTip:"%d 人已投票",voteCountTip:"%d 票",countTip:"%d 票",voteBtn:"投票",okText:"确认",cancelText:"取消",form:{title:"请输入投票标题",addBtn:"添加选项",closeTime:"截止时间",item:"选项"},notSupport:"评论、发言暂不支持投票卡片"},gs={single:"Single",multiple:"Multiple",dataError:"Failed to load data",illegalData:"Illegal data",voting:"voting...",votingMessage:"Voting",fetching:"fetching ...",submitting:"voting ...",deleteConfirm:"Are you sure you want to delete it?",invalidVote:"Invalid voting data",voteSuccess:"vote success",voteFailure:"vote failed",closed:"Ended",closeText:"",reVote:"re-vote",memberCountTip:"%d voted",voteCountTip:"%d voted",countTip:"%d votes",voteBtn:"vote",okText:"Ok",cancelText:"Cancel",form:{title:"Enter a title",addBtn:"Add",closeTime:"Deadline",item:"Option"},notSupport:"Cards are not allowed in comments"};vt(".lake-vote-card {\n  padding: 16px 24px;\n  background-color: #fafafa;\n  font-size: 14px;\n  color: #595959;\n}\n.lake-vote-card-title {\n  display: flex;\n}\n.lake-vote-card-title .ant-select {\n  flex-shrink: 0;\n  width: auto;\n}\n.lake-vote-card-title .ant-select .ant-select-selection-selected-value {\n  margin-right: 5px;\n  font-size: 14px;\n}\n.lake-vote-card-title .lake-vote-title-input {\n  margin-left: 8px;\n  margin-right: 36px;\n}\n.lake-vote-card-section {\n  margin-bottom: 16px;\n}\n.lake-vote-card-section:last-child {\n  margin-bottom: auto;\n}\n.lake-vote-card-item {\n  display: flex;\n  align-items: center;\n  margin-bottom: 8px;\n}\n.lake-vote-card-item.disallow-delete {\n  margin-right: 36px;\n}\n.lake-vote-card-item:last-child {\n  margin-bottom: 0;\n}\n.lake-vote-card-item .item-icon {\n  margin-left: 16px;\n  width: 20px;\n  height: 20px;\n  font-size: 18px;\n  color: #8c8c8c;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.lake-vote-card .lake-vote-item-input,\n.lake-vote-card .lake-vote-title-input {\n  flex: 1;\n  border: 1px solid #d9d9d9;\n  border-radius: 4px;\n}\n.lake-vote-card .lake-vote-item-input .le-multiline-input-hidden,\n.lake-vote-card .lake-vote-title-input .le-multiline-input-hidden,\n.lake-vote-card .lake-vote-item-input textarea,\n.lake-vote-card .lake-vote-title-input textarea {\n  padding: 6px 11px;\n  line-height: 26px;\n}\n.lake-vote-card-add-item-btn {\n  border: none;\n  background: none;\n  outline: none;\n  cursor: pointer;\n  user-select: none;\n}\n.lake-vote-card-add-item-btn .plus-icon {\n  margin-right: 8px;\n}\n.lake-vote-card .datetime-picker-wrap {\n  position: relative;\n}\n.lake-vote-card .datetime-picker-wrap .datetime-picker-label {\n  position: absolute;\n  top: 0;\n  left: 10px;\n  z-index: 1;\n  pointer-events: none;\n  height: 100%;\n  display: flex;\n  align-items: center;\n}\n.lake-vote-card .datetime-picker-wrap .datetime-picker {\n  width: 309px;\n  color: #8c8c8c;\n}\n.lake-vote-card .datetime-picker-wrap .datetime-picker .ant-picker-input input {\n  color: #8c8c8c;\n  text-align: right;\n}\n.lake-vote-card-preview-overlay .ant-popover-content {\n  min-width: auto;\n}\n"),vt(".le-multiline-input {\n  position: relative;\n  top: 0;\n  left: 0;\n  overflow: hidden;\n}\n.le-multiline-input-hidden {\n  white-space: pre-wrap;\n  word-break: break-all;\n  opacity: 0;\n  padding: 0 10px 0 0;\n}\n.le-multiline-input textarea,\n.le-multiline-input .detail {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  width: 100%;\n  background: #fff;\n  padding: 0 10px 0 0;\n  outline: none;\n  resize: none;\n  border: none;\n  overflow: auto;\n  letter-spacing: inherit;\n}\n.le-multiline-input textarea::placeholder,\n.le-multiline-input .detail::placeholder {\n  color: #bfbfbf;\n}\n");var vs=/(?:[\u0100-\uffff\s]|^)https?:\/\/(?:[^\/.]+?\.)+?[^\/.]+?(?:\/\S*?)?(?:(?=[\u0100-\uffff\s])|$)/g;function ys(e){if(!e)return e;var t=/\s/;return(e=a.n.escape(e)).toLowerCase().replace(vs,(function(e){var n="",r="";return"h"!==e[0]&&(n=e[0],e=e.substring(1)),t.test(e[e.length-1])&&(r=e[e.length-1],e=e.substring(0,e.length-1)),"".concat(n,'<a href="').concat(encodeURI(e),'" target="_blank">').concat(e,"</a>").concat(r)}))}var bs=function(e){f()(n,_.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),r=t.call(this,e),y()(u()(r),"_handleKeyDown",(function(e){e.stopPropagation(),13!==e.keyCode||e.shiftKey&&e.metaKey&&e.ctrlKey||r.props.onKeyDownEnter()})),y()(u()(r),"_handleChange",(function(e){e.target.value=e.target.value.replace(/\n/g,""),r.props.onChange(e)})),r.textAreaRef=C.a.createRef(),r}return l()(n,[{key:"componentDidMount",value:function(){var e=this;this.textAreaRef.current&&(this.textAreaRef.current.addEventListener("keydown",this._handleKeyDown,!1),this.props.autoFocus&&setTimeout((function(){e.focus()}),16))}},{key:"componentDidUpdate",value:function(e){this.props.autoFocus&&!e.autoFocus&&this.focus()}},{key:"focus",value:function(){this.textAreaRef.current&&this.textAreaRef.current.focus()}},{key:"componentWillUnmount",value:function(){this.textAreaRef.current&&this.textAreaRef.current.removeEventListener("keydown",this._handleKeyDown,!1)}},{key:"render",value:function(){var e=this.props,t=(e.onChange,e.placeholder),n=e.value,r=e.isReadonly,a=(e.onKeyDownEnter,e.autoLink,e.className),i=void 0===a?"":a,o=dt()(e,["onChange","placeholder","value","isReadonly","onKeyDownEnter","autoLink","className"]);i+=" le-multiline-input",r&&(t="");var c=this._renderDetail();return C.a.createElement("div",oe()({className:i},o),C.a.createElement("div",{className:"le-multiline-input-hidden"},n||t||C.a.createElement("br",null)),c)}},{key:"_renderDetail",value:function(){var e=this.props,t=e.placeholder,n=e.value,r=e.isReadonly,a=e.autoLink;return r&&a?C.a.createElement("div",{className:"detail",dangerouslySetInnerHTML:{__html:ys(n)}}):C.a.createElement("textarea",{ref:this.textAreaRef,onChange:this._handleChange,value:n||"",disabled:r,placeholder:t})}}]),n}();y()(bs,"propTypes",{onChange:R.a.func,value:R.a.any,placeholder:R.a.any,isReadonly:R.a.bool.isRequired,autoFocus:R.a.bool,onKeyDownEnter:R.a.func,className:R.a.string,autoLink:R.a.bool}),y()(bs,"defaultProps",{value:"",autoLink:!1,onChange:function(){},onKeyDownEnter:function(){}});var ks=function(e){f()(n,_.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"getLocale",value:function(){return"en"===this.props.lang?gs:ms}},{key:"render",value:function(){var e=this,t=this.getLocale(),n=this.props.data;return C.a.createElement("div",{className:"lake-vote-card"},C.a.createElement("div",{className:"lake-vote-card-title lake-vote-card-section"},C.a.createElement(j.a,{value:n.type||"single",size:"large",onChange:function(t){e.props.onTypeChange(t)}},C.a.createElement(j.a.Option,{value:"single"},t.single),C.a.createElement(j.a.Option,{value:"multiple"},t.multiple)),C.a.createElement(bs,{className:"lake-vote-title-input",placeholder:t.form.title,onChange:function(t){e.props.onTitleChange(t.target.value)},onKeyDownEnter:this.props.onTitleKeyDownEnter,value:n.title})),C.a.createElement("div",{className:"lake-vote-card-item-box lake-vote-card-section"},this.renderItems()),C.a.createElement("div",{className:"lake-vote-card-control lake-vote-card-section"},C.a.createElement("button",{className:"lake-vote-card-add-item-btn",onClick:this.props.onAddItem},C.a.createElement(De.a,{className:"plus-icon"}),t.form.addBtn)),C.a.createElement("div",null,C.a.createElement("div",{className:"datetime-picker-wrap"},C.a.createElement("div",{className:"datetime-picker-label"},t.form.closeTime),C.a.createElement(F.a,{locale:"zh-cn"===this.props.lang?ps:hs,className:"datetime-picker",size:"large",placeholder:"",value:st()(n.deadline),showTime:!0,showToday:!1,allowClear:!1,onChange:this.props.onDateTimeChange,suffixIcon:C.a.createElement(Pe,null)}))))}},{key:"renderItems",value:function(){var e=this,t=this.props.data,n=[].concat(t.items||[null,null]);0===n.length?(n.push(null),n.push(null)):1===n.length&&n.push(null);var r=n.length>2;return n.map((function(t,n){return t=t||{},C.a.createElement("div",{key:t.id||n,className:"lake-vote-card-item ".concat(r?"":"disallow-delete")},C.a.createElement(bs,{className:"lake-vote-item-input",onKeyDownEnter:function(){e.props.onKeyDownEnter(n)},onChange:function(t){e.props.onItemChange(n,t.target.value)},placeholder:"".concat(e.getLocale().form.item," ").concat(n+1),value:t.value||"",autoFocus:e.props.autoFocusIndex===n,isReadonly:!1}),r?e.renderDeleteButton(t,n):null)}))}},{key:"renderDeleteButton",value:function(e,t){var n=this,r=this.getLocale();return e.value&&e.value.length?C.a.createElement(V.a,{overlayClassName:"lake-vote-card-delete-confirm",okText:r.okText,cancelText:r.cancelText,title:r.deleteConfirm,onConfirm:function(){n.props.onDeleteItem(t)}},C.a.createElement("div",{className:"item-icon"},C.a.createElement("span",{className:"lake-icon lake-icon-delete"}))):C.a.createElement("div",{className:"item-icon",onClick:function(){n.props.onDeleteItem(t)}},C.a.createElement("span",{className:"lake-icon lake-icon-delete"}))}}]),n}();function ws(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ws(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ws(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}y()(ks,"propTypes",{lang:R.a.oneOf(["zh-cn","en"]).isRequired,data:R.a.object.isRequired,onItemChange:R.a.func,onAddItem:R.a.func,onDeleteItem:R.a.func,onDateTimeChange:R.a.func,onTitleChange:R.a.func,onTypeChange:R.a.func,onKeyDownEnter:R.a.func,onTitleKeyDownEnter:R.a.func,autoFocusIndex:R.a.number}),y()(ks,"defaultProps",{lang:"zh-cn",data:{},onItemChange:function(){},onAddItem:function(){},onDeleteItem:function(){},onDateTimeChange:function(){},onTitleChange:function(){},onTypeChange:function(){},onTitleKeyDownEnter:function(){},onKeyDownEnter:function(){}}),vt(".lake-vote-reading-card {\n  padding: 24px;\n  background-color: #fafafa;\n  min-height: 200px;\n  position: relative;\n}\n.lake-vote-reading-card .error-tip {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #7d7d7d;\n  height: 152px;\n}\n.lake-vote-reading-card .loading {\n  text-align: center;\n  line-height: 200px;\n}\n.lake-vote-reading-card .loading > i {\n  margin-right: 20px;\n}\n.lake-vote-reading-card .vote-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  user-select: none;\n  color: #888;\n  background: rgba(255, 255, 255, 0.4);\n}\n.lake-vote-reading-card .vote-overlay > i {\n  margin-right: 10px;\n}\n.lake-vote-reading-card-title {\n  display: flex;\n  margin-bottom: 24px;\n}\n.lake-vote-reading-card-type {\n  padding: 0 10px;\n  height: 24px;\n  text-align: center;\n  line-height: 24px;\n  background-color: #D9E9FA;\n  color: #262626;\n  border-radius: 4px;\n  font-size: 14px;\n  margin-right: 9px;\n  flex-shrink: 0;\n}\n.lake-vote-reading-card-title-text {\n  font-size: 16px;\n  color: #262626;\n  line-height: 24px;\n  font-weight: bold;\n}\n.lake-vote-reading-card-item {\n  display: flex;\n  align-items: center;\n  padding: 9px 16px;\n  border: 1px solid #e8e8e8;\n  border-radius: 2px;\n  background-color: #fff;\n  margin-bottom: 8px;\n  cursor: pointer;\n}\n.lake-vote-reading-card-item:last-child {\n  margin-bottom: 0;\n}\n.lake-vote-reading-card-item-sign {\n  margin-right: 17px;\n}\n.lake-vote-reading-card-item-text {\n  font-size: 14px;\n  color: #595959;\n  line-height: 22px;\n  word-break: break-word;\n}\n.lake-vote-reading-card-item .ant-radio-inner {\n  background-color: #fff;\n}\n.lake-vote-reading-card .item-preview {\n  padding: 9px 16px;\n  border: 1px solid #e8e8e8;\n  border-radius: 2px;\n  background-color: #fff;\n  margin-bottom: 8px;\n}\n.lake-vote-reading-card .item-preview.participated .item-preview-data {\n  color: #096dd9;\n}\n.lake-vote-reading-card .item-preview.participated .item-preview-proportion-value {\n  background-color: #096dd9;\n}\n.lake-vote-reading-card .item-preview-data {\n  font-size: 14px;\n  color: #595959;\n  line-height: 22px;\n  display: flex;\n  justify-content: space-between;\n}\n.lake-vote-reading-card .item-preview-data-text {\n  word-break: break-word;\n}\n.lake-vote-reading-card .item-preview-data-numbers {\n  margin-left: 10px;\n  flex-shrink: 0;\n  cursor: pointer;\n  display: flex;\n}\n.lake-vote-reading-card .item-preview-data-numbers .percentage {\n  min-width: 40px;\n  margin-left: 10px;\n  text-align: right;\n}\n.lake-vote-reading-card .item-preview-proportion {\n  margin-top: 8px;\n  height: 8px;\n  background-color: #f5f5f5;\n  border-radius: 4px;\n}\n.lake-vote-reading-card .item-preview-proportion-value {\n  background-color: #bad6f5;\n  height: 8px;\n  border-radius: 4px;\n}\n.lake-vote-reading-card .lake-vote-card-result-footer {\n  font-size: 14px;\n  color: #8c8c8c;\n  line-height: 22px;\n  margin-top: 18px;\n  display: flex;\n}\n.lake-vote-reading-card .lake-vote-card-result-footer .member-count,\n.lake-vote-reading-card .lake-vote-card-result-footer .deadline {\n  margin-right: 12px;\n}\n.lake-vote-reading-card .lake-vote-card-result-footer > button {\n  padding: 0 5px;\n  background-color: unset;\n  border: none;\n  outline: none;\n  cursor: pointer;\n  color: #595959;\n}\n.lake-vote-reading-card .vote-btn {\n  margin-top: 16px;\n}\n.lake-vote-card-preview-overlay .ant-popover-inner-content {\n  padding-right: 0;\n}\n.lake-vote-card-preview-members {\n  padding-right: 16px;\n  max-width: 400px;\n  max-height: 300px;\n  overflow-y: auto;\n}\n");var _s=function(e){f()(n,_.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){var e;o()(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return e=t.call.apply(t,[this].concat(i)),y()(u()(e),"loading",!1),y()(u()(e),"destroyed",!1),y()(u()(e),"state",{detail:null,localVoteData:{},voting:!1,error:!1,forceShowVoteView:!1}),y()(u()(e),"_onItemCheckedStatusChange",(function(t,n){"single"===e.props.data.type?e.setState({localVoteData:y()({},t,n)}):e.setState({localVoteData:xs(xs({},e.state.localVoteData),{},y()({},t,n))})})),y()(u()(e),"_vote",(function(){var t=e.getLocale();if(e.state.voting)A.a.warn(t.votingMessage);else{var n=e.state.localVoteData,a=e.props.data,i=a.voteId,o=a.items,c=[],l=[];(o||[]).forEach((function(e){var t=e.id;t&&-1===l.indexOf(t)&&l.push(t)})),Object.keys(n||{}).forEach((function(e){e&&n[e]&&-1===c.indexOf(e)&&c.push(e)})),i&&0!==c.length&&0!==l.length?(e.setState({voting:!0}),Object(r.ajax)({url:"/api/votes",method:"post",data:{doc_id:e.props.docId,vote_id:e.props.data.voteId,items:c.join(",")},success:function(){A.a.success(t.voteSuccess),e.loading=!1,e.setState({voting:!1,forceShowVoteView:!1,detail:null})},error:function(n){console.error(n),A.a.error(t.voteFailure),e.setState({voting:!1})}})):A.a.warn(t.invalidVote)}})),y()(u()(e),"_onReVote",(function(){e.setState({forceShowVoteView:!0,localVoteData:{}})})),e}return l()(n,[{key:"render",value:function(){var e=this.props.data;return this.destroyed?null:e&&e.voteId&&e.items?this.state.error?C.a.createElement("div",{className:"lake-vote-reading-card"},C.a.createElement("div",{className:"error-tip"},this.getLocale().dataError)):C.a.createElement(U.a,{autoInsertSpaceInButton:!1},C.a.createElement("div",{className:"lake-vote-reading-card"},this.renderVoteOverlay(),this.renderContent())):C.a.createElement("div",{className:"lake-vote-reading-card"},C.a.createElement("div",{className:"error-tip"},this.getLocale().illegalData))}},{key:"componentWillUnmount",value:function(){this.destroyed=!0}},{key:"getLocale",value:function(){return"en"===this.props.lang?gs:ms}},{key:"renderVoteOverlay",value:function(){return this.state.voting?C.a.createElement("div",{className:"vote-overlay"},C.a.createElement(je.a,null),this.getLocale().voting):null}},{key:"renderContent",value:function(){if(!this.state.detail)return this.loadDetail();var e=this.props.data,t=this.state,n=t.detail,r=t.forceShowVoteView,a=st()(),i=r||!n.voted.length&&a.isBefore(st()(e.deadline));return C.a.createElement(C.a.Fragment,null,C.a.createElement("div",{className:"lake-vote-reading-card-title lake-vote-card-section"},C.a.createElement("div",{className:"lake-vote-reading-card-type"},"single"===e.type?this.getLocale().single:this.getLocale().multiple),C.a.createElement("div",{className:"lake-vote-reading-card-title-text"},e.title||"")),i?this.renderVoteItems():this.renderResult(),C.a.createElement("div",{className:"lake-vote-reading-card-vote-btn"},i?this.renderVoteBtn():null))}},{key:"renderResult",value:function(){var e,t,n,r,a,i,o=this,c=(e=this.state.detail,t=this.props.data,n={},r=0,a=new Set,i={},e.items.forEach((function(e){r+=e.count,i[e.id]=e})),e.items.forEach((function(e){i[e.id].proportion=Math.floor(e.count/r*1e4)/100})),n.items=t.items.map((function(t){var n=i[t.id]||null;return n&&n.members.forEach((function(e){a.add(e)})),{id:t.id,value:t.value,count:n?n.count:0,members:n?n.members:[],proportion:n?n.proportion:0,participated:-1!==e.voted.indexOf(t.id)}})),n.totalCount=r,n.memberCount=a.size,n),l=c.items.map((function(e){return C.a.createElement("div",{className:"item-preview ".concat(e.participated?"participated":""),key:e.id},C.a.createElement("div",{className:"item-preview-data"},C.a.createElement("div",{className:"item-preview-data-text"},e.value),o.renderNumbers(e)),C.a.createElement("div",{className:"item-preview-proportion"},C.a.createElement("div",{className:"item-preview-proportion-value",style:{width:"".concat(e.proportion,"%")}})))}));return C.a.createElement(C.a.Fragment,null,C.a.createElement("div",{className:"lake-vote-reading-card-item-box"},l),this.renderResultFooter(c))}},{key:"renderResultFooter",value:function(e){var t=this.props.data.deadline,n=st()(),r=st()(t),a=!n.isBefore(r),i=this.getLocale();return C.a.createElement("div",{className:"lake-vote-card-result-footer"},C.a.createElement("div",{className:"member-count"},i.memberCountTip.replace("%d",e.memberCount)),C.a.createElement("div",{className:"deadline"},a?i.closed:"".concat(st()(t).format("YYYY-MM-DD HH:mm:ss")," ").concat(i.closeText)),a?null:C.a.createElement("button",{className:"re-vote-btn",onClick:this._onReVote},i.reVote))}},{key:"renderVoteItems",value:function(){var e=this,t=this.props.data,n=this.state.localVoteData;return t.items.map((function(r){var a;return a="single"===t.type?C.a.createElement(q.a,{onChange:function(t){e._onItemCheckedStatusChange(r.id,t.target.checked)},checked:!!n[r.id]}):C.a.createElement(H.a,{onChange:function(t){e._onItemCheckedStatusChange(r.id,t.target.checked)},checked:!!n[r.id]}),C.a.createElement("label",{className:"lake-vote-reading-card-item",key:r.id},C.a.createElement("div",{className:"lake-vote-reading-card-item-sign"},a),C.a.createElement("div",{className:"lake-vote-reading-card-item-text"},r.value))}))}},{key:"renderVoteBtn",value:function(){if(!this.state.detail.user_id)return null;var e=this.state.localVoteData,t=Object.keys(e).some((function(t){return e[t]}));return C.a.createElement(B.a,{className:"vote-btn",onClick:this._vote,disabled:!t},this.getLocale().voteBtn)}},{key:"renderNumbers",value:function(e){var t=C.a.createElement("div",{className:"item-preview-data-numbers"},this.getLocale().voteCountTip.replace("%d",e.count)," ",C.a.createElement("div",{className:"percentage"},e.proportion,"%"));if(e.members.length){var n=C.a.createElement("div",{className:"lake-vote-card-preview-members"},e.members.join(" "));return C.a.createElement(P.a,{trigger:"hover",overlayClassName:"lake-vote-card-preview-overlay",content:n},t)}return t}},{key:"loadDetail",value:function(){return this.loading||(this._fetchDetail(),this.loading=!0),C.a.createElement("div",{className:"loading"},C.a.createElement(je.a,null),this.getLocale().fetching)}},{key:"_fetchDetail",value:function(){var e=this;Object(r.ajax)({url:"/api/votes",method:"get",data:{doc_id:this.props.docId,vote_id:this.props.data.voteId,deadline:st()(this.props.data.deadline).toISOString(),items:this.props.data.items.map((function(e){return e.id})).join(",")},success:function(t){var n=t.data;e.setState({detail:Cs(n,e.props.data)})},error:function(t){console.error(t),e.setState({error:!0})}})}}]),n}();function Cs(e,t){if("single"!==t.type)return e;var n={},r=e.items.map((function(e){var t=e.count;if(0===t)return e;var r=(e.members||[]).filter((function(r){return n[r]?(t--,!1):(n[r]=e.id,!0)}));return{id:e.id,count:t,members:r}})),a=e.voted[0]||[];return xs(xs({},e),{},{items:r,voted:a})}y()(_s,"propTypes",{lang:R.a.oneOf(["zh-cn","en"]).isRequired,data:R.a.object.isRequired,docId:R.a.number.isRequired}),y()(_s,"defaultProps",{lang:"zh-cn",data:{}}),vt(".lake-vote-card-error {\n  height: 200px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #7d7d7d;\n}\n");var Es=function(e){f()(n,_.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){var e;o()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),y()(u()(e),"state",{hasError:!1}),e}return l()(n,[{key:"componentDidCatch",value:function(e,t){console.error(e,t)}},{key:"render",value:function(){return this.state.hasError?C.a.createElement("div",{className:"lake-vote-card-error"},"en"===this.props.lang?"Card display is abnormal":"卡片显示异常"):this.props.children}}],[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}]),n}();y()(Es,"propTypes",{children:R.a.any,lang:R.a.oneOf(["zh-cn","en"]).isRequired}),y()(Es,"defaultProps",{lang:"zh-cn"}),vt(".lake-vote-card-not-support {\n  padding: 24px;\n  background-color: #fafafa;\n  color: #595959;\n  height: 200px;\n  line-height: 152px;\n  text-align: center;\n}\n");var Os=function(e){f()(n,_.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"getLocale",value:function(){return"en"===this.props.lang?gs:ms}},{key:"render",value:function(){var e=this.getLocale();return C.a.createElement("div",{className:"lake-vote-card-not-support"},e.notSupport)}}]),n}();function Ss(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ss(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ss(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}y()(Os,"propTypes",{lang:R.a.oneOf(["zh-cn","en"]).isRequired}),y()(Os,"defaultProps",{lang:"zh-cn"});var Ds=function(e){f()(n,Ut);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){var e;o()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),y()(u()(e),"_onItemChange",(function(t,n){e.value.items[t]&&(e.value=Rs(Rs({},e.value),{},{items:ge()(e.value.items)}),e.value.items[t].value=n),e._saveCurrentValue(),e._renderEditingView(e.container[0],e.value)})),y()(u()(e),"_onAddItem",(function(){e.value=Rs(Rs({},e.value),{},{items:[].concat(ge()(e.value.items),[{id:fs.gen()}])}),e._saveCurrentValue(),e._renderEditingView(e.container[0],e.value)})),y()(u()(e),"_onDateTimeChange",(function(t){e.value=Rs(Rs({},e.value),{},{deadline:t.toISOString()}),e._saveCurrentValue(),e._renderEditingView(e.container[0],e.value)})),y()(u()(e),"_onTypeChange",(function(t){e.value=Rs(Rs({},e.value),{},{type:t}),e._saveCurrentValue(),e._renderEditingView(e.container[0],e.value)})),y()(u()(e),"_onTitleChange",(function(t){e.value=Rs(Rs({},e.value),{},{title:t}),e._saveCurrentValue(),e._renderEditingView(e.container[0],e.value)})),y()(u()(e),"_onKeyDownEnter",(function(t){var n=ge()(e.value.items);t+1<n.length?e._renderEditingView(e.container[0],e.value,t+1):n[t].value&&(n.push({id:fs.gen()}),e.value=Rs(Rs({},e.value),{},{items:n}),e._saveCurrentValue(),e._renderEditingView(e.container[0],e.value,t+1))})),y()(u()(e),"_onTitleKeyDownEnter",(function(){e._renderEditingView(e.container[0],e.value,0)})),y()(u()(e),"_onDeleteItem",(function(t){var n=ge()(e.value.items);n.splice(t,1),e.value=Rs(Rs({},e.value),{},{items:n}),e._saveCurrentValue(),e._renderEditingView(e.container[0],e.value)})),y()(u()(e),"_saveCurrentValue",nt()((function(){e.saveCardValue(e.value)}),32)),e}return l()(n,[{key:"embedToolbar",value:function(){var e=this;if(this.engine)return[{type:"dnd"},{type:"copyCardLink",onClick:function(){return e.copyCardEmbedLink()}},{type:"separator"}].concat(ge()(this.getMoreEmbedToolbarConfig()))}},{key:"saveCardValue",value:function(e){var t=this.cardRoot;this.engine&&this.engine.card.setValue(t,e)}},{key:"render",value:function(e,t){var n=e[0],r=this.getTopEngine().options,a=r.cardBlacklist,i=r.cardWhitelist,o=r.docId;return this.toggleMargin(),this.contentView&&!o||this.engine&&(a&&-1!==a.indexOf("vote")||i&&-1===i.indexOf("vote"))?this._renderNotSupportView(n):this.engine?(t.voteId||(t=Rs(Rs({},t),{},{type:"single",voteId:fs.gen(),items:[{id:fs.gen()},{id:fs.gen()}],deadline:st()(st()().format("YYYY-MM-DD 00:00:00")).add(2,"days").toISOString()})),this.setValue(t,!0),void this._renderEditingView(n,t)):this._renderReadingView(n,this.value)}},{key:"destroy",value:function(){this.engine&&this.engine.toolbar.disable(!1),this.container[0]&&O.a.unmountComponentAtNode(this.container[0]),x()(g()(n.prototype),"destroy",this).call(this)}},{key:"_renderReadingView",value:function(e,t){var n=this.getTopEngine().options,r=n.lang,a=n.docId;O.a.render(C.a.createElement(Es,{lang:r},C.a.createElement(_s,{data:t,docId:a,lang:r})),e)}},{key:"_renderEditingView",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=this.getTopEngine().options.lang;O.a.render(C.a.createElement(Es,{lang:r},C.a.createElement(ks,{data:t,onItemChange:this._onItemChange,onAddItem:this._onAddItem,onDateTimeChange:this._onDateTimeChange,onDeleteItem:this._onDeleteItem,onTypeChange:this._onTypeChange,onTitleChange:this._onTitleChange,onKeyDownEnter:this._onKeyDownEnter,onTitleKeyDownEnter:this._onTitleKeyDownEnter,autoFocusIndex:n,lang:r})),e)}},{key:"_renderNotSupportView",value:function(e){var t=this.getTopEngine().options.lang;O.a.render(C.a.createElement(Es,{lang:t},C.a.createElement(Os,{lang:t})),e)}}],[{key:"refreshCardValue",value:function(e){return e&&e.voteId?((e=Rs({},e)).voteId=fs.gen(),e.items&&e.items.forEach((function(e){e.id=fs.gen()})),e):{}}}]),n}();y()(Ds,"type","block"),vt(".lake-transfer-view {\n  height: 52px;\n  border: 1px solid #d8d8d8;\n  border-radius: 2px;\n  background-color: #fff;\n  font-size: 14px;\n  color: #262626;\n  padding: 0 16px;\n  display: flex;\n  align-items: center;\n}\n.lake-transfer-view .lake-transfer-view-info {\n  flex: 1;\n  display: flex;\n}\n.lake-transfer-view .lake-transfer-view-info .lake-svg-icon {\n  width: 24px;\n  height: 24px;\n}\n.lake-transfer-view .lake-transfer-view-info .lake-transfer-file-name {\n  margin-left: 12px;\n  margin-right: 6px;\n}\n.lake-transfer-view .lake-transfer-view-info .lake-transfer-file-size {\n  color: #a6a6a6;\n}\n.lake-transfer-view .lake-transfer-loading .anticon,\n.lake-transfer-view .lake-transfer-error .anticon {\n  margin-left: 6px;\n}\n.lake-transfer-view .lake-transfer-error {\n  color: #ff4d4f;\n}\n");var As={copying:"添加中",insertError:"插入失败"},Ts={copying:"Copying",insertError:"Failed to insert"},Ps=function(e){f()(n,_.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"getLocale",value:function(){return"zh-cn"===this.props.lang?As:Ts}},{key:"render",value:function(){var e=this.props;return C.a.createElement("div",{className:"lake-transfer-view"},C.a.createElement("div",{className:"lake-transfer-view-info"},C.a.createElement("span",{className:"lake-svg-icon lake-svg-icon-cloud"}),C.a.createElement("div",{className:"lake-transfer-file-name"},e.fileName),C.a.createElement("div",{className:"lake-transfer-file-size"},e.fileSize?"(".concat(e.fileSize,")"):"")),this._renderTip())}},{key:"_renderTip",value:function(){var e=this.props,t=this.getLocale();return e.isError?C.a.createElement("div",{className:"lake-transfer-error"},t.insertError,C.a.createElement(Le,null)):C.a.createElement("div",{className:"lake-transfer-loading"},t.copying,C.a.createElement(je.a,null))}}]),n}();function js(e){if(e){var t=e.options.file||{},n=t.copyAction,r=t.uploadAction;return n||(r?r.replace("/api/upload/attach","/api/upload/copy").replace(/ctoken=[^&]+&/,""):"")}}y()(Ps,"propTypes",{isError:R.a.bool,fileName:R.a.string.isRequired,fileSize:R.a.string,lang:R.a.oneOf(["zh-cn","en"]).isRequired}),y()(Ps,"defaultProps",{lang:"zh-cn"});var Ms=function(e){f()(n,Ut);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){var e;o()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),y()(u()(e),"_loading",!1),e}return l()(n,[{key:"embedToolbar",value:function(){return[{type:"delete"}]}},{key:"render",value:function(e,t){var n=this,r=this.engine;this.value=t||{},r?"Doc"===this.value.target_type?setTimeout((function(){r.constructor.plugin.executePluginMethod(r,"transfer","onTransferComplete",n.cardRoot,n.value,{})}),32):this.value.filekey?this._loading||"error"===this.value.status||this.doCopy(this.value):this.setValue({status:"error"}):this.value.status="error",this.renderView()}},{key:"rerender",value:function(){this.render(this.container,this.value)}},{key:"doCopy",value:function(e){var t=this;if(!this._loading&&e.type){var n,i=this.getTopEngine(),o=js(i);if(this._loading=!0,!o)return console.warn("无法执行复制：缺少 copy action"),this.setValue({status:"error",message:"复制失败"}),void this.rerender();Object(r.ajax)({method:"post",url:o,timeout:3e5,data:{attachments:[e.filekey],create_video:!0},success:(n=he()(fe.a.mark((function n(r){var o,c,l;return fe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=r.data,!(c=o[0].url)){n.next=16;break}if(!a.h.isImage(e.filename+"."+e.ext)){n.next=12;break}return n.prev=4,n.next=7,Ns(c);case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(4),console.warn("failed to load image: ",n.t0);case 12:return t.setValue({status:"done"}),t.rerender(),l=i.constructor.plugin,n.abrupt("return",l.executePluginMethod(i,"transfer","onTransferComplete",t.cardRoot,e,r.data[0]));case 16:t.setValue({status:"error",message:"复制失败"}),t.rerender();case 18:case"end":return n.stop()}}),n,null,[[4,9]])}))),function(e){return n.apply(this,arguments)}),error:function(e){console.error(e),t.setValue({status:"error",message:"复制失败"}),t.rerender()}})}}},{key:"renderView",value:function(){var e=this.value,t=void 0===e?{}:e;O.a.render(C.a.createElement(Ps,{isError:"error"===t.status,fileName:t.filename+"."+t.ext,lang:this.getTopEngine().options.lang||"zh-cn",fileSize:a.h.getFileSize(t.filesize||0)}),this.container[0])}}]),n}();function Ns(e){return new Promise((function(t,n){var r=new Image;r.onload=t,r.onerror=n,r.src=e}))}function Ls(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Is(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ls(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ls(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}y()(Ms,"type","block");var zs=function(e){f()(n,k.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),r=t.call(this),y()(u()(r),"_audio",null),y()(u()(r),"_canPlay",!1),y()(u()(r),"_ready",!1),Promise.resolve().then((function(){r._audio=new Audio(e),r._audio.autoplay=!1,r._audio.loop=!1,r._audio.preload=!1;var t=r._audio;t.addEventListener("canplay",(function(){r._audio&&(r._canPlay=!0,r.emit("canplay"))}),!1),t.addEventListener("suspend",(function(){r._audio&&100===r._getBufferedPercentage(t.buffered)&&r.emit("loaded")})),t.addEventListener("progress",(function(){r._audio&&r.emit("progress",{percentage:r._getBufferedPercentage(t.buffered)})})),t.addEventListener("loadedmetadata",(function(){r._audio&&(r._ready=!0,r._duration=t.duration,r.emit("loadedmetadata",{duration:r._duration}))}),!1),t.addEventListener("timeupdate",(function(){r._audio&&r.emit("timeupdate",r._calcTime(t.currentTime))}),!1),t.addEventListener("playing",(function(){r._audio&&(r._audio.currentTime>=r._duration?r.emit("pause"):r.emit("playing"))}),!1),t.addEventListener("pause",(function(){r._audio&&r.emit("pause")}),!1),t.addEventListener("ended",(function(){r._audio&&(r.emit("pause"),r.emit("ended"))}),!1),t.addEventListener("seeking",(function(){r._audio&&r.emit("seeking",Is(Is({},r._calcTime(t.currentTime)),{},{playStatus:""}))}),!1),t.addEventListener("seeked",(function(){r._audio&&r.emit("seeked",r._calcTime(t.currentTime))}),!1),t.addEventListener("error",(function(){r._audio&&r.emit("error")}))})),r}return l()(n,[{key:"destroy",value:function(){this._audio&&(this._audio.pause(),this._audio=null)}},{key:"canPlay",value:function(){return this._canPlay}},{key:"isReady",value:function(){return this._ready}},{key:"duration",value:function(){return this._duration}},{key:"seekTo",value:function(e){this._audio&&(this._audio.currentTime=e)}},{key:"seekToEnd",value:function(){this._audio&&(this._audio.currentTime=this._audio.duration)}},{key:"play",value:function(){this._audio&&this._audio.play().catch((function(e){console.warn(e)}))}},{key:"pause",value:function(){this._audio&&this._audio.pause()}},{key:"_getBufferedPercentage",value:function(e){if(e.length<1)return 0;var t=e.end(e.length-1),n=this._duration;return t&&n?t>=n?100:Math.floor(t/n*100):0}},{key:"_calcTime",value:function(e){var t=this._duration;return t?(e=Math.min(e,t),{currentTime:Math.round(e),percentage:e===t?100:Math.round(e/t*1e4)/100}):{currentTime:0,percentage:0}}}]),n}(),Bs=function(){function e(t,n){var r=this;o()(this,e),y()(this,"_autoBuffer",!0),y()(this,"_autoPlay",!1),y()(this,"_dragging",!1),y()(this,"_audioController",null),y()(this,"_containerNode",null),y()(this,"_controls",{}),y()(this,"$container",null),y()(this,"$progressBar",null),y()(this,"$pastBard",null),y()(this,"$shine",null),this._containerNode=t,this._audioController=new zs(n),this._audioController.on("progress",(function(e){var t=e.percentage;r._updateBufferedPercentage(t)})),this._audioController.on("timeupdate",(function(e){var t=e.percentage;r._updatePastPercentage(t)})),this._audioController.on("seeking",(function(e){var t=e.percentage;r._updatePastPercentage(t)})),this._audioController.on("seeked",(function(e){var t=e.percentage;r._updatePastPercentage(t),100!==t&&r._audioController.play()})),this._audioController.on("loaded",(function(){r._updateBufferedPercentage(100)})),this._init()}return l()(e,[{key:"canPlay",value:function(){return this._audioController.canPlay()}},{key:"play",value:function(){this._audioController.play()}},{key:"pause",value:function(){this._audioController.pause()}},{key:"seekToPercentage",value:function(e){if(this._audioController.isReady()){var t=this._audioController.duration(),n=e/100*t;n>=t||t-n<1?this._audioController.seekToEnd():this._audioController.seekTo(n)}}},{key:"on",value:function(){var e;return(e=this._audioController).on.apply(e,arguments)}},{key:"off",value:function(){var e;return(e=this._audioController).off.apply(e,arguments)}},{key:"destroy",value:function(){this._unbindEvent(),this._audioController.destroy()}},{key:"_init",value:function(){this._initProgressBar(),this._bindEvent()}},{key:"_bindEvent",value:function(){var e=this,t=Object(a.a)(this._containerNode.ownerDocument),n=!1,r=ee.ua.mobile,i=r?"touchstart":"mousedown",o=r?"touchmove":"mousemove",c=r?"touchend":"mouseup";this.$container.on(i,(function(e){e.stopPropagation(),n=!0})),this.$container.on(c,(function(t){n&&(t.stopPropagation(),e._seekByUI(Fs(t)))})),this.$shine.on(i,(function(r){r.stopPropagation();var a=e._containerNode.getBoundingClientRect(),i=a.left,l=a.width;e._dragging=!0,n=!1,e._controls.progress.classList.add("dragging");var s=function(t){var n=Fs(t)-i;n<0?n=0:n>l&&(n=l),e._controls.past.style.width=n+"px"};t.on(o,s,!1),t.on(c,(function n(r){e._dragging=!1,e._controls.progress.classList.remove("dragging"),t.off(o,s,!1),t.off(c,n,!1),e._seekByUI(Fs(r))}),!1)}))}},{key:"_seekByUI",value:function(e){var t=this._containerNode.getBoundingClientRect(),n=t.left,r=t.width,a=e-n;a<=0?this.seekToPercentage(0):a>=r?this.seekToPercentage(100):this.seekToPercentage(Math.round(a/r*1e4)/100)}},{key:"_unbindEvent",value:function(){}},{key:"_initProgressBar",value:function(){this._containerNode.innerHTML='\n<div class="lake-player-progress">\n    <div class="past"><div class="shine"></div></div>\n    <div class="buffered"></div>\n</div>',this._controls.progress=this._containerNode.firstElementChild,this._controls.past=this._containerNode.querySelector(".past"),this._controls.buffered=this._containerNode.querySelector(".buffered"),this._controls.shine=this._containerNode.querySelector(".shine"),this.$container=Object(a.a)(this._containerNode),this.$progressBar=Object(a.a)(this._controls.progress),this.$pastBar=Object(a.a)(this._controls.past),this.$shine=Object(a.a)(this._controls.shine)}},{key:"_updatePastPercentage",value:function(e){this._dragging||(this._controls.past.style.width=e+"%")}},{key:"_updateBufferedPercentage",value:function(e){this._controls.buffered.style.width=e+"%"}}]),e}();function Fs(e){return e.changedTouches&&e.changedTouches[0]?e.changedTouches[0].clientX:e.clientX||0}function Vs(){return C.a.createElement("i",{className:"lake-anticon lake-anticon-loading"},C.a.createElement("svg",{viewBox:"0 0 1024 1024",className:"lake-anticon-spin","data-icon":"loading",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},C.a.createElement("path",{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"})))}function Us(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}vt(".lake-player {\n  width: 100%;\n  height: 100%;\n  padding: 20px 28px;\n  border: 1px solid #d8d8d8;\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  user-select: none;\n  cursor: default;\n}\n.lake-player .play-btn {\n  width: 48px;\n  height: 48px;\n  border-radius: 50%;\n  border: 1px solid #e8e8e8;\n  background-color: #fafafa;\n  color: #595959;\n  outline: none;\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n@media (hover: hover) {\n  .lake-player .play-btn:HOVER {\n    background-color: #e8e8e8;\n  }\n}\n@media (hover: none) {\n  .lake-player .play-btn:ACTIVE {\n    background-color: #e8e8e8;\n  }\n}\n.lake-player .play-area {\n  flex: 1;\n  margin-left: 20px;\n  overflow: hidden;\n}\n.lake-player .audio-info {\n  display: flex;\n  font-size: 14px;\n  color: #262626;\n  line-height: 20px;\n}\n.lake-player .audio-info .audio-name {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.lake-player .audio-info .audio-size {\n  min-width: 70px;\n  text-align: right;\n  color: #8c8c8c;\n}\n.lake-player .audio-ctrl {\n  display: flex;\n  height: 28px;\n  line-height: 28px;\n  font-size: 12px;\n}\n.lake-player .audio-ctrl .audio-current,\n.lake-player .audio-ctrl .audio-duration {\n  color: #8c8c8c;\n  width: 60px;\n}\n.lake-player .audio-ctrl .audio-duration {\n  text-align: right;\n}\n.lake-player .audio-error {\n  height: 28px;\n  line-height: 28px;\n  color: #c61a1a;\n}\n.lake-player .audio-query {\n  height: 28px;\n  line-height: 28px;\n  color: #8c8c8c;\n}\n.lake-player .audio-query svg {\n  margin-right: 10px;\n}\n.lake-player .audio-progress-bar {\n  flex: 1;\n  display: flex;\n  margin: 0 7px;\n  align-items: center;\n  cursor: pointer;\n}\n.lake-player .audio-progress-bar:HOVER .past .shine {\n  background-color: #8c8c8c;\n}\n.lake-player .lake-player-progress {\n  width: 100%;\n  height: 3px;\n  background-color: #e8e8e8;\n  position: relative;\n}\n.lake-player .lake-player-progress:before,\n.lake-player .lake-player-progress:after {\n  content: ' ';\n  position: absolute;\n  width: 7px;\n  height: 3px;\n  top: 0;\n}\n.lake-player .lake-player-progress:before {\n  left: -7px;\n  background-color: #595959;\n}\n.lake-player .lake-player-progress:after {\n  right: -7px;\n  background-color: #e8e8e8;\n}\n.lake-player .lake-player-progress.dragging .past .shine {\n  background-color: #8c8c8c;\n}\n.lake-player .lake-player-progress .past {\n  width: 0;\n  height: 100%;\n  background-color: #595959;\n  position: absolute;\n  z-index: 2;\n}\n.lake-player .lake-player-progress .past .shine {\n  width: 15px;\n  height: 15px;\n  background-color: #595959;\n  border-radius: 100%;\n  position: absolute;\n  top: -6px;\n  right: -7px;\n}\n.lake-player .lake-player-progress .buffered {\n  position: relative;\n  z-index: 1;\n  width: 0;\n  transform: translateX(7px);\n  height: 100%;\n  background-color: #b7b7b7;\n}\n@media only screen and (max-width: 667px) {\n  .lake-player {\n    padding: 16px 20px;\n  }\n  .lake-player .play-area {\n    margin-left: 16px;\n  }\n}\n");var qs=function(e){f()(n,_.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;o()(this,n),r=t.call(this,e),y()(u()(r),"player",null),y()(u()(r),"playerRootNodeRef",null),y()(u()(r),"state",{ver:0,canPlay:!1,uiStatus:"pause",currentTime:0,duration:-1}),y()(u()(r),"_onMainButtonClick",(function(e){if(e.stopPropagation(),!r.state.hasError&&r.player){var t=r.state.uiStatus;"pause"===t?(r.player.canPlay()||r.setState({uiStatus:"buffer"}),r.player.play()):"play"===t?r.player.pause():"buffer"===t&&(r.setState({uiStatus:"pause"}),r.player.pause())}})),r.playerRootNodeRef=C.a.createRef();var a=r.setState;return r.setState=function(e){a.call(u()(r),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Us(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Us(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({ver:r.state.ver+1},e))},r}return l()(n,[{key:"componentDidMount",value:function(){var e=this;this.props.url&&(this.player=new Bs(this.playerRootNodeRef.current,this.props.url),this.player.on("canplay",(function(){"buffer"===e.state.uiStatus&&e.player.play()})),this.player.on("playing",(function(){e.setState({uiStatus:"play"})}),!1),this.player.on("pause",(function(){e.setState({uiStatus:"pause"})}),!1),this.player.on("loadedmetadata",(function(t){var n=t.duration;e.setState({duration:Math.round(n)})})),this.player.on("seeking",(function(t){var n=t.currentTime;e.setState({currentTime:n})})),this.player.on("seeked",(function(t){var n=t.currentTime;e.setState({currentTime:n})})),this.player.on("timeupdate",(function(t){var n=t.currentTime;e.setState({currentTime:n})})),this.player.on("error",(function(){e.setState({hasError:!0})})))}},{key:"componentWillUnmount",value:function(){this.player&&this.player.destroy()}},{key:"shouldComponentUpdate",value:function(e,t){return t.ver!==this.state.ver}},{key:"render",value:function(){return C.a.createElement("div",{className:"lake-player"},C.a.createElement("div",{className:"play-btn",onClick:this._onMainButtonClick},this.renderButton()),C.a.createElement("div",{className:"play-area"},C.a.createElement("div",{className:"audio-info"},this.renderAudioName()),this.renderPlayerControl()))}},{key:"renderButton",value:function(){var e=this.state.uiStatus;return"pause"===e?C.a.createElement("svg",{viewBox:"0 0 1024 1024","data-icon":"play",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},C.a.createElement("path",{d:"M810.752 442.432l-485.504-370.56C267.648 27.904 184.576 68.992 184.576 141.504v740.992c0 72.512 83.072 113.6 140.672 69.632l485.504-370.56a87.552 87.552 0 0 0 0-139.136z"})):"buffer"===e?C.a.createElement(Vs,null):C.a.createElement("svg",{viewBox:"0 0 1024 1024","data-icon":"pause",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},C.a.createElement("path",{d:"M191.3856 128.2048H382.464v768.4608H191.3856V128.1536z m384.512 0h192.8704v768.4608h-192.8704V128.1536z"}))}},{key:"renderPlayerControl",value:function(){return this.props.url?this.state.hasError?C.a.createElement("div",{className:"audio-error"},this.props.locale.audio.cantPlay):C.a.createElement("div",{className:"audio-ctrl"},C.a.createElement("div",{className:"audio-current"},this._toTime(this.state.currentTime)),C.a.createElement("div",{ref:this.playerRootNodeRef,className:"audio-progress-bar"}),C.a.createElement("div",{className:"audio-duration"},this._toTime(this.state.duration))):C.a.createElement("div",{className:"audio-query"},Vs(),this.props.locale.audio.query)}},{key:"renderAudioName",value:function(){var e=this.props,t=e.name,n=e.size;return C.a.createElement(C.a.Fragment,null,C.a.createElement("div",{className:"audio-name"},t),C.a.createElement("div",{className:"audio-size"},n?ee.FileUtils.getFileSize(n):""))}},{key:"_toTime",value:function(e){if(e<0)return"--:--";if(0===e)return"00:00";var t=Math.floor(e/60),n=e%60;return t<10&&(t="0"+t),n<10&&(n="0"+n),"".concat(t,":").concat(n)}}]),n}();y()(qs,"propTypes",{name:R.a.string.isRequired,locale:R.a.object.isRequired,size:R.a.number,url:R.a.string}),vt(".lake-audio-loading {\n  width: 100%;\n  height: 100%;\n  padding: 20px 28px;\n  background-color: #f6f6f6;\n  border: 1px solid #d8d8d8;\n  border-radius: 4px;\n  display: flex;\n  user-select: none;\n  cursor: default;\n}\n.lake-audio-loading .audio-icon {\n  width: 48px;\n  height: 48px;\n  border-radius: 50%;\n  color: #595959;\n  font-size: 28px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.lake-audio-loading .audio-info-box {\n  margin-left: 20px;\n  flex: 1;\n  overflow: hidden;\n}\n.lake-audio-loading .audio-info {\n  display: flex;\n  font-size: 14px;\n  color: #262626;\n  line-height: 20px;\n}\n.lake-audio-loading .audio-info .audio-name {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.lake-audio-loading .audio-info .audio-size {\n  min-width: 70px;\n  text-align: right;\n  color: #8c8c8c;\n}\n.lake-audio-loading .audio-status {\n  display: flex;\n  height: 28px;\n  line-height: 28px;\n  color: #8c8c8c;\n}\n.lake-audio-loading .audio-status .lake-anticon-loading {\n  margin-right: 10px;\n}\n");var Hs=function(e){f()(n,_.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"render",value:function(){return C.a.createElement("div",{className:"lake-audio-loading","data-type":this.props.type},C.a.createElement("div",{className:"audio-icon"},C.a.createElement("svg",{viewBox:"0 0 1024 1024","data-icon":"play",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},C.a.createElement("path",{d:"M363.995429 433.664v376.32a150.016 150.016 0 1 1-79.981715-132.681143v-276.626286-200.667428c0-19.456 13.970286-36.096 33.170286-39.424l547.986286-95.012572a40.009143 40.009143 0 0 1 46.811428 39.424v608.987429a150.016 150.016 0 1 1-79.981714-132.681143V352.512L363.995429 433.664z m0-81.188571L832 271.323429V152.539429L363.995429 233.654857v118.820572zM214.016 880.018286a69.997714 69.997714 0 1 0 0-140.032 69.997714 69.997714 0 0 0 0 139.995428z m547.986286-96a69.997714 69.997714 0 1 0 0-140.032 69.997714 69.997714 0 0 0 0 139.995428z"}))),C.a.createElement("div",{className:"audio-info-box"},C.a.createElement("div",{className:"audio-info"},this.renderAudioName()),C.a.createElement("div",{className:"audio-status"},this.renderStatus())))}},{key:"renderAudioName",value:function(){var e=this.props,t=e.name,n=e.size;return C.a.createElement(C.a.Fragment,null,C.a.createElement("div",{className:"audio-name"},t),C.a.createElement("div",{className:"audio-size"},n?ee.FileUtils.getFileSize(n):""))}},{key:"renderStatus",value:function(){var e=this.props.type;return"pending"===e?"等待上传":"uploading"===e||"transcoding"===e?C.a.createElement("div",{className:"upload-progress"},C.a.createElement(Vs,null),this._getText(e)):"transcoding"===e?C.a.createElement("div",{className:"upload-progress"},C.a.createElement(Vs,null),"转码中"):void 0}},{key:"_getText",value:function(e){return"transcoding"===e?"转码中":"uploading"===e?this.props.progress?this.props.progress+"%":"上传中":void 0}}]),n}();y()(Hs,"propTypes",{type:R.a.oneOf(["pending","uploading","transcoding"]),progress:R.a.number,name:R.a.string.isRequired,size:R.a.number}),vt('.lake-audio-error {\n  width: 100%;\n  height: 88px;\n  padding: 24px 20px;\n  background-color: #f6f6f6;\n  border: 1px solid #d8d8d8;\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  user-select: none;\n  cursor: default;\n}\n.lake-audio-error[data-error-type="copyright"] {\n  justify-content: left;\n  background: #fff;\n}\n.lake-audio-error .error-icon {\n  width: 28px;\n  height: 28px;\n  color: #595959;\n  font-size: 28px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.lake-audio-error .error-icon .lake-svg-icon {\n  width: 28px;\n  height: 28px;\n  background-size: 28px;\n}\n.lake-audio-error .error-message {\n  display: flex;\n  flex-direction: column;\n  line-height: 20px;\n  color: #bfbfbf;\n  margin-left: 16px;\n  font-size: 14px;\n}\n.lake-audio-error .lake-anticon-loading {\n  margin-right: 5px;\n}\n@media only screen and (max-width: 667px) {\n  .lake-audio-error .lake-svg-icon {\n    width: 21px;\n    height: 21px;\n    background-size: 21px 21px;\n  }\n}\n');var Ws=function(e){f()(n,_.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"render",value:function(){return C.a.createElement("div",{className:"lake-audio-error","data-error-type":this.props.type},this.renderBody())}},{key:"renderBody",value:function(){var e=this.props,t=e.type,n=e.message;return"copyright"===t?this.renderDeniedTip():C.a.createElement(C.a.Fragment,null,C.a.createElement("div",{className:"error-icon"},C.a.createElement("span",{className:"lake-svg-icon lake-svg-icon-audio-error-icon"})),C.a.createElement("div",{className:"error-message"},n))}},{key:"renderDeniedTip",value:function(){var e=this.props,t=e.audio,n=e.audioURL,r=e.locale;if(!n&&null!==n)return C.a.createElement(C.a.Fragment,null,C.a.createElement("div",{className:"error-icon"},C.a.createElement("span",{className:"lake-svg-icon lake-svg-icon-audio-icon"})),C.a.createElement("div",{className:"error-message"},r.audio.invalidAudio));var a;return a=null===n?C.a.createElement("div",{className:"query"},C.a.createElement(Vs,null),r.audio.query):C.a.createElement(C.a.Fragment,null,C.a.createElement("div",{className:"audio-info"},C.a.createElement("a",{href:n,target:"_blank"},t.name||r.audio.linkTip))),C.a.createElement(C.a.Fragment,null,C.a.createElement("div",{className:"error-icon"},C.a.createElement("span",{className:"lake-svg-icon lake-svg-icon-audio-icon"})),C.a.createElement("div",{className:"error-message"},a))}}]),n}();y()(Ws,"propTypes",{type:R.a.oneOf(["copyright","error"]).isRequired,message:R.a.string.isRequired,locale:R.a.object.isRequired,audio:R.a.object,audioURL:R.a.string}),vt(".lake-audio {\n  height: 88px;\n  background-color: #fff;\n}\n");var Ys=function(e){f()(n,_.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"render",value:function(){return C.a.createElement("div",{className:"lake-audio"},this.renderBody())}},{key:"renderBody",value:function(){var e=this.props,t=e.type,n=e.progress,r=e.audioInfo;return"pending"===t||"uploading"===t||"transcoding"===t?this.renderLoading(t,r,n):"player"===t||"query"===t?this.renderPlayer(this.props.audioInfo,t):this.renderError()}},{key:"renderError",value:function(){var e=this.props.errorMessage||this.props.locale.audio.cantPlay;return C.a.createElement(Ws,{type:"error",locale:this.props.locale,message:e})}},{key:"renderLoading",value:function(e,t,n){return C.a.createElement(Hs,{type:e,progress:n,name:t.fileName,url:t.url,size:t.fileSize})}},{key:"renderPlayer",value:function(e){return e=e||{},C.a.createElement(qs,{key:"url: ".concat(e.url),locale:this.props.locale,name:e.fileName,url:e.url,size:e.fileSize})}}]),n}();function Gs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ks(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gs(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}y()(Ys,"propTypes",{type:R.a.oneOf(["error","pending","uploading","transcoding","query","player"]).isRequired,progress:R.a.number,errorMessage:R.a.string,locale:R.a.object.isRequired,audioInfo:R.a.shape({fileName:R.a.string.isRequired,fileSize:R.a.number,url:R.a.string.isRequired})});var Xs=function(e){f()(n,Ut);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){var e;o()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),y()(u()(e),"queryTranscodeHandler",null),y()(u()(e),"audioURL",null),e}return l()(n,[{key:"embedToolbar",value:function(){var e=this,t=[];return this.engine?(this.audioURL&&(t=[{type:"download",onClick:this.downloadFile.bind(this)},{type:"separator"},{type:"dnd"},{type:"copy"},{type:"preferences",onClick:function(){e.setSidebar()}}].concat(ge()(this.getMoreEmbedToolbarConfig()))),t):(this.value.download&&this.audioURL&&(t=[{type:"download",onClick:this.downloadFile.bind(this)}]),t)}},{key:"setSidebar",value:function(){var e=this.value;this.engine.sidebar.set({name:"audio",title:this.getLocale().preferences,className:"lake-audio-sidebar",data:e})}},{key:"restoreSideBar",value:function(){this.engine&&this.engine.sidebar.restore("audio")}},{key:"downloadFile",value:function(){this.audioURL&&(this.engine&&this.engine.options&&this.engine.options.downloadVideoHandler?this.engine.options.downloadVideoHandler(this.audioURL):window.open(this.audioURL))}},{key:"getLocale",value:function(){return this.getViewEngine().locale}},{key:"getLang",value:function(){return this.getViewEngine().options.lang||"zh-cn"}},{key:"setValue",value:function(e,t){this.engine?x()(g()(n.prototype),"setValue",this).call(this,e,t):this.value=Ks(Ks({},this.value),e)}},{key:"render",value:function(e,t){this.value=t||{},this.inited||(this.rootNode=document.createElement("div"),this.inited=!0,e.empty(),e.append(this.rootNode)),this.rerender(),this.toggleMargin()}},{key:"rerender",value:function(){if(this.verify()){var e=this.value,t=e.status,n=e.audioId;return this.audioURL?this.renderPlayer(this.audioURL):null===this.audioURL&&n?this.renderQuery():"pending"===t?this.renderPending():"uploading"===t?this.renderUploading():"uploaded"===t?this.renderTranscode():this.renderError(this.getLocale().audio.invalidAudio)}}},{key:"unactivate",value:function(){this.restoreSideBar()}},{key:"destroy",value:function(){this.restoreSideBar(),x()(g()(n.prototype),"destroy",this).call(this),this.rootNode&&O.a.unmountComponentAtNode(this.rootNode)}},{key:"verify",value:function(){var e=this.value;return e?e.audioId?this._checkAccess():this._isUploadError(e)?(this.renderError(this.getLocale().audio.uploadError),!1):this._checkAccess():(this.renderError(this.getLocale().audio.invalidAudio),!1)}},{key:"_checkAccess",value:function(){return this.isBlocked()?(this.renderBlockedError(),!1):!!this.getTopEngine().options.allowAudioPlayer||(this.renderCopyrightDenied(),!1)}},{key:"isBlocked",value:function(){var e=this.engine,t=this.contentView;return e?-1!==(e.options.cardBlacklist||[]).indexOf("audio"):!t||"doc"!==t.options.scene}},{key:"renderError",value:function(e){this.stopQuery(),O.a.render(C.a.createElement(Ys,{type:"error",locale:this.getLocale(),errorMessage:e}),this.rootNode)}},{key:"renderCopyrightDenied",value:function(){this.renderCopyrightErrorView(this.getLocale().audio.copyright)}},{key:"renderBlockedError",value:function(){this.renderCopyrightErrorView(this.getLocale().audio.notSupport)}},{key:"renderCopyrightErrorView",value:function(e){this.queryAudioURL(),O.a.render(C.a.createElement(Ws,{type:"copyright",locale:this.getLocale(),audio:this.value,audioURL:this.audioURL,message:e}),this.rootNode)}},{key:"renderPending",value:function(){O.a.render(C.a.createElement(Ys,{type:"pending",locale:this.getLocale(),audioInfo:this.getAudioInfo()}),this.rootNode)}},{key:"renderUploading",value:function(){O.a.render(C.a.createElement(Ys,{type:"uploading",locale:this.getLocale(),progress:this.value.percent,audioInfo:this.getAudioInfo()}),this.rootNode)}},{key:"renderTranscode",value:function(){this.queryAudioURL(),O.a.render(C.a.createElement(Ys,{type:"transcoding",locale:this.getLocale(),audioInfo:this.getAudioInfo()}),this.rootNode)}},{key:"renderQuery",value:function(){this.queryAudioURL(),O.a.render(C.a.createElement(Ys,{type:"query",locale:this.getLocale(),audioInfo:this.getAudioInfo()}),this.rootNode)}},{key:"renderPlayer",value:function(e){O.a.render(C.a.createElement(Ys,{type:"player",locale:this.getLocale(),audioInfo:this.getAudioInfo(e)}),this.rootNode)}},{key:"stopQuery",value:function(){this.queryTranscodeHandler&&(this.queryTranscodeHandler.cancel(),this.queryTranscodeHandler=null)}},{key:"getAudioInfo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.value;return{fileName:t.name,fileSize:t.size,url:e}}},{key:"queryAudioURL",value:function(){var e=this;if(this.queryTranscodeHandler)return this.queryTranscodeHandler.promise;var t=this.getLocale();return this.queryTranscodeHandler=Kn.checkStatus(this.getTopEngine(),this.value.audioId),this.queryTranscodeHandler.promise.then((function(t){var n=t.data;n.audio?(e.audioURL=n.audio,e.setValue({status:"done"}),e.value.status="done",e.rerender()):e.renderError(e.getLocale().audio.failedToQuery)})).catch((function(n){e.audioURL="",console.error(n),e.setValue({status:"error",message:t.audio.transcodeError}),"error"===e.value.status&&e.rerender()})).then((function(){e.refreshToolbar()})),this.queryTranscodeHandler.promise}},{key:"_isUploadError",value:function(e){var t=!this.engine;return"uploaded"!==e.status&&"done"!==e.status&&(!!t||"error"===e.status||!e.taskId||"pending"!==e.status&&!Kn.hasTask(this.getTopEngine(),e.taskId))}}]),n}();y()(Xs,"type","block");var $s={initialize:function(){var e=this;this.command.add("math",{sideEffect:!0,execute:function(){var t=e.change.insertCard("math"),n=e.card.getComponent(t);e.change.activateCard(t),window.setTimeout((function(){n.focusTextarea()}),10)}}),this.on("paste:origin",(function(t){a.k.walkTree(t,(function(t){if((t=Object(a.a)(t)).isBlock()&&"math"===t.attr("data-type")){var n=t.attr("data-src"),r=t.attr("data-text"),i=t.attr("data-width"),o=t.attr("data-height");r=unescape(r),e.card.replaceNode(t,"math",{src:n,code:r,width:i,height:o})}}))}))}},Zs={initialize:function(){var e=this;this.command.add("save",{sideEffect:!0,execute:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e.event.trigger("save:before",t),e.asyncEvent.emitAsync("save:before",t).then((function(){e.options.onSave&&e.options.onSave(),a.r.log("save success")})).catch((function(t){e.messageError(t)}))}}),this.domEvent.onDocument("keydown",(function(t){Object(a.t)("mod+s",t)&&(t.preventDefault(),e.command.execute("save",!0))}))}};function Qs(){var e=this.locale.search,t=function(e){if(e.collapsed)return"";var t=document.createElement("div");return t.appendChild(e.cloneContents()),Object(a.a)(t).find("[data-lake-card]").remove(),t.textContent}(this.change.getRange());return{name:"search",title:e.title,className:"lake-dialog-search",data:{searchValue:t}}}var Js={initialize:function(){var e=this;!function(e,t,n){fr(e,"search",n,"dialog")}(this,0,Qs),this.domEvent.onDocument("keydown",(function(t){Object(a.t)("mod+shift+g",t)&&(t.preventDefault(),e.command.execute("search"))}))}};function eu(e){var t=this.change.getRange();if(t.collapsed){e.preventDefault();var n=this.change.insertCard("cardselect");this.change.activateCard(n),t=this.change.getRange();var r=n.find(".lake-cardselect-keyword");t.selectNodeContents(r[0]),t.collapse(!1),this.change.select(t)}}var tu={initialize:function(){var e=this;this.on("keydown:slash",(function(t){var n=e.change.getRange(),r=a.b.getClosestBlock(n.startContainer),i=r.text().trim().replace(/\u200b/g,"");"/"===i&&a.u.safari&&r.empty(),(""===i||"/"===i&&a.u.safari||t.ctrlKey||t.metaKey)&&eu.call(e,t)}))}};function nu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ru=window.URL||window.webkitURL;function au(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function iu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?au(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):au(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ou=new(function(){function e(t){o()(this,e),this.options=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nu(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({ratio:.8,isOverSize:function(){}},t)}var t;return l()(e,[{key:"_canvasToFile",value:function(e,t){var n=this.options.ratio,r=e.toDataURL("image/jpeg",n),i=a.j.dataURIToFile(r);return new File([i],t)}},{key:"compress",value:(t=he()(fe.a.mark((function e(t){var n,r,a,i,o,c,l;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.options.isOverSize,r=[],a=0;case 3:if(!(a<t.length)){e.next=23;break}if(i=t[a],!n(i)){e.next=19;break}return o=document.createElement("canvas"),c=o.getContext("2d"),e.next=10,Ir(ru.createObjectURL(i));case 10:l=e.sent,o.width=l.width,o.height=l.height,o.style.width=l.width+"px",o.style.height=l.height+"px",c.drawImage(l,0,0,l.width,l.height),r.push(this._canvasToFile(o,i.name)),e.next=20;break;case 19:r.push(i);case 20:a++,e.next=3;break;case 23:return e.abrupt("return",r);case 24:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}())({isOverSize:function(e){var t="string"==typeof e.ext?e.ext.toLowerCase():void 0;return("jpg"===t||"jpeg"===t)&&!a.h.isSizeLimit("image",e.size)}});function cu(e){return e.replace(/^(https:\/\/cdn)-pri(\.nlark\.com)/i,"$1$2")}function lu(e,t){var n=this,i=this.locale.image||{},o=((this.options.image||{}).uploadAction||"").replace("/api/upload/attach","/api/upload/url").replace(/ctoken=[^&]+&/,"");o&&Object(r.ajax)({method:"post",url:o,data:{url:t},success:function(t){var r=t.data,i={status:"done",src:r.url};r.size&&(i.size=r.size),r.width&&(i.width=r.width),r.height&&(i.height=r.height),a.q.updateCard(n,e,i,!0)},error:function(){a.q.updateCard(n,e,{status:"error",message:i.copyFailedTips},!0)}})}function su(e){var t=this.card.getValue(e),n=t.src||"";this.isRemoteImage(n)?(n.startsWith("https://intranetproxy.alipay.com/skylark/")&&(t.src=n.replace(/[\?&]x-oss-process=image\/resize,w_\d+/,"")),t.status="uploading",t.percent=0,this.card.replaceNode(e,"image",t)):"uploading"===t.status&&(delete t.status,this.card.setValue(e,t))}function uu(e){var t,n;"a"===e.name&&(n=e.attr("href"),e=(t=e).find("[data-type=image]"));var r=e.find("img"),a=r.attr("src");a=cu(a);var i=e.attr("data-width")||r.css("width")||r.attr("width")||"",o=e.attr("data-height")||r.css("height")||r.attr("height")||"";/%/.test(i)||(i=parseInt(i,10)),/%/.test(o)||(o=parseInt(o,10));var c={src:a,display:e.attr("data-display"),align:e.attr("data-align")};i&&(c.width=i),o&&(c.height=o),void 0!==n&&(c.link=n),(Mt(a)||this.isRemoteImage(a))&&(c.status="uploading",c.percent=0),this.card.replaceNode(t||e,"image",c)}function du(e){var t,n;"a"===e.name&&(n=e.attr("href"),e=(t=e).find("img"));var r=e.attr("src");r=cu(r);var a=e.css("width")||e.attr("width")||"",i=e.css("height")||e.attr("height")||"";/%/.test(a)||(a=parseInt(a,10)),/%/.test(i)||(i=parseInt(i,10));var o={src:r};a&&(o.width=a),i&&(o.height=i),void 0!==n&&(o.link=n),(Mt(r)||this.isRemoteImage(r))&&(o.status="uploading",o.percent=0),this.card.replaceNode(t||e,"image",o)}function fu(e){var t=this.change.getRange();if(t.collapsed){var n=a.b.getClosestBlock(t.startContainer);if("p"===n.name){var r=a.b.getBlockLeftText(n,t),i=/^!\[([^\]]{0,})\]\((https?:\/\/[^\)]{5,})\)$/.exec(r);if(i){e.preventDefault(),a.b.removeBlockLeftText(n,t);var o=i[1].split("|"),c=i[2],l={src:c,name:o[0],progress:{percent:0}},s=o[1];if("center"!==s&&"right"!==s||this.command.execute("alignment",s),!this.isRemoteImage(c))return l.status="done",delete l.progress,void this.change.insertCard("image",iu(iu({},l),{},{margin:{top:!0,bottom:!0}}));var u=a.q.insertCard(this,"image",iu(iu({},l||{}),{},{margin:{top:!0,bottom:!0}}));lu.call(this,u,c)}}}}var pu={initialize:function(){var e=this;this.on("drop:files",(function(t){if(e.uploader.post("image",t,{onBeforeInsertCard:function(e,t){t.margin={top:!0,bottom:!0}}}))return!1})),this.on("paste:files",(function(t){ou.compress(t).then((function(t){e.uploader.post("image",t,{onBeforeInsertCard:function(e,t){e.ext||(t.scaleByPixelRatio=!0),t.margin={top:!0,bottom:!0}}})}))})),this.on("paste:origin",(function(t){a.k.walkTree(t,(function(t){if((t=Object(a.a)(t)).isCard()&&"image"===t.attr("data-lake-card")){var n=e.card.getValue(t)||null,r=t.find("img")[0];if(n&&n.src)return;r&&r.src?(n=iu(iu({},n),{},{status:"done",src:r.src}),r.style.width&&(n.width=parseInt(r.style.width,10)),r.style.height&&(n.height=parseInt(r.style.height,10))):n=iu(iu({},n),{},{status:"error",message:e.locale.image.copyFailed}),e.card.setValue(t,n)}}))})),this.on("paste:schema",(function(e){e.add({p:{"data-type":"*","data-src":"*","data-align":"*","data-display":"*","data-width":"*","data-height":"*"}})})),this.on("paste:each",(function(t){t.isCard()&&"image"===t.attr("data-ready-card")?su.call(e,t):"image"===t.attr("data-type")&&t.find("img").length>0||"a"===t.name&&t.find("[data-type=image]").length>0&&t.find("img").length>0?uu.call(e,t):("a"===t.name&&t.find("img").length>0||"img"===t.name&&t.attr("src"))&&du.call(e,t)})),this.on("paste:after",(function(){e.editArea.find("[data-lake-card=image]").each((function(t,n){var r=Object(a.a)(t),i=e.card.getComponent(r);if("uploading"===i.value.status){var o=i.imageNode.src||"";if(Mt(o)&&e.uploader){var c=a.j.dataURIToFile(o),l=a.h.getFileExtname(c),s=l?"image.".concat(l):"image",u=new File([c],s);return i.value={status:"uploading",src:o,name:s,size:u.size,type:u.type,percent:0},e.card.updateNode(r,i),u.uid=e.uploader.getUid(n),e.uploader.addUploadingCard(u.uid,r),void e.uploader.post("image",[u])}e.isRemoteImage(o)&&(e.card.updateNode(r,i),lu.call(e,r,o))}}))})),this.on("keydown:enter",(function(t){fu.call(e,t)}))}},hu={initialize:function(){var e=this;this.on("drop:files",(function(t){if(e.uploader.post("file",t))return!1})),this.on("paste:origin",(function(t){a.k.walkTree(t,(function(t){if((t=Object(a.a)(t)).isBlock()&&t.hasClass("bi-file")){var n=t.find(".bi-file-content");if(n.length>0){var r=n.attr("data-src")||"",i=n.attr("data-name"),o=r.split(".").pop(),c=n.find(".size");if(!r||!o||0===c.length)return;var l=c.text().replace(/^.+?([\d\.]+)\s*(kb|mb).*$/i,(function(e,t,n){return"kb"===n.toLowerCase()?1e3*t:"mb"===n.toLowerCase()?1e3*t*1e3:void 0})),s={src:r,name:i,size:parseFloat(l)||0,ext:o};return void e.card.replaceNode(t,"file",s)}}}))})),this.on("paste:schema",(function(e){e.add([{p:{"data-type":"*","data-filetype":"*","data-name":"*","data-size":"*","data-src":"*"}}])})),this.on("paste:each",(function(t){if("file"===t.attr("data-type")){var n=t.attr("data-src");if(n){var r={src:n,name:t.attr("data-name"),size:parseInt(t.attr("data-size"),10)||0,ext:t.attr("data-filetype")};return void e.card.replaceNode(t,"file",r)}}}))}},mu=ue()("lake:outline"),gu={sup:1,sub:1};function vu(e){if(e.nodeType!==Node.ELEMENT_NODE)return null;var t=e.nodeName.toLowerCase();return gu[t]?t:null}var yu={_invalidTags:{h1:!0,h2:!0,h3:!0,h4:!0},_isHeadingNode:function(e){if(1!==e.nodeType)return!1;if(!e.tagName)return!1;var t=e.tagName.toLocaleLowerCase();return!0===this._invalidTags[t]},_findHeadingNodes:function(e){var t=e.childNodes;if(!t)return[];for(var n=[],r=0,a=t.length;r<a;r++){var i=t[r];this._isHeadingNode(i)&&n.push(i)}return n},_fixDuplicatedHeading:function(e){var t={};e.forEach((function(e){var n=e.id;if(t.hasOwnProperty(n)){var r=t[n];e.id+="-".concat(r),e.domNode.id=e.id,t[n]=r+1}else t[n]=1}))},_getLevel:function(e){return{H1:1,H2:2,H3:3,H4:4}[e]||-1},getText:function(e){var t=St(e,(function(e){return!e.getAttribute("data-lake-card")})),n="";return t.forEach((function(e){n+=e.textContent})),n},normalize:function(e){var t=this;if(0===(e=e||[]).length)return[];var n=new pt.a,r=[];e.forEach((function(e){var a=function(e){var t=[],n=[],r=document.createElement("span");return function e(t,n,r){if(n=n||function(){return!0},t&&n(t)){var a=(r=r||{}).open||function(){},i=r.close||function(){};a(t);var o=t.childNodes;if(o)for(var c=0,l=o.length;c<l;c++)e(o[c],n,r);i(t)}}(e,(function(e){return!e.getAttribute||!e.getAttribute("data-lake-card")}),{open:function(e){if(e.nodeType===Node.TEXT_NODE){var a=e.textContent;t.push(a),r.innerText=a,n.push(r.innerHTML)}else{var i=vu(e);null!==i&&n.push("<".concat(i,">"))}},close:function(e){var t=vu(e);null!==t&&n.push("</".concat(t,">"))}}),{text:t.join(""),html:n.join("")}}(e),i=a.text,o=a.html;(i=i.trim())&&(e.id||(e.id=n.id(i)),r.push({id:e.id,text:i,html:o,level:t._getLevel(e.tagName),depth:-1,domNode:e}))}));var a=[];r.forEach((function(e){a.indexOf(e.level)<0&&a.push(e.level)})),a.sort();var i={};return a.forEach((function(e,t){i[e]=t+1})),r.forEach((function(e){e.depth=i[e.level]})),r},extractFromDom:function(e){if(!e)return[];try{var t=this._findHeadingNodes(e);mu("headings:",t);var n=yu.normalize(t);return this._fixDuplicatedHeading(n),n.forEach((function(e){delete e.domNode})),n}catch(e){return mu("error",e),[]}}};function bu(){var e=this,t=[];return this.editArea.find("h1,h2,h3,h4").each((function(n){n=Object(a.a)(n),e.card.closest(n)||n.parent().isRoot()&&t.push(n[0])})),yu.normalize(t)}function ku(){var e=this.locale.toc,t=null;try{t=bu.call(this)}catch(e){t=[]}return{name:"toc",title:e.title,className:"lake-toc-sidebar",data:t}}var wu={initialize:function(){var e=this;pr(this,"toc",ku);var t=function(){e.command.queryState("toc")&&window.setTimeout((function(){if(!e.isDestroyed&&e.command.queryState("toc")){var t=ku.call(e);e.sidebar.set(t)}}),100)};this.ot&&this.ot.on("load",t),this.on("change",t),this.on("setvalue",t)}};function xu(){return{name:"repository",title:null,className:"lake-repository-sidebar",data:null}}var _u={initialize:function(){pr(this,"repository",xu)}};function Cu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Eu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cu(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ou={initialize:function(){var e=this;this.command.add("flowchart",{sideEffect:!0,execute:function(){e.locale.flowchart;var t={diagramData:be.a.deflate(JSON.stringify({head:{version:"2.0.0"},body:[{type:"flowchart",shape:"start-end",id:"9987140f-1575-4455-9627-a5b05621cfa0",x:552.5,y:374,html:'<div style="text-align:center;">开始</div>',zIndex:0}]}),{to:"string"})};e.change.insertCard("flowchart2",Eu(Eu({},t),{},{margin:!0}))}})}},Su={initialize:function(){var e=this;this.command.add("diagram",{sideEffect:!0,execute:function(t,n){var r=e.change.insertCard("diagram",{code:n||"",type:"puml",margin:!0});window.setTimeout((function(){e.card.getComponent(r).focusToCodeEditor()}),10)}})}},Ru={text:"plain",sh:"bash",ts:"typescript",js:"javascript",py:"python",puml:"plantuml",uml:"plantuml",vb:"basic",md:"markdown","c++":"cpp"},Du={initialize:function(){var e=this;this.command.add("codeblock",{sideEffect:!0,execute:function(t,n){var r=e.change.insertCard("codeblock",{mode:t,code:n,heightLimit:!0,margin:!0}),a=e.card.getComponent(r);window.setTimeout((function(){a.focusToCodeEditor()}),10)}}),this.on("keydown:enter",(function(t){var n=e.change.getRange();if(n.collapsed){var r=a.b.getClosestBlock(n.startContainer);if(r.isHeading()){var i=a.b.getBlockLeftText(r,n),o=/^```(.*){0,10}$/.exec(i);if(o){var c=(void 0===o[1]?"":o[1]).toLowerCase();if(Ja[c=Ru[c]||c]||""===c)return t.preventDefault(),a.b.removeBlockLeftText(r,n),e.command.execute("codeblock",c,""),r.remove(),!1}}}})),this.on("paste:origin",(function(t){a.k.walkTree(t,(function(t){if((t=Object(a.a)(t)).isBlock()&&t.hasClass("bi-code")){var n=t.find("pre");if(n.length>0){var r=/^bi-code bi-code-(\w+)/.exec(t[0].className),i=r?r[1]:"",o=new a.i(n).toText();return void e.card.replaceNode(t,"codeblock",{mode:i,code:o})}}}))})),this.on("paste:schema",(function(e){e.add({pre:{"data-syntax":"*"}})})),this.on("paste:each",(function(t){if("pre"===t.name&&t.attr("data-syntax")){var n=new a.i(t).toText();e.card.replaceNode(t,"codeblock",{mode:t.attr("data-syntax"),code:n})}else if("pre"===t.name&&t.first()&&"code"===t.first().name){var r=new a.i(t).toText();e.card.replaceNode(t,"codeblock",{mode:"plain",code:r})}}))}};function Au(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Au(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Au(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pu(e){var t=this.change.getRange();if(t.collapsed){var n=a.b.getClosestBlock(t.startContainer);if("p"===n.name){var r=a.b.getBlockLeftText(n,t),i=/^\|(?:(?:[^\|]+?)\|){2,}$/.exec(r);if(i){e.preventDefault(),a.b.removeBlockLeftText(n,t);for(var o=i[0].split("|").filter((function(e){return e})),c=o.length,l="<table>",s=0;s<=2;s++){l+="<tr>";for(var u=0;u<=c-1;u++){var d=0===s?a.n.escape(o[u]):"<br />";l+="<td><p>".concat(d,"</p></td>")}l+="</tr>"}var f=Object(a.a)(l+="</table>"),p=li(f[0]),h=oi(f[0]),m={html:p.outerHTML,rows:h.rows,cols:h.cols};return this.command.execute("table",m),m}}}}var ju={initialize:function(){var e=this;this.schema.add(Fi),a.r.log("init"),this.command.add("table",{sideEffect:!0,execute:function(t){a.r.log("insert table ......");var n=e.change.insertCard("table",Tu(Tu({},t||{rows:8,cols:8}),{},{margin:!0})),r=e.card.getComponent(n);return e.change.activateCard(n),r.selection.selectFirstCell(),r}}),this.on("paste:origin",gi),this.on("paste:before",(function(t){a.k.fetchAllChildren(t).forEach((function(t){if("table"===(t=Object(a.a)(t)).name){var n=li(t[0]),r=oi(t[0]),i={html:n.outerHTML,rows:r.rows,cols:r.cols};e.card.replaceNode(t,"table",i)}}))})),this.on("keydown:enter",(function(t){Pu.call(e,t)}))}},Mu={initialize:function(){var e=this;this.on("setvalue",(function(){e.editArea.find("[data-lake-card=video]").each((function(t){var n=Object(a.a)(t),r=e.card.getValue(n);"uploading"!==r.status&&"pending"!==r.status||e.card.removeNode(n)}))}))}};function Nu(e){var t=this.change.getRange();if(t.collapsed){var n,r=t.endContainer,i=t.endOffset,o=null,c="";if(r.nodeType===Node.TEXT_NODE?(o=r,c=r.nodeValue.substring(0,i)):(o=r.childNodes[i-1])&&(o.nodeType===Node.TEXT_NODE?c=o.nodeValue:Object(a.a)(o).isMark()&&o.lastChild&&o.lastChild.nodeType===Node.TEXT_NODE&&(c=(o=o.lastChild).nodeValue)),n=a.u.safari&&229===e.keyCode?/^@$|[\u200b\s]@$/:/[\u200b\s]$/,!c||n.test(c)){e.preventDefault(),a.u.safari&&229===e.keyCode&&c.endsWith("@")&&(o.nodeValue=c.substring(0,c.length-1),t.selectNodeContents(o),t.collapse(!1),this.change.select(t));var l=this.change.insertCard("mention");this.card.getComponent(l).renderSuggestion().then();var s=l.find(".lake-mention-at");t.selectNodeContents(s[0]),t.collapse(!1),this.change.select(t)}}}var Lu={initialize:function(){var e=this;!1!==this.options.allowMention&&this.on("keydown:at",(function(t){Nu.call(e,t)}))},extract:function(){var e=this,t=[];return this.card.getCardRootByName("mention").forEach((function(n){var r=e.card.getValue(Object(a.a)(n));t.push(r)})),t}};function Iu(e,t){var n=this,a=this.locale.markdown||{},i="lake-paste-markdown",o=C.a.createElement(B.a,{type:"primary",size:"small",onClick:function(){var a=J()(n,"options.markdown.convertAction")||"/api/docs/convert";Object(r.ajax)({method:"post",url:a,data:{from:"markdown",to:"lake",content:e},success:function(e){var r=e.data.content;n.change.setValue(t),n.command.execute("paste",r),W.a.close(i)}})}},a.pasteButton);W.a.open({placement:"topRight",message:a.pasteTitle,description:a.pasteContent,btn:o,key:i})}W.a.config({top:105});var zu={initialize:function(){var e=this;this.on("paste:string",(function(t,n){if(!t.isPasteText){var r,i=t.html||"";r=t.text?t.text:new a.i(i).toText(),function(e){var t="",n=e.html||"";n?(n=n.replace(/<blockquote[^>]*>[\s\S]*?<\/blockquote>/gi,""),t=new a.i(n).toText()):e.text&&(t=e.text||"");for(var r=[/^\s*([\*\-\+]|\d+\.)\s+/m,/^\s*#{1,6}\s+/m,/\[(.*?)\]\(([\S]+?)\)/m,/\s*>\s?/m,/(^|\r?\n)(`{3,})[\s\S]*?\1($|\r?\n)/,/^\s*\|(([^\|]+?)\|){2,}\s*$/m],i=0;i<r.length;i++)if(r[i].test(t))return!0;return!1}(t)&&!J()(e,"options.markdown.disableConvert")&&Iu.call(e,r,n)}}))}};function Bu(){return{name:"translate",title:this.locale.translate.title,className:"lake-translate-sidebar",data:null}}var Fu={initialize:function(){pr(this,"translate",Bu)}};function Vu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Uu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vu(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qu={initialize:function(){var e=this;this.command.add("yuque",{sideEffect:!0,execute:function(){var t=e.change.insertCard("yuque",{margin:!0});e.card.getComponent(t).focusInput()}})},toggleToTitleMode:function(e){var t=e.cardRoot.parent();if(t.isRoot()||t.isTable()){var n=Object(a.a)("<p><br/></p>");e.cardRoot.before(n)}this.change.removeCard(e.cardRoot);var r=e.value;this.change.insertCard("yuqueinline",{src:r.src,url:r.url,detail:r.detail})},toggleToBlockMode:function(e,t){var n=document.createRange();n.setStartAfter(e.cardRoot[0]),n.collapse(!0),this.change.removeCard(e.cardRoot),this.change.select(n),this.change.insertCard("yuque",Uu(Uu({},e.value),{},{mode:t}))}},Hu={initialize:function(){var e=this;this.command.add("label",{sideEffect:!0,execute:function(){var t=e.change.insertCard("label"),n=e.card.getComponent(t);e.change.activateCard(t),setTimeout((function(){n.focusInput()}),20)}})}};vt(".lake-link-editor {\n  max-width: 398px;\n  display: inline-block;\n  border: 1px solid #E8E8E8;\n  border-radius: 4px;\n  box-shadow: rgba(221, 221, 221, 0.5) 0px 1px 3px;\n  background: white;\n}\n.lake-link-editor .lake-link-invalid-link {\n  color: #CF1322;\n}\n.lake-link-editor p {\n  margin-top: 0;\n  margin-bottom: 14px;\n}\n.lake-link-editor .lake-link-editor-slash {\n  width: 1px;\n  height: 14px;\n  border-left: 1px solid #E8E8E8;\n  margin: 5px 0 0 10px;\n  vertical-align: top;\n}\n.lake-link-editor .lake-icon {\n  color: #8590A6;\n  font-size: 16px;\n}\n.lake-link-editor-preview {\n  line-height: 16px;\n  padding: 6px 8px;\n  vertical-align: middle;\n  white-space: nowrap;\n}\n.lake-link-editor-preview * {\n  display: inline-block;\n}\n.lake-link-editor-preview .lake-link-editor-button-wrap {\n  display: inline-flex;\n  align-items: center;\n  cursor: pointer;\n  padding: 4px;\n}\n.lake-link-editor-preview .lake-link-editor-button-wrap:HOVER {\n  background: #F4F4F4;\n}\n.lake-link-editor-preview .lake-link-editor-button,\n.lake-link-editor-preview .lake-link-control-button {\n  color: #595959;\n  margin: 0px 0px 0px 8px;\n  padding: 4px;\n}\n.lake-link-editor-preview .lake-link-editor-button:first-child,\n.lake-link-editor-preview .lake-link-control-button:first-child {\n  margin: 0;\n}\n.lake-link-editor-preview .lake-link-editor-button:HOVER,\n.lake-link-editor-preview .lake-link-control-button:HOVER {\n  background: #F4F4F4;\n  cursor: pointer;\n}\n.lake-link-editor-preview .lake-link-editor-button-label {\n  font-size: 12px;\n  margin-left: 4px;\n}\n.lake-link-editor-preview .lake-link-editor-link-container {\n  color: #1890FF;\n  height: 16px;\n  padding: 0 6px;\n  min-width: 180px;\n  max-width: 292px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  text-decoration: none;\n  line-height: 12px;\n  font-size: 14px;\n  letter-spacing: 1.2px;\n  vertical-align: middle;\n}\n.lake-link-editor-preview .lake-link-editor-link-empty {\n  height: 16px;\n  padding: 0 6px;\n  min-width: 146px;\n  max-width: 292px;\n  line-height: 20px;\n  font-size: 14px;\n}\n.lake-link-editor-preview .lake-link-editor-link-container:hover {\n  cursor: pointer;\n}\n.lake-link-editor-edit {\n  width: 365px;\n  padding: 16px 12px;\n  padding-bottom: 4px;\n}\n");var Wu={"zh-cn":{text:"文本",link:"链接",editLink:"编辑链接",addDescription:"添加描述",linkAddress:"链接地址",deleteLink:"删除链接",confirm:"确定",pleaseInputLink:"请输入链接",emptyLink:"空链接",visitLink:"访问链接",pleaseEnterCorrectLink:"请输入正确的链接",selectedContent:"多行文字被选中，暂不支持修改文本",titleMode:"标题",cardMode:"卡片",embedMode:"嵌入",toCard:"转为书签"},en:{text:"Text",link:"Link",editLink:"Edit link",addDescription:"Add a description",linkAddress:"Link address",deleteLink:"Delete link",confirm:"Confirm",pleaseInputLink:"Please input link address",emptyLink:"Empty link",visitLink:"Visit link",pleaseEnterCorrectLink:"Please enter the correct link",selectedContent:"Selected in the document",titleMode:"Title",cardMode:"Card",embedMode:"Embed",toCard:"Convert to bookmark"}},Yu=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;o()(this,n);var a=(r=t.call(this,e)).props,i=a.type,c=a.lang,l=a.target;return r.locale=Wu[c],r.nativeEvents=[],r.rect=l[0].getBoundingClientRect(),r.link=l[0].getAttribute("href"),r.isMultiLink=l.length>1,r.state={type:i,invalidLink:r.isInvalidLink(r.link)},r.preventScrollCancel=!1,r.setContainerPosition(),r.validator=new _c(window.location),r}return l()(n,[{key:"setContainerPosition",value:function(){var e=this.props,t=e.target,n=e.container,r=t[0].getBoundingClientRect().bottom;n.className="lake-prevent-card-activated",n.style.top="".concat(window.pageYOffset+r+4,"px"),n.style.left=window.pageXOffset+"px",n.style.position="absolute",n.style["z-index"]="1400"}},{key:"adjustPosition",value:function(){var e,t,n=this.props,r=n.container,a=n.target[0].getBoundingClientRect(),i=r.getBoundingClientRect(),o=i.height,c=i.width;t=a.left+c>window.innerWidth-20?window.pageXOffset+window.innerWidth-c-20:a.left-window.pageXOffset<20?window.pageXOffset+20:window.pageXOffset+a.left,a.bottom+o>window.innerHeight-20?(e=window.pageYOffset+a.top-o-4)<0&&(e=4):e=window.pageYOffset+a.bottom+4,r.style.top="".concat(e,"px"),r.style.left="".concat(t,"px")}},{key:"componentDidMount",value:function(){this.bindNativeEvents(),this.adjustPosition()}},{key:"componentDidUpdate",value:function(){this.adjustPosition()}},{key:"componentWillUnmount",value:function(){this.removeNativeEvents()}},{key:"bindNativeEvents",value:function(){var e=this,t=this.props.container,n=!1;this.addNativeEvent(window,"scroll",(function(t){!0!==e.preventScrollCancel?t.target.className&&-1!==t.target.className.indexOf("lake-link")||e.cancel():t.preventDefault()}),!0),this.addNativeEvent(window,"resize",(function(){e.cancel()}),!0),this.addNativeEvent(window,"mousedown",(function(e){var r=e.target;t.contains(r)||(n=!0)}),!0),this.addNativeEvent(window,"mouseup",(function(r){var a=r.target;n&&!t.contains(a)&&e.cancel(),n=!1}),!0),this.addNativeEvent(t,"keydown",(function(t){var n=t.keyCode,r=e.state.invalidLink;13!==n||r||e.confirm(),27===n&&e.cancel()}))}},{key:"cancel",value:function(){var e=this.props,t=e.onCancel,n=e.target;t({link:n&&n[0].getAttribute("href")})}},{key:"addNativeEvent",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.addEventListener(t,n,r),this.nativeEvents.push({dom:e,name:t,callback:n,useCapture:r})}},{key:"removeNativeEvents",value:function(){this.nativeEvents.forEach((function(e){var t=e.dom,n=e.name,r=e.callback,a=e.useCapture;t.removeEventListener(n,r,a)})),this.nativeEvents=[]}},{key:"confirm",value:function(){var e=this.props.onConfirm,t=this.state.invalidLink,n=this.getText(),r=this.getLink();t||e(n,r)}},{key:"renderPreview",value:function(){var e=this,t=this.props.onDeleteLink,n=this.getLink(),r=this.locale,a=this.renderToggleBtn(n);return C.a.createElement("div",{className:"lake-link-editor lake-link-editor-preview",ref:function(t){e.containerDom=t}},a,a?C.a.createElement("span",{className:"lake-link-editor-slash"}):null,C.a.createElement(D.a,{title:r.visitLink},C.a.createElement("a",{className:"lake-icon lake-icon-gotolink lake-link-control-button",onClick:function(t){t.preventDefault(),t.stopPropagation(),e.props.openLink(n)},target:"_blank",href:n})),C.a.createElement(D.a,{title:r.editLink},C.a.createElement("a",{className:"lake-icon lake-icon-edit lake-link-editor-button",onClick:function(){e.setState({type:"edit"})}})),C.a.createElement(D.a,{title:r.deleteLink},C.a.createElement("a",{className:"lake-icon lake-icon-unlink lake-link-editor-button",onClick:t})))}},{key:"renderToggleBtn",value:function(e){if(!e)return null;var t=this.validator.getURLInfo(e,{group:!0});return t.valid?t.isYuqueURL?this.renderYuqueLinkToggleBtn(e,t.url):this.renderThirdLinkToggleBtn(e):null}},{key:"renderYuqueLinkToggleBtn",value:function(e,t){var n=this,r=this.locale,a=Oc(e)||Cc(e)?null:C.a.createElement(D.a,{title:r.embedMode},C.a.createElement("a",{className:"lake-icon lake-icon-doc-embed lake-link-control-button",onClick:function(){n.props.onToggleMode(!0,e,"embed",t)}}));return C.a.createElement(C.a.Fragment,null,C.a.createElement(D.a,{title:r.titleMode},C.a.createElement("a",{className:"lake-icon lake-icon-doc-title lake-link-control-button",onClick:function(){n.props.onToggleMode(!0,e,"title",t)}})),C.a.createElement(D.a,{title:r.cardMode},C.a.createElement("a",{className:"lake-icon lake-icon-doc-card lake-link-control-button",onClick:function(){n.props.onToggleMode(!0,e,"card",t)}})),a)}},{key:"renderThirdLinkToggleBtn",value:function(e){var t=this,n=this.locale;return C.a.createElement(D.a,{title:n.toCard},C.a.createElement("a",{className:"lake-icon lake-icon-doc-card lake-link-control-button",onClick:function(){t.props.onToggleMode(!1,e)}}))}},{key:"isInvalidLink",value:function(e){return function(e){return!e||e&&!e.match(/^[\x00-\x7F]/)||e.startsWith("javascript:")}(e)}},{key:"renderEditor",value:function(){var e=this,t=this.state.invalidLink,n=this.getText(),r=this.getLink(),a=this.locale;return C.a.createElement("div",{className:"lake-link-editor lake-link-editor-edit",ref:function(t){e.containerDom=t}},C.a.createElement("p",null,a.text),C.a.createElement("p",null,C.a.createElement(z.a,{className:"lake-link-text-input",defaultValue:this.isMultiLink?a.selectedContent:n,ref:function(t){e.textInputDom=t},placeholder:a.addDescription,disabled:this.isMultiLink,onChange:function(t){e.text=t.target.value}})),C.a.createElement("p",null,a.link),C.a.createElement("p",null,C.a.createElement(z.a,{className:"lake-link-link-input",defaultValue:r,ref:function(t){e.preventScrollCancel=!0,t&&t.focus(),e.linkInputDom=t,setTimeout((function(){e.preventScrollCancel=!1}),32)},placeholder:a.linkAddress,onChange:function(t){e.link=t.target.value,e.setState({invalidLink:e.isInvalidLink(e.link)})}})),t&&""!==r?C.a.createElement("p",{className:"lake-link-invalid-link"},a.pleaseEnterCorrectLink):"",C.a.createElement("p",null,C.a.createElement(B.a,{className:"lake-link-confirm-button",onClick:function(){e.confirm()},disabled:!this.link||t},a.confirm)))}},{key:"getLink",value:function(){var e=this.props.getLink;return this.link&&e(this.link)||""}},{key:"getText",value:function(){var e=this.props.target;return this.isMultiLink?"":this.text||e[0].textContent}},{key:"render",value:function(){return"edit"===this.state.type?this.renderEditor():this.renderPreview()}}]),n}(C.a.Component);Yu.defaultProps={container:{},type:"preview",lang:"zh-cn",onDeleteLink:function(){},onConfirm:function(){},onCancel:function(){},shouldTargetBlank:function(){},getLink:function(e){return e},onToggleMode:function(){},openLink:function(){}},Yu.propTypes={container:R.a.object,target:R.a.arrayOf(R.a.instanceOf(HTMLElement)).isRequired,type:R.a.string,lang:R.a.string,onDeleteLink:R.a.func,onConfirm:R.a.func,onCancel:R.a.func,shouldTargetBlank:R.a.func,getLink:R.a.func,onToggleMode:R.a.func,openLink:R.a.func};var Gu={};function Ku(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:location.href;if(!e||!a.n.protocols.some((function(t){return e.startsWith(t)})))return!1;try{var n=new URL(e,t),r=new URL(t);return n.host!==r.host||!Xu(n.pathname,r.pathname)}catch(e){console.warn(e)}return!0}function Xu(e,t){t.endsWith("/edit")&&(t=t.replace(/\/edit$/,""));var n=e.replace(/\/$/,"").split("/"),r=t.replace(/\/$/,"").split("/");return n.length===r.length&&(n.pop(),r.pop(),n.join("/")===r.join("/"))}function $u(e,t,n,r,i,o){var c=Object(a.a)(t)[0],l=document.createRange();l.setStartAfter(c),l.collapse(!0),c.parentNode.removeChild(c),e.change.select(l),n?"title"===i?e.change.insertCard("yuqueinline",{src:r,url:o,margin:!0}):e.change.insertCard("yuque",{src:r,url:o,mode:i,margin:!0}):e.change.insertCard("bookmarklink",{src:r,text:t.text()})}function Zu(e){var t=window.location,n=t.origin,r=t.pathname,i=a.n.escapeRegExp(n+r.replace("/edit","")),o=new RegExp("^".concat(i,"#"));return e=e.replace(o,"#").trim(),/^(\w+\.)+\w+(\/|$)/.test(e)&&(e="http://"+e),e}function Qu(e){try{var t=new URL(e,location.origin);return!!Gu[t.protocol]}catch(e){return console.error(e),!1}}function Ju(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"preview",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=document.createElement("div"),o=document.body;o.appendChild(i);var c=function e(){i.parentNode===o&&(O.a.unmountComponentAtNode(i),o.removeChild(i)),t.off("beforesetvalue",e)};this.on("beforesetvalue",c),O.a.render(C.a.createElement(U.a,{autoInsertSpaceInButton:!1},C.a.createElement(Yu,{target:e.toArray(),shouldTargetBlank:Ku,lang:this.currentLanguage(),getLink:Zu,type:n,container:i,openLink:function(e){var n=new URL(e,Tt());t.openLink(n.href,e)},onToggleMode:function(n,r,a,c){O.a.unmountComponentAtNode(i),o.removeChild(i),$u(t,e,n,r,a,c)},onDeleteLink:function(){var n=t.change.getRange();n.selectNode(e[0]),t.change.select(n),t.change.unwrapInline("<a />"),c()},onConfirm:function(n,r){t.history.hold(),Ku(r)?e.attr("target","_blank"):e.removeAttr("target"),e.attr("href",Qu(r)?r:""),n&&e.text()!==n&&e.text(n),c(),t.change.change()},onCancel:function(e){var t=e.link;c(),!t&&a&&r()}})),i)}a.n.protocols.forEach((function(e){Gu[e]=!0}));var ed={initialize:function(){var e=this;this.editArea.on("click",(function(t){var n=Object(a.a)(t.target).closest("a");if(n.length>0){var r=e.card.closest(n);if(r){var i=e.card.getComponent(r);i&&"table"===i.name&&(t.preventDefault(),t.stopPropagation())}else t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation(),n[0]&&Ju.call(e,n)}})),this.command.add("link",{sideEffect:!0,execute:function(){var t=e.change.getRange();if(t.collapsed){var n=e.lang.link,r=Object(a.a)("<a>".concat(n.linkText,"</a>"));return e.change.insertInline(r),void(r.length&&Ju.call(e,r,"edit",(function(){e.history.undo()}),!0))}e.change.splitMark(),a.b.getActiveMarks(e.change.getRange()).forEach((function(e){var t=e[0];if(t.style.color&&(t.style.color="","SPAN"===t.nodeName)){""===t.style.cssText&&t.removeAttribute("style");var n=e.attr();0===Object.keys(n).length&&a.b.unwrapNode(t)}})),e.change.unwrapInline("<a />"),e.change.wrapInline('<a href="" target="_blank" class="lake-link-marker" />'),a.l.shrinkRange(t),e.change.select(t);var i=Object(a.a)(t.commonAncestorContainer);if("a"!==i.name&&((i=i.find(".lake-link-marker"))&&0!==i.length||(i=Object(a.a)(t.commonAncestorContainer).closest("a"))),i.length)return i.removeClass("lake-link-marker"),Ju.call(e,i,"edit",(function(){e.history.undo()}),!0),i}}),this.hotkey.set("mod+k","link"),this.on("paste:each",(function(e){"a"===e.name&&(Ku(e.attr("href")||"")?e.attr("target","_blank"):e.removeAttr("target"))}))}};vt(".lake-link-card-editor {\n  position: fixed;\n  z-index: 222;\n  top: -99999px;\n  left: -99999px;\n}\n");var td={"zh-cn":{link:"链接",linkAddress:"链接地址",confirm:"确定",pleaseInputLink:"请输入链接",pleaseEnterCorrectLink:"请输入正确的链接"},en:{link:"Link",linkAddress:"Link address",confirm:"Confirm",pleaseInputLink:"Please input link address",pleaseEnterCorrectLink:"Please enter the correct link"}},nd=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;o()(this,n),r=t.call(this,e),y()(u()(r),"state",{invalidLink:!1}),y()(u()(r),"nativeEvents",[]);var a=r.props.lang;return r.locale=td[a],r.validator=new _c(window.location),r.containerRef=C.a.createRef(),r}return l()(n,[{key:"componentDidMount",value:function(){this.bindNativeEvents();var e=this.containerRef.current.getBoundingClientRect(),t=function(e,t,n,r){var a,i,o=window.innerHeight,c=window.innerWidth;return a=e+n<c?e:e<c&&e-n>0?e-n:c-n-10,i=t+r<o?t:t<o&&t-r>0?t-r:o-r-10,{x:Math.max(a,0),y:Math.max(i,0)}}(this.props.x,this.props.y,e.width,e.height),n=t.x,r=t.y;this.containerRef.current.style.left=n+"px",this.containerRef.current.style.top=r+"px"}},{key:"componentWillUnmount",value:function(){this.removeNativeEvents()}},{key:"bindNativeEvents",value:function(){var e=this,t=!1,n=this;this.addNativeEvent(window,"mousedown",(function(n){var r=n.target;e.containerRef.current&&!e.containerRef.current.contains(r)&&(t=!0)}),!0),this.addNativeEvent(window,"mouseup",(function(n){var r=n.target;t&&(t=!1,e.containerRef.current&&!e.containerRef.current.contains(r)&&e.cancel())}),!0),this.addNativeEvent(window,"keydown",(function(t){var n=t.keyCode,r=e.state.invalidLink;13!==n||r||e.confirm(),27===n&&e.cancel()})),this.addNativeEvent(window,"resize",(function(){e.cancel()}),!0),this.addNativeEvent(window,"scroll",(function(t){t.target!==n.linkInputDom.input&&e.cancel()}),!0)}},{key:"addNativeEvent",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.addEventListener(t,n,r),this.nativeEvents.push({dom:e,name:t,callback:n,useCapture:r})}},{key:"removeNativeEvents",value:function(){this.nativeEvents.forEach((function(e){var t=e.dom,n=e.name,r=e.callback,a=e.useCapture;t.removeEventListener(n,r,a)})),this.nativeEvents=[]}},{key:"confirm",value:function(){var e=this.props.onConfirm,t=this.state.invalidLink,n=this.link;t||e({text:this.locale.link,link:Zu(n)})}},{key:"cancel",value:function(){var e=this.props,t=e.onCancel,n=e.target;t({link:n&&n[0].getAttribute("href")})}},{key:"isInvalidLink",value:function(){return!1}},{key:"render",value:function(){var e=this,t=this.state.invalidLink,n=this.locale;return C.a.createElement("div",{ref:this.containerRef,className:"lake-link-editor lake-link-card-editor lake-link-editor-edit"},C.a.createElement("p",null,n.link),C.a.createElement("p",null,C.a.createElement(z.a,{className:"lake-link-link-input",ref:function(t){t&&t.focus(),e.linkInputDom=t},placeholder:n.linkAddress,onChange:function(t){e.link=t.target.value,e.setState({invalidLink:e.isInvalidLink(e.link)})}})),t&&""!==this.link?C.a.createElement("p",{className:"lake-link-invalid-link"},n.pleaseEnterCorrectLink):"",C.a.createElement("p",null,C.a.createElement(B.a,{className:"lake-link-confirm-button",onClick:function(){e.confirm()},disabled:!this.link||t},n.confirm)))}}]),n}(C.a.Component);y()(nd,"propTypes",{lang:R.a.string,onConfirm:R.a.func,onCancel:R.a.func,x:R.a.number.isRequired,y:R.a.number.isRequired}),y()(nd,"defaultProps",{lang:"zh-cn",onConfirm:function(){},onCancel:function(){}});var rd={initialize:function(){var e=this,t=document.createElement("div");t.className="lake-ui-link-card-dialog-container",document.body.appendChild(t);var n=!1;this.command.add("linkCard",{queryState:function(){return n},execute:function(){n=!0;var r=e.change.getRange();if(r){var i=a.l.createBookmark(r);if(i&&i.focus){var o=i.focus.getBoundingClientRect();a.l.moveToBookmark(i),O.a.unmountComponentAtNode(t),O.a.render(C.a.createElement(nd,{lang:e.options.lang,x:o.x,y:o.y,onCancel:function(){n=!1,O.a.unmountComponentAtNode(t)},onConfirm:function(r){var a=r.text,i=r.link;n=!1,O.a.unmountComponentAtNode(t),e.change.insertCard("bookmarklink",{src:i,text:a,margin:!0})}}),t)}}}})}};function ad(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function id(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ad(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ad(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var od={initialize:function(){var e=this;this.command.add("thirdparty",{sideEffect:!0,execute:function(t){var n=e.change.insertCard("thirdparty",id(id({},t||{}),{},{margin:!0}));e.card.getComponent(n).focusInput()}})}};vt(".lake-card-calendar {\n  background: #fafafa;\n  border: 1px solid #fafafa;\n  border-radius: 4px;\n  padding: 20px 16px 0 16px;\n  user-select: none;\n  cursor: default;\n  overflow-x: hidden;\n  overflow-y: auto;\n  /* ---- header ---- */\n  /* ---- body ---- */\n}\n.lake-card-calendar button {\n  outline: none;\n}\n.lake-card-calendar .error-tip {\n  text-align: center;\n  color: red;\n}\n.lake-card-calendar-header {\n  position: relative;\n  margin-bottom: 20px;\n  z-index: 1;\n}\n.lake-card-calendar .lake-card-calendar-today-btn {\n  position: absolute;\n  top: 0;\n  right: 0;\n}\n.lake-card-calendar .lake-card-calendar-today-btn:focus {\n  color: #595959;\n  border-color: #d9d9d9 !important;\n}\n.lake-card-calendar-month-selector {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  line-height: 32px;\n  font-size: 16px;\n  color: #000;\n}\n.lake-card-calendar-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  z-index: 3;\n  display: none;\n}\n.lake-card-calendar-month-prev-btn,\n.lake-card-calendar-month-next-btn {\n  border: none;\n  background: none;\n  outline: none;\n  cursor: pointer;\n  padding: 0;\n  margin: 0 20px;\n  font-size: 12px;\n  color: #8c8c8c;\n}\n.lake-card-calendar-month-prev-btn:HOVER,\n.lake-card-calendar-month-next-btn:HOVER {\n  color: #000;\n}\n.lake-card-calendar-body {\n  position: relative;\n  padding-bottom: 20px;\n  z-index: 1;\n}\n.lake-card-calendar-week-names {\n  display: flex;\n  line-height: 20px;\n  color: #8c8c8c;\n}\n.lake-card-calendar-week-name {\n  flex: 1;\n  font-size: 12px;\n}\n");var cd=[{name:{zh:"蓝色",en:"blue"},line:"#69ABE4",border:"#CFEAFC",background:"#EBF7FF"},{name:{zh:"玫红色",en:"rose red"},line:"#E482D4",border:"#FCE1F6",background:"#FCF2FA"},{name:{zh:"绿色",en:"green"},line:"#77C386",border:"#D1E6D4",background:"#F0FAF1"},{name:{zh:"红色",en:"red"},line:"#E48884",border:"#FBDFDB",background:"#FCF4F2"},{name:{zh:"紫色",en:"purple"},line:"#9E8BE1",border:"#DED6F5",background:"#F8F5FF"},{name:{zh:"黄色",en:"yellow"},line:"#DFAC5D",border:"#F7E2B7",background:"#FFF7E6"}];function ld(e){return Number.parseInt(e.format("YYYYMMDD"))}function sd(e){return st()("".concat(e," 01:01:01+08:00"),"YYYYMMDD HH:mm:ss")}vt(".lake-card-calendar-cell-box-wrap {\n  position: relative;\n  top: 0;\n  left: 0;\n  margin-top: 5px;\n}\n.lake-card-calendar-cell-box {\n  position: relative;\n  top: 0;\n  left: 0;\n  background: #d9d9d9;\n  overflow: hidden;\n}\n.lake-card-calendar-cell-row {\n  position: relative;\n  top: 0;\n  left: 0;\n}\n.lake-card-calendar-cell-row:last-child .lake-card-calendar-cell-row-bg {\n  bottom: 0;\n}\n.lake-card-calendar-cell-row:last-child .lake-card-calendar-cell {\n  margin-bottom: 1px;\n}\n.lake-card-calendar-cell-row-inner {\n  display: flex;\n  flex-wrap: nowrap;\n  position: relative;\n  z-index: 2;\n}\n.lake-card-calendar-cell-row-bg {\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: -1px;\n  z-index: 1;\n  border: 1px solid #25b864;\n  display: none;\n}\n.lake-card-calendar-cell {\n  color: #595959;\n  min-height: 84px;\n  padding: 4px 0;\n  background: #fff;\n  margin-top: 1px;\n  margin-left: 1px;\n  display: flex;\n  flex-direction: column;\n}\n.lake-card-calendar-cell:HOVER .lake-card-calendar-add-schedule-btn {\n  display: flex;\n}\n.lake-card-calendar-weekend-cell {\n  background: #fafafa;\n}\n.lake-card-calendar-cell-body {\n  flex: 1;\n}\n.lake-card-calendar-today-cell .lake-card-calendar-day-label .lake-card-calendar-day-label-text {\n  display: inline-block;\n  text-align: center;\n  width: 18px;\n  height: 18px;\n  border-radius: 50%;\n  color: #fff;\n  background: #69ABE4;\n}\n.lake-card-calendar-other-month {\n  color: #bfbfbf;\n}\n.lake-card-calendar-day-label {\n  text-align: right;\n  font-size: 12px;\n  line-height: 18px;\n  height: 18px;\n  margin: 0 4px;\n  position: relative;\n}\n.lake-card-calendar-add-schedule-btn {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 1;\n  width: 16px;\n  height: 16px;\n  justify-content: center;\n  align-items: center;\n  display: none;\n  padding: 0;\n  border: 1px solid #d9d9d9;\n  border-radius: 2px;\n  background: #fff;\n  cursor: pointer;\n  color: #595959;\n}\n.lake-card-calendar-add-schedule-btn span {\n  transform-origin: center center;\n  transform: scale(0.7, 0.7);\n}\n");var ud=function(){function e(t,n,r,i){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:i;o()(this,e),y()(this,"_id",null),y()(this,"_start",null),y()(this,"_end",null),y()(this,"_colorIndex",-1),y()(this,"_title",null),y()(this,"_desc",null),this._id=a.n.randomId(),this._title=t,this._desc=n,this._colorIndex=r,this._start=i,this._end=c}return l()(e,[{key:"getID",value:function(){return this._id}},{key:"getStart",value:function(){return this._start}},{key:"getStartMoment",value:function(){return sd(this._start)}},{key:"getEnd",value:function(){return this._end}},{key:"getEndMoment",value:function(){return sd(this._end)}},{key:"getDaysCount",value:function(){return this._start===this._end?1:this.getEndMoment().diff(this.getStartMoment(),"days")+1}},{key:"getTitle",value:function(){return this._title}},{key:"getDesc",value:function(){return this._desc}},{key:"getColorIndex",value:function(){return this._colorIndex}},{key:"toJSON",value:function(){return{id:this._id,start:this._start,end:this._end,colorIndex:this._colorIndex,title:this._title,desc:this._desc}}}],[{key:"recover",value:function(t){var n=t.id,r=t.start,a=t.end,i=t.colorIndex,o=new e(t.title,t.desc,i,r,a);return o._id=n,o}}]),e}();vt(".lake-card-calendar-schedule {\n  height: 24px;\n  border: 1px solid transparent;\n  display: flex;\n  align-items: center;\n  margin: 6px 0 6px -1px;\n  cursor: pointer;\n  position: relative;\n  top: 0;\n  left: 0;\n  z-index: 1;\n}\n.lake-card-calendar-schedule.empty-title .lake-card-calendar-schedule-title-preview {\n  color: #bfbfbf;\n}\n.lake-card-calendar-schedule:before {\n  content: '';\n  display: block;\n  width: 6px;\n  height: 6px;\n  border: 3px solid transparent;\n  margin-right: 5px;\n}\n.lake-card-calendar-schedule:after {\n  content: '';\n  display: block;\n  width: 6px;\n  height: 6px;\n  border: 3px solid transparent;\n  margin-left: 5px;\n}\n.lake-card-calendar-schedule.active:before {\n  border-left-color: #fff;\n}\n.lake-card-calendar-schedule.active:after {\n  border-right-color: #fff;\n}\n.lake-card-calendar-schedule.active .lake-card-calendar-schedule-title-preview {\n  color: #fff;\n}\n.lake-card-calendar-schedule.active .lake-card-calendar-schedule-line {\n  background: #fff;\n}\n.lake-card-calendar-schedule.lake-card-calendar-schedule-fake-view {\n  z-index: 0;\n}\n.lake-card-calendar-schedule.start-point {\n  border-top-left-radius: 2px;\n  border-bottom-left-radius: 2px;\n  margin-left: 4px;\n}\n.lake-card-calendar-schedule.start-point:before {\n  display: none;\n}\n.lake-card-calendar-schedule.start-point .lake-card-calendar-schedule-line {\n  display: block;\n}\n.lake-card-calendar-schedule-panel-overlay .ant-popover-inner-content {\n  padding: 0;\n}\n.lake-card-calendar-schedule.end-point {\n  border-top-right-radius: 2px;\n  border-bottom-right-radius: 2px;\n}\n.lake-card-calendar-schedule.end-point:after {\n  display: none;\n}\n.lake-card-calendar-schedule.end-point .lake-card-calendar-schedule-control {\n  display: block;\n}\n.lake-card-calendar-schedule-snapshot {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 99999;\n  pointer-events: none;\n  opacity: 0.7;\n}\n.lake-card-calendar-schedule-snapshot .lake-card-calendar-schedule {\n  margin: 0;\n  opacity: 1!important;\n}\n.lake-card-calendar-schedule-cursor {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 14.28%;\n  height: 2px;\n  z-index: 4;\n  display: none;\n}\n.lake-card-calendar-schedule-line {\n  width: 2px;\n  height: 12px;\n  border-radius: 1px;\n  margin: 0 5px;\n  display: none;\n}\n.lake-card-calendar-schedule-title-preview {\n  color: #595959;\n  font-size: 12px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  flex: 1;\n}\n.lake-card-calendar-schedule-control {\n  width: 10px;\n  align-self: stretch;\n  cursor: ew-resize;\n  display: none;\n}\n.lake-card-calendar-schedule-index0 {\n  border-color: #CFEAFC;\n  background: #EBF7FF;\n}\n.lake-card-calendar-schedule-index0:before {\n  border-left-color: #69ABE4;\n}\n.lake-card-calendar-schedule-index0:after {\n  border-right-color: #69ABE4;\n}\n.lake-card-calendar-schedule-index0 .lake-card-calendar-schedule-line {\n  background: #69ABE4;\n}\n.lake-card-calendar-schedule-index0.active {\n  border-color: transparent;\n  background: #69ABE4;\n}\n.lake-card-calendar-schedule-index1 {\n  border-color: #FCE1F6;\n  background: #FCF2FA;\n}\n.lake-card-calendar-schedule-index1:before {\n  border-left-color: #E482D4;\n}\n.lake-card-calendar-schedule-index1:after {\n  border-right-color: #E482D4;\n}\n.lake-card-calendar-schedule-index1 .lake-card-calendar-schedule-line {\n  background: #E482D4;\n}\n.lake-card-calendar-schedule-index1.active {\n  border-color: transparent;\n  background: #E482D4;\n}\n.lake-card-calendar-schedule-index2 {\n  border-color: #D1E6D4;\n  background: #F0FAF1;\n}\n.lake-card-calendar-schedule-index2:before {\n  border-left-color: #77C386;\n}\n.lake-card-calendar-schedule-index2:after {\n  border-right-color: #77C386;\n}\n.lake-card-calendar-schedule-index2 .lake-card-calendar-schedule-line {\n  background: #77C386;\n}\n.lake-card-calendar-schedule-index2.active {\n  border-color: transparent;\n  background: #77C386;\n}\n.lake-card-calendar-schedule-index3 {\n  border-color: #FBDFDB;\n  background: #FCF4F2;\n}\n.lake-card-calendar-schedule-index3:before {\n  border-left-color: #E48884;\n}\n.lake-card-calendar-schedule-index3:after {\n  border-right-color: #E48884;\n}\n.lake-card-calendar-schedule-index3 .lake-card-calendar-schedule-line {\n  background: #E48884;\n}\n.lake-card-calendar-schedule-index3.active {\n  border-color: transparent;\n  background: #E48884;\n}\n.lake-card-calendar-schedule-index4 {\n  border-color: #DED6F5;\n  background: #F8F5FF;\n}\n.lake-card-calendar-schedule-index4:before {\n  border-left-color: #9E8BE1;\n}\n.lake-card-calendar-schedule-index4:after {\n  border-right-color: #9E8BE1;\n}\n.lake-card-calendar-schedule-index4 .lake-card-calendar-schedule-line {\n  background: #9E8BE1;\n}\n.lake-card-calendar-schedule-index4.active {\n  border-color: transparent;\n  background: #9E8BE1;\n}\n.lake-card-calendar-schedule-index5 {\n  border-color: #F7E2B7;\n  background: #FFF7E6;\n}\n.lake-card-calendar-schedule-index5:before {\n  border-left-color: #DFAC5D;\n}\n.lake-card-calendar-schedule-index5:after {\n  border-right-color: #DFAC5D;\n}\n.lake-card-calendar-schedule-index5 .lake-card-calendar-schedule-line {\n  background: #DFAC5D;\n}\n.lake-card-calendar-schedule-index5.active {\n  border-color: transparent;\n  background: #DFAC5D;\n}\n"),vt(".le-schedule-panel {\n  width: 320px;\n  padding: 24px 16px;\n}\n.le-schedule-panel-item {\n  display: flex;\n  align-items: flex-start;\n  margin-bottom: 6px;\n}\n.le-schedule-panel-item:last-child {\n  margin-bottom: 0;\n}\n.le-schedule-panel-item.align-center {\n  align-items: center;\n}\n.le-schedule-panel-item.align-center .le-schedule-panel-item-icon {\n  margin-top: unset;\n}\n.le-schedule-panel-item-content .ant-picker {\n  border: 0;\n  box-shadow: none;\n}\n.le-schedule-panel-item-content .ant-picker .ant-picker-range .ant-picker-active-bar {\n  margin-left: 0;\n}\n.le-schedule-panel-item-icon {\n  width: 16px;\n  height: 16px;\n  margin-right: 16px;\n  margin-top: 2px;\n  font-size: 0;\n}\n.le-schedule-panel-item-icon .le-schedule-panel-color-box {\n  width: 16px;\n  height: 16px;\n  margin-top: 2px;\n}\n.le-schedule-panel-item-separator {\n  border-top: 1px solid #f5f5f5;\n  margin: 13px 0 13px 32px;\n}\n.le-schedule-panel-title-textarea {\n  width: 256px;\n  line-height: 26px;\n  font-size: 18px;\n  max-height: 78px;\n}\n.le-schedule-panel-title-textarea div {\n  font-weight: 400;\n}\n.le-schedule-panel-title-textarea textarea {\n  font-weight: 400;\n}\n.le-schedule-panel-color-select.ant-select-single.ant-select-sm:not(.ant-select-customize-input) .ant-select-selector {\n  width: 40px;\n  height: 18px;\n}\n.le-schedule-panel-color-select.ant-select-single.ant-select-sm:not(.ant-select-customize-input) .ant-select-selector .le-schedule-panel-color-select-option {\n  height: 16px;\n}\n.le-schedule-panel-color-select.ant-select-single.ant-select-sm:not(.ant-select-customize-input) .ant-select-selector .le-schedule-panel-color-select-icon {\n  display: none;\n}\n.le-schedule-panel-color-select.ant-select-single.ant-select-sm:not(.ant-select-customize-input) .ant-select-selector .le-schedule-panel-color-option-text {\n  display: none;\n}\n.le-schedule-panel-color-select.ant-select-single.ant-select-sm:not(.ant-select-customize-input) .ant-select-arrow {\n  right: 5px!important;\n  margin-top: -5px !important;\n}\n.le-schedule-panel-color-select.ant-select-single.ant-select-sm:not(.ant-select-customize-input) .ant-select-arrow-icon {\n  font-size: 10px;\n  height: 10px;\n}\n.le-schedule-panel-color-select-wrap .le-schedule-panel-color-box {\n  margin-right: 8px;\n}\n.le-schedule-panel-color-select-dropdown .ant-select-item-option-selected .lake-svg-icon-check-success {\n  display: block;\n}\n.le-schedule-panel-color-select-option {\n  display: flex;\n  height: 30px;\n  align-items: center;\n  font-weight: normal;\n}\n.le-schedule-panel-color-select-option .lake-svg-icon-check-success {\n  display: none;\n}\n.le-schedule-panel-color-select-option .le-schedule-panel-color-option-text {\n  margin-right: 22px;\n}\n.le-schedule-panel-color-select-icon {\n  width: 22px;\n  height: 22px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-right: 3px;\n}\n.le-schedule-panel-desc-textarea {\n  width: 256px;\n  font-size: 12px;\n  line-height: 20px;\n  max-height: 120px;\n}\n.le-schedule-panel-color-box {\n  width: 16px;\n  height: 16px;\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n}\n.le-schedule-panel-color-point {\n  display: block;\n  width: 8px;\n  height: 8px;\n}\n.le-schedule-panel-date-picker .ant-calendar-input-wrap {\n  display: none;\n}\n.le-schedule-panel-date-picker .ant-calendar-range-middle {\n  display: none;\n}\n.le-schedule-panel-date-picker .ant-calendar-range-picker-input {\n  width: 90px;\n  text-align: left;\n  cursor: pointer;\n}\n.le-schedule-panel-date-picker .ant-calendar-range-picker-separator {\n  margin: 0 7px 0 5px;\n}\n.le-schedule-panel-date-picker .ant-calendar-picker-input {\n  border: none!important;\n  box-shadow: none!important;\n  padding: 0;\n  cursor: pointer;\n}\n.le-schedule-panel-date-text {\n  line-height: 20px;\n  font-size: 12px;\n  cursor: default;\n}\n.le-schedule-panel .ant-select-dropdown-menu > li {\n  margin: 0;\n}\n.le-schedule-panel .le-date-separator {\n  padding: 0 7px;\n}\n");var dd=j.a.Option,fd=function(e){f()(n,_.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),r=t.call(this,e),y()(u()(r),"state",{title:"",color:0,startDate:null,endDate:null,desc:""}),y()(u()(r),"_changed",!1),y()(u()(r),"rootNodeRef",null),y()(u()(r),"_handleTitleChange",(function(e){r.setState({title:e.target.value}),r._changed=!0})),y()(u()(r),"_handleDescChange",(function(e){r.setState({desc:e.target.value}),r._changed=!0})),y()(u()(r),"_handleColorChange",(function(e){r.setState({color:e}),r._changed=!0})),y()(u()(r),"_handleDateChange",(function(e){r.setState({startDate:e[0],endDate:e[1]}),r._changed=!0})),r.rootNodeRef=C.a.createRef(),r.state={title:e.title,color:e.color,startDate:e.startDate||st()(),endDate:e.endDate||st()(),desc:e.desc},r}return l()(n,[{key:"hasChange",value:function(){return this._changed}},{key:"resetChange",value:function(){this._changed=!1}},{key:"getValue",value:function(){var e=this.state;return{title:e.title,color:e.color,startDate:e.startDate,endDate:e.endDate,desc:e.desc}}},{key:"render",value:function(){var e=this.props,t=(e.title,e.color,e.startDate,e.endDate,e.locale),n=(e.desc,e.onRequestClose),r=(e.autoFocus,e.isReadonly),a=dt()(e,["title","color","startDate","endDate","locale","desc","onRequestClose","autoFocus","isReadonly"]);return this.selectCount++,C.a.createElement("div",oe()({ref:this.rootNodeRef,className:"le-schedule-panel"},a),C.a.createElement("div",{className:"le-schedule-panel-item"},C.a.createElement("div",{className:"le-schedule-panel-item-icon"},this._renderTitleIcon()),C.a.createElement("div",{className:"le-schedule-panel-item-content"},C.a.createElement(bs,{className:"le-schedule-panel-title-textarea",placeholder:t.calendar.tip.title,isReadonly:r,autoFocus:this.props.autoFocus,onChange:this._handleTitleChange,onKeyDownEnter:n,value:this.state.title}))),this._renderColor(),C.a.createElement("div",{className:"le-schedule-panel-item-separator"}),C.a.createElement("div",{className:"le-schedule-panel-item align-center"},C.a.createElement("div",{className:"le-schedule-panel-item-icon"},C.a.createElement("span",{className:"lake-svg-icon lake-svg-icon-insert-calendar"})),C.a.createElement("div",{className:"le-schedule-panel-item-content"},this._renderDate())),C.a.createElement("div",{className:"le-schedule-panel-item"},C.a.createElement("div",{className:"le-schedule-panel-item-icon"},C.a.createElement("span",{className:"lake-svg-icon lake-svg-icon-desc"})),C.a.createElement("div",{className:"le-schedule-panel-item-content"},C.a.createElement(bs,{className:"le-schedule-panel-desc-textarea",placeholder:t.calendar.tip.desc,isReadonly:r,onKeyDownEnter:n,onChange:this._handleDescChange,autoLink:!0,value:this.state.desc}))))}},{key:"_renderTitleIcon",value:function(){return this.props.isReadonly?C.a.createElement("div",{className:"le-schedule-panel-color-box"},C.a.createElement("span",{className:"le-schedule-panel-color-point",style:{background:cd[this.state.color].line}})):null}},{key:"_renderColor",value:function(){if(this.props.isReadonly)return null;var e=this.props.locale.calendar.lang;return C.a.createElement("div",{className:"le-schedule-panel-item"},C.a.createElement("div",{className:"le-schedule-panel-item-icon"}),C.a.createElement("div",{className:"le-schedule-panel-item-content le-schedule-panel-color-select-wrap"},C.a.createElement(j.a,{className:"le-schedule-panel-color-select",value:this.state.color,getPopupContainer:function(e){return e.parentNode},onChange:this._handleColorChange,defaultActiveFirstOption:!1,dropdownClassName:"le-schedule-panel-color-select-dropdown",dropdownMatchSelectWidth:!1,size:"small"},cd.map((function(t,n){var r=t.line,a=t.name;return C.a.createElement(dd,{key:n,value:n},C.a.createElement("div",{className:"le-schedule-panel-color-select-option"},C.a.createElement("div",{className:"le-schedule-panel-color-select-icon"},C.a.createElement("span",{className:"lake-svg-icon lake-svg-icon-check-success"})),C.a.createElement("div",{className:"le-schedule-panel-color-box"},C.a.createElement("span",{className:"le-schedule-panel-color-point",style:{background:r}})),C.a.createElement("div",{className:"le-schedule-panel-color-option-text"},a[e])))})))))}},{key:"_renderDate",value:function(){return this.props.isReadonly?C.a.createElement("div",{className:"le-schedule-panel-date-text"},this.state.startDate.format("YYYY-MM-DD"),C.a.createElement("span",{className:"le-date-separator"},"~"),this.state.endDate.format("YYYY-MM-DD")):C.a.createElement(F.a.RangePicker,{allowClear:!1,getPopupContainer:function(e){return e},size:"small",onChange:this._handleDateChange,suffixIcon:C.a.createElement("span",null),className:"le-schedule-panel-date-picker",value:[this.state.startDate,this.state.endDate],format:"YYYY-MM-DD"})}}]),n}();function pd(e,t,n){if(0===t.length)return null;for(var r=n.clientX,a=n.clientY,i=e.getBoundingClientRect(),o=a<i.top,c=a>i.bottom,l=-1,s=-1,u=0;u<7;u++){var d=t[u].getBoundingClientRect(),f=d.left,p=d.right;if(r>=f&&r<=p){l=u;break}}for(var h=-1,m=-1,g=0,v=t.length/7;g<v;g++){var y=t[7*g].getBoundingClientRect(),b=y.top,k=y.bottom;if(!(k<=i.top||b>=i.bottom)&&(-1===h&&(h=g),m=g,a>=b&&a<=k)){s=g;break}}var w=t[0].getBoundingClientRect();return-1===l&&(l=r<w.left?0:6),-1===s&&(s=a<t[7*h].getBoundingClientRect().top?h:m),{overflowTop:o,overflowBottom:c,node:t[7*s+l]}}function hd(e,t,n,r,i){var o=Object(a.a)(".".concat(n),t),c=[],l=Object(a.a)(r).closest(".lake-card-calendar-cell-row")[0].firstChild,s=Object(a.a)(i).closest(".lake-card-calendar-cell-row")[0].firstChild;if(!l||!s)return c;o.css("display","");for(var u=t.getBoundingClientRect(),d=0,f=o.length;d<f;d++){var p=o[d];if(p===s){c.push(p);break}(p===l||c.length)&&c.push(p)}for(var h=r.getBoundingClientRect(),m=i.getBoundingClientRect(),g=0,v=c.length;g<v;g++){var y,b=c[g],k=0===g,w=g===v-1,x=0;k&&(x=h.left-u.left-1),y=w?k?m.right-h.left+2:m.right-u.left+1:k?u.right-h.left+1:u.width,Object(a.a)(b).css({left:x+"px",width:y+"px",display:"block"})}return c}y()(fd,"propTypes",{title:R.a.string,color:R.a.number,startDate:R.a.instanceOf(st.a),endDate:R.a.instanceOf(st.a),desc:R.a.string,locale:R.a.object.isRequired,isReadonly:R.a.bool.isRequired,autoFocus:R.a.bool,onRequestClose:R.a.func}),y()(fd,"defaultProps",{onRequestClose:function(){}});var md=function(){function e(t,n,r){o()(this,e),y()(this,"_scrollNode",null),y()(this,"_scrollSpace",0),y()(this,"_isRunning",!1),y()(this,"_stopCallback",null),y()(this,"isScrollToTop",!1),this._scrollNode=t,this.isScrollToTop=n,this._scrollSpace=r;var a=t.scrollTop;n&&0===a||!n&&a===r?this._stopCallback&&this._stopCallback():this._start()}return l()(e,[{key:"stop",value:function(){this._isRunning&&(this._isRunning=!1,this._stopCallback&&this._stopCallback())}},{key:"isStop",value:function(){return!this._isRunning}},{key:"onStop",value:function(e){this._stopCallback=e}},{key:"_start",value:function(){var e=this;if(!this._isRunning){this._isRunning=!0;var t=this._calcAnimationDuration();if(0!==t){if(t<100||!window.requestAnimationFrame)return this._scrollNode.scrollTop=this.isScrollToTop?0:this._scrollSpace,void this.stop();var n,r=this._scrollNode,a=this.isScrollToTop,i=r.scrollTop,o=a?i:this._scrollSpace-i,c=a?0:this._scrollSpace;requestAnimationFrame((function l(s){if(e._isRunning){n||(n=s);var u=s-n;if(u>=t)return r.scrollTop=c,void e.stop();r.scrollTop=a?i-u/t*o:i+u/t*o,requestAnimationFrame(l)}}))}else this.stop()}}},{key:"_calcAnimationDuration",value:function(){var e=this._scrollNode.scrollTop,t=this._scrollSpace,n=this.isScrollToTop?e:t-e;return n<=0?0:Math.floor(n/t*1e3)}}]),e}();var gd=function(e){f()(n,_.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),r=t.call(this,e),y()(u()(r),"rootNodeRef",null),y()(u()(r),"panelRef",null),y()(u()(r),"panelOpenCounter",1),y()(u()(r),"lastClickTime",0),y()(u()(r),"lastShowTime",0),y()(u()(r),"lastMouseDownTime",0),y()(u()(r),"scrollProcessor",null),y()(u()(r),"_closePanel",(function(){r.panelRef.current.hasChange()&&(r.panelRef.current.resetChange(),r.props.onChange(r.panelRef.current.getValue()))})),y()(u()(r),"_handleControlMouseDown",(function(e){e.preventDefault(),e.stopPropagation(),r.lastMouseDownTime=0;var t=r.props.schedule,n=r.props.boxRef.current,i=r.props.calendarRootNodeRef.current,o=Object(a.a)(n).find('[data-id="'.concat(t.getID(),'"]'))[0],c=Object(a.a)(o).closest(".lake-card-calendar-cell")[0],l=!1;if(n&&c&&i){var s=[],u=null,d=null,f=0,p=nt()((function(e){e.stopPropagation(),e.preventDefault(),l||(l=!0,f=r._getScrollSpace(),u=Object(a.a)(".lake-card-calendar-cell",n),r.props.onScheduleClick(r.props.schedule));var t=pd(i,u,e);if(t){var o,p,h=t.node;if(f>0&&(t.overflowTop||t.overflowBottom)?r.startScroll(t.overflowTop,f):r.scrollProcessor&&r.scrollProcessor.stop(),!h||(o=c)!==(p=h)&&0==(o.compareDocumentPosition(p)&Node.DOCUMENT_POSITION_FOLLOWING))return s.length&&Object(a.a)(s).css("display",""),s=[],void(d=null);h!==d&&(Object(a.a)(s).css("display",""),cd[r.props.schedule.getColorIndex()].line,s=hd(0,n,"lake-card-calendar-cell-row-bg",c,d=h))}}),100);document.addEventListener("mousemove",p,!1),document.addEventListener("mouseup",(function e(n){if(n.stopPropagation(),n.preventDefault(),r.scrollProcessor&&r.scrollProcessor.stop(),document.removeEventListener("mousemove",p,!1),document.removeEventListener("mouseup",e,!1),d){Object(a.a)(s).css("display","");var i=st()(t.getStartMoment()),o=st()(d.getAttribute("data-moment"));r.props.onChange({title:t.getTitle(),color:t.getColorIndex(),desc:t.getDesc(),startDate:i,endDate:o}),r.panelOpenCounter++}}),!1)}})),y()(u()(r),"_handleScheduleMouseDown",(function(e){e.preventDefault(),e.stopPropagation(),r.lastMouseDownTime=Date.now();var t=e.clientX,n=e.clientY,i=r.props.boxRef.current,o=r.props.calendarRootNodeRef.current;if(i&&o){var c=r.props.schedule,l=null,s=null,u=null,d=0,f=null,p=null,h=null,m=0,g=nt()((function(e){e.stopPropagation(),e.preventDefault(),l||(r.props.onScheduleClick(r.props.schedule),l=r._createSnapshot(),i.parentNode.appendChild(l),(u=document.createElement("div")).className="lake-card-calendar-schedule-cursor",u.style.width=Math.floor(i.getBoundingClientRect().width/7)-8+"px",i.parentNode.appendChild(u),(p=Object(a.a)('.lake-card-calendar-schedule[data-id="'.concat(r.props.schedule.getID(),'"]'),r.props.boxRef.current)).css("opacity","0"),h=Object(a.a)(".lake-card-calendar-cell",i),m=r._getScrollSpace());var c=e.clientX-t,g=e.clientY-n;l.style.left=c+"px",l.style.top=g+"px";var v=pd(o,h,e);if(v){var y=v.node;if(m>0&&(v.overflowTop||v.overflowBottom)?r.startScroll(v.overflowTop,m):r.scrollProcessor&&r.scrollProcessor.stop(),y){var b=cd[r.props.schedule.getColorIndex()].line;d=function(e,t,n,r,i,o){var c=o.clientY,l=[];if(Object(a.a)(".lake-card-calendar-schedule",n).each((function(e){Object(a.a)(e).hasClass("lake-card-calendar-schedule-fake-view")||l.push(e)})),r.style.display="none",0===l.length)return 0;for(var s=t.getBoundingClientRect(),u=0,d=l.length;u<d;u++){var f=l[u].getBoundingClientRect();if(c<=f.bottom)return l[u]===e||l[u-1]===e?-1:(Object(a.a)(r).css({top:f.top-s.top-2-2+"px",left:f.left-s.left+"px",display:"block",background:i}),u)}if(l[l.length-1]===e)return-1;var p=l[l.length-1].getBoundingClientRect();return Object(a.a)(r).css({top:p.bottom-s.top+2+"px",left:p.left-s.left+"px",display:"block",background:i}),l.length}(r.rootNodeRef.current,i,y,u,b,e),y!==s&&(Object(a.a)(f).css("display",""),f=hd(0,i,"lake-card-calendar-cell-row-bg",s=y,s))}}}),16);document.addEventListener("mousemove",g,!1),document.addEventListener("mouseup",(function e(t){if(t.stopPropagation(),t.preventDefault(),r.scrollProcessor&&r.scrollProcessor.stop(),document.removeEventListener("mousemove",g,!1),document.removeEventListener("mouseup",e,!1),s){Object(a.a)(f).css("display",""),p.css("opacity",""),l.parentNode.removeChild(l),u.parentNode.removeChild(u);var n=st()(s.getAttribute("data-moment")),i=n.clone().add(c.getDaysCount()-1,"days");r.props.onChange({title:c.getTitle(),color:c.getColorIndex(),desc:c.getDesc(),startDate:n,endDate:i},-1===d?void 0:d)}}),!1)}})),y()(u()(r),"_handleDocumentMousedown",(function(e){r.isShowPanel()&&Date.now()-r.lastShowTime>300&&(r.panelRef.current.rootNodeRef.current.contains(e.target)||r._hideDetailPanel())})),y()(u()(r),"_handleScheduleClick",(function(e){e.preventDefault(),e.stopPropagation(),!r.props.isReadonly&&Date.now()-r.lastMouseDownTime>300||(r.props.isReadonly?r._showDetailPanel():(r.props.activeID===r.props.schedule.getID()&&r._showDetailPanel(),r.props.onScheduleClick(r.props.schedule),Date.now()-r.lastClickTime<500?(r.lastClickTime=0,r._showDetailPanel()):r.lastClickTime=Date.now()))})),y()(u()(r),"_handleRequestClosePanel",(function(){r._hideDetailPanel()})),r.rootNodeRef=C.a.createRef(),r.panelRef=C.a.createRef(),r}return l()(n,[{key:"componentDidMount",value:function(){this._bindEvent()}},{key:"componentWillUnmount",value:function(){this._unbindEvent()}},{key:"componentDidUpdate",value:function(e){this.props.schedule&&e.panelShowID!==this.props.panelShowID&&e.panelShowID===this.props.schedule.getID()&&this.panelOpenCounter++,e.active!==this.props.active&&(this.props.active?this._bindEvent():this._unbindEvent())}},{key:"_bindEvent",value:function(){this.props.schedule&&document.addEventListener("mousedown",this._handleDocumentMousedown,!0)}},{key:"_unbindEvent",value:function(){document.removeEventListener("mousedown",this._handleDocumentMousedown,!0)}},{key:"render",value:function(){var e="lake-card-calendar-schedule";if(!this.props.schedule)return e+=" lake-card-calendar-schedule-fake-view",C.a.createElement("div",{className:e,ref:this.rootNodeRef});var t=this.props,n=t.schedule,r=t.activeID,i=t.isReadonly,o=t.locale,c=n.getColorIndex();e+=" lake-card-calendar-schedule-index".concat(c),r===n.getID()&&(e+=" active");var l=this._calcPositions(),s={width:l.width+"px"};n.getTitle()||(e+=" empty-title"),l.isStart&&(e+=" start-point"),l.isEnd&&(e+=" end-point");var u=this.props.autoFocusID===n.getID();return C.a.createElement(P.a,{placement:this._getPosition(),visible:this.isShowPanel(),autoAdjustOverflow:!0,overlayClassName:"lake-card-calendar-schedule-panel-overlay",getPopupContainer:function(e){return Object(a.a)(e).closest(".lake-card-calendar")[0]||document.body},content:C.a.createElement(fd,{"data-id":n.getID(),title:n.getTitle(),isReadonly:this.props.isReadonly,locale:o,startDate:n.getStartMoment(),endDate:n.getEndMoment(),color:n.getColorIndex(),desc:n.getDesc(),ref:this.panelRef,key:this.panelOpenCounter,autoFocus:u,onMouseDown:function(e){return e.stopPropagation()},onRequestClose:this._handleRequestClosePanel,onClick:function(e){return e.stopPropagation()}})},C.a.createElement("div",{className:e,onMouseDown:i?null:this._handleScheduleMouseDown,onClick:this._handleScheduleClick,style:s,ref:this.rootNodeRef,"data-id":n.getID()},C.a.createElement("div",{className:"lake-card-calendar-schedule-line"}),C.a.createElement("div",{className:"lake-card-calendar-schedule-title-preview"},n.getTitle()||o.calendar.tip.title),i?null:C.a.createElement("div",{className:"lake-card-calendar-schedule-control",onMouseDown:this._handleControlMouseDown,onClick:function(e){return e.stopPropagation()},onDoubleClick:function(e){return e.stopPropagation()}})))}},{key:"isShowPanel",value:function(){return!!this.props.schedule&&this.props.schedule.getID()===this.props.panelShowID&&this.props.panelShowRowIndex===this.props.rowIndex}},{key:"_showDetailPanel",value:function(){this.lastShowTime=Date.now(),this.props.onRequestTogglePanelShow(!0)}},{key:"_hideDetailPanel",value:function(){this._closePanel(),this.props.onRequestTogglePanelShow(!1)}},{key:"_getPosition",value:function(){var e=this.props,t=e.schedule,n=e.columnIndex,r=e.momentDate,a=ld(r)===t.getStart(),i=r.clone().add(7-n-1,"days"),o=t.getEnd()<=ld(i),c=t.getEnd()===ld(i);return o?c&&a?"leftTop":"rightTop":a?"leftTop":"rightTop"}},{key:"_calcPositions",value:function(){var e=this.props,t=e.schedule,n=e.columnIndex,r=e.cellWidths,a=e.momentDate,i=ld(a)===t.getStart(),o=a.clone().add(7-n-1,"days"),c=t.getEnd()<=ld(o),l=function(e,t,n,r){for(var a=r.getEnd(),i=e[t],o=1,c=7-t;o<c;o++)ld(n.clone().add(o,"days"))<=a&&(i+=e[t+o]+1);return i}(r,n,a,t);return i?l-=4:l+=1,c?l-=4:l+=1,{width:l,isStart:i,isEnd:c}}},{key:"_getScrollSpace",value:function(){var e=this._getCalendarRootNode();return e?e.scrollHeight-e.clientHeight:0}},{key:"startScroll",value:function(e,t){var n=this;if(this.scrollProcessor&&!this.scrollProcessor.isStop()){if(this.scrollProcessor.isScrollToTop===e)return;this.scrollProcessor.stop()}var r=this._getCalendarRootNode();if(r){var a=new md(r,e,t);this.scrollProcessor=a,this.scrollProcessor.onStop((function(){n.scrollProcessor===a&&(n.scrollProcessor=null)}))}}},{key:"_getCalendarRootNode",value:function(){return this.props.boxRef.current?Object(a.a)(this.props.boxRef.current).closest(".lake-card-calendar")[0]:null}},{key:"_createSnapshot",value:function(){var e=this.props.boxRef.current,t=e.getBoundingClientRect(),n=this.props.schedule,r=Object(a.a)(e).find('[data-id="'.concat(n.getID(),'"]')),i=document.createElement("div");i.className="lake-card-calendar-schedule-snapshot";for(var o=0,c=r.length;o<c;o++){var l=r[o].cloneNode(!0),s=r[o].getBoundingClientRect(),u=s.left-t.left,d=s.top-t.top;l.style.transform="translate(".concat(u,"px, ").concat(d,"px)"),i.appendChild(l)}return i}}]),n}();function vd(e,t){var n=[];return Object.keys(t).map((function(e){return Number.parseInt(e,10)})).filter((function(t){return t<e})).sort().forEach((function(r){var a=t[r];a&&0!==a.length&&a.forEach((function(t){t.getEnd()>=e&&n.push(t)}))})),n}function yd(e,t){for(var n=0,r=t.length;n<r;n++)if(void 0===t[n])return t[n]=e,n;return t.push(e),t.length-1}function bd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bd(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}y()(gd,"propTypes",{momentDate:R.a.instanceOf(st.a),schedule:R.a.instanceOf(ud),isReadonly:R.a.bool.isRequired,calendarRootNodeRef:R.a.object,columnIndex:R.a.number.isRequired,locale:R.a.object.isRequired,cellWidths:R.a.arrayOf(R.a.number).isRequired,onChange:R.a.func,boxRef:R.a.object.isRequired,onScheduleClick:R.a.func,activeID:R.a.string,autoFocusID:R.a.string,panelShowID:R.a.string,rowIndex:R.a.number,panelShowRowIndex:R.a.number,onRequestTogglePanelShow:R.a.func,active:R.a.bool}),y()(gd,"defaultProps",{schedule:null,onChange:function(){},onScheduleClick:function(){},onRequestTogglePanelShow:function(){}});var wd=function(e){f()(n,_.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),r=t.call(this,e),y()(u()(r),"state",{cellWidths:[],activeScheduleID:null,panelShowID:null,panelShowRowIndex:-1}),y()(u()(r),"today",null),y()(u()(r),"cellBoxRef",null),y()(u()(r),"schedules",null),y()(u()(r),"lastActiveScheduleDate",null),y()(u()(r),"autoFocusID",null),y()(u()(r),"_lastMouseDownTimestamp",0),y()(u()(r),"_lastClickTimestamp",0),y()(u()(r),"_updateCellWidth",(function(){if(r.cellBoxRef.current){var e=r.cellBoxRef.current.getBoundingClientRect().width-2-6,t=Math.floor(e/7),n=e-5*t;r.setState(kd(kd({},r.state),{},{cellWidths:[Math.floor(n/2),t,t,t,t,t,n-Math.floor(n/2)]}))}})),y()(u()(r),"_handleDocumentKeyDown",(function(e){e.isComposing||(r.state.panelShowID,r.state.activeScheduleID&&("Backspace"===e.code||"Backspace"===e.key||8===e.keyCode||"Delete"===e.code||"Delete"===e.key||46===e.keyCode?(e.preventDefault(),r.state.panelShowID||r._deleteSchedule(r.state.activeScheduleID)):"Escape"!==e.key&&"Escape"!==e.code&&27!==e.keyCode||(e.preventDefault(),r.state.panelShowID&&(r.setState({panelShowID:null,panelShowRowIndex:-1}),r._hideOverlay()))))})),y()(u()(r),"_handleDocumentMouseDown",(function(e){r.state.activeScheduleID&&(Object(a.a)(e.target).closest('[data-id="'.concat(r.state.activeScheduleID,'"]'),(function(e){var t=Object(a.a)(e.parentNode);return t.isRoot()?null:t[0]})).length||Object(a.a)(e.target).hasClass("lake-card-calendar-overlay")||r.setState(kd(kd({},r.state),{},{activeScheduleID:null})))})),y()(u()(r),"_handleScheduleClick",(function(e){r.state.activeScheduleID!==e.getID()&&r.setState(kd(kd({},r.state),{},{activeScheduleID:e.getID()}))})),y()(u()(r),"_handleCellMouseDown",(function(){r._lastMouseDownTimestamp=Date.now()})),r.today=st()("".concat(st()().format("YYYY-MM-DD")," 01:01:01+08:00")),r.cellBoxRef=C.a.createRef(),r}return l()(n,[{key:"render",value:function(){this.lastActiveScheduleDate=null;var e=this._prepare();return C.a.createElement("div",{className:"lake-card-calendar-cell-box-wrap"},C.a.createElement("div",{className:"lake-card-calendar-cell-box",ref:this.cellBoxRef},this._renderCells(e)))}},{key:"componentDidMount",value:function(){this._updateCellWidth(),this._bindEvent(),window.addEventListener("resize",this._updateCellWidth,!1)}},{key:"componentWillUnmount",value:function(){this._unbindEvent(),window.removeEventListener("resize",this._updateCellWidth,!1)}},{key:"componentDidUpdate",value:function(e){e.viewport!==this.props.viewport&&this._updateCellWidth(),e.data.currentDate!==this.props.data.currentDate&&this.state.activeScheduleID&&(this.setState(kd(kd({},this.state),{},{activeScheduleID:null,panelShowID:null,panelShowRowIndex:-1})),this._hideOverlay()),e.active!==this.props.active&&(this.props.active?this._bindEvent():(this._unbindEvent(),this.state.activeScheduleID&&(this.setState(kd(kd({},this.state),{},{panelShowID:null,activeScheduleID:null,panelShowRowIndex:-1})),this._hideOverlay())))}},{key:"_bindEvent",value:function(){this.props.active&&(document.addEventListener("mousedown",this._handleDocumentMouseDown,!1),this.props.isReadonly||document.addEventListener("keydown",this._handleDocumentKeyDown,!1))}},{key:"_unbindEvent",value:function(){document.removeEventListener("mousedown",this._handleDocumentMouseDown,!1),document.removeEventListener("keydown",this._handleDocumentKeyDown,!1)}},{key:"_prepare",value:function(){var e=this.state.cellWidths,t=this.props,n=t.data,r=t.firstIndex,a=n.currentDate,i=n.schedules,o=sd(a),c=o.daysInMonth(),l=Math.abs(o.day()-r),s=o.clone().subtract(l,"days"),u=l+c;u+=u%7==0?7:7-u%7;var d=null;return e&&e.length&&(this.schedules=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return Object.keys(e).forEach((function(n){var r=e[n];r&&(t[n]=r.map(ud.recover))})),t}(i),d=function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=ld(e),i=vd(a,r),o={},c=[],l=0;l<n;l++){var s=e.clone().add(l,"days");c.push({moment:s,dateNumber:ld(s)})}i.forEach((function(e){for(var t=0;t<n;t++){var r=c[t].dateNumber;if(e.getEnd()<r)return;o[r]||(o[r]=[]),t%7==0?o[r].push(e):o[r].push(null)}}));for(var u=function(e){var t=c[e],a=r[t.dateNumber];if(!a||0===a.length)return"continue";a.forEach((function(r){o[t.dateNumber]||(o[t.dateNumber]=[]);for(var a=yd(r,o[t.dateNumber]),i=Math.floor(e/7),l=e+1;l<n;l++){var s=c[l];if(r.getEnd()<s.dateNumber)break;o[s.dateNumber]||(o[s.dateNumber]=[]);var u=Math.floor(l/7),d=l%7==0?r:null;if(i===u)o[s.dateNumber][a]=d;else{var f=c[7*u].dateNumber;f===s.dateNumber?o[s.dateNumber].push(d):o[f]?o[s.dateNumber][o[f].length-1]=d:o[s.dateNumber].push(d)}}}))},d=0;d<n;d++)u(d);return o}(s.clone(),e,u,this.schedules)),{currentMoment:o,startDate:s,totalDayCount:u,scheduleData:d}}},{key:"_renderCells",value:function(e){for(var t,n,r,a=e.startDate,i=e.totalDayCount,o=this.state.cellWidths,c=this.props.firstIndex,l=[],s=0;s<i;s++){var u=a.clone().add(s,"days");t=l,n=this._renderDateCell(u,s,o[u.day()],e),r=void 0,-1==(r=t.length-1)&&(r=0),t[r]?7===t[r].length&&(t[++r]=[]):t[r]=[],t[r].push(n)}return l.map((function(e,t){return C.a.createElement("div",{className:"lake-card-calendar-cell-row",key:(c+t)%7},C.a.createElement("div",{className:"lake-card-calendar-cell-row-bg"}),C.a.createElement("div",{className:"lake-card-calendar-cell-row-inner"},e))}))}},{key:"_renderDateCell",value:function(e,t,n,r){var a=this,i=this.props.isReadonly,o=e.day(),c=Math.floor(t/7),l="lake-card-calendar-cell";e.isSame(this.today)&&(l+=" lake-card-calendar-today-cell"),e.month()!==r.currentMoment.month()&&(l+=" lake-card-calendar-other-month"),0!==o&&6!==o||(l+=" lake-card-calendar-weekend-cell");var s=null;return n&&(s={width:n+"px"}),C.a.createElement("div",{className:l,"data-moment":e.format(),onClick:i?null:function(t){a._handleCellClick(t,e,c)},onMouseDown:i?null:this._handleCellMouseDown,key:e.unix(),style:s},C.a.createElement("div",{className:"lake-card-calendar-day-label"},this.props.isReadonly?null:C.a.createElement("button",{className:"lake-card-calendar-add-schedule-btn"},C.a.createElement("span",{className:"lake-icon lake-icon-plus"})),C.a.createElement("span",{className:"lake-card-calendar-day-label-text"},e.date())),C.a.createElement("div",{className:"lake-card-calendar-cell-body"},this._renderSchedules(e,t,r)))}},{key:"_renderSchedules",value:function(e,t,n){var r=this,a=n.scheduleData,i=this.state,o=i.cellWidths,c=i.activeScheduleID;if(o.length){var l=[],s=this.props,u=s.isReadonly,d=s.active,f=s.locale,p=a[ld(e)],h=Math.floor(t/7),m=this.autoFocusID;return p?(p.forEach((function(n,a){n&&(c===n.getID()&&(r.lastActiveScheduleDate=n.getStart()),m===n.getID()&&(r.autoFocusID=null)),l.push(C.a.createElement(gd,{key:n?n.getID():a,cellWidths:o,schedule:n,active:d,calendarRootNodeRef:r.props.calendarRootNodeRef,isReadonly:u,momentDate:e,locale:f,boxRef:r.cellBoxRef,activeID:c,autoFocusID:m,onChange:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];r._handleScheduleDataChange.apply(r,[n].concat(t))},rowIndex:h,panelShowID:r.state.panelShowID,panelShowRowIndex:r.state.panelShowRowIndex,onRequestTogglePanelShow:function(e){r._handlePanelShowRequest(n,h,e)},onScheduleClick:r._handleScheduleClick,columnIndex:t%7}))})),l):l}}},{key:"_handleScheduleDataChange",value:function(e,t,n){var r=e.getStart(),a=ld(t.startDate),i=kd({},this.props.data.schedules),o=ud.recover({id:e.getID(),title:t.title,desc:t.desc,colorIndex:t.color,start:ld(t.startDate),end:ld(t.endDate)}).toJSON();if(this._checkNewCreateSchedule(o,e.toJSON())){i[r]=i[r].slice();var c=i[r],l=this.schedules[r].indexOf(e);if(r===a)void 0!==n&&n!==l?(c.splice(n,0,null),c[n]=o,n>l?c.splice(l,1):c.splice(l+1,1)):c[l]=o;else{i[a]=(i[a]||[]).slice();var s=i[a];c.splice(l,1),0===c.length&&delete i[r],void 0!==n?s.splice(n,0,o):s.push(o)}this.props.onChange(kd(kd({},this.props.data),{},{schedules:i}))}}},{key:"_handleAddBtnClick",value:function(e,t,n){e.preventDefault(),e.stopPropagation(),this._addSchedule(t,n)}},{key:"_handleCellClick",value:function(e,t,n){e.preventDefault(),e.stopPropagation();var r=Date.now();r-this._lastMouseDownTimestamp>300||r-this._lastClickTimestamp<300||(this._lastClickTimestamp=Date.now(),this._addSchedule(t,n))}},{key:"_handlePanelShowRequest",value:function(e,t,n){var r=null;if(n)r=e.getID(),this._showOverlay();else if(this._hideOverlay(),!this._checkNewCreateSchedule(e.toJSON()))return;this.setState(kd(kd({},this.state),{},{panelShowID:r,activeScheduleID:r,panelShowRowIndex:t}))}},{key:"_showOverlay",value:function(){var e=Object(a.a)(this.cellBoxRef.current).closest(".lake-card-calendar").find(".lake-card-calendar-overlay");e.length&&(e[0].style.display="block")}},{key:"_hideOverlay",value:function(){var e=Object(a.a)(this.cellBoxRef.current).closest(".lake-card-calendar").find(".lake-card-calendar-overlay");e.length&&(e[0].style.display="none")}},{key:"_checkNewCreateSchedule",value:function(e,t){var n=this._newCreateID;return this._newCreateID=null,t||(t=e),!(n&&e.id===n&&!e.title&&!e.desc&&e.start===t.start&&e.end===t.end&&e.colorIndex===t.colorIndex&&(this._deleteSchedule(n,!0),1))}},{key:"_addSchedule",value:function(e,t){var n=this.props.data,r=n.schedules,a=void 0===r?{}:r,i=ld(e),o=a[i]||[],c=[].concat(ge()(o),[new ud(null,null,(n.colorIndex||0)%cd.length,i).toJSON()]),l=c[c.length-1].id;this.setState({panelShowID:l,panelShowRowIndex:t,activeScheduleID:l}),this._newCreateID=l,this._showOverlay(),this.autoFocusID=l,this.props.onChange(kd(kd({},n),{},{colorIndex:((n.colorIndex||0)+1)%cd.length,schedules:kd(kd({},a),{},y()({},i,c))}))}},{key:"_deleteSchedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.lastActiveScheduleDate){for(var n=kd({},this.props.data.schedules),r=n[this.lastActiveScheduleDate].slice(),a=-1,i=0,o=r.length;i<o;i++)if(r[i].id===e){a=i;break}if(-1!==a){0===r.length?delete n[this.lastActiveScheduleDate]:(r.splice(a,1),n[this.lastActiveScheduleDate]=r);var c=kd(kd({},this.props.data),{},{schedules:n});t&&(c.colorIndex=c.colorIndex-1||0),this.props.onChange(c)}}}}]),n}();function xd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xd(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}y()(wd,"propTypes",{data:R.a.object.isRequired,firstIndex:R.a.number,active:R.a.bool.isRequired,isReadonly:R.a.bool.isRequired,calendarRootNodeRef:R.a.object,locale:R.a.object.isRequired,viewport:R.a.string,onChange:R.a.func,onUndo:R.a.func,onRedo:R.a.func}),y()(wd,"defaultProps",{onChange:function(){},onUndo:function(){},onRedo:function(){}});var Cd=function(e){f()(n,_.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),r=t.call(this,e),y()(u()(r),"state",{error:null}),y()(u()(r),"rootRef",null),y()(u()(r),"_handleNextBtnClick",(function(e){e.preventDefault(),e.stopPropagation(),r._updateCurrentDate(!0)})),y()(u()(r),"_handlePrevBtnClick",(function(e){e.preventDefault(),e.stopPropagation(),r._updateCurrentDate(!1)})),y()(u()(r),"_gotoToday",(function(e){e.stopPropagation(),e.preventDefault();var t=ld(st()("".concat(st()().format("YYYY-MM"),"-01 01:01:01+08:00"),"YYYY-MM-DD HH:mm:ss"));r.props.data.currentDate!==t&&r.props.onChange(_d(_d({},r.props.data),{},{currentDate:t}))})),r.rootRef=C.a.createRef(),r}return l()(n,[{key:"componentDidMount",value:function(){this.props.onReady(this)}},{key:"componentDidCatch",value:function(e,t){console.error(e),console.error(t),this.setState({error:e})}},{key:"componentDidUpdate",value:function(e){!this.props.active&&e.active&&this.rootRef.current&&Object(a.a)(".lake-card-calendar-overlay",this.rootRef.current).css("display","none")}},{key:"componentWillUnmount",value:function(){this.rootRef.current&&Object(a.a)(".lake-card-calendar-overlay",this.rootRef.current).css("display","none")}},{key:"render",value:function(){var e={};return this.props.data.height&&(e.height=this.props.data.height+"px"),this.state.error?C.a.createElement("div",{className:"lake-card-calendar",ref:this.rootRef,style:e},C.a.createElement("div",{className:"error-tip"},this.props.locale.calendar.tip.error)):C.a.createElement("div",{className:"lake-card-calendar",ref:this.rootRef,style:e},C.a.createElement("div",{className:"lake-card-calendar-overlay"}),this._renderHeader(),this._renderBody())}},{key:"_renderHeader",value:function(){var e=this.props.data.currentDate,t=this.props.locale,n=sd(e);return C.a.createElement("div",{className:"lake-card-calendar-header"},C.a.createElement(U.a,{autoInsertSpaceInButton:!1},C.a.createElement(B.a,{className:"lake-card-calendar-today-btn",onClick:this._gotoToday},t.calendar.today)),C.a.createElement("div",{className:"lake-card-calendar-month-selector"},C.a.createElement("button",{className:"lake-card-calendar-month-prev-btn",onClick:this._handlePrevBtnClick},C.a.createElement("span",{className:"lake-icon lake-icon-calendar-arrow-left"})),C.a.createElement("div",null,n.format(t.calendar.format)),C.a.createElement("button",{className:"lake-card-calendar-month-next-btn",onClick:this._handleNextBtnClick},C.a.createElement("span",{className:"lake-icon lake-icon-calendar-arrow-right"}))))}},{key:"_renderBody",value:function(){return C.a.createElement("div",{className:"lake-card-calendar-body"},this._renderWeekNames(),C.a.createElement(wd,{firstIndex:this.props.firstIndex,active:this.props.active,locale:this.props.locale,viewport:this.props.viewport,calendarRootNodeRef:this.rootRef,isReadonly:this.props.isReadonly,data:this.props.data,onChange:this.props.onChange,onUndo:this.props.onUndo,onRedo:this.props.onRedo}))}},{key:"_renderWeekNames",value:function(){for(var e=[],t=this.props,n=t.firstIndex,r=t.locale,a=0;a<7;a++)e.push(C.a.createElement("div",{className:"lake-card-calendar-week-name",key:n},r.calendar.weekdays[n])),n=(n+1)%7;return C.a.createElement("div",{className:"lake-card-calendar-week-names"},e)}},{key:"_updateCurrentDate",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.props.data,n=sd(t.currentDate);e?n.add(1,"months"):n.subtract(1,"months"),this.props.onChange(_d(_d({},t),{},{currentDate:ld(n)}))}}]),n}();y()(Cd,"propTypes",{onReady:R.a.func,firstIndex:R.a.number,isReadonly:R.a.bool.isRequired,active:R.a.bool.isRequired,viewport:R.a.string,data:R.a.object.isRequired,locale:R.a.object.isRequired,onChange:R.a.func,onUndo:R.a.func,onRedo:R.a.func}),y()(Cd,"defaultProps",{active:!1,onReady:function(){},firstIndex:0,onChange:function(){},onUndo:function(){},onRedo:function(){}});var Ed=function(e){f()(n,Ut);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){var e;o()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),y()(u()(e),"isActive",!1),y()(u()(e),"_inited",!1),y()(u()(e),"onUndo",(function(t){e.engine&&(t.preventDefault(),e.engine.command.execute("undo"))})),y()(u()(e),"onRedo",(function(t){e.engine&&(t.preventDefault(),e.engine.command.execute("redo"))})),e}return l()(n,[{key:"embedToolbar",value:function(){var e=this;if(this.engine)return[{type:"dnd"},{type:"copy"},{type:"separator"},{type:"copyCardLink",onClick:function(){return e.copyCardEmbedLink()}},{type:"separator"}].concat(ge()(this.getMoreEmbedToolbarConfig()))}},{key:"activate",value:function(){this.engine&&(this.engine.toolbar.disable(!0),this.resizeController.show()),this.isActive=!0,this._updateView(this.container[0],this.getCardValue())}},{key:"unactivate",value:function(){this.engine&&(this.engine.toolbar.disable(!1),this.resizeController.hide()),this.isActive=!1,this._updateView(this.container[0],this.getCardValue())}},{key:"saveCardValue",value:function(e){var t=this.cardRoot;this.engine&&this.engine.card.setValue(t,e)}},{key:"getCardValue",value:function(){var e=this.cardRoot,t=this.getTopEngine();return t?t.card.getValue(e):{}}},{key:"render",value:function(e,t){var n=e[0];if(!t.currentDate){var r=st()();t.currentDate=ld(st()("".concat(r.format("YYYY-MM"),"-01 01:01:01+08:00"))),this.saveCardValue(t)}this._inited||(this._inited=!0,this._bindEvent()),this._updateView(n,t),this.toggleMargin()}},{key:"destroy",value:function(){this.engine&&this.engine.toolbar.disable(!1),this.resizeController&&this.resizeController.hide(),this.container[0]&&O.a.unmountComponentAtNode(this.container[0]),x()(g()(n.prototype),"destroy",this).call(this)}},{key:"_bindEvent",value:function(){var e=this;this.getTopEngine().on("viewportchange",(function(){e._updateView(e.container[0],e.getCardValue())}))}},{key:"_updateData",value:function(e){this.saveCardValue(e),this._updateView(this.container[0],e),this.engine&&this.engine.setUserChanged()}},{key:"_updateView",value:function(e,t){var n=this,r=!this.engine,i=!!r||this.isActive;O.a.render(C.a.createElement(Cd,{data:t,active:i,onReady:function(){n.createResizeController(Object(a.a)(".lake-card-calendar",e))},isReadonly:r,locale:this.getTopEngine().locale,onUndo:this.onUndo,viewport:this.getTopEngine().viewport,onRedo:this.onRedo,onChange:function(e){return n._updateData(e)}}),e)}}]),n}();function Od(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sd(e){return 1===e.card.getComponentsByName("premium").length}function Rd(e){var t=-1;return e.replace(/<card\s+([\s\S]*?)(?:\/>|<\/card>)/g,(function(e,n,r){return n&&-1===t?("premium"===a.n.getAttrMap(n).name&&(t=r+e.length),e):e})),-1===t?null:e.substring(0,t)}y()(Ed,"type","block");var Dd=function(){function e(t){o()(this,e),y()(this,"__engine",null),y()(this,"__data",null),this.__engine=t}return l()(e,[{key:"setRawMeta",value:function(e){this.__data=e}},{key:"getRawMeta",value:function(){return this.__data}},{key:"hasMeta",value:function(){return null!==this.getMeta()}},{key:"getMeta",value:function(){var e=this.__engine.card.getComponentsByName("premium");return 1!==e.length?null:e[0].getValue()}}]),e}(),Ad={bothInit:function(){this.metaManager.registerProvider("premium",new Dd(this))},initialize:function(){var e=this;this.on("paste:origin",(function(t){a.k.fetchAllChildren(t).forEach((function(t){var n=Object(a.a)(t);n.isCard()&&"premium"===e.card.getName(n)&&n.remove()}))})),this.command.add("premium",{sideEffect:!0,execute:function(){if(!(e.card.getComponentsByName("premium").length>0)){var t=e.metaManager.getRawMeta("skylark"),n={};t&&t.docID&&(n.docID=t.docID),e.change.insertCard("premium",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Od(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Od(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n))}}})},getPublicContent:function(){return Sd(this)?Rd(this.getContent()):null},getPublicPureContent:function(){return Sd(this)?Rd(this.getPureContent()):null},getPublicValue:function(){return Sd(this)?Rd(this.getValue()):null}},Td=function(){function e(){o()(this,e),y()(this,"__skylarkData",null)}return l()(e,[{key:"setRawMeta",value:function(e){this.__skylarkData=e}},{key:"getRawMeta",value:function(){return this.__skylarkData}},{key:"getMeta",value:function(){return null}},{key:"hasMeta",value:function(){return!1}}]),e}(),Pd={bothInit:function(){this.metaManager.registerProvider("skylark",new Td)}},jd={toggleToLink:function(e){var t=e.value,n=t.src,r=t.text;if(n){var i=document.createRange();i.setStartAfter(e.cardRoot[0]),i.collapse(!0),this.change.removeCard(e.cardRoot);var o=document.createElement("a");o.href=a.n.sanitizeUrl(n),o.setAttribute("target","_blank"),o.innerText=r||n;var c=i.startContainer.childNodes[i.startOffset];c?c.parentNode.insertBefore(o,c):i.startContainer.appendChild(o),i.selectNode(o),i.collapse(!1),this.change.select(i)}}},Md={initialize:function(){var e=this;this.command.add("transfer",{sideEffect:!0,execute:function(t){e.change.insertCard("transfer",t)}})},onTransferComplete:function(e,t,n){this.change.removeCard(e),Nd.call(this,t,n)}};function Nd(e,t){var n=e.filename+"."+e.ext;if(a.h.isImage(n))return Ld.call(this,e,t);if(a.h.isAudio(n))return zd.call(this,e,t);if(a.h.isVideo(n))return Id.call(this,e,t);if("Doc"===e.target_type)return Vd.call(this,e);var r=Un("localdoc").split(/\s*,\s*/),i=(e.ext||"").toLowerCase();return-1!==r.indexOf("."+i)?Bd.call(this,e,t):Fd.call(this,e,t)}function Ld(e,t){this.change.insertCard("image",{status:"done",source:"transfer",src:t.url,size:e.filesize,margin:{top:!0,bottom:!0},name:e.filename+"."+e.ext})}function Id(e,t){this.change.insertCard("video",{status:"done",source:"transfer",videoId:t.video_id,size:e.size,margin:!0,name:e.filename+"."+e.ext})}function zd(e,t){this.change.insertCard("audio",{status:"done",source:"transfer",audioId:t.video_id,size:e.size,margin:!0,name:e.filename+"."+e.ext})}function Bd(e,t){this.change.insertCard("localdoc",{status:"done",source:"transfer",src:t.url,name:e.filename+"."+e.ext,ext:e.ext,size:e.filesize,collapsed:!0,margin:!0})}function Fd(e,t){this.change.insertCard("file",{status:"done",source:"transfer",src:t.url,name:e.filename+"."+e.ext,ext:e.ext,size:e.filesize})}function Vd(e){var t=new URL(e.url,location.href),n=t.href;t.searchParams.append("view","doc_embed");var r=t.href;this.change.insertCard("yuque",{source:"transfer",margin:!0,url:r,src:n,mode:"card",detail:e.detail})}a.s.card.add("cardselect",Nr),a.s.card.add("mention",xo),a.s.card.add("emoji",Lr),a.s.card.add("image",ta),a.s.card.add("file",oa),a.s.card.add("codeblock",ii),a.s.card.add("math",en),a.s.card.add("calendar",Ed),a.s.card.add("table",Hi),a.s.card.add("riddle",go),a.s.card.add("mindmap",Sa),a.s.card.add("flowchart2",Ma),a.s.card.add("youku",bo),a.s.card.add("processon",Xl),a.s.card.add("video",ao),a.s.card.add("premium",is),a.s.card.add("label",il),a.s.card.add("thirdparty",Xl),a.s.card.add("bookmarklink",ds),a.s.card.add("vote",Ds),a.s.card.add("audio",Xs),a.s.card.add("puml",Ka),a.s.card.add("mermaid",Ka),a.s.card.add("flowchart",Ka),a.s.card.add("graphviz",Ka),a.s.card.add("diagram",Ka),a.s.card.add("yuque",Sc),a.s.card.add("yuqueinline",Rc),a.s.card.add("lockedtext",Nc),a.s.card.add("localdoc",qc),a.s.card.add("transfer",Ms),a.s.plugin.add("link",ed),a.s.plugin.add("linkCard",rd),a.s.plugin.add("translate",Fu),a.s.plugin.add("search",Js),a.s.plugin.add("save",Zs),a.s.plugin.add("cardselect",tu),a.s.plugin.add("mention",Lu),a.s.plugin.add("emoji",{initialize:function(){var e=this;this.command.add("emoji",{sideEffect:!0,execute:function(t){var n=null;t.url?n=t.url:t.point&&(n="https://gw.alipayobjects.com/a/g/lark/twemoji/2.3.6/".concat(t.point,".svg")),n&&e.change.insertCard("emoji",{src:n,package:t.package||"default"})}}),this.on("paste:schema",(function(e){e.add([{img:{class:"lake-emoji"}},{span:{"data-type":"*",style:{"background-image":"*"}}}])})),this.on("paste:each",(function(t){if("img"===t.name&&t.hasClass("lake-emoji")){var n=/(https?:\/\/.+?\.svg)/i.exec(t[0].outerHTML);n&&e.card.replaceNode(t,"emoji",n[1])}else if("span"!==t.name||"emoji"!==t.attr("data-type"));else{var r=/(https?:\/\/.+?\.svg)/i.exec(t[0].outerHTML);r&&(t.empty(),e.card.replaceNode(t,"emoji",r[1]))}}))}}),a.s.plugin.add("image",pu),a.s.plugin.add("file",hu),a.s.plugin.add("codeblock",Du),a.s.plugin.add("math",$s),a.s.plugin.add("calendar",{initialize:function(){var e=this;this.command.add("calendar",{sideEffect:!0,execute:function(){var t=e.change.insertCard("calendar",{margin:!0});e.change.focusCard(t)}})}}),a.s.plugin.add("table",ju),a.s.plugin.add("riddle",{initialize:function(){var e=this;this.command.add("riddle",{execute:function(t){var n=e.change.insertCard("riddle",t);e.card.getComponent(n).focusInput()}})}}),a.s.plugin.add("youku",{initialize:function(){var e=this;this.command.add("youku",{sideEffect:!0,execute:function(t){var n=e.change.insertCard("youku",t);e.card.getComponent(n).focusInput()}})}}),a.s.plugin.add("thirdparty",od),a.s.plugin.add("video",Mu),a.s.plugin.add("diagram",Su),a.s.plugin.add("toc",wu),a.s.plugin.add("repository",_u),a.s.plugin.add("moremark",{initialize:function(){var e=this;this.command.add("moremark",{sideEffect:!0,queryState:function(){var t=[];return["sup","sub","code"].forEach((function(n){e.command.queryState(n)&&t.push(n)})),t},execute:function(t){e.command.execute(t)}})}}),a.s.plugin.add("mindmap",ua),a.s.plugin.add("plugin",Ou),a.s.plugin.add("pastemarkdown",zu),a.s.plugin.add("yuque",qu),a.s.plugin.add("lockedtext",{initialize:function(){var e=this;this.command.add("lockedtext",{sideEffect:!0,execute:function(){e.change.insertCard("lockedtext",{margin:!0})}})}}),a.s.plugin.add("label",Hu),a.s.plugin.add("premium",Ad),a.s.plugin.add("skylark",Pd),a.s.plugin.add("bookmarklink",jd),a.s.plugin.add("vote",{initialize:function(){var e=this;this.command.add("vote",{sideEffect:!0,execute:function(){var t=e.change.insertCard("vote",{margin:!0});e.change.focusCard(t)}})}}),a.s.plugin.add("transfer",Md);var Ud=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),r=t.call(this,e),y()(u()(r),"_clickTimer",null),y()(u()(r),"onClick",(function(e){if(e.preventDefault(),!r.props.onDblClick)return r._onClick(e);r._clickTimer||(r._clickTimer=setTimeout((function(){r._clickTimer=null,r._onClick(e)}),300))})),y()(u()(r),"onDblClick",(function(e){e.preventDefault(),r._clickTimer&&(clearTimeout(r._clickTimer),r._clickTimer=null);var t=r.props,n=t.name,a=t.onDblClick;t.disabled||(r.setState({visible:!1}),a&&a(e,n))})),y()(u()(r),"onMouseOver",(function(e){var t=r.props,n=t.onMouseOver;t.disabled||(n&&n(),e.preventDefault())})),y()(u()(r),"onMouseDown",(function(e){e.preventDefault();var t=r.props,n=t.name,a=t.onMouseDown;t.disabled||("paintformat"===n&&e.stopPropagation(),a&&a(e))})),y()(u()(r),"onMouseEnter",(function(){r.props.outerVisible||r.setState({visible:!0})})),y()(u()(r),"onMouseLeave",(function(){r.setState({visible:!1})})),r.state={visible:!1},r}return l()(n,[{key:"componentWillUnmount",value:function(){this._clickTimer&&(clearTimeout(this._clickTimer),this._clickTimer=null)}},{key:"_onClick",value:function(e){var t=this.props,n=t.name,r=t.onClick;t.disabled||(this.setState({visible:!1}),r&&r(e,n))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.name,r=e.title,a=e.icon,i=e.hotkey,o=e.active,c=e.disabled,l=e.hasArrow,s=e.currentText,u=e.content,d=e.mobile;r="function"==typeof r&&r()||r,i&&(r=C.a.createElement("div",{style:{textAlign:"center"}},r,C.a.createElement("br",null),C.a.createElement("span",{className:"lake-button-hotkey"},i)));var f=this.state.visible;r&&!d||(f=!1);var p="main-".concat(n,"-button");return C.a.createElement(D.a,{title:r,placement:"bottom",visible:f,overlayClassName:"lake-toolbar-tooltip"},C.a.createElement("button",{accessbilityid:p,className:le()("lake-button",t,{"lake-button-active":o,"lake-button-disabled":c}),onClick:this.onClick,onDoubleClick:this.props.onDblClick?this.onDblClick:null,onMouseDown:this.onMouseDown,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseOver:this.onMouseOver},u,s&&C.a.createElement("span",{className:"lake-button-inner-text"},s),a&&C.a.createElement("span",{dangerouslySetInnerHTML:{__html:a}}),l&&C.a.createElement("span",{className:"lake-icon lake-icon-arrow"})))}}]),n}(C.a.Component);y()(Ud,"propTypes",{name:R.a.string,className:R.a.string,title:R.a.any,icon:R.a.string,hotkey:R.a.string,active:R.a.bool,disabled:R.a.bool,hasArrow:R.a.bool,currentText:R.a.string,content:R.a.any,onClick:R.a.func,onDblClick:R.a.func,onMouseDown:R.a.func,onMouseOver:R.a.func,outerVisible:R.a.bool,mobile:R.a.bool});var qd={"zh-cn":{more:"更多"},en:{more:"More"}};function Hd(e){var t=e.children,n=e.width,r=e.lang||"zh-cn",a=Object(_.useState)(!1),i=_e()(a,2),o=i[0],c=i[1];return C.a.createElement("div",{className:le()("lake-toolbar-area","lake-toolbar-more",{"lake-toolbar-area-hide":!t||!t.length})},C.a.createElement("div",{className:"lake-button-set"},C.a.createElement("div",{className:le()("lake-button-set-trigger",{"lake-button-set-trigger-active":o})},C.a.createElement(Ud,{title:(qd[r]||{}).more||"更多",icon:'<span class="lake-icon lake-icon-more" />',name:"more",className:"lark-button-more",active:o,hasArrow:!1,onClick:function(e){e.preventDefault(),e.stopPropagation(),c(!o)},outerVisible:o})),C.a.createElement("div",{className:le()("lake-button-set-list","lake-button-set-list-hoz",{"lake-button-set-list-active":o}),style:{width:"".concat(n,"px")}},t)))}function Wd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wd(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Hd.defaultProps={lang:"zh-cn"},Hd.propTypes={children:R.a.array,width:R.a.number,lang:R.a.string.isRequired};var Gd=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),r=t.call(this,e),y()(u()(r),"toggleDropdown",(function(){r.props.disabled||(r.state.active?r.hideDropdown():r.showDropdown())})),y()(u()(r),"showDropdown",(function(){!0!==r.state.active&&(document.addEventListener("click",r.hideDropdown),r.setState({active:!0}))})),y()(u()(r),"hideDropdown",(function(e){if(e)for(var t=e.target;t;){if(t===r.buttonArea.current||t.classList&&t.classList.contains("lake-prevent-card-activated"))return;t=t.parentNode}document.removeEventListener("click",r.hideDropdown),r.setState({active:!1})})),r.buttonArea=C.a.createRef(),r.state={active:!1},r}return l()(n,[{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.hideDropdown)}},{key:"render",value:function(){var e=this.state.active,t=Yd({},this.props);t.active=e,t.onClick=this.toggleDropdown;var n=Yd({},this.props);return n.active=e,n.onClick=this.toggleDropdown,n.onBeforeUpload=this.toggleDropdown,n.activeKeys=n.data.map((function(e,t){return String(t)})),C.a.createElement("div",{className:"lake-button-set lake-collapse-button",ref:this.buttonArea},C.a.createElement("div",{className:le()("lake-button-set-trigger",{"lake-button-set-trigger-active":e})},C.a.createElement(Ud,t)),C.a.createElement(lr,n))}}]),n}(C.a.Component);y()(Gd,"propTypes",{disabled:R.a.bool});var Kd=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),r=t.call(this,e),y()(u()(r),"onSelect",(function(e,t){e.preventDefault(),e.stopPropagation(),r.props.onSelect(t)})),r.rootNodeRef=C.a.createRef(),r}return l()(n,[{key:"componentDidMount",value:function(){this.resetPosition()}},{key:"componentDidUpdate",value:function(){this.resetPosition()}},{key:"resetPosition",value:function(){var e=this.rootNodeRef.current;if(e&&this.props.active){var t=e.parentNode;if(t){var n=t.getBoundingClientRect();window.innerHeight-n.bottom<n.top?e.classList.add("lake-button-set-list-to-top"):e.classList.remove("lake-button-set-list-to-top")}}}},{key:"render",value:function(){var e=this,t=this.props,n=t.name,r=t.data,a=t.active,i=t.currentValue,o=t.className,c=!["indent"].includes(n),l="lake-button-icon-list"===o;return Array.isArray(i)||(i=[i]),C.a.createElement("div",{ref:this.rootNodeRef,className:le()("lake-button-set-list",{"lake-button-set-list-active":a,"lake-button-set-list-with-dot":c})},r.map((function(t,n){return l?C.a.createElement(D.a,{key:n,title:t.shortcut,placement:"right"},C.a.createElement("a",{className:le()("lake-button-set-list-item",t.className),onClick:function(n){return e.onSelect(n,t.key)}},i.indexOf(t.key)>=0&&C.a.createElement("span",{className:"lake-icon lake-icon-dot"}),C.a.createElement("span",{dangerouslySetInnerHTML:{__html:t.icon}}),C.a.createElement("span",{style:{fontSize:12}},t.title))):C.a.createElement("a",{key:n,className:le()("lake-button-set-list-item",t.className),onClick:function(n){return e.onSelect(n,t.key)}},i.indexOf(t.key)>=0&&C.a.createElement("span",{className:"lake-icon lake-icon-dot"}),C.a.createElement("span",null,t.value))})))}}]),n}(C.a.Component);function Xd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}y()(Kd,"propTypes",{className:R.a.string,name:R.a.string,data:R.a.array,active:R.a.bool,currentValue:R.a.any,onSelect:R.a.func});var $d=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),r=t.call(this,e),y()(u()(r),"toggleDropdown",(function(e){e.preventDefault(),e.stopPropagation(),r.props.disabled||(r.state.active?r.hideDropdown():r.showDropdown())})),y()(u()(r),"showDropdown",(function(){document.addEventListener("click",r.hideDropdown),r.setState({active:!0})})),y()(u()(r),"hideDropdown",(function(){document.removeEventListener("click",r.hideDropdown),r.setState({active:!1})})),r.state={active:!1},r}return l()(n,[{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.hideDropdown)}},{key:"render",value:function(){var e=this.state.active,t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xd(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.props);return delete t.onClick,delete t.active,C.a.createElement("div",{className:"lake-button-set",onClick:this.toggleDropdown},C.a.createElement("div",{className:le()("lake-button-set-trigger",{"lake-button-set-trigger-active":e})},C.a.createElement(Ud,oe()({active:e},t))),C.a.createElement(Kd,{className:this.props.className,active:e,name:this.props.name,data:this.props.data,currentValue:this.props.active,onSelect:this.props.onClick}))}}]),n}(C.a.Component);y()($d,"propTypes",{className:R.a.string,name:R.a.string,data:R.a.array,disabled:R.a.bool,active:R.a.any,onClick:R.a.func});var Zd=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"render",value:function(){return this.props.disabled?C.a.createElement(Ud,this.props):C.a.createElement(tn,this.props,C.a.createElement(Ud,this.props))}}]),n}(C.a.Component);y()(Zd,"propTypes",{disabled:R.a.bool});var Qd=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),r=t.call(this,e),y()(u()(r),"toggleDropdown",(function(e){e.preventDefault(),e.stopPropagation(),r.state.active?r.hideDropdown():r.showDropdown()})),y()(u()(r),"showDropdown",(function(){document.addEventListener("click",r.hideDropdown),r.setState({active:!0})})),y()(u()(r),"hideDropdown",(function(e){e.target.closest('[data-lake-editor-ui="colorpicker"]')||(document.removeEventListener("click",r.hideDropdown),r.setState({active:!1}))})),y()(u()(r),"handleClick",(function(){r.props.onClick(r.state.currentColor)})),y()(u()(r),"handleSelect",(function(e){r.setState({currentColor:e}),r.props.onClick(e)})),y()(u()(r),"addCustomColor",(function(e){var t=r.state.currentCustomColors;if(!t.includes(e)){var n=[e].concat(ge()(t));n.length>10&&(n=n.slice(n.length-10)),r.setState({currentCustomColors:n})}})),y()(u()(r),"getIcon",(function(e){return"fontcolor"===e?r.fontColorIcon():"backcolor"===e?r.backgroundColorIcon():"highlight"===e?r.textHighlightIcon():null})),r.state={currentColor:e.currentColor,currentCustomColors:[],active:!1},r}return l()(n,[{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.hideDropdown)}},{key:"textHighlightIcon",value:function(){var e="#FFD666",t="#FFFBE6";this.state.disabled&&(t="#BFBFBF",e="#BFBFBF");var n=this.state.currentColor;return n&&(t=n,e=Hc.getStroke(n)),C.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16",version:"1.1"},C.a.createElement("title",null,"highlight"),C.a.createElement("desc",null,"Created with Sketch."),C.a.createElement("g",{id:"highlight",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},C.a.createElement("rect",{id:"Rectangle-55",stroke:e,strokeWidth:"0.5",fill:t,x:"2",y:"12.75",width:"12",height:"1.5",rx:"0.125"}),C.a.createElement("g",{id:"Group-2",transform:"translate(2.781250, 1.375000)",fillRule:"nonzero"},C.a.createElement("path",{fill:"#595959",d:"M2.86079849,6.64817222 L2.05713835,5.84451208 C2.00832281,5.79569655 2.00832281,5.71655092 2.05713835,5.66773539 L3.61029491,4.11457882 L3.11963835,3.62392225 C3.07082281,3.57510672 3.07082281,3.49596109 3.11963835,3.44714556 L6.47839556,0.0883883476 C6.52721109,0.0395728112 6.60635672,0.0395728112 6.65517225,0.0883883476 L11.5165314,4.94974747 C11.5653469,4.998563 11.5653469,5.07770863 11.5165314,5.12652416 L8.15777416,8.48528137 C8.10895863,8.53409691 8.029813,8.53409691 7.98099747,8.48528137 L7.38889678,7.89318068 L5.83574021,9.44633725 C5.78692467,9.49515278 5.70777905,9.49515278 5.65896351,9.44633725 L5.0267407,8.81411444 L4.48856529,9.35326519 C4.39477378,9.44720966 4.26747335,9.5 4.13472392,9.5 L0.608857988,9.5 C0.470786801,9.5 0.358857988,9.38807119 0.358857988,9.25 C0.358857988,9.18363253 0.385247413,9.11998865 0.432210608,9.07309408 L2.86079849,6.64817222 Z M6.56678391,1.67937861 L4.71062861,3.53553391 L8.06938582,6.89429112 L9.92554112,5.03813582 L6.56678391,1.67937861 Z M3.64812861,5.75612373 L5.74735186,7.85534699 L6.54284699,7.05985186 L4.44362373,4.96062861 L3.64812861,5.75612373 Z",id:"Combined-Shape"}))))}},{key:"backgroundColorIcon",value:function(){var e="#FFD666",t="#FFFBE6";this.state.disabled&&(t="#BFBFBF",e="#BFBFBF");var n=this.state.currentColor;return n&&(t=n,e=Hc.getStroke(n)),C.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16",version:"1.1"},C.a.createElement("title",null,"color-bg"),C.a.createElement("desc",null,"Created with Sketch."),C.a.createElement("g",{id:"color-bg",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},C.a.createElement("path",{d:"M11.9745711,7.921875 C11.9745711,7.921875 13.2147672,9.2863447 13.2147672,10.1226326 C13.2147672,10.8142992 12.6566789,11.3802083 11.9745711,11.3802083 C11.2924632,11.3802083 10.734375,10.8142992 10.734375,10.1226326 C10.734375,9.2863447 11.9745711,7.921875 11.9745711,7.921875 Z M9.07958999,6.47535893 L6.28501575,3.68078468 L3.4904415,6.47535893 L9.07958999,6.47535893 Z M5.3326566,3.04215357 L4.28223263,1.9917296 C4.22692962,1.93642659 4.22692962,1.84676271 4.28223263,1.7914597 L5.03228902,1.0414033 C5.08759203,0.986100299 5.17725591,0.986100299 5.23255892,1.0414033 L6.4546098,2.26345418 C6.46530408,2.27146914 6.4755605,2.28033918 6.48528564,2.29006432 L10.4848531,6.28963174 C10.5954591,6.40023775 10.5954591,6.57956552 10.4848531,6.69017153 L6.4838816,10.691143 C6.37327559,10.801749 6.19394782,10.801749 6.08334181,10.691143 L2.08377439,6.69157557 C1.97316838,6.58096956 1.97316838,6.40164179 2.08377439,6.29103578 L5.3326566,3.04215357 Z",id:"Combined-Shape",fill:"#595959"}),C.a.createElement("rect",{id:"Rectangle-55",stroke:e,strokeWidth:"0.5",fill:t,x:"2",y:"12.75",width:"12",height:"1.5",rx:"0.125"})))}},{key:"fontColorIcon",value:function(){var e="#F5222D",t="#F5222D";this.state.disabled&&(t="#BFBFBF",e="#BFBFBF");var n=this.state.currentColor;return n&&(t=n,e=Hc.getStroke(n)),C.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16"},C.a.createElement("title",null,"color-font"),C.a.createElement("desc",null,"Created with Sketch."),C.a.createElement("g",{id:"color-font",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},C.a.createElement("rect",{fill:t,id:"Rectangle-55",stroke:e,strokeWidth:"0.5",x:"2",y:"12.75",width:"12",height:"1.5",rx:"0.125"}),C.a.createElement("path",{d:"M5.29102819,11.25 L3.96365715,11.25 C3.87952002,11.25 3.8113134,11.1817934 3.8113134,11.0976562 C3.8113134,11.08076 3.81412419,11.0639814 3.81963067,11.0480076 L7.0756112,1.60269506 C7.09679504,1.5412426 7.15463644,1.5 7.21963767,1.5 L8.81868806,1.5 C8.883726,1.5 8.94159158,1.54128846 8.96274706,1.60278951 L12.2118,11.048102 C12.239168,11.1276636 12.1968568,11.2143472 12.1172952,11.2417152 C12.1013495,11.2472004 12.0846037,11.25 12.067741,11.25 L10.6761419,11.25 C10.6099165,11.25 10.5512771,11.2072154 10.531066,11.1441494 L9.69970662,8.55 L6.27433466,8.55 L5.43599205,11.1444975 C5.41567115,11.2073865 5.35711879,11.25 5.29102819,11.25 Z M8.02635163,3.18571429 L7.96199183,3.18571429 L6.63904023,7.30714286 L9.33500105,7.30714286 L8.02635163,3.18571429 Z",id:"A",fill:"#595959"})))}},{key:"render",value:function(){var e=this.props,t=e.name,n=e.title,a=e.moreTitle,i=e.disabled,o=this.state.active;t.indexOf(":")>=0&&(t=t.split(":")[1]);var c=C.a.createElement("span",{className:"lake-icon lake-icon-svgs"},this.getIcon(t)),l=C.a.createElement("span",{className:"lake-icon"});return C.a.createElement("div",{className:"lake-button-set"},C.a.createElement("div",{className:le()("lake-button-set-trigger lake-button-set-trigger-double",{"lake-button-set-trigger-active":o},{"lake-button-set-trigger-double-active":o})},C.a.createElement(Ud,{className:"lake-button-current",content:c,onClick:this.handleClick,name:t,title:n,disabled:i}),C.a.createElement(Ud,{className:"lake-button-dropdown",content:l,onClick:this.toggleDropdown,name:"".concat(t,"-dropdown"),title:a,hasArrow:!0,disabled:i})),C.a.createElement("div",{className:le()("lake-button-set-list lake-button-set-list-colorboard",{"lake-button-set-list-active":o})},C.a.createElement(r.ColorPicker,{show:o,defaultColor:this.props.defaultColor,activeColors:[this.state.currentColor],customColors:this.state.currentCustomColors,onSelect:this.handleSelect,onSaveColor:this.addCustomColor})))}}]),n}(C.a.Component);function Jd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}y()(Qd,"propTypes",{name:R.a.string,title:R.a.string,moreTitle:R.a.string,currentColor:R.a.string.isRequired,defaultColor:R.a.string.isRequired,disabled:R.a.bool,onClick:R.a.func});var ef=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),r=t.call(this,e),y()(u()(r),"togglePopover",(function(){r.setState((function(e){return{active:!e.active}}))})),r.state={active:!1},r}return l()(n,[{key:"render",value:function(){var e=this,t=this.props.lang,n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jd(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.props);return delete n.onClick,delete n.active,C.a.createElement(P.a,{overlayClassName:"lake-button-emoji-popover",trigger:["click"],visible:this.state.active,onVisibleChange:function(t){t!==e.state.active&&e.setState({active:t})},content:C.a.createElement("div",{className:"lake-button-emoji-panel","data-aspm":"b25225.c63340"},this.props.data.map((function(n,r){return C.a.createElement("a",{"data-aspm-click":"d130554","data-aspm-param":"mood_id=".concat(n.id),key:r,className:le()("lake-button-set-list-item lake-button-set-list-item-que-emoji"),onClick:function(){e.props.onClick(n),e.setState({active:!1})}},C.a.createElement("img",{src:n.url}),C.a.createElement("br",null),C.a.createElement("span",{className:"lake-emoji-title"},n.title[t]||n.title["zh-cn"]))})))},C.a.createElement("div",{onClick:this.togglePopover,className:"lake-button-set lake-button-emoji"},C.a.createElement(Ud,n)))}}]),n}(C.a.Component);y()(ef,"propTypes",{className:R.a.string,name:R.a.string,data:R.a.array,disabled:R.a.bool,active:R.a.any,onClick:R.a.func});var tf=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),(r=t.call(this,e)).rootNodeRef=C.a.createRef(),r}return l()(n,[{key:"render",value:function(){var e=this.props.name;return"note-image"===e?C.a.createElement(tn,oe()({},this.props,{name:"image"}),C.a.createElement(Ud,oe()({},this.props,{name:"image"}))):"note-file"===e?C.a.createElement(tn,oe()({},this.props,{name:"file"}),C.a.createElement(Ud,oe()({},this.props,{name:"file"}))):C.a.createElement(rr,this.props,C.a.createElement(Ud,this.props))}}]),n}(C.a.Component);tf.propTypes={name:R.a.string};var nf=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"render",value:function(){var e=this.props,t=e.engine,n=e.locale,r=e.toolbar,a=e.toolbarState,i=e.mobile;return C.a.createElement("div",{className:le()("lake-toolbar-area",{"lake-toolbar-area-first-group":this.props.isFirstGroup})},r.map((function(e,r){var o=a[e]||{},c=o.type,l=o.CustomButton;return o.hasArrow="dropdown"===c,o.engine=t,o.mobile=i,o.getEngine||(o.getEngine=function(){return t}),o.locale=n,"collapse"===c?C.a.createElement(Gd,oe()({key:r},o)):"dropdown"===c?C.a.createElement($d,oe()({key:r},o)):"color"===c?(o.activeColors=[o.active],C.a.createElement(Qd,oe()({key:r},o))):"emoji"===c?C.a.createElement(ef,oe()({key:r},o)):"upload"===c?C.a.createElement(Zd,oe()({key:r},o)):"custom"===c&&l?C.a.createElement("div",{key:r,className:"lake-button-set"},l):"note-upload-button"===c?C.a.createElement(tf,oe()({key:r},o)):C.a.createElement(Ud,oe()({key:r},o))})))}}]),n}(C.a.Component);y()(nf,"propTypes",{engine:R.a.object,locale:R.a.object,toolbar:R.a.array,toolbarState:R.a.object,isFirstGroup:R.a.bool,mobile:R.a.bool}),y()(nf,"defaultProps",{isFirstGroup:!1});var rf=new ue.a("editor:toolbar"),af=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),r=t.call(this,e),y()(u()(r),"onResize",nt()((function(){r.rebuildToolbarGroups()}),200)),y()(u()(r),"rebuildToolbarGroups",(function(){if("mini-note"!==r.props.toolBarType){if(r.rootRef.current){var e=r.props,t=e.toolbar,n=e.moreToolbar,a=r.getAvailableWidth();rf("[rebuild toolbar]available width: ",a);var i=[],o=n||[],c=0;t.forEach((function(e){if(c>a)o.push(e);else{for(var t=!1,n=0,l=e.length;n<l;n++){var s=e[n],u=r.getToolbarItemSize(s);if(c+=u,n!==l-1&&(c+=0),c>a){rf("[rebuild toolbar]boundary: ",s),t=!0,0===n?o.push(e):(i.push(e.slice(0,n)),o.push(e.slice(n)));break}}c+=17,t||i.push(e)}})),r.setState({showTools:i,hideTools:o})}}else r.setState({showTools:r.props.toolbar})})),r.state={showTools:[],hideTools:[]},r.rootRef=C.a.createRef(),r.calcWidthTimeout=null,r}return l()(n,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",this.onResize,!1),this.rebuildToolbarGroups(),this.calcWidthTimeout=setTimeout((function(){e.rebuildToolbarGroups()}),300)}},{key:"componentWillUnmount",value:function(){this.calcWidthTimeout&&clearTimeout(this.calcWidthTimeout),window.removeEventListener("resize",this.onResize,!1)}},{key:"componentDidUpdate",value:function(e){e.toolbar&&this.props.toolbar&&e.toolbar.join(",")===this.props.toolbar.join(",")||(rf("toolbar changed"),this.rebuildToolbarGroups())}},{key:"getAvailableWidth",value:function(){var e=this.rootRef.current.clientWidth;return rf("toolbar node size:",e),e-40-4}},{key:"getToolbarItemSize",value:function(e){return(this.props.toolbarState[e]||{}).size||32}},{key:"render",value:function(){var e=this,t=this.props.toolbarState,n=this.state,r=n.showTools,a=n.hideTools;return C.a.createElement("div",{className:"lake-toolbar-content-plugins",ref:this.rootRef},r.map((function(n,r){return C.a.createElement(nf,{key:r,isFirstGroup:0===r,locale:e.props.locale,engine:e.props.engine,toolbarState:t,toolbar:n,mobile:e.props.mobile})})),a.length>0&&C.a.createElement(Hd,{lang:this.props.lang},a.map((function(n,r){return C.a.createElement(nf,{key:r,isFirstGroup:0===r,locale:e.props.locale,engine:e.props.engine,toolbarState:t,toolbar:n,mobile:e.props.mobile})}))))}}]),n}(C.a.Component);function of(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?of(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):of(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}y()(af,"propTypes",{engine:R.a.object.isRequired,lang:R.a.string.isRequired,locale:R.a.object.isRequired,toolbar:R.a.array.isRequired,toolBarType:R.a.string,moreToolbar:R.a.array,toolbarState:R.a.object.isRequired,mobile:R.a.bool}),y()(af,"defaultPropTypes",{hasMore:!0,moreToolbar:[]});var lf=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),r=t.call(this,e),y()(u()(r),"handleH5Scroll",(function(){var e=r.props,t=e.engine;e.mobile&&(document.body.appendChild(Object(a.a)(".lake-toolbar")[0]),r.toolbarEl=Object(a.a)(".lake-toolbar"),t.on("select",(function(){r.toolbarEl.css({position:"absolute",top:r.getPageScrollTop()+"px"})})),window.addEventListener("blur",(function(){r.toolbarEl.css({position:"fixed",top:0})})),window.addEventListener("scroll",(function(){"absolute"===r.toolbarEl.css("position")&&r.toolbarEl.css({top:r.getPageScrollTop()+"px"})})))})),y()(u()(r),"set",(function(e){var t=r.props,n=t.engine,a=t.type,i=(n&&n.options||{}).disallowToggleToolbar;if("function"==typeof i){if(i())return}else if(i)return;if("mini"!==a){var o=[],c=[];e.forEach((function(e){"separator"===e.type?(o.push(c),c=[]):c.push(e.name)})),c.length>0&&o.push(c);var l=r.getToolbarState(o,e);r.setState({pluginToolbar:o,pluginToolbarState:l})}else n.toolbar.disable(!0)})),y()(u()(r),"restore",(function(){var e=r.props,t=e.engine,n=e.type;t.isDestroyed||("mini"!==n?r.setState({pluginToolbar:[]}):t.toolbar.disable(!1))})),y()(u()(r),"disable",(function(e,t){var n=r.props.engine;if(!n.isDestroyed){t=t||["save","undo","redo","toc"];var a=cf({},r.state.toolbarState);Object.keys(a).forEach((function(n){t.indexOf(n)<0&&(a[n].disabled=e)})),n.toolbar.isDisabled=e,r.setState({toolbarState:a})}})),y()(u()(r),"show",(function(){r.props.engine.editArea.closest(".lake-editor").removeClass("lake-toolbar-hidden")})),y()(u()(r),"hide",(function(){r.props.engine.editArea.closest(".lake-editor").addClass("lake-toolbar-hidden")})),y()(u()(r),"updateState",(function(){if(!r.props.engine.isDestroyed){"mobile"===r.props.type&&r.restore();var e,t=r.state.pluginToolbar.length>0;if(e=cf({},t?r.state.pluginToolbarState:r.state.toolbarState),0!==Object.keys(e).length){var n=!1;Object.keys(e).forEach((function(t){r.executeGetter(e[t])&&(n||(n=!0))})),n&&(t?r.setState({pluginToolbarState:e}):r.setState({toolbarState:e}))}}})),r.state={pluginToolbar:[],pluginToolbarState:{},toolbarState:{}},r}return l()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.engine,n=e.toolbar,r=this.getToolbarState(n);this.setState({toolbarState:r}),t.toolbar={set:this.set,updateState:this.updateState,restore:this.restore,disable:this.disable,disableCardItemByName:this.disableCardItemByName,enableCardItemByName:this.enableCardItemByName,show:this.show,hide:this.hide},this.handleH5Scroll()}},{key:"getToolbarState",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rr(this.props.engine),r={},a={};return n.forEach((function(e){a[e.name]=e})),e.forEach((function(e){e.forEach((function(e){r[e]=a[e],t.executeGetter(r[e])}))})),r}},{key:"getPageScrollTop",value:function(){return Math.max(document.body.scrollTop,document.documentElement.scrollTop)}},{key:"executeGetter",value:function(e){var t=this.engine,n=!1;if(e.getActive&&function(){var t=e.getActive();if(Array.isArray(e.active)&&Array.isArray(t))for(var r=function(r){e.active.find((function(e){return e!==t[r]}))&&(n=!0)},a=0;a<t.length;a++)r(a);else e.active!==t&&(n=!0);e.active=t}(),e.getCurrentText){var r=e.getCurrentText(e.active);e.currentText!==r&&(n=!0),e.currentText=r}if(e.getDisabled&&(!t||!t.toolbar.isDisabled)){var a=e.getDisabled();e.disabled!==a&&(n=!0),e.disabled=a}return n}},{key:"render",value:function(){var e=this.props,t=e.toolbar,n=e.mobile,r=e.moreToolbar,a=e.engine,i=this.state,o=i.toolbarState,c=i.pluginToolbar,l=i.pluginToolbarState,s=le()("lake-toolbar",{"lake-mobile-toolbar":!!n});return C.a.createElement("div",{className:s,"data-lake-element":"toolbar",onMouseDown:function(e){e.preventDefault()},onMouseOver:function(e){return e.preventDefault()},onMouseMove:function(e){return e.preventDefault()},onContextMenu:function(e){return e.preventDefault()},"data-lake_prevent_click_unselect":"true"},0===c.length&&C.a.createElement("div",{className:"lake-toolbar-content lake-toolbar-content-active"},C.a.createElement(af,{key:"main",engine:this.props.engine,locale:this.props.locale,lang:a.options.lang,mobile:n,toolbar:t,toolBarType:this.props.toolBarType,toolbarState:o,moreToolbar:r})),c.length>0&&C.a.createElement("div",{className:"lake-toolbar-content lake-toolbar-content-active"},C.a.createElement(af,{key:"sub",engine:this.props.engine,locale:this.props.locale,lang:a.options.lang,mobile:n,toolbar:c,toolBarType:this.props.toolBarType,toolbarState:l,moreToolbar:[]})))}}]),n}(C.a.Component);y()(lf,"propTypes",{engine:R.a.object,toolBarType:R.a.oneOf(["normal","mini-note"]),toolbar:R.a.array,moreToolbar:R.a.array,hasMore:R.a.bool,type:R.a.string,mobile:R.a.bool}),y()(lf,"defaultProps",{toolbar:[]});var sf=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){var e;o()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),y()(u()(e),"state",{error:null,info:null}),e}return l()(n,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e}),console.error(t)}},{key:"render",value:function(){return this.state.error?C.a.createElement("div",null,"render error"):this.props.children}}]),n}(C.a.Component);sf.propTypes={children:R.a.any};var uf=function(e){return function(t){return C.a.createElement(sf,null,C.a.createElement(e,t))}};function df(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ff(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?df(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):df(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pf=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),r=t.call(this,e),y()(u()(r),"state",{selected:-1,tocHeight:0}),r.root=C.a.createRef(),r.__onScroll=nt()((function(){r.updatePosition()}),200),r}return l()(n,[{key:"updatePosition",value:function(){var e=this.props,t=e.data,n=e.engine;if(n&&n.scrollNode){for(var r=n.scrollNode.getBoundingClientRect(),a=-1,i=0,o=t.length;i<o;i++){var c=t[i].domNode.getBoundingClientRect().top-r.top;if(c>0){i>0&&(a=i-1);break}if(0===c){a=i;break}if(i===o-1){a=i;break}}a!==this.state.selected&&this.setState(ff(ff({},this.state),{},{selected:a}))}}},{key:"delayUpdateHeight",value:function(){var e=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){var t=e.root&&null!==e.root.current&&e.root.current.getBoundingClientRect(),n=t.height-(t.bottom-window.innerHeight)-45;e.setState(ff(ff({},e.state),{},{tocHeight:n}))}),32)}},{key:"__onScroll",value:function(){this.updatePosition()}},{key:"componentDidMount",value:function(){var e=this.props.engine;e&&e.scrollNode&&(this.updatePosition(),this.delayUpdateHeight(),e.scrollNode.addEventListener("scroll",this.__onScroll,!1))}},{key:"componentWillUnmount",value:function(){var e=this.props.engine;e&&e.scrollNode&&(e.scrollNode.removeEventListener("scroll",this.__onScroll,!1),this.timer&&clearTimeout(this.timer))}},{key:"render",value:function(){var e=this.props.data,t=this.state,n=t.selected,r=t.tocHeight;return C.a.createElement("div",{className:"lake-synopsis",ref:this.root},C.a.createElement(Y.a,{contents:e,current:n,autoAdjustPosition:!0,height:r,style:{height:r}}))}}]),n}(C.a.Component);y()(pf,"propTypes",{engine:R.a.object,data:R.a.array});var hf=uf(pf);function mf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mf(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vf=B.a.Group,yf=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;o()(this,n),r=t.call(this,e),y()(u()(r),"handleChangeWidth",(function(e){r._sizeChanged=!0;var t=parseInt(e.target.value,10)||0,n=Math.round(t*r.rate);r.setState({width:t,height:n})})),y()(u()(r),"handleChangeHeight",(function(e){r._sizeChanged=!0;var t=parseInt(e.target.value,10)||0,n=Math.round(t/r.rate);r.setState({width:n,height:t})})),y()(u()(r),"handleSizeKeyPress",(function(e){e.stopPropagation(),"Enter"===e.key&&(r._sizeChanged=!0,r.handleUpdateSize())})),y()(u()(r),"handleUpdateSize",(function(){if(r._sizeChanged){r._sizeChanged=!1;var e=r.props.engine,t=r.state,n=t.width,a=t.height,i=e.change.activeCard;if(i){var o=e.card.getComponent(i);o&&o.changeSize&&o.changeSize(n,a)}}})),y()(u()(r),"handleUpdateZoom",(function(e){r._sizeChanged=!0;var t=Math.round(r.originWidth*e),n=Math.round(r.originHeight*e);r.setState({width:t,height:n},(function(){r._sizeChanged=!0,r.handleUpdateSize()}))})),y()(u()(r),"handleUpdateStyle",(function(){var e=r.props.engine,t=r.state.style,n=e.change.activeCard;if(n){var a=e.card.getComponent(n);a&&a.changeStyle(t)}})),y()(u()(r),"handleUpdateUIStyle",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r.setState({style:e},(function(){return r.handleUpdateStyle()}))})),y()(u()(r),"handleUpdateSpacing",(function(){var e=r.props.engine,t=r.state.spacing,n=e.change.activeCard;if(n){var a=e.card.getComponent(n);a&&a.changeMargin(t)}})),y()(u()(r),"handleUpdateUISpacing",(function(e){r.setState({spacing:{top:-1!==e.indexOf("top"),bottom:-1!==e.indexOf("bottom")}},(function(){return r.handleUpdateSpacing()}))})),y()(u()(r),"handleChangeLink",(function(e){var t=e.target.value;r.setState({link:t})})),y()(u()(r),"handleLinkKeyPress",(function(e){e.stopPropagation(),"Enter"===e.key&&r.handleUpdateLink()})),y()(u()(r),"handleUpdateLink",(function(){var e=r.props.engine,t=r.state,n=t.link,a=t.linkTarget,i=e.change.activeCard;if(i){var o=e.card.getComponent(i);o&&o.changeLink(n,a)}})),y()(u()(r),"handleChangeLinkTarget",(function(e){var t=e.target.checked?"":"_blank";r.setState({linkTarget:t},(function(){return r.handleUpdateLink()}))}));var a=e.data;return r.state={width:a.width,height:a.height,link:a.link,linkTarget:a.linkTarget,style:a.style,spacing:gf({},a.margin)},r.originWidth=a.originWidth,r.originHeight=a.originHeight,r.rate=a.originHeight/a.originWidth,r}return l()(n,[{key:"componentWillUnmount",value:function(){this.handleUpdateSize(),this.handleUpdateLink()}},{key:"componentWillReceiveProps",value:function(e){var t=e.data,n=t.width,r=t.height;n!==this.props.data.width&&this.setState({width:n,height:r})}},{key:"render",value:function(){var e=this,t=this.props.engine,n=this.state,r=n.width,a=n.height,i=n.link,o=n.linkTarget,c=n.style,l=n.spacing,s=t.locale.image,u=[{label:s.topSpacingTips,value:"top"},{label:s.bottomSpacingTips,value:"bottom"}],d=[];return l.top&&d.push("top"),l.bottom&&d.push("bottom"),C.a.createElement("div",null,C.a.createElement("div",{className:"lake-sidebar-group lake-image-sidebar-group"},C.a.createElement("div",{className:"lake-sidebar-group-title"},s.sizeTitle),C.a.createElement("div",{className:"lake-sidebar-group-item"},C.a.createElement("div",{className:"lake-sidebar-size-input"},C.a.createElement(z.a,{type:"text",size:"small",className:"lake-sidebar-width",defaultValue:r,value:r,onKeyPress:this.handleSizeKeyPress,onBlur:this.handleUpdateSize,onChange:this.handleChangeWidth}),C.a.createElement("span",{className:"lake-sidebar-lock"}," "),C.a.createElement(z.a,{type:"text",size:"small",className:"lake-sidebar-height",defaultValue:a,value:a,onKeyPress:this.handleSizeKeyPress,onBlur:this.handleUpdateSize,onChange:this.handleChangeHeight})),C.a.createElement("div",{className:"lake-sidebar-size-title"},C.a.createElement("span",{className:"lake-sidebar-width-title"},s.width),C.a.createElement("span",{className:"lake-sidebar-lock"}),C.a.createElement("span",{className:"lake-sidebar-height-title"},s.height))),C.a.createElement("div",{className:"lake-sidebar-group-item lake-sidebar-image-percent",style:{marginBottom:"14px"}},C.a.createElement(vf,null,C.a.createElement(B.a,{size:"small",onClick:function(){return e.handleUpdateZoom(.25)}},"25%"),C.a.createElement(B.a,{size:"small",onClick:function(){return e.handleUpdateZoom(.5)}},"50%"),C.a.createElement(B.a,{size:"small",onClick:function(){return e.handleUpdateZoom(.75)}},"75%"),C.a.createElement(B.a,{size:"small",onClick:function(){return e.handleUpdateZoom(1)}},"100%"))),C.a.createElement("div",{className:"lake-sidebar-group-item lake-sidebar-image-100"},C.a.createElement(B.a,{size:"small",style:{width:"100%"},onClick:function(){return e.handleUpdateZoom(1)}},s.originSize)),C.a.createElement("div",{className:"lake-sidebar-group-title"},s.style),C.a.createElement("div",{className:"lake-sidebar-group-item lake-sidebar-image-style"},C.a.createElement(U.a,{autoInsertSpaceInButton:!1},C.a.createElement(vf,null,C.a.createElement(B.a,{size:"small",className:le()({active:!c||"none"===c}),onClick:function(){return e.handleUpdateUIStyle()}},s.none),C.a.createElement(B.a,{size:"small",className:le()({active:"stroke"===c}),onClick:function(){return e.handleUpdateUIStyle("stroke")}},s.stroke),C.a.createElement(B.a,{size:"small",className:le()({active:"shadow"===c}),onClick:function(){return e.handleUpdateUIStyle("shadow")}},s.shadow)))),C.a.createElement("div",{className:"lake-sidebar-group-title"},s.spacing),C.a.createElement("div",{className:"lake-sidebar-group-item lake-sidebar-image-spacing"},C.a.createElement(U.a,{autoInsertSpaceInButton:!1},C.a.createElement(H.a.Group,{options:u,value:d,onChange:this.handleUpdateUISpacing}))),C.a.createElement("div",{className:"lake-sidebar-group-title"},s.linkTitle),C.a.createElement("div",{className:"lake-sidebar-group-item"},C.a.createElement(z.a,{type:"text",size:"small",className:"lake-sidebar-link",placeholder:s.linkPlaceholder,defaultValue:i,value:i,onKeyPress:this.handleLinkKeyPress,onBlur:this.handleUpdateLink,onChange:this.handleChangeLink,style:{marginBottom:"12px"}}),C.a.createElement("div",null,C.a.createElement(H.a,{defaultChecked:""===o,checked:""===o,onChange:this.handleChangeLinkTarget},s.linkTargetTips)))))}}]),n}(C.a.Component);y()(yf,"propTypes",{engine:R.a.object,data:R.a.object});var bf=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),(r=t.call(this,e)).source="auto",r.target="en",r.state={targetPlainText:"",errorMsg:null},r.events=[],r}return l()(n,[{key:"_bindEvent",value:function(e,t,n){e.on(t,n),this.events.push({element:e,callback:n,type:t})}},{key:"_removeEvent",value:function(){this.events.forEach((function(e){var t=e.element,n=e.type,r=e.callback;t.off(n,r)}))}},{key:"_translate",value:function(){var e=this.props.engine,t=e.translate,n=e.change.getRange();n&&t.translate(n,this.source,this.target)}},{key:"componentWillMount",value:function(){"en"===this.props.engine.options.lang&&(this.target="zh")}},{key:"componentDidMount",value:function(){var e=this,t=this.props.engine,n=t.translate;this._translate(),this._bindEvent(t,"select",(function(){e._translate()})),this._bindEvent(n,"success",(function(t){var n=t.targetPlainText,r=t.fragment;e.fragment=r,e.setState({errorMsg:null,targetPlainText:n})})),this._bindEvent(n,"fail",(function(t){var n=t.errorMsg;e.setState({errorMsg:n})}))}},{key:"componentWillUnmount",value:function(){this._removeEvent()}},{key:"render",value:function(){var e=this,t=this.props.engine,n=this.state.targetPlainText,r=this.state.errorMsg,a=j.a.Option,i=t.locale.translate,o=!n,c=C.a.createElement(a,{value:"zh"},i.zh),l=C.a.createElement(a,{value:"en"},i.en);return n=o?i.placeholder:n,C.a.createElement("div",{className:"lake-translate-panel"},C.a.createElement("span",null,i.subTitle),C.a.createElement("br",null),C.a.createElement(j.a,{style:{width:"100%",marginTop:"14px"},defaultValue:this.source,onChange:function(t){e.source=t,e._translate()}},C.a.createElement(a,{value:"auto"},i.automaticDetection),c,l),C.a.createElement("br",null),C.a.createElement(j.a,{style:{width:"100%",marginTop:"14px"},defaultValue:this.target,onChange:function(t){e.target=t,e._translate()}},c,l),C.a.createElement("p",{style:{margin:"14px 0px"}},i.translation,"："),C.a.createElement("pre",{style:{color:o?"rgba(0,0,0,0.25)":"inherit"}},n),r&&C.a.createElement("p",{style:{marginBottom:"8px",color:"#CF1322"}},r),C.a.createElement(B.a,{onClick:function(){e.fragment&&t.change.insertFragment(e.fragment.cloneNode(!0))}},i.insertDoc))}}]),n}(C.a.Component);y()(bf,"propTypes",{engine:R.a.object,data:R.a.array});var kf=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;o()(this,n),r=t.call(this,e);var a=e.data;return r.state={download:a.download},r}return l()(n,[{key:"getActivatedComponent",value:function(){var e=this.props.engine,t=e.change.activeCard;if(t){var n=e.card.getComponent(t);if(n)return n}}},{key:"handleUpdateDownload",value:function(e){var t=this.getActivatedComponent();t&&t.setValue({download:e},!1)}}]),l()(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.engine,r=t.data,a=n.locale.localdoc;return C.a.createElement("div",null,C.a.createElement(H.a,{className:"lake-content-view-download",onChange:function(t){e.handleUpdateDownload(t.target.checked)},defaultChecked:r.download},a.allowDownload))}}]),n}(C.a.Component);y()(kf,"propTypes",{engine:R.a.object,data:R.a.object});var wf=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"appendElement",value:function(){var e=this.props.data;!e.preventAppend()&&this.container.appendChild(e.element)}},{key:"componentDidUpdate",value:function(){this.appendElement()}},{key:"componentDidMount",value:function(){this.appendElement()}},{key:"componentWillUnmount",value:function(){this.props.data.element.remove()}},{key:"render",value:function(){var e=this;return C.a.createElement("div",{ref:function(t){e.container=t}})}}]),n}(C.a.Component);y()(wf,"propTypes",{data:R.a.object});var xf=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;o()(this,n),r=t.call(this,e);var a=e.data;return r.state={download:a.download},r}return l()(n,[{key:"getActivatedComponent",value:function(){var e=this.props.engine,t=e.change.activeCard;if(t){var n=e.card.getComponent(t);if(n)return n}}},{key:"handleUpdateDownload",value:function(e){var t=this.getActivatedComponent();t&&t.setValue({download:e},!1)}}]),l()(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.engine,r=t.data,a=n.locale.localdoc;return C.a.createElement("div",null,C.a.createElement(H.a,{"data-testid":"video",className:"lake-content-view-download",onChange:function(t){e.handleUpdateDownload(t.target.checked)},defaultChecked:r.download},a.allowDownload))}}]),n}(C.a.Component);y()(xf,"propTypes",{engine:R.a.object,data:R.a.object});var _f,Cf=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;o()(this,n),r=t.call(this,e);var a=e.data;return r.state={download:a.download},r}return l()(n,[{key:"getActivatedComponent",value:function(){var e=this.props.engine,t=e.change.activeCard;if(t){var n=e.card.getComponent(t);if(n)return n}}},{key:"handleUpdateDownload",value:function(e){var t=this.getActivatedComponent();t&&t.setValue({download:e},!1)}}]),l()(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.engine,r=t.data,a=n.locale.localdoc;return C.a.createElement("div",null,C.a.createElement(H.a,{className:"lake-content-view-download",onChange:function(t){e.handleUpdateDownload(t.target.checked)},defaultChecked:r.download},a.allowDownload))}}]),n}(C.a.Component);function Ef(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Of(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ef(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ef(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}y()(Cf,"propTypes",{engine:R.a.object,data:R.a.object});var Sf=function(e){f()(n,_.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){var e,r,a;o()(this,n);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return a=t.call.apply(t,[this].concat(c)),y()(u()(a),"state",{input:(e={},y()(e,$l,null),y()(e,Zl,null),y()(e,Ql,null),e),error:(r={},y()(r,$l,null),y()(r,Zl,null),y()(r,Ql,null),r)}),y()(u()(a),"__handleChangePrice",(function(e){if(!a.props.data.freeze&&!a.props.data.expired){var t=e.currentTarget.value;t||(t=null),a.setState(Of(Of({},a.state),{},{input:Of(Of({},a.state.input),{},y()({},$l,t)),error:Of(Of({},a.state.error),{},y()({},$l,a.props.data.validate($l,t)))}),a.__notify)}})),y()(u()(a),"__handleChangeDuration",(function(e){if(!a.props.data.freeze&&!a.props.data.expired){var t=e.currentTarget.value;t||(t=null),a.setState(Of(Of({},a.state),{},{input:Of(Of({},a.state.input),{},y()({},Zl,t)),error:Of(Of({},a.state.error),{},y()({},Zl,a.props.data.validate(Zl,t)))}),a.__notify)}})),y()(u()(a),"__handleChangeTip",(function(e){if(!a.props.data.expired){var t=e.currentTarget.value;t||(t=null),a.setState(Of(Of({},a.state),{},{input:Of(Of({},a.state.input),{},y()({},Ql,t)),error:Of(Of({},a.state.error),{},y()({},Ql,a.props.data.validate(Ql,t)))}),a.__notify)}})),y()(u()(a),"__notify",(function(){var e,t=u()(a).state,n=a.props.data.onChange;if(n){var r=t.input.tip;n((y()(e={},$l,t.input.price),y()(e,Zl,t.input.daysCount),y()(e,Ql,r?r.replace(/\n+/g,""):r),e))}})),a}return l()(n,[{key:"componentDidMount",value:function(){this.__initState(this.props.data)}},{key:"render",value:function(){var e=this.props.engine,t=this.props.data,n=t.expired,r=t.freeze,a=e.locale.premium;return C.a.createElement("div",{className:"lake-sidebar-premium"},C.a.createElement("div",{className:"lake-sidebar-noborder-group"},C.a.createElement("div",{className:"lake-sidebar-noborder-group-title"},a.sidebar.title,C.a.createElement("a",{href:"https://www.yuque.com/terms/origin",target:"_blank"},a.sidebar.moreLink)),C.a.createElement("div",{className:"lake-sidebar-noborder-group-item",dangerouslySetInnerHTML:{__html:a.sidebar.desc}})),C.a.createElement(gt.a,null,C.a.createElement("div",{className:"lake-sidebar-noborder-group"},C.a.createElement("div",{className:"lake-sidebar-noborder-group-title"},a.sidebar.price.title),C.a.createElement("div",{className:"lake-sidebar-noborder-group-item"},a.sidebar.price.desc),C.a.createElement(gt.a.Item,{validateStatus:this.state.error.price?"error":"success",help:this.state.error.price},C.a.createElement("div",{className:"lake-sidebar-noborder-group-item lake-sidebar-input-group-item"},C.a.createElement(z.a,{value:this.state.input.price,className:"lake-sidebar-premium-input",placeholder:"".concat(Jl.price.min,"-").concat(Jl.price.max),disabled:n||r,onChange:this.__handleChangePrice})," ",a.sidebar.price.unit))),C.a.createElement("div",{className:"lake-sidebar-noborder-group"},C.a.createElement("div",{className:"lake-sidebar-noborder-group-title"},a.sidebar.daysCount.title),C.a.createElement("div",{className:"lake-sidebar-noborder-group-item",dangerouslySetInnerHTML:{__html:a.sidebar.daysCount.desc}}),C.a.createElement(gt.a.Item,{validateStatus:this.state.error.daysCount?"error":"success",help:this.state.error.daysCount},C.a.createElement("div",{className:"lake-sidebar-noborder-group-item lake-sidebar-input-group-item"},C.a.createElement(z.a,{value:this.state.input.daysCount,className:"lake-sidebar-premium-input",placeholder:"".concat(Jl.daysCount.min,"-").concat(Jl.daysCount.max),onChange:this.__handleChangeDuration,disabled:n||r})," ",a.sidebar.daysCount.unit))),C.a.createElement("div",{className:"lake-sidebar-noborder-group"},C.a.createElement("div",{className:"lake-sidebar-noborder-group-title"},a.sidebar.tip.title),C.a.createElement(gt.a.Item,{validateStatus:this.state.error.tip?"error":"success",help:this.state.error.tip},C.a.createElement("div",{className:"lake-sidebar-noborder-group-item lake-sidebar-input-group-item"},C.a.createElement(z.a.TextArea,{autoSize:{minRows:1,maxRows:3},value:this.state.input.tip,className:"lake-sidebar-premium-textarea",placeholder:a.defaultTip,autoComplete:"off",onChange:this.__handleChangeTip,disabled:n}))))))}},{key:"__initState",value:function(e){var t;e&&this.setState(Of(Of({},this.state),{},{input:(t={},y()(t,$l,e.price),y()(t,Zl,e.daysCount),y()(t,Ql,e.tip),t)}))}}]),n}();y()(Sf,"propTypes",{engine:R.a.object,data:R.a.shape((_f={},y()(_f,$l,R.a.any),y()(_f,Zl,R.a.any),y()(_f,Ql,R.a.any),y()(_f,"freeze",R.a.bool.isRequired),y()(_f,"expired",R.a.bool.isRequired),y()(_f,"onChange",R.a.func),y()(_f,"validate",R.a.func),_f)).isRequired}),y()(Sf,"defaultProps",{data:{validate:function(){}}});vt(".lark-icon-module_size__9Sxlg {\n  width: 24px;\n  height: 24px;\n}\n");var Rf=function(e){var t=e.className,n=e.name,r=e.width,a=e.height,i=e.fill,o=e.radius;return C.a.createElement("svg",{className:le()("icon-svg",t,"lark-icon-module_size__9Sxlg"),style:{width:r,height:a||r,minWidth:r,fill:i,borderRadius:o}},C.a.createElement("use",{xlinkHref:"#".concat(n)}))};Rf.propTypes={className:R.a.string,name:R.a.string,width:R.a.number,height:R.a.number,fill:R.a.any,radius:R.a.string};var Df=n(255),Af=n(198),Tf=n(191),Pf=n(192),jf=n(193),Mf=n(204),Nf=n(203),Lf=n(194),If=n(205),zf=(Df.map((function(e){return e.substring(1)})),["txt"].concat(Af.map((function(e){return e.substring(1)})))),Bf=Tf.map((function(e){return e.substring(1)})),Ff=Pf.map((function(e){return e.substring(1)})),Vf=jf.map((function(e){return e.substring(1)})),Uf=Mf.map((function(e){return e.substring(1)})),qf=Nf.map((function(e){return e.substring(1)})),Hf=Lf.map((function(e){return e.substring(1)})),Wf=If.map((function(e){return e.substring(1)}));function Yf(e,t){if(!t||!t.ext)return!1;switch(t.ext=t.ext.toLowerCase(),e){case"raw":return zf.includes(t.ext);case"image":return Bf.includes(t.ext);case"video":return Ff.includes(t.ext);case"audio":return Vf.includes(t.ext);case"presentation":return Uf.includes(t.ext);case"sheet":return qf.includes(t.ext);case"rp":return["rp","rplib"].includes(t.ext);case"zip":return Hf.includes(t.ext);case"mmap":return Wf.includes(t.ext);case"ppt":return["ppt","pptx"].includes(t.ext);default:return t.ext===e}}function Gf(e){return Yf("image",e)}function Kf(e){if("folder"===e.type)return"file-folder";var t=e.ext;return t=t?t.toLowerCase():"",Gf(e)?"file-image":function(e){return Yf("video",e)}(e)?"file-video":function(e){return Yf("audio",e)}(e)?"file-audio":["doc","docx","dot","dotx"].includes(t)?"file-word":function(e){return Yf("pdf",e)}(e)?"file-pdf":Yf("txt",e)?"file-txt":["pages","md","markdown","rtf"].includes(t)?"file-doc":Yf("numbers",e)?"file-numbers":["xls","xlsx","xlsm","xltx","xlt"].includes(t)?"file-excel":function(e){return Yf("sheet",e)}(e)?"file-sheet":Yf("key",e)?"file-keynote":function(e){return Yf("presentation",e)}(e)?"file-ppt":["xmind","xmind.zip"].includes(t)?"file-xmind":["mindnode","mindnode.zip"].includes(t)?"file-mindnode":Yf("mmap",e)?"file-mindmap":function(e){return Yf("sketch",e)}(e)?"file-sketch":function(e){return Yf("rp",e)}(e)?"file-axure":Yf("psd",e)?"file-psd":Yf("ai",e)?"file-ai":Yf("graffle",e)?"file-graffle":Yf("zip",e)?"file-rar":Yf("lake",e)?"doc-type-default":Yf("lakesheet",e)?"doc-type-sheet":"file-default"}var Xf={name:"resource-item-name-module_name__2PglY",mobile:"resource-item-name-module_mobile__1B_wr",nameText:"resource-item-name-module_nameText__vtchj",editing:"resource-item-name-module_editing__3F35I",fadein:"resource-item-name-module_fadein__25LgU",flash:"resource-item-name-module_flash__2xx0E"};vt("/*\n* ============================================\n* COLOR PALETTE\n* Do not modify this file.\n* ============================================\n*/\n@keyframes resource-item-name-module_fadein__25LgU {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n@keyframes resource-item-name-module_flash__2xx0E {\n  0% {\n    background-color: rgba(82, 181, 101, 0.1);\n  }\n  100% {\n    background-color: rgba(82, 181, 101, 0);\n  }\n}\n.resource-item-name-module_name__2PglY {\n  display: block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  width: 100%;\n}\n.resource-item-name-module_name__2PglY > a,\n.resource-item-name-module_name__2PglY > span {\n  display: flex;\n  align-items: center;\n}\n.resource-item-name-module_name__2PglY.resource-item-name-module_mobile__1B_wr > a {\n  height: 40px;\n}\n.resource-item-name-module_name__2PglY .resource-item-name-module_nameText__vtchj {\n  display: block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  margin-left: 12px;\n  height: 42px;\n  line-height: 42px;\n  color: #595959;\n  transition: color 0.35s ease;\n}\n.resource-item-name-module_name__2PglY .resource-item-name-module_nameText__vtchj.resource-item-name-module_mobile__1B_wr {\n  display: block;\n  top: -10px;\n  position: relative;\n  font-size: 15px;\n}\n.resource-item-name-module_name__2PglY:hover .resource-item-name-module_nameText__vtchj {\n  width: 70%;\n  color: #262626;\n}\n.resource-item-name-module_editing__3F35I {\n  display: flex;\n  align-items: center;\n}\n.resource-item-name-module_editing__3F35I .ant-input {\n  margin-left: 8px;\n}\n");var $f={Icon:function(e){var t=e.item,n=e.size;return C.a.createElement(Rf,{name:"folder"===t.type?"file-folder":Kf(t),width:n||24})}};$f.Icon.propTypes={item:R.a.object.isRequired,size:R.a.number};var Zf=["cdn.nlark.com","gw.alipayobjects.com","alipay-rmsdeploy-image.cn-hangzhou.alipay.aliyun-inc.com","private-alipayobjects.alipay.com","zos.alipayobjects.com","yuque.com","yuque.antfin-inc.com","yuque.antfin.com","lark.alipay.net:7001","intranetproxy.alipay.com"];vt("/*\n* ============================================\n* COLOR PALETTE\n* Do not modify this file.\n* ============================================\n*/\n@keyframes thumbnail-module_fadein__gF8rA {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n@keyframes thumbnail-module_flash__XEo97 {\n  0% {\n    background-color: rgba(82, 181, 101, 0.1);\n  }\n  100% {\n    background-color: rgba(82, 181, 101, 0);\n  }\n}\n.thumbnail-module_thumbnail__IttNs {\n  width: 30px;\n  height: 30px;\n  background-size: cover;\n  background-position: center;\n  border-radius: 2px;\n  flex-shrink: 0;\n}\n");var Qf=function(e){var t=e.item,n=void 0===t?{}:t,r=e.size,a=void 0===r?30:r,i=n.filekey,o=n.ext,c=Object(_.useState)(!0),l=_e()(c,2),s=l[0],u=l[1],d="".concat(window.location.protocol,"//").concat(window.location.host,"/preview/").concat(i,"?redirect=true");"svg"!==o&&(d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.width,r=t.height,a=t.fill,i=t.format,o=t.quality;if(e){if(e.startsWith("/r/avatar_buc/"))return e;if(e.includes(".svg"))return e;if(!e.includes(window.location.host)&&Zf.every((function(t){return!e.includes(t)})))return e;try{var c=new URL(e),l=c.searchParams,s=c.pathname,u=function(e,t){l.get("x-oss-process")?l.set("x-oss-process","".concat(l.get("x-oss-process"),"/").concat(e,",").concat(t)):l.append("x-oss-process","image/".concat(e,",").concat(t))};if(s.endsWith(".gif")&&(n||r)&&!i&&(i="jpeg",o="Q_85"),n||r){var d=[];a&&d.push("m_fill"),n&&d.push("w_".concat(n)),r&&d.push("h_".concat(r)),u("resize",d.join(","))}return i&&u("format",i),o&&u("quality",o),c.toString()}catch(t){return e}}}(d,{height:2*a,width:2*a,fill:!0}));var f={backgroundImage:"url(".concat(d,")"),width:"".concat(a,"px"),height:"".concat(a,"px")};return Object(_.useEffect)((function(){var e=new Image;e.src=d,e.onerror=function(){u(!1)}}),[d]),s?C.a.createElement("div",{className:"thumbnail-module_thumbnail__IttNs",style:f,"data-testid":"test-thumbnail"}):C.a.createElement($f.Icon,{item:n,size:a})};Qf.propTypes={item:R.a.object,size:R.a.number};var Jf=function(e){var t,n=e.item,r=e.isMobile,a=e.size,i=void 0===a?30:a,o=Gf(n)&&n.filekey&&!n.filekey.endsWith("?x-oss-process=image/auto-orient,1")?C.a.createElement(Qf,{item:n,size:i}):C.a.createElement($f.Icon,{item:n,size:i}),c=le()(Xf.name,(y()(t={},Xf.mobile,r),y()(t,Xf.fileItem,"file"===n.type),t)),l=le()(Xf.nameText,y()({},Xf.mobile,r)),s="folder"===n.type?"":".".concat(n.ext);return C.a.createElement("span",{className:c},C.a.createElement("span",{title:"".concat(n.filename).concat(s),"data-testid":"resource-item-name-static"},o,C.a.createElement("span",{className:l},n.filename,s)))};Jf.propTypes={item:R.a.object.isRequired,isMobile:R.a.bool,size:R.a.number};var ep={card:"index-module_card__2xvzZ",readHeader:"index-module_readHeader__2vV5o",headerTitle:"index-module_headerTitle__1-DgC",searchHeader:"index-module_searchHeader__15hjG",searchInput:"index-module_searchInput__2X5sI",loading:"index-module_loading__3nCT2",breadcrumb:"index-module_breadcrumb__2Ahy2",emptyView:"index-module_emptyView__3UGpy",emptyViewImg:"index-module_emptyViewImg__35_eC",list:"index-module_list__3AlBC",listItem:"index-module_listItem__1xvBd",fileItem:"index-module_fileItem__3u62e",isEn:"index-module_isEn__1ZsKr",arrow:"index-module_arrow__frDmD",listItemDisabled:"index-module_listItemDisabled__3gDma",listItemName:"index-module_listItemName__3tDkv",footer:"index-module_footer__2cSNR",columnsTitleBook:"index-module_columnsTitleBook__17_m8","book-name":"index-module_book-name__ywZhh","lark-book-title":"index-module_lark-book-title__393rb","book-link":"index-module_book-link__1H1Bo","book-icon":"index-module_book-icon__3i9jd","book-name-text":"index-module_book-name-text__34m-P","book-name-scope":"index-module_book-name-scope__3Tzno","icon-svg":"index-module_icon-svg__pfj_1","book-name-orglabel":"index-module_book-name-orglabel__1KlXc","book-name-split":"index-module_book-name-split__3co1-",permission__public__tip:"index-module_permission__public__tip__3F935",highlight:"index-module_highlight__1fv27",searchWrap:"index-module_searchWrap__174kp",contentBody:"index-module_contentBody__1fw6-",errTip:"index-module_errTip__1dBEm",errTipText:"index-module_errTipText__3zPkN",fadein:"index-module_fadein__j8GWG",flash:"index-module_flash__3y8VO"};vt('/*\n* ============================================\n* COLOR PALETTE\n* Do not modify this file.\n* ============================================\n*/\n@keyframes index-module_fadein__j8GWG {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n@keyframes index-module_flash__3y8VO {\n  0% {\n    background-color: rgba(82, 181, 101, 0.1);\n  }\n  100% {\n    background-color: rgba(82, 181, 101, 0);\n  }\n}\n.index-module_card__2xvzZ {\n  height: calc(100% - 80px);\n  overflow: auto;\n  overflow-x: hidden;\n  margin-top: 16px;\n}\n.index-module_readHeader__2vV5o {\n  display: flex;\n  flex: 1;\n  align-items: center;\n  margin-right: 16px;\n}\n.index-module_headerTitle__1-DgC {\n  flex: 1;\n  line-height: 22px;\n  font-size: 14px;\n  font-weight: bold;\n}\n.index-module_searchHeader__15hjG {\n  line-height: 22px;\n  height: 22px;\n  font-weight: bold;\n  margin-right: 16px;\n  flex: 1;\n}\n.index-module_searchHeader__15hjG .larkui-input-search {\n  padding: 0;\n  border: none!important;\n  box-shadow: none;\n  line-height: 22px;\n  font-size: 16px;\n  font-weight: bold;\n  background: none;\n}\n.index-module_searchHeader__15hjG .larkui-input-search .ant-input-suffix {\n  margin: 0;\n}\n.index-module_searchHeader__15hjG .larkui-input-search .ant-input-suffix .ant-input-search-icon {\n  margin: 0;\n}\n.index-module_searchHeader__15hjG .larkui-input-search .ant-input-suffix .ant-input-search-icon:before {\n  display: none;\n}\n.index-module_searchInput__2X5sI {\n  border: none;\n}\n.index-module_searchInput__2X5sI input {\n  height: 22px;\n  line-height: 22px;\n  background-color: transparent;\n  padding: 0;\n  border: none;\n  outline: none;\n  box-shadow: none!important;\n}\n.index-module_loading__3nCT2 {\n  text-align: center;\n  line-height: 100px;\n}\n.index-module_breadcrumb__2Ahy2.ant-breadcrumb {\n  margin: 16px;\n  white-space: nowrap;\n}\n.index-module_breadcrumb__2Ahy2 span:last-child .ant-breadcrumb-link {\n  color: #595959;\n  width: auto;\n  overflow: hidden;\n}\n.index-module_breadcrumb__2Ahy2 span .ant-breadcrumb-link {\n  cursor: pointer;\n  font-weight: normal;\n  color: #8C8C8C;\n  width: 40px;\n  display: inline-block;\n  vertical-align: middle;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.index-module_breadcrumb__2Ahy2 .ant-breadcrumb-separator {\n  margin: 0 4px;\n  color: #595959;\n}\n.index-module_breadcrumb__2Ahy2 .ant-breadcrumb-separator .anticon {\n  font-size: 10px;\n}\n.index-module_emptyView__3UGpy {\n  height: 100%;\n  display: flex;\n  flex-flow: column;\n  justify-content: center;\n  padding: 16px;\n  font-size: 14px;\n  color: #8C8C8C;\n  text-align: center;\n}\n.index-module_emptyViewImg__35_eC {\n  margin: 0 auto 16px;\n  width: 100px;\n  height: 64px;\n  background: url(https://gw.alipayobjects.com/mdn/afts/img/A*QFaDQ7iMTcYAAAAAAAAAAABjAQAAAQ/original?bz=prod_resource) no-repeat center;\n  background-size: 100%;\n}\n.index-module_list__3AlBC {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n.index-module_listItem__1xvBd {\n  padding: 0 8px 0 16px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  cursor: pointer;\n  font-size: 14px;\n  color: #595959;\n  line-height: 24px;\n  transition: all 0.35s ease;\n}\n.index-module_listItem__1xvBd.index-module_fileItem__3u62e:hover::before {\n  content: "\\63D2\\5165";\n  position: absolute;\n  right: 4px;\n  color: #8C8C8C;\n  padding: 0 4px;\n  background-color: #f5f5f5;\n}\n.index-module_listItem__1xvBd.index-module_fileItem__3u62e.index-module_isEn__1ZsKr:hover::before {\n  content: "insert";\n}\n.index-module_listItem__1xvBd .index-module_arrow__frDmD {\n  transition: opacity 0.25s ease;\n  opacity: 0;\n  padding: 0 4px;\n  font-size: 10px;\n  color: #8C8C8C;\n}\n.index-module_listItem__1xvBd span {\n  color: #595959;\n}\n.index-module_listItem__1xvBd.index-module_listItemDisabled__3gDma {\n  cursor: not-allowed;\n  opacity: 0.5;\n}\n.index-module_listItem__1xvBd.index-module_listItemDisabled__3gDma,\n.index-module_listItem__1xvBd.index-module_listItemDisabled__3gDma:hover,\n.index-module_listItem__1xvBd.index-module_listItemDisabled__3gDma span,\n.index-module_listItem__1xvBd.index-module_listItemDisabled__3gDma span:hover {\n  color: #8C8C8C;\n}\n.index-module_listItem__1xvBd:hover {\n  background-color: #f5f5f5;\n}\n.index-module_listItem__1xvBd:hover .index-module_arrow__frDmD {\n  opacity: 1;\n}\n.index-module_listItemName__3tDkv {\n  margin-left: 8px;\n}\n.index-module_footer__2cSNR {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.index-module_columnsTitleBook__17_m8 {\n  display: flex;\n  align-items: center;\n  height: 42px;\n}\n.index-module_columnsTitleBook__17_m8 .book-name-text {\n  max-width: 80%;\n}\n.index-module_columnsTitleBook__17_m8 .book-name-scope {\n  margin-left: 8px;\n  top: 2px;\n}\n.index-module_book-name__ywZhh {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  line-height: 1.35;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.index-module_book-name__ywZhh span {\n  flex-shrink: 0;\n}\n.index-module_lark-book-title__393rb,\n.index-module_book-link__1H1Bo,\n.index-module_book-name__ywZhh {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  line-height: 1.35;\n}\n.index-module_lark-book-title__393rb .index-module_book-icon__3i9jd {\n  margin-right: 8px;\n}\n.index-module_book-name-text__34m-P {\n  display: block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.index-module_book-name-scope__3Tzno {\n  position: relative;\n  top: 0;\n}\n.index-module_book-name-scope__3Tzno .index-module_icon-svg__pfj_1 {\n  margin-left: 8px;\n}\n.index-module_book-name-orglabel__1KlXc {\n  margin-left: 12px;\n}\n.index-module_icon-svg__pfj_1 {\n  color: #8C8C8C;\n}\n.index-module_book-name-split__3co1- {\n  margin: 0 4px;\n}\n.index-module_permission__public__tip__3F935 {\n  margin-top: 12px;\n  line-height: 22px;\n}\n.index-module_permission__public__tip__3F935 .index-module_highlight__1fv27 {\n  color: #f5222d;\n}\n.index-module_searchWrap__174kp {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 16px;\n  border-bottom: 1px solid #e9e9e9;\n  background-color: #f9f9f9;\n}\n.index-module_searchWrap__174kp .larkui-input-search {\n  margin: 0 8px;\n}\n.index-module_searchWrap__174kp i {\n  cursor: pointer;\n}\n.index-module_searchWrap__174kp .anticon {\n  color: #595959 !important;\n}\n.index-module_contentBody__1fw6- {\n  overflow: auto;\n  overflow-x: hidden;\n}\n.index-module_errTip__1dBEm {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding-top: 80px;\n}\n.index-module_errTip__1dBEm .lake-svg-icon {\n  width: 56px;\n  height: 56px;\n}\n.index-module_errTipText__3zPkN {\n  margin-top: 36px;\n}\n');var tp=function(e){var t=e.breadsLevel,n=void 0===t?2:t,a=e.onSelect,i=e.onClose,o=e.locale,c=e.lang,l=e.actions,s=Object(_.useState)(!1),u=_e()(s,2),d=u[0],f=u[1],p=Object(_.useState)(!1),h=_e()(p,2),m=h[0],g=h[1],v=Object(_.useState)(null),b=_e()(v,2),k=b[0],w=b[1],x=Object(_.useState)([]),E=_e()(x,2),O=E[0],S=E[1],R=Object(_.useState)([]),D=_e()(R,2),A=D[0],T=D[1],P=Object(_.useState)(null),j=_e()(P,2),M=j[0],N=j[1],L=Object(_.useState)([]),I=_e()(L,2),B=I[0],F=I[1],V=Object(_.useState)(!1),U=_e()(V,2),q=U[0],H=U[1],W=Object(_.useState)(null),Y=_e()(W,2),X=Y[0],$=Y[1],Z=Object(_.useRef)(null);Object(_.useEffect)((function(){M||X?function(e){f(!0);var t={book_id:e&&e.book_id||M&&M.id};e&&(t.parent_id=e.id),Object(r.ajax)({url:l.resourceAction,method:"GET",data:t}).promise.then((function(e){e&&e.data?S(e.data):(g(!0),S([])),f(!1)}))}(k):(f(!0),Object(r.ajax)({url:l.booksAction,method:"GET",data:{type:"Resource",filterByAbility:"download"}}).promise.then((function(e){e&&e.data?T(e.data):(g(!0),T([])),w(null),f(!1)})))}),[M,k]);var Q=function(e){if("root"===e)return N(null),void F([]);if(!e)return w(null),void F([]);if("Resource"===e.type)return N(e),w(null),void F([e]);if("file"!==e.type){w(e);var t=B.findIndex((function(t){return t.id===e.id}));if(t<0)F([].concat(ge()(B),[e]));else{var n=ge()(B).slice(0,t+1);F(n)}}else a&&("Doc"===e.target_type&&(e.url="".concat(window.location.origin,"/go/resource/").concat(e.id),e.detail={title:e.filename,type:"lakesheet"===e.ext?"sheet":"doc"}),a(e))},J=M||X?O:A;return m?C.a.createElement("div",{className:ep.resourceSelectPanel},C.a.createElement("div",{className:ep.errTip},C.a.createElement("span",{className:"lake-svg-icon lake-svg-icon-regret"}),C.a.createElement("div",{className:ep.errTipText},o.error))):C.a.createElement("div",{className:ep.resourceSelectPanel},C.a.createElement("div",{className:ep.searchWrap},q?C.a.createElement("div",{className:ep.searchHeader},C.a.createElement(z.a.Search,{ref:Z,placeholder:o.searchTip,allowClear:!1,className:ep.searchInput,onSearch:function(e){if(""!==e){f(!0);var t=A&&A.map((function(e){return e.id}))&&A.map((function(e){return e.id})).join(",");Object(r.ajax)({url:l.resourceSearchAction,method:"GET",data:{book_ids:t,query:e}}).promise.then((function(e){e&&e.data?($(e.data),S(e.data)):($(null),S([]),g(!0)),F([]),f(!1)}))}}})):C.a.createElement("div",{className:ep.readHeader},C.a.createElement("div",{className:ep.headerTitle},o.title),C.a.createElement("a",{onClick:function(){H(!0),setTimeout((function(){Z.current&&Z.current.focus()}),100),F([])}},C.a.createElement(Ie.a,null))),C.a.createElement("a",{onClick:function(){q?(H(!1),$(null),N(null),F([]),w(null)):i&&i()}},C.a.createElement(Fe,null))),C.a.createElement("div",{className:ep.contentBody},C.a.createElement(G.a,{className:ep.breadcrumb,"data-testid":"moving-modal-breadcrumbs"},X?C.a.createElement(G.a.Item,{onClick:function(){S(X),F([])}},C.a.createElement("span",null,o.searchResultTip)):C.a.createElement(G.a.Item,{onClick:function(){Q("root")}},C.a.createElement("span",null,o.topLevelBreadcrumbName)),B&&B.length>n&&C.a.createElement(G.a.Item,{className:ep.resourceBreadcrumbEllipsis},"..."),B&&B.length>0&&B.slice(-n).map((function(e){return C.a.createElement(G.a.Item,{key:"".concat(e.id,"-").concat(e.filename||e.name),onClick:function(){return Q(e)}},C.a.createElement("span",{title:e.filename||e.name},e.filename||e.name))}))),C.a.createElement("div",{className:ep.card},d?C.a.createElement("div",{className:ep.loading},C.a.createElement(K.a,{justify:"block"})):C.a.createElement(C.a.Fragment,null,J.length>0?C.a.createElement("ul",{className:ep.list},J.map((function(e){var t;if(!e)return null;var n=e.user||{},r="file"===e.type,a="en"===c;return C.a.createElement("li",{key:e.id||e.uid,className:le()(ep.listItem,(t={},y()(t,ep.fileItem,r),y()(t,ep.isEn,a),t)),onClick:function(){return Q(e)}},M||X?C.a.createElement(Jf,{book:M,item:e,isLink:!1,size:20}):C.a.createElement("div",{className:ep.columnsTitleBook},C.a.createElement("span",{className:ep["lark-book-title"]},C.a.createElement(Rf,{name:"book-type-resource",width:20,className:ep["book-icon"]}),C.a.createElement("span",{className:ep["book-name"],title:"".concat(n.name,"/").concat(e.name)},C.a.createElement("span",null,n.name,C.a.createElement("span",{className:ep["book-name-split"]},"/")),C.a.createElement("span",{className:ep["book-name-text"],title:e.name},e.name)))))}))):C.a.createElement("div",{className:ep.emptyView},C.a.createElement("div",{className:ep.emptyViewImg}),A&&A.length>0?o.emptySearchTip:C.a.createElement("span",null,o.noResourceBook,C.a.createElement("a",{href:"/new?scene=resource",target:"__blank"},o.create)))))))};tp.propTypes={breadsLevel:R.a.number,locale:R.a.object,onSelect:R.a.func,onClose:R.a.func,lang:R.a.string,actions:R.a.shape({booksAction:R.a.string.isRequired,resourceAction:R.a.string.isRequired,resourceSearchAction:R.a.string.isRequired}).isRequired};var np=uf(tp);function rp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ap(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rp(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ip={booksAction:"/api/mine/books",resourceAction:"/api/resources",resourceSearchAction:"/api/resources/search"},op=function(e){f()(n,_.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){var e;o()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),y()(u()(e),"onSelectFile",(function(t){e.props.engine.command.execute("transfer",t)})),e}return l()(n,[{key:"render",value:function(){var e=this.props.engine,t=ap(ap({},ip),e.options.resource);return C.a.createElement(np,oe()({},this.props,{lang:this.props.engine.options.lang,locale:this.props.engine.locale.repositorySidebar,actions:t,onSelect:this.onSelectFile}))}}]),n}();function cp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cp(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}y()(op,"propTypes",{engine:R.a.object.isRequired,onClose:R.a.func.isRequired});var sp={toc:!0,translate:!0,premium:!0},up={toc:!0,translate:!0,repository:!0},dp=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),r=t.call(this,e),y()(u()(r),"currentScrollBar",null),y()(u()(r),"extends",(function(){r.props.engine.sidebar={set:r.set,close:r.close,store:r.store,restore:r.restore}})),y()(u()(r),"set",(function(e){if(e){var t=r.state.stack,n=t[t.length-1],a=ge()(t);n?n.name===e.name?a[a.length-1]=e:up[e.name]?a=[e]:up[n.name]?a.push(e):a[a.length-1]=e:a=[e];var i=r.props.engine;r.setState(lp(lp({},r.state),{},{stack:a})),i.sidebar.activate=e.name;var o=a[a.length-1];n&&n.name===o.name||r.emitSidebarChange(o.name),i.toolbar.updateState()}else r.close()})),y()(u()(r),"close",(function(e){var t=r.props.engine,n=r.state.stack;if(n.length&&(!e||e===n[n.length-1].name)){var a=n.slice(0,n.length-1);if(r.setState(lp(lp({},r.state),{},{stack:a})),a.length){var i=a[a.length-1];r.emitSidebarChange(i.name),t.sidebar.activate=i.name}else r.emitSidebarChange("none"),t.sidebar.activate="none";t.toolbar.updateState()}})),y()(u()(r),"handleCloseClick",(function(){r.close()})),y()(u()(r),"store",(function(){})),y()(u()(r),"restore",(function(e){r.close(e)})),r.contentNode=C.a.createRef(),r.state={stack:[]},r}return l()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.engine,n=e.defaultType;this.extends(),"none"!==n&&setTimeout((function(){t.command.execute(n,!0)}),10)}},{key:"componentDidUpdate",value:function(e,t){var n=t.stack.length?t.stack[t.stack.length-1].name:null,r=this.state.stack.length?this.state.stack[this.state.stack.length-1].name:null;n!==r&&(window.dispatchEvent(new Event("resize")),sp[r]?this.currentScrollBar=new yt(Object(a.a)(this.contentNode.current),!1,!0):this.currentScrollBar&&this.currentScrollBar.destroy())}},{key:"emitSidebarChange",value:function(e){this.props.engine.event.trigger("sidebarchange",e)}},{key:"render",value:function(){var e=this,t=this.props.engine,n=this.state.stack;if(0===n.length)return null;var r=n[n.length-1],a=r.name,i=r.title,o=r.data,c=r.className,l=r.onClose,s={engine:t,data:o};return"none"===a?null:C.a.createElement("div",{className:le()("lake-sidebar","lake-sidebar-active","lake-common-sidebar",c),"data-lake-element":"sidebar",ref:function(t){e.current=t}},i&&C.a.createElement("div",{className:"lake-sidebar-title"},i,C.a.createElement("div",{className:"lake-sidebar-close",onClick:l||this.handleCloseClick},C.a.createElement("span",{className:"lake-icon lake-icon-close"}))),C.a.createElement("div",{className:"lake-sidebar-content",ref:this.contentNode},"diagram"===a&&C.a.createElement(wf,s),"toc"===a&&C.a.createElement(hf,s),"image"===a&&C.a.createElement(yf,s),"translate"===a&&C.a.createElement(bf,s),"localdoc"===a&&C.a.createElement(kf,s),"video"===a&&C.a.createElement(xf,s),"audio"===a&&C.a.createElement(Cf,s),"premium"===a&&C.a.createElement(Sf,s),"repository"===a&&C.a.createElement(op,oe()({},s,{onClose:this.handleCloseClick}))))}}]),n}(C.a.Component);y()(dp,"propTypes",{engine:R.a.object,defaultType:R.a.string}),y()(dp,"defaultProps",{defaultType:"toc"});var fp=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),(r=t.call(this,e)).state={searchValue:e.data?e.data.searchValue:null,replacement:""},r}return l()(n,[{key:"componentWillUnmount",value:function(){var e=this.props.engine,t=e.search;t.clear(),t.off("after:select",this.onAfterSelect),e.off("change",this.onDocChange)}},{key:"componentDidMount",value:function(){var e=this,t=this.props.engine,n=t.search,r=this.inputRef.input,a=function(){e.setState({engine:t})},i=function(){t.command.queryState("search")&&t.search.reFind()};if(this.onAfterSelect=a,this.onDocChange=i,n.on("after:select",a),r.focus(),t.on("change",i),this.state.searchValue){var o=n.find(this.state.searchValue);n.select(o[0])}}},{key:"render",value:function(){var e=this,t=X.a.TabPane,n=this.props,r=n.engine,i=n.onClose,o=r.search,c=r.locale.search,l=this.state,s=l.searchValue,u=l.replacement,d=o.count(),f=C.a.createElement("p",{style:{marginBottom:"12px"}},C.a.createElement(z.a,{accessbilityid:"search-input",placeholder:c.pleaseEnter,onKeyDown:function(e){Object(a.t)("enter",e)&&o.next()},onChange:function(t){var n=o.find(t.target.value);o.select(n[0]),e.setState({searchValue:t.target.value}),o.scrollIntoView()},ref:function(t){e.inputRef=t},value:s,suffix:0===d?C.a.createElement("span",{className:"count"},"0"):C.a.createElement("span",{className:"count"},d[0],"/",d[1])})),p=C.a.createElement("p",{style:{marginBottom:"16px"}},C.a.createElement(z.a,{accessbilityid:"replace-input",placeholder:c.pleaseEnter,onChange:function(t){e.setState({replacement:t.target.value})}})),h=C.a.createElement(B.a,{onClick:function(){o.next()},disabled:!(0!==d&&d[0]!==d[1])},c.next),m=C.a.createElement(B.a,{onClick:function(){o.prev()},disabled:!(0!==d&&1!==d[0])},c.previous);return C.a.createElement(X.a,{defaultActiveKey:"search",animated:!1,className:"lake-search",style:{padding:"0 2px"},tabBarExtraContent:C.a.createElement("span",{className:"lake-icon lake-icon-close",accessbilityid:"searchreplace-close-button",onClick:function(){i()}})},C.a.createElement(t,{tab:c.search,key:"search"},f,C.a.createElement("p",{style:{textAlign:"right"}},m,h)),C.a.createElement(t,{tab:c.replace,key:"replace"},C.a.createElement("p",null,c.search),f,C.a.createElement("p",null,c.replaceTo),p,C.a.createElement("p",{style:{textAlign:"right"}},C.a.createElement(B.a,{onClick:function(){o.replaceAll(u),o.scrollIntoView()},style:{marginLeft:"0px"},disabled:0===d},c.replaceAll),C.a.createElement(B.a,{onClick:function(){o.replace(u),o.scrollIntoView()},disabled:0===d},c.replace),m,h)))}}]),n}(C.a.Component);y()(fp,"propTypes",{engine:R.a.object,onClose:R.a.func,data:R.a.object});var pp=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),r=t.call(this,e),y()(u()(r),"onEsc",(function(e){Object(a.t)("esc",e)&&r.close()})),y()(u()(r),"extends",(function(){r.props.engine.dialog={set:r.set,close:r.close,store:r.store,restore:r.restore}})),y()(u()(r),"set",(function(e){e||r.close();var t=r.props.engine;r.setState(e),dr("lake-dialog",e.name),t.toolbar.updateState()})),y()(u()(r),"close",(function(){r.setState({name:"none"}),dr("lake-dialog","none")})),y()(u()(r),"store",(function(e){var t=r.props.engine;r.storeConfig=e,t.dialog.storeConfig=e})),y()(u()(r),"restore",(function(){r.set(r.storeConfig)})),r.state={name:"none"},r}return l()(n,[{key:"componentDidMount",value:function(){Object(a.a)(document).on("keydown",this.onEsc),this.extends()}},{key:"componentWillUnmount",value:function(){Object(a.a)(document).off("keydown",this.onEsc)}},{key:"render",value:function(){var e=this.state.name;return"none"===e?null:C.a.createElement("div",{className:"lake-dialog"},"search"===e&&C.a.createElement(fp,oe()({},this.props,{data:this.state.data,onClose:this.close})))}}]),n}(C.a.Component);function hp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hp(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gp(e){if(!e)return null;var t=/<meta name="doc-version" content="(\d+)"\s*\/>/.exec(e);return t?Number(t[1]):0}function vp(e){if(!e)return null;var t=/<meta name="viewport" content="(\D+?)"\s*\/>/.exec(e),n=t&&t[1];return"fixed"!==n&&"adapt"!==n?"fixed":n}function yp(e){if(!e)return null;var t=/<meta name="typography" content="(\D+?)"\s*\/>/.exec(e),n=t&&t[1];return"classic"!==n&&"traditional"!==n?"traditional":n}function bp(e){for(var t=document.querySelectorAll('[data-lake-card="'.concat(e,'"]')),n=0,r=0;r<t.length;r++){var a=t[r].dataset.cell_count;a&&(n+=Number(a))}return n}function kp(e){var t=function(e){try{return mp({},function(e){var t={};return e?(e.replace(/(<card\s+[^>]+>).*?<\/card>/gi,(function(e,n){var r=a.n.getAttrMap(n),i=r.name;return"thirdparty"===i&&r.alias&&(i="thirdparty_"+r.alias),t[i]?t[i]++:t[i]=1,e})),t):t}(e))}catch(e){return console.warn("Doc statistic fail: "+e),{}}}(e);return mp({docVersion:gp(e),viewport:vp(e),typography:yp(e),mindmapCellCount:bp("mindmap"),flowchartCellCount:bp("flowchart2")},t)}function wp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wp(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}y()(pp,"propTypes",{engine:R.a.object});var _p=function(e){f()(n,k.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;if(o()(this,n),r=t.call(this,e),y()(u()(r),"_filter",(function(e){return!(e.getAttribute("data-lake-card")&&!r.engine.card.getComponent(Object(a.a)(e)).constructor.canSearch)})),!e.target)throw new Error("please set a dom element as target!");return r.options=xp({target:null,style:{highlight:{fill:"rgba(255, 230, 0, 0.5)"},select:{fill:"rgba(255, 140, 0, 0.5)"}},filter:null},e),r.ranges=[],r._initTarget(),r._createCanvas(),r.engine=e.engine,r}return l()(n,[{key:"_saveCardValue",value:function(e){var t=e.commonAncestorContainer,n=this.engine.card.closest(t);n&&this.engine.card.getComponent(n).saveValue(!0)}},{key:"_initTarget",value:function(){var e=this.options.target;"static"===Ct(e,"position")&&(e.style.position="relative")}},{key:"_createCanvas",value:function(){var e=this.options.target,t=document.createElement("div");t.style.position="absolute",t.style.top=0,t.style.left=0,t.style["pointer-events"]="none",e.appendChild(t);var n=new a.p({container:t});this.container=t,this.canvas=n}},{key:"_resizeCanvas",value:function(){var e=this.options.target,t=this.canvas,n=Et(e),r=Ot(e);t.resize(n,r)}},{key:"_getRelativeRect",value:function(e){var t=this.container,n=e.getBoundingClientRect(),r=t.getBoundingClientRect();return{x:n.left-r.left,y:n.top-r.top,width:n.right-n.left,height:n.bottom-n.top}}},{key:"_cacheRange",value:function(e){return{startOffset:e.startOffset,endOffset:e.endOffset,startContainer:e.startContainer,endContainer:e.endContainer,commonAncestorContainer:e.commonAncestorContainer}}},{key:"_isRangeWrap",value:function(e){var t=this._cacheRange(e);e.setEnd(t.startContainer,t.startOffset+1);var n=e.getBoundingClientRect();e.setEnd(t.startContainer,t.endOffset-1),e.setStart(t.endContainer,t.endOffset);var r=e.getBoundingClientRect();return e.setStart(t.startContainer,t.startOffset),e.setEnd(t.endContainer,t.endOffset),n.bottom!==r.bottom}},{key:"_drawOneByOne",value:function(e,t){for(var n=this._cacheRange(e),r=this.canvas,a=n.startOffset;a<n.endOffset;){e.setStart(n.commonAncestorContainer,a),e.setEnd(n.commonAncestorContainer,a+1);var i=this._getRelativeRect(e);r.clearRect(i),r.draw("Rect",xp(xp({},i),t)),a++}e.setStart(n.startContainer,n.startOffset),e.setEnd(n.endContainer,n.endOffset)}},{key:"_drawRangeBackground",value:function(e,t){var n=this.canvas;if(this._isRangeWrap(e))return this._drawOneByOne(e,t);var r=this._getRelativeRect(e);n.clearRect(r),n.draw("Rect",xp(xp({},r),t))}},{key:"_highlightRanges",value:function(e){var t=this;e.forEach((function(e){t._highlightRange(e)}))}},{key:"_clearRange",value:function(e){var t=this.canvas,n=this._getRelativeRect(e);t.clearRect(n)}},{key:"_highlightRange",value:function(e){var t=this.options.style.highlight;this._drawRangeBackground(e,t)}},{key:"_selectRange",value:function(e){var t=this.options.style.select;this._drawRangeBackground(e,t)}},{key:"_clearCanvas",value:function(){this.canvas.clear()}},{key:"_move",value:function(e){var t=this.selectedRange,n=this.ranges;if(t){var r=n.indexOf(t),a=n[r+e];a||(a=e>0?n[e-1]:n[n.length+e]),this._highlightRange(t),this.select(a),this.scrollIntoView()}}},{key:"_replace",value:function(e,t){var n=e.commonAncestorContainer.parentNode,r=document.createTextNode(t);"A"===n.tagName&&n.getAttribute("href")===n.innerText&&n.setAttribute("href",t),e.deleteContents(),e.insertNode(r)}},{key:"replace",value:function(e){if(!_t(e)){var t=this.selectedRange;if(this.ranges.length>0){var n={range:t};this.emit("before:replace",n),this._replace(t,e),this._clearRange(t),this.emit("after:replace",n),this._saveCardValue(t),this.engine.change.combinTextNode()}}}},{key:"replaceAll",value:function(e){var t=this;if(!_t(e)){var n=this.ranges,r={ranges:n};this.emit("before:replaceAll",r),n.forEach((function(n){t._replace(n,e)})),this.emit("after:replaceAll",r),n.forEach((function(e){t._saveCardValue(e)})),this.engine.change.combinTextNode(),this.clear()}}},{key:"show",value:function(){this.container.style.display=""}},{key:"hide",value:function(){this.container.style.display="none"}},{key:"find",value:function(e,t){var n=[];if(this.clear(),e&&xt(e,"String")&&e.length>0){t=function(e){return xt(e,"Function")}(t)?t:this._filter,this._resizeCanvas();var r=St(this.options.target,t);r.length>0&&(n=function(e,t){var n=[];return e.forEach((function(e){var r=e.nodeValue,a=t.length;(function(e,t){for(var n=[],r=t.length,a=e.indexOf(t);a>-1;)n.push(a),a=e.indexOf(t,a+r);return n})(r,t).forEach((function(t){var r=document.createRange();r.setStart(e,t),r.setEnd(e,t+a),n.push(r)}))})),n}(r,e),this._highlightRanges(n),this.ranges=n,this.keyword=e)}return this.ranges=n,n}},{key:"reFind",value:function(){var e=this.selectedRangeIndex,t=this.find(this.keyword);if(t.length>0&&!_t(e)){var n=t[e]?t[e]:t[0];this.select(n)}return t}},{key:"scrollIntoView",value:function(){if(this.selectedRange){var e=this.selectedRange.commonAncestorContainer.parentElement;(t=e.getBoundingClientRect()).top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)||(e.scrollIntoView({block:"center"}),document.documentElement.scrollTop=0,document.body.scrollTop=0)}var t}},{key:"select",value:function(e){if(!_t(e)){var t=this.ranges,n=e;xt(e,"Number")&&(n=t[e]);var r={range:n};this.emit("before:select",r),this._selectRange(n),this.selectedRange=n,this.selectedRangeIndex=t.indexOf(n),this.emit("after:select",r)}}},{key:"next",value:function(){this._move(1)}},{key:"prev",value:function(){this._move(-1)}},{key:"clear",value:function(){this._clearCanvas(),this.selectedRange=void 0,this.ranges=[],this.keyword=void 0}},{key:"count",value:function(){var e=this.ranges;if(0===e.length)return 0;var t=this.selectedRange;return[e.indexOf(t)+1,e.length]}},{key:"destroy",value:function(){var e=this.container;this.options=null,e.parentElement.removeChild(e)}}]),n}();function Cp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ep=function(e){f()(n,k.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;if(o()(this,n),r=t.call(this,e),!e.action)throw new Error("please set a translation action!");return r.options=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cp(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({action:null},e),r}return l()(n,[{key:"_getMiniParagraphElements",value:function(e){var t=[];return e.forEach((function(e){"UL"===e.tagName?e.childNodes.forEach((function(e){t.push(e)})):t.push(e)})),t}},{key:"_getSourceText",value:function(e){var t=e.childNodes,n=e.isCrossRow,r="";if(n)this._getMiniParagraphElements(t).forEach((function(e){r+=e.innerText+"\n"}));else{var a=document.createElement("div");t.forEach((function(e){a.append(e)})),r=a.innerText}return r}},{key:"_translateFragment",value:function(e){var t=e.isCrossRow,n=e.targetPlainText,r=e.fragment;if(t){var i=n.split("\n"),o=r.childNodes;this._getMiniParagraphElements(o).forEach((function(e,t){e.innerHTML=a.n.escape(i[t])}))}else r.append(document.createTextNode(n))}},{key:"_getChildNodes",value:function(e){var t=this.options.engine,n=Array.from(e.childNodes).filter((function(e){return!t.card.closest(e)}));return n.forEach((function(e){a.k.walkTree(e,(function(e){t.card.closest(e)&&e.parentNode.removeChild(e)}))})),n}},{key:"request",value:function(e){var t=this.options,n=t.action,r=t.engine,a=e.q,i=e.source,o=e.target;if(r.options.translateRequestHandler)return r.options.translateRequestHandler(e);var c=new Request(n,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({appName:"skylark",format:"text",srcTextList:[a],srcLanguage:i,tgtLanguage:o})});return fetch(c).then((function(e){if(!e.ok)throw new Error("Unexpected response (".concat(e.status,")"));return e.json()})).then((function(e){if(200!==e.code)throw new Error(e.data&&e.data.message);return{data:e.data[0]}}))}},{key:"translate",value:function(e,t,n){var r=this,i=this.options.engine;if(e&&t&&n&&!i.card.closest(e.commonAncestorContainer)&&!Object(a.a)(e.commonAncestorContainer).closest(".sub-editor-content")[0]){var o=e.cloneContents(),c=Object(a.a)(e.commonAncestorContainer).isRoot()||"UL"===e.commonAncestorContainer.tagName,l=this._getChildNodes(o),s=this._getSourceText({childNodes:l,isCrossRow:c});s&&"\n\n"!==s&&" "!==s&&this.request({q:s,source:t,target:n}).then((function(e){var t=e.data;r._translateFragment({isCrossRow:c,targetPlainText:t,fragment:o}),r.emit("success",{targetPlainText:t,fragment:o})})).catch((function(e){r.emit("fail",{errorMsg:e.message})}))}}}]),n}();function Op(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Op(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Op(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Rp={en:bn,"zh-cn":Tn},Dp=[".sketch",".key",".psd"],Ap=function(){function e(){o()(this,e),y()(this,"needCloseCount",0)}return l()(e,[{key:"show",value:function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(r||(this.needCloseCount++,!(this.needCloseCount>e.MaxCloseMessageCount)))return"error"===t||"warning"===t?A.a[t](n,r?void 0:0):void 0}}]),e}();y()(Ap,"MaxCloseMessageCount",3);var Tp=function(e){f()(i,k.a);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(i);function i(e){var t;return o()(this,i),(t=n.call(this,e)).options=Sp(Sp({},e),{},{cache:{}}),t.uploadingCards={},t.uploadingFiles={},t.updateHistoryCard={},t.cardIds={},t}return l()(i,[{key:"getUid",value:function(e){return Date.now()+"-"+e}},{key:"addUploadingCard",value:function(e,t){this.uploadingCards[e]=t}},{key:"getAccept",value:function(e){return"image"===e?a.u.android?"image/*":a.e.IMAGE_EXT_STR:"file"===e?a.e.FILE_EXT_STR:"localdoc"===e?a.e.OFFICE_EXT_STR+", "+a.e.MAC_OFFICE_STR:void 0}},{key:"getAllowedExtensions",value:function(e){return"image"===e?a.e.IMAGE_EXT_STR:this.getAccept(e)||""}},{key:"parseExtension",value:function(e){var t=a.h.getFileExtname(e),n={raw:t,actual:t};return/\.mindnode\.zip$/.test(e.name)?n.actual="mindnode":/\.xmind\.zip$/.test(e.name)&&(n.actual="xmind"),n}},{key:"getLang",value:function(){return this.engine&&this.engine.options.lang||"zh-cn"}},{key:"getErrorMessageByCode",value:function(e){var t=Rp[this.getLang()].file;return(void 0===t?{}:t)[e]}},{key:"request",value:(t=he()(fe.a.mark((function e(t,n,a){var i,o,c,l,s,u,d,f,p,h=this;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=this.options.engine,o=a.onBeforeUpload,c=a.onAfterUpload,l=n.map((function(e,t){return e.uid||(e.uid=h.getUid(t)),e.uid})),s=new Ap,u=[],d=0;case 6:if(!(d<n.length)){e.next=14;break}return e.next=9,this.handleBeforeUpload(s,t,n[d],n,a);case 9:e.sent?u.push(n[d]):u.push(null);case 11:d++,e.next=6;break;case 14:o&&o(),f=fe.a.mark((function e(n){var a,o,c,d,f,p,m;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=u[n]){e.next=3;break}return e.abrupt("return","continue");case 3:return o=i.options.disableImageOCR,c=new FormData,(d=h.cardIds[a.uid])&&c.append("element_id",d),o&&c.append("ocr","off"),c.append("file",a,a.name),f="localdoc"===t?"file":t,"localdoc"===t&&h.options.actions.localdoc&&(f="localdoc"),p=h.options.actions[f],m=i.locale[t]||{},e.next=15,Object(r.ajax)({method:"post",xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",(function(e){if(e.lengthComputable){var n=parseInt(e.loaded/e.total*100,10);h.handleChange(t,"uploading",{uid:a.uid,progress:{percent:n}})}}),!1),e},url:p,data:c,dataType:"json",success:function(e){var n=e.data,r=n.ocrLocations,i=n.url,c={uid:a.uid,uidList:l,src:i,ocrLocations:r};o&&delete c.ocrLocations,h.handleChange(t,"done",c)},error:function(e){var n="",r="error",i=!1,o=function(){};if(e&&e.xhr&&e.xhr.response){var c;try{c=JSON.parse(e.xhr.response)}catch(e){n=""}if(c&&400===c.status&&c.code){var u=cn.getMessageByCode(c.code,c);u&&(n=u.msg,r=u.level,i=u.alwaysOpen,o=u.callback)}n=n||c&&c.message||""}else n=e.message;n||(n=m.uploadFailed),h.handleChange(t,"error",{uid:a.uid,uidList:l,message:n}),o(s.show(r,n,!i))},processData:!0}).promise;case 15:case"end":return e.stop()}}),e)})),p=0;case 17:if(!(p<u.length)){e.next=25;break}return e.delegateYield(f(p),"t0",19);case 19:if("continue"!==e.t0){e.next=22;break}return e.abrupt("continue",22);case 22:p++,e.next=17;break;case 25:c&&c();case 26:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"post",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return"file"===e?t=t.filter((function(e){return a.h.isFile(e)})):"image"===e?t=t.filter((function(e){return a.h.isImage(e)})):"localdoc"===e&&(t=t.filter((function(e){return a.h.isFile(e)}))),0!==t.length&&(this.request(e,t,n),!0)}},{key:"handleBeforeUpload",value:function(e,t,n,r,i){var o=this,c=i.onBeforeInsertCard,l=this.options.engine,s=n.uid,u=n.name,d=n.size,f=n.type,p=this.parseExtension(n),h=l.iframeHelper;if("localdoc"===t){if(!h.canAdd()){var m=h.options.limit;return l.messageError(l.locale.card.iframeOverLimit.replace("${limit}",m)),!1}var g=n.size,v=void 0===g?0:g,y=n.name,b=void 0===y?"":y;if(a.h.isMacOffice(b)&&v>209715200){if(!Dp.some((function(e){return b.endsWith(e)})))return l.messageError(l.locale.card.sizeOverLimit.replace("${sizeLimit}","".concat(200," MB"))),!1;if(v>524288e3)return l.messageError(l.locale.card.sizeOverLimit.replace("${sizeLimit}","".concat(500," MB"))),!1}}var k=this.getAllowedExtensions(t);if(!p.actual||k&&k.indexOf(p.actual)<0)return l.messageError(l.locale[t].formatError),!1;var w=cn.check(t,n.size);return null!==w?(w.callback(e.show(w.level,w.msg,!w.alwaysOpen)),!1):new Promise((function(e){var r=new FileReader;r.addEventListener("load",(function(){o.uploadingFiles[s]={uid:s,src:r.result,name:u,size:d,type:f,ext:p.raw,progress:{percent:0}},o.handleChange(t,"before",o.uploadingFiles[s],{file:n,onBeforeInsertCard:c}),e(n)}),!1),r.addEventListener("error",(function(){l.messageError(l.locale.file.failReadFile),e(!1)})),r.readAsDataURL(n)}))}},{key:"handleChange",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=this.options.engine,o=n.uid,c=Sp({},n),l=r.onBeforeInsertCard,s=r.file;if("image"===e&&Mt(c.src)&&delete c.src,c.status=t,"before"!==t){var u=this.uploadingCards[o];if(!u||0===u.closest("body").length){for(var d=0,f=i.card.components.length;d<f;d++)if(i.card.components[d].component.value.uid===o){u=i.card.components[d].node;break}if(!u||!u[0]||!u[0].isConnected)return void delete this.uploadingCards[o]}if("uploading"!==t)delete this.uploadingCards[o],delete this.uploadingFiles[o],a.q.updateCard(i,u,c,this.updateHistoryCard[o]);else{i.history.hold(),a.q.updateCardProgress(u,c);var p=i.card.getComponent(u);p.updateProgress&&p.updateProgress(a.q.getUploadPercent(c.progress))}}else if("image"===e&&(c.margin={top:!0,bottom:!0}),l&&l(s,c),this.uploadingCards[o])this.updateHistoryCard[o]=!0;else{var h=a.q.insertCard(i,e,c),m=h.attr("id");m&&(this.cardIds[o]=m),this.addUploadingCard(o,h)}}}]),i}();function Pp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var jp=function(){function e(t){o()(this,e),this.options=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pp(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({limit:20},t),this.iframeItems=[]}return l()(e,[{key:"add",value:function(e){var t=this.options.limit;return this.canAdd()?(this.iframeItems.push(e),!0):(console.warn("can not add embed card more than ".concat(t)),!1)}},{key:"setSrc",value:function(e,t,n){var r=window.lozad_observer;n&&r?(e.addClass("lozad"),e.attr("data-src",t),r.observe()):e.attr("src",t)}},{key:"render",value:function(e,t,n){var r=this,a=e.iframe,i=e.url;t?setTimeout((function(){r.setSrc(a,i,n)}),t):this.setSrc(a,i,n)}},{key:"remove",value:function(e){var t=this.iframeItems,n=t.indexOf(e);n>-1&&t.splice(n,1)}},{key:"canAdd",value:function(){return this.iframeItems.length<this.options.limit}},{key:"clear",value:function(){this.iframeItems=[]}},{key:"destroy",value:function(){this.options=void 0,this.iframeItems=void 0}}]),e}();function Mp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Np(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Np(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Np(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ip={search:_p,translate:Ep,uploader:Tp,iframeHelper:jp,pasteFileTransfer:function(){function e(t){o()(this,e),this.options=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mp(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({needTransferCards:["file","localdoc"],engine:null},t),this.action=this._getAttachmentCopyAction(),this.bindEvent()}return l()(e,[{key:"_getAttachmentCopyAction",value:function(){return js(this.options.engine)}},{key:"_transferFile",value:function(e,t){var n=this.options.engine;Object(r.ajax)({method:"post",url:this.action,data:{attachments:[t.refSrc.replace(/(.*?)attachments\//,"")]},success:function(t){var r=t.data[0].url;r?a.q.updateCard(n,e,{src:r,status:"done"},!0):a.q.updateCard(n,e,{status:"error",message:"转存失败：资源不存在或者无权访问"},!0)},error:function(){a.q.updateCard(n,e,{status:"error"},!0)}})}},{key:"bindEvent",value:function(){var e=this,t=this.options,n=t.engine,r=t.needTransferCards;n.on("paste:each",(function(e){var t=e.attr("data-ready-card");if(r.indexOf(t)>-1){var a=n.card.getValue(e),i=a.src;i&&(a.src="",a.status="transfering",a.refSrc=i,n.card.setValue(e,a))}}));var i="[data-lake-card="+r.join("],[data-lake-card=")+"]";n.on("paste:after",(function(){n.editArea.find(i).each((function(t){var r=Object(a.a)(t),i=n.card.getComponent(r).value;"transfering"===i.status&&i.refSrc&&e._transferFile(r,i)}))}))}}]),e}()};function zp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e&&Ip[t]&&(n=Lp(Lp({},n),{},{engine:e}),e[t]=new Ip[t](n))}var Bp=function(){function e(){o()(this,e)}return l()(e,[{key:"update",value:function(e,t,n){for(var r=e;r<t;r++){var a="migrate_v".concat(r,"_to_v").concat(r+1);this[a]&&this[a](n)}}},{key:"migrate_v0_to_v1",value:function(e){var t=e.find('[data-lake-card="table"]');t.before("<p>"),t.after("<p>")}}]),e}(),Fp={};function Vp(e,t){a.k.walkTree(e,(function(e){!function(e,t){if(e.nodeType===Node.ELEMENT_NODE&&e.classList.length>0){var n=e.classList.toString();if(!Fp[n]){var r=window.getComputedStyle(e);Fp[n]={},t.forEach((function(e){Fp[n][e]=r.getPropertyValue(e)}))}t.forEach((function(t){e.style[t]=Fp[n][t]}))}}(e,t)}))}function Up(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.whiteSpace;e.empty();var r=a.s.card.getValue(e);if(r&&r.code){var i=Ja[r.mode]?r.mode:"plain";e.append(ri({mode:i}));var o=e.find(".lake-codeblock-content");if(o.css({border:"1px solid #e8e8e8","max-width":"750px"}),ai(o,i,r.code,{lineWrapping:!0}),o.addClass("lake-engine-view"),o.hide(),document.body.appendChild(o[0]),Vp(o,["color","margin","padding","background"]),e.find(".lake-codeblock").remove(),i&&e.attr("data-language",i),n){var c=o.find("pre");c.css({"white-space":"pre-wrap","word-break":"break-all"})}o.show(),o.css("background","#f9f9f9"),e.append(o),o.removeClass("lake-engine-view"),e.find(".CodeMirror").removeClass("CodeMirror")}}function qp(e){var t=e.find("table"),n=[];t.css("width","".concat(560,"px")),t.each((function(e){var t,r=(e=Object(a.a)(e)).find("colgroup"),i=r.children(),o=0;i.each((function(e){var t=parseInt(e.getAttribute("width"));o+=t}));var c=i.length;for(t=0;t<c;t++){var l=i[t],s=parseInt(l.getAttribute("width"));n.push(parseInt(s/o*560))}e.find("tr").each((function(e){Object(a.a)(e).children().each((function(e,t){e.setAttribute("width",n[t])}))})),r.remove()}))}function Hp(e){e&&e.find("ul,ol").each((function(e){var t=parseInt(e.getAttribute("data-lake-indent"),10)||0;e.style.padding="0",e.style.margin="0",e.style["margin-left"]="".concat(28*t,"px")}))}function Wp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wp(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gp={"zh-cn":{hereIsOnlineVideo:"此处为视频，点击链接查看：",hereIsYuqueDoc:"此处为语雀文档，点击链接查看：",hereIsLockText:"此处为语雀加密文本，点击链接查看：",hereIsVote:"此处为语雀投票卡片，点击链接查看："},en:{hereIsVideo:"Here is the video, click on the link to view:",hereIsYuqueDoc:"Here is yuque doc card, click on the link to view:",hereIsLockText:"Here is the yuque lock text card, click on the link to view:",hereIsVote:"Here is the yuque vote card, click on the link to view:"}}[window.appData&&"zh-cn"!==window.appData.locale?"en":"zh-cn"];function Kp(e){e.empty();var t=a.s.card.getValue(e);t&&t.url&&e.append('<img src="'.concat(a.n.escape(t.url),'" />'))}function Xp(e){e.empty();var t=a.s.card.getValue(e);if(t&&t.src){var n=a.n.escape(t.height);e.append('<img src="'.concat(a.n.escape(t.src),'" ').concat(n?"height="+n:"","/>"))}}function $p(e,t){return'<a href="'.concat(e,'" style="\n    word-wrap: break-word;\n    color: #096DD9;\n    touch-action: manipulation;\n    background-color: rgba(0,0,0,0);\n    text-decoration: none;\n    outline: none;\n    cursor: pointer;\n    transition: color .3s;\n  ">').concat(t,"</a>")}function Zp(e){e.empty();var t,n,r=a.s.card.getValue(e),i=((t=r&&r.src)&&(n=dl(t))&&(n.includes(cl)?n=n.replace(cl,ll):n.includes(sl)&&(n=n.replace(sl,ll))),n);return i?e.append('<img src="'.concat(i+".png",'"/>')):r.src?e.append('<a src="'.concat(r.src,'">').concat(r.src,"</a>")):void 0}var Qp=function(e){f()(n,a.g);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;o()(this,n),e||(e={});var a=e.autoCompleteLinks;return e.autoCompleteLinks="boolean"!=typeof a||a,r=t.call(this,e),y()(u()(r),"autoCompleteLinks",!0),r}return l()(n,[{key:"parseLink",value:function(e){var t=this;e.find("a").each((function(e){var n=e.getAttribute("href");if(n&&t.options.autoCompleteLinks&&!a.n.protocols.some((function(e){return n.startsWith(e)}))&&!n.startsWith("#")){var r=function(e,t){if("/"===t)return e;try{return new URL(e,t).href}catch(t){return console.warn("Fail in export when parse relative link"),e}}(n,t.getDocUrl());e.setAttribute("href",r),e.setAttribute("data-href",n)}}))}},{key:"filter",value:function(e){x()(g()(n.prototype),"filter",this).call(this,e),e.find("a.lake-anchor").remove(),e.find("[data-selection-id]").each((function(e){e.parentNode.replaceChild(document.createTextNode(e.innerText),e)}))}},{key:"getDocUrl",value:function(){return this.options.docUrl||Tt()}},{key:"getDefaultCardParsers",value:function(){var e=this;return Yp(Yp({},x()(g()(n.prototype),"getDefaultCardParsers",this).call(this)),{},{thirdparty:Zp,processon:Zp,table:function(e){var t=e.find("table"),n=a.s.card.getValue(e)||{};e.empty(),t.length>0&&(t.css({outline:"none","border-collapse":"collapse",border:n.hideBorder?"1px solid transparent":"1px solid #d9d9d9"}),t.find("td").css({"min-width":"90px","font-size":"14px","white-space":"normal","word-wrap":"break-word",border:n.hideBorder?"1px solid transparent":"1px solid #d9d9d9",padding:"4px 8px",cursor:"default"}),e.append(t))},image:function(e){var t=1500/devicePixelRatio,n=a.s.card.getValue(e)||{};if(e.empty(),n.src){var i=Object(a.a)(document.createElement("img"));i.attr("data-role","image");var o=n.originWidth,c=n.originHeight,l=o&&o>t&&r.OssUtil.resizeImage({maxWidth:t,src:n.src,data:{width:t,originWidth:o,originHeight:c}});l=l||n.src;try{new URL(location.href).searchParams.has("export_type")&&(l=Br(l))}catch(e){console.warn(e)}if(i.attr("src",l),i.attr("data-raw-src",""),i[0].classList.add("image","lake-drag-image"),i.attr("alt",n.name||"image"),i.attr("title",n.name||"image"),e.append(i),i.css({visibility:"visible","background-color":"","background-repeat":"","background-position":"","background-image":""}),n.width&&i.css("width",n.width+"px"),n.height&&i.attr("data-height",n.height+"px"),n.link){var s=document.createElement("a");s.href=n.link,n.linkTarget&&(s.target=n.linkTarget),s.appendChild(i[0]),e.append(s)}else e.append(i)}},file:function(e){e.empty();var t=a.s.card.getValue(e);t&&t.src&&e.append($p(t.src,'<span style="font-size: 14px;">📎</span>'+t.name))},math:function(e){var t=e.find("img");e.empty(),t.length>0&&(t.css("vertical-align","middle"),e.append(t))},codeblock:function(e){return Up(e)},emoji:function(e){var t=e.find(".lake-emoji");e.empty(),t.length>0&&(t.attr("width","18"),t.attr("height","18"),t.css({display:"inline-block",width:"18px",height:"18px","vertical-align":"middle","background-size":"contain","background-position":"0 0","background-repeat":"no-repeat","margin-top":"-3px","margin-left":"1px","margin-right":"1px",border:"1px solid transparent"}),e.append(t))},label:function(e){var t=e.find(".lake-card-label-container");e.empty(),t.length>0&&(t.css({"font-weight":400,"font-size":"12px",overflow:"hidden","max-width":"200px",display:"inline-block","white-space":"nowrap","margin-bottom":"-4px","border-radius":"4px",border:"none",padding:"2px 5px","text-overflow":"ellipsis","line-height":"14px","margin-left":"1px","margin-right":"1px"}),e.append(t))},diagram:Kp,mermaid:Kp,flowchart:Kp,graphviz:Kp,puml:Kp,mindmap:Xp,flowchart2:Xp,vote:function(t){t.empty();var n=a.s.card.getValue(t),r=Ds.refreshCardValue(n);if(a.s.card.setValue(t,r),n&&n.id){t.append("<span>".concat(Gp.hereIsVote,"</span>"));var i=e.getDocUrl()+"#"+n.id;t.append($p(i,i))}},yuque:function(e){e.empty();var t=a.s.card.getValue(e);t&&t.src&&(e.append("<span>".concat(Gp.hereIsYuqueDoc,"</span>")),e.append($p(t.src,t.src)))},yuqueinline:function(e){e.empty();var t=a.s.card.getValue(e);t&&t.src&&(e.append("<span>".concat(Gp.hereIsYuqueDoc,"</span>")),e.append($p(t.src,t.src)))},bookmarklink:function(e){e.empty();var t=a.s.card.getValue(e);t&&t.src&&e.append($p(t.src,t.text||t.src))},localdoc:function(e){e.empty();var t=a.s.card.getValue(e);if(t&&t.src){var n=t.download,r=t.src,i=new URL(r,window.location.origin),o=n?Bt(r):i.origin+jt(r);e.append($p(o,t.name))}},video:function(t){t.empty();var n=a.s.card.getValue(t);n&&n.status&&"done"===n.status&&t.append($p(e.getDocUrl()+"#"+n.id,n.name))},audio:function(t){t.empty();var n=a.s.card.getValue(t);n&&n.status&&("done"===n.status||"uploaded"===n.status)&&t.append($p(e.getDocUrl()+"#"+n.id,n.name))},mention:function(e){var t=e.find(".lake-mention-at");e.empty(),e.append(t)},lockedtext:function(t){t.empty();var n=a.s.card.getValue(t);if(n&&n.id){t.append("<span>".concat(Gp.hereIsLockText,"</span>"));var r=e.getDocUrl()+"#"+n.id;t.append($p(r,r))}},riddle:function(e){e.empty();var t=a.s.card.getValue(e);t&&t.src&&e.append($p(t.src,t.src))},youku:function(e){e.empty();var t=a.s.card.getValue(e);t&&t.src&&(e.append("<span>".concat(Gp.hereIsOnlineVideo,"</span>")),e.append($p(t.src,t.src)))},premium:function(e){e.remove()}})}}]),n}();var Jp=function(e){f()(n,Qp);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"after",value:function(e){return e.find("[data-lake-card]").each((function(e){e.removeAttribute("data-card-value")}))}}]),n}();function eh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function th(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eh(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nh=function(e){f()(n,Qp);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"getDefaultCardParsers",value:function(){var e=this;return th(th({},x()(g()(n.prototype),"getDefaultCardParsers",this).call(this)),{},{video:function(t){t.empty();var n=a.s.card.getValue(t);if(n&&n.videoId){var r=encodeURIComponent(n.videoId),i=e.getDocUrl(),o=new URL(i);t.append('<div class="lake-video-content lake-video-done">\n  <video preload="none" playsinline="playsinline" controls="" controlslist="nodownload"\n    poster="'.concat(o.origin,"/api/video?video_id=").concat(r,'&redirect_field=cover"\n    src="').concat(o.origin,"/api/video?video_id=").concat(r,'&redirect_field=video"></video>\n</div>'))}},audio:function(t){t.empty();var n=a.s.card.getValue(t);if(n&&n.audioId){var r=encodeURIComponent(n.audioId),i=e.getDocUrl(),o=new URL(i);t.append('<div class="lake-video-content lake-video-done">\n  <audio preload="none" playsinline="playsinline" controls="" controlslist="nodownload"\n    src="'.concat(o.origin,"/api/video?video_id=").concat(r,'&redirect_field=audio"></audio>\n</div>'))}},thirdparty:function(e){e.empty();var t=a.s.card.getValue(e)||{},n=t.url||t.src;if(n){var r="",i="";"number"==typeof t.height&&(r='height="'.concat(t.height,'"')),t.entrance&&(i='title="'.concat(a.n.escape(t.entrance||""),'"')),e.append("<iframe ".concat(i," ").concat(r,' src="').concat(a.n.escape(n),'"></iframe>'))}return e}})}},{key:"after",value:function(e){return e.find("[data-lake-card]").each((function(e){e.removeAttribute("data-card-value")}))}}]),n}(),rh=[{p:{"data-lake-id":"*"}},{h1:{"data-lake-id":"*"}},{h2:{"data-lake-id":"*"}},{h3:{"data-lake-id":"*"}},{h4:{"data-lake-id":"*"}},{h5:{"data-lake-id":"*"}},{h6:{"data-lake-id":"*"}},{ul:{"data-lake-id":"*"}},{ol:{"data-lake-id":"*"}},{li:{"data-lake-id":"*"}}];function ah(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ih(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ah(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ah(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oh={parallel:5},ch=function(e){f()(n,k.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),r=t.call(this),y()(u()(r),"_options",{}),y()(u()(r),"_taskIds",new Set),y()(u()(r),"_completedTasks",[]),y()(u()(r),"_runningTasks",[]),y()(u()(r),"_pendingTasks",[]),y()(u()(r),"_failureTasks",[]),r._options=ih(ih({},oh),e),r}return l()(n,[{key:"hasTask",value:function(e){return this._taskIds.has(e)}},{key:"isCompleted",value:function(){return this._pendingTasks.length+this._runningTasks.length===0}},{key:"addTask",value:function(e){this._taskIds.add(e.id),this._pendingTasks.push(e),this._checkFinish()}},{key:"_checkFinish",value:function(){var e=this._pendingTasks.length,t=this._runningTasks.length;0!==e||0!==t?e>0&&t<this._options.parallel&&this._runTask(this._pendingTasks.shift()):this._finish()}},{key:"_runTask",value:function(e){var t=this;this._runningTasks.push(e),this._updateProgress(),he()(fe.a.mark((function n(){return fe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.run();case 2:n.sent.success?t._handleSuccess(e):t._handleFailure(e);case 4:case"end":return n.stop()}}),n)})))()}},{key:"_updateProgress",value:function(){var e=this._completedTasks.length,t=this._runningTasks.length,n=this._pendingTasks.length,r=this._failureTasks.length;this.emit("progress",{completed:e,running:t,pending:n,failure:r,total:e+t+n})}},{key:"_handleSuccess",value:function(e){var t=this._runningTasks.indexOf(e);-1!==t&&this._runningTasks.splice(t,1),this._completedTasks.push(e),this._updateProgress(),this._checkFinish()}},{key:"_handleFailure",value:function(e){var t=this._runningTasks.indexOf(e);-1!==t&&this._runningTasks.splice(t,1),this._failureTasks.push(e),this._updateProgress(),this._checkFinish()}},{key:"_finish",value:function(){this.emit("finished"),this._destroy()}},{key:"_destroy",value:function(){this.removeAllListeners()}}]),n}();var lh=function(e){f()(n,k.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),r=t.call(this),y()(u()(r),"_thread",null),y()(u()(r),"_threadOptions",null),r._threadOptions=e,r}return l()(n,[{key:"hasTask",value:function(e){return!!this._thread&&this._thread.hasTask(e)}},{key:"addTask",value:function(e){var t=this;return this._thread||(this._thread=this._createThread()),Promise.resolve().then((function(){t._thread.addTask(e)})),e}},{key:"isCompleted",value:function(){return!this._thread||this._thread.isCompleted()}},{key:"_createThread",value:function(){var e=this,t=new ch(this._threadOptions);return t.on("start",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.emit.apply(e,["start"].concat(n))})),t.on("progress",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.emit.apply(e,["progress"].concat(n))})),t.on("finished",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.emit.apply(e,["finished"].concat(n)),e._thread=null})),t}}]),n}(),sh=/<[^>]+>/g,uh=/(?:[\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3400-\u4DBF\u4E00-\u9FFC\uF900-\uFA6D\uFA70-\uFAD9]|\uD81B[\uDFF0\uDFF1]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])+|(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDFFF]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F])/g,dh=/--+/g,fh=/\s+/;var ph={en:bn,"zh-cn":Tn},hh=new Bp,mh=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),r=t.call(this,e),y()(u()(r),"onEditAreaClick",(function(e){var t=e.target;"A"===t.nodeName&&t.hasAttribute("href")&&(e.preventDefault(),e.stopPropagation(),r.engine&&r.engine.openLinkByNode(t))})),y()(u()(r),"extendEngine",(function(e){e.getContent=function(){return It(e.getValue(),e)},e.wordCount=function(){return function(e){if(!e)return 0;var t=0;return(e=(e=(e=" ".concat(String(e).replace(sh," ").trim()," ")).replace(uh,(function(e){return e.codePointAt(0)>127?(t+=ge()(e).length," "):e})).replace(dh,(function(e,n,r){return fh.test(r[n-1])&&t++," "}))).trim())&&(t+=e.split(fh).length),t}(e.getFullPureHtml())},e.getPublicHtml=function(t){var n=e.card.getCardRootByName("premium");return 1!==n.length?null:e.getHtmlWithStopNode(t,n[0])},e.getPureContent=function(){return It(e.getPureValue(),e)},e.getPublicContent=function(){return e.constructor.plugin.executePluginMethod(e,"premium","getPublicContent")},e.getPublicPureContent=function(){return e.constructor.plugin.executePluginMethod(e,"premium","getPublicPureContent")},e.getPublicValue=function(){return e.constructor.plugin.executePluginMethod(e,"premium","getPublicValue")},e.extractMention=function(){return e.constructor.plugin.executePluginMethod(e,"mention","extract")},e.disable=function(t){e.toolbar.disable(t),e.readonly(t),e.isDisabled=t},e.messageSuccess=function(e){A.a.success(e)},e.messageError=function(e){A.a.error(e)},e.getPureHtml=function(){return e.getHtml(new Jp({autoCompleteLinks:!!r.props.autoCompleteLinks}))},e.getPublicPureHtml=function(){return e.getPublicHtml(new Jp({autoCompleteLinks:!!r.props.autoCompleteLinks}))},e.getFullPureHtml=function(){return e.getHtml(new nh({autoCompleteLinks:!!r.props.autoCompleteLinks}))},e.getFullPublicPureHtml=function(){return e.getPublicHtml(new nh({autoCompleteLinks:!!r.props.autoCompleteLinks}))},e.isRemoteImage=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Nt.call.apply(Nt,[null,e].concat(n))},zp(e,"pasteFileTransfer",{}),e.docVerstion=1,a.u.desktop&&(e.openLink=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];"boolean"==typeof t?(n=t,t=e):t||(t=e),window.openExternalLink?window.openExternalLink(e,t,n):console.warn("function not found: openExternalLink")})})),y()(u()(r),"onSaveBefore",(function(){return new Promise((function(e,t){if(!r.engine.uploadManager)return e();r.engine.uploadManager.isCompleted()?e():t(r.locale.file.stillUploading)}))})),y()(u()(r),"_togglePlaceholder",(function(){var e=r.editArea.current;e&&(e.innerHTML.match(/^<p[^>]*><br\/?><\/p>$/)?e.classList.add("show-placeholder"):e.classList.remove("show-placeholder"))})),r.engine=null,r.locale=ph[e.lang],r.editArea=C.a.createRef(),r}return l()(n,[{key:"componentDidMount",value:function(){var e=this.props.onEngineReady;this.engine=this.renderEditor(),this._togglePlaceholder(),this.bindEvent(),this.extendEngine(this.engine),e(this.engine)}},{key:"componentWillUnmount",value:function(){this.unbindEvent(),this.engine&&(this.engine.off("save:before",this.onSaveBefore,!1),this.engine.destroy())}},{key:"bindEvent",value:function(){if(document.addEventListener("selectionchange",this._togglePlaceholder,!1),a.u.desktop){var e=this.editArea.current;e&&e.addEventListener("click",this.onEditAreaClick,!1)}}},{key:"unbindEvent",value:function(){if(document.removeEventListener("selectionchange",this._togglePlaceholder,!1),a.u.desktop){var e=this.editArea.current;e&&e.removeEventListener("click",this.onEditAreaClick,!1)}}},{key:"renderEditor",value:function(){var e=this,t=this.props,n=t.onChange,r=t.defaultValue,i=t.allowPremium,o=t.hasSidebar,c=void 0===o||o,l=dt()(t,["onChange","defaultValue","allowPremium","hasSidebar"]),s=String(r||"<p><br /></p>").trim();s=a.n.removeBookmarkTags(s),l.defaultValue=s,l.allCardNames={},l.parentNode=this.editArea.current.parentNode,l.scrollNode=Object(a.a)(l.parentNode).closest(".lake-editor-scroll-container")[0];var u=a.s.create(this.editArea.current,l),d=gp(r);return i||(l.cardBlacklist=l.cardBlacklist||[],l.cardBlacklist.includes("premium")||l.cardBlacklist.push("premium")),c||(u.sidebar.disable=!0),u.uploadManager=new lh,u.asyncEvent.on("save:before",this.onSaveBefore,!1),u.getPageLocation=function(){return e.props.getPageLocationHandle?e.props.getPageLocationHandle():location},u.schema.add(He.a),u.schema.add(rh),u.locale=this.locale,u.on("change",(function(t){e._togglePlaceholder(),n(It(t,u)),u.toolbar.updateState()})),u.on("select",(function(){u.toolbar.updateState()})),u.setDefaultValue=function(e){var t=String(e||"").trim();t=a.n.removeBookmarkTags(t),u.setValue(t||"<p><br /></p>",(function(e){e&&e.getAttribute&&"image"===e.getAttribute("data-ready-card")&&!e.getAttribute("data-card-value")&&e.parentNode&&e.parentNode.removeChild(e)})),t&&hh.update(d,1,u.editArea)},l.ot||(u.setDefaultValue(r),u.ot.initLockMode()),u}},{key:"render",value:function(){return C.a.createElement("div",{ref:this.editArea,"data-placeholder":this.props.placeholder,className:"lake-content-editor-core lake-engine"})}}]),n}(C.a.Component);y()(mh,"propTypes",{defaultValue:R.a.string,onChange:R.a.func,onEngineReady:R.a.func,lang:R.a.string,tabIndex:R.a.number,onSave:R.a.func,onBeforeRenderImage:R.a.func,image:R.a.object,file:R.a.object,translate:R.a.object,lockedtext:R.a.object,video:R.a.object,localVideo:R.a.shape({uploadAction:R.a.string,queryAction:R.a.string,attachableId:R.a.string,attachableType:R.a.string}),resource:R.a.shape({booksAction:R.a.string,resourceAction:R.a.string,resourceSearchAction:R.a.string}),localAudio:R.a.object,mention:R.a.object,customMaximize:R.a.func,customMaximizeRestore:R.a.func,hasSidebar:R.a.bool,typography:R.a.string,meta:R.a.object,allowPremium:R.a.bool,allowAudioPlayer:R.a.bool,enableDeferredRendering:R.a.bool,getPageLocationHandle:R.a.bool,previewFileHandler:R.a.func,autoCompleteLinks:R.a.bool,thirdPartyService:R.a.array,docId:R.a.number,cardWhitelist:R.a.array,cardBlacklist:R.a.array,enableCardOffScreen:R.a.bool,allowMention:R.a.bool,allowResource:R.a.bool,allowSaveToResource:R.a.bool,disableImageOCR:R.a.bool,ossProcessDomains:R.a.array,localImageHostList:R.a.array,placeholder:R.a.string,previewOrigin:R.a.string,automaticPositioning:R.a.bool,disallowToggleToolbar:R.a.oneOfType([R.a.bool,R.a.func]),disableYuqueCardEmbedView:R.a.bool}),y()(mh,"defaultProps",{lang:"zh-cn",onChange:function(){},onEngineReady:function(){},onBeforeRenderImage:function(e){return e},allowPremium:!1,allowAudioPlayer:!1,enableDeferredRendering:!1,autoCompleteLinks:!0,allowMention:!0,allowResource:!0,allowSaveToResource:!0,disableImageOCR:!1,ossProcessDomains:[/^.*?\.yuque\.com$/i,"cdn.nlark.com","yuque.antfin.com","yuque.antfin-inc.com","intranetproxy.alipay.com",window.location.host],localImageHostList:[/^\w+\.(nlark|alipay|alipayobjects|alibaba-inc|antfin-inc)\.com$/]});var gh=a.s.$,vh={en:bn,"zh-cn":Tn},yh=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),r=t.call(this,e),y()(u()(r),"onEngineReady",(function(e){r.engine=e,r.setState({engine:e},(function(){zp(e,"search",{target:r.contentEditor.current}),zp(e,"translate",{action:r.props.translate.action}),zp(e,"uploader",{actions:{image:r.props.image?r.props.image.uploadAction:"",file:r.props.file?r.props.file.uploadAction:"",localdoc:r.props.localdoc?r.props.localdoc.uploadAction:""}}),zp(e,"iframeHelper"),r.bindScrollEvent(),e.on("maximizecard",(function(){e.editArea.closest(".lake-editor").addClass("lake-maximize-card")})),e.on("restorecard",(function(){e.editArea.closest(".lake-editor").removeClass("lake-maximize-card")})),e.on("sidebarchange",(function(t){t&&("none"===t?(r.setState({hasSideBar:!1}),e.toolbar.updateState()):r.setState({hasSideBar:!0}),setTimeout((function(){window.dispatchEvent(new Event("resize"))}),100))})),r.props.onLoad(e)})),r.engine.on("typographychange",(function(e){r.props.onTypographyChange(e);var t=r.editorRootNodeRef.current;if(t){var n=gh(t);n.removeClass("lake-editor-classic"),n.removeClass("lake-editor-traditional"),n.addClass("lake-editor-".concat(e))}}))})),y()(u()(r),"handleScroll",(function(){r.lakeMaxEditorWrapperContent[0].scrollTop>16?r.lakeToolbar.addClass("lake-toolbar-active"):r.lakeToolbar.removeClass("lake-toolbar-active")})),r.state={engine:null,toolbar:e.toolbar,viewport:e.viewport,hasSideBar:e.sidebar&&"none"!==e.sidebar},r.locale=vh[e.lang],r.contentEditor=C.a.createRef(),r.editorRootNodeRef=C.a.createRef(),r}return l()(n,[{key:"componentWillUnmount",value:function(){gh(document.body).css({"overscroll-behavior-x":"","overflow-y":""})}},{key:"componentDidUpdate",value:function(e){if("adapt"===this.props.viewport){var t=gh(this.contentEditor.current.parentNode),n=gh(this.contentEditor.current.parentNode.parentNode);t.width()!==n.width()&&n.addClass("lake-has-scroll-bar")}var r=this.engine.viewport;this.engine.viewport=this.props.viewport,this.engine.viewport!==r&&this.engine.event.trigger("viewportchange",this.engine.viewport,r),this.props.typography!==e.typography&&this.engine.setTypography("classic"===this.props.typography)}},{key:"bindScrollEvent",value:function(){this.lakeToolbar=gh(".lake-toolbar"),this.lakeMaxEditorWrapperContent=gh(".lake-max-editor-wrapper-content"),this.lakeMaxEditorWrapperContent.on("scroll",this.handleScroll),gh(document.body).css({"overscroll-behavior-x":"none","overflow-y":"hidden"})}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.viewport,r=e.nopaper,a=e.sidebar,i=e.toolbarBlacklist,o=e.toolbar,c=e.toolBarType,l=this.state,s=l.engine,u=l.hasSideBar,d={toolBarType:c,key:c,type:t,engine:s,toolbar:this._filterToolbar(o,i),locale:this.locale},f=function(e){var t=Object.assign({},e);return!t.video&&t.image&&(t.video={uploadAction:t.image.uploadAction.replace("type=image","type=video")}),mt()(t,["onLoad","header","type","toolbar"])}(this.props);f.editorType=this.props.type;var p=this.props.typography,h="lake-editor lake-max-editor";return"adapt"===n&&(h+=" lake-adaptive-width"),"fixed"===n&&(h+=" lake-fixed-width"),u&&(h+=" lake-has-sidebar"),r&&(h+=" lake-no-paper"),p&&(h+=" lake-editor-".concat(p)),C.a.createElement("div",{className:h,ref:this.editorRootNodeRef},C.a.createElement("div",{className:"lake-max-editor-wrapper"},s&&C.a.createElement(pp,{engine:s}),s&&C.a.createElement(lf,oe()({hasMore:"adapt"===n},d)),C.a.createElement("div",{className:"lake-max-editor-wrapper-content lake-editor-scroll-container"},s&&C.a.createElement(dp,{engine:s,defaultType:a}),C.a.createElement("div",{className:"lake-max-editor-content"},C.a.createElement("div",{className:"lake-content-editor",ref:this.contentEditor},C.a.createElement("div",{className:"lake-content-editor-extra"},this.props.header),C.a.createElement(mh,oe()({onEngineReady:this.onEngineReady},f)))))))}},{key:"_filterToolbar",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=ge()(t);return!1===this.props.allowResource&&n.push("repository"),Array.isArray(e)?e.map((function(e){return Array.isArray(e)?e.filter((function(e){return!n.includes(e)})):e})):e}}]),n}(C.a.Component);y()(yh,"propTypes",{lang:R.a.string,type:R.a.string,toolbar:R.a.array,header:R.a.node,tabIndex:R.a.number,onChange:R.a.func,onLoad:R.a.func,onSave:R.a.func,onBeforeRenderImage:R.a.func,defaultValue:R.a.string,image:R.a.object,file:R.a.object,localdoc:R.a.object,translate:R.a.object,lockedtext:R.a.object,video:R.a.object,localVideo:R.a.object,localAudio:R.a.object,mention:R.a.object,customMaximize:R.a.func,customMaximizeRestore:R.a.func,cardWhitelist:R.a.array,cardBlacklist:R.a.array,toolbarBlacklist:R.a.array,viewport:R.a.string,nopaper:R.a.bool,sidebar:R.a.string,typography:R.a.string,meta:R.a.object,allowPremium:R.a.bool,allowAudioPlayer:R.a.bool,onTypographyChange:R.a.func,enableDeferredRendering:R.a.bool,previewFileHandler:R.a.func,autoCompleteLinks:R.a.bool,thirdPartyService:R.a.array,docId:R.a.number,enableCardOffScreen:R.a.bool,allowMention:R.a.bool,allowResource:R.a.bool,allowSaveToResource:R.a.bool,allowResizeVideo:R.a.bool,disableImageOCR:R.a.bool,ossProcessDomains:R.a.array,localImageHostList:R.a.array,placeholder:R.a.string,toolBarType:R.a.string,previewOrigin:R.a.string,automaticPositioning:R.a.bool,disallowToggleToolbar:R.a.oneOfType([R.a.bool,R.a.func]),disableYuqueCardEmbedView:R.a.bool}),y()(yh,"defaultProps",{lang:"zh-cn",type:"max",tabIndex:2,toolbar:[["card"],["save","undo","redo","paintformat","removeformat"],["heading","fontsize"],["bold","italic","strikethrough","underline","moremark"],["fontcolor","highlight"],["alignment"],["unorderedlist","orderedlist","tasklist","indent","lineheight"],["link","quote","hr"],["search","translate","toc","repository"]],translate:{action:"https://suppliers.alifanyi.com/supporting/translate.json"},lockedtext:{action:"/api/services/crypto"},onLoad:function(){},viewport:"fixed",sidebar:"toc",typography:"classic",onTypographyChange:function(){},enableCardOffScreen:!1,toolBarType:"normal"});var bh={en:bn,"zh-cn":Tn},kh=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),r=t.call(this,e),y()(u()(r),"onEngineReady",(function(e){r.engine=e,r.setState({engine:e}),zp(e,"uploader",{actions:{image:r.props.image?r.props.image.uploadAction:"",file:r.props.file?r.props.file.uploadAction:"",localdoc:r.props.localdoc?r.props.localdoc.uploadAction:""}}),zp(e,"iframeHelper"),r.props.onLoad(e),e.sidebar.disable=!0})),r.state={engine:null,toolbar:e.toolbar},r.locale=bh[e.lang],r.contentEditor=C.a.createRef(),r}return l()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.moreToolbar,r=this.state,a=r.engine,i={type:t,engine:a,toolbar:r.toolbar,moreToolbar:n,locale:this.locale},o=function(e){var t=Object.assign({},e);return!t.video&&t.image&&(t.video={uploadAction:t.image.uploadAction.replace("type=image","type=video")}),void 0===t.maxPadding&&(t.maxPadding=40),mt()(t,["onLoad","header","type","toolbar"])}(this.props);return o.editorType=this.props.type,C.a.createElement("div",{className:"lake-editor lake-mini-editor"},a&&C.a.createElement(lf,oe()({hasMore:!0},i)),C.a.createElement("div",{ref:this.contentEditor,className:"lake-content-editor"},C.a.createElement(mh,oe()({onEngineReady:this.onEngineReady,hasSidebar:!1},o))))}}]),n}(C.a.Component);y()(kh,"propTypes",{lang:R.a.string,type:R.a.string,toolbar:R.a.array,moreToolbar:R.a.array,header:R.a.node,tabIndex:R.a.number,onChange:R.a.func,onLoad:R.a.func,onSave:R.a.func,onBeforeRenderImage:R.a.func,defaultValue:R.a.string,image:R.a.object,maxPadding:R.a.number,file:R.a.object,localdoc:R.a.object,lockedtext:R.a.object,video:R.a.object,localVideo:R.a.object,localAudio:R.a.object,allowAudioPlayer:R.a.bool,mention:R.a.object,customMaximize:R.a.func,customMaximizeRestore:R.a.func,cardWhitelist:R.a.array,cardBlacklist:R.a.array,enableDeferredRendering:R.a.bool,previewFileHandler:R.a.func,thirdPartyService:R.a.array,docId:R.a.number,allowMention:R.a.bool,allowResource:R.a.bool,allowSaveToResource:R.a.bool,disableImageOCR:R.a.bool,ossProcessDomains:R.a.array,localImageHostList:R.a.array,placeholder:R.a.string,previewOrigin:R.a.string,automaticPositioning:R.a.bool,disallowToggleToolbar:R.a.oneOfType([R.a.bool,R.a.func]),disableYuqueCardEmbedView:R.a.bool}),y()(kh,"defaultProps",{lang:"zh-cn",type:"mini",tabIndex:2,toolbar:[["emoji","heading","bold","italic","strikethrough"],["orderedlist","unorderedlist","tasklist"],["link","image","file"]],save:!1,search:!1,cardWhitelist:["yuque","label"],heading:{showAnchor:!1},lockedtext:{action:"/api/services/crypto"},onChange:function(){},onLoad:function(){},onBeforeRenderImage:function(e){return e}});var wh={en:bn,"zh-cn":Tn},xh=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),r=t.call(this,e),y()(u()(r),"onEngineReady",(function(e){r.engine=e,r.setState({engine:e}),zp(e,"uploader",{actions:{image:r.props.image?r.props.image.uploadAction:"",file:r.props.file?r.props.file.uploadAction:"",localdoc:r.props.localdoc?r.props.localdoc.uploadAction:""}}),zp(e,"iframeHelper"),r.props.onLoad(e)})),r.state={engine:null,toolbar:e.toolbar},r.locale=wh[e.lang],r.contentEditor=C.a.createRef(),r}return l()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props.type,t=this.state,n=t.engine,r={type:e,engine:n,toolbar:t.toolbar,locale:this.locale},a=function(e){var t=Object.assign({},e);return!t.video&&t.image&&(t.video={uploadAction:t.image.uploadAction.replace("type=image","type=video")}),mt()(t,["onLoad","header","toolbar"])}(this.props);return a.editorType=this.props.type,C.a.createElement("div",{className:"lake-editor lake-mobile-editor"},n&&C.a.createElement(lf,oe()({hasMore:!0},r,{mobile:!0})),C.a.createElement("div",{ref:this.contentEditor,className:"lake-content-editor"},C.a.createElement("div",{className:"lake-content-editor-extra"},this.props.header),C.a.createElement(mh,oe()({onEngineReady:this.onEngineReady},a))))}}]),n}(C.a.Component);function _h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ch(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_h(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}y()(xh,"propTypes",{lang:R.a.string,type:R.a.string,toolbar:R.a.array,header:R.a.node,tabIndex:R.a.number,onChange:R.a.func,onLoad:R.a.func,onSave:R.a.func,onBeforeRenderImage:R.a.func,defaultValue:R.a.string,image:R.a.object,file:R.a.object,localdoc:R.a.object,lockedtext:R.a.object,video:R.a.object,localVideo:R.a.object,localAudio:R.a.object,mention:R.a.object,customMaximize:R.a.func,customMaximizeRestore:R.a.func,allowPremium:R.a.bool,allowAudioPlayer:R.a.bool,enableDeferredRendering:R.a.bool,previewFileHandler:R.a.func,thirdPartyService:R.a.array,docId:R.a.number,allowMention:R.a.bool,allowResource:R.a.bool,allowSaveToResource:R.a.bool,disableImageOCR:R.a.bool,ossProcessDomains:R.a.array,localImageHostList:R.a.array,placeholder:R.a.string,previewOrigin:R.a.string,automaticPositioning:R.a.bool,disallowToggleToolbar:R.a.bool,disableYuqueCardEmbedView:R.a.bool}),y()(xh,"defaultProps",{lang:"zh-cn",type:"mobile",tabIndex:2,toolbar:[["heading"],["bold"],["indent"],["alignment"],["list"],["tasklist"],["image"],["quote"]],save:!1,search:!1,cardselect:!1,heading:{showAnchor:!1},lockedtext:{action:"/api/services/crypto"},onChange:function(){},onLoad:function(){},onBeforeRenderImage:function(e){return e}});var Eh=["yuque.antfin-inc.com","yuque.com","yuque.alibaba-inc.com"],Oh=a.s.$,Sh={en:bn,"zh-cn":Tn};window.lozad_observer=we()(".lozad",{rootMargin:"10px 0px",threshold:.1});var Rh=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(e){var r;return o()(this,n),r=t.call(this,e),y()(u()(r),"onViewAreaClick",(function(e){var t=e.target,n=Oh(t).closest("a");n.length&&n[0].hasAttribute("href")&&(e.preventDefault(),e.stopPropagation(),r.contentViewEngine&&r.contentViewEngine.openLinkByNode(n[0]))})),y()(u()(r),"disableLazyRender",(function(){r.contentViewEngine&&a.s.card.renderController.disable(r.contentViewEngine)})),y()(u()(r),"containsMarkdownToc",(function(e){return!!e&&e.includes('<div id="markdown-toc"></div>')})),y()(u()(r),"adaptContent",(function(e){if(!e)return"";e=String(e);var t=new a.m;t.add(He.a),t.add(rh);var n=new a.i(e,t,void 0,(function(e){Oh(e).find("[data-ready-card]").each((function(e){e&&e.getAttribute&&"image"===e.getAttribute("data-ready-card")&&!e.getAttribute("data-card-value")&&e.parentNode&&e.parentNode.removeChild(e)}))}));return r.docVerstion=gp(e),n.toLowerValue(!0)})),y()(u()(r),"extractMention",(function(){var e=[];return r.viewArea.current.querySelectorAll('[data-lake-card="mention"]').forEach((function(t){var n=t.getAttribute("data-card-value");n=n.replace(/^data:/,"");try{var r=JSON.parse(decodeURIComponent(n));e.push(r)}catch(e){console.log(e)}})),e})),y()(u()(r),"addRelToLink",(function(){Oh(r.viewArea.current).find("a[target=_blank]").each((function(e){e.closest("[data-lake-card=file]")||e.closest("[data-lake-card=localdoc]")||function(e){if(!/^(?:\w{1,20}:){0,1}\/\//i.test(e))return!0;var t;try{t=new URL(e)}catch(e){return!1}var n=t.hostname;if(!n)return!1;for(var r=0;r<Eh.length;r++){var a=Eh[r];if(n===a||n.endsWith(".".concat(a)))return!0}return!1}(e.href)||Oh(e).attr("rel","noopener noreferrer")}))})),y()(u()(r),"addHeadingAnchor",(function(){var e=r.contentViewEngine.locale;Oh(r.viewArea.current).find("h1,h2,h3,h4,h5,h6").each((function(t){var n=(t=Oh(t)).attr("id");if(n){var r=Oh('<a class="lake-anchor"></a>'),i=Ot(t[0]);r.css("top","".concat((i-24)/2,"px")),O.a.render(C.a.createElement(D.a,{title:e.copyParagraphLink},C.a.createElement("span",{className:"lake-anchor-button lake-icon lake-icon-".concat(t.name)})),r[0]),r.on("click",(function(){var t=window.location,r=t.origin,i=t.pathname;a.c.copyText("".concat(r+i,"#").concat(n)),A.a.success(e.copySuccess)})),t.prepend(r)}}))})),y()(u()(r),"removeInvalidStyles",(function(){Oh(r.viewArea.current).children().each((function(e){e=Oh(e),a.k.removeMinusStyle(e,"text-indent")}))})),y()(u()(r),"renderContent",(function(){console.time("contentView render");var e=r.props,t=e.lang,n=e.scene,i=e.onBeforeRenderImage,o=e.customMaximizeRestore,c=e.ossProcessDomains,l=e.localImageHostList,s=e.meta,u=e.customMaximize,d=e.autoMaximizeCard,f=e.renderParser,p=e.typography,h=e.allowAudioPlayer,m=Oh(r.viewArea.current),g=a.d.create(m,Ch(Ch({},r.props.options||{}),{},{lang:t,scene:n,enableDeferredRendering:!f&&(r.props.options||{}).enableDeferredRendering,disableYuqueCardEmbedView:r.props.disableYuqueCardEmbedView,docId:r.props.docId,card:a.s.card,plugin:a.s.plugin,allowAudioPlayer:h,onBeforeRenderImage:i,customMaximizeRestore:o,ossProcessDomains:c,localImageHostList:l,autoMaximizeCard:d,customMaximize:u,typography:p,meta:s}));if(g.docVerstion=r.docVerstion,g.iframeHelper=new jp,g.locale=Sh[t],g.schema.add(He.a),g.schema.add(rh),g.isRemoteImage=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Nt.call.apply(Nt,[null,g].concat(t))},g.extractMention=r.extractMention,g.getPageLocation=function(){return r.props.getPageLocationHandle?r.props.getPageLocationHandle():location},a.u.desktop&&(g.openLink=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];"boolean"==typeof t?(n=t,t=e):t||(t=e),window.openExternalLink?window.openExternalLink(e,t,n):console.warn("function not found: openExternalLink")}),console.time("contentView card"),a.s.card.renderAll(r.viewArea.current,void 0,g),a.s.card.renderController.run(g),console.timeEnd("contentView card"),r.contentViewEngine=g,r.editArea=m,d){var v=Oh(document.getElementById(d));v&&a.s.card.maximize({cardRoot:v,contentView:g})}if(r.addRelToLink(),r.removeInvalidStyles(),f){var y=r.viewArea.current.parentNode;f.parse(r.viewArea.current),y.appendChild(r.viewArea.current)}r.props.genAnchor&&r.addHeadingAnchor(),console.timeEnd("contentView render")})),r.viewArea=C.a.createRef(),r}return l()(n,[{key:"componentDidMount",value:function(){var e=this,t={outline:[]};this.bindEvent(),this.renderContent(),!0===this.props.genOutline&&(t.outline=yu.extractFromDom(this.viewArea.current),this.containsMarkdownToc(this.props.content)&&this.renderMarkdownToc(t.outline)),"function"==typeof this.props.onLoad&&this.props.onLoad(this.viewArea.current,t,this.contentViewEngine),this.editArea.attr("tabindex",0),this.editArea.on("keydown",(function(t){if(Object(a.t)("mod+a",t)){t.preventDefault(),e.contentViewEngine&&a.s.card.renderController.disable(e.contentViewEngine);var n=window.getSelection(),r=document.createRange();r.selectNode(e.editArea[0]),n.removeAllRanges(),n.addRange(r)}})),window.lozad_observer&&window.lozad_observer.observe();var n=this.contentViewEngine.viewport;this.contentViewEngine.viewport=this.props.viewport,this.props.viewport!==n&&this.contentViewEngine.event.trigger("viewportchange",this.contentViewEngine.viewport,n)}},{key:"componentWillUnmount",value:function(){this.unbindEvent()}},{key:"bindEvent",value:function(){if(Oh(window).on("beforeprint",this.disableLazyRender,!1),a.u.desktop){var e=this.viewArea.current;e&&e.addEventListener("click",this.onViewAreaClick,!1)}}},{key:"unbindEvent",value:function(){if(Oh(window).off("beforeprint",this.disableLazyRender,!1),a.u.desktop){var e=this.viewArea.current;e&&e.removeEventListener("click",this.onViewAreaClick,!1)}}},{key:"renderMarkdownToc",value:function(e){if(0!==e.length){var t=document.createElement("div");this.viewArea.current.prepend(t);var n=this.props.lang,r=Sh[n];O.a.render(C.a.createElement("div",{className:"lake-embed-outline"},C.a.createElement("h3",null,r.toc.title),C.a.createElement("ul",null,e.map((function(e){return C.a.createElement("li",{className:"lake-embed-outline lake-embed-outline-".concat(e.depth),key:e.id},C.a.createElement("a",{href:"#".concat(encodeURIComponent(e.id))},C.a.createElement("span",null,e.text)))})))),t)}}},{key:"shouldComponentUpdate",value:function(e){return this.props.content!==e.content}},{key:"componentDidUpdate",value:function(e){this.props.content!==e.content&&this.renderContent()}},{key:"render",value:function(){var e=this.adaptContent(this.props.content);return C.a.createElement("div",{className:"lake-engine-view",ref:this.viewArea,dangerouslySetInnerHTML:{__html:e}})}}]),n}(C.a.Component);function Dh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ah(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dh(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}y()(Rh,"propTypes",{lang:R.a.string,content:R.a.string,genAnchor:R.a.bool,genOutline:R.a.bool,options:R.a.object,viewport:R.a.string,typography:R.a.string,docId:R.a.number,onLoad:R.a.func,onBeforeRenderImage:R.a.func,autoMaximizeCard:R.a.string,customMaximize:R.a.func,customMaximizeRestore:R.a.func,lockedtext:R.a.object,renderParser:R.a.object,meta:R.a.object,getPageLocationHandle:R.a.func,previewFileHandler:R.a.func,allowAudioPlayer:R.a.bool,scene:R.a.oneOf(["doc","other"]).isRequired,ossProcessDomains:R.a.array,localImageHostList:R.a.array,previewOrigin:R.a.string,disableYuqueCardEmbedView:R.a.bool}),y()(Rh,"defaultProps",{lang:"zh-cn",content:"",genAnchor:!1,genOutline:!0,onLoad:function(){},onBeforeRenderImage:function(e){return e},typography:"classic",allowAudioPlayer:!1,scene:"other",ossProcessDomains:[/^.*?\.yuque\.com$/i,"cdn.nlark.com","yuque.antfin.com","yuque.antfin-inc.com","intranetproxy.alipay.com",window.location.host],localImageHostList:[/^\w+\.(nlark|alipay|alipayobjects|alibaba-inc|antfin-inc)\.com$/]});var Th=function(e){f()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"getDefaultCardParsers",value:function(){return Ah(Ah({},x()(g()(n.prototype),"getDefaultCardParsers",this).call(this)),{},{checkbox:function(){},codeblock:function(e){return Up(e,{whiteSpace:!0})}})}},{key:"parseLists",value:function(e){return Hp(e)}}]),n}(Qp);var Ph=function(e){f()(r,e);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(r);function r(){return o()(this,r),n.apply(this,arguments)}return l()(r,[{key:"after",value:(t=he()(fe.a.mark((function e(t){var n,r,a,i,o,c,l,s,u,d;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:qp(t),(n=t.find("img")).each((function(e){e.style.width&&e.style.height&&(e.width=parseInt(e.style.width),e.height=parseInt(e.style.height))})),r=0;case 4:if(!(r<n.length)){e.next=37;break}if(e.prev=5,a=n[r],!(i=a.src)||!i.endsWith(".svg")){e.next=29;break}return o=document.createElement("canvas"),c=o.getContext("2d"),e.next=13,fetch(i);case 13:return l=e.sent,e.next=16,l.text();case 16:return s=e.sent,u="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(s))),e.next=20,Ir(u);case 20:d=e.sent,o.width=2*d.width,o.height=2*d.height,o.style.width=d.width+"px",o.style.height=d.height+"px",c.drawImage(d,0,0,2*d.width,2*d.height),a.src=o.toDataURL(),a.style.width||(a.style.width=d.width+"px"),a.style.height||(a.style.height=d.height+"px");case 29:e.next=34;break;case 31:e.prev=31,e.t0=e.catch(5),console.warn(e.t0);case 34:r++,e.next=4;break;case 37:this.done();case 38:case"end":return e.stop()}}),e,this,[[5,31]])}))),function(e){return t.apply(this,arguments)})},{key:"done",value:function(){}},{key:"parseLists",value:function(e){return Hp(e)}}]),r}(Qp);var jh=function(e){f()(n,a.g);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}(n);function n(){return o()(this,n),t.apply(this,arguments)}return l()(n,[{key:"parse",value:function(e){var t=Object(a.a)("<div />");return t.append(e),{html:t.html(),text:new a.i(t).toText()}}}]),n}();function Mh(e){if(!e)return{value:It("<p><br></p>"),html:"<p><br></p>"};var t=document.createElement("div"),n=document.createElement("div");t.style.display="none",t.appendChild(n),document.body.appendChild(t);var r=a.s.create(n,{onBeforeRenderImage:function(e){return e}});r.isRemoteImage=function(){return!1},r.schema.add(He.a),r.schema.add(rh),r.locale=Tn,r.setValue("<p><cursor /></p>"),r.command.execute("paste",e);var i=It(r.getValue()),o=r.getHtml(new Jp);return r.destroy(),document.body.removeChild(t),{value:i,html:o}}var Nh=xr().map((function(e){return e.text=e.text.replace(/<br.*?>/,""),e})),Lh={};a.s.registerClipboardExportParser(new Qp),Lh.Engine=a.s,Lh.Editor=yh,Lh.MiniEditor=kh,Lh.MobileEditor=xh,Lh.ContentView=Rh,Lh.HotKeys=Nh,Lh.Outline=yu,Lh.ExportParser=Qp,Lh.WordExportParser=Ph,Lh.DoNothingExportParser=jh,Lh.DocVersion=1,Lh.htmlToLake=Mh,Lh.PdfExportParser=Th},,,,,,,,,,,,,,function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(589))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},function(e,t,n){"use strict";n(1830);var r=n(1004);n(393);t.a=r.a},,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)a(n,r)&&(e[r]=n[r])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,r,a){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),a);else for(var i=0;i<r;i++)e[a+i]=t[n+i]},flattenChunks:function(e){var t,n,r,a,i,o;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(o=new Uint8Array(r),a=0,t=0,n=e.length;t<n;t++)i=e[t],o.set(i,a),a+=i.length;return o}},o={arraySet:function(e,t,n,r,a){for(var i=0;i<r;i++)e[a+i]=t[n+i]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,i)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,o))},t.setTyped(r)},function(e,t,n){"use strict";var r=n(591),a={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var n,i,o,c,l,s,u=!1;t||(t={}),n=t.debug||!1;try{if(o=r(),c=document.createRange(),l=document.getSelection(),(s=document.createElement("span")).textContent=e,s.style.all="unset",s.style.position="fixed",s.style.top=0,s.style.clip="rect(0, 0, 0, 0)",s.style.whiteSpace="pre",s.style.webkitUserSelect="text",s.style.MozUserSelect="text",s.style.msUserSelect="text",s.style.userSelect="text",s.addEventListener("copy",(function(r){if(r.stopPropagation(),t.format)if(r.preventDefault(),void 0===r.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var i=a[t.format]||a.default;window.clipboardData.setData(i,e)}else r.clipboardData.clearData(),r.clipboardData.setData(t.format,e);t.onCopy&&(r.preventDefault(),t.onCopy(r.clipboardData))})),document.body.appendChild(s),c.selectNodeContents(s),l.addRange(c),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");u=!0}catch(r){n&&console.error("unable to copy using execCommand: ",r),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),u=!0}catch(r){n&&console.error("unable to copy using clipboardData: ",r),n&&console.error("falling back to prompt"),i=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(i,e)}}finally{l&&("function"==typeof l.removeRange?l.removeRange(c):l.removeAllRanges()),s&&document.body.removeChild(s),o()}return u}},,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n(1006);var r=n(65);t.a=r.a},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var n in t)void 0===e[n]&&(e[n]=t[n]);return e},e.exports=t.default,e.exports.default=t.default},function(e,t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2},t.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+e)}}(e)}catch(e){return n}}},function(e,t,n){e.exports=n(498)},,function(e,t,n){var r=n(592),a=n(593),i=n(610),o=n(611);function c(e,t,n,i,o){var c=[].slice.call(arguments,1),l=c.length,s="function"==typeof c[l-1];if(!s&&!r())throw new Error("Callback required as last argument");if(!s){if(l<1)throw new Error("Too few arguments provided");return 1===l?(n=t,t=i=void 0):2!==l||t.getContext||(i=n,n=t,t=void 0),new Promise((function(r,o){try{var c=a.create(n,i);r(e(c,t,i))}catch(e){o(e)}}))}if(l<2)throw new Error("Too few arguments provided");2===l?(o=n,n=t,t=i=void 0):3===l&&(t.getContext&&void 0===o?(o=i,i=void 0):(o=i,i=n,n=t,t=void 0));try{var u=a.create(n,i);o(null,e(u,t,i))}catch(e){o(e)}}t.create=a.create,t.toCanvas=c.bind(null,i.render),t.toDataURL=c.bind(null,i.renderToDataURL),t.toString=c.bind(null,(function(e,t,n){return o.render(e,n)}))},,function(e,t,n){"use strict";n(1842);var r=n(549),a=n(0),i=n.n(a),o=n(2),c=n.n(o),l=n(7),s=n.n(l),u=n(52),d=n.n(u);n(827);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var v=i.a.forwardRef((function(e,t){var n=e.className,a=g(e,["className"]);return i.a.createElement(r.a,m({className:s()("larkui-breadcrumb",n),ref:t},a))}));v.propTypes=p(p({},r.a.BreadcrumbProps),{},{className:c.a.string}),d()(v,r.a),t.a=v},function(e,t,n){"use strict";n(1014);var r=n(523);n(520);t.a=r.a},,function(e,t,n){"use strict";n(829);var r=n(399);n(397);t.a=r.a},,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(938))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},,,,,,,,,,,function(e,t,n){},function(e,t,n){"use strict";var r=n(22),a=n(43),i=a.ORDER_TYPE,o=a.PACKAGE_TYPE,c=n(78);e.exports=function(e){var t=e.order_type,n=e.package_type,a=e.member_size,l=e.duration,s=e.upload_size,u=e.currentPackage,d=e.expired_at,f=e.max_member,p=e.hasOrder,h=void 0!==p&&p,m=c.PACKAGE_TYPE_AMOUNT,g=c.BASE_UPLOAD_AMOUNT,v=c.BASE_MEMBER_AMOUNT,y=c.OFFER_DEADLINE,b=c.DISCOUNT_AMOUNT,k=m[n],w=r(d).diff(Date.now(),"days")||1,x=0;switch(t){case i.buy:switch(n){case o.standard:x=k*l;break;case o.advanced:x=r()<r(y).endOf("day")?k*l-b:k*l;break;case o.ultimate:x=(k+(a-2)*v)*l}break;case i.upgrade:x=((k-=m[u])*w/365).toFixed(2),!h&&n===o.advanced&&r()<r(y).endOf("day")&&(x=(x=x-3e3>0?x-3e3:.01).toFixed(2));break;case i.renew:k=m[u],u===o.ultimate&&(k+=(f/500-2)*v),x=(k*l).toFixed(2);break;case i.downgrade:x=k*l;break;case i.buyMember:x=(v*a*w/365).toFixed(2);break;case i.data:x=g*s}return x}},function(e,t,n){"use strict";var r={};(0,n(284).assign)(r,n(1659),n(1662),n(908)),e.exports=r},function(e,t,n){(function(r){var a;!function(i){var o=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};function c(){this._events={},this._conf&&l.call(this,this._conf)}function l(e){e?(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),this._maxListeners=e.maxListeners!==i?e.maxListeners:10,e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),this.wildcard&&(this.listenerTree={})):this._maxListeners=10}function s(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),void 0!==r&&r.emitWarning){var a=new Error(n);a.name="MaxListenersExceededWarning",a.emitter=this,a.count=e,r.emitWarning(a)}else console.error(n),console.trace&&console.trace()}function u(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,l.call(this,e)}function d(e,t,n,r){if(!n)return[];var a,i,o,c,l,s,u,f=[],p=t.length,h=t[r],m=t[r+1];if(r===p&&n._listeners){if("function"==typeof n._listeners)return e&&e.push(n._listeners),[n];for(a=0,i=n._listeners.length;a<i;a++)e&&e.push(n._listeners[a]);return[n]}if("*"===h||"**"===h||n[h]){if("*"===h){for(o in n)"_listeners"!==o&&n.hasOwnProperty(o)&&(f=f.concat(d(e,t,n[o],r+1)));return f}if("**"===h){for(o in(u=r+1===p||r+2===p&&"*"===m)&&n._listeners&&(f=f.concat(d(e,t,n,p))),n)"_listeners"!==o&&n.hasOwnProperty(o)&&("*"===o||"**"===o?(n[o]._listeners&&!u&&(f=f.concat(d(e,t,n[o],p))),f=f.concat(d(e,t,n[o],r))):f=o===m?f.concat(d(e,t,n[o],r+2)):f.concat(d(e,t,n[o],r)));return f}f=f.concat(d(e,t,n[h],r+1))}if((c=n["*"])&&d(e,t,c,r+1),l=n["**"])if(r<p)for(o in l._listeners&&d(e,t,l,p),l)"_listeners"!==o&&l.hasOwnProperty(o)&&(o===m?d(e,t,l[o],r+2):o===h?d(e,t,l[o],r+1):((s={})[o]=l[o],d(e,t,{"**":s},r+1)));else l._listeners?d(e,t,l,p):l["*"]&&l["*"]._listeners&&d(e,t,l["*"],p);return f}function f(e,t){for(var n=0,r=(e="string"==typeof e?e.split(this.delimiter):e.slice()).length;n+1<r;n++)if("**"===e[n]&&"**"===e[n+1])return;for(var a=this.listenerTree,o=e.shift();o!==i;){if(a[o]||(a[o]={}),a=a[o],0===e.length)return a._listeners?("function"==typeof a._listeners&&(a._listeners=[a._listeners]),a._listeners.push(t),!a._listeners.warned&&this._maxListeners>0&&a._listeners.length>this._maxListeners&&(a._listeners.warned=!0,s.call(this,a._listeners.length,o))):a._listeners=t,!0;o=e.shift()}return!0}u.EventEmitter2=u,u.prototype.delimiter=".",u.prototype.setMaxListeners=function(e){e!==i&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},u.prototype.event="",u.prototype.once=function(e,t){return this._once(e,t,!1)},u.prototype.prependOnceListener=function(e,t){return this._once(e,t,!0)},u.prototype._once=function(e,t,n){return this._many(e,1,t,n),this},u.prototype.many=function(e,t,n){return this._many(e,t,n,!1)},u.prototype.prependMany=function(e,t,n){return this._many(e,t,n,!0)},u.prototype._many=function(e,t,n,r){var a=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");function i(){return 0==--t&&a.off(e,i),n.apply(this,arguments)}return i._origin=n,this._on(e,i,r),a},u.prototype.emit=function(){this._events||c.call(this);var e=arguments[0];if("newListener"===e&&!this._newListener&&!this._events.newListener)return!1;var t,n,r,a,i,o=arguments.length;if(this._all&&this._all.length){if(i=this._all.slice(),o>3)for(t=new Array(o),a=0;a<o;a++)t[a]=arguments[a];for(r=0,n=i.length;r<n;r++)switch(this.event=e,o){case 1:i[r].call(this,e);break;case 2:i[r].call(this,e,arguments[1]);break;case 3:i[r].call(this,e,arguments[1],arguments[2]);break;default:i[r].apply(this,t)}}if(this.wildcard){i=[];var l="string"==typeof e?e.split(this.delimiter):e.slice();d.call(this,i,l,this.listenerTree,0)}else{if("function"==typeof(i=this._events[e])){switch(this.event=e,o){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(o-1),a=1;a<o;a++)t[a-1]=arguments[a];i.apply(this,t)}return!0}i&&(i=i.slice())}if(i&&i.length){if(o>3)for(t=new Array(o-1),a=1;a<o;a++)t[a-1]=arguments[a];for(r=0,n=i.length;r<n;r++)switch(this.event=e,o){case 1:i[r].call(this);break;case 2:i[r].call(this,arguments[1]);break;case 3:i[r].call(this,arguments[1],arguments[2]);break;default:i[r].apply(this,t)}return!0}if(!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},u.prototype.emitAsync=function(){this._events||c.call(this);var e=arguments[0];if("newListener"===e&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);var t,n,r,a,i,o=[],l=arguments.length;if(this._all){if(l>3)for(t=new Array(l),a=1;a<l;a++)t[a]=arguments[a];for(r=0,n=this._all.length;r<n;r++)switch(this.event=e,l){case 1:o.push(this._all[r].call(this,e));break;case 2:o.push(this._all[r].call(this,e,arguments[1]));break;case 3:o.push(this._all[r].call(this,e,arguments[1],arguments[2]));break;default:o.push(this._all[r].apply(this,t))}}if(this.wildcard){i=[];var s="string"==typeof e?e.split(this.delimiter):e.slice();d.call(this,i,s,this.listenerTree,0)}else i=this._events[e];if("function"==typeof i)switch(this.event=e,l){case 1:o.push(i.call(this));break;case 2:o.push(i.call(this,arguments[1]));break;case 3:o.push(i.call(this,arguments[1],arguments[2]));break;default:for(t=new Array(l-1),a=1;a<l;a++)t[a-1]=arguments[a];o.push(i.apply(this,t))}else if(i&&i.length){if(i=i.slice(),l>3)for(t=new Array(l-1),a=1;a<l;a++)t[a-1]=arguments[a];for(r=0,n=i.length;r<n;r++)switch(this.event=e,l){case 1:o.push(i[r].call(this));break;case 2:o.push(i[r].call(this,arguments[1]));break;case 3:o.push(i[r].call(this,arguments[1],arguments[2]));break;default:o.push(i[r].apply(this,t))}}else if(!this._all&&"error"===e)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(o)},u.prototype.on=function(e,t){return this._on(e,t,!1)},u.prototype.prependListener=function(e,t){return this._on(e,t,!0)},u.prototype.onAny=function(e){return this._onAny(e,!1)},u.prototype.prependAny=function(e){return this._onAny(e,!0)},u.prototype.addListener=u.prototype.on,u.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},u.prototype._on=function(e,t,n){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");return this._events||c.call(this),this._newListener&&this.emit("newListener",e,t),this.wildcard?(f.call(this,e,t),this):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),n?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,s.call(this,this._events[e].length,e))):this._events[e]=t,this)},u.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var n,r=[];if(this.wildcard){var a="string"==typeof e?e.split(this.delimiter):e.slice();r=d.call(this,null,a,this.listenerTree,0)}else{if(!this._events[e])return this;n=this._events[e],r.push({_listeners:n})}for(var c=0;c<r.length;c++){var l=r[c];if(n=l._listeners,o(n)){for(var s=-1,u=0,f=n.length;u<f;u++)if(n[u]===t||n[u].listener&&n[u].listener===t||n[u]._origin&&n[u]._origin===t){s=u;break}if(s<0)continue;return this.wildcard?l._listeners.splice(s,1):this._events[e].splice(s,1),0===n.length&&(this.wildcard?delete l._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(this.wildcard?delete l._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return function e(t){if(t!==i){var n=Object.keys(t);for(var r in n){var a=n[r],o=t[a];o instanceof Function||"object"!=typeof o||null===o||(Object.keys(o).length>0&&e(t[a]),0===Object.keys(o).length&&delete t[a])}}}(this.listenerTree),this},u.prototype.offAny=function(e){var t,n=0,r=0;if(e&&this._all&&this._all.length>0){for(n=0,r=(t=this._all).length;n<r;n++)if(e===t[n])return t.splice(n,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(t=this._all,this._removeListener)for(n=0,r=t.length;n<r;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},u.prototype.removeListener=u.prototype.off,u.prototype.removeAllListeners=function(e){if(e===i)return!this._events||c.call(this),this;if(this.wildcard)for(var t="string"==typeof e?e.split(this.delimiter):e.slice(),n=d.call(this,null,t,this.listenerTree,0),r=0;r<n.length;r++){n[r]._listeners=null}else this._events&&(this._events[e]=null);return this},u.prototype.listeners=function(e){if(this.wildcard){var t=[],n="string"==typeof e?e.split(this.delimiter):e.slice();return d.call(this,t,n,this.listenerTree,0),t}return this._events||c.call(this),this._events[e]||(this._events[e]=[]),o(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},u.prototype.eventNames=function(){return Object.keys(this._events)},u.prototype.listenerCount=function(e){return this.listeners(e).length},u.prototype.listenersAny=function(){return this._all?this._all:[]},(a=function(){return u}.call(t,n,t,e))===i||(e.exports=a)}()}).call(this,n(305))},function(e,t){e.exports=["cursor","anchor","focus",{card:{type:/^[\w\-]+$/,name:/^[\w\-]+$/,value:"*"}},{span:{class:/^lake-fontsize-\d+$|lake\-card\-[\w\-]{1,100}/,style:{color:"@color","background-color":"@color"}}},"strong","em","del","u",{h1:{id:/^[\w\.\-]+$/}},{h2:{id:/^[\w\.\-]+$/}},{h3:{id:/^[\w\.\-]+$/}},{h4:{id:/^[\w\.\-]+$/}},{h5:{id:/^[\w\.\-]+$/}},{h6:{id:/^[\w\.\-]+$/}},{p:{class:/^lake-lineheight-\d+$/,"data-lake-id":"*"}},"hr","code","mark",{pre:{"data-lang":/^[\w\.\-]+$/}},{blockquote:{class:["lake-alert","lake-alert-info","lake-alert-warning","lake-alert-danger","lake-alert-success","lake-alert-tips"]}},"sub","sup","br",{img:{src:"@url",width:"@number",height:"@number",style:{"max-width":"@length","max-height":"@length",width:"@length",height:"@length"},alt:"*",title:"*","data-size":"@number","data-width":"@number","data-height":"@number"}},{image:{src:"@url",width:"@number",height:"@number",style:{"max-width":"@length",width:"@length",height:"@length"},alt:"*",title:"*","data-size":"@number","data-width":"@number","data-height":"@number"}},{a:{name:"*",href:"@url",target:["_blank","_parent","_top"],ref:"*",class:["lake-video-link"]}},{ul:{class:["lake-list"],"data-lake-indent":"@number"}},{ol:{start:"@number","data-lake-indent":"@number"}},{li:{class:["lake-list-node","lake-list-task"]}},{table:{class:["lake-table","lake-no-border"],style:{width:"@length",height:"@length"}}},"colgroup",{col:{width:"@length"}},"tbody","th","tr",{td:{rowspan:"@number",colspan:"@number"}},{block:{style:{"text-align":["left","center","right","justify"],"text-indent":"@length","padding-left":"@length","background-color":"@color"}}},{input:{type:["checkbox"],checked:"checked",$allow:{type:["checkbox"]}}},{video:{src:"@url","data-size":"@number","data-type":/^\w{1,100}\/\w{1,100}$/,"data-name":"*",controls:!0}},{iframe:{src:/^https?:\/\/(?:riddle\.alibaba\-inc\.com|\w{0,100}\.youku\.com|\w{0,100}\.bilibili\.com)\//,height:"@number",frameborder:["yes","no"],allowtransparency:["true","false"],allowfullscreen:["true","false"]}}]},,,function(e,t,n){"use strict";n(1731);var r=n(832);n(500);t.a=r.a},,,,,,,,,,,,,function(e,t,n){},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(587))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},,,,,,,,,,,,,,,,,,function(e,t,n){var r=n(308),a=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],i=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];t.getBlocksCount=function(e,t){switch(t){case r.L:return a[4*(e-1)+0];case r.M:return a[4*(e-1)+1];case r.Q:return a[4*(e-1)+2];case r.H:return a[4*(e-1)+3];default:return}},t.getTotalCodewordsCount=function(e,t){switch(t){case r.L:return i[4*(e-1)+0];case r.M:return i[4*(e-1)+1];case r.Q:return i[4*(e-1)+2];case r.H:return i[4*(e-1)+3];default:return}}},function(e,t){t.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},function(e,t){var n="[0-9]+",r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+",a="(?:(?![A-Z0-9 $%*+\\-./:]|"+(r=r.replace(/u/g,"\\u"))+")(?:.|[\r\n]))+";t.KANJI=new RegExp(r,"g"),t.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),t.BYTE=new RegExp(a,"g"),t.NUMERIC=new RegExp(n,"g"),t.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");var i=new RegExp("^"+r+"$"),o=new RegExp("^[0-9]+$"),c=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");t.testKanji=function(e){return i.test(e)},t.testNumeric=function(e){return o.test(e)},t.testAlphanumeric=function(e){return c.test(e)}},function(e,t){function n(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw new Error("Color should be defined as hex string");var t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map((function(e){return[e,e]})))),6===t.length&&t.push("F","F");var n=parseInt(t.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+t.slice(0,6).join("")}}t.getOptions=function(e){e||(e={}),e.color||(e.color={});var t=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,r=e.width&&e.width>=21?e.width:void 0,a=e.scale||4;return{width:r,scale:r?4:a,margin:t,color:{dark:n(e.color.dark||"#000000ff"),light:n(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},t.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},t.getImageWidth=function(e,n){var r=t.getScale(e,n);return Math.floor((e+2*n.margin)*r)},t.qrToImageData=function(e,n,r){for(var a=n.modules.size,i=n.modules.data,o=t.getScale(a,r),c=Math.floor((a+2*r.margin)*o),l=r.margin*o,s=[r.color.light,r.color.dark],u=0;u<c;u++)for(var d=0;d<c;d++){var f=4*(u*c+d),p=r.color.light;if(u>=l&&d>=l&&u<c-l&&d<c-l)p=s[i[Math.floor((u-l)/o)*a+Math.floor((d-l)/o)]?1:0];e[f++]=p.r,e[f++]=p.g,e[f++]=p.b,e[f]=p.a}}},function(e,t,n){},,function(e,t,n){},,,function(e,t,n){e.exports={type:n(1636)}},function(e,t,n){},function(e,t){var n=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},r=-1;n.Diff=function(e,t){return[e,t]},n.prototype.diff_main=function(e,t,r,a){void 0===a&&(a=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var i=a;if(null==e||null==t)throw new Error("Null input. (diff_main)");if(e==t)return e?[new n.Diff(0,e)]:[];void 0===r&&(r=!0);var o=r,c=this.diff_commonPrefix(e,t),l=e.substring(0,c);e=e.substring(c),t=t.substring(c),c=this.diff_commonSuffix(e,t);var s=e.substring(e.length-c);e=e.substring(0,e.length-c),t=t.substring(0,t.length-c);var u=this.diff_compute_(e,t,o,i);return l&&u.unshift(new n.Diff(0,l)),s&&u.push(new n.Diff(0,s)),this.diff_cleanupMerge(u),u},n.prototype.diff_compute_=function(e,t,a,i){var o;if(!e)return[new n.Diff(1,t)];if(!t)return[new n.Diff(r,e)];var c=e.length>t.length?e:t,l=e.length>t.length?t:e,s=c.indexOf(l);if(-1!=s)return o=[new n.Diff(1,c.substring(0,s)),new n.Diff(0,l),new n.Diff(1,c.substring(s+l.length))],e.length>t.length&&(o[0][0]=o[2][0]=r),o;if(1==l.length)return[new n.Diff(r,e),new n.Diff(1,t)];var u=this.diff_halfMatch_(e,t);if(u){var d=u[0],f=u[1],p=u[2],h=u[3],m=u[4],g=this.diff_main(d,p,a,i),v=this.diff_main(f,h,a,i);return g.concat([new n.Diff(0,m)],v)}return a&&e.length>100&&t.length>100?this.diff_lineMode_(e,t,i):this.diff_bisect_(e,t,i)},n.prototype.diff_lineMode_=function(e,t,a){var i=this.diff_linesToChars_(e,t);e=i.chars1,t=i.chars2;var o=i.lineArray,c=this.diff_main(e,t,!1,a);this.diff_charsToLines_(c,o),this.diff_cleanupSemantic(c),c.push(new n.Diff(0,""));for(var l=0,s=0,u=0,d="",f="";l<c.length;){switch(c[l][0]){case 1:u++,f+=c[l][1];break;case r:s++,d+=c[l][1];break;case 0:if(s>=1&&u>=1){c.splice(l-s-u,s+u),l=l-s-u;for(var p=this.diff_main(d,f,!1,a),h=p.length-1;h>=0;h--)c.splice(l,0,p[h]);l+=p.length}u=0,s=0,d="",f=""}l++}return c.pop(),c},n.prototype.diff_bisect_=function(e,t,a){for(var i=e.length,o=t.length,c=Math.ceil((i+o)/2),l=c,s=2*c,u=new Array(s),d=new Array(s),f=0;f<s;f++)u[f]=-1,d[f]=-1;u[l+1]=0,d[l+1]=0;for(var p=i-o,h=p%2!=0,m=0,g=0,v=0,y=0,b=0;b<c&&!((new Date).getTime()>a);b++){for(var k=-b+m;k<=b-g;k+=2){for(var w=l+k,x=(S=k==-b||k!=b&&u[w-1]<u[w+1]?u[w+1]:u[w-1]+1)-k;S<i&&x<o&&e.charAt(S)==t.charAt(x);)S++,x++;if(u[w]=S,S>i)g+=2;else if(x>o)m+=2;else if(h){if((E=l+p-k)>=0&&E<s&&-1!=d[E])if(S>=(C=i-d[E]))return this.diff_bisectSplit_(e,t,S,x,a)}}for(var _=-b+v;_<=b-y;_+=2){for(var C,E=l+_,O=(C=_==-b||_!=b&&d[E-1]<d[E+1]?d[E+1]:d[E-1]+1)-_;C<i&&O<o&&e.charAt(i-C-1)==t.charAt(o-O-1);)C++,O++;if(d[E]=C,C>i)y+=2;else if(O>o)v+=2;else if(!h){if((w=l+p-_)>=0&&w<s&&-1!=u[w]){var S;x=l+(S=u[w])-w;if(S>=(C=i-C))return this.diff_bisectSplit_(e,t,S,x,a)}}}}return[new n.Diff(r,e),new n.Diff(1,t)]},n.prototype.diff_bisectSplit_=function(e,t,n,r,a){var i=e.substring(0,n),o=t.substring(0,r),c=e.substring(n),l=t.substring(r),s=this.diff_main(i,o,!1,a),u=this.diff_main(c,l,!1,a);return s.concat(u)},n.prototype.diff_linesToChars_=function(e,t){var n=[],r={};function a(e){for(var t="",a=0,o=-1,c=n.length;o<e.length-1;){-1==(o=e.indexOf("\n",a))&&(o=e.length-1);var l=e.substring(a,o+1);(r.hasOwnProperty?r.hasOwnProperty(l):void 0!==r[l])?t+=String.fromCharCode(r[l]):(c==i&&(l=e.substring(a),o=e.length),t+=String.fromCharCode(c),r[l]=c,n[c++]=l),a=o+1}return t}n[0]="";var i=4e4,o=a(e);return i=65535,{chars1:o,chars2:a(t),lineArray:n}},n.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var r=e[n][1],a=[],i=0;i<r.length;i++)a[i]=t[r.charCodeAt(i)];e[n][1]=a.join("")}},n.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,r=Math.min(e.length,t.length),a=r,i=0;n<a;)e.substring(i,a)==t.substring(i,a)?i=n=a:r=a,a=Math.floor((r-n)/2+n);return a},n.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,r=Math.min(e.length,t.length),a=r,i=0;n<a;)e.substring(e.length-a,e.length-i)==t.substring(t.length-a,t.length-i)?i=n=a:r=a,a=Math.floor((r-n)/2+n);return a},n.prototype.diff_commonOverlap_=function(e,t){var n=e.length,r=t.length;if(0==n||0==r)return 0;n>r?e=e.substring(n-r):n<r&&(t=t.substring(0,n));var a=Math.min(n,r);if(e==t)return a;for(var i=0,o=1;;){var c=e.substring(a-o),l=t.indexOf(c);if(-1==l)return i;o+=l,0!=l&&e.substring(a-o)!=t.substring(0,o)||(i=o,o++)}},n.prototype.diff_halfMatch_=function(e,t){if(this.Diff_Timeout<=0)return null;var n=e.length>t.length?e:t,r=e.length>t.length?t:e;if(n.length<4||2*r.length<n.length)return null;var a=this;function i(e,t,n){for(var r,i,o,c,l=e.substring(n,n+Math.floor(e.length/4)),s=-1,u="";-1!=(s=t.indexOf(l,s+1));){var d=a.diff_commonPrefix(e.substring(n),t.substring(s)),f=a.diff_commonSuffix(e.substring(0,n),t.substring(0,s));u.length<f+d&&(u=t.substring(s-f,s)+t.substring(s,s+d),r=e.substring(0,n-f),i=e.substring(n+d),o=t.substring(0,s-f),c=t.substring(s+d))}return 2*u.length>=e.length?[r,i,o,c,u]:null}var o,c,l,s,u,d=i(n,r,Math.ceil(n.length/4)),f=i(n,r,Math.ceil(n.length/2));return d||f?(o=f?d&&d[4].length>f[4].length?d:f:d,e.length>t.length?(c=o[0],l=o[1],s=o[2],u=o[3]):(s=o[0],u=o[1],c=o[2],l=o[3]),[c,l,s,u,o[4]]):null},n.prototype.diff_cleanupSemantic=function(e){for(var t=!1,a=[],i=0,o=null,c=0,l=0,s=0,u=0,d=0;c<e.length;)0==e[c][0]?(a[i++]=c,l=u,s=d,u=0,d=0,o=e[c][1]):(1==e[c][0]?u+=e[c][1].length:d+=e[c][1].length,o&&o.length<=Math.max(l,s)&&o.length<=Math.max(u,d)&&(e.splice(a[i-1],0,new n.Diff(r,o)),e[a[i-1]+1][0]=1,i--,c=--i>0?a[i-1]:-1,l=0,s=0,u=0,d=0,o=null,t=!0)),c++;for(t&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),c=1;c<e.length;){if(e[c-1][0]==r&&1==e[c][0]){var f=e[c-1][1],p=e[c][1],h=this.diff_commonOverlap_(f,p),m=this.diff_commonOverlap_(p,f);h>=m?(h>=f.length/2||h>=p.length/2)&&(e.splice(c,0,new n.Diff(0,p.substring(0,h))),e[c-1][1]=f.substring(0,f.length-h),e[c+1][1]=p.substring(h),c++):(m>=f.length/2||m>=p.length/2)&&(e.splice(c,0,new n.Diff(0,f.substring(0,m))),e[c-1][0]=1,e[c-1][1]=p.substring(0,p.length-m),e[c+1][0]=r,e[c+1][1]=f.substring(m),c++),c++}c++}},n.prototype.diff_cleanupSemanticLossless=function(e){function t(e,t){if(!e||!t)return 6;var r=e.charAt(e.length-1),a=t.charAt(0),i=r.match(n.nonAlphaNumericRegex_),o=a.match(n.nonAlphaNumericRegex_),c=i&&r.match(n.whitespaceRegex_),l=o&&a.match(n.whitespaceRegex_),s=c&&r.match(n.linebreakRegex_),u=l&&a.match(n.linebreakRegex_),d=s&&e.match(n.blanklineEndRegex_),f=u&&t.match(n.blanklineStartRegex_);return d||f?5:s||u?4:i&&!c&&l?3:c||l?2:i||o?1:0}for(var r=1;r<e.length-1;){if(0==e[r-1][0]&&0==e[r+1][0]){var a=e[r-1][1],i=e[r][1],o=e[r+1][1],c=this.diff_commonSuffix(a,i);if(c){var l=i.substring(i.length-c);a=a.substring(0,a.length-c),i=l+i.substring(0,i.length-c),o=l+o}for(var s=a,u=i,d=o,f=t(a,i)+t(i,o);i.charAt(0)===o.charAt(0);){a+=i.charAt(0),i=i.substring(1)+o.charAt(0),o=o.substring(1);var p=t(a,i)+t(i,o);p>=f&&(f=p,s=a,u=i,d=o)}e[r-1][1]!=s&&(s?e[r-1][1]=s:(e.splice(r-1,1),r--),e[r][1]=u,d?e[r+1][1]=d:(e.splice(r+1,1),r--))}r++}},n.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,n.whitespaceRegex_=/\s/,n.linebreakRegex_=/[\r\n]/,n.blanklineEndRegex_=/\n\r?\n$/,n.blanklineStartRegex_=/^\r?\n\r?\n/,n.prototype.diff_cleanupEfficiency=function(e){for(var t=!1,a=[],i=0,o=null,c=0,l=!1,s=!1,u=!1,d=!1;c<e.length;)0==e[c][0]?(e[c][1].length<this.Diff_EditCost&&(u||d)?(a[i++]=c,l=u,s=d,o=e[c][1]):(i=0,o=null),u=d=!1):(e[c][0]==r?d=!0:u=!0,o&&(l&&s&&u&&d||o.length<this.Diff_EditCost/2&&l+s+u+d==3)&&(e.splice(a[i-1],0,new n.Diff(r,o)),e[a[i-1]+1][0]=1,i--,o=null,l&&s?(u=d=!0,i=0):(c=--i>0?a[i-1]:-1,u=d=!1),t=!0)),c++;t&&this.diff_cleanupMerge(e)},n.prototype.diff_cleanupMerge=function(e){e.push(new n.Diff(0,""));for(var t,a=0,i=0,o=0,c="",l="";a<e.length;)switch(e[a][0]){case 1:o++,l+=e[a][1],a++;break;case r:i++,c+=e[a][1],a++;break;case 0:i+o>1?(0!==i&&0!==o&&(0!==(t=this.diff_commonPrefix(l,c))&&(a-i-o>0&&0==e[a-i-o-1][0]?e[a-i-o-1][1]+=l.substring(0,t):(e.splice(0,0,new n.Diff(0,l.substring(0,t))),a++),l=l.substring(t),c=c.substring(t)),0!==(t=this.diff_commonSuffix(l,c))&&(e[a][1]=l.substring(l.length-t)+e[a][1],l=l.substring(0,l.length-t),c=c.substring(0,c.length-t))),a-=i+o,e.splice(a,i+o),c.length&&(e.splice(a,0,new n.Diff(r,c)),a++),l.length&&(e.splice(a,0,new n.Diff(1,l)),a++),a++):0!==a&&0==e[a-1][0]?(e[a-1][1]+=e[a][1],e.splice(a,1)):a++,o=0,i=0,c="",l=""}""===e[e.length-1][1]&&e.pop();var s=!1;for(a=1;a<e.length-1;)0==e[a-1][0]&&0==e[a+1][0]&&(e[a][1].substring(e[a][1].length-e[a-1][1].length)==e[a-1][1]?(e[a][1]=e[a-1][1]+e[a][1].substring(0,e[a][1].length-e[a-1][1].length),e[a+1][1]=e[a-1][1]+e[a+1][1],e.splice(a-1,1),s=!0):e[a][1].substring(0,e[a+1][1].length)==e[a+1][1]&&(e[a-1][1]+=e[a+1][1],e[a][1]=e[a][1].substring(e[a+1][1].length)+e[a+1][1],e.splice(a+1,1),s=!0)),a++;s&&this.diff_cleanupMerge(e)},n.prototype.diff_xIndex=function(e,t){var n,a=0,i=0,o=0,c=0;for(n=0;n<e.length&&(1!==e[n][0]&&(a+=e[n][1].length),e[n][0]!==r&&(i+=e[n][1].length),!(a>t));n++)o=a,c=i;return e.length!=n&&e[n][0]===r?c:c+(t-o)},n.prototype.diff_prettyHtml=function(e){for(var t=[],n=/&/g,a=/</g,i=/>/g,o=/\n/g,c=0;c<e.length;c++){var l=e[c][0],s=e[c][1].replace(n,"&amp;").replace(a,"&lt;").replace(i,"&gt;").replace(o,"&para;<br>");switch(l){case 1:t[c]='<ins style="background:#e6ffe6;">'+s+"</ins>";break;case r:t[c]='<del style="background:#ffe6e6;">'+s+"</del>";break;case 0:t[c]="<span>"+s+"</span>"}}return t.join("")},n.prototype.diff_text1=function(e){for(var t=[],n=0;n<e.length;n++)1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},n.prototype.diff_text2=function(e){for(var t=[],n=0;n<e.length;n++)e[n][0]!==r&&(t[n]=e[n][1]);return t.join("")},n.prototype.diff_levenshtein=function(e){for(var t=0,n=0,a=0,i=0;i<e.length;i++){var o=e[i][0],c=e[i][1];switch(o){case 1:n+=c.length;break;case r:a+=c.length;break;case 0:t+=Math.max(n,a),n=0,a=0}}return t+=Math.max(n,a)},n.prototype.diff_toDelta=function(e){for(var t=[],n=0;n<e.length;n++)switch(e[n][0]){case 1:t[n]="+"+encodeURI(e[n][1]);break;case r:t[n]="-"+e[n][1].length;break;case 0:t[n]="="+e[n][1].length}return t.join("\t").replace(/%20/g," ")},n.prototype.diff_fromDelta=function(e,t){for(var a=[],i=0,o=0,c=t.split(/\t/g),l=0;l<c.length;l++){var s=c[l].substring(1);switch(c[l].charAt(0)){case"+":try{a[i++]=new n.Diff(1,decodeURI(s))}catch(e){throw new Error("Illegal escape in diff_fromDelta: "+s)}break;case"-":case"=":var u=parseInt(s,10);if(isNaN(u)||u<0)throw new Error("Invalid number in diff_fromDelta: "+s);var d=e.substring(o,o+=u);"="==c[l].charAt(0)?a[i++]=new n.Diff(0,d):a[i++]=new n.Diff(r,d);break;default:if(c[l])throw new Error("Invalid diff operation in diff_fromDelta: "+c[l])}}if(o!=e.length)throw new Error("Delta length ("+o+") does not equal source text length ("+e.length+").");return a},n.prototype.match_main=function(e,t,n){if(null==e||null==t||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,e.length)),e==t?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1},n.prototype.match_bitap_=function(e,t,n){if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var r=this.match_alphabet_(t),a=this;function i(e,r){var i=e/t.length,o=Math.abs(n-r);return a.Match_Distance?i+o/a.Match_Distance:o?1:i}var o=this.Match_Threshold,c=e.indexOf(t,n);-1!=c&&(o=Math.min(i(0,c),o),-1!=(c=e.lastIndexOf(t,n+t.length))&&(o=Math.min(i(0,c),o)));var l,s,u=1<<t.length-1;c=-1;for(var d,f=t.length+e.length,p=0;p<t.length;p++){for(l=0,s=f;l<s;)i(p,n+s)<=o?l=s:f=s,s=Math.floor((f-l)/2+l);f=s;var h=Math.max(1,n-s+1),m=Math.min(n+s,e.length)+t.length,g=Array(m+2);g[m+1]=(1<<p)-1;for(var v=m;v>=h;v--){var y=r[e.charAt(v-1)];if(g[v]=0===p?(g[v+1]<<1|1)&y:(g[v+1]<<1|1)&y|(d[v+1]|d[v])<<1|1|d[v+1],g[v]&u){var b=i(p,v-1);if(b<=o){if(o=b,!((c=v-1)>n))break;h=Math.max(1,2*n-c)}}}if(i(p+1,n)>o)break;d=g}return c},n.prototype.match_alphabet_=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=0;for(n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},n.prototype.patch_addContext_=function(e,t){if(0!=t.length){if(null===e.start2)throw Error("patch not initialized");for(var r=t.substring(e.start2,e.start2+e.length1),a=0;t.indexOf(r)!=t.lastIndexOf(r)&&r.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)a+=this.Patch_Margin,r=t.substring(e.start2-a,e.start2+e.length1+a);a+=this.Patch_Margin;var i=t.substring(e.start2-a,e.start2);i&&e.diffs.unshift(new n.Diff(0,i));var o=t.substring(e.start2+e.length1,e.start2+e.length1+a);o&&e.diffs.push(new n.Diff(0,o)),e.start1-=i.length,e.start2-=i.length,e.length1+=i.length+o.length,e.length2+=i.length+o.length}},n.prototype.patch_make=function(e,t,a){var i,o;if("string"==typeof e&&"string"==typeof t&&void 0===a)i=e,(o=this.diff_main(i,t,!0)).length>2&&(this.diff_cleanupSemantic(o),this.diff_cleanupEfficiency(o));else if(e&&"object"==typeof e&&void 0===t&&void 0===a)o=e,i=this.diff_text1(o);else if("string"==typeof e&&t&&"object"==typeof t&&void 0===a)i=e,o=t;else{if("string"!=typeof e||"string"!=typeof t||!a||"object"!=typeof a)throw new Error("Unknown call format to patch_make.");i=e,o=a}if(0===o.length)return[];for(var c=[],l=new n.patch_obj,s=0,u=0,d=0,f=i,p=i,h=0;h<o.length;h++){var m=o[h][0],g=o[h][1];switch(s||0===m||(l.start1=u,l.start2=d),m){case 1:l.diffs[s++]=o[h],l.length2+=g.length,p=p.substring(0,d)+g+p.substring(d);break;case r:l.length1+=g.length,l.diffs[s++]=o[h],p=p.substring(0,d)+p.substring(d+g.length);break;case 0:g.length<=2*this.Patch_Margin&&s&&o.length!=h+1?(l.diffs[s++]=o[h],l.length1+=g.length,l.length2+=g.length):g.length>=2*this.Patch_Margin&&s&&(this.patch_addContext_(l,f),c.push(l),l=new n.patch_obj,s=0,f=p,u=d)}1!==m&&(u+=g.length),m!==r&&(d+=g.length)}return s&&(this.patch_addContext_(l,f),c.push(l)),c},n.prototype.patch_deepCopy=function(e){for(var t=[],r=0;r<e.length;r++){var a=e[r],i=new n.patch_obj;i.diffs=[];for(var o=0;o<a.diffs.length;o++)i.diffs[o]=new n.Diff(a.diffs[o][0],a.diffs[o][1]);i.start1=a.start1,i.start2=a.start2,i.length1=a.length1,i.length2=a.length2,t[r]=i}return t},n.prototype.patch_apply=function(e,t){if(0==e.length)return[t,[]];e=this.patch_deepCopy(e);var n=this.patch_addPadding(e);t=n+t+n,this.patch_splitMax(e);for(var a=0,i=[],o=0;o<e.length;o++){var c,l,s=e[o].start2+a,u=this.diff_text1(e[o].diffs),d=-1;if(u.length>this.Match_MaxBits?-1!=(c=this.match_main(t,u.substring(0,this.Match_MaxBits),s))&&(-1==(d=this.match_main(t,u.substring(u.length-this.Match_MaxBits),s+u.length-this.Match_MaxBits))||c>=d)&&(c=-1):c=this.match_main(t,u,s),-1==c)i[o]=!1,a-=e[o].length2-e[o].length1;else if(i[o]=!0,a=c-s,u==(l=-1==d?t.substring(c,c+u.length):t.substring(c,d+this.Match_MaxBits)))t=t.substring(0,c)+this.diff_text2(e[o].diffs)+t.substring(c+u.length);else{var f=this.diff_main(u,l,!1);if(u.length>this.Match_MaxBits&&this.diff_levenshtein(f)/u.length>this.Patch_DeleteThreshold)i[o]=!1;else{this.diff_cleanupSemanticLossless(f);for(var p,h=0,m=0;m<e[o].diffs.length;m++){var g=e[o].diffs[m];0!==g[0]&&(p=this.diff_xIndex(f,h)),1===g[0]?t=t.substring(0,c+p)+g[1]+t.substring(c+p):g[0]===r&&(t=t.substring(0,c+p)+t.substring(c+this.diff_xIndex(f,h+g[1].length))),g[0]!==r&&(h+=g[1].length)}}}}return[t=t.substring(n.length,t.length-n.length),i]},n.prototype.patch_addPadding=function(e){for(var t=this.Patch_Margin,r="",a=1;a<=t;a++)r+=String.fromCharCode(a);for(a=0;a<e.length;a++)e[a].start1+=t,e[a].start2+=t;var i=e[0],o=i.diffs;if(0==o.length||0!=o[0][0])o.unshift(new n.Diff(0,r)),i.start1-=t,i.start2-=t,i.length1+=t,i.length2+=t;else if(t>o[0][1].length){var c=t-o[0][1].length;o[0][1]=r.substring(o[0][1].length)+o[0][1],i.start1-=c,i.start2-=c,i.length1+=c,i.length2+=c}if(0==(o=(i=e[e.length-1]).diffs).length||0!=o[o.length-1][0])o.push(new n.Diff(0,r)),i.length1+=t,i.length2+=t;else if(t>o[o.length-1][1].length){c=t-o[o.length-1][1].length;o[o.length-1][1]+=r.substring(0,c),i.length1+=c,i.length2+=c}return r},n.prototype.patch_splitMax=function(e){for(var t=this.Match_MaxBits,a=0;a<e.length;a++)if(!(e[a].length1<=t)){var i=e[a];e.splice(a--,1);for(var o=i.start1,c=i.start2,l="";0!==i.diffs.length;){var s=new n.patch_obj,u=!0;for(s.start1=o-l.length,s.start2=c-l.length,""!==l&&(s.length1=s.length2=l.length,s.diffs.push(new n.Diff(0,l)));0!==i.diffs.length&&s.length1<t-this.Patch_Margin;){var d=i.diffs[0][0],f=i.diffs[0][1];1===d?(s.length2+=f.length,c+=f.length,s.diffs.push(i.diffs.shift()),u=!1):d===r&&1==s.diffs.length&&0==s.diffs[0][0]&&f.length>2*t?(s.length1+=f.length,o+=f.length,u=!1,s.diffs.push(new n.Diff(d,f)),i.diffs.shift()):(f=f.substring(0,t-s.length1-this.Patch_Margin),s.length1+=f.length,o+=f.length,0===d?(s.length2+=f.length,c+=f.length):u=!1,s.diffs.push(new n.Diff(d,f)),f==i.diffs[0][1]?i.diffs.shift():i.diffs[0][1]=i.diffs[0][1].substring(f.length))}l=(l=this.diff_text2(s.diffs)).substring(l.length-this.Patch_Margin);var p=this.diff_text1(i.diffs).substring(0,this.Patch_Margin);""!==p&&(s.length1+=p.length,s.length2+=p.length,0!==s.diffs.length&&0===s.diffs[s.diffs.length-1][0]?s.diffs[s.diffs.length-1][1]+=p:s.diffs.push(new n.Diff(0,p))),u||e.splice(++a,0,s)}}},n.prototype.patch_toText=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t.join("")},n.prototype.patch_fromText=function(e){var t=[];if(!e)return t;for(var a=e.split("\n"),i=0,o=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<a.length;){var c=a[i].match(o);if(!c)throw new Error("Invalid patch string: "+a[i]);var l=new n.patch_obj;for(t.push(l),l.start1=parseInt(c[1],10),""===c[2]?(l.start1--,l.length1=1):"0"==c[2]?l.length1=0:(l.start1--,l.length1=parseInt(c[2],10)),l.start2=parseInt(c[3],10),""===c[4]?(l.start2--,l.length2=1):"0"==c[4]?l.length2=0:(l.start2--,l.length2=parseInt(c[4],10)),i++;i<a.length;){var s=a[i].charAt(0);try{var u=decodeURI(a[i].substring(1))}catch(e){throw new Error("Illegal escape in patch_fromText: "+u)}if("-"==s)l.diffs.push(new n.Diff(r,u));else if("+"==s)l.diffs.push(new n.Diff(1,u));else if(" "==s)l.diffs.push(new n.Diff(0,u));else{if("@"==s)break;if(""!==s)throw new Error('Invalid patch mode "'+s+'" in: '+u)}i++}}return t},(n.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0}).prototype.toString=function(){for(var e,t=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],n=0;n<this.diffs.length;n++){switch(this.diffs[n][0]){case 1:e="+";break;case r:e="-";break;case 0:e=" "}t[n+1]=e+encodeURI(this.diffs[n][1])+"\n"}return t.join("").replace(/%20/g," ")},e.exports=n,e.exports.diff_match_patch=n,e.exports.DIFF_DELETE=r,e.exports.DIFF_INSERT=1,e.exports.DIFF_EQUAL=0},function(e,t,n){"use strict";var r=n(837),a=n(15),i=n.n(a),o=n(0),c=n(144);var l=n(494);var s=n(3),u=n.n(s),d=n(8),f=n.n(d),p=n(9),h=n.n(p),m=n(12),g=n.n(m),v=n(117),y=n.n(v),b=n(7),k=n.n(b),w=n(337),x=n.n(w),_=n(262),C=n.n(_),E=n(156),O=n.n(E),S=n(372),R=n(172);function D(e,t,n){return void 0!==n?n:"year"===e&&t.lang.yearPlaceholder?t.lang.yearPlaceholder:"quarter"===e&&t.lang.quarterPlaceholder?t.lang.quarterPlaceholder:"month"===e&&t.lang.monthPlaceholder?t.lang.monthPlaceholder:"week"===e&&t.lang.weekPlaceholder?t.lang.weekPlaceholder:"time"===e&&t.timePickerLocale.placeholder?t.timePickerLocale.placeholder:t.lang.placeholder}function A(e,t,n){return void 0!==n?n:"year"===e&&t.lang.yearPlaceholder?t.lang.rangeYearPlaceholder:"month"===e&&t.lang.monthPlaceholder?t.lang.rangeMonthPlaceholder:"week"===e&&t.lang.weekPlaceholder?t.lang.rangeWeekPlaceholder:"time"===e&&t.timePickerLocale.placeholder?t.timePickerLocale.rangePlaceholder:t.lang.rangePlaceholder}var T=n(87),P=n(190),j=n(178),M=n(134),N=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};var L=n(545),I=n.n(L),z=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};var B={button:function(e){return o.createElement(c.a,i()({size:"small",type:"primary"},e))},rangeItem:function(e){return o.createElement(l.a,i()({color:"blue"},e))}};function F(e){var t,n=e.format,r=e.picker,a=e.showHour,o=e.showMinute,c=e.showSecond,l=e.use12Hours,s=(t=n,t?Array.isArray(t)?t:[t]:[])[0],u=i()({},e);return s&&"string"==typeof s&&(s.includes("s")||void 0!==c||(u.showSecond=!1),s.includes("m")||void 0!==o||(u.showMinute=!1),s.includes("H")||s.includes("h")||void 0!==a||(u.showHour=!1),(s.includes("a")||s.includes("A"))&&void 0===l&&(u.use12Hours=!0)),"time"===r?u:("function"==typeof s&&delete u.format,{showTime:u})}var V=function(e){var t=function(e){function t(t,n){var r=function(r){g()(c,r);var a=y()(c);function c(r){var l;return f()(this,c),(l=a.call(this,r)).pickerRef=o.createRef(),l.focus=function(){l.pickerRef.current&&l.pickerRef.current.focus()},l.blur=function(){l.pickerRef.current&&l.pickerRef.current.blur()},l.getDefaultLocale=function(){var e=l.props.locale,t=i()(i()({},R.a),e);return t.lang=i()(i()({},t.lang),(e||{}).lang),t},l.renderPicker=function(n){var r=l.context,a=r.getPrefixCls,c=r.direction,s=r.getPopupContainer,d=l.props,f=d.prefixCls,p=d.getPopupContainer,h=d.className,m=d.size,g=d.bordered,v=void 0===g||g,y=d.placeholder,b=N(d,["prefixCls","getPopupContainer","className","size","bordered","placeholder"]),w=l.props,_=w.format,E=w.showTime,R=a("picker",f),A={showToday:!0},T={};t&&(T.picker=t);var P=t||l.props.picker;return T=i()(i()(i()({},T),E?F(i()({format:_,picker:P},E)):{}),"time"===P?F(i()(i()({format:_},l.props),{picker:P})):{}),o.createElement(M.b.Consumer,null,(function(t){var r,a=m||t;return o.createElement(S.b,i()({ref:l.pickerRef,placeholder:D(P,n,y),suffixIcon:"time"===P?o.createElement(C.a,null):o.createElement(x.a,null),clearIcon:o.createElement(O.a,null),allowClear:!0,transitionName:"slide-up"},A,b,T,{locale:n.lang,className:k()((r={},u()(r,"".concat(R,"-").concat(a),a),u()(r,"".concat(R,"-borderless"),!v),r),h),prefixCls:R,getPopupContainer:p||s,generateConfig:e,prevIcon:o.createElement("span",{className:"".concat(R,"-prev-icon")}),nextIcon:o.createElement("span",{className:"".concat(R,"-next-icon")}),superPrevIcon:o.createElement("span",{className:"".concat(R,"-super-prev-icon")}),superNextIcon:o.createElement("span",{className:"".concat(R,"-super-next-icon")}),components:B,direction:c}))}))},Object(T.a)("quarter"!==t,n,"DatePicker.".concat(n," is legacy usage. Please use DatePicker[picker='").concat(t,"'] directly.")),l}return h()(c,[{key:"render",value:function(){return o.createElement(j.a,{componentName:"DatePicker",defaultLocale:this.getDefaultLocale},this.renderPicker)}}]),c}(o.Component);return r.contextType=P.b,n&&(r.displayName=n),r}return{DatePicker:t(),WeekPicker:t("week","WeekPicker"),MonthPicker:t("month","MonthPicker"),YearPicker:t("year","YearPicker"),TimePicker:t("time","TimePicker"),QuarterPicker:t("quarter","QuarterPicker")}}(e),n=t.DatePicker,r=t.WeekPicker,a=t.MonthPicker,c=t.YearPicker,l=t.TimePicker,s=t.QuarterPicker,d=function(e){var t=function(t){g()(r,t);var n=y()(r);function r(){var t;return f()(this,r),(t=n.apply(this,arguments)).pickerRef=o.createRef(),t.focus=function(){t.pickerRef.current&&t.pickerRef.current.focus()},t.blur=function(){t.pickerRef.current&&t.pickerRef.current.blur()},t.getDefaultLocale=function(){var e=t.props.locale,n=i()(i()({},R.a),e);return n.lang=i()(i()({},n.lang),(e||{}).lang),n},t.renderPicker=function(n){var r=t.context,a=r.getPrefixCls,c=r.direction,l=r.getPopupContainer,s=t.props,d=s.prefixCls,f=s.getPopupContainer,p=s.className,h=s.size,m=s.bordered,g=void 0===m||m,v=s.placeholder,y=z(s,["prefixCls","getPopupContainer","className","size","bordered","placeholder"]),b=t.props,w=b.format,_=b.showTime,E=b.picker,R=a("picker",d),D={};return D=i()(i()(i()({},D),_?F(i()({format:w,picker:E},_)):{}),"time"===E?F(i()(i()({format:w},t.props),{picker:E})):{}),o.createElement(M.b.Consumer,null,(function(r){var a,s=h||r;return o.createElement(S.a,i()({separator:o.createElement("span",{"aria-label":"to",className:"".concat(R,"-separator")},o.createElement(I.a,null)),ref:t.pickerRef,placeholder:A(E,n,v),suffixIcon:"time"===E?o.createElement(C.a,null):o.createElement(x.a,null),clearIcon:o.createElement(O.a,null),allowClear:!0,transitionName:"slide-up"},y,D,{className:k()((a={},u()(a,"".concat(R,"-").concat(s),s),u()(a,"".concat(R,"-borderless"),!g),a),p),locale:n.lang,prefixCls:R,getPopupContainer:f||l,generateConfig:e,prevIcon:o.createElement("span",{className:"".concat(R,"-prev-icon")}),nextIcon:o.createElement("span",{className:"".concat(R,"-next-icon")}),superPrevIcon:o.createElement("span",{className:"".concat(R,"-super-prev-icon")}),superNextIcon:o.createElement("span",{className:"".concat(R,"-super-next-icon")}),components:B,direction:c}))}))},t}return h()(r,[{key:"render",value:function(){return o.createElement(j.a,{componentName:"DatePicker",defaultLocale:this.getDefaultLocale},this.renderPicker)}}]),r}(o.Component);return t.contextType=P.b,t}(e),p=n;return p.WeekPicker=r,p.MonthPicker=a,p.YearPicker=c,p.RangePicker=d,p.TimePicker=l,p.QuarterPicker=s,p}(r.a);t.a=V},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,,,,,,function(e,t,n){},function(e,t,n){"use strict";n.d(t,"e",(function(){return o}));var r=n(164),a=n.n(r),i=n(127);n.d(t,"h",(function(){return i.WORKFLOW_EVENT})),n.d(t,"g",(function(){return i.SAVE_TYPE})),n.d(t,"d",(function(){return i.ERROR_CODE})),n.d(t,"f",(function(){return i.MESSAGE})),n.d(t,"a",(function(){return i.DOC_STATUS})),n.d(t,"b",(function(){return i.EDIT_MODE})),n.d(t,"c",(function(){return i.EDIT_SCENE}));var o={edit:{key:"e",title:"E"},publish:{key:["⌘+enter","ctrl+enter"],title:a.a.mac?"⌘+Enter":"Ctrl+Enter"}};i.WORKFLOW_EVENT,i.ACTION,i.SAVE_TYPE,i.ERROR_CODE,i.MESSAGE,i.DOC_STATUS,i.NET_STATUS,i.EDIT_MODE},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(1986))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(923))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if((0,a.default)(t),!(n=String(n)))return e(t,4)||e(t,6);if("4"===n){if(!i.test(t))return!1;var r=t.split(".").sort((function(e,t){return e-t}));return r[3]<=255}if("6"===n){var c=t.split(":"),l=!1,s=e(c[c.length-1],4),u=s?7:8;if(c.length>u)return!1;if("::"===t)return!0;"::"===t.substr(0,2)?(c.shift(),c.shift(),l=!0):"::"===t.substr(t.length-2)&&(c.pop(),c.pop(),l=!0);for(var d=0;d<c.length;++d)if(""===c[d]&&d>0&&d<c.length-1){if(l)return!1;l=!0}else if(s&&d===c.length-1);else if(!o.test(c[d]))return!1;return l?c.length>=1:c.length===u}return!1};var r,a=(r=n(46))&&r.__esModule?r:{default:r};var i=/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/,o=/^[0-9A-F]{1,4}$/i;e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.commaDecimal=t.dotDecimal=t.arabicLocales=t.englishLocales=t.decimal=t.alphanumeric=t.alpha=void 0;var r={"en-US":/^[A-Z]+$/i,"bg-BG":/^[А-Я]+$/i,"cs-CZ":/^[A-ZÁČĎÉĚÍŇÓŘŠŤÚŮÝŽ]+$/i,"da-DK":/^[A-ZÆØÅ]+$/i,"de-DE":/^[A-ZÄÖÜß]+$/i,"el-GR":/^[Α-ω]+$/i,"es-ES":/^[A-ZÁÉÍÑÓÚÜ]+$/i,"fr-FR":/^[A-ZÀÂÆÇÉÈÊËÏÎÔŒÙÛÜŸ]+$/i,"it-IT":/^[A-ZÀÉÈÌÎÓÒÙ]+$/i,"nb-NO":/^[A-ZÆØÅ]+$/i,"nl-NL":/^[A-ZÁÉËÏÓÖÜÚ]+$/i,"nn-NO":/^[A-ZÆØÅ]+$/i,"hu-HU":/^[A-ZÁÉÍÓÖŐÚÜŰ]+$/i,"pl-PL":/^[A-ZĄĆĘŚŁŃÓŻŹ]+$/i,"pt-PT":/^[A-ZÃÁÀÂÇÉÊÍÕÓÔÚÜ]+$/i,"ru-RU":/^[А-ЯЁ]+$/i,"sl-SI":/^[A-ZČĆĐŠŽ]+$/i,"sk-SK":/^[A-ZÁČĎÉÍŇÓŠŤÚÝŽĹŔĽÄÔ]+$/i,"sr-RS@latin":/^[A-ZČĆŽŠĐ]+$/i,"sr-RS":/^[А-ЯЂЈЉЊЋЏ]+$/i,"sv-SE":/^[A-ZÅÄÖ]+$/i,"tr-TR":/^[A-ZÇĞİıÖŞÜ]+$/i,"uk-UA":/^[А-ЩЬЮЯЄIЇҐі]+$/i,"ku-IQ":/^[ئابپتجچحخدرڕزژسشعغفڤقکگلڵمنوۆھەیێيطؤثآإأكضصةظذ]+$/i,ar:/^[ءآأؤإئابةتثجحخدذرزسشصضطظعغفقكلمنهوىيًٌٍَُِّْٰ]+$/};t.alpha=r;var a={"en-US":/^[0-9A-Z]+$/i,"bg-BG":/^[0-9А-Я]+$/i,"cs-CZ":/^[0-9A-ZÁČĎÉĚÍŇÓŘŠŤÚŮÝŽ]+$/i,"da-DK":/^[0-9A-ZÆØÅ]+$/i,"de-DE":/^[0-9A-ZÄÖÜß]+$/i,"el-GR":/^[0-9Α-ω]+$/i,"es-ES":/^[0-9A-ZÁÉÍÑÓÚÜ]+$/i,"fr-FR":/^[0-9A-ZÀÂÆÇÉÈÊËÏÎÔŒÙÛÜŸ]+$/i,"it-IT":/^[0-9A-ZÀÉÈÌÎÓÒÙ]+$/i,"hu-HU":/^[0-9A-ZÁÉÍÓÖŐÚÜŰ]+$/i,"nb-NO":/^[0-9A-ZÆØÅ]+$/i,"nl-NL":/^[0-9A-ZÁÉËÏÓÖÜÚ]+$/i,"nn-NO":/^[0-9A-ZÆØÅ]+$/i,"pl-PL":/^[0-9A-ZĄĆĘŚŁŃÓŻŹ]+$/i,"pt-PT":/^[0-9A-ZÃÁÀÂÇÉÊÍÕÓÔÚÜ]+$/i,"ru-RU":/^[0-9А-ЯЁ]+$/i,"sl-SI":/^[0-9A-ZČĆĐŠŽ]+$/i,"sk-SK":/^[0-9A-ZÁČĎÉÍŇÓŠŤÚÝŽĹŔĽÄÔ]+$/i,"sr-RS@latin":/^[0-9A-ZČĆŽŠĐ]+$/i,"sr-RS":/^[0-9А-ЯЂЈЉЊЋЏ]+$/i,"sv-SE":/^[0-9A-ZÅÄÖ]+$/i,"tr-TR":/^[0-9A-ZÇĞİıÖŞÜ]+$/i,"uk-UA":/^[0-9А-ЩЬЮЯЄIЇҐі]+$/i,"ku-IQ":/^[٠١٢٣٤٥٦٧٨٩0-9ئابپتجچحخدرڕزژسشعغفڤقکگلڵمنوۆھەیێيطؤثآإأكضصةظذ]+$/i,ar:/^[٠١٢٣٤٥٦٧٨٩0-9ءآأؤإئابةتثجحخدذرزسشصضطظعغفقكلمنهوىيًٌٍَُِّْٰ]+$/};t.alphanumeric=a;var i={"en-US":".",ar:"٫"};t.decimal=i;var o=["AU","GB","HK","IN","NZ","ZA","ZM"];t.englishLocales=o;for(var c,l=0;l<o.length;l++)r[c="en-".concat(o[l])]=r["en-US"],a[c]=a["en-US"],i[c]=i["en-US"];var s=["AE","BH","DZ","EG","IQ","JO","KW","LB","LY","MA","QM","QA","SA","SD","SY","TN","YE"];t.arabicLocales=s;for(var u,d=0;d<s.length;d++)r[u="ar-".concat(s[d])]=r.ar,a[u]=a.ar,i[u]=i.ar;var f=[];t.dotDecimal=f;var p=["bg-BG","cs-CZ","da-DK","de-DE","el-GR","es-ES","fr-FR","it-IT","ku-IQ","hu-HU","nb-NO","nn-NO","nl-NL","pl-PL","pt-PT","ru-RU","sl-SI","sr-RS@latin","sr-RS","sv-SE","tr-TR","uk-UA"];t.commaDecimal=p;for(var h=0;h<f.length;h++)i[f[h]]=i["en-US"];for(var m=0;m<p.length;m++)i[p[m]]=",";r["pt-BR"]=r["pt-PT"],a["pt-BR"]=a["pt-PT"],i["pt-BR"]=i["pt-PT"],r["pl-Pl"]=r["pl-PL"],a["pl-Pl"]=a["pl-PL"],i["pl-Pl"]=i["pl-PL"]},function(e,t,n){"use strict";n(113);var r=n(56),a=n(0),i=n.n(a),o=n(2),c=n.n(o),l=n(31),s=n.n(l),u=n(35);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){return i.a.createElement("span",{className:"larkui-feature-guide-sign",style:t,onClick:e,"data-testid":"feature-guide-sign"},i.a.createElement("span",{className:"larkui-feature-guide-sign-spirit-outer"}),i.a.createElement("span",{className:"larkui-feature-guide-sign-spirit-inner"}))}function h(e){var t=e.type,n=void 0===t?"lite":t,o=e.tip,c=e.enableMultiLines,l=e.guideSignContainerStyle,f=d(Object(a.useState)(!0),2),h=f[0],m=f[1];if(!h)return null;var g=document.querySelector(e.containerSelector);if(!g)return null;var v=function(){m(!1),e.onRead()},y=function(){var t=g.querySelector(".larkui-feature-guide");if(t)return t;(t=document.createElement("div")).classList.add("larkui-feature-guide");if(t.classList.add({lite:"larkui-feature-guide-lite",mini:"larkui-feature-guide-mini"}[n]),t.setAttribute("data-testid","feature-guide"),"lite"===n){g.style.position="relative";var r=g.getBoundingClientRect();switch(e.placement){case"right":t.style.left="".concat(r.width+2,"px");break;case"left":t.style.left="-14px";break;default:t.style.left="".concat((r.width-12)/2,"px"),t.style.bottom=e.offsetY||"0"}}var a=e.readTrigger||[],i=function t(n){n.target.closest(".larkui-feature-guide")&&(n.preventDefault(),n.stopPropagation()),m(!1),e.onRead(),a.forEach((function(e){g.removeEventListener(e,t)}))};return a.forEach((function(e){g.addEventListener(e,i)})),g.appendChild(t),t}(),b=p(v,l),k=c?"larkui-feature-guide-lite-close-multi-line":"larkui-feature-guide-lite-close";if("mini"===n)return s.a.createPortal(b,y);if("lite"===n){var w="center"!==e.placement;return s.a.createPortal(i.a.createElement(r.a,{overlayClassName:"larkui-feature-guide-lite-tip",arrowPointAtCenter:w,autoAdjustOverflow:!1,defaultVisible:!0,title:i.a.createElement(i.a.Fragment,null,c?i.a.createElement("div",{className:"larkui-feature-guide-content",onClick:v},o):i.a.createElement("span",{className:"larkui-feature-guide-lite-content"},i.a.createElement("strong",null,o)),i.a.createElement("span",{onClick:v,className:k},i.a.createElement(u.a,{name:"feature-guide-close",width:16,height:16}))),placement:e.placement,visible:h,getPopupContainer:function(){return y},align:{targetOffset:[0,4]}},b),y)}}h.Mini=function(){return i.a.createElement("span",{className:"larkui-feature-guide-mini","data-testid":"standalone-mini-guide"},p((function(){})))},h.defaultProps={enableMultiLines:!1},h.propTypes={type:c.a.oneOf(["lite","mini"]),tip:c.a.oneOfType([c.a.string,c.a.node]),containerSelector:c.a.string.isRequired,readTrigger:c.a.array,placement:c.a.oneOf(["bottomRight","bottomLeft","bottom","right","left","top"]),offsetY:c.a.string,onRead:c.a.func.isRequired,guideSignContainerStyle:c.a.object,enableMultiLines:c.a.bool};t.a=h},function(e,t,n){"use strict";n(1007);var r=n(542);n(493);t.a=r.a},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(1536))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},function(e,t,n){},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(1604))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){"use strict";var r=n(394),a=n.n(r),i=n(62),o=n.n(i),c=n(109),l=n.n(c),s=n(13),u={getExportFormats:function(){return o.a.BOOK_EXPORT_FORMATS},adaptDocTypography:function(e){if(!e.doc_typography)return{type:l.a.DOC_TYPOGRAPHY.traditional,scope:"all"};var t=e.doc_typography.split("_");return 1===t.length?{type:t[0],scope:null}:{type:t[0],scope:t[1]}},actionsForNavMore:function(e,t,n){var r=e.abilities;if(!r)return[];var a=[];return r.read&&"Thread"===e.type&&a.push(s.a.BOOK.thread_list),r.create_doc&&(u.isMixingType(e)?a.push(s.a.BOOK.manage):"Design"===e.type&&a.push(s.a.BOOK.manage_assets),a.push(s.a.BOOK.collaborators)),r.manage&&!window.appData.isPrivateCloud&&u.isMixingType(e)&&a.push(s.a.BOOK.statistics),"Design"!==e.type&&r.create_doc&&a.push(s.a.BOOK.recycles),r.create_doc&&a.push(s.a.BOOK.settings),!!(window.appData.isPublicCloud&&t&&"User"===t.type&&e&&e.type&&("Book"===e.type||"Column"===e.type)&&e&&e.public)&&(a.push(s.a.BOOK.original),a.push(s.a.BOOK.premium)),a},sortByUpdatedAt:function(e,t){return new Date(e.content_updated_at)-new Date(t.content_updated_at)},sortByCreatedAt:function(e,t){return new Date(e.created_at)-new Date(t.created_at)},sortByTitle:function(e,t){return e.name.localeCompare(t.name,"zh-Hans-CN",{sensitivity:"accent"})},getBelong:function(e){var t={type:"",text:""};if(!e)return t;var n=e.user;return n?t={type:n.login,text:n.name}:t},getBelongs:function(e){var t=this,n=e.map((function(e){return t.getBelong(e)}));return(n=a()(n,"type").filter((function(e){return!!e.type}))).unshift({type:null,text:__("所有")}),n},filterByBelong:function(e,t){var n=this;return t?e.filter((function(e){return n.getBelong(e).type===t})):e},isMixingType:function(e){return!(!e||!e.type)&&l.a.MIXING_BOOK_TYPES.includes(e.type)}};t.a=u},,function(e,t,n){e.exports=function(){"use strict";function e(e,t,n){(n=n||{}).childrenKeyName=n.childrenKeyName||"children";var r=e||[],a=[],i=0;do{var o=r.filter((function(e){return t(e,i)}))[0];if(!o)break;a.push(o),r=o[n.childrenKeyName]||[],i+=1}while(r.length>0);return a}return e}()},,function(e,t,n){"use strict";n(1831);var r=n(1008);n(819);t.a=r.a},function(e,t,n){"use strict";n.d(t,"c",(function(){return f})),n.d(t,"e",(function(){return k})),n.d(t,"d",(function(){return _})),n.d(t,"b",(function(){return C})),n.d(t,"a",(function(){return S}));n(53);var r=n(19),a=n(0),i=n(62),o=n.n(i);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var s=function(e,t){return t.book&&Object.values(o.a.TYPE).includes(e.type)},u=function(e,t){if(!e.joinToken)return"";var n=e.joinToken;if("Doc"===n.target_type){var r=e.slug,a=t.group,i=t.book,o=t.isEditing,c="".concat(window.location.origin,"/g/").concat(a.login,"/").concat(i.slug,"/").concat(r,"/collaborator/join?token=").concat(n.token);if(o){var l="/".concat(a.login,"/").concat(i.slug,"/").concat(r,"/edit");c="".concat(c,"&goto=").concat(encodeURIComponent(l))}return c}if("Book"===n.target_type){var s=e.slug,u=t.group;return"".concat(window.location.origin,"/g/").concat(u.login,"/").concat(s,"/collaborator/join?token=").concat(n.token)}return""},d=function(e){return!e.joinToken||!!e.joinToken.approve},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(a.useState)(!1),i=c(n,2),o=i[0],l=i[1],f=Object(a.useState)(u(e,t)),p=c(f,2),h=p[0],m=p[1],g=Object(a.useState)(d(e)),v=c(g,2),y=v[0],b=v[1],k=t.dispatch,w=function(n){l(!0);var a="proxy.web/books.token",i="book/updateToken",o=e.id;s(e,t)&&(a="proxy.web/docs.genToken",i="doc/updateToken",o=e.id),k({type:a,payload:{data:{id:o,force:n},reducer:i}}).then((function(a){n&&r.a.success(__("重置链接成功")),e.joinToken=a;var i=u(e,t);m(i),b(d(e)),l(!1)}))},x=function(){return w(!0)},_=function(n){var a="proxy.web/books.updateToken",i="book/updateToken",o=e.id;s(e,t)&&(a="proxy.web/docs.updateToken",i="doc/updateToken",o=e.id),k({type:a,payload:{data:{id:o,approve:!0===n?1:0},reducer:i}}).then((function(e){r.a.success(__("更新审批状态成功")),b(n)}))};return Object(a.useEffect)((function(){e.abilities&&e.abilities.create_collaborator&&!h&&w()}),[e.id]),[h,x,o,y,_]},p=n(79),h=n.n(p),m=n(497);function g(e,t,n,r,a,i,o){try{var c=e[i](o),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){g(i,r,a,o,c,"next",e)}function c(e){g(i,r,a,o,c,"throw",e)}o(void 0)}))}}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.organization,r=t.dispatch,i=Object(a.useState)(!1),o=y(i,2),c=o[0],l=o[1],s=Object(a.useState)([]),u=y(s,2),d=u[0],f=u[1],p=h()(function(){var e=v(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return l(!1),e.abrupt("return");case 3:l(!0),a={q:t.trim(),include_unconfirmed_corp_account:!0},n&&n.id||(a.global=!0),r({type:"proxy.web/users.complete",payload:{data:a}}).then((function(e){f(Object(m.format)(e)),l(!1)}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),50),g=function(){return f([])};return[d,p,c,g]};function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _=function(){var e=Object(a.useState)(!1),t=w(e,2),n=t[0],r=t[1],i=Object(a.useCallback)((function(){return r((function(e){return!e}))}),[]);return[n,i]},C=function(e){return[window.location.hash==="#".concat(e),function(){window.location.hash=""}]};var E=n(21);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var S=function(e,t){return function(n,r){var a=e.id,i=e.settings.homepage,o=i?i.layout:{};Object.keys(o).map((function(e){return o[e]&&o[e].length>0&&(o[e]=o[e].map((function(e){return"string"==typeof e&&e===t||"object"===O(e)&&e.type===t?{name:n,type:t}:e}))),o[e]})),E.b.groups.settings({id:a,homepage:{layout:o}}).then((function(e){r&&"function"==typeof r&&r(e)}))}}},,,function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(918))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(940))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),e=Date.parse(e),isNaN(e)?null:new Date(e)};var r,a=(r=n(46))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){"object"===r(e)&&null!==e?e="function"==typeof e.toString?e.toString():"[object Object]":(null==e||isNaN(e)&&!e.length)&&(e="");return String(e)},e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,r.default)(e),(t=(0,a.default)(t,o)).allow_trailing_dot&&"."===e[e.length-1]&&(e=e.substring(0,e.length-1));for(var n=e.split("."),i=0;i<n.length;i++)if(n[i].length>63)return!1;if(t.require_tld){var c=n.pop();if(!n.length||!/^([a-z\u00a1-\uffff]{2,}|xn[a-z0-9-]{2,})$/i.test(c))return!1;if(/[\s\u2002-\u200B\u202F\u205F\u3000\uFEFF\uDB40\uDC20]/.test(c))return!1}for(var l,s=0;s<n.length;s++){if(l=n[s],t.allow_underscores&&(l=l.replace(/_/g,"")),!/^[a-z\u00a1-\uffff0-9-]+$/i.test(l))return!1;if(/[\uff01-\uff5e]/.test(l))return!1;if("-"===l[0]||"-"===l[l.length-1])return!1}return!0};var r=i(n(46)),a=i(n(307));function i(e){return e&&e.__esModule?e:{default:e}}var o={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1};e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){return e.some((function(e){return t===e}))};t.default=r,e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";var r=n(33),a=n(36);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),o=r(n(588)),c=r(n(37)),l=function(e,t){return i.createElement(c.default,Object.assign({},e,{ref:t,icon:o.default}))};l.displayName="PlusOutlined";var s=i.forwardRef(l);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"}},function(e,t,n){"use strict";var r=n(33),a=n(36);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),o=r(n(590)),c=r(n(37)),l=function(e,t){return i.createElement(c.default,Object.assign({},e,{ref:t,icon:o.default}))};l.displayName="ClockCircleOutlined";var s=i.forwardRef(l);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]},name:"clock-circle",theme:"outlined"}},function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},function(e,t){e.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},function(e,t,n){var r=n(196),a=n(166),i=n(308),o=n(594),c=n(595),l=n(596),s=n(597),u=n(598),d=n(387),f=n(599),p=n(602),h=n(603),m=n(167),g=n(604),v=n(220);function y(e,t,n){var r,a,i=e.size,o=h.getEncodedBits(t,n);for(r=0;r<15;r++)a=1==(o>>r&1),r<6?e.set(r,8,a,!0):r<8?e.set(r+1,8,a,!0):e.set(i-15+r,8,a,!0),r<8?e.set(8,i-r-1,a,!0):r<9?e.set(8,15-r-1+1,a,!0):e.set(8,15-r-1,a,!0);e.set(i-8,8,1,!0)}function b(e,t,n){var i=new o;n.forEach((function(t){i.put(t.mode.bit,4),i.put(t.getLength(),m.getCharCountIndicator(t.mode,e)),t.write(i)}));var c=8*(a.getSymbolTotalCodewords(e)-d.getTotalCodewordsCount(e,t));for(i.getLengthInBits()+4<=c&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(0);for(var l=(c-i.getLengthInBits())/8,s=0;s<l;s++)i.put(s%2?17:236,8);return function(e,t,n){for(var i=a.getSymbolTotalCodewords(t),o=d.getTotalCodewordsCount(t,n),c=i-o,l=d.getBlocksCount(t,n),s=l-i%l,u=Math.floor(i/l),p=Math.floor(c/l),h=p+1,m=u-p,g=new f(m),v=0,y=new Array(l),b=new Array(l),k=0,w=r.from(e.buffer),x=0;x<l;x++){var _=x<s?p:h;y[x]=w.slice(v,v+_),b[x]=g.encode(y[x]),v+=_,k=Math.max(k,_)}var C,E,O=r.alloc(i),S=0;for(C=0;C<k;C++)for(E=0;E<l;E++)C<y[E].length&&(O[S++]=y[E][C]);for(C=0;C<m;C++)for(E=0;E<l;E++)O[S++]=b[E][C];return O}(i,e,t)}function k(e,t,n,r){var i;if(v(e))i=g.fromArray(e);else{if("string"!=typeof e)throw new Error("Invalid data");var o=t;if(!o){var d=g.rawSplit(e);o=p.getBestVersionForData(d,n)}i=g.fromString(e,o||40)}var f=p.getBestVersionForData(i,n);if(!f)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<f)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+f+".\n")}else t=f;var h=b(t,n,i),m=a.getSymbolSize(t),k=new c(m);return function(e,t){for(var n=e.size,r=s.getPositions(t),a=0;a<r.length;a++)for(var i=r[a][0],o=r[a][1],c=-1;c<=7;c++)if(!(i+c<=-1||n<=i+c))for(var l=-1;l<=7;l++)o+l<=-1||n<=o+l||(c>=0&&c<=6&&(0===l||6===l)||l>=0&&l<=6&&(0===c||6===c)||c>=2&&c<=4&&l>=2&&l<=4?e.set(i+c,o+l,!0,!0):e.set(i+c,o+l,!1,!0))}(k,t),function(e){for(var t=e.size,n=8;n<t-8;n++){var r=n%2==0;e.set(n,6,r,!0),e.set(6,n,r,!0)}}(k),function(e,t){for(var n=l.getPositions(t),r=0;r<n.length;r++)for(var a=n[r][0],i=n[r][1],o=-2;o<=2;o++)for(var c=-2;c<=2;c++)-2===o||2===o||-2===c||2===c||0===o&&0===c?e.set(a+o,i+c,!0,!0):e.set(a+o,i+c,!1,!0)}(k,t),y(k,n,0),t>=7&&function(e,t){for(var n,r,a,i=e.size,o=p.getEncodedBits(t),c=0;c<18;c++)n=Math.floor(c/3),r=c%3+i-8-3,a=1==(o>>c&1),e.set(n,r,a,!0),e.set(r,n,a,!0)}(k,t),function(e,t){for(var n=e.size,r=-1,a=n-1,i=7,o=0,c=n-1;c>0;c-=2)for(6===c&&c--;;){for(var l=0;l<2;l++)if(!e.isReserved(a,c-l)){var s=!1;o<t.length&&(s=1==(t[o]>>>i&1)),e.set(a,c-l,s),-1==--i&&(o++,i=7)}if((a+=r)<0||n<=a){a-=r,r=-r;break}}}(k,h),isNaN(r)&&(r=u.getBestMask(k,y.bind(null,k,n))),u.applyMask(r,k),y(k,n,r),{modules:k,version:t,errorCorrectionLevel:n,maskPattern:r,segments:i}}t.create=function(e,t){if(void 0===e||""===e)throw new Error("No input text");var n,r,o=i.M;return void 0!==t&&(o=i.from(t.errorCorrectionLevel,i.M),n=p.from(t.version),r=u.from(t.maskPattern),t.toSJISFunc&&a.setToSJISFunction(t.toSJISFunc)),k(e,n,o,r)}},function(e,t){function n(){this.buffer=[],this.length=0}n.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=n},function(e,t,n){var r=n(196);function a(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=r.alloc(e*e),this.reservedBit=r.alloc(e*e)}a.prototype.set=function(e,t,n,r){var a=e*this.size+t;this.data[a]=n,r&&(this.reservedBit[a]=!0)},a.prototype.get=function(e,t){return this.data[e*this.size+t]},a.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n},a.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},e.exports=a},function(e,t,n){var r=n(166).getSymbolSize;t.getRowColCoords=function(e){if(1===e)return[];for(var t=Math.floor(e/7)+2,n=r(e),a=145===n?26:2*Math.ceil((n-13)/(2*t-2)),i=[n-7],o=1;o<t-1;o++)i[o]=i[o-1]-a;return i.push(6),i.reverse()},t.getPositions=function(e){for(var n=[],r=t.getRowColCoords(e),a=r.length,i=0;i<a;i++)for(var o=0;o<a;o++)0===i&&0===o||0===i&&o===a-1||i===a-1&&0===o||n.push([r[i],r[o]]);return n}},function(e,t,n){var r=n(166).getSymbolSize;t.getPositions=function(e){var t=r(e);return[[0,0],[t-7,0],[0,t-7]]}},function(e,t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var n=3,r=3,a=40,i=10;function o(e,n,r){switch(e){case t.Patterns.PATTERN000:return(n+r)%2==0;case t.Patterns.PATTERN001:return n%2==0;case t.Patterns.PATTERN010:return r%3==0;case t.Patterns.PATTERN011:return(n+r)%3==0;case t.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(r/3))%2==0;case t.Patterns.PATTERN101:return n*r%2+n*r%3==0;case t.Patterns.PATTERN110:return(n*r%2+n*r%3)%2==0;case t.Patterns.PATTERN111:return(n*r%3+(n+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}}t.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(e){for(var t=e.size,r=0,a=0,i=0,o=null,c=null,l=0;l<t;l++){a=i=0,o=c=null;for(var s=0;s<t;s++){var u=e.get(l,s);u===o?a++:(a>=5&&(r+=n+(a-5)),o=u,a=1),(u=e.get(s,l))===c?i++:(i>=5&&(r+=n+(i-5)),c=u,i=1)}a>=5&&(r+=n+(a-5)),i>=5&&(r+=n+(i-5))}return r},t.getPenaltyN2=function(e){for(var t=e.size,n=0,a=0;a<t-1;a++)for(var i=0;i<t-1;i++){var o=e.get(a,i)+e.get(a,i+1)+e.get(a+1,i)+e.get(a+1,i+1);4!==o&&0!==o||n++}return n*r},t.getPenaltyN3=function(e){for(var t=e.size,n=0,r=0,i=0,o=0;o<t;o++){r=i=0;for(var c=0;c<t;c++)r=r<<1&2047|e.get(o,c),c>=10&&(1488===r||93===r)&&n++,i=i<<1&2047|e.get(c,o),c>=10&&(1488===i||93===i)&&n++}return n*a},t.getPenaltyN4=function(e){for(var t=0,n=e.data.length,r=0;r<n;r++)t+=e.data[r];return Math.abs(Math.ceil(100*t/n/5)-10)*i},t.applyMask=function(e,t){for(var n=t.size,r=0;r<n;r++)for(var a=0;a<n;a++)t.isReserved(a,r)||t.xor(a,r,o(e,a,r))},t.getBestMask=function(e,n){for(var r=Object.keys(t.Patterns).length,a=0,i=1/0,o=0;o<r;o++){n(o),t.applyMask(o,e);var c=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(o,e),c<i&&(i=c,a=o)}return a}},function(e,t,n){var r=n(196),a=n(600),i=n(370).Buffer;function o(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}o.prototype.initialize=function(e){this.degree=e,this.genPoly=a.generateECPolynomial(this.degree)},o.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");var t=r.alloc(this.degree),n=i.concat([e,t],e.length+this.degree),o=a.mod(n,this.genPoly),c=this.degree-o.length;if(c>0){var l=r.alloc(this.degree);return o.copy(l,c),l}return o},e.exports=o},function(e,t,n){var r=n(196),a=n(601);t.mul=function(e,t){for(var n=r.alloc(e.length+t.length-1),i=0;i<e.length;i++)for(var o=0;o<t.length;o++)n[i+o]^=a.mul(e[i],t[o]);return n},t.mod=function(e,t){for(var n=r.from(e);n.length-t.length>=0;){for(var i=n[0],o=0;o<t.length;o++)n[o]^=a.mul(t[o],i);for(var c=0;c<n.length&&0===n[c];)c++;n=n.slice(c)}return n},t.generateECPolynomial=function(e){for(var n=r.from([1]),i=0;i<e;i++)n=t.mul(n,[1,a.exp(i)]);return n}},function(e,t,n){var r=n(196),a=r.alloc(512),i=r.alloc(256);!function(){for(var e=1,t=0;t<255;t++)a[t]=e,i[e]=t,256&(e<<=1)&&(e^=285);for(t=255;t<512;t++)a[t]=a[t-255]}(),t.log=function(e){if(e<1)throw new Error("log("+e+")");return i[e]},t.exp=function(e){return a[e]},t.mul=function(e,t){return 0===e||0===t?0:a[i[e]+i[t]]}},function(e,t,n){var r=n(166),a=n(387),i=n(308),o=n(167),c=n(388),l=n(220),s=r.getBCHDigit(7973);function u(e,t){return o.getCharCountIndicator(e,t)+4}function d(e,t){var n=0;return e.forEach((function(e){var r=u(e.mode,t);n+=r+e.getBitsLength()})),n}t.from=function(e,t){return c.isValid(e)?parseInt(e,10):t},t.getCapacity=function(e,t,n){if(!c.isValid(e))throw new Error("Invalid QR Code version");void 0===n&&(n=o.BYTE);var i=8*(r.getSymbolTotalCodewords(e)-a.getTotalCodewordsCount(e,t));if(n===o.MIXED)return i;var l=i-u(n,e);switch(n){case o.NUMERIC:return Math.floor(l/10*3);case o.ALPHANUMERIC:return Math.floor(l/11*2);case o.KANJI:return Math.floor(l/13);case o.BYTE:default:return Math.floor(l/8)}},t.getBestVersionForData=function(e,n){var r,a=i.from(n,i.M);if(l(e)){if(e.length>1)return function(e,n){for(var r=1;r<=40;r++)if(d(e,r)<=t.getCapacity(r,n,o.MIXED))return r}(e,a);if(0===e.length)return 1;r=e[0]}else r=e;return function(e,n,r){for(var a=1;a<=40;a++)if(n<=t.getCapacity(a,r,e))return a}(r.mode,r.getLength(),a)},t.getEncodedBits=function(e){if(!c.isValid(e)||e<7)throw new Error("Invalid QR Code version");for(var t=e<<12;r.getBCHDigit(t)-s>=0;)t^=7973<<r.getBCHDigit(t)-s;return e<<12|t}},function(e,t,n){var r=n(166),a=r.getBCHDigit(1335);t.getEncodedBits=function(e,t){for(var n=e.bit<<3|t,i=n<<10;r.getBCHDigit(i)-a>=0;)i^=1335<<r.getBCHDigit(i)-a;return 21522^(n<<10|i)}},function(e,t,n){var r=n(167),a=n(605),i=n(606),o=n(607),c=n(608),l=n(389),s=n(166),u=n(609);function d(e){return unescape(encodeURIComponent(e)).length}function f(e,t,n){for(var r,a=[];null!==(r=e.exec(n));)a.push({data:r[0],index:r.index,mode:t,length:r[0].length});return a}function p(e){var t,n,a=f(l.NUMERIC,r.NUMERIC,e),i=f(l.ALPHANUMERIC,r.ALPHANUMERIC,e);return s.isKanjiModeEnabled()?(t=f(l.BYTE,r.BYTE,e),n=f(l.KANJI,r.KANJI,e)):(t=f(l.BYTE_KANJI,r.BYTE,e),n=[]),a.concat(i,t,n).sort((function(e,t){return e.index-t.index})).map((function(e){return{data:e.data,mode:e.mode,length:e.length}}))}function h(e,t){switch(t){case r.NUMERIC:return a.getBitsLength(e);case r.ALPHANUMERIC:return i.getBitsLength(e);case r.KANJI:return c.getBitsLength(e);case r.BYTE:return o.getBitsLength(e)}}function m(e,t){var n,l=r.getBestModeForData(e);if((n=r.from(t,l))!==r.BYTE&&n.bit<l.bit)throw new Error('"'+e+'" cannot be encoded with mode '+r.toString(n)+".\n Suggested mode is: "+r.toString(l));switch(n!==r.KANJI||s.isKanjiModeEnabled()||(n=r.BYTE),n){case r.NUMERIC:return new a(e);case r.ALPHANUMERIC:return new i(e);case r.KANJI:return new c(e);case r.BYTE:return new o(e)}}t.fromArray=function(e){return e.reduce((function(e,t){return"string"==typeof t?e.push(m(t,null)):t.data&&e.push(m(t.data,t.mode)),e}),[])},t.fromString=function(e,n){for(var a=function(e,t){for(var n={},a={start:{}},i=["start"],o=0;o<e.length;o++){for(var c=e[o],l=[],s=0;s<c.length;s++){var u=c[s],d=""+o+s;l.push(d),n[d]={node:u,lastCount:0},a[d]={};for(var f=0;f<i.length;f++){var p=i[f];n[p]&&n[p].node.mode===u.mode?(a[p][d]=h(n[p].lastCount+u.length,u.mode)-h(n[p].lastCount,u.mode),n[p].lastCount+=u.length):(n[p]&&(n[p].lastCount=u.length),a[p][d]=h(u.length,u.mode)+4+r.getCharCountIndicator(u.mode,t))}}i=l}for(f=0;f<i.length;f++)a[i[f]].end=0;return{map:a,table:n}}(function(e){for(var t=[],n=0;n<e.length;n++){var a=e[n];switch(a.mode){case r.NUMERIC:t.push([a,{data:a.data,mode:r.ALPHANUMERIC,length:a.length},{data:a.data,mode:r.BYTE,length:a.length}]);break;case r.ALPHANUMERIC:t.push([a,{data:a.data,mode:r.BYTE,length:a.length}]);break;case r.KANJI:t.push([a,{data:a.data,mode:r.BYTE,length:d(a.data)}]);break;case r.BYTE:t.push([{data:a.data,mode:r.BYTE,length:d(a.data)}])}}return t}(p(e,s.isKanjiModeEnabled())),n),i=u.find_path(a.map,"start","end"),o=[],c=1;c<i.length-1;c++)o.push(a.table[i[c]].node);return t.fromArray(function(e){return e.reduce((function(e,t){var n=e.length-1>=0?e[e.length-1]:null;return n&&n.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)}),[])}(o))},t.rawSplit=function(e){return t.fromArray(p(e,s.isKanjiModeEnabled()))}},function(e,t,n){var r=n(167);function a(e){this.mode=r.NUMERIC,this.data=e.toString()}a.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){var t,n,r;for(t=0;t+3<=this.data.length;t+=3)n=this.data.substr(t,3),r=parseInt(n,10),e.put(r,10);var a=this.data.length-t;a>0&&(n=this.data.substr(t),r=parseInt(n,10),e.put(r,3*a+1))},e.exports=a},function(e,t,n){var r=n(167),a=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function i(e){this.mode=r.ALPHANUMERIC,this.data=e}i.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){var t;for(t=0;t+2<=this.data.length;t+=2){var n=45*a.indexOf(this.data[t]);n+=a.indexOf(this.data[t+1]),e.put(n,11)}this.data.length%2&&e.put(a.indexOf(this.data[t]),6)},e.exports=i},function(e,t,n){var r=n(196),a=n(167);function i(e){this.mode=a.BYTE,this.data=r.from(e)}i.getBitsLength=function(e){return 8*e},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){for(var t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)},e.exports=i},function(e,t,n){var r=n(167),a=n(166);function i(e){this.mode=r.KANJI,this.data=e}i.getBitsLength=function(e){return 13*e},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){var t;for(t=0;t<this.data.length;t++){var n=a.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else{if(!(n>=57408&&n<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");n-=49472}n=192*(n>>>8&255)+(255&n),e.put(n,13)}},e.exports=i},function(e,t,n){"use strict";var r={single_source_shortest_paths:function(e,t,n){var a={},i={};i[t]=0;var o,c,l,s,u,d,f,p=r.PriorityQueue.make();for(p.push(t,0);!p.empty();)for(l in c=(o=p.pop()).value,s=o.cost,u=e[c]||{})u.hasOwnProperty(l)&&(d=s+u[l],f=i[l],(void 0===i[l]||f>d)&&(i[l]=d,p.push(l,d),a[l]=c));if(void 0!==n&&void 0===i[n]){var h=["Could not find a path from ",t," to ",n,"."].join("");throw new Error(h)}return a},extract_shortest_path_from_predecessor_list:function(e,t){for(var n=[],r=t;r;)n.push(r),e[r],r=e[r];return n.reverse(),n},find_path:function(e,t,n){var a=r.single_source_shortest_paths(e,t,n);return r.extract_shortest_path_from_predecessor_list(a,n)},PriorityQueue:{make:function(e){var t,n=r.PriorityQueue,a={};for(t in e=e||{},n)n.hasOwnProperty(t)&&(a[t]=n[t]);return a.queue=[],a.sorter=e.sorter||n.default_sorter,a},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var n={value:e,cost:t};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=r},function(e,t,n){var r=n(390);t.render=function(e,t,n){var a=n,i=t;void 0!==a||t&&t.getContext||(a=t,t=void 0),t||(i=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),a=r.getOptions(a);var o=r.getImageWidth(e.modules.size,a),c=i.getContext("2d"),l=c.createImageData(o,o);return r.qrToImageData(l.data,e,a),function(e,t,n){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=n,t.width=n,t.style.height=n+"px",t.style.width=n+"px"}(c,i,o),c.putImageData(l,0,0),i},t.renderToDataURL=function(e,n,r){var a=r;void 0!==a||n&&n.getContext||(a=n,n=void 0),a||(a={});var i=t.render(e,n,a),o=a.type||"image/png",c=a.rendererOpts||{};return i.toDataURL(o,c.quality)}},function(e,t,n){var r=n(390);function a(e,t){var n=e.a/255,r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function i(e,t,n){var r=e+t;return void 0!==n&&(r+=" "+n),r}t.render=function(e,t,n){var o=r.getOptions(t),c=e.modules.size,l=e.modules.data,s=c+2*o.margin,u=o.color.light.a?"<path "+a(o.color.light,"fill")+' d="M0 0h'+s+"v"+s+'H0z"/>':"",d="<path "+a(o.color.dark,"stroke")+' d="'+function(e,t,n){for(var r="",a=0,o=!1,c=0,l=0;l<e.length;l++){var s=Math.floor(l%t),u=Math.floor(l/t);s||o||(o=!0),e[l]?(c++,l>0&&s>0&&e[l-1]||(r+=o?i("M",s+n,.5+u+n):i("m",a,0),a=0,o=!1),s+1<t&&e[l+1]||(r+=i("h",c),c=0)):a++}return r}(l,c,o.margin)+'"/>',f='viewBox="0 0 '+s+" "+s+'"',p='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+f+' shape-rendering="crispEdges">'+u+d+"</svg>\n";return"function"==typeof n&&n(null,p),p}},,function(e,t,n){var r=n(900),a=n(1646);for(var i in(t=e.exports=function(e,t){return new a(t).process(e)}).FilterCSS=a,r)t[i]=r[i];"undefined"!=typeof window&&(window.filterCSS=e.exports)},function(e,t){e.exports={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,a;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,a=e.length;r<a;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1}}},function(e,t,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},,function(e,t){e.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/},function(e,t,n){"use strict";function r(){this.__rules__=[],this.__cache__=null}r.prototype.__find__=function(e){for(var t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1},r.prototype.__compile__=function(){var e=this,t=[""];e.__rules__.forEach((function(e){e.enabled&&e.alt.forEach((function(e){t.indexOf(e)<0&&t.push(e)}))})),e.__cache__={},t.forEach((function(t){e.__cache__[t]=[],e.__rules__.forEach((function(n){n.enabled&&(t&&n.alt.indexOf(t)<0||e.__cache__[t].push(n.fn))}))}))},r.prototype.at=function(e,t,n){var r=this.__find__(e),a=n||{};if(-1===r)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=a.alt||[],this.__cache__=null},r.prototype.before=function(e,t,n,r){var a=this.__find__(e),i=r||{};if(-1===a)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null},r.prototype.after=function(e,t,n,r){var a=this.__find__(e),i=r||{};if(-1===a)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a+1,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null},r.prototype.push=function(e,t,n){var r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null},r.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);var n=[];return e.forEach((function(e){var r=this.__find__(e);if(r<0){if(t)return;throw new Error("Rules manager: invalid rule name "+e)}this.__rules__[r].enabled=!0,n.push(e)}),this),this.__cache__=null,n},r.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach((function(e){e.enabled=!1})),this.enable(e,t)},r.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);var n=[];return e.forEach((function(e){var r=this.__find__(e);if(r<0){if(t)return;throw new Error("Rules manager: invalid rule name "+e)}this.__rules__[r].enabled=!1,n.push(e)}),this),this.__cache__=null,n},r.prototype.getRules=function(e){return null===this.__cache__&&this.__compile__(),this.__cache__[e]||[]},e.exports=r},function(e,t,n){"use strict";function r(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}r.prototype.attrIndex=function(e){var t,n,r;if(!this.attrs)return-1;for(n=0,r=(t=this.attrs).length;n<r;n++)if(t[n][0]===e)return n;return-1},r.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]},r.prototype.attrSet=function(e,t){var n=this.attrIndex(e),r=[e,t];n<0?this.attrPush(r):this.attrs[n]=r},r.prototype.attrGet=function(e){var t=this.attrIndex(e),n=null;return t>=0&&(n=this.attrs[t][1]),n},r.prototype.attrJoin=function(e,t){var n=this.attrIndex(e);n<0?this.attrPush([e,t]):this.attrs[n][1]=this.attrs[n][1]+" "+t},e.exports=r},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(1524))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},,function(e,t,n){e.exports=function(){"use strict";var e="undefined"!=typeof document&&document.documentMode,t={rootMargin:"0px",threshold:0,load:function(t){if("picture"===t.nodeName.toLowerCase()){var n=t.querySelector("img"),r=!1;null===n&&(n=document.createElement("img"),r=!0),e&&t.getAttribute("data-iesrc")&&(n.src=t.getAttribute("data-iesrc")),t.getAttribute("data-alt")&&(n.alt=t.getAttribute("data-alt")),r&&t.append(n)}if("video"===t.nodeName.toLowerCase()&&!t.getAttribute("data-src")&&t.children){for(var a=t.children,i=void 0,o=0;o<=a.length-1;o++)(i=a[o].getAttribute("data-src"))&&(a[o].src=i);t.load()}t.getAttribute("data-poster")&&(t.poster=t.getAttribute("data-poster")),t.getAttribute("data-src")&&(t.src=t.getAttribute("data-src")),t.getAttribute("data-srcset")&&t.setAttribute("srcset",t.getAttribute("data-srcset"));var c=",";if(t.getAttribute("data-background-delimiter")&&(c=t.getAttribute("data-background-delimiter")),t.getAttribute("data-background-image"))t.style.backgroundImage="url('"+t.getAttribute("data-background-image").split(c).join("'),url('")+"')";else if(t.getAttribute("data-background-image-set")){var l=t.getAttribute("data-background-image-set").split(c),s=l[0].substr(0,l[0].indexOf(" "))||l[0];s=-1===s.indexOf("url(")?"url("+s+")":s,1===l.length?t.style.backgroundImage=s:t.setAttribute("style",(t.getAttribute("style")||"")+"background-image: "+s+"; background-image: -webkit-image-set("+l+"); background-image: image-set("+l+")")}t.getAttribute("data-toggle-class")&&t.classList.toggle(t.getAttribute("data-toggle-class"))},loaded:function(){}};function n(e){e.setAttribute("data-loaded",!0)}var r=function(e){return"true"===e.getAttribute("data-loaded")},a=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document;return e instanceof Element?[e]:e instanceof NodeList?e:t.querySelectorAll(e)};return function(){var e,i,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:".lozad",c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},l=Object.assign({},t,c),s=l.root,u=l.rootMargin,d=l.threshold,f=l.load,p=l.loaded,h=void 0;"undefined"!=typeof window&&window.IntersectionObserver&&(h=new IntersectionObserver((e=f,i=p,function(t,a){t.forEach((function(t){(0<t.intersectionRatio||t.isIntersecting)&&(a.unobserve(t.target),r(t.target)||(e(t.target),n(t.target),i(t.target)))}))}),{root:s,rootMargin:u,threshold:d}));for(var m,g=a(o,s),v=0;v<g.length;v++)(m=g[v]).getAttribute("data-placeholder-background")&&(m.style.background=m.getAttribute("data-placeholder-background"));return{observe:function(){for(var e=a(o,s),t=0;t<e.length;t++)r(e[t])||(h?h.observe(e[t]):(f(e[t]),n(e[t]),p(e[t])))},triggerLoad:function(e){r(e)||(f(e),n(e),p(e))},observer:h}}}()},,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(371),a=n.n(r),i=(n(113),n(56)),o=(n(45),n(16)),c=n(0),l=n.n(c),s=n(2),u=n.n(s),d=n(81),f=n.n(d),p=n(99),h=(n(177),n(94)),m=(n(67),n(24)),g=(n(492),n(132)),v=(n(391),n(246)),y=(n(53),n(19)),b=n(7),k=n.n(b),w=n(285),x=n.n(w),_=n(111);function C(e,t,n,r,a,i,o){try{var c=e[i](o),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e){var t=e.version,n=e.active,r=e.withUser,a=void 0===r||r;return l.a.createElement("div",{className:k()("doc-version",{"doc-version-active":n})},l.a.createElement("div",{className:"doc-version-basic"},l.a.createElement("span",{className:"doc-version-name"},l.a.createElement(_.a,{time:t.created_at})),!t.draft&&l.a.createElement(v.a,{className:"doc-version-status"},__("已发布"))),a&&l.a.createElement("div",{className:"doc-version-user"},t.user.name))}function R(e){var t=e.version,n=e.active,r=E(Object(c.useState)(!1),2),a=r[0],o=r[1],s=E(Object(c.useState)(!1),2),u=s[0],d=s[1],f=E(Object(c.useState)(t.name||"版本名"),2),p=f[0],v=f[1],y=E(g.a.useForm(),1)[0],b=function(){var n,r=(n=regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,y.validateFields();case 3:if(r=n.sent,(a=r.name.trim())===t.name){n.next=8;break}return n.next=8,e.onUpdate(t,{name:a});case 8:v(a),o(!1),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),console.log(n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,12]])})),function(){var e=this,t=arguments;return new Promise((function(r,a){var i=n.apply(e,t);function o(e){C(i,r,a,o,c,"next",e)}function c(e){C(i,r,a,o,c,"throw",e)}o(void 0)}))});return function(){return r.apply(this,arguments)}}();return l.a.createElement("div",{className:k()("doc-version",{"doc-version-active":n}),onMouseEnter:function(){a||d(!0)},onMouseLeave:function(){d(!1)}},l.a.createElement("div",{className:"doc-version-basic"},a?l.a.createElement(g.a,{form:y,layout:"vertical"},l.a.createElement(g.a.Item,{initialValue:p,name:"name",rules:[{required:!0,message:__("请输入版本名称")},{max:40,message:__("最多 40 个字符")}],style:{marginBottom:0}},l.a.createElement(m.a,{className:"doc-version-name-input",onPressEnter:b,onBlur:b}))):l.a.createElement("span",{className:"doc-version-name",title:p},p)),l.a.createElement("div",{className:"doc-version-time"},l.a.createElement(_.a,{time:t.created_at})),l.a.createElement("div",{className:"doc-version-user"},t.user.name),u&&l.a.createElement("div",{className:"doc-version-actions"},l.a.createElement("span",{className:"doc-version-action",onClick:function(){o(!0),d(!1)}},l.a.createElement(i.a,{title:__("修改版本名称")},l.a.createElement("span",{className:"larkicon larkicon-edit"}))),l.a.createElement(h.a,{title:__("确认删除这个版本吗？"),onConfirm:function(){e.onDelete(t)},okText:__("删除"),cancelText:__("取消"),placement:"topRight"},l.a.createElement("span",{className:"doc-version-action"},l.a.createElement(i.a,{title:__("删除该版本")},l.a.createElement("span",{className:"larkicon larkicon-delete"}))))))}S.defaultProps={withUser:!0,active:!1},S.propTypes={version:u.a.object.isRequired,active:u.a.bool,withUser:u.a.bool},R.propTypes={version:u.a.object.isRequired,active:u.a.bool,onDelete:u.a.func.isRequired,onUpdate:u.a.func.isRequired};var D={NormalVersion:S,CopyUrl:function(e){var t=e.version;return e.doc,l.a.createElement(o.a,{"data-testid":"copy-version-link",onClick:function(){x()("".concat(window.location.origin,"/r/doc_versions/").concat(t.id)),y.a.success(__("链接已复制"))}},__("复制版本链接"))},NamedVersion:R,Name:function(e){var t=e.version,n=e.category,r=e.maxWith,a=l.a.createElement(_.a,{time:t.created_at});return l.a.createElement("span",{className:"doc-version-name",style:{maxWith:r||"unset"}},"named_version"===n&&t.name||a)}};D.Name.propTypes={version:u.a.object.isRequired,category:u.a.string,maxWidth:u.a.number};var A=D,T=n(2665),P=(n(368),n(244)),j=(n(212),n(93)),M=(n(520),n(314));function N(e){return function(e){if(Array.isArray(e))return q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||U(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t,n,r,a,i,o){try{var c=e[i](o),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function I(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){L(i,r,a,o,c,"next",e)}function c(e){L(i,r,a,o,c,"throw",e)}o(void 0)}))}}function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){F(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}(e,t)||U(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){if(e){if("string"==typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(e,t):void 0}}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var H=f()("doc:history:nav:vm");var W=function(e){var t=e.doc,n=e.docDomain,r=void 0===n?"Doc":n,a=e.defaultActiveVersion,i=e.autoActiveFirst,o=e.onVersionChange,l=e.docVersionProxy,s=e.limit;s=s||200;var u=V(Object(c.useState)("all"),2),d=u[0],f=u[1],p=V(Object(c.useState)(null),2),h=p[0],m=p[1],g=V(Object(c.useState)([]),2),v=g[0],y=g[1],b=V(Object(c.useState)(!1),2),k=b[0],w=b[1],x=V(Object(c.useState)(!0),2),_=x[0],C=x[1],E=V(Object(c.useState)({named:!1,published:!1}),2),O=E[0],S=E[1],R=function(e){S((function(t){return B(B({},t),e)}))},D=function(){var e=I(regeneratorRuntime.mark((function e(n){var a,i,o,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.named,i=n.published,o=n.offset,C(!0),c={doc_id:t.id,doc_type:r,offset:o,limit:s},a&&(c.named=!0),!a&&i&&(c.draft=0),e.next=7,l.find(c);case 7:return u=e.sent,w(u.length===s),C(!1),y((function(e){return[].concat(N(e),N(u))})),e.abrupt("return",u);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=I(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(null),y([]),w(!1),e.next=5,D(B(B({},O),{},{offset:0}));case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(e){m(e),o({version:e,isDefault:!1})},P=function(){var e=I(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.unname({id:t.id});case 2:H("deleteVersion success: ",t.id),n=v.findIndex((function(e){return e.id===t.id})),r=null,n===v.length-1?v.length>=2&&(r=v[0]):r=v[n+1],T(r),y(v.filter((function(e){return e.id!==t.id})));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=I(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.name({id:t.id,name:n.name});case 2:H("updateVersion success:",{id:t.id,params:n}),r=N(v),a=r.findIndex((function(e){return e.id===t.id})),r.splice(a,1,B(B({},r[a]),{},{name:n.name})),y(r),o({version:B(B({},t),{},{name:n.name}),isDefault:!1});case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),M=function(){var e=I(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:t=e.sent,H("initialized: ",t),t.length>0&&(a&&!h&&m(a),i&&(n=t[0],m(n),o({version:n,isDefault:!0})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){M()}),[O]),{state:{currentCategory:d,currentVersion:h,filters:O,hasMore:k,loading:_,versions:v},switchVersion:T,switchCategory:function(e){f(e),R({named:"named_version"===e,published:!1})},changePublishStatus:function(e){R({published:e})},loadMore:function(){return I(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.next=3,D(B(B({},O),{},{offset:v.length}));case 3:case"end":return e.stop()}}),e)})))()},nameVersion:j,unnameVersion:P}},Y="HistoryNavigator-module_historyNav_1kLUP",G="HistoryNavigator-module_tabs_2_JcH",K="HistoryNavigator-module_search_32NSa",X="HistoryNavigator-module_versionFilter_HH94B",$="HistoryNavigator-module_versions_3BhFb",Z="HistoryNavigator-module_version_2OdFx",Q="HistoryNavigator-module_currentVersion_2e2AL",J="HistoryNavigator-module_namedVersions_1ZCVT",ee="HistoryNavigator-module_empty_24Izo",te="HistoryNavigator-module_emptyVersions_HT5-S",ne="HistoryNavigator-module_withChecked_2-R6V";function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ae=f()("doc:history:nav:view");function ie(e){var t=W({doc:e.doc,defaultActiveVersion:e.defaultActiveVersion,autoActiveFirst:e.autoActiveFirst,docDomain:e.docDomain,onVersionChange:e.onVersionChange,docVersionProxy:e.docVersionProxy,limit:e.limit}),n=t.state,r=n.versions,a=n.currentVersion,i=n.currentCategory,o=n.filters,s=n.loading;ae(t.state);return Object(c.useEffect)((function(){e.forceActiveCategory&&(ae("category change to named_version, force switch tab"),t.switchCategory(e.forceActiveCategory))}),[e.forceActiveCategory]),l.a.createElement("div",{"data-testid":e["data-testid"],className:k()(Y,e.className,re({},ne,e.withChecked))},e.withSearch&&l.a.createElement("div",{className:K},l.a.createElement(m.a.Search,null)),l.a.createElement(M.a,{activeKey:i,className:G,onChange:function(n){t.switchCategory(n),e.onTabChange(n)}},l.a.createElement(M.a.TabPane,{tab:__("全部记录"),key:"all"}),l.a.createElement(M.a.TabPane,{tab:__("版本"),key:"named_version"}),";"),e.withVersionFilter&&!o.named&&l.a.createElement("div",{className:X},l.a.createElement(j.a,{defaultChecked:!1,onChange:function(e){t.changePublishStatus(e.target.checked)}},__("仅显示已发布的历史记录"))),!s&&0===r.length&&l.a.createElement("div",{className:ee},"named_version"===i?l.a.createElement("ul",{className:te},l.a.createElement("li",null,l.a.createElement("img",{width:"86",height:"70",src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*R-ANSYTea6kAAAAAAAAAAAAAARQnAQ"})),l.a.createElement("li",null,__("暂无版本记录")),l.a.createElement("li",null,l.a.createElement("a",{href:"https://www.yuque.com/yuque/help/doc_version",target:"_blank"},__("使用帮助")))):l.a.createElement("span",null,__("暂无记录"))),r.length>0&&l.a.createElement("div",{className:k()($,re({},J,o.named))},l.a.createElement(P.a,{justify:"block",bordered:!1,split:!1,dataSource:r,renderItem:function(n){return l.a.createElement("div",{"data-version":"".concat(n.id),onClick:function(){a&&n.id===a.id?"function"==typeof e.onVersionDeselect&&(e.onVersionDeselect(n),t.switchVersion(null)):t.switchVersion(n)}},function(n){var r=a&&a.id===n.id;if("function"==typeof e.renderVersion)return e.renderVersion({version:n,active:r,named:o.named});var c=null;return c="named_version"===i?l.a.createElement(A.NamedVersion,{version:n,active:r,onDelete:t.unnameVersion,onUpdate:t.nameVersion}):l.a.createElement(A.NormalVersion,{version:n,active:r,withUser:!0}),l.a.createElement("div",{className:k()(Z,re({},Q,r))},c)}(n))},loading:s,showLoadingMore:t.state.hasMore,onLoadMore:t.loadMore})))}ie.defaultProps={defaultActiveVersion:null,autoActiveFirst:!0,withSearch:!1,withVersionFilter:!1,onTabChange:function(){}},ie.propTypes={"data-testid":u.a.string,className:u.a.string,doc:u.a.object.isRequired,docDomain:u.a.string.isRequired,forceActiveCategory:u.a.oneOf(["all","named_version"]),defaultActiveVersion:u.a.object,autoActiveFirst:u.a.bool,withSearch:u.a.bool,withVersionFilter:u.a.bool,withChecked:u.a.bool,onVersionChange:u.a.func.isRequired,onVersionDeselect:u.a.func,onTabChange:u.a.func,renderVersion:u.a.func,docVersionProxy:u.a.object.isRequired,limit:u.a.number};var oe=ie,ce=(n(148),n(100)),le=n(131),se=n.n(le),ue=n(183),de=n.n(ue),fe="VersionToolbar-module_toolbar_2Pmuz",pe="VersionToolbar-module_toolbarActions_iOhi_",he="VersionToolbar-module_diffHead_2MngT",me="VersionToolbar-module_diffBase_2qGuB",ge="VersionToolbar-module_diffPlaceholder_1tfCi",ve="VersionToolbar-module_diffWith_3Get7",ye="VersionToolbar-module_diffTip_1tGP0",be="VersionToolbar-module_diffTipAdd_3oTJ7",ke="VersionToolbar-module_diffTipDelete_3zoQ5",we="VersionToolbar-module_versionSelector_2ITYf",xe="VersionToolbar-module_versionSelectorHistoryNav_3UjBe",_e="VersionToolbar-module_version_16iQR",Ce="VersionToolbar-module_selectedVersion_2jqKp";function Ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Se=f()("doc:history:toolbar");function Re(e){var t=e.doc,n=e.headVersion,r=Ee(Object(c.useState)("all"),2),a=r[0],i=r[1],o=Ee(Object(c.useState)(null),2),s=o[0],u=o[1],d=Ee(Object(c.useState)(!1),2),f=d[0],p=d[1],h=function(t){"content"===t?(e.showContent(n),u(null)):e.showDiff(n,s)};return Se("select version:",s),l.a.createElement("div",{className:"".concat(fe," ").concat(e.className||""),"data-testid":"version-toolbar"},l.a.createElement("div",{className:pe},l.a.createElement(v.a,{className:he,onClick:function(){h("content")},"data-testid":"diff-head"},l.a.createElement(A.Name,{version:n,category:e.navigatorCategory,maxWidth:160})),l.a.createElement("span",{className:ve},__("与#doc_version_diff")),l.a.createElement(ce.a,{noArrow:!0,placement:"bottomLeft",trigger:["click"],overlayClassName:we,content:l.a.createElement(oe,{"data-testid":"diff-history-nav",className:xe,doc:t,docDomain:e.docDomain,autoActiveFirst:!1,withVersionFilter:!0,withChecked:!0,defaultActiveVersion:null,onVersionChange:function(t){var r=t.version;t.isDefault?Se("vision change, caused by default, ignore"):(p(!1),u(r),e.showDiff(n,r))},onVersionDeselect:function(){h("content")},onTabChange:function(e){i(e)},renderVersion:function(e){var t=e.version,n=e.active,r=null;return r="named_version"===a?l.a.createElement("span",null,t.name):l.a.createElement(A.NormalVersion,{version:t,active:n,withUser:!1}),l.a.createElement("div",{className:_e},n&&l.a.createElement("div",{className:Ce},l.a.createElement(de.a,null)),r)},docVersionProxy:e.docVersionProxy}),visible:f,onVisibleChange:p},l.a.createElement(v.a,{className:me},l.a.createElement("span",{"data-testid":"diff-version-selector-trigger"},s?l.a.createElement(A.Name,{version:s,category:a,maxWidth:128}):l.a.createElement("span",{className:ge},__("请选择历史")),l.a.createElement(se.a,{style:{marginLeft:"8px"}})))),__("对比#doc_version_diff")),s&&l.a.createElement("div",{className:ye},l.a.createElement(v.a,{className:be},__("增加的内容")),l.a.createElement(v.a,{className:ke},__("删除的内容"))))}Re.propTypes={className:u.a.string,doc:u.a.object.isRequired,docDomain:u.a.oneOf(["Doc","Doclet"]),navigatorCategory:u.a.oneOf(["all","named_version"]),headVersion:u.a.object.isRequired,showContent:u.a.func.isRequired,showDiff:u.a.func.isRequired,docVersionProxy:u.a.object.isRequired};var De=Object(p.b)(Re,!0);function Ae(e,t,n,r,a,i,o){try{var c=e[i](o),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Te(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){Ae(i,r,a,o,c,"next",e)}function c(e){Ae(i,r,a,o,c,"throw",e)}o(void 0)}))}}function Pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return je(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Me=f()("doc:history:viewer:vm");var Ne=function(e){var t=e.doc,n=e.docDomain,r=e.onRevert,a=e.onReverted,i=e.docVersionProxy,o=e.docProxy,l=e.docletProxy,s=Object(c.useRef)({}),u=Pe(Object(c.useState)(null),2),d=u[0],f=u[1],p=Pe(Object(c.useState)(null),2),h=p[0],m=p[1],g=Pe(Object(c.useState)(null),2),v=g[0],b=g[1],k=Pe(Object(c.useState)("content"),2),w=k[0],x=k[1],_=Pe(Object(c.useState)("all"),2),C=_[0],E=_[1],O=Pe(Object(c.useState)(null),2),S=O[0],R=O[1],D=function(){var e=Te(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.current[t]){e.next=2;break}return e.abrupt("return",s.current[t]);case 2:return e.next=4,i.findOne({id:t});case 4:return n=e.sent,s.current[t]=n,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Te(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Me("vm.showContent:",t),x("content"),e.next=4,D(t.id);case 4:n=e.sent,m(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){m(null),f(null),x("content")};return{state:{currentVersion:d,currentVersionDetail:h,baseVersionDetail:v,currentNavigatorCategory:C,forceActiveCategory:S,currentView:w},switchVersion:function(e){return Te(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.version,Me("vm.switchVersion: ",{version:n}),T(),!n){t.next=7;break}return f(n),t.next=7,A(n);case 7:case"end":return t.stop()}}),t)})))()},switchNavigatorCategory:function(e){var t=e.category,n=e.force;Me("vm.switchNavigatorCategory: ",{category:t,force:n}),E(t),n&&R(t),T()},isReadyToDisplayDiff:function(){return"diff"===w&&v},showContent:A,showDiff:function(){var e=Te(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Me("vm.showDiff:",{head:t,base:n}),n){e.next=3;break}return e.abrupt("return");case 3:return x("diff"),e.next=6,D(n.id);case 6:r=e.sent,b(r);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),revert:function(){var e=Te(regeneratorRuntime.mark((function e(i){var c,u,d=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=d.length>1&&void 0!==d[1]&&d[1],Me("on revert:",i),"function"!=typeof r){e.next=6;break}return u=s.current[i.id],r(u),e.abrupt("return");case 6:if(e.prev=6,"Doclet"!==n){e.next=12;break}return e.next=10,l.rollback({id:t.id,version_id:i.id});case 10:e.next=14;break;case 12:return e.next=14,o.rollback({id:t.id,version_id:i.id,force:c});case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(6),"LockedByOther"===e.t0.code?y.a.error(__("有其它用户正在编辑，恢复可能会导致对方编辑的内容丢失，请联系他们退出编辑后再进行恢复")):"LockedBeMe"===e.t0.code?y.a.error(e.t0.message):y.a.error(__("你正在其它浏览器窗口编辑该文档，请关闭窗口再进行恢复")),e.abrupt("return");case 20:Me("reverted to ",i),"function"==typeof a?a(i):y.a.success(__("恢复成功，你可以进入编辑页发布文档"));case 22:case"end":return e.stop()}}),e,null,[[6,16]])})));return function(t){return e.apply(this,arguments)}}()}},Le=n(2015),Ie=f()("doc:history:viewer");function ze(e){var t=e.layout,n=e.doc,r=e.docDomain,s=Ne({doc:e.doc,docDomain:e.docDomain,onRevert:e.onRevert,onReverted:e.onReverted,docVersionProxy:e.docVersionProxy,docProxy:e.docProxy,docletProxy:e.docletProxy}),u=s.state,d=u.currentVersion,f=u.currentVersionDetail,h=u.currentNavigatorCategory,m=u.forceActiveCategory,g=u.currentView,v=u.baseVersionDetail;Object(c.useEffect)((function(){return document.body.style.overflow="hidden",function(){document.body.style.removeProperty("overflow")}}),[]),Ie("render",s.state);var y,b,k;return l.a.createElement("div",{className:"".concat(Le.a[t]," ").concat(e.className||""),"data-testid":"history-viewer"},l.a.createElement("div",{className:Le.a.head},l.a.createElement("div",{className:Le.a.headNav},l.a.createElement(a.a,{"data-testid":"history-back",className:Le.a.back,onClick:e.onCancel}),l.a.createElement("span",{className:Le.a.pageTitle},__("历史记录"))),l.a.createElement("div",{className:Le.a.headActions},d?d.name?l.a.createElement(l.a.Fragment,null,"all"===h&&l.a.createElement("span",{className:Le.a.versionNameTip},__("已存为版本："),l.a.createElement("span",{className:Le.a.versionName},d.name)),"Doc"===r&&l.a.createElement(A.CopyUrl,{version:d})):l.a.createElement(T.a,{version:d,docVersionProxy:e.docVersionProxy,onCreated:function(e){Ie("named version created:",e),s.switchNavigatorCategory({category:"named_version",force:!0})}}):null,(y=!(f&&f.content),b="named_version"===h?__("恢复此版本"):__("恢复此记录"),k=l.a.createElement(o.a,{"data-testid":"history-revert",type:"primary",onClick:function(){s.revert(d)},disabled:y},b),y?l.a.createElement(i.a,{title:__("内容为空，无需恢复")},k):k))),l.a.createElement(p.a,{withFallbackUI:!0},l.a.createElement("div",{className:Le.a.body},l.a.createElement("div",{className:Le.a.aside,"data-testid":"history-aside-nav"},l.a.createElement(oe,{"data-testid":"main-history-nav",doc:n,docDomain:e.docDomain,autoActiveFirst:!0,withVersionFilter:!0,forceActiveCategory:m,docVersionProxy:e.docVersionProxy,onVersionChange:s.switchVersion,onTabChange:function(e){s.switchNavigatorCategory({category:e,force:!1})},limit:e.limit})),l.a.createElement("div",{className:Le.a.main},f&&l.a.createElement("div",{className:"Doc"===n.type?Le.a.fixed:Le.a.adapt},"Doc"===n.type&&l.a.createElement("div",{className:Le.a.toolbar},l.a.createElement(De,{key:d.id,doc:n,docDomain:e.docDomain,navigatorCategory:h,headVersion:d,showContent:s.showContent,showDiff:s.showDiff,docVersionProxy:e.docVersionProxy})),l.a.createElement("div",{className:"".concat(Le.a.content),"data-testid":"history-content"},l.a.createElement("div",{className:"".concat(Le.a.document," ").concat(Le.a[n.type.toLowerCase()])},"content"===g&&e.renderVersion(f),s.isReadyToDisplayDiff()&&e.renderDiff(f,v))))))))}ze.defaultProps={layout:"fullscreen",docDomain:"Doc",limit:200},ze.propTypes={layout:u.a.oneOf(["fullscreen"]),className:u.a.string,doc:u.a.object.isRequired,docDomain:u.a.oneOf(["Doc","Doclet"]),renderVersion:u.a.func.isRequired,renderDiff:u.a.func.isRequired,onCancel:u.a.func.isRequired,onRevert:u.a.func,onReverted:u.a.func,docProxy:u.a.object.isRequired,docletProxy:u.a.object.isRequired,docVersionProxy:u.a.object.isRequired,limit:u.a.number};t.a=Object(p.b)(ze,!0)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=_e(n(583)),a=_e(n(877)),i=_e(n(1542)),o=_e(n(1543)),c=_e(n(1544)),l=_e(n(1545)),s=_e(n(1546)),u=_e(n(1547)),d=_e(n(1548)),f=_e(n(1549)),p=_e(n(515)),h=_e(n(1550)),m=_e(n(585)),g=_e(n(1551)),v=xe(n(1552)),y=xe(n(1553)),b=_e(n(1554)),k=_e(n(1555)),w=_e(n(1556)),x=_e(n(1557)),_=_e(n(1558)),C=_e(n(880)),E=_e(n(881)),O=_e(n(1559)),S=_e(n(1560)),R=_e(n(1561)),D=_e(n(879)),A=xe(n(1562)),T=_e(n(1563)),P=_e(n(882)),j=_e(n(1564)),M=_e(n(1565)),N=_e(n(1566)),L=_e(n(1567)),I=_e(n(1568)),z=_e(n(1569)),B=_e(n(1570)),F=_e(n(1571)),V=_e(n(1572)),U=_e(n(878)),q=_e(n(1573)),H=_e(n(1574)),W=_e(n(1575)),Y=_e(n(1576)),G=_e(n(1577)),K=_e(n(1578)),X=_e(n(1579)),$=_e(n(1580)),Z=_e(n(1581)),Q=_e(n(1582)),J=xe(n(1583)),ee=_e(n(1584)),te=_e(n(1585)),ne=_e(n(1586)),re=_e(n(1587)),ae=_e(n(1588)),ie=_e(n(1589)),oe=_e(n(1590)),ce=_e(n(1591)),le=_e(n(1592)),se=_e(n(1593)),ue=xe(n(1594)),de=_e(n(883)),fe=_e(n(884)),pe=_e(n(1595)),he=_e(n(1596)),me=_e(n(1597)),ge=_e(n(1598)),ve=_e(n(1599)),ye=_e(n(885)),be=_e(n(1600)),ke=_e(n(1601)),we=_e(n(584));function xe(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function _e(e){return e&&e.__esModule?e:{default:e}}var Ce={version:"10.11.0",toDate:r.default,toFloat:a.default,toInt:i.default,toBoolean:o.default,equals:c.default,contains:l.default,matches:s.default,isEmail:u.default,isURL:d.default,isMACAddress:f.default,isIP:p.default,isIPRange:h.default,isFQDN:m.default,isBoolean:g.default,isAlpha:v.default,isAlphaLocales:v.locales,isAlphanumeric:y.default,isAlphanumericLocales:y.locales,isNumeric:b.default,isPort:k.default,isLowercase:w.default,isUppercase:x.default,isAscii:_.default,isFullWidth:C.default,isHalfWidth:E.default,isVariableWidth:O.default,isMultibyte:S.default,isSurrogatePair:R.default,isInt:D.default,isFloat:A.default,isFloatLocales:A.locales,isDecimal:T.default,isHexadecimal:P.default,isDivisibleBy:j.default,isHexColor:M.default,isISRC:N.default,isMD5:L.default,isHash:I.default,isJWT:z.default,isJSON:B.default,isEmpty:F.default,isLength:V.default,isByteLength:U.default,isUUID:q.default,isMongoId:H.default,isAfter:W.default,isBefore:Y.default,isIn:G.default,isCreditCard:K.default,isIdentityCard:X.default,isISIN:$.default,isISBN:Z.default,isISSN:Q.default,isMobilePhone:J.default,isMobilePhoneLocales:J.locales,isPostalCode:ue.default,isPostalCodeLocales:ue.locales,isCurrency:ee.default,isISO8601:te.default,isRFC3339:ne.default,isISO31661Alpha2:re.default,isISO31661Alpha3:ae.default,isBase64:ie.default,isDataURI:oe.default,isMagnetURI:ce.default,isMimeType:le.default,isLatLong:se.default,ltrim:de.default,rtrim:fe.default,trim:pe.default,escape:he.default,unescape:me.default,stripLow:ge.default,whitelist:ve.default,blacklist:ye.default,isWhitelisted:be.default,normalizeEmail:ke.default,toString:we.default};t.default=Ce,e.exports=t.default,e.exports.default=t.default},,,,,,function(e,t,n){"use strict";(function(t){var r=n(1538),a=n(1539),i=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,o=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,c=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function l(e){return(e||"").toString().replace(c,"")}var s=[["#","hash"],["?","query"],function(e){return e.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],u={hash:1,query:1};function d(e){var n,r=("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{}).location||{},a={},o=typeof(e=e||r);if("blob:"===e.protocol)a=new p(unescape(e.pathname),{});else if("string"===o)for(n in a=new p(e,{}),u)delete a[n];else if("object"===o){for(n in e)n in u||(a[n]=e[n]);void 0===a.slashes&&(a.slashes=i.test(e.href))}return a}function f(e){e=l(e);var t=o.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function p(e,t,n){if(e=l(e),!(this instanceof p))return new p(e,t,n);var i,o,c,u,h,m,g=s.slice(),v=typeof t,y=this,b=0;for("object"!==v&&"string"!==v&&(n=t,t=null),n&&"function"!=typeof n&&(n=a.parse),t=d(t),i=!(o=f(e||"")).protocol&&!o.slashes,y.slashes=o.slashes||i&&t.slashes,y.protocol=o.protocol||t.protocol||"",e=o.rest,o.slashes||(g[3]=[/(.*)/,"pathname"]);b<g.length;b++)"function"!=typeof(u=g[b])?(c=u[0],m=u[1],c!=c?y[m]=e:"string"==typeof c?~(h=e.indexOf(c))&&("number"==typeof u[2]?(y[m]=e.slice(0,h),e=e.slice(h+u[2])):(y[m]=e.slice(h),e=e.slice(0,h))):(h=c.exec(e))&&(y[m]=h[1],e=e.slice(0,h.index)),y[m]=y[m]||i&&u[3]&&t[m]||"",u[4]&&(y[m]=y[m].toLowerCase())):e=u(e);n&&(y.query=n(y.query)),i&&t.slashes&&"/"!==y.pathname.charAt(0)&&(""!==y.pathname||""!==t.pathname)&&(y.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,a=n[r-1],i=!1,o=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),o++):o&&(0===r&&(i=!0),n.splice(r,1),o--);return i&&n.unshift(""),"."!==a&&".."!==a||n.push(""),n.join("/")}(y.pathname,t.pathname)),r(y.port,y.protocol)||(y.host=y.hostname,y.port=""),y.username=y.password="",y.auth&&(u=y.auth.split(":"),y.username=u[0]||"",y.password=u[1]||""),y.origin=y.protocol&&y.host&&"file:"!==y.protocol?y.protocol+"//"+y.host:"null",y.href=y.toString()}p.prototype={set:function(e,t,n){var i=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||a.parse)(t)),i[e]=t;break;case"port":i[e]=t,r(t,i.protocol)?t&&(i.host=i.hostname+":"+t):(i.host=i.hostname,i[e]="");break;case"hostname":i[e]=t,i.port&&(t+=":"+i.port),i.host=t;break;case"host":i[e]=t,/:\d+$/.test(t)?(t=t.split(":"),i.port=t.pop(),i.hostname=t.join(":")):(i.hostname=t,i.port="");break;case"protocol":i.protocol=t.toLowerCase(),i.slashes=!n;break;case"pathname":case"hash":if(t){var o="pathname"===e?"/":"#";i[e]=t.charAt(0)!==o?o+t:t}else i[e]=t;break;default:i[e]=t}for(var c=0;c<s.length;c++){var l=s[c];l[4]&&(i[l[1]]=i[l[1]].toLowerCase())}return i.origin=i.protocol&&i.host&&"file:"!==i.protocol?i.protocol+"//"+i.host:"null",i.href=i.toString(),i},toString:function(e){e&&"function"==typeof e||(e=a.stringify);var t,n=this,r=n.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var i=r+(n.slashes?"//":"");return n.username&&(i+=n.username,n.password&&(i+=":"+n.password),i+="@"),i+=n.host+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(i+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(i+=n.hash),i}},p.extractProtocol=f,p.location=d,p.trimLeft=l,p.qs=a,e.exports=p}).call(this,n(89))},function(e,t,n){},function(e,t,n){"use strict";n(1010);var r=n(543);n(534);t.a=r.a},function(e,t,n){"use strict";n(892),n(339)},,,,,,,,,function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(2),o=n.n(i),c=n(1845),l=n.n(c);n(1015);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var a=b(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=["aspectRatio","preview","viewMode","dragMode","guides","autoCropArea"],w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(o,e);var t,n,r,i=v(o);function o(){return h(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this,t=Object.keys(this.props).filter((function(e){return k.indexOf(e)>=0})).reduce((function(t,n){return Object.assign({},t,p({},n,e.props[n]))}),{});this.cropper=new l.a(this.img,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.src!==this.props.src&&this.cropper.reset().clear().replace(e.src)}},{key:"componentWillUnmount",value:function(){this.img&&(this.cropper.destroy(),delete this.img,delete this.cropper)}},{key:"getCroppedCanvas",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.props,n=t.containerWidth,r=t.cropWidth,a=t.aspectRatio,i=e.width||r||n,o=e.height||i/a,c=e.width,l=void 0===c?i:c,s=e.height,u=void 0===s?o:s,p=f(e,["width","height"]);return this.cropper.getCroppedCanvas(d({width:l,height:u},p))}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.containerWidth,i=t.containerHeight,o=t.aspectRatio,c=t.src,l=t.alt,s=i||r/o;return a.a.createElement("div",{style:{width:r,height:s},className:n},a.a.createElement("img",{ref:function(t){e.img=t},src:c,alt:void 0===l?"picture":l,style:{opacity:0}}))}}])&&m(t.prototype,n),r&&m(t,r),o}(r.Component);w.propTypes={containerWidth:o.a.number.isRequired,containerHeight:o.a.number,src:o.a.string.isRequired,cropWidth:o.a.number,className:o.a.string,alt:o.a.string,aspectRatio:o.a.number,dragMode:o.a.oneOf(["crop","move","none"]),viewMode:o.a.oneOf([0,1,2,3]),preview:o.a.string,guides:o.a.bool,autoCropArea:o.a.number},w.defaultProps={aspectRatio:4/3,dragMode:"move",viewMode:1,guides:!1,autoCropArea:1},t.a=w},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),parseFloat(e)};var r,a=(r=n(46))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,r;(0,a.default)(e),"object"===i(t)?(n=t.min||0,r=t.max):(n=arguments[1],r=arguments[2]);var o=encodeURI(e).split(/%..|./).length-1;return o>=n&&(void 0===r||o<=r)};var r,a=(r=n(46))&&r.__esModule?r:{default:r};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,a.default)(e);var n=(t=t||{}).hasOwnProperty("allow_leading_zeroes")&&!t.allow_leading_zeroes?i:o,r=!t.hasOwnProperty("min")||e>=t.min,c=!t.hasOwnProperty("max")||e<=t.max,l=!t.hasOwnProperty("lt")||e<t.lt,s=!t.hasOwnProperty("gt")||e>t.gt;return n.test(e)&&r&&c&&l&&s};var r,a=(r=n(46))&&r.__esModule?r:{default:r};var i=/^(?:[-+]?(?:0|[1-9][0-9]*))$/,o=/^[-+]?[0-9]+$/;e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),i.test(e)},t.fullWidth=void 0;var r,a=(r=n(46))&&r.__esModule?r:{default:r};var i=/[^\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/;t.fullWidth=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),i.test(e)},t.halfWidth=void 0;var r,a=(r=n(46))&&r.__esModule?r:{default:r};var i=/[\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/;t.halfWidth=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),i.test(e)};var r,a=(r=n(46))&&r.__esModule?r:{default:r};var i=/^[0-9A-F]+$/i;e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,a.default)(e);var n=t?new RegExp("^[".concat(t,"]+"),"g"):/^\s+/g;return e.replace(n,"")};var r,a=(r=n(46))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,a.default)(e);for(var n=t?new RegExp("[".concat(t,"]")):/\s/,r=e.length-1;r>=0&&n.test(e[r]);r--);return r<e.length?e.substr(0,r+1):e};var r,a=(r=n(46))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,a.default)(e),e.replace(new RegExp("[".concat(t,"]+"),"g"),"")};var r,a=(r=n(46))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},function(e,t,n){e.exports=n(62)},function(e,t,n){},function(e,t,n){e.exports=n(77)},function(e,t,n){e.exports=n(109)},function(e,t,n){"use strict";n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return k}));n(53);var r=n(19),a=n(0),i=n.n(a),o=n(2),c=n.n(o),l=n(261),s=function(e){var t=e.errorMessage;return i.a.createElement("div",{className:"module-error"},i.a.createElement("div",{className:"error-tip"},i.a.createElement("h3",null,__("页面出错了")),i.a.createElement("p",{"data-testid":"error-boundary-message"},t||__("页面出现问题，请尝试刷新页面"))),i.a.createElement("div",{className:"image"},i.a.createElement("img",{src:"https://gw.alipayobjects.com/zos/rmsportal/ZKkHOEsUzVIHAfcVgCVV.png",alt:__("出错了")})))};function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(c,e);var t,n,a,o=h(c);function c(){var e;d(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return y(g(e=o.call.apply(o,[this].concat(n))),"state",{error:null,info:null}),e}return t=c,(n=[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,info:t}),this.props.isDesktopApp||this.props.noMessage||r.a.error(__("页面出错了")),e.componentStack=t?t.componentStack:"",e.from="ErrorBoundary",l.a.logError(e)}},{key:"render",value:function(){var e=this.state,t=e.error,n=e.info,r=this.props,a=r.withFallbackUI,o=r.children,c=r.errorMessage,l=r.isDesktopApp;return t?a?l?i.a.createElement("div",{"data-testid":"error-boundary-message",className:"module-error"},i.a.createElement("div",{className:"error-tip"},__("页面出现问题，"),i.a.createElement("a",{onClick:function(e){e.preventDefault(),Object.keys(localStorage).filter((function(e){return e.startsWith("note/")})).map((function(e){return localStorage.removeItem(e)})),window.parent.postMessage({name:"reloadApp"},"*")}},__("点击重新加载")))):i.a.createElement(s,{error:t,info:n,errorMessage:c}):null:o}}])&&f(t.prototype,n),a&&f(t,a),c}(i.a.Component);b.propTypes={withFallbackUI:c.a.bool,noMessage:c.a.bool,children:c.a.node,errorMessage:c.a.string,isDesktopApp:c.a.bool};var k=function(e,t,n){return function(r){return i.a.createElement(b,{withFallbackUI:t,errorMessage:n},i.a.createElement(e,r))}},w=b},function(e,t,n){"use strict";var r=n(395),a=n.n(r),i=n(886),o=n.n(i),c=n(888),l=n.n(c),s=n(309),u=n(889),d=n(261);function f(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t,n,r,a,i,o){try{var c=e[i](o),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){h(i,r,a,o,c,"next",e)}function c(e){h(i,r,a,o,c,"throw",e)}o(void 0)}))}}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),g(this,"getAllTemplatesByBook",function(){var e=m(regeneratorRuntime.mark((function e(t){var n,i,o,c,l,u,d,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.templateProxy.find({type:"Book",id:t});case 2:n=e.sent,i=[{category:"Book",name:__("本知识库模板"),templates:[]},{category:"Group",name:__("团队模板"),templates:[]},{category:"Personal",name:__("个人模板"),templates:[]},{category:"Official",name:__("推荐模板"),templates:[]}],o=f(n);try{for(o.s();!(c=o.n()).done;)(l=c.value).type===s.TYPE.OFFICIAL?(l.meta=a()(l.meta)?{}:JSON.parse(l.meta),i[3].templates.push(l)):l.type===s.TYPE.PERSONAL?i[2].templates.push(l):l.type===s.TYPE.GROUP?i[1].templates.push(l):i[0].templates.push(l)}catch(e){o.e(e)}finally{o.f()}for(u=0,d=i;u<d.length;u++)"Official"!==(p=d[u]).category?p.templates.sort((function(e,t){return-(new Date(e.content_updated_at||e.updated_at||e.created_at)-new Date(t.content_updated_at||t.updated_at||t.created_at))})):p.templates.sort((function(e,t){return e.meta.order-t.meta.order}));return e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),g(this,"loadTemplate",function(){var e=m(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.templateProxy.findOne({id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),g(this,"loadDoc",function(){var e=m(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.docProxy.findOne({book_id:n,id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),g(this,"filterTemplatesByFormat",(function(e,t){var n,r=[],a=f(e);try{for(a.s();!(n=a.n()).done;){var i,o=n.value,c={category:o.category,name:o.name,templates:[]},l=f(o.templates);try{for(l.s();!(i=l.n()).done;){var s=i.value;s.format===t&&c.templates.push(s)}}catch(e){l.e(e)}finally{l.f()}r.push(c)}}catch(e){a.e(e)}finally{a.f()}return r})),g(this,"getTemplateCover",(function(e){var t={lakesheet:"https://gw.alipayobjects.com/zos/bmw-prod/766284e3-a150-4438-a294-171a15cf216b.svg",lake:"https://gw.alipayobjects.com/zos/bmw-prod/7c85db16-e017-4002-b37c-77dcf275d31f.svg",lakemind:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*R1-oT6osRqQAAAAAAAAAAAAAARQnAQ",lakeshow:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*-GRzR6CgSGUAAAAAAAAAAAAAARQnAQ"};return e.cover?e.cover:t[e.format]||t.lake})),g(this,"createTemplate",function(){var e=m(regeneratorRuntime.mark((function e(t,n,a,i,o){var c,l,u=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=u.length>5&&void 0!==u[5]?u[5]:null,l={target_id:t,target_type:n,template_type:a,format:s.TYPE_FORMAT_MAP[i],type:i,name:o},null!==c&&(l.doc_id=c),e.next=5,r.templateProxy.create(l);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,a,i){return e.apply(this,arguments)}}()),g(this,"updateTitle",function(){var e=m(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.templateProxy.update({id:t,name:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),g(this,"deleteTemplate",function(){var e=m(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.templateProxy.destroy({id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),g(this,"revertDeletedTemplate",function(){var e=m(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.templateProxy.restore({id:t,recycleId:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),g(this,"createDocByTemplate",function(){var e=m(regeneratorRuntime.mark((function e(t,n){var a,i,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.templateProxy.findOne({id:n});case 2:return a=e.sent,i=a.doclet,c={book_id:t.id,type:i.type,format:i.format,title:a.name,status:l.a.STATUS.draft},o.a.FORMATS_SAVE_TO_BODY.includes(i.format)?c.body_draft=i.body:c.body_draft_asl=i.body_asl,e.next=8,r.docProxy.createDoc(c);case 8:return u=e.sent,d.a.logTemplateUsage(a.type,n,a.type===s.TYPE.OFFICIAL?1:0,a.type!==s.TYPE.OFFICIAL?1:0),e.abrupt("return",u);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.templateProxy=t,this.docProxy=n};v.getLegalBooks=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.filter((function(e){return!!u.MIXING_BOOK_TYPES.includes(e.type)}));return a()(t)?n:n.filter((function(e){return e.user_id===t.id}))},t.a=v},,function(e,t,n){"use strict";var r=n(2598),a=n(62),i=a.FORMAT,o=a.FORMATS_SAVE_TO_BODY_ASL;e.exports={guessFormat:function(e){return(e=(e=e||"").trim())?this.isLake(e)?i.LAKE:this.isAsl(e)?i.ASL:this.isSpreadJs(e)?i.SPREADJS:this.isLakeSheet(e)?i.LAKESHEET:i.MARKDOWN:null},isAsl:function(e){return e.startsWith('["root"')},isAsl1:function(e){return(e=(e=e||"").trimLeft()).startsWith('{"nodes":')},isLake:function(e){return e.startsWith("<!doctype lake>")},isSpreadJs:function(e){return e.startsWith('{"type":"Sheet"')},isLakeSheet:function(e){return e.startsWith('{"format":"lakesheet","type":"Sheet"')},isLakeMind:function(e){return e.startsWith('{"format":"lakemind","type":"Mind"')},isLakeShow:function(e){return e.startsWith('{"format":"lakeshow","type":"Show"')},isSheet:function(e){return this.isLakeSheet(e)||this.isSpreadJs(e)},isBlank:function(e){if(!e)return!0;if(!e.value)return!0;var t=e.value,n=e.format;if(n===i.LAKE)return"<!doctype lake>"===t.replace(/<(?:br|cursor|meta) [^>]*\/>/g,"").replace(/<p><\/p>/g,"");if(n===i.MARKDOWN&&"string"==typeof t)return""===t.trim();return!1},extractSummary:function(e){return r(e).stripTags().trim(" \n").replace(/\n/g," ").unescapeHTML().truncate(147,"...").value()},extractFirstImage:function(e){if(e){var t=/<img[^>]{1,2000}src="([^"]{10,190})"/i.exec(e);return t?t[1]:void 0}},getContentForEdit:function(e){return(o.includes(e.format)?e.body_draft_asl||e.body_asl||"":e.body_draft||e.body||"").trim()},isContentSame:function(e,t,n){return t===n||e===i.LAKE&&this.getPureLakeContent(t)===this.getPureLakeContent(n)},getPureLakeContent:function(e){return(e=e||"").replace(/<anchor\s*\/>/gi,"").replace(/<focus\s*\/>/gi,"").replace(/<cursor\s*\/>/gi,"")},removeLakeMeta:function(e){return e?e.replace(/<meta [^>]{1,256}\/>/gi,""):e}}},,function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(1522))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},function(e,t,n){"use strict";n(1829);var r=n(1003);n(887);t.a=r.a},function(e,t){e.exports=function(e,t,n,r){var a=e.transformX=function(e,i){n(e),n(i);for(var o,c,l,s=[],u=0;u<i.length;u++){for(var d=i[u],f=[],p=0;p<e.length;){var h=[];if(o=e[p],l=h,t(f,o,c=d,"left"),t(l,c,o,"right"),p++,1!==h.length){if(0===h.length){for(var m=p;m<e.length;m++)r(f,e[m]);d=null;break}for(var g=a(e.slice(p),h),v=0;v<g[0].length;v++)r(f,g[0][v]);for(var y=0;y<g[1].length;y++)r(s,g[1][y]);d=null;break}d=h[0]}null!=d&&r(s,d),e=f}return[e,s]};e.transform=function(e,n,r){if("left"!==r&&"right"!==r)throw new Error("type must be 'left' or 'right'");return 0===n.length?e:1===e.length&&1===n.length?t([],e[0],n[0],r):"left"===r?a(e,n)[0]:a(n,e)[1]}}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(1532))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},function(e,t,n){var r=n(613).FilterCSS,a=n(613).getDefaultWhiteList,i=n(614);function o(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]}}var c=new r;function l(e){return e.replace(s,"&lt;").replace(u,"&gt;")}var s=/</g,u=/>/g,d=/"/g,f=/&quot;/g,p=/&#([a-zA-Z0-9]*);?/gim,h=/&colon;?/gim,m=/&newline;?/gim,g=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,v=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,y=/u\s*r\s*l\s*\(.*/gi;function b(e){return e.replace(d,"&quot;")}function k(e){return e.replace(f,'"')}function w(e){return e.replace(p,(function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))}))}function x(e){return e.replace(h,":").replace(m," ")}function _(e){for(var t="",n=0,r=e.length;n<r;n++)t+=e.charCodeAt(n)<32?" ":e.charAt(n);return i.trim(t)}function C(e){return e=_(e=x(e=w(e=k(e))))}function E(e){return e=l(e=b(e))}var O=/<!--[\s\S]*?-->/g;t.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]},t.getDefaultWhiteList=o,t.onTag=function(e,t,n){},t.onIgnoreTag=function(e,t,n){},t.onTagAttr=function(e,t,n){},t.onIgnoreTagAttr=function(e,t,n){},t.safeAttrValue=function(e,t,n,r){if(n=C(n),"href"===t||"src"===t){if("#"===(n=i.trim(n)))return"#";if("http://"!==n.substr(0,7)&&"https://"!==n.substr(0,8)&&"mailto:"!==n.substr(0,7)&&"tel:"!==n.substr(0,4)&&"data:image/"!==n.substr(0,11)&&"ftp://"!==n.substr(0,6)&&"./"!==n.substr(0,2)&&"../"!==n.substr(0,3)&&"#"!==n[0]&&"/"!==n[0])return""}else if("background"===t){if(g.lastIndex=0,g.test(n))return""}else if("style"===t){if(v.lastIndex=0,v.test(n))return"";if(y.lastIndex=0,y.test(n)&&(g.lastIndex=0,g.test(n)))return"";!1!==r&&(n=(r=r||c).process(n))}return n=E(n)},t.escapeHtml=l,t.escapeQuote=b,t.unescapeQuote=k,t.escapeHtmlEntities=w,t.escapeDangerHtml5Entities=x,t.clearNonPrintableCharacter=_,t.friendlyAttrValue=C,t.escapeAttrValue=E,t.onIgnoreTagStripAll=function(){return""},t.StripTagBody=function(e,t){"function"!=typeof t&&(t=function(){});var n=!Array.isArray(e),r=[],a=!1;return{onIgnoreTag:function(o,c,l){if(function(t){return!!n||-1!==i.indexOf(e,t)}(o)){if(l.isClosing){var s="[/removed]",u=l.position+s.length;return r.push([!1!==a?a:l.position,u]),a=!1,s}return a||(a=l.position),"[removed]"}return t(o,c,l)},remove:function(e){var t="",n=0;return i.forEach(r,(function(r){t+=e.slice(n,r[0]),n=r[1]})),t+=e.slice(n)}}},t.stripCommentTag=function(e){return e.replace(O,"")},t.stripBlankChar=function(e){var t=e.split("");return(t=t.filter((function(e){var t=e.charCodeAt(0);return 127!==t&&(!(t<=31)||(10===t||13===t))}))).join("")},t.cssFilter=c,t.getDefaultCSSWhiteList=a},function(e,t){function n(){var e={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1};return e}var r=/javascript\s*\:/gim;t.whiteList=n(),t.getDefaultWhiteList=n,t.onAttr=function(e,t,n){},t.onIgnoreAttr=function(e,t,n){},t.safeAttrValue=function(e,t){return r.test(t)?"":t}},function(e,t){e.exports={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,a;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,a=e.length;r<a;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}}},function(e,t,n){var r=n(614);function a(e){var t=r.spaceIndex(e);if(-1===t)var n=e.slice(1,-1);else n=e.slice(1,t+1);return"/"===(n=r.trim(n).toLowerCase()).slice(0,1)&&(n=n.slice(1)),"/"===n.slice(-1)&&(n=n.slice(0,-1)),n}function i(e){return"</"===e.slice(0,2)}var o=/[^a-zA-Z0-9_:\.\-]/gim;function c(e,t){for(;t<e.length;t++){var n=e[t];if(" "!==n)return"="===n?t:-1}}function l(e,t){for(;t>0;t--){var n=e[t];if(" "!==n)return"="===n?t:-1}}function s(e){return function(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}(e)?e.substr(1,e.length-2):e}t.parseTag=function(e,t,n){"use strict";var r="",o=0,c=!1,l=!1,s=0,u=e.length,d="",f="";e:for(s=0;s<u;s++){var p=e.charAt(s);if(!1===c){if("<"===p){c=s;continue}}else if(!1===l){if("<"===p){r+=n(e.slice(o,s)),c=s,o=s;continue}if(">"===p){r+=n(e.slice(o,c)),d=a(f=e.slice(c,s+1)),r+=t(c,r.length,d,f,i(f)),o=s+1,c=!1;continue}if('"'===p||"'"===p)for(var h=1,m=e.charAt(s-h);" "===m||"="===m;){if("="===m){l=p;continue e}m=e.charAt(s-++h)}}else if(p===l){l=!1;continue}}return o<e.length&&(r+=n(e.substr(o))),r},t.parseAttr=function(e,t){"use strict";var n=0,a=[],i=!1,u=e.length;function d(e,n){if(!((e=(e=r.trim(e)).replace(o,"").toLowerCase()).length<1)){var i=t(e,n||"");i&&a.push(i)}}for(var f=0;f<u;f++){var p,h=e.charAt(f);if(!1!==i||"="!==h)if(!1===i||f!==n||'"'!==h&&"'"!==h||"="!==e.charAt(f-1))if(/\s|\n|\t/.test(h)){if(e=e.replace(/\s|\n|\t/g," "),!1===i){if(-1===(p=c(e,f))){d(r.trim(e.slice(n,f))),i=!1,n=f+1;continue}f=p-1;continue}if(-1===(p=l(e,f-1))){d(i,s(r.trim(e.slice(n,f)))),i=!1,n=f+1;continue}}else;else{if(-1===(p=e.indexOf(h,f+1)))break;d(i,r.trim(e.slice(n+1,p))),i=!1,n=(f=p)+1}else i=e.slice(n,f),n=f+1}return n<e.length&&(!1===i?d(e.slice(n)):d(i,s(r.trim(e.slice(n))))),r.trim(a.join(" "))}},function(e,t,n){"use strict";function r(){if(!(this instanceof r))return new r;this.queue=[],this.cache=null}r.prototype.matrix=function(e){return 1===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&0===e[4]&&0===e[5]||(this.cache=null,this.queue.push(e)),this},r.prototype.translate=function(e,t){return 0===e&&0===t||(this.cache=null,this.queue.push([1,0,0,1,e,t])),this},r.prototype.scale=function(e,t){return 1===e&&1===t||(this.cache=null,this.queue.push([e,0,0,t,0,0])),this},r.prototype.rotate=function(e,t,n){var r,a,i;return 0!==e&&(this.translate(t,n),r=e*Math.PI/180,a=Math.cos(r),i=Math.sin(r),this.queue.push([a,i,-i,a,0,0]),this.cache=null,this.translate(-t,-n)),this},r.prototype.skewX=function(e){return 0!==e&&(this.cache=null,this.queue.push([1,0,Math.tan(e*Math.PI/180),1,0,0])),this},r.prototype.skewY=function(e){return 0!==e&&(this.cache=null,this.queue.push([1,Math.tan(e*Math.PI/180),0,1,0,0])),this},r.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],1===this.queue.length)return this.cache;for(var e=1;e<this.queue.length;e++)this.cache=(t=this.cache,n=this.queue[e],[t[0]*n[0]+t[2]*n[1],t[1]*n[0]+t[3]*n[1],t[0]*n[2]+t[2]*n[3],t[1]*n[2]+t[3]*n[3],t[0]*n[4]+t[2]*n[5]+t[4],t[1]*n[4]+t[3]*n[5]+t[5]]);var t,n;return this.cache},r.prototype.calc=function(e,t,n){var r;return this.queue.length?(this.cache||(this.cache=this.toArray()),[e*(r=this.cache)[0]+t*r[2]+(n?0:r[4]),e*r[1]+t*r[3]+(n?0:r[5])]):[e,t]},e.exports=r},function(e,t,n){"use strict";e.exports=function(e,t,n,r){for(var a=65535&e|0,i=e>>>16&65535|0,o=0;0!==n;){n-=o=n>2e3?2e3:n;do{i=i+(a=a+t[r++]|0)|0}while(--o);a%=65521,i%=65521}return a|i<<16|0}},function(e,t,n){"use strict";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t,n,a){var i=r,o=a+n;e^=-1;for(var c=a;c<o;c++)e=e>>>8^i[255&(e^t[c])];return-1^e}},function(e,t,n){"use strict";var r=n(284),a=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch(e){a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){i=!1}for(var o=new r.Buf8(256),c=0;c<256;c++)o[c]=c>=252?6:c>=248?5:c>=240?4:c>=224?3:c>=192?2:1;function l(e,t){if(t<65534&&(e.subarray&&i||!e.subarray&&a))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",o=0;o<t;o++)n+=String.fromCharCode(e[o]);return n}o[254]=o[254]=1,t.string2buf=function(e){var t,n,a,i,o,c=e.length,l=0;for(i=0;i<c;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<c&&56320==(64512&(a=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(a-56320),i++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(l),o=0,i=0;o<l;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<c&&56320==(64512&(a=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(a-56320),i++),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t},t.buf2binstring=function(e){return l(e,e.length)},t.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,a=t.length;n<a;n++)t[n]=e.charCodeAt(n);return t},t.buf2string=function(e,t){var n,r,a,i,c=t||e.length,s=new Array(2*c);for(r=0,n=0;n<c;)if((a=e[n++])<128)s[r++]=a;else if((i=o[a])>4)s[r++]=65533,n+=i-1;else{for(a&=2===i?31:3===i?15:7;i>1&&n<c;)a=a<<6|63&e[n++],i--;i>1?s[r++]=65533:a<65536?s[r++]=a:(a-=65536,s[r++]=55296|a>>10&1023,s[r++]=56320|1023&a)}return l(s,r)},t.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+o[e[n]]>t?n:t}},function(e,t,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(e,t,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,n){"use strict";e.exports=n(1668)},function(e,t,n){"use strict";e.exports.encode=n(1669),e.exports.decode=n(1670),e.exports.format=n(1671),e.exports.parse=n(1672)},function(e,t){e.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/},function(e,t){e.exports=/[\0-\x1F\x7F-\x9F]/},function(e,t){e.exports=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/},function(e,t,n){"use strict";var r="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",a="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",i=new RegExp("^(?:"+r+"|"+a+"|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|<[?].*?[?]>|<![A-Z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)"),o=new RegExp("^(?:"+r+"|"+a+")");e.exports.HTML_TAG_RE=i,e.exports.HTML_OPEN_CLOSE_TAG_RE=o},function(e,t,n){"use strict";e.exports.tokenize=function(e,t){var n,r,a,i,o=e.pos,c=e.src.charCodeAt(o);if(t)return!1;if(126!==c)return!1;if(a=(r=e.scanDelims(e.pos,!0)).length,i=String.fromCharCode(c),a<2)return!1;for(a%2&&(e.push("text","",0).content=i,a--),n=0;n<a;n+=2)e.push("text","",0).content=i+i,e.delimiters.push({marker:c,jump:n,token:e.tokens.length-1,level:e.level,end:-1,open:r.can_open,close:r.can_close});return e.pos+=r.length,!0},e.exports.postProcess=function(e){var t,n,r,a,i,o=[],c=e.delimiters,l=e.delimiters.length;for(t=0;t<l;t++)126===(r=c[t]).marker&&-1!==r.end&&(a=c[r.end],(i=e.tokens[r.token]).type="s_open",i.tag="s",i.nesting=1,i.markup="~~",i.content="",(i=e.tokens[a.token]).type="s_close",i.tag="s",i.nesting=-1,i.markup="~~",i.content="","text"===e.tokens[a.token-1].type&&"~"===e.tokens[a.token-1].content&&o.push(a.token-1));for(;o.length;){for(n=(t=o.pop())+1;n<e.tokens.length&&"s_close"===e.tokens[n].type;)n++;t!==--n&&(i=e.tokens[n],e.tokens[n]=e.tokens[t],e.tokens[t]=i)}}},function(e,t,n){"use strict";e.exports.tokenize=function(e,t){var n,r,a=e.pos,i=e.src.charCodeAt(a);if(t)return!1;if(95!==i&&42!==i)return!1;for(r=e.scanDelims(e.pos,42===i),n=0;n<r.length;n++)e.push("text","",0).content=String.fromCharCode(i),e.delimiters.push({marker:i,length:r.length,jump:n,token:e.tokens.length-1,level:e.level,end:-1,open:r.can_open,close:r.can_close});return e.pos+=r.length,!0},e.exports.postProcess=function(e){var t,n,r,a,i,o,c=e.delimiters;for(t=e.delimiters.length-1;t>=0;t--)95!==(n=c[t]).marker&&42!==n.marker||-1!==n.end&&(r=c[n.end],o=t>0&&c[t-1].end===n.end+1&&c[t-1].token===n.token-1&&c[n.end+1].token===r.token+1&&c[t-1].marker===n.marker,i=String.fromCharCode(n.marker),(a=e.tokens[n.token]).type=o?"strong_open":"em_open",a.tag=o?"strong":"em",a.nesting=1,a.markup=o?i+i:i,a.content="",(a=e.tokens[r.token]).type=o?"strong_close":"em_close",a.tag=o?"strong":"em",a.nesting=-1,a.markup=o?i+i:i,a.content="",o&&(e.tokens[c[t-1].token].content="",e.tokens[c[n.end+1].token].content="",t--))}},function(e,t,n){},function(e,t,n){"use strict";var r=n(33),a=n(36);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),o=r(n(919)),c=r(n(37)),l=function(e,t){return i.createElement(c.default,Object.assign({},e,{ref:t,icon:o.default}))};l.displayName="CaretDownFilled";var s=i.forwardRef(l);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"filled"}},function(e,t,n){"use strict";var r=n(224),a={shouldRenderPrevVersion:function(e,t){return t===r.VERSION_SETTINGS[e].old}};t.a=a},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(69),o=n(213),c=n(99),l=n(517);t.a=Object(c.b)(Object(i.c)((function(e){return{guide:e.guide}}))((function(e){var t=e.guide,n=e.tip_id;return Object(r.useEffect)((function(){var e=o.a.findFeatureGuide({tip_id:n,type:"lite"});e&&o.a.readLiteFeatureGuide(e)}),[]),a.a.createElement("div",{className:e.className||"",style:e.style,"data-testid":"guide_".concat(n),onClick:function(){var t=o.a.findFeatureGuide({tip_id:n,type:"mini"});o.a.readMiniFeatureGuide(t,e.dispatch)}},e.children,("#guide"===window.location.hash||!t.readTip[n])&&a.a.createElement(l.a.Mini,null))})),!1)},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i={GUIDELINES:{dashboard:[{title:"工作台是什么",img:"https://cdn.nlark.com/yuque/0/2019/png/84147/1556423064875-a555112b-ae62-423c-8e11-472cafc0d860.png",tip:"工作台是你在语雀上的信息枢纽，在这里可以快速查看你最近编辑的文档，也可以找到你参与的团队。",url:"https://www.yuque.com/yuque/help/dashboard"},{title:"如何回到工作台",img:"https://cdn.nlark.com/yuque/0/2019/png/84147/1556441495226-1de5fc8d-bf54-4af9-93ed-58ff6b00422d.png",tip:"点击「语雀 Logo」 或者点击导航栏「工作台」，即可回到工作台页面。",url:""},{title:"如何查看最近编辑的文档",img:"https://cdn.nlark.com/yuque/0/2019/png/84147/1556441506534-73341ae1-f888-41d7-ace9-0918720a1d13.png",tip:"进入工作台后，第一个区块即是「最近编辑」，也可以点击左边菜单选择「文档」查看你参与编辑的文档。",url:""},{title:"如何查看别人分享给我的文档",img:"https://cdn.nlark.com/yuque/0/2019/png/84147/1556441541973-589b6fdc-85bb-4276-8366-65055405b95d.png",tip:"进入工作台后，点击左边菜单选择「分享给我的」，在这里可以找到分享给你的文档或知识库。",url:""}],doc_editor:[{title:"如何插入图片、表格等内容",img:"https://cdn.nlark.com/yuque/0/2019/png/84147/1556443024911-fa99fe6e-f4c8-482e-a946-55b825cb13f9.png",tip:"点击编辑器中工具栏「插入」图标选择对应内容插入，或者在空白行输入“ /” ，选择对应内容插入。",url:"https://www.yuque.com/yuque/help/rs0a17"},{title:"如何查看文档历史",img:"https://cdn.nlark.com/yuque/0/2019/png/84147/1556443114161-781348c4-e209-4bb5-817a-221074f34ef3.png",tip:"点击编辑器右上角「历史」按钮查看文档对应的历史，可恢复到任意版本。",url:"https://www.yuque.com/yuque/help/how-to-restore-a-history-version"},{title:"如何发布到目录",img:"https://cdn.nlark.com/yuque/0/2019/png/84147/1556443180423-55f29815-59c7-4a38-9ca2-e543830c1c72.png",tip:"在文档知识库编辑页面，可以选择将文档发布到目录，点击右上角「发布」后选择对应目录位置即可完成发布。",url:"https://www.yuque.com/yuque/help/how-to-publish"},{title:"如何修改文档信息",img:"https://cdn.nlark.com/yuque/0/2019/png/84147/1556443229381-d1fea0af-5889-4b9f-b819-d5f7e368c32e.png",tip:"点击编辑器左上角标题「下拉」图标，在这里可以修改文档的基本信息，包括设置单篇文档权限。",url:""}],toc_editor:[{title:__("现已支持在阅读页直接编排"),img:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*mX9DT43KI70AAAAAAAAAAABkARQnAQ",tip:__("试试全新的拖拽体验吧"),url:"https://www.yuque.com/yuque/help/cpeo0y"}],group:[{title:"如何添加团队成员",img:"https://cdn.nlark.com/yuque/0/2019/png/84147/1556441753633-eb8f1169-8b94-47ca-a93c-224ed0dc9d2d.png",tip:"进入团队，点击右上角「成员」，可通过搜索、邀请链接等方式添加成员。",url:"https://www.yuque.com/yuque/help/how-to-add-members"},{title:"如何设置团队权限",img:"https://cdn.nlark.com/yuque/0/2019/png/84147/1556441704230-c17391ae-f519-4459-bf40-8aa0bf3bab5b.png",tip:"进入团队，点击右上角「设置」，进入「高级设置」选择「团队可见范围」，设置对应的访问权限。",url:""},{title:"如何置顶知识库",img:"https://cdn.nlark.com/yuque/0/2019/png/84147/1556441733550-1bc9abc3-e2fb-4005-98a8-ba32c3e11acb.png",tip:"进入团队，点击知识库卡片右上角更多操作，选择「置顶」可将知识库置顶显示在团队首页。",url:""}],book:[{title:"如何编排目录",img:"https://cdn.nlark.com/yuque/0/2019/png/84147/1556441643945-9a46cb7b-5047-461f-95de-dcc8e5963129.png",tip:"进入知识库，点击目录右上角「编排目录」，或在阅读页面点击更多操作中「编排目录」。注意：未发布文档不会出现在目录中。",url:"https://www.yuque.com/yuque/help/cpeo0y"},{title:"如何管理文档",img:"https://cdn.nlark.com/yuque/0/2019/png/84147/1556441556832-8f41746f-0656-4994-a75f-3f5405e6487c.png",tip:"进入知识库，点击右上角「管理文档」，进入后可对文档进行转移、复制、删除等操作。",url:""},{title:"如何完成知识库协作",img:"https://cdn.nlark.com/yuque/0/2019/png/84147/1556441689760-34b0eea8-c65c-4cbd-8b9d-dfe7042f2e62.png",tip:"进入知识库，点击「协作」将需要协作的人加入到知识库中即可在线与他完成协同。",url:"https://www.yuque.com/yuque/help/collaborators"},{title:"如何转移 & 删除知识库",img:"https://cdn.nlark.com/yuque/0/2019/png/84147/1556441613658-6a0b6f50-407d-4ae2-b561-8f029fd052d7.png",tip:"进入知识库，点击「设置」，进入「高级设置」选择「转移知识库」或 「删除知识库」。注意：仅 Owner 有权限操作。",url:"https://www.yuque.com/yuque/help/cd5825"},{title:"如何修改知识库信息",img:"https://cdn.nlark.com/yuque/0/2019/png/84147/1556441618750-191e58cf-e948-4867-85d5-5d0337eb8853.png",tip:"进入知识库，点击「设置」，进入「基础设置」后可以修改知识库名称、描述、以及路径。",url:""}],origination:[{title:"如何添加成员或外部联系人",img:"https://cdn.nlark.com/yuque/0/2019/png/84147/1556442769213-55889f8c-977a-4ee9-b1d0-635a6e42a60d.png",tip:"空间成员、外部联系人需管理员进行添加，空间下的团队、知识库仅可添加空间成员和外部联系人。",url:""},{title:"空间下内容如何分享给外部人员",img:"https://cdn.nlark.com/yuque/0/2019/png/84147/1556442855994-d6f2bf1e-4416-4d41-aa23-f101b6fd6909.png",tip:"当前空间内容无法直接分享给外部人员，需使用知识库、文档分享功能。",url:""},{title:"如何绑定钉钉等第三方登录",img:"https://cdn.nlark.com/yuque/0/2019/png/84147/1556442962970-0d770aac-2d48-45a0-9c5c-74e73014d1a7.png",tip:"管理员进入空间设置，点击「附加功能」，按照对应的绑定说明完成第三方登录绑定。",url:"https://www.yuque.com/yuque/help/thirdpart"}]},SCENES:[{key:"project",title:"项目文档",img:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*eQuEQpBX48AAAAAAAAAAAABjARQnAQ"},{key:"note",title:"学习笔记",img:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*4NqHSqYtMBsAAAAAAAAAAABjARQnAQ"},{key:"column",title:"团队专栏",img:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*oJlBTrdrPRkAAAAAAAAAAABjARQnAQ"},{key:"help",title:"帮助手册",img:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*TYaGQaVJRn8AAAAAAAAAAABjARQnAQ"}],FEATURES:[{area:"DOC_HEAD_MORE",type:"lite",enable:!1,tip_id:"feature_mail_doc",tip:__("可以用邮件发送文档了！"),containerSelector:'[data-feature-guide-container="doc-more-action"]',placement:"bottomRight"},{area:"HEAD_NEW",type:"lite",enable:!1,tip_id:"feature_mind",tip:__("试试新建思维图"),containerSelector:'[data-feature-guide-container="head-new"]',placement:"bottom",offsetY:"-12px",readTrigger:["click"]},{area:"HEAD_NEW",type:"lite",enable:!0,tip_id:"feature_note_release",tip:__("小记全新上线"),containerSelector:'[data-feature-guide-container="head-new-note"]',placement:"bottom",offsetY:"0px",readTrigger:["click"]},{area:"HEAD_NEW_MENU_ITEM",enable:!0,type:"mini",tip_id:"feature_mind"},{area:"DOC_EDITOR_TOOLBAR",type:"lite",enable:!1,tip_id:"feature_vote",tip:__("可以插入投票啦"),containerSelector:'.lake-max-editor [accessbilityid="main-card-button"]',placement:"bottomLeft",offsetY:"-6px",readTrigger:["click"]},{area:"DOC_EDITOR_TOOLBAR_CARD",enable:!1,type:"mini",tip_id:"feature_vote",containerSelector:'[accessbilityid="vote-card-button"]',readTrigger:["click"]},{area:"SHEET_EDITOR_TOOLBAR",type:"lite",enable:!1,tip_id:"feature_sheet_note",tip:__("支持添加备注啦"),containerSelector:'.lake-sheet-toolbar [accessbilityid="main-card-button"]',placement:"bottomLeft",offsetY:"-6px",readTrigger:["click"]},{area:"SHEET_EDITOR_TOOLBAR_CARD",enable:!1,type:"mini",tip_id:"feature_sheet_note",containerSelector:".lake-sheet-card-note .lake-menu-item",readTrigger:["click"]},{area:"SHEET_EDITOR_TOOLBAR",type:"lite",enable:!0,tip_id:"feature_sheet_filter",tip:__("筛选可设置仅你自己可见了"),containerSelector:'.lake-sheet-toolbar [accessbilityid="main-filter-button"]',placement:"bottomLeft",offsetY:"-6px",readTrigger:["click"]},{area:"GROUP_HOMEPAGE_3",enable:!0,type:"lite",tip_id:"feature_group_homepage_customize",tip:__("自定义首页功能升级啦"),placement:"left",containerSelector:'[data-feature-guide-container="group-homepage-customize_3"]',readTrigger:["click"],offsetY:"0px",guideSignContainerStyle:{marginTop:"-10px",right:"-10px"}},{area:"BOOK_INDEX_MORE_ACTION",enable:!0,type:"lite",tip_id:"feature_book_custom_index_landing",tip:a.a.createElement("div",null,a.a.createElement("p",null,a.a.createElement("strong",null,__("首页可以自定义了！"))),a.a.createElement("p",null,__("点击「更多」-「设置」-「高级设置」，选择「自定义首页」试一试")),a.a.createElement("button",{type:"button",onClick:function(){window.location.href="https://www.yuque.com/yuque/help/gcvi5y"},className:"larkui-feature-guide-lite-multi-line-button"},a.a.createElement("strong",null,__("查看案例")))),offsetY:"-6px",placement:"bottomRight",containerSelector:'[data-feature-guide-container="book-header-more-action"]',enableMultiLines:!0},{area:"BOOK_ADVANCED_SETTING_CUSTOM_LAYOUT",enable:!0,type:"lite",tip_id:"feature_book_custom_index_setting",tip:__("试试自定义首页吧"),offsetY:"42px",placement:"top",containerSelector:'[data-feature-guide-container="book-advanced-setting-custom-layout"]'},{area:"RESOURCE_AREA_COMMENT",enable:!0,type:"lite",tip_id:"feature_resource_area_comment",tip:__("试试框选评论吧"),placement:"left",containerSelector:'[data-feature-guide-container="feature_resource_area_comment"]',readTrigger:["click"]}]};t.a=i},function(e,t,n){"use strict";var r=n(33),a=n(36);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),o=r(n(924)),c=r(n(37)),l=function(e,t){return i.createElement(c.default,Object.assign({},e,{ref:t,icon:o.default}))};l.displayName="UpOutlined";var s=i.forwardRef(l);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"}},function(e,t,n){var r=n(899),a=n(902),i=n(1648);function o(e,t){return new i(t).process(e)}for(var c in(t=e.exports=o).filterXSS=o,t.FilterXSS=i,r)t[c]=r[c];for(var c in a)t[c]=a[c];"undefined"!=typeof window&&(window.filterXSS=e.exports),"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)},function(e,t,n){"use strict";e.exports=n(1649)},function(e,t,n){"use strict";var r=/,?([a-z]),?/gi,a=parseFloat,i=Math,o=i.PI,c=i.min,l=i.max,s=i.pow,u=i.abs,d=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/gi,f=/(-?\d*\.?\d*(?:e[-+]?\\d+)?)[\s]*,?[\s]*/gi,p=Array.isArray||function(e){return e instanceof Array};function h(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function m(e){if("function"==typeof e||Object(e)!==e)return e;var t=new e.constructor;for(var n in e)h(e,n)&&(t[n]=m(e[n]));return t}function g(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}function v(e){var t=v.ps=v.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout((function(){for(var n in t)h(t,n)&&n!=e&&(t[n].sleep--,!t[n].sleep&&delete t[n])})),t[e]}function y(e,t,n,r){return 1===arguments.length&&(t=e.y,n=e.width,r=e.height,e=e.x),{x:e,y:t,width:n,height:r,x2:e+n,y2:t+r}}function b(){return this.join(",").replace(r,"$1")}function k(e){var t=m(e);return t.toString=b,t}function w(e,t,n,r,a,i,o,c,l){var u=1-l,d=s(u,3),f=s(u,2),p=l*l*l,h=d*t+3*f*l*r+3*u*l*l*i+p*c;return{x:S(d*e+3*f*l*n+3*u*l*l*a+p*o),y:S(h)}}function x(e){var t=M.apply(null,e);return y(t.x0,t.y0,t.x1-t.x0,t.y1-t.y0)}function _(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function C(e,t,n,r,a){return e*(e*(-3*t+9*n-9*r+3*a)+6*t-12*n+6*r)-3*t+3*n}function E(e,t,n,r,a,o,c,l,s){null==s&&(s=1);for(var u=(s=s>1?1:s<0?0:s)/2,d=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,h=0;h<12;h++){var m=u*d[h]+u,g=C(m,e,n,a,c),v=C(m,t,r,o,l),y=g*g+v*v;p+=f[h]*i.sqrt(y)}return u*p}function O(e,t,n,r,a,i,o,s){if(!(l(e,n)<c(a,o)||c(e,n)>l(a,o)||l(t,r)<c(i,s)||c(t,r)>l(i,s))){var u=(e*r-t*n)*(i-s)-(t-r)*(a*s-i*o),d=(e-n)*(i-s)-(t-r)*(a-o);if(d){var f=S(((e*r-t*n)*(a-o)-(e-n)*(a*s-i*o))/d),p=S(u/d),h=+f.toFixed(2),m=+p.toFixed(2);if(!(h<+c(e,n).toFixed(2)||h>+l(e,n).toFixed(2)||h<+c(a,o).toFixed(2)||h>+l(a,o).toFixed(2)||m<+c(t,r).toFixed(2)||m>+l(t,r).toFixed(2)||m<+c(i,s).toFixed(2)||m>+l(i,s).toFixed(2)))return{x:f,y:p}}}}function S(e){return Math.round(1e11*e)/1e11}function R(e,t,n){if(!function(e,t){return e=y(e),_(t=y(t),e.x,e.y)||_(t,e.x2,e.y)||_(t,e.x,e.y2)||_(t,e.x2,e.y2)||_(e,t.x,t.y)||_(e,t.x2,t.y)||_(e,t.x,t.y2)||_(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}(x(e),x(t)))return n?0:[];for(var r=E.apply(0,e),a=E.apply(0,t),i=A(e)?1:~~(r/5)||1,o=A(t)?1:~~(a/5)||1,c=[],l=[],s={},d=n?0:[],f=0;f<i+1;f++){var p=w.apply(0,e.concat(f/i));c.push({x:p.x,y:p.y,t:f/i})}for(f=0;f<o+1;f++)p=w.apply(0,t.concat(f/o)),l.push({x:p.x,y:p.y,t:f/o});for(f=0;f<i;f++)for(var h=0;h<o;h++){var m,g=c[f],v=c[f+1],b=l[h],k=l[h+1],C=u(v.x-g.x)<.01?"y":"x",S=u(k.x-b.x)<.01?"y":"x",R=O(g.x,g.y,v.x,v.y,b.x,b.y,k.x,k.y);if(R){if(s[m=R.x.toFixed(9)+"#"+R.y.toFixed(9)])continue;s[m]=!0;var D=g.t+u((R[C]-g[C])/(v[C]-g[C]))*(v.t-g.t),T=b.t+u((R[S]-b[S])/(k[S]-b[S]))*(k.t-b.t);D>=0&&D<=1&&T>=0&&T<=1&&(n?d++:d.push({x:R.x,y:R.y,t1:D,t2:T}))}}return d}function D(e){var t=v(e);if(t.abs)return k(t.abs);if(p(e)&&p(e&&e[0])||(e=function(e){if(!e)return null;var t=v(e);if(t.arr)return m(t.arr);var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=[];return p(e)&&p(e[0])&&(r=m(e)),r.length||String(e).replace(d,(function(e,t,a){var i=[],o=t.toLowerCase();for(a.replace(f,(function(e,t){t&&i.push(+t)})),"m"==o&&i.length>2&&(r.push([t].concat(i.splice(0,2))),o="l",t="m"==t?"l":"L");i.length>=n[o]&&(r.push([t].concat(i.splice(0,n[o]))),n[o]););})),r.toString=v.toString,t.arr=m(r),r}(e)),!e||!e.length)return[["M",0,0]];var n,r=[],a=0,i=0,o=0,c=0,l=0;"M"==e[0][0]&&(o=a=+e[0][1],c=i=+e[0][2],l++,r[0]=["M",a,i]);for(var s,u,h=l,g=e.length;h<g;h++){if(r.push(s=[]),(n=(u=e[h])[0])!=n.toUpperCase())switch(s[0]=n.toUpperCase(),s[0]){case"A":s[1]=u[1],s[2]=u[2],s[3]=u[3],s[4]=u[4],s[5]=u[5],s[6]=+u[6]+a,s[7]=+u[7]+i;break;case"V":s[1]=+u[1]+i;break;case"H":s[1]=+u[1]+a;break;case"M":o=+u[1]+a,c=+u[2]+i;default:for(var y=1,w=u.length;y<w;y++)s[y]=+u[y]+(y%2?a:i)}else for(var x=0,_=u.length;x<_;x++)s[x]=u[x];switch(n=n.toUpperCase(),s[0]){case"Z":a=+o,i=+c;break;case"H":a=s[1];break;case"V":i=s[1];break;case"M":o=s[s.length-2],c=s[s.length-1];default:a=s[s.length-2],i=s[s.length-1]}}return r.toString=b,t.abs=k(r),r}function A(e){return e[0]===e[2]&&e[1]===e[3]&&e[4]===e[6]&&e[5]===e[7]}function T(e,t,n,r){return[e,t,n,r,n,r]}function P(e,t,n,r,a,i){var o=1/3,c=2/3;return[o*e+c*n,o*t+c*r,o*a+c*n,o*i+c*r,a,i]}function j(e,t,n,r,a,c,l,s,d,f){var p,m,v=120*o/180,y=o/180*(+a||0),b=[],k=(m=function(e,t,n){return{x:e*i.cos(n)-t*i.sin(n),y:e*i.sin(n)+t*i.cos(n)}},function e(){var t=Array.prototype.slice.call(arguments,0),n=t.join("␀"),r=e.cache=e.cache||{},a=e.count=e.count||[];return h(r,n)?(g(a,n),r[n]):(a.length>=1e3&&delete r[a.shift()],a.push(n),r[n]=m.apply(0,t),r[n])});if(f)D=f[0],A=f[1],S=f[2],R=f[3];else{e=(p=k(e,t,-y)).x,t=p.y;var w=(e-(s=(p=k(s,d,-y)).x))/2,x=(t-(d=p.y))/2,_=w*w/(n*n)+x*x/(r*r);_>1&&(n*=_=i.sqrt(_),r*=_);var C=n*n,E=r*r,O=(c==l?-1:1)*i.sqrt(u((C*E-C*x*x-E*w*w)/(C*x*x+E*w*w))),S=O*n*x/r+(e+s)/2,R=O*-r*w/n+(t+d)/2,D=i.asin(((t-R)/r).toFixed(9)),A=i.asin(((d-R)/r).toFixed(9));(D=e<S?o-D:D)<0&&(D=2*o+D),(A=s<S?o-A:A)<0&&(A=2*o+A),l&&D>A&&(D-=2*o),!l&&A>D&&(A-=2*o)}var T=A-D;if(u(T)>v){var P=A,M=s,N=d;A=D+v*(l&&A>D?1:-1),b=j(s=S+n*i.cos(A),d=R+r*i.sin(A),n,r,a,0,l,M,N,[A,P,S,R])}T=A-D;var L=i.cos(D),I=i.sin(D),z=i.cos(A),B=i.sin(A),F=i.tan(T/4),V=4/3*n*F,U=4/3*r*F,q=[e,t],H=[e+V*I,t-U*L],W=[s+V*B,d-U*z],Y=[s,d];if(H[0]=2*q[0]-H[0],H[1]=2*q[1]-H[1],f)return[H,W,Y].concat(b);for(var G=[],K=0,X=(b=[H,W,Y].concat(b).join().split(",")).length;K<X;K++)G[K]=K%2?k(b[K-1],b[K],y).y:k(b[K],b[K+1],y).x;return G}function M(e,t,n,r,a,o,s,d){for(var f,p,h,m,g,v,y,b,k=[],w=[[],[]],x=0;x<2;++x)if(0==x?(p=6*e-12*n+6*a,f=-3*e+9*n-9*a+3*s,h=3*n-3*e):(p=6*t-12*r+6*o,f=-3*t+9*r-9*o+3*d,h=3*r-3*t),u(f)<1e-12){if(u(p)<1e-12)continue;0<(m=-h/p)&&m<1&&k.push(m)}else y=p*p-4*h*f,b=i.sqrt(y),y<0||(0<(g=(-p+b)/(2*f))&&g<1&&k.push(g),0<(v=(-p-b)/(2*f))&&v<1&&k.push(v));for(var _,C=k.length,E=C;C--;)_=1-(m=k[C]),w[0][C]=_*_*_*e+3*_*_*m*n+3*_*m*m*a+m*m*m*s,w[1][C]=_*_*_*t+3*_*_*m*r+3*_*m*m*o+m*m*m*d;return w[0][E]=e,w[1][E]=t,w[0][E+1]=s,w[1][E+1]=d,w[0].length=w[1].length=E+2,{x0:c.apply(0,w[0]),y0:c.apply(0,w[1]),x1:l.apply(0,w[0]),y1:l.apply(0,w[1])}}function N(e){var t=v(e);if(t.curve)return k(t.curve);for(var n=D(e),r={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},i=function(e,t,n){var r,a;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(j.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":"C"==n||"S"==n?(r=2*t.x-t.bx,a=2*t.y-t.by):(r=t.x,a=t.y),e=["C",r,a].concat(e.slice(1));break;case"T":"Q"==n||"T"==n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(P(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(P(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(T(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(T(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(T(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(T(t.x,t.y,t.X,t.Y))}return e},o=function(e,t){if(e[t].length>7){e[t].shift();for(var r=e[t];r.length;)c[t]="A",e.splice(t++,0,["C"].concat(r.splice(0,6)));e.splice(t,1),d=n.length}},c=[],l="",s="",u=0,d=n.length;u<d;u++){n[u]&&(l=n[u][0]),"C"!=l&&(c[u]=l,u&&(s=c[u-1])),n[u]=i(n[u],r,s),"A"!=c[u]&&"C"==l&&(c[u]="C"),o(n,u);var f=n[u],p=f.length;r.x=f[p-2],r.y=f[p-1],r.bx=a(f[p-4])||r.x,r.by=a(f[p-3])||r.y}return t.curve=k(n),n}e.exports=function(e,t,n){e=N(e),t=N(t);for(var r,a,i,o,c,l,s,u,d,f,p=n?0:[],h=0,m=e.length;h<m;h++){var g=e[h];if("M"==g[0])r=c=g[1],a=l=g[2];else{"C"==g[0]?(d=[r,a].concat(g.slice(1)),r=d[6],a=d[7]):(d=[r,a,r,a,c,l,c,l],r=c,a=l);for(var v=0,y=t.length;v<y;v++){var b=t[v];if("M"==b[0])i=s=b[1],o=u=b[2];else{"C"==b[0]?(f=[i,o].concat(b.slice(1)),i=f[6],o=f[7]):(f=[i,o,i,o,s,u,s,u],i=s,o=u);var k=R(d,f,n);if(n)p+=k;else{for(var w=0,x=k.length;w<x;w++)k[w].segment1=h,k[w].segment2=v,k[w].bez1=d,k[w].bez2=f;p=p.concat(k)}}}}}return p}},function(e,t,n){"use strict";e.exports=n(1667)},function(e,t,n){"use strict";e.exports=function(e){var t=e.utils.escapeRE,n=e.utils.arrayReplaceAt,r=" \r\n$+<=>^`|~",a=e.utils.lib.ucmicro.P.source,i=e.utils.lib.ucmicro.Z.source;e.block.ruler.before("reference","abbr_def",(function(e,t,n,r){var a,i,o,c,l,s=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];if(s+2>=u)return!1;if(42!==e.src.charCodeAt(s++))return!1;if(91!==e.src.charCodeAt(s++))return!1;for(c=s;s<u;s++){if(91===(o=e.src.charCodeAt(s)))return!1;if(93===o){l=s;break}92===o&&s++}return!(l<0||58!==e.src.charCodeAt(l+1))&&(!!r||(a=e.src.slice(c,l).replace(/\\(.)/g,"$1"),i=e.src.slice(l+2,u).trim(),0!==a.length&&(0!==i.length&&(e.env.abbreviations||(e.env.abbreviations={}),void 0===e.env.abbreviations[":"+a]&&(e.env.abbreviations[":"+a]=i),e.line=t+1,!0))))}),{alt:["paragraph","reference"]}),e.core.ruler.after("linkify","abbr_replace",(function(e){var o,c,l,s,u,d,f,p,h,m,g,v,y,b=e.tokens;if(e.env.abbreviations)for(v=new RegExp("(?:"+Object.keys(e.env.abbreviations).map((function(e){return e.substr(1)})).sort((function(e,t){return t.length-e.length})).map(t).join("|")+")"),g="(^|"+a+"|"+i+"|["+r.split("").map(t).join("")+"])("+Object.keys(e.env.abbreviations).map((function(e){return e.substr(1)})).sort((function(e,t){return t.length-e.length})).map(t).join("|")+")($|"+a+"|"+i+"|["+r.split("").map(t).join("")+"])",h=new RegExp(g,"g"),c=0,l=b.length;c<l;c++)if("inline"===b[c].type)for(o=(s=b[c].children).length-1;o>=0;o--)if("text"===(y=s[o]).type&&(p=0,d=y.content,h.lastIndex=0,f=[],v.test(d))){for(;m=h.exec(d);)(m.index>0||m[1].length>0)&&((u=new e.Token("text","",0)).content=d.slice(p,m.index+m[1].length),f.push(u)),(u=new e.Token("abbr_open","abbr",1)).attrs=[["title",e.env.abbreviations[":"+m[2]]]],f.push(u),(u=new e.Token("text","",0)).content=m[2],f.push(u),u=new e.Token("abbr_close","abbr",-1),f.push(u),h.lastIndex-=m[3].length,p=h.lastIndex;f.length&&(p<d.length&&((u=new e.Token("text","",0)).content=d.slice(p),f.push(u)),b[c].children=s=n(s,o,f))}}))}},function(e,t){var n;n=function(e,t,n){"use strict";var r,a,i,o,c,l;return r=e.utils.arrayReplaceAt,o=0,i={divWrap:!1,divClass:"checkbox",idPrefix:"checkbox"},t=Object.assign(i,t),c=/\[(X|\s|\_|\-)\]\s(.*)/i,a=function(e,n,r){var a,i,c;return i=[],t.divWrap&&((c=new r("checkbox_open","div",1)).attrs=[["class",t.divClass]],i.push(c)),a=t.idPrefix+o,o+=1,(c=new r("checkbox_input","input",0)).attrs=[["type","checkbox"],["id",a]],!0===e&&c.attrs.push(["checked","true"]),i.push(c),(c=new r("label_open","label",1)).attrs=[["for",a]],i.push(c),(c=new r("text","",0)).content=n,i.push(c),i.push(new r("label_close","label",-1)),t.divWrap&&i.push(new r("checkbox_close","div",-1)),i},l=function(e,t){var n,r,i,o;return null===(i=e.content.match(c))?e:(n=!1,o=i[1],r=i[2],"X"!==o&&"x"!==o||(n=!0),a(n,r,t))},function(e){var t,n,a,i,o,c;for(a=0,i=(t=e.tokens).length;a<i;)if("inline"===t[a].type){for(n=(c=t[a].children).length-1;n>=0;)o=c[n],t[a].children=c=r(c,n,l(o,e.Token)),n--;a++}else a++}},e.exports=function(e,t){"use strict";e.core.ruler.push("checkbox",n(e,t))}},function(e,t,n){"use strict";var r=n(1720),a=n(1721),i=n(1722),o=n(1723),c=n(1724);e.exports=function(e,t){var n={defs:r,shortcuts:a,enabled:[]},l=c(e.utils.assign({},n,t||{}));e.renderer.rules.emoji=i,e.core.ruler.push("emoji",o(e,l.defs,l.shortcuts,l.scanRE,l.replaceRE))}},function(e,t,n){"use strict";function r(e,t,n,r){var a=Number(e[t].meta.id+1).toString(),i="";return"string"==typeof r.docId&&(i="-"+r.docId+"-"),i+a}function a(e,t){var n=Number(e[t].meta.id+1).toString();return e[t].meta.subId>0&&(n+=":"+e[t].meta.subId),"["+n+"]"}function i(e,t,n,r,a){var i=a.rules.footnote_anchor_name(e,t,n,r,a),o=a.rules.footnote_caption(e,t,n,r,a),c=i;return e[t].meta.subId>0&&(c+=":"+e[t].meta.subId),'<sup class="footnote-ref"><a href="#fn'+i+'" id="fnref'+c+'">'+o+"</a></sup>"}function o(e,t,n){return(n.xhtmlOut?'<hr class="footnotes-sep" />\n':'<hr class="footnotes-sep">\n')+'<section class="footnotes">\n<ol class="footnotes-list">\n'}function c(){return"</ol>\n</section>\n"}function l(e,t,n,r,a){var i=a.rules.footnote_anchor_name(e,t,n,r,a);return e[t].meta.subId>0&&(i+=":"+e[t].meta.subId),'<li id="fn'+i+'" class="footnote-item">'}function s(){return"</li>\n"}function u(e,t,n,r,a){var i=a.rules.footnote_anchor_name(e,t,n,r,a);return e[t].meta.subId>0&&(i+=":"+e[t].meta.subId),' <a href="#fnref'+i+'" class="footnote-backref">↩︎</a>'}e.exports=function(e){var t=e.helpers.parseLinkLabel,n=e.utils.isSpace;e.renderer.rules.footnote_ref=i,e.renderer.rules.footnote_block_open=o,e.renderer.rules.footnote_block_close=c,e.renderer.rules.footnote_open=l,e.renderer.rules.footnote_close=s,e.renderer.rules.footnote_anchor=u,e.renderer.rules.footnote_caption=a,e.renderer.rules.footnote_anchor_name=r,e.block.ruler.before("reference","footnote_def",(function(e,t,r,a){var i,o,c,l,s,u,d,f,p,h,m,g=e.bMarks[t]+e.tShift[t],v=e.eMarks[t];if(g+4>v)return!1;if(91!==e.src.charCodeAt(g))return!1;if(94!==e.src.charCodeAt(g+1))return!1;for(s=g+2;s<v;s++){if(32===e.src.charCodeAt(s))return!1;if(93===e.src.charCodeAt(s))break}if(s===g+2)return!1;if(s+1>=v||58!==e.src.charCodeAt(++s))return!1;if(a)return!0;for(s++,e.env.footnotes||(e.env.footnotes={}),e.env.footnotes.refs||(e.env.footnotes.refs={}),u=e.src.slice(g+2,s-2),e.env.footnotes.refs[":"+u]=-1,(d=new e.Token("footnote_reference_open","",1)).meta={label:u},d.level=e.level++,e.tokens.push(d),i=e.bMarks[t],o=e.tShift[t],c=e.sCount[t],l=e.parentType,m=s,f=p=e.sCount[t]+s-(e.bMarks[t]+e.tShift[t]);s<v&&(h=e.src.charCodeAt(s),n(h));)9===h?p+=4-p%4:p++,s++;return e.tShift[t]=s-m,e.sCount[t]=p-f,e.bMarks[t]=m,e.blkIndent+=4,e.parentType="footnote",e.sCount[t]<e.blkIndent&&(e.sCount[t]+=e.blkIndent),e.md.block.tokenize(e,t,r,!0),e.parentType=l,e.blkIndent-=4,e.tShift[t]=o,e.sCount[t]=c,e.bMarks[t]=i,(d=new e.Token("footnote_reference_close","",-1)).level=--e.level,e.tokens.push(d),!0}),{alt:["paragraph","reference"]}),e.inline.ruler.after("image","footnote_inline",(function(e,n){var r,a,i,o,c=e.posMax,l=e.pos;return!(l+2>=c)&&(94===e.src.charCodeAt(l)&&(91===e.src.charCodeAt(l+1)&&(r=l+2,!((a=t(e,l+1))<0)&&(n||(e.env.footnotes||(e.env.footnotes={}),e.env.footnotes.list||(e.env.footnotes.list=[]),i=e.env.footnotes.list.length,e.md.inline.parse(e.src.slice(r,a),e.md,e.env,o=[]),e.push("footnote_ref","",0).meta={id:i},e.env.footnotes.list[i]={content:e.src.slice(r,a),tokens:o}),e.pos=a+1,e.posMax=c,!0))))})),e.inline.ruler.after("footnote_inline","footnote_ref",(function(e,t){var n,r,a,i,o=e.posMax,c=e.pos;if(c+3>o)return!1;if(!e.env.footnotes||!e.env.footnotes.refs)return!1;if(91!==e.src.charCodeAt(c))return!1;if(94!==e.src.charCodeAt(c+1))return!1;for(r=c+2;r<o;r++){if(32===e.src.charCodeAt(r))return!1;if(10===e.src.charCodeAt(r))return!1;if(93===e.src.charCodeAt(r))break}return r!==c+2&&(!(r>=o)&&(r++,n=e.src.slice(c+2,r-1),void 0!==e.env.footnotes.refs[":"+n]&&(t||(e.env.footnotes.list||(e.env.footnotes.list=[]),e.env.footnotes.refs[":"+n]<0?(a=e.env.footnotes.list.length,e.env.footnotes.list[a]={label:n,count:0},e.env.footnotes.refs[":"+n]=a):a=e.env.footnotes.refs[":"+n],i=e.env.footnotes.list[a].count,e.env.footnotes.list[a].count++,e.push("footnote_ref","",0).meta={id:a,subId:i,label:n}),e.pos=r,e.posMax=o,!0)))})),e.core.ruler.after("inline","footnote_tail",(function(e){var t,n,r,a,i,o,c,l,s,u,d=!1,f={};if(e.env.footnotes&&(e.tokens=e.tokens.filter((function(e){return"footnote_reference_open"===e.type?(d=!0,s=[],u=e.meta.label,!1):"footnote_reference_close"===e.type?(d=!1,f[":"+u]=s,!1):(d&&s.push(e),!d)})),e.env.footnotes.list)){for(o=e.env.footnotes.list,c=new e.Token("footnote_block_open","",1),e.tokens.push(c),t=0,n=o.length;t<n;t++){for((c=new e.Token("footnote_open","",1)).meta={id:t,label:o[t].label},e.tokens.push(c),o[t].tokens?(l=[],(c=new e.Token("paragraph_open","p",1)).block=!0,l.push(c),(c=new e.Token("inline","",0)).children=o[t].tokens,c.content=o[t].content,l.push(c),(c=new e.Token("paragraph_close","p",-1)).block=!0,l.push(c)):o[t].label&&(l=f[":"+o[t].label]),e.tokens=e.tokens.concat(l),i="paragraph_close"===e.tokens[e.tokens.length-1].type?e.tokens.pop():null,a=o[t].count>0?o[t].count:1,r=0;r<a;r++)(c=new e.Token("footnote_anchor","",0)).meta={id:t,subId:r,label:o[t].label},e.tokens.push(c);i&&e.tokens.push(i),c=new e.Token("footnote_close","",-1),e.tokens.push(c)}c=new e.Token("footnote_block_close","",-1),e.tokens.push(c)}}))}},function(e,t,n){"use strict";e.exports=function(e){e.inline.ruler.before("emphasis","ins",(function(e,t){var n,r,a,i,o=e.pos,c=e.src.charCodeAt(o);if(t)return!1;if(43!==c)return!1;if(a=(r=e.scanDelims(e.pos,!0)).length,i=String.fromCharCode(c),a<2)return!1;for(a%2&&(e.push("text","",0).content=i,a--),n=0;n<a;n+=2)e.push("text","",0).content=i+i,e.delimiters.push({marker:c,jump:n,token:e.tokens.length-1,level:e.level,end:-1,open:r.can_open,close:r.can_close});return e.pos+=r.length,!0})),e.inline.ruler2.before("emphasis","ins",(function(e){var t,n,r,a,i,o=[],c=e.delimiters,l=e.delimiters.length;for(t=0;t<l;t++)43===(r=c[t]).marker&&-1!==r.end&&(a=c[r.end],(i=e.tokens[r.token]).type="ins_open",i.tag="ins",i.nesting=1,i.markup="++",i.content="",(i=e.tokens[a.token]).type="ins_close",i.tag="ins",i.nesting=-1,i.markup="++",i.content="","text"===e.tokens[a.token-1].type&&"+"===e.tokens[a.token-1].content&&o.push(a.token-1));for(;o.length;){for(n=(t=o.pop())+1;n<e.tokens.length&&"ins_close"===e.tokens[n].type;)n++;t!==--n&&(i=e.tokens[n],e.tokens[n]=e.tokens[t],e.tokens[t]=i)}}))}},function(e,t,n){"use strict";e.exports=function(e){e.inline.ruler.before("emphasis","mark",(function(e,t){var n,r,a,i,o=e.pos,c=e.src.charCodeAt(o);if(t)return!1;if(61!==c)return!1;if(a=(r=e.scanDelims(e.pos,!0)).length,i=String.fromCharCode(c),a<2)return!1;for(a%2&&(e.push("text","",0).content=i,a--),n=0;n<a;n+=2)e.push("text","",0).content=i+i,e.delimiters.push({marker:c,jump:n,token:e.tokens.length-1,level:e.level,end:-1,open:r.can_open,close:r.can_close});return e.pos+=r.length,!0})),e.inline.ruler2.before("emphasis","mark",(function(e){var t,n,r,a,i,o=[],c=e.delimiters,l=e.delimiters.length;for(t=0;t<l;t++)61===(r=c[t]).marker&&-1!==r.end&&(a=c[r.end],(i=e.tokens[r.token]).type="mark_open",i.tag="mark",i.nesting=1,i.markup="==",i.content="",(i=e.tokens[a.token]).type="mark_close",i.tag="mark",i.nesting=-1,i.markup="==",i.content="","text"===e.tokens[a.token-1].type&&"="===e.tokens[a.token-1].content&&o.push(a.token-1));for(;o.length;){for(n=(t=o.pop())+1;n<e.tokens.length&&"mark_close"===e.tokens[n].type;)n++;t!==--n&&(i=e.tokens[n],e.tokens[n]=e.tokens[t],e.tokens[t]=i)}}))}},function(e,t,n){"use strict";var r=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function a(e,t){var n,a,i=e.posMax,o=e.pos;if(126!==e.src.charCodeAt(o))return!1;if(t)return!1;if(o+2>=i)return!1;for(e.pos=o+1;e.pos<i;){if(126===e.src.charCodeAt(e.pos)){n=!0;break}e.md.inline.skipToken(e)}return n&&o+1!==e.pos?(a=e.src.slice(o+1,e.pos)).match(/(^|[^\\])(\\\\)*\s/)?(e.pos=o,!1):(e.posMax=e.pos,e.pos=o+1,e.push("sub_open","sub",1).markup="~",e.push("text","",0).content=a.replace(r,"$1"),e.push("sub_close","sub",-1).markup="~",e.pos=e.posMax+1,e.posMax=i,!0):(e.pos=o,!1)}e.exports=function(e){e.inline.ruler.after("emphasis","sub",a)}},function(e,t,n){"use strict";var r=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function a(e,t){var n,a,i=e.posMax,o=e.pos;if(94!==e.src.charCodeAt(o))return!1;if(t)return!1;if(o+2>=i)return!1;for(e.pos=o+1;e.pos<i;){if(94===e.src.charCodeAt(e.pos)){n=!0;break}e.md.inline.skipToken(e)}return n&&o+1!==e.pos?(a=e.src.slice(o+1,e.pos)).match(/(^|[^\\])(\\\\)*\s/)?(e.pos=o,!1):(e.posMax=e.pos,e.pos=o+1,e.push("sup_open","sup",1).markup="^",e.push("text","",0).content=a.replace(r,"$1"),e.push("sup_close","sup",-1).markup="^",e.pos=e.posMax+1,e.posMax=i,!0):(e.pos=o,!1)}e.exports=function(e){e.inline.ruler.after("emphasis","sup",a)}},function(e,t,n){"use strict";e.exports={getResourceName:function(e){return e?"file"===e.type?"".concat(e.filename,".").concat(e.ext):e.filename:""}}},function(e,t,n){"use strict";var r=n(33),a=n(36);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),o=r(n(939)),c=r(n(37)),l=function(e,t){return i.createElement(c.default,Object.assign({},e,{ref:t,icon:o.default}))};l.displayName="CalendarOutlined";var s=i.forwardRef(l);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V460h656v380zM184 392V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v136H184z"}}]},name:"calendar",theme:"outlined"}},function(e,t,n){"use strict";var r=n(33),a=n(36);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),o=r(n(941)),c=r(n(37)),l=function(e,t){return i.createElement(c.default,Object.assign({},e,{ref:t,icon:o.default}))};l.displayName="SwapRightOutlined";var s=i.forwardRef(l);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M873.1 596.2l-164-208A32 32 0 00684 376h-64.8c-6.7 0-10.4 7.7-6.3 13l144.3 183H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h695.9c26.8 0 41.7-30.8 25.2-51.8z"}}]},name:"swap-right",theme:"outlined"}},function(e,t,n){"use strict";var r=n(81),a=new(n.n(r).a)("editor:pos"),i=".lake-editor-scroll-container",o=".lake-content-editor-extra",c=".lake-engine-view",l=".lake-sheet-scrollbar-x .lake-sheet-scrollbar-trigger",s=".lake-sheet-scrollbar-y .lake-sheet-scrollbar-trigger",u={storePosition:function(e,t){if(sessionStorage){var n=this._getStorageKey(e);sessionStorage.setItem(n,"".concat(t))}},storeSheetPosition:function(e,t){if(sessionStorage){var n=this._getStorageKey(e);sessionStorage.setItem("".concat(n,"-x"),"".concat(t.x)),sessionStorage.setItem("".concat(n,"-y"),"".concat(t.y))}},getStoredPosition:function(e){if(!sessionStorage)return-1;var t=this._getStorageKey(e),n=sessionStorage.getItem(t);return n?parseInt(n,10):-1},getSheetStoredPosition:function(e){if(!sessionStorage)return null;var t=this._getStorageKey(e),n=sessionStorage.getItem("".concat(t,"-x")),r=sessionStorage.getItem("".concat(t,"-y"));return n&&r?{x:parseFloat(n),y:parseFloat(r)}:null},clearStorage:function(e){if(sessionStorage){var t=this._getStorageKey(e);sessionStorage.removeItem(t)}},clearSheetStorage:function(e){if(sessionStorage){var t=this._getStorageKey(e);sessionStorage.removeItem("".concat(t,"-x")),sessionStorage.removeItem("".concat(t,"-y"))}},_getStorageKey:function(e){return"content-position-offset-".concat(e)}},d={saveReadPosition:function(e){var t=document.querySelector(c);if(t){var n=t.getBoundingClientRect(),r=0-n.top;a("top ",n.top),u.storePosition(e,r)}},letReaderFocusToMemorizedPosition:function(e){var t=u.getStoredPosition(e);t<=0||(window.scrollTo(0,t),u.clearStorage(e))},letEditorFocusToReadPosition:function(e){var t=u.getStoredPosition(e);if(!(t<=0)){var n=document.querySelector(i);if(n){var r=this._editorExtraAreaHeight()+t;a("restore position; ",{top:r,position:t}),n.scrollTop=r,u.clearStorage(e)}}},saveEditPosition:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"lake";if("lakesheet"!==t){var n=document.querySelector(i);if(n){var r=this._editorExtraAreaHeight(),a=n.scrollTop-r;a>32&&u.storePosition(e,n.scrollTop)}}else d.saveSheetPosition(e)},saveSheetPosition:function(e){var t=document.querySelector(l),n=document.querySelector(s);if(t&&n){var r={x:t.getAttribute("data-scroll"),y:n.getAttribute("data-scroll")};u.storeSheetPosition(e,r)}},getSheetStoredPosition:function(e){var t=u.getSheetStoredPosition(e);return t?(u.clearSheetStorage(e),t):null},_editorExtraAreaHeight:function(){var e=document.querySelector(o),t=0;return e&&(t=e.offsetHeight),t}};t.a=d},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(114);function a(e,t,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Object(r.a)(e)););return e}(e,t);if(a){var i=Object.getOwnPropertyDescriptor(a,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}},function(e,t,n){"use strict";var r=n(164),a=n.n(r).a.mac?"Command":"Ctrl",i=[{name:"bold",text:__("粗体"),keys:["Command","+","B"],icon:"editor-bold"},{name:"orderedlist",text:__("有序列表"),keys:["Command","+","Shift","+","7"],icon:"editor-orderedlist"},{name:"unorderedlist",text:__("无序列表"),keys:["Command","+","Shift","+","8"],icon:"editor-unorderedlist"},{name:"link",text:__("链接"),keys:["Command","+","K"],icon:"editor-link"},{name:"h3",text:__("标题3"),keys:["###","Space"],icon:"editor-h3"},{name:"h4",text:__("标题4"),keys:["####","Space"],icon:"editor-h4"},{name:"fullscreen",text:__("全屏编辑"),keys:[a,"+","Shift","+","F"]},{name:"submit",text:__("提交"),keys:[a,"+","Enter"]}];t.a=i},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,,,function(e,t,n){},,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return P})),n.d(t,"i",(function(){return F})),n.d(t,"h",(function(){return J})),n.d(t,"f",(function(){return ce})),n.d(t,"g",(function(){return me})),n.d(t,"e",(function(){return _e})),n.d(t,"k",(function(){return Te})),n.d(t,"d",(function(){return Ve})),n.d(t,"c",(function(){return Xe})),n.d(t,"j",(function(){return rt})),n.d(t,"a",(function(){return dt}));var r=n(62),a=n.n(r),i=n(1632),o=n(81),c=n.n(o),l=n(179),s=n(184),u=n.n(s),d=n(893),f=n.n(d),p=n(2652),h=n(124);function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var g=c()("editor:cache"),v=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.key=t}var t,n,r;return t=e,(n=[{key:"retrieve",value:function(){var e={format:null,value:null};g("[retrieve]key: ",this.key);var t=h.a.get(this.key);if(!t)return null;g("[retrieve]find text: ",t);var n=f.a.guessFormat(t);return e.format=n,e.value=t,g("[retrieve]doc: ",e),e}},{key:"put",value:function(e,t){g("[put]content cached: ","".concat(this.key," -> ").concat(e)),h.a.set(this.key,e)}},{key:"clear",value:function(){h.a.remove(this.key)}}])&&m(t.prototype,n),r&&m(t,r),e}();function y(e,t,n,r,a,i,o){try{var c=e[i](o),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){y(i,r,a,o,c,"next",e)}function c(e){y(i,r,a,o,c,"throw",e)}o(void 0)}))}}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=c()("biz:editor_base"),C=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};k(this,e),x(this,"getDefaultSuggestions",(function(){return t.options.getDefaultSuggestions?t.options.getDefaultSuggestions():[]})),x(this,"setEngine",(function(e){t._engine=e})),x(this,"getEngine",(function(){return t._engine})),x(this,"setValue",(function(e){return t._engine?t._engine.setValue(e):null})),x(this,"getValue",(function(){return t._engine?t._engine.getPureContent():t.getDefaultValue()})),x(this,"getSafetyValue",b(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.contentReady();case 2:return e.abrupt("return",t.getValue());case 3:case"end":return e.stop()}}),e)})))),x(this,"getHtml",(function(){return t._engine?t._engine.getPureHtml():null})),x(this,"focus",(function(e){if(!t._engine)return null;e?t._engine.focus():t._engine.focusToEnd()})),x(this,"scrollIntoView",(function(e){if(!t._engine)return null;t._engine.editArea[0].scrollIntoView(e)})),x(this,"contentReady",b(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._engine){e.next=2;break}return e.abrupt("return",null);case 2:return t._engine.event.trigger("save:before"),e.next=5,t._engine.asyncEvent.emitAsync("save:before");case 5:case"end":return e.stop()}}),e)})))),x(this,"saveAll",(function(){if(!t.options.disableCache){var e={format:a.a.FORMAT.LAKE,value:t.getValue(),html:t.getHtml()};t.saveToCache(e)}})),this.options=n,this.from=n.from||"reply",this.targetType=n.targetType,this.belong=n.belong,this.group=n.group,this.target=n.target,this.attachType=n.attachType,this.isEditMode=!!n.target,this.type=this.getType(),this.ctoken=Object(l.a)(window);var r=this.getCacheKey();this.cacheKeys={title:"".concat(r,"/title"),content:"".concat(r,"/content")},this.editorCache=new v(this.cacheKeys.content),this.uuid=this.getUuid(),this._engine=null,this.initialDocument=null,this.init()}var t,n,r;return t=e,r=[{key:"getEmptyDocument",value:function(){return{format:a.a.FORMAT.LAKE,value:null}}}],(n=[{key:"init",value:function(){this.initialDocument=this.getInitialDocument(),_("init use: ",this.initialDocument)}},{key:"getProps",value:function(){var e={target:this.target,format:this.getFormat(),attachType:this.attachType,defaultValue:this.getDefaultValue(),fileUploadUrl:this.getFileUploadUrl(),fileCopyUrl:this.getFileCopyUrl(),mentionActionUrl:p.a.patchGroupIdToUrl(this.getMentionActionUrl()),mentionActionOrigin:this.getMentionActionOrigin(),imageUploadUrl:this.getImageUploadUrl(),getDefaultSuggestions:this.getDefaultSuggestions,typography:this.getTypography(),viewport:this.getViewport(),sidebar:this.getSidebar(),enableWordCount:this.getEnableWordCount(),enableFullEditor:this.getEnableFullEditor(),hotKeys:this.getHotKeys(),cards:this.getCards(),blockedCards:this.getBlockedCards(),fullCards:this.getFullCards(),showShortcut:this.getShowShortcut(),cryptoUrl:this.getCryptoUrl(),videoUploadUrl:this.options.customVideoUploadUrl,videoUploadStatusUrl:this.options.customVideoUploadStatusUrl,thirdpartyCards:this.options.thirdpartyCards,allowMention:this.options.allowMention,allowResource:this.options.allowResource,allowResizeVideo:this.options.allowResizeVideo,focus:this.getAutoFocus(),disableYuqueCardEmbedView:this.options.disableYuqueCardEmbedView,defaultFormat:this.getDefaultFormat()},t=this.getToolbar();t&&(e.toolbar=t);var n=this.getMoreToolbar();return n&&(e.moreToolbar=n),e}},{key:"getType",value:function(){return this.options.type||"unknown"}},{key:"getAutoFocus",value:function(){var e=this.options.autoFocus;return null!=e?e:!!this.options.useMiniGuide}},{key:"getHotKeys",value:function(){return["bold","orderedlist","unorderedlist","link","h3","h4","fullscreen","submit"]}},{key:"getEnableWordCount",value:function(){return!0}},{key:"getEnableFullEditor",value:function(){return!0}},{key:"getShowShortcut",value:function(){return!window.h5&&!(this.options.useMiniGuide||this.options.isMiniSize)}},{key:"getCards",value:function(){return["image","label","yuque"]}},{key:"getBlockedCards",value:function(){return["video","vote","audio"]}},{key:"getFullCards",value:function(){return null}},{key:"getUuid",value:function(){var e=this.cacheKeys.uuid,t=h.a.get(e);return t||(t=u()(32)+u()(32),h.a.set(e,t)),t}},{key:"getSidebar",value:function(){return this.options.sidebar||"none"}},{key:"getTypography",value:function(){return this.options.typography||"traditional"}},{key:"getViewport",value:function(){return this.options.viewport||"adapt"}},{key:"getDefaultFormat",value:function(){return a.a.FORMAT.LAKE}},{key:"getFormat",value:function(){var e=this.options.format;return e||this.initialDocument.format}},{key:"getInitialDocument",value:function(){if(this.initialDocument)return this.initialDocument;var e=this.loadFromCache();if(_("cached document:",e),this.isEditMode){var t=this.getContentObject();return _("adapted content: ",t),e&&(_("merge with cached content",e),t.format=e.format||t.format,t.title=e.title||t.title,t.value=e.value||t.value),t}if(e)return e.format=e.format||this.getDefaultFormat(),e;var n=this.loadFromUrl();return n||{format:this.getDefaultFormat(),title:null,value:null}}},{key:"getContentObject",value:function(e){return{format:(e=e||this.target||{}).format||this.getDefaultFormat(),title:e.title||e.name||"",value:e.value||e.body_asl||e.content}}},{key:"getDefaultValue",value:function(){var e=this.options.defaultValue;return e||this.initialDocument.value}},{key:"getToolbar",value:function(){return null}},{key:"getMoreToolbar",value:function(){return null}},{key:"getFileUploadUrl",value:function(){var e="/api/upload/attach?ctoken=".concat(this.ctoken,"&type=attachment");return this.isEditMode&&!this.options.useBelongAttach?"".concat(e,"&attachable_type=").concat(this.attachType,"&attachable_id=").concat(this.target.id,"&from=").concat(this.from):this.belong?"".concat(e,"&attachable_type=").concat(this.attachType,"&attachable_id=").concat(this.belong.id,"&from=").concat(this.from):null}},{key:"getFileCopyUrl",value:function(){return null}},{key:"getImageUploadUrl",value:function(){var e=this.getFileUploadUrl();return e?e.replace("&type=attachment","&type=image"):null}},{key:"getMentionActionUrl",value:function(){var e="";return this.isEditMode&&!this.options.useBelongAttach?e="/api/users/complete?target_type=".concat(this.attachType,"&target_id=").concat(this.target.id):this.belong&&(e="/api/users/complete?target_type=".concat(this.attachType,"&target_id=").concat(this.belong.id)),e}},{key:"getMentionActionOrigin",value:function(){return this.options.customMentionOrigin}},{key:"getCryptoUrl",value:function(){return"/api/services/crypto"}},{key:"saveToCache",value:function(e){_("save to cache:",e),e.format&&(e.title&&h.a.set(this.cacheKeys.title,e.title),this.needCacheContent(e)?this.editorCache.put(e.value,e.format):_("value is empty or the same as origin, ignore cache"))}},{key:"needCacheContent",value:function(e){if(!e.value)return!1;if(f.a.isBlank(e))return this.editorCache.clear(),!1;if(!this.target)return!0;var t=this.getContentObject();return!f.a.isContentSame(e.format,t.value,e.value)}},{key:"reset",value:function(){var e=this;_("reset editor, clear cache"),Object.keys(this.cacheKeys).forEach((function(t){h.a.remove(e.cacheKeys[t])})),this._engine&&this._engine.reset("<p><br /></p>")}},{key:"isContentChanged",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e){var t=this.loadFromCache();t&&(e=t.value)}if(!this.target)return!0;var n="<cursor />",r=this.target.body_asl;return r.trim().replace(n,"")!==e.trim().replace(n,"")}},{key:"getCacheKey",value:function(){return this.isEditMode&&this.target&&this.belong?"autosave/".concat(this.type,"/").concat(this.belong.id,"/").concat(this.target.id,"/edit"):this.belong?"autosave/".concat(this.type,"/").concat(this.belong.id,"/new"):"autosave/".concat(this.type)}},{key:"loadFromUrl",value:function(){}},{key:"loadFromCache",value:function(){var e=!1,t={format:null,title:null,value:null},n=this.editorCache.retrieve();if(n&&(e=!0,t.format=n.format,t.value=n.value),this.cacheKeys.title){var r=h.a.get(this.cacheKeys.title);r&&(e=!0,t.title=r)}return e?t:null}},{key:"getdisableYuqueCardEmbedView",value:function(){return this.options.disableYuqueCardEmbedView}}])&&w(t.prototype,n),r&&w(t,r),e}();function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=T(e);if(t){var a=T(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return A(this,n)}}function A(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(c,e);var t,n,r,o=D(c);function c(){return O(this,c),o.apply(this,arguments)}return t=c,r=[{key:"getEmptyDocument",value:function(){return{format:a.a.FORMAT.LAKE,value:null}}}],(n=[{key:"getType",value:function(){var e=this.options.targetType;return e?"".concat(e,"_comment").toLowerCase():"comment"}},{key:"getToolbar",value:function(){return window.h5||this.options.useMiniGuide||this.options.isMiniSize?[["card","bold","orderedlist","unorderedlist","link","emoji"]]:[["card","heading","bold","orderedlist","unorderedlist","link","emoji"]]}},{key:"getMoreToolbar",value:function(){return null}},{key:"getDefaultFormat",value:function(){return i.a.getDefaultDocumentFormat(a.a.TYPE.TOPIC)}}])&&S(t.prototype,n),r&&S(t,r),c}(C),j=n(2653);function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=B(e);if(t){var a=B(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return z(this,n)}}function z(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(c,e);var t,n,r,o=I(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this,e)).isEditMode||(t.cacheKeys.uuid="autosave/topics/".concat(e.belong.id,"/uuid")),t}return t=c,(n=[{key:"getType",value:function(){return"topic"}},{key:"getToolbar",value:function(){return[["card","heading","bold","orderedlist","unorderedlist","link"]]}},{key:"getContentObject",value:function(e){var t={title:(e=e||this.target||{}).title||"",format:a.a.FORMAT.LAKE,value:null};return e.format===a.a.FORMAT.LAKE?(t.value=e.body_asl,t):(t.format=e.format,t.value=e.body_asl||e.body,t)}},{key:"getDefaultFormat",value:function(){return i.a.getDefaultDocumentFormat(a.a.TYPE.TOPIC)}},{key:"getFileUploadUrl",value:function(){var e="/api/upload/attach?ctoken=".concat(this.ctoken,"&type=attachment&from=").concat(this.from);return this.target?"".concat(e,"&attachable_type=Topic&attachable_id=").concat(this.target.id):"".concat(e,"&attachable_uuid=").concat(this.uuid,"&attachable_type=User&attachable_id=").concat(this.belong.id)}},{key:"getFileCopyUrl",value:function(){var e="/api/upload/copy?type=attachment&from=".concat(this.from);return this.target?"".concat(e,"&attachable_type=Topic&attachable_id=").concat(this.target.id):"".concat(e,"&attachable_uuid=").concat(this.uuid)}},{key:"getMentionActionUrl",value:function(){return this.target?"/api/users/complete?target_type=Topic&target_id=".concat(this.target.id):"/api/users/complete?target_type=Group&target_id=".concat(this.belong.id)}},{key:"loadFromUrl",value:function(){var e={format:a.a.FORMAT.MARKDOWN,title:null,value:null},t={},n=!1;if(["title","body"].forEach((function(e){var r=Object(j.g)(e);r&&(t[e]=r,n=!0)})),!n)return null;if(e.title=t.title,t.body){var r=t.body.replace(/</g,"&lt;").replace(/>/g,"&gt;");e.value=r}return e}}])&&N(t.prototype,n),r&&N(t,r),c}(C),V=n(22),U=n.n(V);function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Z(e);if(t){var a=Z(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return $(this,n)}}function $(e,t){return!t||"object"!==q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Q={daily:{title:"#prefix# #day# 日报汇总",content:'<!doctype lake><meta name="doc-version" content="1" /><p>建议 TL 每天组织日会，将一天的重点事项安排于此</p><p>每位同学下班前，在此提交日报</p><p><br /></p><p>日报不要记流水账，尽量在 200 字以内</p><p>重点项目或工作要及时总结和提报，尤其风险点要及时提报</p><p>可以写写思考和感想</p><p><br /></p><p>写完自己的日报，也看看大家的</p><p>每一位同学的努力，都值得认真阅读与交流</p><p><br /></p><p><span style="color: #FA541C;"><span>注意不要提及保密项目和敏感数据</span></span></p>'},weekly:{title:"#prefix# #day# 周报汇总",content:'<!doctype lake><meta name="doc-version" content="1" /><p>将一周的工作总结回复于此</p><p><br /></p><p>不要记流水账，尽量在 800 字以内</p><p>重点项目或工作要及时总结和提报，尤其风险点要及时提报</p><p>可以写写思考和感想</p><p><br /></p><p>写完自己的周报，也看看大家的</p><p>每一位同学的努力，都值得认真阅读与交流</p><p><br /></p><p><span style="color: #FA541C;"><span>注意不要提及保密项目和敏感数据</span></span></p>'},vote:{title:"一起来投票吧",content:'<!doctype lake><meta name="doc-version" content="1" /><card type="block" name="vote" value="data:%7B%22margin%22%3Atrue%2C%22id%22%3A%22jTHWG%22%2C%22type%22%3A%22single%22%7D"></card><p><br /><cursor /></p>'},default:{title:"",content:"<!doctype lake><p></p>"}},J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(i,e);var t,n,r,a=X(i);function i(){return Y(this,i),a.apply(this,arguments)}return t=i,r=[{key:"getTemplate",value:function(e,t){var n=Q[e];if(!n)return{title:null,content:null};var r=U()(new Date).format("YYYY-MM-DD"),a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){W(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);return a.title=a.title.replace("#prefix#",t),a.title=a.title.replace("#day#",r),a}}],(n=[{key:"getType",value:function(){return"thread"}},{key:"getToolbar",value:function(){return window.h5?[["undo","redo","bold","unorderedlist","orderedlist","link"]]:[["card","heading","bold","orderedlist","unorderedlist","link"]]}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete?target_type=Group&target_id=".concat(this.group.id)}},{key:"getFileUploadUrl",value:function(){var e="/api/upload/attach?ctoken=".concat(this.ctoken,"&type=attachment");return this.isEditMode?"".concat(e,"&attachable_type=").concat(this.attachType,"&attachable_id=").concat(this.target.id,"&from=").concat(this.from):this.group?"".concat(e,"&attachable_type=User&attachable_id=").concat(this.group.id,"&from=").concat(this.from):null}},{key:"getFileCopyUrl",value:function(){var e="/api/upload/copy?type=attachment";return this.isEditMode?"".concat(e,"&attachable_type=").concat(this.attachType,"&attachable_id=").concat(this.target.id,"&from=").concat(this.from):"".concat(e,"&attachable_uuid=").concat(this.uuid,"&from=").concat(this.from)}},{key:"getCards",value:function(){return["image","label","vote","yuque"]}},{key:"getBlockedCards",value:function(){return["audio"]}}])&&G(t.prototype,n),r&&G(t,r),i}(C);function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=oe(e);if(t){var a=oe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ie(this,n)}}function ie(e,t){return!t||"object"!==ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(i,e);var t,n,r,a=ae(i);function i(){return te(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"getType",value:function(){return"thread_board"}},{key:"getAutoFocus",value:function(){return!0}},{key:"getToolbar",value:function(){return[["card","heading","bold","orderedlist","unorderedlist","link"]]}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete?target_type=Group&target_id=".concat(this.group.id)}}])&&ne(t.prototype,n),r&&ne(t,r),i}(C);function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function de(e,t){return(de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=he(e);if(t){var a=he(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return pe(this,n)}}function pe(e,t){return!t||"object"!==le(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function he(e){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(i,e);var t,n,r,a=fe(i);function i(){return se(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"getType",value:function(){return"thread_comment"}}])&&ue(t.prototype,n),r&&ue(t,r),i}(P);function ge(e){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ye(e,t,n){return(ye="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xe(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function be(e,t){return(be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xe(e);if(t){var a=xe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return we(this,n)}}function we(e,t){return!t||"object"!==ge(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xe(e){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}(i,e);var t,n,r,a=ke(i);function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e.target&&(e.attachType="Doclet"),a.call(this,e)}return t=i,(n=[{key:"getToolbar",value:function(){return[["card"]]}},{key:"getCards",value:function(){return this.options.target?ye(xe(i.prototype),"getCards",this).call(this):["label"]}},{key:"getFullCards",value:function(){return this.options.target?ye(xe(i.prototype),"getFullCards",this).call(this):["label"]}},{key:"getAutoFocus",value:function(){return!0}},{key:"getEnableWordCount",value:function(){return!1}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete"}}])&&ve(t.prototype,n),r&&ve(t,r),i}(C);function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ae(e);if(t){var a=Ae(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return De(this,n)}}function De(e,t){return!t||"object"!==Ce(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Se(e,t)}(i,e);var t,n,r,a=Re(i);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ee(this,i),e.attachType="Doc",e.useBelongAttach=!0,e.from="reply",e.disableCache=!0,a.call(this,e)}return t=i,(n=[{key:"getType",value:function(){return"word_comment"}},{key:"getAutoFocus",value:function(){return!0}},{key:"getShowShortcut",value:function(){return!1}},{key:"getEnableFullEditor",value:function(){return!1}},{key:"getToolbar",value:function(){return[["bold","orderedlist","unorderedlist","link"]]}}])&&Oe(t.prototype,n),r&&Oe(t,r),i}(P),Pe=n(2650);function je(e){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ne(e,t,n){return(Ne="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Be(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function Le(e,t){return(Le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Be(e);if(t){var a=Be(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ze(this,n)}}function ze(e,t){return!t||"object"!==je(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Be(e){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Fe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Le(e,t)}(i,e);var t,n,r,a=Ie(i);function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e.attachType="Doc",a.call(this,e)}return t=i,(n=[{key:"getType",value:function(){return"doc"}},{key:"getEnableFullEditor",value:function(){return!0}},{key:"getBlockedCards",value:function(){return[]}},{key:"getToolbar",value:function(){return window.h5?[["card","undo","redo","bold","unorderedlist","orderedlist","link"]]:[["card","heading","bold","orderedlist","unorderedlist","link"]]}},{key:"getCards",value:function(){return this.options.cards}},{key:"getFullCards",value:function(){return this.options.fullCards}},{key:"getViewport",value:function(){return this.options.viewport?this.options.viewport:this._getEditorMetaDraft().viewport||this.belong.doc_viewport}},{key:"getTypography",value:function(){return this.options.typography?this.options.typography:this._getEditorMetaDraft().typography||this.belong.doc_typography}},{key:"_getEditorMetaDraft",value:function(){var e={};if(this.target&&this.target.editor_meta_draft)try{e=JSON.parse(this.target.editor_meta_draft)}catch(t){e={}}return e}},{key:"getImageUploadUrl",value:function(){var e=this.options.customUploadUrl;if(this._getCustomTypes().includes("image")){var t=e.includes("?")?"&":"?";return"".concat(e).concat(t).concat(this._getCustomCsrf())}return Ne(Be(i.prototype),"getImageUploadUrl",this).call(this)}},{key:"getFileUploadUrl",value:function(){var e=this.options.customUploadUrl;if(this._getCustomTypes().includes("attachment")){var t=e.includes("?")?"&":"?";return"".concat(e).concat(t).concat(this._getCustomCsrf())}return Ne(Be(i.prototype),"getFileUploadUrl",this).call(this)}},{key:"getMentionActionUrl",value:function(){var e=this.options.customMentionUrl;if(e){var t=e.includes("?")?"&":"?";return"".concat(e).concat(t).concat(this._getCustomCsrf())}return Ne(Be(i.prototype),"getMentionActionUrl",this).call(this)}},{key:"_getCustomTypes",value:function(){var e=this.options,t=e.customUploadUrl,n=e.customUploadTypes;return t&&/^https?:\/\//.test(t)&&n?n.split(",").map((function(e){return e.trim()})).filter((function(e){return!!e})):[]}},{key:"_getCustomCsrf",value:function(){var e=this.options,t=e.customCsrfKey,n=e.customCsrfValue;return t?"".concat(t,"=").concat(n):""}}])&&Me(t.prototype,n),r&&Me(t,r),i}(C);Fe.getInstanceByDoc=function(e){var t,n,r,a=e.group,i=e.doc,o=e.book,c=e.config;return new Fe({target:i,belong:o,cards:c.cards,fullCards:c.cards,viewport:c.viewport,sidebar:c.sidebar,thirdpartyCards:c.thirdpartyCards,getDefaultSuggestions:function(){return Pe.a.defaultMentionUsers(a,o)},allowMention:c.allowMention,allowResource:c.allowResource,allowResizeVideo:c.allowResizeVideo,customMentionUrl:c.customMentionUrl,customMentionOrigin:c.customMentionOrigin,customUploadUrl:c.customUploadUrl,customUploadTypes:c.customUploadTypes,customVideoUploadUrl:c.videoUploadUrl,customVideoUploadStatusUrl:c.videoUploadStatusUrl,customCsrf:(t={},n=c.customCsrfKey,r=c.customCsrfValue,n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t)})};var Ve=Fe;function Ue(e){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function He(e,t,n){return(He="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ke(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function We(e,t){return(We=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ke(e);if(t){var a=Ke(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ge(this,n)}}function Ge(e,t){return!t||"object"!==Ue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ke(e){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Xe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&We(e,t)}(i,e);var t,n,r,a=Ye(i);function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e.from="group_custom",e.attachType="User",e.useBelongAttach=!0,a.call(this,e)}return t=i,(n=[{key:"getType",value:function(){return"group_custom"}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete?target_type=Group&target_id=".concat(this.group.id)}},{key:"getShowShortcut",value:function(){return!this.options.small&&!this.options.useMiniGuide}},{key:"getToolbar",value:function(){return window.h5?[["undo","redo","bold","unorderedlist","orderedlist","link"]]:[["card","bold","orderedlist","unorderedlist","link"]]}},{key:"getCards",value:function(){return this.options.target?He(Ke(i.prototype),"getCards",this).call(this):["label"]}},{key:"getFullCards",value:function(){return this.options.target?He(Ke(i.prototype),"getFullCards",this).call(this):["label"]}},{key:"getAutoFocus",value:function(){return!0}},{key:"getEnableWordCount",value:function(){return!1}}])&&qe(t.prototype,n),r&&qe(t,r),i}(C);function $e(e){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qe(e,t,n){return(Qe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nt(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function Je(e,t){return(Je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nt(e);if(t){var a=nt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return tt(this,n)}}function tt(e,t){return!t||"object"!==$e(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nt(e){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Je(e,t)}(i,e);var t,n,r,a=et(i);function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e.attachType="User",e.useBelongAttach=!0,a.call(this,e)}return t=i,(n=[{key:"getMentionActionUrl",value:function(){return"/api/users/complete"}},{key:"getShowShortcut",value:function(){return!this.options.small&&!this.options.useMiniGuide}},{key:"getToolbar",value:function(){return window.h5?[["undo","redo","bold","unorderedlist","orderedlist","link"]]:[["card","bold","orderedlist","unorderedlist","link"]]}},{key:"getCards",value:function(){return this.options.target?Qe(nt(i.prototype),"getCards",this).call(this):["label"]}},{key:"getFullCards",value:function(){return this.options.target?Qe(nt(i.prototype),"getFullCards",this).call(this):["label"]}},{key:"getAutoFocus",value:function(){return!0}},{key:"getEnableWordCount",value:function(){return!1}}])&&Ze(t.prototype,n),r&&Ze(t,r),i}(C);function at(e){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function it(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ct(e,t){return(ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ut(e);if(t){var a=ut(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return st(this,n)}}function st(e,t){return!t||"object"!==at(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ut(e){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var dt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ct(e,t)}(i,e);var t,n,r,a=lt(i);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return it(this,i),e.attachType="Resource",e.useBelongAttach=!0,e.from="reply",a.call(this,e)}return t=i,(n=[{key:"getType",value:function(){return"area_comment"}},{key:"getAutoFocus",value:function(){return!0}},{key:"getShowShortcut",value:function(){return!1}},{key:"getToolbar",value:function(){return[["card","bold","orderedlist","unorderedlist","link"]]}},{key:"getMoreToolbar",value:function(){return null}}])&&ot(t.prototype,n),r&&ot(t,r),i}(P)},,function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(1996))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},,,,,,,function(e,t,n){"use strict";e.exports={getSafeBlankLinkProps:function(e){return e?{target:"_blank",rel:"noopener noreferrer nofollow"}:{}},sanitizeUrl:function(e){return"string"!=typeof e||this._isURLProtocolValid(e)?e:""},_isURLProtocolValid:function(e){var t=e.toLowerCase();return!!["http:","https:","data:","dingtalk:"].some((function(e){return t.startsWith(e)}))||(!(!t.startsWith("./")&&!t.startsWith("/"))||-1===t.indexOf(":"))}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=function(e){}},function(e,t,n){"use strict";var r=n(33),a=n(36);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),o=r(n(1521)),c=r(n(37)),l=function(e,t){return i.createElement(c.default,Object.assign({},e,{ref:t,icon:o.default}))};l.displayName="RedoOutlined";var s=i.forwardRef(l);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"}},function(e,t,n){"use strict";var r=n(33),a=n(36);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),o=r(n(1523)),c=r(n(37)),l=function(e,t){return i.createElement(c.default,Object.assign({},e,{ref:t,icon:o.default}))};l.displayName="DeleteOutlined";var s=i.forwardRef(l);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"}},function(e,t,n){"use strict";var r=n(33),a=n(36);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),o=r(n(1525)),c=r(n(37)),l=function(e,t){return i.createElement(c.default,Object.assign({},e,{ref:t,icon:o.default}))};l.displayName="DownloadOutlined";var s=i.forwardRef(l);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"}},function(e,t,n){"use strict";var r=n(33),a=n(36);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),o=r(n(1527)),c=r(n(37)),l=function(e,t){return i.createElement(c.default,Object.assign({},e,{ref:t,icon:o.default}))};l.displayName="PictureTwoTone";var s=i.forwardRef(l);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2z",fill:e}},{tag:"path",attrs:{d:"M424.6 765.8l-150.1-178L136 752.1V792h752v-30.4L658.1 489z",fill:t}},{tag:"path",attrs:{d:"M136 652.7l132.4-157c3.2-3.8 9-3.8 12.2 0l144 170.7L652 396.8c3.2-3.8 9-3.8 12.2 0L888 662.2V232H136v420.7zM304 280a88 88 0 110 176 88 88 0 010-176z",fill:t}},{tag:"path",attrs:{d:"M276 368a28 28 0 1056 0 28 28 0 10-56 0z",fill:t}},{tag:"path",attrs:{d:"M304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z",fill:e}}]}},name:"picture",theme:"twotone"}},function(e,t,n){"use strict";var r=n(33),a=n(36);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),o=r(n(1529)),c=r(n(37)),l=function(e,t){return i.createElement(c.default,Object.assign({},e,{ref:t,icon:o.default}))};l.displayName="FileTwoTone";var s=i.forwardRef(l);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M534 352V136H232v752h560V394H576a42 42 0 01-42-42z",fill:t}},{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602 137.8L790.2 326H602V137.8zM792 888H232V136h302v216a42 42 0 0042 42h216v494z",fill:e}}]}},name:"file",theme:"twotone"}},function(e,t,n){"use strict";var r=n(33),a=n(36);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),o=r(n(1531)),c=r(n(37)),l=function(e,t){return i.createElement(c.default,Object.assign({},e,{ref:t,icon:o.default}))};l.displayName="PaperClipOutlined";var s=i.forwardRef(l);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z"}}]},name:"paper-clip",theme:"outlined"}},function(e,t,n){"use strict";var r=n(33),a=n(36);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),o=r(n(1533)),c=r(n(37)),l=function(e,t){return i.createElement(c.default,Object.assign({},e,{ref:t,icon:o.default}))};l.displayName="ReloadOutlined";var s=i.forwardRef(l);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"}},function(e,t,n){"use strict";var r=n(33),a=n(36);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),o=r(n(1535)),c=r(n(37)),l=function(e,t){return i.createElement(c.default,Object.assign({},e,{ref:t,icon:o.default}))};l.displayName="AlipayCircleOutlined";var s=i.forwardRef(l);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M308.6 545.7c-19.8 2-57.1 10.7-77.4 28.6-61 53-24.5 150 99 150 71.8 0 143.5-45.7 199.8-119-80.2-38.9-148.1-66.8-221.4-59.6zm460.5 67c100.1 33.4 154.7 43 166.7 44.8A445.9 445.9 0 00960 512c0-247.4-200.6-448-448-448S64 264.6 64 512s200.6 448 448 448c155.9 0 293.2-79.7 373.5-200.5-75.6-29.8-213.6-85-286.8-120.1-69.9 85.7-160.1 137.8-253.7 137.8-158.4 0-212.1-138.1-137.2-229 16.3-19.8 44.2-38.7 87.3-49.4 67.5-16.5 175 10.3 275.7 43.4 18.1-33.3 33.4-69.9 44.7-108.9H305.1V402h160v-56.2H271.3v-31.3h193.8v-80.1s0-13.5 13.7-13.5H557v93.6h191.7v31.3H557.1V402h156.4c-15 61.1-37.7 117.4-66.2 166.8 47.5 17.1 90.1 33.3 121.8 43.9z"}}]},name:"alipay-circle",theme:"outlined"}},function(e,t,n){"use strict";var r=n(33),a=n(36);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),o=r(n(1537)),c=r(n(37)),l=function(e,t){return i.createElement(c.default,Object.assign({},e,{ref:t,icon:o.default}))};l.displayName="QuestionCircleOutlined";var s=i.forwardRef(l);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"}},function(e,t,n){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;function a(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function i(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var n,a,o=[];for(a in"string"!=typeof t&&(t="?"),e)if(r.call(e,a)){if((n=e[a])||null!=n&&!isNaN(n)||(n=""),a=i(a),n=i(n),null===a||null===n)continue;o.push(a+"="+n)}return o.length?t+o.join("&"):""},t.parse=function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,r={};t=n.exec(e);){var i=a(t[1]),o=a(t[2]);null===i||null===o||i in r||(r[i]=o)}return r}},function(e,t,n){"use strict";var r=n(33),a=n(36);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),o=r(n(1541)),c=r(n(37)),l=function(e,t){return i.createElement(c.default,Object.assign({},e,{ref:t,icon:o.default}))};l.displayName="ArrowRightOutlined";var s=i.forwardRef(l);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,a.default)(e),parseInt(e,t||10)};var r,a=(r=n(46))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,a.default)(e),t)return"1"===e||"true"===e;return"0"!==e&&"false"!==e&&""!==e};var r,a=(r=n(46))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,a.default)(e),e===t};var r,a=(r=n(46))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,r.default)(e),e.indexOf((0,a.default)(t))>=0};var r=i(n(46)),a=i(n(584));function i(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){(0,a.default)(e),"[object RegExp]"!==Object.prototype.toString.call(t)&&(t=new RegExp(t,n));return t.test(e)};var r,a=(r=n(46))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,r.default)(e),(t=(0,a.default)(t,s)).require_display_name||t.allow_display_name){var n=e.match(u);if(n)e=n[1];else if(t.require_display_name)return!1}var l=e.split("@"),g=l.pop(),v=l.join("@"),y=g.toLowerCase();if(t.domain_specific_validation&&("gmail.com"===y||"googlemail.com"===y)){var b=(v=v.toLowerCase()).split("+")[0];if(!(0,i.default)(b.replace(".",""),{min:6,max:30}))return!1;for(var k=b.split("."),w=0;w<k.length;w++)if(!f.test(k[w]))return!1}if(!(0,i.default)(v,{max:64})||!(0,i.default)(g,{max:254}))return!1;if(!(0,o.default)(g,{require_tld:t.require_tld})){if(!t.allow_ip_domain)return!1;if(!(0,c.default)(g)){if(!g.startsWith("[")||!g.endsWith("]"))return!1;var x=g.substr(1,g.length-2);if(0===x.length||!(0,c.default)(x))return!1}}if('"'===v[0])return v=v.slice(1,v.length-1),t.allow_utf8_local_part?m.test(v):p.test(v);for(var _=t.allow_utf8_local_part?h:d,C=v.split("."),E=0;E<C.length;E++)if(!_.test(C[E]))return!1;return!0};var r=l(n(46)),a=l(n(307)),i=l(n(878)),o=l(n(585)),c=l(n(515));function l(e){return e&&e.__esModule?e:{default:e}}var s={allow_display_name:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0},u=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\.\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\,\.\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\s]*<(.+)>$/i,d=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,f=/^[a-z\d]+$/,p=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,h=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,m=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i;e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,r.default)(e),!e||e.length>=2083||/[\s<>]/.test(e))return!1;if(0===e.indexOf("mailto:"))return!1;var n,c,d,f,p,h,m,g;if(t=(0,o.default)(t,l),m=e.split("#"),e=m.shift(),m=e.split("?"),e=m.shift(),(m=e.split("://")).length>1){if(n=m.shift().toLowerCase(),t.require_valid_protocol&&-1===t.protocols.indexOf(n))return!1}else{if(t.require_protocol)return!1;if("//"===e.substr(0,2)){if(!t.allow_protocol_relative_urls)return!1;m[0]=e.substr(2)}}if(""===(e=m.join("://")))return!1;if(m=e.split("/"),""===(e=m.shift())&&!t.require_host)return!0;if((m=e.split("@")).length>1){if(t.disallow_auth)return!1;if((c=m.shift()).indexOf(":")>=0&&c.split(":").length>2)return!1}f=m.join("@"),h=null,g=null;var v=f.match(s);v?(d="",g=v[1],h=v[2]||null):(m=f.split(":"),d=m.shift(),m.length&&(h=m.join(":")));if(null!==h&&(p=parseInt(h,10),!/^[0-9]+$/.test(h)||p<=0||p>65535))return!1;if(!((0,i.default)(d)||(0,a.default)(d,t)||g&&(0,i.default)(g,6)))return!1;if(d=d||g,t.host_whitelist&&!u(d,t.host_whitelist))return!1;if(t.host_blacklist&&u(d,t.host_blacklist))return!1;return!0};var r=c(n(46)),a=c(n(585)),i=c(n(515)),o=c(n(307));function c(e){return e&&e.__esModule?e:{default:e}}var l={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1},s=/^\[([^\]]+)\](?::([0-9]+))?$/;function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(e===r||(a=r,"[object RegExp]"===Object.prototype.toString.call(a)&&r.test(e)))return!0}var a;return!1}e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,a.default)(e),t&&t.no_colons)return o.test(e);return i.test(e)};var r,a=(r=n(46))&&r.__esModule?r:{default:r};var i=/^([0-9a-fA-F][0-9a-fA-F]:){5}([0-9a-fA-F][0-9a-fA-F])$/,o=/^([0-9a-fA-F]){12}$/;e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,r.default)(e);var t=e.split("/");if(2!==t.length)return!1;if(!o.test(t[1]))return!1;if(t[1].length>1&&t[1].startsWith("0"))return!1;return(0,a.default)(t[0],4)&&t[1]<=32&&t[1]>=0};var r=i(n(46)),a=i(n(515));function i(e){return e&&e.__esModule?e:{default:e}}var o=/^\d{1,2}$/;e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),["true","false","1","0"].indexOf(e)>=0};var r,a=(r=n(46))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";if((0,a.default)(e),t in i.alpha)return i.alpha[t].test(e);throw new Error("Invalid locale '".concat(t,"'"))},t.locales=void 0;var r,a=(r=n(46))&&r.__esModule?r:{default:r},i=n(516);var o=Object.keys(i.alpha);t.locales=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";if((0,a.default)(e),t in i.alphanumeric)return i.alphanumeric[t].test(e);throw new Error("Invalid locale '".concat(t,"'"))},t.locales=void 0;var r,a=(r=n(46))&&r.__esModule?r:{default:r},i=n(516);var o=Object.keys(i.alphanumeric);t.locales=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,a.default)(e),t&&t.no_symbols)return o.test(e);return i.test(e)};var r,a=(r=n(46))&&r.__esModule?r:{default:r};var i=/^[+-]?([0-9]*[.])?[0-9]+$/,o=/^[0-9]+$/;e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e,{min:0,max:65535})};var r,a=(r=n(879))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),e===e.toLowerCase()};var r,a=(r=n(46))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),e===e.toUpperCase()};var r,a=(r=n(46))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),i.test(e)};var r,a=(r=n(46))&&r.__esModule?r:{default:r};var i=/^[\x00-\x7F]+$/;e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),i.fullWidth.test(e)&&o.halfWidth.test(e)};var r,a=(r=n(46))&&r.__esModule?r:{default:r},i=n(880),o=n(881);e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),i.test(e)};var r,a=(r=n(46))&&r.__esModule?r:{default:r};var i=/[^\x00-\x7F]/;e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),i.test(e)};var r,a=(r=n(46))&&r.__esModule?r:{default:r};var i=/[\uD800-\uDBFF][\uDC00-\uDFFF]/;e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,a.default)(e),t=t||{};var n=new RegExp("^(?:[-+])?(?:[0-9]+)?(?:\\".concat(t.locale?i.decimal[t.locale]:".","[0-9]*)?(?:[eE][\\+\\-]?(?:[0-9]+))?$"));if(""===e||"."===e||"-"===e||"+"===e)return!1;var r=parseFloat(e.replace(",","."));return n.test(e)&&(!t.hasOwnProperty("min")||r>=t.min)&&(!t.hasOwnProperty("max")||r<=t.max)&&(!t.hasOwnProperty("lt")||r<t.lt)&&(!t.hasOwnProperty("gt")||r>t.gt)},t.locales=void 0;var r,a=(r=n(46))&&r.__esModule?r:{default:r},i=n(516);var o=Object.keys(i.decimal);t.locales=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,a.default)(e),(t=(0,r.default)(t,l)).locale in o.decimal)return!(0,i.default)(s,e.replace(/ /g,""))&&function(e){return new RegExp("^[-+]?([0-9]+)?(\\".concat(o.decimal[e.locale],"[0-9]{").concat(e.decimal_digits,"})").concat(e.force_decimal?"":"?","$"))}(t).test(e);throw new Error("Invalid locale '".concat(t.locale,"'"))};var r=c(n(307)),a=c(n(46)),i=c(n(586)),o=n(516);function c(e){return e&&e.__esModule?e:{default:e}}var l={force_decimal:!1,decimal_digits:"1,",locale:"en-US"},s=["","-","+"];e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,r.default)(e),(0,a.default)(e)%parseInt(t,10)==0};var r=i(n(46)),a=i(n(877));function i(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),i.test(e)};var r,a=(r=n(46))&&r.__esModule?r:{default:r};var i=/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i;e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),i.test(e)};var r,a=(r=n(46))&&r.__esModule?r:{default:r};var i=/^[A-Z]{2}[0-9A-Z]{3}\d{2}\d{5}$/;e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),i.test(e)};var r,a=(r=n(46))&&r.__esModule?r:{default:r};var i=/^[a-f0-9]{32}$/;e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,a.default)(e),new RegExp("^[a-f0-9]{".concat(i[t],"}$")).test(e)};var r,a=(r=n(46))&&r.__esModule?r:{default:r};var i={md5:32,md4:32,sha1:40,sha256:64,sha384:96,sha512:128,ripemd128:32,ripemd160:40,tiger128:32,tiger160:40,tiger192:48,crc32:8,crc32b:8};e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),i.test(e)};var r,a=(r=n(46))&&r.__esModule?r:{default:r};var i=/^([A-Za-z0-9\-_~+\/]+[=]{0,2})\.([A-Za-z0-9\-_~+\/]+[=]{0,2})(?:\.([A-Za-z0-9\-_~+\/]+[=]{0,2}))?$/;e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,a.default)(e);try{var t=JSON.parse(e);return!!t&&"object"===i(t)}catch(e){}return!1};var r,a=(r=n(46))&&r.__esModule?r:{default:r};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,r.default)(e),0===((t=(0,a.default)(t,o)).ignore_whitespace?e.trim().length:e.length)};var r=i(n(46)),a=i(n(307));function i(e){return e&&e.__esModule?e:{default:e}}var o={ignore_whitespace:!1};e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,r;(0,a.default)(e),"object"===i(t)?(n=t.min||0,r=t.max):(n=arguments[1],r=arguments[2]);var o=e.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g)||[],c=e.length-o.length;return c>=n&&(void 0===r||c<=r)};var r,a=(r=n(46))&&r.__esModule?r:{default:r};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";(0,a.default)(e);var n=i[t];return n&&n.test(e)};var r,a=(r=n(46))&&r.__esModule?r:{default:r};var i={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i};e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.default)(e),(0,a.default)(e)&&24===e.length};var r=i(n(46)),a=i(n(882));function i(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:String(new Date);(0,r.default)(e);var n=(0,a.default)(t),i=(0,a.default)(e);return!!(i&&n&&i>n)};var r=i(n(46)),a=i(n(583));function i(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:String(new Date);(0,r.default)(e);var n=(0,a.default)(t),i=(0,a.default)(e);return!!(i&&n&&i<n)};var r=i(n(46)),a=i(n(583));function i(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n;if((0,r.default)(e),"[object Array]"===Object.prototype.toString.call(t)){var i=[];for(n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=(0,a.default)(t[n]));return i.indexOf(e)>=0}if("object"===o(t))return t.hasOwnProperty(e);if(t&&"function"==typeof t.indexOf)return t.indexOf(e)>=0;return!1};var r=i(n(46)),a=i(n(584));function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,a.default)(e);var t=e.replace(/[- ]+/g,"");if(!i.test(t))return!1;for(var n,r,o,c=0,l=t.length-1;l>=0;l--)n=t.substring(l,l+1),r=parseInt(n,10),c+=o&&(r*=2)>=10?r%10+1:r,o=!o;return!(c%10!=0||!t)};var r,a=(r=n(46))&&r.__esModule?r:{default:r};var i=/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|(222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11}|6[27][0-9]{14})$/;e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"any";if((0,a.default)(e),t in i)return i[t](e);if("any"===t){for(var n in i)if(i.hasOwnProperty(n)){var r=i[n];if(r(e))return!0}return!1}throw new Error("Invalid locale '".concat(t,"'"))};var r,a=(r=n(46))&&r.__esModule?r:{default:r};var i={ES:function(e){(0,a.default)(e);var t={X:0,Y:1,Z:2},n=e.trim().toUpperCase();if(!/^[0-9X-Z][0-9]{7}[TRWAGMYFPDXBNJZSQVHLCKE]$/.test(n))return!1;var r=n.slice(0,-1).replace(/[X,Y,Z]/g,(function(e){return t[e]}));return n.endsWith(["T","R","W","A","G","M","Y","F","P","D","X","B","N","J","Z","S","Q","V","H","L","C","K","E"][r%23])}};e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if((0,a.default)(e),!i.test(e))return!1;for(var t,n,r=e.replace(/[A-Z]/g,(function(e){return parseInt(e,36)})),o=0,c=!0,l=r.length-2;l>=0;l--)t=r.substring(l,l+1),n=parseInt(t,10),o+=c&&(n*=2)>=10?n+1:n,c=!c;return parseInt(e.substr(e.length-1),10)===(1e4-o)%10};var r,a=(r=n(46))&&r.__esModule?r:{default:r};var i=/^[A-Z]{2}[0-9A-Z]{9}[0-9]$/;e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if((0,a.default)(t),!(n=String(n)))return e(t,10)||e(t,13);var r,l=t.replace(/[\s-]+/g,""),s=0;if("10"===n){if(!i.test(l))return!1;for(r=0;r<9;r++)s+=(r+1)*l.charAt(r);if("X"===l.charAt(9)?s+=100:s+=10*l.charAt(9),s%11==0)return!!l}else if("13"===n){if(!o.test(l))return!1;for(r=0;r<12;r++)s+=c[r%2]*l.charAt(r);if(l.charAt(12)-(10-s%10)%10==0)return!!l}return!1};var r,a=(r=n(46))&&r.__esModule?r:{default:r};var i=/^(?:[0-9]{9}X|[0-9]{10})$/,o=/^(?:[0-9]{13})$/,c=[1,3];e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,a.default)(e);var n=i;if(n=t.require_hyphen?n.replace("?",""):n,!(n=t.case_sensitive?new RegExp(n):new RegExp(n,"i")).test(e))return!1;for(var r=e.replace("-","").toUpperCase(),o=0,c=0;c<r.length;c++){var l=r[c];o+=("X"===l?10:+l)*(8-c)}return o%11==0};var r,a=(r=n(46))&&r.__esModule?r:{default:r};var i="^\\d{4}-?\\d{3}[\\dX]$";e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if((0,a.default)(e),n&&n.strictMode&&!e.startsWith("+"))return!1;if(Array.isArray(t))return t.some((function(t){if(i.hasOwnProperty(t)&&i[t].test(e))return!0;return!1}));if(t in i)return i[t].test(e);if(!t||"any"===t){for(var r in i){if(i.hasOwnProperty(r))if(i[r].test(e))return!0}return!1}throw new Error("Invalid locale '".concat(t,"'"))},t.locales=void 0;var r,a=(r=n(46))&&r.__esModule?r:{default:r};var i={"ar-AE":/^((\+?971)|0)?5[024568]\d{7}$/,"ar-DZ":/^(\+?213|0)(5|6|7)\d{8}$/,"ar-EG":/^((\+?20)|0)?1[012]\d{8}$/,"ar-IQ":/^(\+?964|0)?7[0-9]\d{8}$/,"ar-JO":/^(\+?962|0)?7[789]\d{7}$/,"ar-KW":/^(\+?965)[569]\d{7}$/,"ar-SA":/^(!?(\+?966)|0)?5\d{8}$/,"ar-SY":/^(!?(\+?963)|0)?9\d{8}$/,"ar-TN":/^(\+?216)?[2459]\d{7}$/,"be-BY":/^(\+?375)?(24|25|29|33|44)\d{7}$/,"bg-BG":/^(\+?359|0)?8[789]\d{7}$/,"bn-BD":/\+?(88)?0?1[356789][0-9]{8}\b/,"cs-CZ":/^(\+?420)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"da-DK":/^(\+?45)?\s?\d{2}\s?\d{2}\s?\d{2}\s?\d{2}$/,"de-DE":/^(\+49)?0?1(5[0-25-9]\d|6([23]|0\d?)|7([0-57-9]|6\d))\d{7}$/,"el-GR":/^(\+?30|0)?(69\d{8})$/,"en-AU":/^(\+?61|0)4\d{8}$/,"en-GB":/^(\+?44|0)7\d{9}$/,"en-GH":/^(\+233|0)(20|50|24|54|27|57|26|56|23|28)\d{7}$/,"en-HK":/^(\+?852\-?)?[456789]\d{3}\-?\d{4}$/,"en-IE":/^(\+?353|0)8[356789]\d{7}$/,"en-IN":/^(\+?91|0)?[6789]\d{9}$/,"en-KE":/^(\+?254|0)?[7]\d{8}$/,"en-MU":/^(\+?230|0)?\d{8}$/,"en-NG":/^(\+?234|0)?[789]\d{9}$/,"en-NZ":/^(\+?64|0)[28]\d{7,9}$/,"en-PK":/^((\+92)|(0092))-{0,1}\d{3}-{0,1}\d{7}$|^\d{11}$|^\d{4}-\d{7}$/,"en-RW":/^(\+?250|0)?[7]\d{8}$/,"en-SG":/^(\+65)?[89]\d{7}$/,"en-TZ":/^(\+?255|0)?[67]\d{8}$/,"en-UG":/^(\+?256|0)?[7]\d{8}$/,"en-US":/^((\+1|1)?( |-)?)?(\([2-9][0-9]{2}\)|[2-9][0-9]{2})( |-)?([2-9][0-9]{2}( |-)?[0-9]{4})$/,"en-ZA":/^(\+?27|0)\d{9}$/,"en-ZM":/^(\+?26)?09[567]\d{7}$/,"es-ES":/^(\+?34)?(6\d{1}|7[1234])\d{7}$/,"es-MX":/^(\+?52)?(1|01)?\d{10,11}$/,"es-UY":/^(\+598|0)9[1-9][\d]{6}$/,"et-EE":/^(\+?372)?\s?(5|8[1-4])\s?([0-9]\s?){6,7}$/,"fa-IR":/^(\+?98[\-\s]?|0)9[0-39]\d[\-\s]?\d{3}[\-\s]?\d{4}$/,"fi-FI":/^(\+?358|0)\s?(4(0|1|2|4|5|6)?|50)\s?(\d\s?){4,8}\d$/,"fo-FO":/^(\+?298)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"fr-FR":/^(\+?33|0)[67]\d{8}$/,"he-IL":/^(\+972|0)([23489]|5[012345689]|77)[1-9]\d{6}$/,"hu-HU":/^(\+?36)(20|30|70)\d{7}$/,"id-ID":/^(\+?62|0)8(1[123456789]|2[1238]|3[1238]|5[12356789]|7[78]|9[56789]|8[123456789])([\s?|\d]{5,11})$/,"it-IT":/^(\+?39)?\s?3\d{2} ?\d{6,7}$/,"ja-JP":/^(\+?81|0)[789]0[ \-]?[1-9]\d{2}[ \-]?\d{5}$/,"kk-KZ":/^(\+?7|8)?7\d{9}$/,"kl-GL":/^(\+?299)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"ko-KR":/^((\+?82)[ \-]?)?0?1([0|1|6|7|8|9]{1})[ \-]?\d{3,4}[ \-]?\d{4}$/,"lt-LT":/^(\+370|8)\d{8}$/,"ms-MY":/^(\+?6?01){1}(([0145]{1}(\-|\s)?\d{7,8})|([236789]{1}(\s|\-)?\d{7}))$/,"nb-NO":/^(\+?47)?[49]\d{7}$/,"nl-BE":/^(\+?32|0)4?\d{8}$/,"nn-NO":/^(\+?47)?[49]\d{7}$/,"pl-PL":/^(\+?48)? ?[5-8]\d ?\d{3} ?\d{2} ?\d{2}$/,"pt-BR":/(?=^(\+?5{2}\-?|0)[1-9]{2}\-?\d{4}\-?\d{4}$)(^(\+?5{2}\-?|0)[1-9]{2}\-?[6-9]{1}\d{3}\-?\d{4}$)|(^(\+?5{2}\-?|0)[1-9]{2}\-?9[6-9]{1}\d{3}\-?\d{4}$)/,"pt-PT":/^(\+?351)?9[1236]\d{7}$/,"ro-RO":/^(\+?4?0)\s?7\d{2}(\/|\s|\.|\-)?\d{3}(\s|\.|\-)?\d{3}$/,"ru-RU":/^(\+?7|8)?9\d{9}$/,"sl-SI":/^(\+386\s?|0)(\d{1}\s?\d{3}\s?\d{2}\s?\d{2}|\d{2}\s?\d{3}\s?\d{3})$/,"sk-SK":/^(\+?421)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"sr-RS":/^(\+3816|06)[- \d]{5,9}$/,"sv-SE":/^(\+?46|0)[\s\-]?7[\s\-]?[02369]([\s\-]?\d){7}$/,"th-TH":/^(\+66|66|0)\d{9}$/,"tr-TR":/^(\+?90|0)?5\d{9}$/,"uk-UA":/^(\+?38|8)?0\d{9}$/,"vi-VN":/^(\+?84|0)((3([2-9]))|(5([689]))|(7([0|6-9]))|(8([1-5]))|(9([0-9])))([0-9]{7})$/,"zh-CN":/^((\+|00)86)?1([358][0-9]|4[579]|66|7[0135678]|9[89])[0-9]{8}$/,"zh-TW":/^(\+?886\-?|0)?9\d{8}$/};i["en-CA"]=i["en-US"],i["fr-BE"]=i["nl-BE"],i["zh-HK"]=i["en-HK"];var o=Object.keys(i);t.locales=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,a.default)(e),function(e){var t="\\d{".concat(e.digits_after_decimal[0],"}");e.digits_after_decimal.forEach((function(e,n){0!==n&&(t="".concat(t,"|\\d{").concat(e,"}"))}));var n="(\\".concat(e.symbol.replace(/\./g,"\\."),")").concat(e.require_symbol?"":"?"),r="-?",a="[1-9]\\d{0,2}(\\".concat(e.thousands_separator,"\\d{3})*"),i="(".concat(["0","[1-9]\\d*",a].join("|"),")?"),o="(\\".concat(e.decimal_separator,"(").concat(t,"))").concat(e.require_decimal?"":"?"),c=i+(e.allow_decimal||e.require_decimal?o:"");e.allow_negatives&&!e.parens_for_negatives&&(e.negative_sign_after_digits?c+=r:e.negative_sign_before_digits&&(c=r+c));e.allow_negative_sign_placeholder?c="( (?!\\-))?".concat(c):e.allow_space_after_symbol?c=" ?".concat(c):e.allow_space_after_digits&&(c+="( (?!$))?");e.symbol_after_digits?c+=n:c=n+c;e.allow_negatives&&(e.parens_for_negatives?c="(\\(".concat(c,"\\)|").concat(c,")"):e.negative_sign_before_digits||e.negative_sign_after_digits||(c=r+c));return new RegExp("^(?!-? )(?=.*\\d)".concat(c,"$"))}(t=(0,r.default)(t,o)).test(e)};var r=i(n(307)),a=i(n(46));function i(e){return e&&e.__esModule?e:{default:e}}var o={symbol:"$",require_symbol:!1,allow_space_after_symbol:!1,symbol_after_digits:!1,allow_negatives:!0,parens_for_negatives:!1,negative_sign_before_digits:!1,negative_sign_after_digits:!1,allow_negative_sign_placeholder:!1,thousands_separator:",",decimal_separator:".",allow_decimal:!0,require_decimal:!1,digits_after_decimal:[2],allow_space_after_digits:!1};e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,a.default)(e);var n=i.test(e);return t&&n&&t.strict?function(e){var t=e.match(/^(\d{4})-?(\d{3})([ T]{1}\.*|$)/);if(t){var n=Number(t[1]),r=Number(t[2]);return n%4==0&&n%100!=0?r<=366:r<=365}var a=e.match(/(\d{4})-?(\d{0,2})-?(\d*)/).map(Number),i=a[1],o=a[2],c=a[3],l=o?"0".concat(o).slice(-2):o,s=c?"0".concat(c).slice(-2):c,u=new Date("".concat(i,"-").concat(l||"01","-").concat(s||"01"));if(isNaN(u.getUTCFullYear()))return!1;if(o&&c)return u.getUTCFullYear()===i&&u.getUTCMonth()+1===o&&u.getUTCDate()===c;return!0}(e):n};var r,a=(r=n(46))&&r.__esModule?r:{default:r};var i=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-3])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/;e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),f.test(e)};var r,a=(r=n(46))&&r.__esModule?r:{default:r};var i=/([01][0-9]|2[0-3])/,o=/[0-5][0-9]/,c=new RegExp("[-+]".concat(i.source,":").concat(o.source)),l=new RegExp("([zZ]|".concat(c.source,")")),s=new RegExp("".concat(i.source,":").concat(o.source,":").concat(/([0-5][0-9]|60)/.source).concat(/(\.[0-9]+)?/.source)),u=new RegExp("".concat(/[0-9]{4}/.source,"-").concat(/(0[1-9]|1[0-2])/.source,"-").concat(/([12]\d|0[1-9]|3[01])/.source)),d=new RegExp("".concat(s.source).concat(l.source)),f=new RegExp("".concat(u.source,"[ tT]").concat(d.source));e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.default)(e),(0,a.default)(o,e.toUpperCase())};var r=i(n(46)),a=i(n(586));function i(e){return e&&e.__esModule?e:{default:e}}var o=["AD","AE","AF","AG","AI","AL","AM","AO","AQ","AR","AS","AT","AU","AW","AX","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BL","BM","BN","BO","BQ","BR","BS","BT","BV","BW","BY","BZ","CA","CC","CD","CF","CG","CH","CI","CK","CL","CM","CN","CO","CR","CU","CV","CW","CX","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","EH","ER","ES","ET","FI","FJ","FK","FM","FO","FR","GA","GB","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GS","GT","GU","GW","GY","HK","HM","HN","HR","HT","HU","ID","IE","IL","IM","IN","IO","IQ","IR","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KP","KR","KW","KY","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MF","MG","MH","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PN","PR","PS","PT","PW","PY","QA","RE","RO","RS","RU","RW","SA","SB","SC","SD","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","SS","ST","SV","SX","SY","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","UM","US","UY","UZ","VA","VC","VE","VG","VI","VN","VU","WF","WS","YE","YT","ZA","ZM","ZW"];e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.default)(e),(0,a.default)(o,e.toUpperCase())};var r=i(n(46)),a=i(n(586));function i(e){return e&&e.__esModule?e:{default:e}}var o=["AFG","ALA","ALB","DZA","ASM","AND","AGO","AIA","ATA","ATG","ARG","ARM","ABW","AUS","AUT","AZE","BHS","BHR","BGD","BRB","BLR","BEL","BLZ","BEN","BMU","BTN","BOL","BES","BIH","BWA","BVT","BRA","IOT","BRN","BGR","BFA","BDI","KHM","CMR","CAN","CPV","CYM","CAF","TCD","CHL","CHN","CXR","CCK","COL","COM","COG","COD","COK","CRI","CIV","HRV","CUB","CUW","CYP","CZE","DNK","DJI","DMA","DOM","ECU","EGY","SLV","GNQ","ERI","EST","ETH","FLK","FRO","FJI","FIN","FRA","GUF","PYF","ATF","GAB","GMB","GEO","DEU","GHA","GIB","GRC","GRL","GRD","GLP","GUM","GTM","GGY","GIN","GNB","GUY","HTI","HMD","VAT","HND","HKG","HUN","ISL","IND","IDN","IRN","IRQ","IRL","IMN","ISR","ITA","JAM","JPN","JEY","JOR","KAZ","KEN","KIR","PRK","KOR","KWT","KGZ","LAO","LVA","LBN","LSO","LBR","LBY","LIE","LTU","LUX","MAC","MKD","MDG","MWI","MYS","MDV","MLI","MLT","MHL","MTQ","MRT","MUS","MYT","MEX","FSM","MDA","MCO","MNG","MNE","MSR","MAR","MOZ","MMR","NAM","NRU","NPL","NLD","NCL","NZL","NIC","NER","NGA","NIU","NFK","MNP","NOR","OMN","PAK","PLW","PSE","PAN","PNG","PRY","PER","PHL","PCN","POL","PRT","PRI","QAT","REU","ROU","RUS","RWA","BLM","SHN","KNA","LCA","MAF","SPM","VCT","WSM","SMR","STP","SAU","SEN","SRB","SYC","SLE","SGP","SXM","SVK","SVN","SLB","SOM","ZAF","SGS","SSD","ESP","LKA","SDN","SUR","SJM","SWZ","SWE","CHE","SYR","TWN","TJK","TZA","THA","TLS","TGO","TKL","TON","TTO","TUN","TUR","TKM","TCA","TUV","UGA","UKR","ARE","GBR","USA","UMI","URY","UZB","VUT","VEN","VNM","VGB","VIR","WLF","ESH","YEM","ZMB","ZWE"];e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,a.default)(e);var t=e.length;if(!t||t%4!=0||i.test(e))return!1;var n=e.indexOf("=");return-1===n||n===t-1||n===t-2&&"="===e[t-1]};var r,a=(r=n(46))&&r.__esModule?r:{default:r};var i=/[^A-Z0-9+\/=]/i;e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,a.default)(e);var t=e.split(",");if(t.length<2)return!1;var n=t.shift().trim().split(";"),r=n.shift();if("data:"!==r.substr(0,5))return!1;var l=r.substr(5);if(""!==l&&!i.test(l))return!1;for(var s=0;s<n.length;s++)if(s===n.length-1&&"base64"===n[s].toLowerCase());else if(!o.test(n[s]))return!1;for(var u=0;u<t.length;u++)if(!c.test(t[u]))return!1;return!0};var r,a=(r=n(46))&&r.__esModule?r:{default:r};var i=/^[a-z]+\/[a-z0-9\-\+]+$/i,o=/^[a-z\-]+=[a-z0-9\-]+$/i,c=/^[a-z0-9!\$&'\(\)\*\+,;=\-\._~:@\/\?%\s]*$/i;e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),i.test(e.trim())};var r,a=(r=n(46))&&r.__esModule?r:{default:r};var i=/^magnet:\?xt=urn:[a-z0-9]+:[a-z0-9]{32,40}&dn=.+&tr=.+$/i;e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),i.test(e)||o.test(e)||c.test(e)};var r,a=(r=n(46))&&r.__esModule?r:{default:r};var i=/^(application|audio|font|image|message|model|multipart|text|video)\/[a-zA-Z0-9\.\-\+]{1,100}$/i,o=/^text\/[a-zA-Z0-9\.\-\+]{1,100};\s?charset=("[a-zA-Z0-9\.\-\+\s]{0,70}"|[a-zA-Z0-9\.\-\+]{0,70})(\s?\([a-zA-Z0-9\.\-\+\s]{1,20}\))?$/i,c=/^multipart\/[a-zA-Z0-9\.\-\+]{1,100}(;\s?(boundary|charset)=("[a-zA-Z0-9\.\-\+\s]{0,70}"|[a-zA-Z0-9\.\-\+]{0,70})(\s?\([a-zA-Z0-9\.\-\+\s]{1,20}\))?){0,2}$/i;e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if((0,a.default)(e),!e.includes(","))return!1;var t=e.split(",");return i.test(t[0])&&o.test(t[1])};var r,a=(r=n(46))&&r.__esModule?r:{default:r};var i=/^\(?[+-]?(90(\.0+)?|[1-8]?\d(\.\d+)?)$/,o=/^\s?[+-]?(180(\.0+)?|1[0-7]\d(\.\d+)?|\d{1,2}(\.\d+)?)\)?$/;e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,a.default)(e),t in l)return l[t].test(e);if("any"===t){for(var n in l){if(l.hasOwnProperty(n))if(l[n].test(e))return!0}return!1}throw new Error("Invalid locale '".concat(t,"'"))},t.locales=void 0;var r,a=(r=n(46))&&r.__esModule?r:{default:r};var i=/^\d{4}$/,o=/^\d{5}$/,c=/^\d{6}$/,l={AD:/^AD\d{3}$/,AT:i,AU:i,BE:i,BG:i,CA:/^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJ-NPRSTV-Z][\s\-]?\d[ABCEGHJ-NPRSTV-Z]\d$/i,CH:i,CZ:/^\d{3}\s?\d{2}$/,DE:o,DK:i,DZ:o,EE:o,ES:o,FI:o,FR:/^\d{2}\s?\d{3}$/,GB:/^(gir\s?0aa|[a-z]{1,2}\d[\da-z]?\s?(\d[a-z]{2})?)$/i,GR:/^\d{3}\s?\d{2}$/,HR:/^([1-5]\d{4}$)/,HU:i,IL:o,IN:c,IS:/^\d{3}$/,IT:o,JP:/^\d{3}\-\d{4}$/,KE:o,LI:/^(948[5-9]|949[0-7])$/,LT:/^LT\-\d{5}$/,LU:i,LV:/^LV\-\d{4}$/,MX:o,NL:/^\d{4}\s?[a-z]{2}$/i,NO:i,PL:/^\d{2}\-\d{3}$/,PT:/^\d{4}\-\d{3}?$/,RO:c,RU:c,SA:o,SE:/^\d{3}\s?\d{2}$/,SI:i,SK:/^\d{3}\s?\d{2}$/,TN:i,TW:/^\d{3}(\d{2})?$/,UA:o,US:/^\d{5}(-\d{4})?$/,ZA:i,ZM:o},s=Object.keys(l);t.locales=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,r.default)((0,a.default)(e,t),t)};var r=i(n(884)),a=i(n(883));function i(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\//g,"&#x2F;").replace(/\\/g,"&#x5C;").replace(/`/g,"&#96;")};var r,a=(r=n(46))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e),e.replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#x2F;/g,"/").replace(/&#x5C;/g,"\\").replace(/&#96;/g,"`")};var r,a=(r=n(46))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,r.default)(e);var n=t?"\\x00-\\x09\\x0B\\x0C\\x0E-\\x1F\\x7F":"\\x00-\\x1F\\x7F";return(0,a.default)(e,n)};var r=i(n(46)),a=i(n(885));function i(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,a.default)(e),e.replace(new RegExp("[^".concat(t,"]+"),"g"),"")};var r,a=(r=n(46))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,a.default)(e);for(var n=e.length-1;n>=0;n--)if(-1===t.indexOf(e[n]))return!1;return!0};var r,a=(r=n(46))&&r.__esModule?r:{default:r};e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){t=(0,a.default)(t,i);var n=e.split("@"),r=n.pop(),d=[n.join("@"),r];if(d[1]=d[1].toLowerCase(),"gmail.com"===d[1]||"googlemail.com"===d[1]){if(t.gmail_remove_subaddress&&(d[0]=d[0].split("+")[0]),t.gmail_remove_dots&&(d[0]=d[0].replace(/\.+/g,u)),!d[0].length)return!1;(t.all_lowercase||t.gmail_lowercase)&&(d[0]=d[0].toLowerCase()),d[1]=t.gmail_convert_googlemaildotcom?"gmail.com":d[1]}else if(o.indexOf(d[1])>=0){if(t.icloud_remove_subaddress&&(d[0]=d[0].split("+")[0]),!d[0].length)return!1;(t.all_lowercase||t.icloud_lowercase)&&(d[0]=d[0].toLowerCase())}else if(c.indexOf(d[1])>=0){if(t.outlookdotcom_remove_subaddress&&(d[0]=d[0].split("+")[0]),!d[0].length)return!1;(t.all_lowercase||t.outlookdotcom_lowercase)&&(d[0]=d[0].toLowerCase())}else if(l.indexOf(d[1])>=0){if(t.yahoo_remove_subaddress){var f=d[0].split("-");d[0]=f.length>1?f.slice(0,-1).join("-"):f[0]}if(!d[0].length)return!1;(t.all_lowercase||t.yahoo_lowercase)&&(d[0]=d[0].toLowerCase())}else s.indexOf(d[1])>=0?((t.all_lowercase||t.yandex_lowercase)&&(d[0]=d[0].toLowerCase()),d[1]="yandex.ru"):t.all_lowercase&&(d[0]=d[0].toLowerCase());return d.join("@")};var r,a=(r=n(307))&&r.__esModule?r:{default:r};var i={all_lowercase:!0,gmail_lowercase:!0,gmail_remove_dots:!0,gmail_remove_subaddress:!0,gmail_convert_googlemaildotcom:!0,outlookdotcom_lowercase:!0,outlookdotcom_remove_subaddress:!0,yahoo_lowercase:!0,yahoo_remove_subaddress:!0,yandex_lowercase:!0,icloud_lowercase:!0,icloud_remove_subaddress:!0},o=["icloud.com","me.com"],c=["hotmail.at","hotmail.be","hotmail.ca","hotmail.cl","hotmail.co.il","hotmail.co.nz","hotmail.co.th","hotmail.co.uk","hotmail.com","hotmail.com.ar","hotmail.com.au","hotmail.com.br","hotmail.com.gr","hotmail.com.mx","hotmail.com.pe","hotmail.com.tr","hotmail.com.vn","hotmail.cz","hotmail.de","hotmail.dk","hotmail.es","hotmail.fr","hotmail.hu","hotmail.id","hotmail.ie","hotmail.in","hotmail.it","hotmail.jp","hotmail.kr","hotmail.lv","hotmail.my","hotmail.ph","hotmail.pt","hotmail.sa","hotmail.sg","hotmail.sk","live.be","live.co.uk","live.com","live.com.ar","live.com.mx","live.de","live.es","live.eu","live.fr","live.it","live.nl","msn.com","outlook.at","outlook.be","outlook.cl","outlook.co.il","outlook.co.nz","outlook.co.th","outlook.com","outlook.com.ar","outlook.com.au","outlook.com.br","outlook.com.gr","outlook.com.pe","outlook.com.tr","outlook.com.vn","outlook.cz","outlook.de","outlook.dk","outlook.es","outlook.fr","outlook.hu","outlook.id","outlook.ie","outlook.in","outlook.it","outlook.jp","outlook.kr","outlook.lv","outlook.my","outlook.ph","outlook.pt","outlook.sa","outlook.sg","outlook.sk","passport.com"],l=["rocketmail.com","yahoo.ca","yahoo.co.uk","yahoo.com","yahoo.de","yahoo.fr","yahoo.in","yahoo.it","ymail.com"],s=["yandex.ru","yandex.ua","yandex.kz","yandex.com","yandex.by","ya.ru"];function u(e){return e.length>1?e:""}e.exports=t.default,e.exports.default=t.default},function(e,t,n){"use strict";var r=n(33),a=n(36);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),o=r(n(1603)),c=r(n(37)),l=function(e,t){return i.createElement(c.default,Object.assign({},e,{ref:t,icon:o.default}))};l.displayName="PlusCircleFilled";var s=i.forwardRef(l);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm192 472c0 4.4-3.6 8-8 8H544v152c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V544H328c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h152V328c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v152h152c4.4 0 8 3.6 8 8v48z"}}]},name:"plus-circle",theme:"filled"}},function(e,t,n){"use strict";var r=n(33),a=n(36);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),o=r(n(1605)),c=r(n(37)),l=function(e,t){return i.createElement(c.default,Object.assign({},e,{ref:t,icon:o.default}))};l.displayName="LockOutlined";var s=i.forwardRef(l);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"}},function(e,t,n){"use strict";var r=n(33),a=n(36);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),o=r(n(1607)),c=r(n(37)),l=function(e,t){return i.createElement(c.default,Object.assign({},e,{ref:t,icon:o.default}))};l.displayName="MailOutlined";var s=i.forwardRef(l);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"}}]},name:"mail",theme:"outlined"}},function(e,t,n){"use strict";var r=n(33),a=n(36);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),o=r(n(1609)),c=r(n(37)),l=function(e,t){return i.createElement(c.default,Object.assign({},e,{ref:t,icon:o.default}))};l.displayName="CaretLeftOutlined";var s=i.forwardRef(l);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M689 165.1L308.2 493.5c-10.9 9.4-10.9 27.5 0 37L689 858.9c14.2 12.2 35 1.2 35-18.5V183.6c0-19.7-20.8-30.7-35-18.5z"}}]},name:"caret-left",theme:"outlined"}},function(e,t,n){"use strict";var r=n(33),a=n(36);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),o=r(n(1611)),c=r(n(37)),l=function(e,t){return i.createElement(c.default,Object.assign({},e,{ref:t,icon:o.default}))};l.displayName="CaretRightOutlined";var s=i.forwardRef(l);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"}},function(e,t,n){"use strict";var r=n(33),a=n(36);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),o=r(n(1613)),c=r(n(37)),l=function(e,t){return i.createElement(c.default,Object.assign({},e,{ref:t,icon:o.default}))};l.displayName="DesktopOutlined";var s=i.forwardRef(l);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 140H96c-17.7 0-32 14.3-32 32v496c0 17.7 14.3 32 32 32h380v112H304c-8.8 0-16 7.2-16 16v48c0 4.4 3.6 8 8 8h432c4.4 0 8-3.6 8-8v-48c0-8.8-7.2-16-16-16H548V700h380c17.7 0 32-14.3 32-32V172c0-17.7-14.3-32-32-32zm-40 488H136V212h752v416z"}}]},name:"desktop",theme:"outlined"}},function(e,t,n){"use strict";var r=n(33),a=n(36);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),o=r(n(1615)),c=r(n(37)),l=function(e,t){return i.createElement(c.default,Object.assign({},e,{ref:t,icon:o.default}))};l.displayName="VerticalAlignTopOutlined";var s=i.forwardRef(l);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M859.9 168H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM518.3 355a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V848c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V509.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 355z"}}]},name:"vertical-align-top",theme:"outlined"}},,,function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(1520))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(1526))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(1528))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(1530))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(1534))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},,function(e,t,n){"use strict";n(1623);var r=n(825);n(999);t.a=r.a},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(1540))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},function(e,t,n){"use strict";var r=n(125).PROMO_ORG_RATIO;t.calcOrganizationDuration=function(e,t){if(!e)return 0;if(null==t)return e;var n=r[t]||1;return Math.ceil(e/n)}},function(e,t,n){"use strict";function r(e){return null!=e&&"object"==typeof e&&1===e.nodeType}function a(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function i(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var n=getComputedStyle(e,null);return a(n.overflowY,t)||a(n.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function o(e,t,n,r,a,i,o,c){return i<e&&o>t||i>e&&o<t?0:i<=e&&c<=n||o>=t&&c>=n?i-e-r:o>t&&c<n||i<e&&c>n?o-t+a:0}var c=function(e,t){var n=window,a=t.scrollMode,c=t.block,l=t.inline,s=t.boundary,u=t.skipOverflowHiddenElements,d="function"==typeof s?s:function(e){return e!==s};if(!r(e))throw new TypeError("Invalid target");for(var f=document.scrollingElement||document.documentElement,p=[],h=e;r(h)&&d(h);){if((h=h.parentNode)===f){p.push(h);break}h===document.body&&i(h)&&!i(document.documentElement)||i(h,u)&&p.push(h)}for(var m=n.visualViewport?n.visualViewport.width:innerWidth,g=n.visualViewport?n.visualViewport.height:innerHeight,v=window.scrollX||pageXOffset,y=window.scrollY||pageYOffset,b=e.getBoundingClientRect(),k=b.height,w=b.width,x=b.top,_=b.right,C=b.bottom,E=b.left,O="start"===c||"nearest"===c?x:"end"===c?C:x+k/2,S="center"===l?E+w/2:"end"===l?_:E,R=[],D=0;D<p.length;D++){var A=p[D],T=A.getBoundingClientRect(),P=T.height,j=T.width,M=T.top,N=T.right,L=T.bottom,I=T.left;if("if-needed"===a&&x>=0&&E>=0&&C<=g&&_<=m&&x>=M&&C<=L&&E>=I&&_<=N)return R;var z=getComputedStyle(A),B=parseInt(z.borderLeftWidth,10),F=parseInt(z.borderTopWidth,10),V=parseInt(z.borderRightWidth,10),U=parseInt(z.borderBottomWidth,10),q=0,H=0,W="offsetWidth"in A?A.offsetWidth-A.clientWidth-B-V:0,Y="offsetHeight"in A?A.offsetHeight-A.clientHeight-F-U:0;if(f===A)q="start"===c?O:"end"===c?O-g:"nearest"===c?o(y,y+g,g,F,U,y+O,y+O+k,k):O-g/2,H="start"===l?S:"center"===l?S-m/2:"end"===l?S-m:o(v,v+m,m,B,V,v+S,v+S+w,w),q=Math.max(0,q+y),H=Math.max(0,H+v);else{q="start"===c?O-M-F:"end"===c?O-L+U+Y:"nearest"===c?o(M,L,P,F,U+Y,O,O+k,k):O-(M+P/2)+Y/2,H="start"===l?S-I-B:"center"===l?S-(I+j/2)+W/2:"end"===l?S-N+V+W:o(I,N,j,B,V+W,S,S+w,w);var G=A.scrollLeft,K=A.scrollTop;O+=K-(q=Math.max(0,Math.min(K+q,A.scrollHeight-P+Y))),S+=G-(H=Math.max(0,Math.min(G+H,A.scrollWidth-j+W)))}R.push({el:A,top:q,left:H})}return R};function l(e){return e===Object(e)&&0!==Object.keys(e).length}t.a=function(e,t){var n=!e.ownerDocument.documentElement.contains(e);if(l(t)&&"function"==typeof t.behavior)return t.behavior(n?[]:c(e,t));if(!n){var r=function(e){return!1===e?{block:"end",inline:"nearest"}:l(e)?e:{block:"start",inline:"nearest"}}(t);return function(e,t){void 0===t&&(t="auto");var n="scrollBehavior"in document.body.style;e.forEach((function(e){var r=e.el,a=e.top,i=e.left;r.scroll&&n?r.scroll({top:a,left:i,behavior:t}):(r.scrollTop=a,r.scrollLeft=i)}))}(c(e,r),r.behavior)}}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(1602))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(1606))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},function(e,t,n){"use strict";n(74);var r=n(40),a=(n(492),n(132)),i=(n(67),n(24)),o=(n(45),n(16)),c=(n(149),n(48)),l=(n(108),n(39)),s=(n(493),n(518)),u=(n(116),n(26)),d=n(0),f=n.n(d),p=n(2),h=n.n(p),m=n(150),g=n(820),v=n.n(g),y={wrapper:"index-module_wrapper_3e3rU",group:"index-module_group_ffig_",switcherCon:"index-module_switcherCon_3zqUt",proxyInfo:"index-module_proxyInfo_33BIE",proxyEdit:"index-module_proxyEdit_3zNzt",itemTitle:"index-module_itemTitle_28cWu",confirm:"index-module_confirm_2SuVB"};function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t,n,r,a,i,o){try{var c=e[i](o),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){k(i,r,a,o,c,"next",e)}function c(e){k(i,r,a,o,c,"throw",e)}o(void 0)}))}}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=R(e);if(t){var a=R(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return O(this,n)}}function O(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?S(e):t}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(g,e);var t,n,d,p,h=E(g);function g(){var e;x(this,g);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return D(S(e=h.call.apply(h,[this].concat(n))),"formRef",f.a.createRef()),D(S(e),"state",{proxySetting:{},showProxyUrlBoard:!1,errMessage:"",proxyUrl:""}),D(S(e),"onSwitchProxy",function(){var t=w(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=e.state.proxySetting).enable=n,r.mode||(r.mode=m.MODE.http,r.type=m.TYPE.http),t.next=5,e.props.updateProxySettings(r);case 5:e.setState({proxySetting:r});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),D(S(e),"changeProxyType",function(){var t=w(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=e.state.proxySetting).mode=n,n===m.MODE.http&&(r.type=m.TYPE.http),t.next=5,e.props.updateProxySettings(r);case 5:e.setState({proxySetting:r});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),D(S(e),"changeType",function(){var t=w(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=e.state.proxySetting).type=n,t.next=4,e.props.updateProxySettings(r);case 4:e.setState({proxySetting:r});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),D(S(e),"editProxyUrl",(function(){e.setState({showProxyUrlBoard:!0})})),D(S(e),"onConfirmProxyUrl",w(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state.proxyUrl,r=Object.keys(m.TYPE),n&&v.a.isURL(n,{require_protocol:!0,protocols:r})){t.next=4;break}return t.abrupt("return",e.setState({errMessage:__("代理地址输入错误")}));case 4:return(a=e.state.proxySetting).url=n,t.next=8,e.props.updateProxySettings(a);case 8:e.setState({proxySetting:a,showProxyUrlBoard:!1});case 9:case"end":return t.stop()}}),t)})))),e}return t=g,(n=[{key:"componentWillMount",value:(p=w(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getProxySettings();case 2:t=e.sent,this.setState({proxySetting:t||{}});case 4:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state,n=t.proxySetting,d=t.showProxyUrlBoard,p=t.errMessage,h=n.mode===m.MODE.http,g="mini"===this.props.scene,v={left:g?15:18,right:g?9:6},b="100%",k=g?"small":"normal",w=g?{borderBottom:"none"}:{};return f.a.createElement("div",{className:y.wrapper,style:w},!g&&f.a.createElement("h2",null,__("代理设置")),f.a.createElement("div",{className:y.group},f.a.createElement("div",{className:y.item},f.a.createElement(l.a,null,f.a.createElement(u.a,{span:v.left},__("启用代理")),f.a.createElement(u.a,{className:y.switcherCon,span:v.right},f.a.createElement(s.a,{defaultChecked:n.enable,checked:n.enable,size:"large",onChange:this.onSwitchProxy}))))),n.enable&&f.a.createElement("div",null,f.a.createElement("div",{className:y.group},f.a.createElement("div",{className:y.item},f.a.createElement(l.a,null,f.a.createElement(u.a,{span:v.left,className:y.itemTitle},__("代理模式")),f.a.createElement(u.a,{span:v.right},f.a.createElement(c.a,{style:{width:b},onChange:function(t){return e.changeProxyType(t)},defaultValue:n.mode||m.MODE.http,size:k},f.a.createElement(c.a.Option,{value:m.MODE.http},__("HTTP 代理")),f.a.createElement(c.a.Option,{value:m.MODE.pac},__("PAC 代理"))))))),h&&f.a.createElement("div",{className:y.group},f.a.createElement("div",{className:y.item},f.a.createElement(l.a,null,f.a.createElement(u.a,{span:v.left,className:y.itemTitle},__("代理协议")),f.a.createElement(u.a,{span:v.right},f.a.createElement(c.a,{style:{width:b},onChange:function(t){return e.changeType(t)},defaultValue:n.type||m.TYPE.http,size:k},f.a.createElement(c.a.Option,{value:m.TYPE.http},m.TYPE.http),f.a.createElement(c.a.Option,{value:m.TYPE.socks4},m.TYPE.socks4),f.a.createElement(c.a.Option,{value:m.TYPE.socks5},m.TYPE.socks5)))))),f.a.createElement("div",{className:y.group,style:{border:"none"}},f.a.createElement("div",{className:y.item},f.a.createElement(l.a,null,f.a.createElement(u.a,{span:v.left,className:y.itemTitle},__("代理服务器"),n.url&&f.a.createElement("span",{className:y.proxyInfo},n.url)),f.a.createElement(u.a,{span:v.right,className:y.proxyEdit},f.a.createElement(o.a,{onClick:this.editProxyUrl},__("修改")))))),g&&f.a.createElement("div",{className:y.confirm},f.a.createElement(o.a,{type:"primary",onClick:this.props.onOk},__("确定")))),f.a.createElement(r.a,{title:__("设置代理地址"),closable:!0,maskClosable:!1,visible:d,onCancel:function(){e.setState({showProxyUrlBoard:!1})},footer:null},f.a.createElement(a.a,{ref:this.formRef},f.a.createElement(a.a.Item,{name:"proxyUrl",help:p||null,validateStatus:p?"error":null},f.a.createElement(i.a,{ref:function(t){e.proxyUrlInputElem=t},defaultValue:n.url,placeholder:__("协议://IP:端口"),onChange:function(t){return e.setState({proxyUrl:t.target.value,errMessage:""})}}))),f.a.createElement("div",{style:{textAlign:"right",marginTop:8}},f.a.createElement(o.a,{type:"primary",onClick:this.onConfirmProxyUrl},__("确定")))))}}])&&_(t.prototype,n),d&&_(t,d),g}(d.Component);A.defaultProps={scene:""},A.propTypes={scene:h.a.string,updateProxySettings:h.a.func,getProxySettings:h.a.func,onOk:h.a.func};t.a=A},function(e,t,n){"use strict";var r=n(82),a=n.n(r);t.a=new a.a},function(e,t,n){"use strict";var r=n(62),a=n.n(r),i={_bookGrayscaleConfig:null,getDefaultDocumentFormat:function(e,t,n){return t=t||"",n=n||{},a.a.DOC_DEFAULT_FORMAT[e]||a.a.FORMAT.LAKE}};t.a=i},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(1610))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(1608))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(1612))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},function(e,t,n){var r=function(e){return"[object Array]"==Object.prototype.toString.call(e)},a=function(e){return JSON.parse(JSON.stringify(e))},i={name:"json0",uri:"http://sharejs.org/types/JSONv0"},o={};function c(e){e.t="text0";var t={p:e.p.pop()};null!=e.si&&(t.i=e.si),null!=e.sd&&(t.d=e.sd),e.o=[t]}function l(e){e.p.push(e.o[0].p),null!=e.o[0].i&&(e.si=e.o[0].i),null!=e.o[0].d&&(e.sd=e.o[0].d),delete e.t,delete e.o}i.registerSubtype=function(e){o[e.name]=e},i.create=function(e){return void 0===e?null:a(e)},i.invertComponent=function(e){var t={p:e.p};return e.t&&o[e.t]&&(t.t=e.t,t.o=o[e.t].invert(e.o)),void 0!==e.si&&(t.sd=e.si),void 0!==e.sd&&(t.si=e.sd),void 0!==e.oi&&(t.od=e.oi),void 0!==e.od&&(t.oi=e.od),void 0!==e.li&&(t.ld=e.li),void 0!==e.ld&&(t.li=e.ld),void 0!==e.na&&(t.na=-e.na),void 0!==e.lm&&(t.lm=e.p[e.p.length-1],t.p=e.p.slice(0,e.p.length-1).concat([e.lm])),t},i.invert=function(e){for(var t=e.slice().reverse(),n=[],r=0;r<t.length;r++)n.push(i.invertComponent(t[r]));return n},i.checkValidOp=function(e){for(var t=0;t<e.length;t++)if(!r(e[t].p))throw new Error("Missing path")},i.checkList=function(e){if(!r(e))throw new Error("Referenced element not a list")},i.checkObj=function(e){if(!(t=e)||t.constructor!==Object)throw new Error("Referenced element not an object (it was "+JSON.stringify(e)+")");var t},i.apply=function(e,t){i.checkValidOp(t),t=a(t);for(var n={data:e},r=0;r<t.length;r++){var l=t[r];null==l.si&&null==l.sd||c(l);for(var s=null,u=n,d="data",f=0;f<l.p.length;f++){var p=l.p[f];if(s=u,d,u=u[d],d=p,null==s)throw new Error("Path invalid")}if(l.t&&void 0!==l.o&&o[l.t])u[d]=o[l.t].apply(u[d],l.o);else if(void 0!==l.na){if("number"!=typeof u[d])throw new Error("Referenced element not a number");u[d]+=l.na}else if(void 0!==l.li&&void 0!==l.ld)i.checkList(u),u[d]=l.li;else if(void 0!==l.li)i.checkList(u),u.splice(d,0,l.li);else if(void 0!==l.ld)i.checkList(u),u.splice(d,1);else if(void 0!==l.lm){if(i.checkList(u),l.lm!=d){var h=u[d];u.splice(d,1),u.splice(l.lm,0,h)}}else if(void 0!==l.oi)i.checkObj(u),u[d]=l.oi;else{if(void 0===l.od)throw new Error("invalid / missing instruction in op");i.checkObj(u),delete u[d]}}return n.data},i.shatter=function(e){for(var t=[],n=0;n<e.length;n++)t.push([e[n]]);return t},i.incrementalApply=function(e,t,n){for(var r=0;r<t.length;r++){var a=[t[r]];n(a,e=i.apply(e,a))}return e};var s=i.pathMatches=function(e,t,n){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r]&&(!n||r!==e.length-1))return!1;return!0};i.append=function(e,t){if(t=a(t),0!==e.length){var n=e[e.length-1];if(null==t.si&&null==t.sd||null==n.si&&null==n.sd||(c(t),c(n)),s(t.p,n.p))if(t.t&&n.t&&t.t===n.t&&o[t.t]){if(n.o=o[t.t].compose(n.o,t.o),null!=t.si||null!=t.sd){for(var r=t.p,i=0;i<n.o.length-1;i++)t.o=[n.o.pop()],t.p=r.slice(),l(t),e.push(t);l(n)}}else null!=n.na&&null!=t.na?e[e.length-1]={p:n.p,na:n.na+t.na}:void 0!==n.li&&void 0===t.li&&t.ld===n.li?void 0!==n.ld?delete n.li:e.pop():void 0!==n.od&&void 0===n.oi&&void 0!==t.oi&&void 0===t.od?n.oi=t.oi:void 0!==n.oi&&void 0!==t.od?void 0!==t.oi?n.oi=t.oi:void 0!==n.od?delete n.oi:e.pop():void 0!==t.lm&&t.p[t.p.length-1]===t.lm||e.push(t);else null==t.si&&null==t.sd||null==n.si&&null==n.sd||(l(t),l(n)),e.push(t)}else e.push(t)},i.compose=function(e,t){i.checkValidOp(e),i.checkValidOp(t);for(var n=a(e),r=0;r<t.length;r++)i.append(n,t[r]);return n},i.normalize=function(e){var t=[];e=r(e)?e:[e];for(var n=0;n<e.length;n++){var a=e[n];null==a.p&&(a.p=[]),i.append(t,a)}return t},i.commonLengthForOps=function(e,t){var n=e.p.length,r=t.p.length;if((null!=e.na||e.t)&&n++,(null!=t.na||t.t)&&r++,0===n)return-1;if(0===r)return null;n--,r--;for(var a=0;a<n;a++){var i=e.p[a];if(a>=r||i!==t.p[a])return null}return n},i.canOpAffectPath=function(e,t){return null!=i.commonLengthForOps({p:t},e)},i.transformComponent=function(e,t,n,s){t=a(t);var u=i.commonLengthForOps(n,t),d=i.commonLengthForOps(t,n),f=t.p.length,p=n.p.length;if((null!=t.na||t.t)&&f++,(null!=n.na||n.t)&&p++,null!=d&&p>f&&t.p[d]==n.p[d])if(void 0!==t.ld)(m=a(n)).p=m.p.slice(f),t.ld=i.apply(a(t.ld),[m]);else if(void 0!==t.od){(m=a(n)).p=m.p.slice(f),t.od=i.apply(a(t.od),[m])}if(null!=u){var h=f==p,m=n;if(null==t.si&&null==t.sd||null==n.si&&null==n.sd||(c(t),c(m=a(n))),m.t&&o[m.t]){if(t.t&&t.t===m.t){var g=o[t.t].transform(t.o,m.o,s);if(null!=t.si||null!=t.sd)for(var v=t.p,y=0;y<g.length;y++)t.o=[g[y]],t.p=v.slice(),l(t),i.append(e,t);else(!r(g)||g.length>0)&&(t.o=g,i.append(e,t));return e}}else if(void 0!==n.na);else if(void 0!==n.li&&void 0!==n.ld){if(n.p[u]===t.p[u]){if(!h)return e;if(void 0!==t.ld){if(void 0===t.li||"left"!==s)return e;t.ld=a(n.li)}}}else if(void 0!==n.li)void 0!==t.li&&void 0===t.ld&&h&&t.p[u]===n.p[u]?"right"===s&&t.p[u]++:n.p[u]<=t.p[u]&&t.p[u]++,void 0!==t.lm&&h&&n.p[u]<=t.lm&&t.lm++;else if(void 0!==n.ld){if(void 0!==t.lm&&h){if(n.p[u]===t.p[u])return e;v=n.p[u];var b=t.p[u];(v<(k=t.lm)||v===k&&b<k)&&t.lm--}if(n.p[u]<t.p[u])t.p[u]--;else if(n.p[u]===t.p[u]){if(p<f)return e;if(void 0!==t.ld){if(void 0===t.li)return e;delete t.ld}}}else if(void 0!==n.lm)if(void 0!==t.lm&&f===p){b=t.p[u];var k=t.lm,w=n.p[u],x=n.lm;if(w!==x)if(b===w){if("left"!==s)return e;t.p[u]=x,b===k&&(t.lm=x)}else b>w&&t.p[u]--,b>x?t.p[u]++:b===x&&w>x&&(t.p[u]++,b===k&&t.lm++),(k>w||k===w&&k>b)&&t.lm--,k>x?t.lm++:k===x&&(x>w&&k>b||x<w&&k<b?"right"===s&&t.lm++:k>b?t.lm++:k===w&&t.lm--)}else if(void 0!==t.li&&void 0===t.ld&&h){b=n.p[u],k=n.lm;(v=t.p[u])>b&&t.p[u]--,v>k&&t.p[u]++}else{b=n.p[u],k=n.lm;(v=t.p[u])===b?t.p[u]=k:(v>b&&t.p[u]--,(v>k||v===k&&b>k)&&t.p[u]++)}else if(void 0!==n.oi&&void 0!==n.od){if(t.p[u]===n.p[u]){if(void 0===t.oi||!h)return e;if("right"===s)return e;t.od=n.oi}}else if(void 0!==n.oi){if(void 0!==t.oi&&t.p[u]===n.p[u]){if("left"!==s)return e;i.append(e,{p:t.p,od:n.oi})}}else if(void 0!==n.od&&t.p[u]==n.p[u]){if(!h)return e;if(void 0===t.oi)return e;delete t.od}}return i.append(e,t),e},n(897)(i,i.transformComponent,i.checkValidOp,i.append);var u=n(1637);i.registerSubtype(u),e.exports=i},function(e,t,n){var r=e.exports={name:"text0",uri:"http://sharejs.org/types/textv0",create:function(e){if(null!=e&&"string"!=typeof e)throw new Error("Initial data must be a string");return e||""}},a=function(e,t,n){return e.slice(0,t)+n+e.slice(t)},i=function(e){if("number"!=typeof e.p)throw new Error("component missing position field");if("string"==typeof e.i==("string"==typeof e.d))throw new Error("component needs an i or d field");if(e.p<0)throw new Error("position cannot be negative")},o=function(e){for(var t=0;t<e.length;t++)i(e[t])};r.apply=function(e,t){var n;o(t);for(var r=0;r<t.length;r++){var i=t[r];if(null!=i.i)e=a(e,i.p,i.i);else{if(n=e.slice(i.p,i.p+i.d.length),i.d!==n)throw new Error("Delete component '"+i.d+"' does not match deleted text '"+n+"'");e=e.slice(0,i.p)+e.slice(i.p+i.d.length)}}return e};var c=r._append=function(e,t){if(""!==t.i&&""!==t.d)if(0===e.length)e.push(t);else{var n=e[e.length-1];null!=n.i&&null!=t.i&&n.p<=t.p&&t.p<=n.p+n.i.length?e[e.length-1]={i:a(n.i,t.p-n.p,t.i),p:n.p}:null!=n.d&&null!=t.d&&t.p<=n.p&&n.p<=t.p+t.d.length?e[e.length-1]={d:a(t.d,n.p-t.p,n.d),p:t.p}:e.push(t)}};r.compose=function(e,t){o(e),o(t);for(var n=e.slice(),r=0;r<t.length;r++)c(n,t[r]);return n},r.normalize=function(e){var t=[];null==e.i&&null==e.p||(e=[e]);for(var n=0;n<e.length;n++){var r=e[n];null==r.p&&(r.p=0),c(t,r)}return t};var l=function(e,t,n){return null!=t.i?t.p<e||t.p===e&&n?e+t.i.length:e:e<=t.p?e:e<=t.p+t.d.length?t.p:e-t.d.length};r.transformCursor=function(e,t,n){for(var r="right"===n,a=0;a<t.length;a++)e=l(e,t[a],r);return e};var s=r._tc=function(e,t,n,r){if(i(t),i(n),null!=t.i)c(e,{i:t.i,p:l(t.p,n,"right"===r)});else if(null!=n.i){var a=t.d;t.p<n.p&&(c(e,{d:a.slice(0,n.p-t.p),p:t.p}),a=a.slice(n.p-t.p)),""!==a&&c(e,{d:a,p:t.p+n.i.length})}else if(t.p>=n.p+n.d.length)c(e,{d:t.d,p:t.p-n.d.length});else if(t.p+t.d.length<=n.p)c(e,t);else{var o={d:"",p:t.p};t.p<n.p&&(o.d=t.d.slice(0,n.p-t.p)),t.p+t.d.length>n.p+n.d.length&&(o.d+=t.d.slice(n.p+n.d.length-t.p));var s=Math.max(t.p,n.p),u=Math.min(t.p+t.d.length,n.p+n.d.length);if(t.d.slice(s-t.p,u-t.p)!==n.d.slice(s-n.p,u-n.p))throw new Error("Delete ops delete different text in the same region of the document");""!==o.d&&(o.p=l(o.p,n),c(e,o))}return e};r.invert=function(e){e=e.slice().reverse();for(var t=0;t<e.length;t++)e[t]=null!=(n=e[t]).i?{d:n.i,p:n.p}:{i:n.d,p:n.p};var n;return e},n(897)(r,s,o,c)},function(e,t,n){var r=n(4);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}},,,,,,,,function(e,t,n){var r=n(900),a=n(1647);n(901);function i(e){return null==e}function o(e){(e=function(e){var t={};for(var n in e)t[n]=e[n];return t}(e||{})).whiteList=e.whiteList||r.whiteList,e.onAttr=e.onAttr||r.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||r.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||r.safeAttrValue,this.options=e}o.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,n=t.whiteList,r=t.onAttr,o=t.onIgnoreAttr,c=t.safeAttrValue;return a(e,(function(e,t,a,l,s){var u=n[a],d=!1;if(!0===u?d=u:"function"==typeof u?d=u(l):u instanceof RegExp&&(d=u.test(l)),!0!==d&&(d=!1),l=c(a,l)){var f,p={position:t,sourcePosition:e,source:s,isWhite:d};return d?i(f=r(a,l,p))?a+":"+l:f:i(f=o(a,l,p))?void 0:f}}))},e.exports=o},function(e,t,n){var r=n(901);e.exports=function(e,t){";"!==(e=r.trimRight(e))[e.length-1]&&(e+=";");var n=e.length,a=!1,i=0,o=0,c="";function l(){if(!a){var n=r.trim(e.slice(i,o)),l=n.indexOf(":");if(-1!==l){var s=r.trim(n.slice(0,l)),u=r.trim(n.slice(l+1));if(s){var d=t(i,c.length,s,u,n);d&&(c+=d+"; ")}}}i=o+1}for(;o<n;o++){var s=e[o];if("/"===s&&"*"===e[o+1]){var u=e.indexOf("*/",o+2);if(-1===u)break;i=(o=u+1)+1,a=!1}else"("===s?a=!0:")"===s?a=!1:";"===s?a||l():"\n"===s&&l()}return r.trim(c)}},function(e,t,n){var r=n(613).FilterCSS,a=n(899),i=n(902),o=i.parseTag,c=i.parseAttr,l=n(614);function s(e){return null==e}function u(e){(e=function(e){var t={};for(var n in e)t[n]=e[n];return t}(e||{})).stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=a.onIgnoreTagStripAll),e.whiteList=e.whiteList||a.whiteList,e.onTag=e.onTag||a.onTag,e.onTagAttr=e.onTagAttr||a.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||a.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||a.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||a.safeAttrValue,e.escapeHtml=e.escapeHtml||a.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new r(e.css))}u.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,n=t.whiteList,r=t.onTag,i=t.onIgnoreTag,u=t.onTagAttr,d=t.onIgnoreTagAttr,f=t.safeAttrValue,p=t.escapeHtml,h=this.cssFilter;t.stripBlankChar&&(e=a.stripBlankChar(e)),t.allowCommentTag||(e=a.stripCommentTag(e));var m=!1;if(t.stripIgnoreTagBody){m=a.StripTagBody(t.stripIgnoreTagBody,i);i=m.onIgnoreTag}var g=o(e,(function(e,t,a,o,m){var g,v={sourcePosition:e,position:t,isClosing:m,isWhite:n.hasOwnProperty(a)};if(!s(g=r(a,o,v)))return g;if(v.isWhite){if(v.isClosing)return"</"+a+">";var y=function(e){var t=l.spaceIndex(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var n="/"===(e=l.trim(e.slice(t+1,-1)))[e.length-1];return n&&(e=l.trim(e.slice(0,-1))),{html:e,closing:n}}(o),b=n[a],k=c(y.html,(function(e,t){var n,r=-1!==l.indexOf(b,e);return s(n=u(a,e,t,r))?r?(t=f(a,e,t,h))?e+'="'+t+'"':e:s(n=d(a,e,t,r))?void 0:n:n}));o="<"+a;return k&&(o+=" "+k),y.closing&&(o+=" /"),o+=">"}return s(g=i(a,o,v))?p(o):g}),p);return m&&(g=m.remove(g)),g},e.exports=u},function(e,t,n){"use strict";var r=n(1650),a=n(1651),i=n(903),o=n(1652),c=n(1653);function l(e){if(!(this instanceof l))return new l(e);var t=r(e);this.segments=t.segments,this.err=t.err,this.__stack=[]}l.from=function(e){if("string"==typeof e)return new l(e);if(e instanceof l){var t=new l("");return t.err=e.err,t.segments=e.segments.map((function(e){return e.slice()})),t.__stack=e.__stack.map((function(e){return i().matrix(e.toArray())})),t}throw new Error("SvgPath.from: invalid param type "+e)},l.prototype.__matrix=function(e){var t,n=this;e.queue.length&&this.iterate((function(r,a,i,o){var l,s,u,d;switch(r[0]){case"v":s=0===(l=e.calc(0,r[1],!0))[0]?["v",l[1]]:["l",l[0],l[1]];break;case"V":s=(l=e.calc(i,r[1],!1))[0]===e.calc(i,o,!1)[0]?["V",l[1]]:["L",l[0],l[1]];break;case"h":s=0===(l=e.calc(r[1],0,!0))[1]?["h",l[0]]:["l",l[0],l[1]];break;case"H":s=(l=e.calc(r[1],o,!1))[1]===e.calc(i,o,!1)[1]?["H",l[0]]:["L",l[0],l[1]];break;case"a":case"A":var f=e.toArray(),p=c(r[1],r[2],r[3]).transform(f);if(f[0]*f[3]-f[1]*f[2]<0&&(r[5]=r[5]?"0":"1"),l=e.calc(r[6],r[7],"a"===r[0]),"A"===r[0]&&r[6]===i&&r[7]===o||"a"===r[0]&&0===r[6]&&0===r[7]){s=["a"===r[0]?"l":"L",l[0],l[1]];break}s=p.isDegenerate()?["a"===r[0]?"l":"L",l[0],l[1]]:[r[0],p.rx,p.ry,p.ax,r[4],r[5],l[0],l[1]];break;case"m":d=a>0,s=["m",(l=e.calc(r[1],r[2],d))[0],l[1]];break;default:for(s=[u=r[0]],d=u.toLowerCase()===u,t=1;t<r.length;t+=2)l=e.calc(r[t],r[t+1],d),s.push(l[0],l[1])}n.segments[a]=s}),!0)},l.prototype.__evaluateStack=function(){var e,t;if(this.__stack.length){if(1===this.__stack.length)return this.__matrix(this.__stack[0]),void(this.__stack=[]);for(e=i(),t=this.__stack.length;--t>=0;)e.matrix(this.__stack[t].toArray());this.__matrix(e),this.__stack=[]}},l.prototype.toString=function(){var e,t,n=[];this.__evaluateStack();for(var r=0;r<this.segments.length;r++)t=this.segments[r][0],e=r>0&&"m"!==t&&"M"!==t&&t===this.segments[r-1][0],n=n.concat(e?this.segments[r].slice(1):this.segments[r]);return n.join(" ").replace(/ ?([achlmqrstvz]) ?/gi,"$1").replace(/ \-/g,"-").replace(/zm/g,"z m")},l.prototype.translate=function(e,t){return this.__stack.push(i().translate(e,t||0)),this},l.prototype.scale=function(e,t){return this.__stack.push(i().scale(e,t||0===t?t:e)),this},l.prototype.rotate=function(e,t,n){return this.__stack.push(i().rotate(e,t||0,n||0)),this},l.prototype.skewX=function(e){return this.__stack.push(i().skewX(e)),this},l.prototype.skewY=function(e){return this.__stack.push(i().skewY(e)),this},l.prototype.matrix=function(e){return this.__stack.push(i().matrix(e)),this},l.prototype.transform=function(e){return e.trim()?(this.__stack.push(a(e)),this):this},l.prototype.round=function(e){var t,n=0,r=0,a=0,i=0;return e=e||0,this.__evaluateStack(),this.segments.forEach((function(o){var c=o[0].toLowerCase()===o[0];switch(o[0]){case"H":case"h":return c&&(o[1]+=a),a=o[1]-o[1].toFixed(e),void(o[1]=+o[1].toFixed(e));case"V":case"v":return c&&(o[1]+=i),i=o[1]-o[1].toFixed(e),void(o[1]=+o[1].toFixed(e));case"Z":case"z":return a=n,void(i=r);case"M":case"m":return c&&(o[1]+=a,o[2]+=i),a=o[1]-o[1].toFixed(e),i=o[2]-o[2].toFixed(e),n=a,r=i,o[1]=+o[1].toFixed(e),void(o[2]=+o[2].toFixed(e));case"A":case"a":return c&&(o[6]+=a,o[7]+=i),a=o[6]-o[6].toFixed(e),i=o[7]-o[7].toFixed(e),o[1]=+o[1].toFixed(e),o[2]=+o[2].toFixed(e),o[3]=+o[3].toFixed(e+2),o[6]=+o[6].toFixed(e),void(o[7]=+o[7].toFixed(e));default:return t=o.length,c&&(o[t-2]+=a,o[t-1]+=i),a=o[t-2]-o[t-2].toFixed(e),i=o[t-1]-o[t-1].toFixed(e),void o.forEach((function(t,n){n&&(o[n]=+o[n].toFixed(e))}))}})),this},l.prototype.iterate=function(e,t){var n,r,a,i=this.segments,o={},c=!1,l=0,s=0,u=0,d=0;if(t||this.__evaluateStack(),i.forEach((function(t,n){var r=e(t,n,l,s);Array.isArray(r)&&(o[n]=r,c=!0);var a=t[0]===t[0].toLowerCase();switch(t[0]){case"m":case"M":return l=t[1]+(a?l:0),s=t[2]+(a?s:0),u=l,void(d=s);case"h":case"H":return void(l=t[1]+(a?l:0));case"v":case"V":return void(s=t[1]+(a?s:0));case"z":case"Z":return l=u,void(s=d);default:l=t[t.length-2]+(a?l:0),s=t[t.length-1]+(a?s:0)}})),!c)return this;for(a=[],n=0;n<i.length;n++)if(void 0!==o[n])for(r=0;r<o[n].length;r++)a.push(o[n][r]);else a.push(i[n]);return this.segments=a,this},l.prototype.abs=function(){return this.iterate((function(e,t,n,r){var a,i=e[0],o=i.toUpperCase();if(i!==o)switch(e[0]=o,i){case"v":return void(e[1]+=r);case"a":return e[6]+=n,void(e[7]+=r);default:for(a=1;a<e.length;a++)e[a]+=a%2?n:r}}),!0),this},l.prototype.rel=function(){return this.iterate((function(e,t,n,r){var a,i=e[0],o=i.toLowerCase();if(i!==o&&(0!==t||"M"!==i))switch(e[0]=o,i){case"V":return void(e[1]-=r);case"A":return e[6]-=n,void(e[7]-=r);default:for(a=1;a<e.length;a++)e[a]-=a%2?n:r}}),!0),this},l.prototype.unarc=function(){return this.iterate((function(e,t,n,r){var a,i,c,l=[],s=e[0];return"A"!==s&&"a"!==s?null:("a"===s?(i=n+e[6],c=r+e[7]):(i=e[6],c=e[7]),0===(a=o(n,r,i,c,e[4],e[5],e[1],e[2],e[3])).length?[["a"===e[0]?"l":"L",e[6],e[7]]]:(a.forEach((function(e){l.push(["C",e[2],e[3],e[4],e[5],e[6],e[7]])})),l))})),this},l.prototype.unshort=function(){var e,t,n,r,a,i=this.segments;return this.iterate((function(o,c,l,s){var u,d=o[0],f=d.toUpperCase();c&&("T"===f?(u="t"===d,"Q"===(n=i[c-1])[0]?(e=n[1]-l,t=n[2]-s):"q"===n[0]?(e=n[1]-n[3],t=n[2]-n[4]):(e=0,t=0),r=-e,a=-t,u||(r+=l,a+=s),i[c]=[u?"q":"Q",r,a,o[1],o[2]]):"S"===f&&(u="s"===d,"C"===(n=i[c-1])[0]?(e=n[3]-l,t=n[4]-s):"c"===n[0]?(e=n[3]-n[5],t=n[4]-n[6]):(e=0,t=0),r=-e,a=-t,u||(r+=l,a+=s),i[c]=[u?"c":"C",r,a,o[1],o[2],o[3],o[4]]))})),this},e.exports=l},function(e,t,n){"use strict";var r={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},a=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function i(e){return e>=48&&e<=57}function o(e){return e>=48&&e<=57||43===e||45===e||46===e}function c(e){this.index=0,this.path=e,this.max=e.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function l(e){for(;e.index<e.max&&(10===(t=e.path.charCodeAt(e.index))||13===t||8232===t||8233===t||32===t||9===t||11===t||12===t||160===t||t>=5760&&a.indexOf(t)>=0);)e.index++;var t}function s(e){var t=e.path.charCodeAt(e.index);return 48===t?(e.param=0,void e.index++):49===t?(e.param=1,void e.index++):void(e.err="SvgPath: arc flag can be 0 or 1 only (at pos "+e.index+")")}function u(e){var t,n=e.index,r=n,a=e.max,o=!1,c=!1,l=!1,s=!1;if(r>=a)e.err="SvgPath: missed param (at pos "+r+")";else if(43!==(t=e.path.charCodeAt(r))&&45!==t||(t=++r<a?e.path.charCodeAt(r):0),i(t)||46===t){if(46!==t){if(o=48===t,t=++r<a?e.path.charCodeAt(r):0,o&&r<a&&t&&i(t))return void(e.err="SvgPath: numbers started with `0` such as `09` are illegal (at pos "+n+")");for(;r<a&&i(e.path.charCodeAt(r));)r++,c=!0;t=r<a?e.path.charCodeAt(r):0}if(46===t){for(s=!0,r++;i(e.path.charCodeAt(r));)r++,l=!0;t=r<a?e.path.charCodeAt(r):0}if(101===t||69===t){if(s&&!c&&!l)return void(e.err="SvgPath: invalid float exponent (at pos "+r+")");if(43!==(t=++r<a?e.path.charCodeAt(r):0)&&45!==t||r++,!(r<a&&i(e.path.charCodeAt(r))))return void(e.err="SvgPath: invalid float exponent (at pos "+r+")");for(;r<a&&i(e.path.charCodeAt(r));)r++}e.index=r,e.param=parseFloat(e.path.slice(n,r))+0}else e.err="SvgPath: param should start with 0..9 or `.` (at pos "+r+")"}function d(e){var t,n;n=(t=e.path[e.segmentStart]).toLowerCase();var a=e.data;if("m"===n&&a.length>2&&(e.result.push([t,a[0],a[1]]),a=a.slice(2),n="l",t="m"===t?"l":"L"),"r"===n)e.result.push([t].concat(a));else for(;a.length>=r[n]&&(e.result.push([t].concat(a.splice(0,r[n]))),r[n]););}function f(e){var t,n,a,i,c,f=e.max;if(e.segmentStart=e.index,t=e.path.charCodeAt(e.index),n=97==(32|t),function(e){switch(32|e){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}(t))if(i=r[e.path[e.index].toLowerCase()],e.index++,l(e),e.data=[],i){for(a=!1;;){for(c=i;c>0;c--){if(!n||3!==c&&4!==c?u(e):s(e),e.err.length)return;e.data.push(e.param),l(e),a=!1,e.index<f&&44===e.path.charCodeAt(e.index)&&(e.index++,l(e),a=!0)}if(!a){if(e.index>=e.max)break;if(!o(e.path.charCodeAt(e.index)))break}}d(e)}else d(e);else e.err="SvgPath: bad command "+e.path[e.index]+" (at pos "+e.index+")"}e.exports=function(e){var t=new c(e),n=t.max;for(l(t);t.index<n&&!t.err.length;)f(t);return t.err.length?t.result=[]:t.result.length&&("mM".indexOf(t.result[0][0])<0?(t.err="SvgPath: string should start with `M` or `m`",t.result=[]):t.result[0][0]="M"),{err:t.err,segments:t.result}}},function(e,t,n){"use strict";var r=n(903),a={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},i=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,o=/[\s,]+/;e.exports=function(e){var t,n,c=new r;return e.split(i).forEach((function(e){if(e.length)if(void 0===a[e])switch(n=e.split(o).map((function(e){return+e||0})),t){case"matrix":return void(6===n.length&&c.matrix(n));case"scale":return void(1===n.length?c.scale(n[0],n[0]):2===n.length&&c.scale(n[0],n[1]));case"rotate":return void(1===n.length?c.rotate(n[0],0,0):3===n.length&&c.rotate(n[0],n[1],n[2]));case"translate":return void(1===n.length?c.translate(n[0],0):2===n.length&&c.translate(n[0],n[1]));case"skewX":return void(1===n.length&&c.skewX(n[0]));case"skewY":return void(1===n.length&&c.skewY(n[0]))}else t=e})),c}},function(e,t,n){"use strict";var r=2*Math.PI;function a(e,t,n,r){var a=e*n+t*r;return a>1&&(a=1),a<-1&&(a=-1),(e*r-t*n<0?-1:1)*Math.acos(a)}function i(e,t){var n=4/3*Math.tan(t/4),r=Math.cos(e),a=Math.sin(e),i=Math.cos(e+t),o=Math.sin(e+t);return[r,a,r-a*n,a+r*n,i+o*n,o-i*n,i,o]}e.exports=function(e,t,n,o,c,l,s,u,d){var f=Math.sin(d*r/360),p=Math.cos(d*r/360),h=p*(e-n)/2+f*(t-o)/2,m=-f*(e-n)/2+p*(t-o)/2;if(0===h&&0===m)return[];if(0===s||0===u)return[];s=Math.abs(s),u=Math.abs(u);var g=h*h/(s*s)+m*m/(u*u);g>1&&(s*=Math.sqrt(g),u*=Math.sqrt(g));var v=function(e,t,n,i,o,c,l,s,u,d){var f=d*(e-n)/2+u*(t-i)/2,p=-u*(e-n)/2+d*(t-i)/2,h=l*l,m=s*s,g=f*f,v=p*p,y=h*m-h*v-m*g;y<0&&(y=0),y/=h*v+m*g;var b=(y=Math.sqrt(y)*(o===c?-1:1))*l/s*p,k=y*-s/l*f,w=d*b-u*k+(e+n)/2,x=u*b+d*k+(t+i)/2,_=(f-b)/l,C=(p-k)/s,E=(-f-b)/l,O=(-p-k)/s,S=a(1,0,_,C),R=a(_,C,E,O);return 0===c&&R>0&&(R-=r),1===c&&R<0&&(R+=r),[w,x,S,R]}(e,t,n,o,c,l,s,u,f,p),y=[],b=v[2],k=v[3],w=Math.max(Math.ceil(Math.abs(k)/(r/4)),1);k/=w;for(var x=0;x<w;x++)y.push(i(b,k)),b+=k;return y.map((function(e){for(var t=0;t<e.length;t+=2){var n=e[t+0],r=e[t+1],a=p*(n*=s)-f*(r*=u),i=f*n+p*r;e[t+0]=a+v[0],e[t+1]=i+v[1]}return e}))}},function(e,t,n){"use strict";var r=1e-10,a=Math.PI/180;function i(e,t,n){if(!(this instanceof i))return new i(e,t,n);this.rx=e,this.ry=t,this.ax=n}i.prototype.transform=function(e){var t=Math.cos(this.ax*a),n=Math.sin(this.ax*a),i=[this.rx*(e[0]*t+e[2]*n),this.rx*(e[1]*t+e[3]*n),this.ry*(-e[0]*n+e[2]*t),this.ry*(-e[1]*n+e[3]*t)],o=i[0]*i[0]+i[2]*i[2],c=i[1]*i[1]+i[3]*i[3],l=((i[0]-i[3])*(i[0]-i[3])+(i[2]+i[1])*(i[2]+i[1]))*((i[0]+i[3])*(i[0]+i[3])+(i[2]-i[1])*(i[2]-i[1])),s=(o+c)/2;if(l<r*s)return this.rx=this.ry=Math.sqrt(s),this.ax=0,this;var u=i[0]*i[1]+i[2]*i[3],d=s+(l=Math.sqrt(l))/2,f=s-l/2;return this.ax=Math.abs(u)<r&&Math.abs(d-c)<r?90:180*Math.atan(Math.abs(u)>Math.abs(d-c)?(d-o)/u:u/(d-c))/Math.PI,this.ax>=0?(this.rx=Math.sqrt(d),this.ry=Math.sqrt(f)):(this.ax+=90,this.rx=Math.sqrt(f),this.ry=Math.sqrt(d)),this},i.prototype.isDegenerate=function(){return this.rx<r*this.ry||this.ry<r*this.rx},e.exports=i},function(e,t,n){"use strict";n(1834);var r=n(1011);n(1e3);t.a=r.a},function(e,t,n){},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(69),o=n(81),c=n.n(o),l=n(213),s=n(99),u=n(517);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=new c.a("sys:guide");t.a=Object(s.b)(Object(i.c)((function(e){return{guide:e.guide}}))((function(e){var t=e.guide,n=l.a.FEATURES.filter((function(e){return!1!==e.enable})),i=d(Object(r.useState)(!1),2),o=i[0],c=i[1];return Object(r.useEffect)((function(){setTimeout((function(){c(!0)}),1e3)}),[]),o?a.a.createElement(a.a.Fragment,null,n.map((function(n){if(p("process:","".concat(n.area,"_").concat(n.tip_id)),i=n.tip_id,"#guide"===window.location.hash||!t.readTip[i]){var r=n.containerSelector||'[data-feature-guide-portal="'.concat(n.tip_id,'"]');return p("selector to show guide",r),a.a.createElement("span",{key:n.area,"data-testid":n.tip_id},a.a.createElement(u.a,{type:n.type,placement:n.placement,tip:n.tip,offsetY:n.offsetY,containerSelector:r,readTrigger:n.readTrigger||[],guideSignContainerStyle:n.guideSignContainerStyle,onRead:function(){!function(t){"lite"===t.type?l.a.readLiteFeatureGuide(t):l.a.readMiniFeatureGuide(t,e.dispatch)}(n)},enableMultiLines:n.enableMultiLines}))}var i;return p("guide already read, just render empty node"),a.a.createElement("span",{key:n.area,"data-testid":n.tip_id,"data-feature-guide-read":n.tip_id})}))):null})),!1)},function(e,t,n){"use strict";n(1835);var r=n(1012);n(1001);t.a=r.a},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(1614))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},function(e,t,n){"use strict";var r=n(1660),a=n(284),i=n(906),o=n(615),c=n(907),l=Object.prototype.toString;function s(e){if(!(this instanceof s))return new s(e);this.options=a.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==n)throw new Error(o[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var u;if(u="string"==typeof t.dictionary?i.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(n=r.deflateSetDictionary(this.strm,u)))throw new Error(o[n]);this._dict_set=!0}}function u(e,t){var n=new s(t);if(n.push(e,!0),n.err)throw n.msg||o[n.err];return n.result}s.prototype.push=function(e,t){var n,o,c=this.strm,s=this.options.chunkSize;if(this.ended)return!1;o=t===~~t?t:!0===t?4:0,"string"==typeof e?c.input=i.string2buf(e):"[object ArrayBuffer]"===l.call(e)?c.input=new Uint8Array(e):c.input=e,c.next_in=0,c.avail_in=c.input.length;do{if(0===c.avail_out&&(c.output=new a.Buf8(s),c.next_out=0,c.avail_out=s),1!==(n=r.deflate(c,o))&&0!==n)return this.onEnd(n),this.ended=!0,!1;0!==c.avail_out&&(0!==c.avail_in||4!==o&&2!==o)||("string"===this.options.to?this.onData(i.buf2binstring(a.shrinkBuf(c.output,c.next_out))):this.onData(a.shrinkBuf(c.output,c.next_out)))}while((c.avail_in>0||0===c.avail_out)&&1!==n);return 4===o?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==o||(this.onEnd(0),c.avail_out=0,!0)},s.prototype.onData=function(e){this.chunks.push(e)},s.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=s,t.deflate=u,t.deflateRaw=function(e,t){return(t=t||{}).raw=!0,u(e,t)},t.gzip=function(e,t){return(t=t||{}).gzip=!0,u(e,t)}},function(e,t,n){"use strict";var r,a=n(284),i=n(1661),o=n(904),c=n(905),l=n(615),s=-2,u=258,d=262,f=103,p=113,h=666;function m(e,t){return e.msg=l[t],t}function g(e){return(e<<1)-(e>4?9:0)}function v(e){for(var t=e.length;--t>=0;)e[t]=0}function y(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(a.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function b(e,t){i._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,y(e.strm)}function k(e,t){e.pending_buf[e.pending++]=t}function w(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function x(e,t){var n,r,a=e.max_chain_length,i=e.strstart,o=e.prev_length,c=e.nice_match,l=e.strstart>e.w_size-d?e.strstart-(e.w_size-d):0,s=e.window,f=e.w_mask,p=e.prev,h=e.strstart+u,m=s[i+o-1],g=s[i+o];e.prev_length>=e.good_match&&(a>>=2),c>e.lookahead&&(c=e.lookahead);do{if(s[(n=t)+o]===g&&s[n+o-1]===m&&s[n]===s[i]&&s[++n]===s[i+1]){i+=2,n++;do{}while(s[++i]===s[++n]&&s[++i]===s[++n]&&s[++i]===s[++n]&&s[++i]===s[++n]&&s[++i]===s[++n]&&s[++i]===s[++n]&&s[++i]===s[++n]&&s[++i]===s[++n]&&i<h);if(r=u-(h-i),i=h-u,r>o){if(e.match_start=t,o=r,r>=c)break;m=s[i+o-1],g=s[i+o]}}}while((t=p[t&f])>l&&0!=--a);return o<=e.lookahead?o:e.lookahead}function _(e){var t,n,r,i,l,s,u,f,p,h,m=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=m+(m-d)){a.arraySet(e.window,e.window,m,m,0),e.match_start-=m,e.strstart-=m,e.block_start-=m,t=n=e.hash_size;do{r=e.head[--t],e.head[t]=r>=m?r-m:0}while(--n);t=n=m;do{r=e.prev[--t],e.prev[t]=r>=m?r-m:0}while(--n);i+=m}if(0===e.strm.avail_in)break;if(s=e.strm,u=e.window,f=e.strstart+e.lookahead,p=i,h=void 0,(h=s.avail_in)>p&&(h=p),n=0===h?0:(s.avail_in-=h,a.arraySet(u,s.input,s.next_in,h,f),1===s.state.wrap?s.adler=o(s.adler,u,h,f):2===s.state.wrap&&(s.adler=c(s.adler,u,h,f)),s.next_in+=h,s.total_in+=h,h),e.lookahead+=n,e.lookahead+e.insert>=3)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+3-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<d&&0!==e.strm.avail_in)}function C(e,t){for(var n,r;;){if(e.lookahead<d){if(_(e),e.lookahead<d&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-d&&(e.match_length=x(e,n)),e.match_length>=3)if(r=i._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}function E(e,t){for(var n,r,a;;){if(e.lookahead<d){if(_(e),e.lookahead<d&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-d&&(e.match_length=x(e,n),e.match_length<=5&&(1===e.strategy||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-3,r=i._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=a&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(b(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=i._tr_tally(e,0,e.window[e.strstart-1]))&&b(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=i._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}function O(e,t,n,r,a){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=a}function S(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(1146),this.dyn_dtree=new a.Buf16(122),this.bl_tree=new a.Buf16(78),v(this.dyn_ltree),v(this.dyn_dtree),v(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(16),this.heap=new a.Buf16(573),v(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(573),v(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function R(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:p,e.adler=2===t.wrap?0:1,t.last_flush=0,i._tr_init(t),0):m(e,s)}function D(e){var t,n=R(e);return 0===n&&((t=e.state).window_size=2*t.w_size,v(t.head),t.max_lazy_match=r[t.level].max_lazy,t.good_match=r[t.level].good_length,t.nice_match=r[t.level].nice_length,t.max_chain_length=r[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),n}function A(e,t,n,r,i,o){if(!e)return s;var c=1;if(-1===t&&(t=6),r<0?(c=0,r=-r):r>15&&(c=2,r-=16),i<1||i>9||8!==n||r<8||r>15||t<0||t>9||o<0||o>4)return m(e,s);8===r&&(r=9);var l=new S;return e.state=l,l.strm=e,l.wrap=c,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=i+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new a.Buf8(2*l.w_size),l.head=new a.Buf16(l.hash_size),l.prev=new a.Buf16(l.w_size),l.lit_bufsize=1<<i+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new a.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=o,l.method=n,D(e)}r=[new O(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(_(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,b(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-d&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(b(e,!1),e.strm.avail_out),1)})),new O(4,4,8,4,C),new O(4,5,16,8,C),new O(4,6,32,32,C),new O(4,4,16,16,E),new O(8,16,32,32,E),new O(8,16,128,128,E),new O(8,32,128,256,E),new O(32,128,258,1024,E),new O(32,258,258,4096,E)],t.deflateInit=function(e,t){return A(e,t,8,15,8,0)},t.deflateInit2=A,t.deflateReset=D,t.deflateResetKeep=R,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?s:(e.state.gzhead=t,0):s},t.deflate=function(e,t){var n,a,o,l;if(!e||!e.state||t>5||t<0)return e?m(e,s):s;if(a=e.state,!e.output||!e.input&&0!==e.avail_in||a.status===h&&4!==t)return m(e,0===e.avail_out?-5:s);if(a.strm=e,n=a.last_flush,a.last_flush=t,42===a.status)if(2===a.wrap)e.adler=0,k(a,31),k(a,139),k(a,8),a.gzhead?(k(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),k(a,255&a.gzhead.time),k(a,a.gzhead.time>>8&255),k(a,a.gzhead.time>>16&255),k(a,a.gzhead.time>>24&255),k(a,9===a.level?2:a.strategy>=2||a.level<2?4:0),k(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(k(a,255&a.gzhead.extra.length),k(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(e.adler=c(e.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69):(k(a,0),k(a,0),k(a,0),k(a,0),k(a,0),k(a,9===a.level?2:a.strategy>=2||a.level<2?4:0),k(a,3),a.status=p);else{var d=8+(a.w_bits-8<<4)<<8;d|=(a.strategy>=2||a.level<2?0:a.level<6?1:6===a.level?2:3)<<6,0!==a.strstart&&(d|=32),d+=31-d%31,a.status=p,w(a,d),0!==a.strstart&&(w(a,e.adler>>>16),w(a,65535&e.adler)),e.adler=1}if(69===a.status)if(a.gzhead.extra){for(o=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>o&&(e.adler=c(e.adler,a.pending_buf,a.pending-o,o)),y(e),o=a.pending,a.pending!==a.pending_buf_size));)k(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>o&&(e.adler=c(e.adler,a.pending_buf,a.pending-o,o)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=73)}else a.status=73;if(73===a.status)if(a.gzhead.name){o=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>o&&(e.adler=c(e.adler,a.pending_buf,a.pending-o,o)),y(e),o=a.pending,a.pending===a.pending_buf_size)){l=1;break}l=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,k(a,l)}while(0!==l);a.gzhead.hcrc&&a.pending>o&&(e.adler=c(e.adler,a.pending_buf,a.pending-o,o)),0===l&&(a.gzindex=0,a.status=91)}else a.status=91;if(91===a.status)if(a.gzhead.comment){o=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>o&&(e.adler=c(e.adler,a.pending_buf,a.pending-o,o)),y(e),o=a.pending,a.pending===a.pending_buf_size)){l=1;break}l=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,k(a,l)}while(0!==l);a.gzhead.hcrc&&a.pending>o&&(e.adler=c(e.adler,a.pending_buf,a.pending-o,o)),0===l&&(a.status=f)}else a.status=f;if(a.status===f&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&y(e),a.pending+2<=a.pending_buf_size&&(k(a,255&e.adler),k(a,e.adler>>8&255),e.adler=0,a.status=p)):a.status=p),0!==a.pending){if(y(e),0===e.avail_out)return a.last_flush=-1,0}else if(0===e.avail_in&&g(t)<=g(n)&&4!==t)return m(e,-5);if(a.status===h&&0!==e.avail_in)return m(e,-5);if(0!==e.avail_in||0!==a.lookahead||0!==t&&a.status!==h){var x=2===a.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(_(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,n=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}(a,t):3===a.strategy?function(e,t){for(var n,r,a,o,c=e.window;;){if(e.lookahead<=u){if(_(e),e.lookahead<=u&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=c[a=e.strstart-1])===c[++a]&&r===c[++a]&&r===c[++a]){o=e.strstart+u;do{}while(r===c[++a]&&r===c[++a]&&r===c[++a]&&r===c[++a]&&r===c[++a]&&r===c[++a]&&r===c[++a]&&r===c[++a]&&a<o);e.match_length=u-(o-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=i._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}(a,t):r[a.level].func(a,t);if(3!==x&&4!==x||(a.status=h),1===x||3===x)return 0===e.avail_out&&(a.last_flush=-1),0;if(2===x&&(1===t?i._tr_align(a):5!==t&&(i._tr_stored_block(a,0,0,!1),3===t&&(v(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),y(e),0===e.avail_out))return a.last_flush=-1,0}return 4!==t?0:a.wrap<=0?1:(2===a.wrap?(k(a,255&e.adler),k(a,e.adler>>8&255),k(a,e.adler>>16&255),k(a,e.adler>>24&255),k(a,255&e.total_in),k(a,e.total_in>>8&255),k(a,e.total_in>>16&255),k(a,e.total_in>>24&255)):(w(a,e.adler>>>16),w(a,65535&e.adler)),y(e),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?0:1)},t.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&t!==f&&t!==p&&t!==h?m(e,s):(e.state=null,t===p?m(e,-3):0):s},t.deflateSetDictionary=function(e,t){var n,r,i,c,l,u,d,f,p=t.length;if(!e||!e.state)return s;if(2===(c=(n=e.state).wrap)||1===c&&42!==n.status||n.lookahead)return s;for(1===c&&(e.adler=o(e.adler,t,p,0)),n.wrap=0,p>=n.w_size&&(0===c&&(v(n.head),n.strstart=0,n.block_start=0,n.insert=0),f=new a.Buf8(n.w_size),a.arraySet(f,t,p-n.w_size,n.w_size,0),t=f,p=n.w_size),l=e.avail_in,u=e.next_in,d=e.input,e.avail_in=p,e.next_in=0,e.input=t,_(n);n.lookahead>=3;){r=n.strstart,i=n.lookahead-2;do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--i);n.strstart=r,n.lookahead=2,_(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=u,e.input=d,e.avail_in=l,n.wrap=c,0},t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t,n){"use strict";var r=n(284);function a(e){for(var t=e.length;--t>=0;)e[t]=0}var i=256,o=286,c=30,l=15,s=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],u=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],f=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],p=new Array(576);a(p);var h=new Array(60);a(h);var m=new Array(512);a(m);var g=new Array(256);a(g);var v=new Array(29);a(v);var y,b,k,w=new Array(c);function x(e,t,n,r,a){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=a,this.has_stree=e&&e.length}function _(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function C(e){return e<256?m[e]:m[256+(e>>>7)]}function E(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function O(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,E(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function S(e,t,n){O(e,n[2*t],n[2*t+1])}function R(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function D(e,t,n){var r,a,i=new Array(16),o=0;for(r=1;r<=l;r++)i[r]=o=o+n[r-1]<<1;for(a=0;a<=t;a++){var c=e[2*a+1];0!==c&&(e[2*a]=R(i[c]++,c))}}function A(e){var t;for(t=0;t<o;t++)e.dyn_ltree[2*t]=0;for(t=0;t<c;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function T(e){e.bi_valid>8?E(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function P(e,t,n,r){var a=2*t,i=2*n;return e[a]<e[i]||e[a]===e[i]&&r[t]<=r[n]}function j(e,t,n){for(var r=e.heap[n],a=n<<1;a<=e.heap_len&&(a<e.heap_len&&P(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!P(t,r,e.heap[a],e.depth));)e.heap[n]=e.heap[a],n=a,a<<=1;e.heap[n]=r}function M(e,t,n){var r,a,o,c,l=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],a=e.pending_buf[e.l_buf+l],l++,0===r?S(e,a,t):(S(e,(o=g[a])+i+1,t),0!==(c=s[o])&&O(e,a-=v[o],c),S(e,o=C(--r),n),0!==(c=u[o])&&O(e,r-=w[o],c))}while(l<e.last_lit);S(e,256,t)}function N(e,t){var n,r,a,i=t.dyn_tree,o=t.stat_desc.static_tree,c=t.stat_desc.has_stree,s=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<s;n++)0!==i[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):i[2*n+1]=0;for(;e.heap_len<2;)i[2*(a=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[a]=0,e.opt_len--,c&&(e.static_len-=o[2*a+1]);for(t.max_code=u,n=e.heap_len>>1;n>=1;n--)j(e,i,n);a=s;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],j(e,i,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,i[2*a]=i[2*n]+i[2*r],e.depth[a]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,i[2*n+1]=i[2*r+1]=a,e.heap[1]=a++,j(e,i,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,a,i,o,c,s=t.dyn_tree,u=t.max_code,d=t.stat_desc.static_tree,f=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,h=t.stat_desc.extra_base,m=t.stat_desc.max_length,g=0;for(i=0;i<=l;i++)e.bl_count[i]=0;for(s[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)(i=s[2*s[2*(r=e.heap[n])+1]+1]+1)>m&&(i=m,g++),s[2*r+1]=i,r>u||(e.bl_count[i]++,o=0,r>=h&&(o=p[r-h]),c=s[2*r],e.opt_len+=c*(i+o),f&&(e.static_len+=c*(d[2*r+1]+o)));if(0!==g){do{for(i=m-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[m]--,g-=2}while(g>0);for(i=m;0!==i;i--)for(r=e.bl_count[i];0!==r;)(a=e.heap[--n])>u||(s[2*a+1]!==i&&(e.opt_len+=(i-s[2*a+1])*s[2*a],s[2*a+1]=i),r--)}}(e,t),D(i,u,e.bl_count)}function L(e,t,n){var r,a,i=-1,o=t[1],c=0,l=7,s=4;for(0===o&&(l=138,s=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)a=o,o=t[2*(r+1)+1],++c<l&&a===o||(c<s?e.bl_tree[2*a]+=c:0!==a?(a!==i&&e.bl_tree[2*a]++,e.bl_tree[32]++):c<=10?e.bl_tree[34]++:e.bl_tree[36]++,c=0,i=a,0===o?(l=138,s=3):a===o?(l=6,s=3):(l=7,s=4))}function I(e,t,n){var r,a,i=-1,o=t[1],c=0,l=7,s=4;for(0===o&&(l=138,s=3),r=0;r<=n;r++)if(a=o,o=t[2*(r+1)+1],!(++c<l&&a===o)){if(c<s)do{S(e,a,e.bl_tree)}while(0!=--c);else 0!==a?(a!==i&&(S(e,a,e.bl_tree),c--),S(e,16,e.bl_tree),O(e,c-3,2)):c<=10?(S(e,17,e.bl_tree),O(e,c-3,3)):(S(e,18,e.bl_tree),O(e,c-11,7));c=0,i=a,0===o?(l=138,s=3):a===o?(l=6,s=3):(l=7,s=4)}}a(w);var z=!1;function B(e,t,n,a){O(e,0+(a?1:0),3),function(e,t,n,a){T(e),a&&(E(e,n),E(e,~n)),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}t._tr_init=function(e){z||(!function(){var e,t,n,r,a,i=new Array(16);for(n=0,r=0;r<28;r++)for(v[r]=n,e=0;e<1<<s[r];e++)g[n++]=r;for(g[n-1]=r,a=0,r=0;r<16;r++)for(w[r]=a,e=0;e<1<<u[r];e++)m[a++]=r;for(a>>=7;r<c;r++)for(w[r]=a<<7,e=0;e<1<<u[r]-7;e++)m[256+a++]=r;for(t=0;t<=l;t++)i[t]=0;for(e=0;e<=143;)p[2*e+1]=8,e++,i[8]++;for(;e<=255;)p[2*e+1]=9,e++,i[9]++;for(;e<=279;)p[2*e+1]=7,e++,i[7]++;for(;e<=287;)p[2*e+1]=8,e++,i[8]++;for(D(p,287,i),e=0;e<c;e++)h[2*e+1]=5,h[2*e]=R(e,5);y=new x(p,s,257,o,l),b=new x(h,u,0,c,l),k=new x(new Array(0),d,0,19,7)}(),z=!0),e.l_desc=new _(e.dyn_ltree,y),e.d_desc=new _(e.dyn_dtree,b),e.bl_desc=new _(e.bl_tree,k),e.bi_buf=0,e.bi_valid=0,A(e)},t._tr_stored_block=B,t._tr_flush_block=function(e,t,n,r){var a,o,c=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<i;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),N(e,e.l_desc),N(e,e.d_desc),c=function(e){var t;for(L(e,e.dyn_ltree,e.l_desc.max_code),L(e,e.dyn_dtree,e.d_desc.max_code),N(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*f[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),a=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=a&&(a=o)):a=o=n+5,n+4<=a&&-1!==t?B(e,t,n,r):4===e.strategy||o===a?(O(e,2+(r?1:0),3),M(e,p,h)):(O(e,4+(r?1:0),3),function(e,t,n,r){var a;for(O(e,t-257,5),O(e,n-1,5),O(e,r-4,4),a=0;a<r;a++)O(e,e.bl_tree[2*f[a]+1],3);I(e,e.dyn_ltree,t-1),I(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,c+1),M(e,e.dyn_ltree,e.dyn_dtree)),A(e),r&&T(e)},t._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(g[n]+i+1)]++,e.dyn_dtree[2*C(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){O(e,2,3),S(e,256,p),function(e){16===e.bi_valid?(E(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},function(e,t,n){"use strict";var r=n(1663),a=n(284),i=n(906),o=n(908),c=n(615),l=n(907),s=n(1666),u=Object.prototype.toString;function d(e){if(!(this instanceof d))return new d(e);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==o.Z_OK)throw new Error(c[n]);if(this.header=new s,r.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=i.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=r.inflateSetDictionary(this.strm,t.dictionary))!==o.Z_OK))throw new Error(c[n])}function f(e,t){var n=new d(t);if(n.push(e,!0),n.err)throw n.msg||c[n.err];return n.result}d.prototype.push=function(e,t){var n,c,l,s,d,f=this.strm,p=this.options.chunkSize,h=this.options.dictionary,m=!1;if(this.ended)return!1;c=t===~~t?t:!0===t?o.Z_FINISH:o.Z_NO_FLUSH,"string"==typeof e?f.input=i.binstring2buf(e):"[object ArrayBuffer]"===u.call(e)?f.input=new Uint8Array(e):f.input=e,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new a.Buf8(p),f.next_out=0,f.avail_out=p),(n=r.inflate(f,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&h&&(n=r.inflateSetDictionary(this.strm,h)),n===o.Z_BUF_ERROR&&!0===m&&(n=o.Z_OK,m=!1),n!==o.Z_STREAM_END&&n!==o.Z_OK)return this.onEnd(n),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&n!==o.Z_STREAM_END&&(0!==f.avail_in||c!==o.Z_FINISH&&c!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(l=i.utf8border(f.output,f.next_out),s=f.next_out-l,d=i.buf2string(f.output,l),f.next_out=s,f.avail_out=p-s,s&&a.arraySet(f.output,f.output,l,s,0),this.onData(d)):this.onData(a.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(m=!0)}while((f.avail_in>0||0===f.avail_out)&&n!==o.Z_STREAM_END);return n===o.Z_STREAM_END&&(c=o.Z_FINISH),c===o.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===o.Z_OK):c!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),f.avail_out=0,!0)},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=d,t.inflate=f,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,f(e,t)},t.ungzip=f},function(e,t,n){"use strict";var r=n(284),a=n(904),i=n(905),o=n(1664),c=n(1665),l=-2,s=12,u=30;function d(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function f(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function p(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(852),t.distcode=t.distdyn=new r.Buf32(592),t.sane=1,t.back=-1,0):l}function h(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,p(e)):l}function m(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?l:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,h(e))):l}function g(e,t){var n,r;return e?(r=new f,e.state=r,r.window=null,0!==(n=m(e,t))&&(e.state=null),n):l}var v,y,b=!0;function k(e){if(b){var t;for(v=new r.Buf32(512),y=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(c(1,e.lens,0,288,v,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;c(2,e.lens,0,32,y,0,e.work,{bits:5}),b=!1}e.lencode=v,e.lenbits=9,e.distcode=y,e.distbits=5}function w(e,t,n,a){var i,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new r.Buf8(o.wsize)),a>=o.wsize?(r.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((i=o.wsize-o.wnext)>a&&(i=a),r.arraySet(o.window,t,n-a,i,o.wnext),(a-=i)?(r.arraySet(o.window,t,n-a,a,0),o.wnext=a,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}t.inflateReset=h,t.inflateReset2=m,t.inflateResetKeep=p,t.inflateInit=function(e){return g(e,15)},t.inflateInit2=g,t.inflate=function(e,t){var n,f,p,h,m,g,v,y,b,x,_,C,E,O,S,R,D,A,T,P,j,M,N,L,I=0,z=new r.Buf8(4),B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return l;(n=e.state).mode===s&&(n.mode=13),m=e.next_out,p=e.output,v=e.avail_out,h=e.next_in,f=e.input,g=e.avail_in,y=n.hold,b=n.bits,x=g,_=v,M=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;b<16;){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}if(2&n.wrap&&35615===y){n.check=0,z[0]=255&y,z[1]=y>>>8&255,n.check=i(n.check,z,2,0),y=0,b=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&y)<<8)+(y>>8))%31){e.msg="incorrect header check",n.mode=u;break}if(8!=(15&y)){e.msg="unknown compression method",n.mode=u;break}if(b-=4,j=8+(15&(y>>>=4)),0===n.wbits)n.wbits=j;else if(j>n.wbits){e.msg="invalid window size",n.mode=u;break}n.dmax=1<<j,e.adler=n.check=1,n.mode=512&y?10:s,y=0,b=0;break;case 2:for(;b<16;){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}if(n.flags=y,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=u;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=u;break}n.head&&(n.head.text=y>>8&1),512&n.flags&&(z[0]=255&y,z[1]=y>>>8&255,n.check=i(n.check,z,2,0)),y=0,b=0,n.mode=3;case 3:for(;b<32;){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}n.head&&(n.head.time=y),512&n.flags&&(z[0]=255&y,z[1]=y>>>8&255,z[2]=y>>>16&255,z[3]=y>>>24&255,n.check=i(n.check,z,4,0)),y=0,b=0,n.mode=4;case 4:for(;b<16;){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}n.head&&(n.head.xflags=255&y,n.head.os=y>>8),512&n.flags&&(z[0]=255&y,z[1]=y>>>8&255,n.check=i(n.check,z,2,0)),y=0,b=0,n.mode=5;case 5:if(1024&n.flags){for(;b<16;){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}n.length=y,n.head&&(n.head.extra_len=y),512&n.flags&&(z[0]=255&y,z[1]=y>>>8&255,n.check=i(n.check,z,2,0)),y=0,b=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((C=n.length)>g&&(C=g),C&&(n.head&&(j=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,f,h,C,j)),512&n.flags&&(n.check=i(n.check,f,C,h)),g-=C,h+=C,n.length-=C),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===g)break e;C=0;do{j=f[h+C++],n.head&&j&&n.length<65536&&(n.head.name+=String.fromCharCode(j))}while(j&&C<g);if(512&n.flags&&(n.check=i(n.check,f,C,h)),g-=C,h+=C,j)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===g)break e;C=0;do{j=f[h+C++],n.head&&j&&n.length<65536&&(n.head.comment+=String.fromCharCode(j))}while(j&&C<g);if(512&n.flags&&(n.check=i(n.check,f,C,h)),g-=C,h+=C,j)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;b<16;){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}if(y!==(65535&n.check)){e.msg="header crc mismatch",n.mode=u;break}y=0,b=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=s;break;case 10:for(;b<32;){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}e.adler=n.check=d(y),y=0,b=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=m,e.avail_out=v,e.next_in=h,e.avail_in=g,n.hold=y,n.bits=b,2;e.adler=n.check=1,n.mode=s;case s:if(5===t||6===t)break e;case 13:if(n.last){y>>>=7&b,b-=7&b,n.mode=27;break}for(;b<3;){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}switch(n.last=1&y,b-=1,3&(y>>>=1)){case 0:n.mode=14;break;case 1:if(k(n),n.mode=20,6===t){y>>>=2,b-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=u}y>>>=2,b-=2;break;case 14:for(y>>>=7&b,b-=7&b;b<32;){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}if((65535&y)!=(y>>>16^65535)){e.msg="invalid stored block lengths",n.mode=u;break}if(n.length=65535&y,y=0,b=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(C=n.length){if(C>g&&(C=g),C>v&&(C=v),0===C)break e;r.arraySet(p,f,h,C,m),g-=C,h+=C,v-=C,m+=C,n.length-=C;break}n.mode=s;break;case 17:for(;b<14;){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}if(n.nlen=257+(31&y),y>>>=5,b-=5,n.ndist=1+(31&y),y>>>=5,b-=5,n.ncode=4+(15&y),y>>>=4,b-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=u;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;b<3;){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}n.lens[B[n.have++]]=7&y,y>>>=3,b-=3}for(;n.have<19;)n.lens[B[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,N={bits:n.lenbits},M=c(0,n.lens,0,19,n.lencode,0,n.work,N),n.lenbits=N.bits,M){e.msg="invalid code lengths set",n.mode=u;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;R=(I=n.lencode[y&(1<<n.lenbits)-1])>>>16&255,D=65535&I,!((S=I>>>24)<=b);){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}if(D<16)y>>>=S,b-=S,n.lens[n.have++]=D;else{if(16===D){for(L=S+2;b<L;){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}if(y>>>=S,b-=S,0===n.have){e.msg="invalid bit length repeat",n.mode=u;break}j=n.lens[n.have-1],C=3+(3&y),y>>>=2,b-=2}else if(17===D){for(L=S+3;b<L;){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}b-=S,j=0,C=3+(7&(y>>>=S)),y>>>=3,b-=3}else{for(L=S+7;b<L;){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}b-=S,j=0,C=11+(127&(y>>>=S)),y>>>=7,b-=7}if(n.have+C>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=u;break}for(;C--;)n.lens[n.have++]=j}}if(n.mode===u)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=u;break}if(n.lenbits=9,N={bits:n.lenbits},M=c(1,n.lens,0,n.nlen,n.lencode,0,n.work,N),n.lenbits=N.bits,M){e.msg="invalid literal/lengths set",n.mode=u;break}if(n.distbits=6,n.distcode=n.distdyn,N={bits:n.distbits},M=c(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,N),n.distbits=N.bits,M){e.msg="invalid distances set",n.mode=u;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(g>=6&&v>=258){e.next_out=m,e.avail_out=v,e.next_in=h,e.avail_in=g,n.hold=y,n.bits=b,o(e,_),m=e.next_out,p=e.output,v=e.avail_out,h=e.next_in,f=e.input,g=e.avail_in,y=n.hold,b=n.bits,n.mode===s&&(n.back=-1);break}for(n.back=0;R=(I=n.lencode[y&(1<<n.lenbits)-1])>>>16&255,D=65535&I,!((S=I>>>24)<=b);){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}if(R&&0==(240&R)){for(A=S,T=R,P=D;R=(I=n.lencode[P+((y&(1<<A+T)-1)>>A)])>>>16&255,D=65535&I,!(A+(S=I>>>24)<=b);){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}y>>>=A,b-=A,n.back+=A}if(y>>>=S,b-=S,n.back+=S,n.length=D,0===R){n.mode=26;break}if(32&R){n.back=-1,n.mode=s;break}if(64&R){e.msg="invalid literal/length code",n.mode=u;break}n.extra=15&R,n.mode=22;case 22:if(n.extra){for(L=n.extra;b<L;){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}n.length+=y&(1<<n.extra)-1,y>>>=n.extra,b-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;R=(I=n.distcode[y&(1<<n.distbits)-1])>>>16&255,D=65535&I,!((S=I>>>24)<=b);){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}if(0==(240&R)){for(A=S,T=R,P=D;R=(I=n.distcode[P+((y&(1<<A+T)-1)>>A)])>>>16&255,D=65535&I,!(A+(S=I>>>24)<=b);){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}y>>>=A,b-=A,n.back+=A}if(y>>>=S,b-=S,n.back+=S,64&R){e.msg="invalid distance code",n.mode=u;break}n.offset=D,n.extra=15&R,n.mode=24;case 24:if(n.extra){for(L=n.extra;b<L;){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}n.offset+=y&(1<<n.extra)-1,y>>>=n.extra,b-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=u;break}n.mode=25;case 25:if(0===v)break e;if(C=_-v,n.offset>C){if((C=n.offset-C)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=u;break}C>n.wnext?(C-=n.wnext,E=n.wsize-C):E=n.wnext-C,C>n.length&&(C=n.length),O=n.window}else O=p,E=m-n.offset,C=n.length;C>v&&(C=v),v-=C,n.length-=C;do{p[m++]=O[E++]}while(--C);0===n.length&&(n.mode=21);break;case 26:if(0===v)break e;p[m++]=n.length,v--,n.mode=21;break;case 27:if(n.wrap){for(;b<32;){if(0===g)break e;g--,y|=f[h++]<<b,b+=8}if(_-=v,e.total_out+=_,n.total+=_,_&&(e.adler=n.check=n.flags?i(n.check,p,_,m-_):a(n.check,p,_,m-_)),_=v,(n.flags?y:d(y))!==n.check){e.msg="incorrect data check",n.mode=u;break}y=0,b=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;b<32;){if(0===g)break e;g--,y+=f[h++]<<b,b+=8}if(y!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=u;break}y=0,b=0}n.mode=29;case 29:M=1;break e;case u:M=-3;break e;case 31:return-4;case 32:default:return l}return e.next_out=m,e.avail_out=v,e.next_in=h,e.avail_in=g,n.hold=y,n.bits=b,(n.wsize||_!==e.avail_out&&n.mode<u&&(n.mode<27||4!==t))&&w(e,e.output,e.next_out,_-e.avail_out)?(n.mode=31,-4):(x-=e.avail_in,_-=e.avail_out,e.total_in+=x,e.total_out+=_,n.total+=_,n.wrap&&_&&(e.adler=n.check=n.flags?i(n.check,p,_,e.next_out-_):a(n.check,p,_,e.next_out-_)),e.data_type=n.bits+(n.last?64:0)+(n.mode===s?128:0)+(20===n.mode||15===n.mode?256:0),(0===x&&0===_||4===t)&&0===M&&(M=-5),M)},t.inflateEnd=function(e){if(!e||!e.state)return l;var t=e.state;return t.window&&(t.window=null),e.state=null,0},t.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?l:(n.head=t,t.done=!1,0):l},t.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?l:11===n.mode&&a(1,t,r,0)!==n.check?-3:w(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,0):l},t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,n){"use strict";e.exports=function(e,t){var n,r,a,i,o,c,l,s,u,d,f,p,h,m,g,v,y,b,k,w,x,_,C,E,O;n=e.state,r=e.next_in,E=e.input,a=r+(e.avail_in-5),i=e.next_out,O=e.output,o=i-(t-e.avail_out),c=i+(e.avail_out-257),l=n.dmax,s=n.wsize,u=n.whave,d=n.wnext,f=n.window,p=n.hold,h=n.bits,m=n.lencode,g=n.distcode,v=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{h<15&&(p+=E[r++]<<h,h+=8,p+=E[r++]<<h,h+=8),b=m[p&v];t:for(;;){if(p>>>=k=b>>>24,h-=k,0===(k=b>>>16&255))O[i++]=65535&b;else{if(!(16&k)){if(0==(64&k)){b=m[(65535&b)+(p&(1<<k)-1)];continue t}if(32&k){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}w=65535&b,(k&=15)&&(h<k&&(p+=E[r++]<<h,h+=8),w+=p&(1<<k)-1,p>>>=k,h-=k),h<15&&(p+=E[r++]<<h,h+=8,p+=E[r++]<<h,h+=8),b=g[p&y];n:for(;;){if(p>>>=k=b>>>24,h-=k,!(16&(k=b>>>16&255))){if(0==(64&k)){b=g[(65535&b)+(p&(1<<k)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(x=65535&b,h<(k&=15)&&(p+=E[r++]<<h,(h+=8)<k&&(p+=E[r++]<<h,h+=8)),(x+=p&(1<<k)-1)>l){e.msg="invalid distance too far back",n.mode=30;break e}if(p>>>=k,h-=k,x>(k=i-o)){if((k=x-k)>u&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(_=0,C=f,0===d){if(_+=s-k,k<w){w-=k;do{O[i++]=f[_++]}while(--k);_=i-x,C=O}}else if(d<k){if(_+=s+d-k,(k-=d)<w){w-=k;do{O[i++]=f[_++]}while(--k);if(_=0,d<w){w-=k=d;do{O[i++]=f[_++]}while(--k);_=i-x,C=O}}}else if(_+=d-k,k<w){w-=k;do{O[i++]=f[_++]}while(--k);_=i-x,C=O}for(;w>2;)O[i++]=C[_++],O[i++]=C[_++],O[i++]=C[_++],w-=3;w&&(O[i++]=C[_++],w>1&&(O[i++]=C[_++]))}else{_=i-x;do{O[i++]=O[_++],O[i++]=O[_++],O[i++]=O[_++],w-=3}while(w>2);w&&(O[i++]=O[_++],w>1&&(O[i++]=O[_++]))}break}}break}}while(r<a&&i<c);r-=w=h>>3,p&=(1<<(h-=w<<3))-1,e.next_in=r,e.next_out=i,e.avail_in=r<a?a-r+5:5-(r-a),e.avail_out=i<c?c-i+257:257-(i-c),n.hold=p,n.bits=h}},function(e,t,n){"use strict";var r=n(284),a=15,i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,s,u,d,f,p){var h,m,g,v,y,b,k,w,x,_=p.bits,C=0,E=0,O=0,S=0,R=0,D=0,A=0,T=0,P=0,j=0,M=null,N=0,L=new r.Buf16(16),I=new r.Buf16(16),z=null,B=0;for(C=0;C<=a;C++)L[C]=0;for(E=0;E<s;E++)L[t[n+E]]++;for(R=_,S=a;S>=1&&0===L[S];S--);if(R>S&&(R=S),0===S)return u[d++]=20971520,u[d++]=20971520,p.bits=1,0;for(O=1;O<S&&0===L[O];O++);for(R<O&&(R=O),T=1,C=1;C<=a;C++)if(T<<=1,(T-=L[C])<0)return-1;if(T>0&&(0===e||1!==S))return-1;for(I[1]=0,C=1;C<a;C++)I[C+1]=I[C]+L[C];for(E=0;E<s;E++)0!==t[n+E]&&(f[I[t[n+E]]++]=E);if(0===e?(M=z=f,b=19):1===e?(M=i,N-=257,z=o,B-=257,b=256):(M=c,z=l,b=-1),j=0,E=0,C=O,y=d,D=R,A=0,g=-1,v=(P=1<<R)-1,1===e&&P>852||2===e&&P>592)return 1;for(;;){k=C-A,f[E]<b?(w=0,x=f[E]):f[E]>b?(w=z[B+f[E]],x=M[N+f[E]]):(w=96,x=0),h=1<<C-A,O=m=1<<D;do{u[y+(j>>A)+(m-=h)]=k<<24|w<<16|x|0}while(0!==m);for(h=1<<C-1;j&h;)h>>=1;if(0!==h?(j&=h-1,j+=h):j=0,E++,0==--L[C]){if(C===S)break;C=t[n+f[E]]}if(C>R&&(j&v)!==g){for(0===A&&(A=R),y+=O,T=1<<(D=C-A);D+A<S&&!((T-=L[D+A])<=0);)D++,T<<=1;if(P+=1<<D,1===e&&P>852||2===e&&P>592)return 1;u[g=j&v]=R<<24|D<<16|y-d|0}}return 0!==j&&(u[y+j]=C-A<<24|64<<16|0),p.bits=R,0}},function(e,t,n){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(e,t,n){"use strict";var r=n(96),a=n(1675),i=n(1679),o=n(1680),c=n(1688),l=n(1702),s=n(1715),u=n(910),d=n(354),f={default:n(1717),zero:n(1718),commonmark:n(1719)},p=/^(vbscript|javascript|file|data):/,h=/^data:image\/(gif|png|jpeg|webp);/;function m(e){var t=e.trim().toLowerCase();return!p.test(t)||!!h.test(t)}var g=["http:","https:","mailto:"];function v(e){var t=u.parse(e,!0);if(t.hostname&&(!t.protocol||g.indexOf(t.protocol)>=0))try{t.hostname=d.toASCII(t.hostname)}catch(e){}return u.encode(u.format(t))}function y(e){var t=u.parse(e,!0);if(t.hostname&&(!t.protocol||g.indexOf(t.protocol)>=0))try{t.hostname=d.toUnicode(t.hostname)}catch(e){}return u.decode(u.format(t))}function b(e,t){if(!(this instanceof b))return new b(e,t);t||r.isString(e)||(t=e||{},e="default"),this.inline=new l,this.block=new c,this.core=new o,this.renderer=new i,this.linkify=new s,this.validateLink=m,this.normalizeLink=v,this.normalizeLinkText=y,this.utils=r,this.helpers=r.assign({},a),this.options={},this.configure(e),t&&this.set(t)}b.prototype.set=function(e){return r.assign(this.options,e),this},b.prototype.configure=function(e){var t,n=this;if(r.isString(e)&&!(e=f[t=e]))throw new Error('Wrong `markdown-it` preset "'+t+'", check name');if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&n.set(e.options),e.components&&Object.keys(e.components).forEach((function(t){e.components[t].rules&&n[t].ruler.enableOnly(e.components[t].rules),e.components[t].rules2&&n[t].ruler2.enableOnly(e.components[t].rules2)})),this},b.prototype.enable=function(e,t){var n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach((function(t){n=n.concat(this[t].ruler.enable(e,!0))}),this),n=n.concat(this.inline.ruler2.enable(e,!0));var r=e.filter((function(e){return n.indexOf(e)<0}));if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this},b.prototype.disable=function(e,t){var n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach((function(t){n=n.concat(this[t].ruler.disable(e,!0))}),this),n=n.concat(this.inline.ruler2.disable(e,!0));var r=e.filter((function(e){return n.indexOf(e)<0}));if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this},b.prototype.use=function(e){var t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this},b.prototype.parse=function(e,t){if("string"!=typeof e)throw new Error("Input data should be a String");var n=new this.core.State(e,this,t);return this.core.process(n),n.tokens},b.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)},b.prototype.parseInline=function(e,t){var n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens},b.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)},e.exports=b},function(e,t){e.exports={Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",amp:"&",AMP:"&",andand:"⩕",And:"⩓",and:"∧",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angmsd:"∡",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",apacir:"⩯",ap:"≈",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",barwed:"⌅",Barwed:"⌆",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",because:"∵",Because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxdl:"┐",boxdL:"╕",boxDl:"╖",boxDL:"╗",boxdr:"┌",boxdR:"╒",boxDr:"╓",boxDR:"╔",boxh:"─",boxH:"═",boxhd:"┬",boxHd:"╤",boxhD:"╥",boxHD:"╦",boxhu:"┴",boxHu:"╧",boxhU:"╨",boxHU:"╩",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxul:"┘",boxuL:"╛",boxUl:"╜",boxUL:"╝",boxur:"└",boxuR:"╘",boxUr:"╙",boxUR:"╚",boxv:"│",boxV:"║",boxvh:"┼",boxvH:"╪",boxVh:"╫",boxVH:"╬",boxvl:"┤",boxvL:"╡",boxVl:"╢",boxVL:"╣",boxvr:"├",boxvR:"╞",boxVr:"╟",boxVR:"╠",bprime:"‵",breve:"˘",Breve:"˘",brvbar:"¦",bscr:"𝒷",Bscr:"ℬ",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsolb:"⧅",bsol:"\\",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",capand:"⩄",capbrcup:"⩉",capcap:"⩋",cap:"∩",Cap:"⋒",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",centerdot:"·",CenterDot:"·",cfr:"𝔠",Cfr:"ℭ",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cir:"○",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",colon:":",Colon:"∷",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",conint:"∮",Conint:"∯",ContourIntegral:"∮",copf:"𝕔",Copf:"ℂ",coprod:"∐",Coproduct:"∐",copy:"©",COPY:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",cross:"✗",Cross:"⨯",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",cupbrcap:"⩈",cupcap:"⩆",CupCap:"≍",cup:"∪",Cup:"⋓",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",dagger:"†",Dagger:"‡",daleth:"ℸ",darr:"↓",Darr:"↡",dArr:"⇓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",ddagger:"‡",ddarr:"⇊",DD:"ⅅ",dd:"ⅆ",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",diamond:"⋄",Diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrowBar:"⤓",downarrow:"↓",DownArrow:"↓",Downarrow:"⇓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVectorBar:"⥖",DownLeftVector:"↽",DownRightTeeVector:"⥟",DownRightVectorBar:"⥗",DownRightVector:"⇁",DownTeeArrow:"↧",DownTee:"⊤",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",Ecirc:"Ê",ecirc:"ê",ecir:"≖",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",edot:"ė",eDot:"≑",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp13:" ",emsp14:" ",emsp:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",escr:"ℯ",Escr:"ℰ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",exponentiale:"ⅇ",ExponentialE:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",forall:"∀",ForAll:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",fscr:"𝒻",Fscr:"ℱ",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",ge:"≥",gE:"≧",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",gescc:"⪩",ges:"⩾",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",gg:"≫",Gg:"⋙",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gla:"⪥",gl:"≷",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gne:"⪈",gnE:"≩",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",gtcc:"⪧",gtcir:"⩺",gt:">",GT:">",Gt:"≫",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",harrcir:"⥈",harr:"↔",hArr:"⇔",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",hfr:"𝔥",Hfr:"ℌ",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",hopf:"𝕙",Hopf:"ℍ",horbar:"―",HorizontalLine:"─",hscr:"𝒽",Hscr:"ℋ",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",ifr:"𝔦",Ifr:"ℑ",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",Im:"ℑ",imof:"⊷",imped:"Ƶ",Implies:"⇒",incare:"℅",in:"∈",infin:"∞",infintie:"⧝",inodot:"ı",intcal:"⊺",int:"∫",Int:"∬",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",iscr:"𝒾",Iscr:"ℐ",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",lang:"⟨",Lang:"⟪",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",larrb:"⇤",larrbfs:"⤟",larr:"←",Larr:"↞",lArr:"⇐",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",latail:"⤙",lAtail:"⤛",lat:"⪫",late:"⪭",lates:"⪭︀",lbarr:"⤌",lBarr:"⤎",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",le:"≤",lE:"≦",LeftAngleBracket:"⟨",LeftArrowBar:"⇤",leftarrow:"←",LeftArrow:"←",Leftarrow:"⇐",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVectorBar:"⥙",LeftDownVector:"⇃",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",leftrightarrow:"↔",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTeeArrow:"↤",LeftTee:"⊣",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangleBar:"⧏",LeftTriangle:"⊲",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVectorBar:"⥘",LeftUpVector:"↿",LeftVectorBar:"⥒",LeftVector:"↼",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",lescc:"⪨",les:"⩽",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",llarr:"⇇",ll:"≪",Ll:"⋘",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoustache:"⎰",lmoust:"⎰",lnap:"⪉",lnapprox:"⪉",lne:"⪇",lnE:"≨",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",longleftarrow:"⟵",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftrightarrow:"⟷",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longmapsto:"⟼",longrightarrow:"⟶",LongRightArrow:"⟶",Longrightarrow:"⟹",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",lscr:"𝓁",Lscr:"ℒ",lsh:"↰",Lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",ltcc:"⪦",ltcir:"⩹",lt:"<",LT:"<",Lt:"≪",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",midast:"*",midcir:"⫰",mid:"∣",middot:"·",minusb:"⊟",minus:"−",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",mscr:"𝓂",Mscr:"ℳ",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natural:"♮",naturals:"ℕ",natur:"♮",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",nearhk:"⤤",nearr:"↗",neArr:"⇗",nearrow:"↗",ne:"≠",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nharr:"↮",nhArr:"⇎",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlarr:"↚",nlArr:"⇍",nldr:"‥",nlE:"≦̸",nle:"≰",nleftarrow:"↚",nLeftarrow:"⇍",nleftrightarrow:"↮",nLeftrightarrow:"⇎",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",nopf:"𝕟",Nopf:"ℕ",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangleBar:"⧏̸",NotLeftTriangle:"⋪",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangleBar:"⧐̸",NotRightTriangle:"⋫",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",nparallel:"∦",npar:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",nprec:"⊀",npreceq:"⪯̸",npre:"⪯̸",nrarrc:"⤳̸",nrarr:"↛",nrArr:"⇏",nrarrw:"↝̸",nrightarrow:"↛",nRightarrow:"⇏",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nvdash:"⊬",nvDash:"⊭",nVdash:"⊮",nVDash:"⊯",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwarr:"↖",nwArr:"⇖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",Ocirc:"Ô",ocirc:"ô",ocir:"⊚",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",orarr:"↻",Or:"⩔",or:"∨",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",otimesas:"⨶",Otimes:"⨷",otimes:"⊗",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",para:"¶",parallel:"∥",par:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plus:"+",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",popf:"𝕡",Popf:"ℙ",pound:"£",prap:"⪷",Pr:"⪻",pr:"≺",prcue:"≼",precapprox:"⪷",prec:"≺",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",pre:"⪯",prE:"⪳",precsim:"≾",prime:"′",Prime:"″",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportional:"∝",Proportion:"∷",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",qopf:"𝕢",Qopf:"ℚ",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",quot:'"',QUOT:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",rang:"⟩",Rang:"⟫",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarr:"→",Rarr:"↠",rArr:"⇒",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",ratail:"⤚",rAtail:"⤜",ratio:"∶",rationals:"ℚ",rbarr:"⤍",rBarr:"⤏",RBarr:"⤐",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",Re:"ℜ",rect:"▭",reg:"®",REG:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",rfr:"𝔯",Rfr:"ℜ",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrowBar:"⇥",rightarrow:"→",RightArrow:"→",Rightarrow:"⇒",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVectorBar:"⥕",RightDownVector:"⇂",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTeeArrow:"↦",RightTee:"⊢",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangleBar:"⧐",RightTriangle:"⊳",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVectorBar:"⥔",RightUpVector:"↾",RightVectorBar:"⥓",RightVector:"⇀",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoustache:"⎱",rmoust:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",ropf:"𝕣",Ropf:"ℝ",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",rscr:"𝓇",Rscr:"ℛ",rsh:"↱",Rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",scap:"⪸",Scaron:"Š",scaron:"š",Sc:"⪼",sc:"≻",sccue:"≽",sce:"⪰",scE:"⪴",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdotb:"⊡",sdot:"⋅",sdote:"⩦",searhk:"⤥",searr:"↘",seArr:"⇘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",solbar:"⌿",solb:"⧄",sol:"/",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",square:"□",Square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squ:"□",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",sub:"⊂",Sub:"⋐",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",subset:"⊂",Subset:"⋐",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succapprox:"⪸",succ:"≻",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",sum:"∑",Sum:"∑",sung:"♪",sup1:"¹",sup2:"²",sup3:"³",sup:"⊃",Sup:"⋑",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",supset:"⊃",Supset:"⋑",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swarr:"↙",swArr:"⇙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"\t",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",therefore:"∴",Therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",ThinSpace:" ",thinsp:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",tilde:"˜",Tilde:"∼",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",timesbar:"⨱",timesb:"⊠",times:"×",timesd:"⨰",tint:"∭",toea:"⤨",topbot:"⌶",topcir:"⫱",top:"⊤",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",trade:"™",TRADE:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",uarr:"↑",Uarr:"↟",uArr:"⇑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrowBar:"⤒",uparrow:"↑",UpArrow:"↑",Uparrow:"⇑",UpArrowDownArrow:"⇅",updownarrow:"↕",UpDownArrow:"↕",Updownarrow:"⇕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",upsi:"υ",Upsi:"ϒ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTeeArrow:"↥",UpTee:"⊥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",varr:"↕",vArr:"⇕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",vBar:"⫨",Vbar:"⫫",vBarv:"⫩",Vcy:"В",vcy:"в",vdash:"⊢",vDash:"⊨",Vdash:"⊩",VDash:"⊫",Vdashl:"⫦",veebar:"⊻",vee:"∨",Vee:"⋁",veeeq:"≚",vellip:"⋮",verbar:"|",Verbar:"‖",vert:"|",Vert:"‖",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",wedge:"∧",Wedge:"⋀",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xharr:"⟷",xhArr:"⟺",Xi:"Ξ",xi:"ξ",xlarr:"⟵",xlArr:"⟸",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrarr:"⟶",xrArr:"⟹",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",yuml:"ÿ",Yuml:"Ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",zfr:"𝔷",Zfr:"ℨ",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",zopf:"𝕫",Zopf:"ℤ",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}},function(e,t,n){"use strict";var r={};function a(e,t,n){var i,o,c,l,s,u="";for("string"!=typeof t&&(n=t,t=a.defaultChars),void 0===n&&(n=!0),s=function(e){var t,n,a=r[e];if(a)return a;for(a=r[e]=[],t=0;t<128;t++)n=String.fromCharCode(t),/^[0-9a-z]$/i.test(n)?a.push(n):a.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2));for(t=0;t<e.length;t++)a[e.charCodeAt(t)]=e[t];return a}(t),i=0,o=e.length;i<o;i++)if(c=e.charCodeAt(i),n&&37===c&&i+2<o&&/^[0-9a-f]{2}$/i.test(e.slice(i+1,i+3)))u+=e.slice(i,i+3),i+=2;else if(c<128)u+=s[c];else if(c>=55296&&c<=57343){if(c>=55296&&c<=56319&&i+1<o&&(l=e.charCodeAt(i+1))>=56320&&l<=57343){u+=encodeURIComponent(e[i]+e[i+1]),i++;continue}u+="%EF%BF%BD"}else u+=encodeURIComponent(e[i]);return u}a.defaultChars=";/?:@&=+$,-_.!~*'()#",a.componentChars="-_.!~*'()",e.exports=a},function(e,t,n){"use strict";var r={};function a(e,t){var n;return"string"!=typeof t&&(t=a.defaultChars),n=function(e){var t,n,a=r[e];if(a)return a;for(a=r[e]=[],t=0;t<128;t++)n=String.fromCharCode(t),a.push(n);for(t=0;t<e.length;t++)a[n=e.charCodeAt(t)]="%"+("0"+n.toString(16).toUpperCase()).slice(-2);return a}(t),e.replace(/(%[a-f0-9]{2})+/gi,(function(e){var t,r,a,i,o,c,l,s="";for(t=0,r=e.length;t<r;t+=3)(a=parseInt(e.slice(t+1,t+3),16))<128?s+=n[a]:192==(224&a)&&t+3<r&&128==(192&(i=parseInt(e.slice(t+4,t+6),16)))?(s+=(l=a<<6&1984|63&i)<128?"��":String.fromCharCode(l),t+=3):224==(240&a)&&t+6<r&&(i=parseInt(e.slice(t+4,t+6),16),o=parseInt(e.slice(t+7,t+9),16),128==(192&i)&&128==(192&o))?(s+=(l=a<<12&61440|i<<6&4032|63&o)<2048||l>=55296&&l<=57343?"���":String.fromCharCode(l),t+=6):240==(248&a)&&t+9<r&&(i=parseInt(e.slice(t+4,t+6),16),o=parseInt(e.slice(t+7,t+9),16),c=parseInt(e.slice(t+10,t+12),16),128==(192&i)&&128==(192&o)&&128==(192&c))?((l=a<<18&1835008|i<<12&258048|o<<6&4032|63&c)<65536||l>1114111?s+="����":(l-=65536,s+=String.fromCharCode(55296+(l>>10),56320+(1023&l))),t+=9):s+="�";return s}))}a.defaultChars=";/?:@&=+$,#",a.componentChars="",e.exports=a},function(e,t,n){"use strict";e.exports=function(e){var t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&-1!==e.hostname.indexOf(":")?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||""}},function(e,t,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var a=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,o=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(c),s=["%","/","?",";","#"].concat(l),u=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,p={javascript:!0,"javascript:":!0},h={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};r.prototype.parse=function(e,t){var n,r,i,c,l,m=e;if(m=m.trim(),!t&&1===e.split("#").length){var g=o.exec(m);if(g)return this.pathname=g[1],g[2]&&(this.search=g[2]),this}var v=a.exec(m);if(v&&(i=(v=v[0]).toLowerCase(),this.protocol=v,m=m.substr(v.length)),(t||v||m.match(/^\/\/[^@\/]+@[^@\/]+/))&&(!(l="//"===m.substr(0,2))||v&&p[v]||(m=m.substr(2),this.slashes=!0)),!p[v]&&(l||v&&!h[v])){var y,b,k=-1;for(n=0;n<u.length;n++)-1!==(c=m.indexOf(u[n]))&&(-1===k||c<k)&&(k=c);for(-1!==(b=-1===k?m.lastIndexOf("@"):m.lastIndexOf("@",k))&&(y=m.slice(0,b),m=m.slice(b+1),this.auth=y),k=-1,n=0;n<s.length;n++)-1!==(c=m.indexOf(s[n]))&&(-1===k||c<k)&&(k=c);-1===k&&(k=m.length),":"===m[k-1]&&k--;var w=m.slice(0,k);m=m.slice(k),this.parseHost(w),this.hostname=this.hostname||"";var x="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!x){var _=this.hostname.split(/\./);for(n=0,r=_.length;n<r;n++){var C=_[n];if(C&&!C.match(d)){for(var E="",O=0,S=C.length;O<S;O++)C.charCodeAt(O)>127?E+="x":E+=C[O];if(!E.match(d)){var R=_.slice(0,n),D=_.slice(n+1),A=C.match(f);A&&(R.push(A[1]),D.unshift(A[2])),D.length&&(m=D.join(".")+m),this.hostname=R.join(".");break}}}}this.hostname.length>255&&(this.hostname=""),x&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var T=m.indexOf("#");-1!==T&&(this.hash=m.substr(T),m=m.slice(0,T));var P=m.indexOf("?");return-1!==P&&(this.search=m.substr(P),m=m.slice(0,P)),m&&(this.pathname=m),h[i]&&this.hostname&&!this.pathname&&(this.pathname=""),this},r.prototype.parseHost=function(e){var t=i.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)},e.exports=function(e,t){if(e&&e instanceof r)return e;var n=new r;return n.parse(e,t),n}},function(e,t,n){"use strict";t.Any=n(911),t.Cc=n(912),t.Cf=n(1674),t.P=n(617),t.Z=n(913)},function(e,t){e.exports=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/},function(e,t,n){"use strict";t.parseLinkLabel=n(1676),t.parseLinkDestination=n(1677),t.parseLinkTitle=n(1678)},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,a,i,o,c=-1,l=e.posMax,s=e.pos;for(e.pos=t+1,r=1;e.pos<l;){if(93===(i=e.src.charCodeAt(e.pos))&&0===--r){a=!0;break}if(o=e.pos,e.md.inline.skipToken(e),91===i)if(o===e.pos-1)r++;else if(n)return e.pos=s,-1}return a&&(c=e.pos),e.pos=s,c}},function(e,t,n){"use strict";var r=n(96).isSpace,a=n(96).unescapeAll;e.exports=function(e,t,n){var i,o,c=t,l={ok:!1,pos:0,lines:0,str:""};if(60===e.charCodeAt(t)){for(t++;t<n;){if(10===(i=e.charCodeAt(t))||r(i))return l;if(62===i)return l.pos=t+1,l.str=a(e.slice(c+1,t)),l.ok=!0,l;92===i&&t+1<n?t+=2:t++}return l}for(o=0;t<n&&32!==(i=e.charCodeAt(t))&&!(i<32||127===i);)if(92===i&&t+1<n)t+=2;else{if(40===i&&o++,41===i){if(0===o)break;o--}t++}return c===t||0!==o||(l.str=a(e.slice(c,t)),l.lines=0,l.pos=t,l.ok=!0),l}},function(e,t,n){"use strict";var r=n(96).unescapeAll;e.exports=function(e,t,n){var a,i,o=0,c=t,l={ok:!1,pos:0,lines:0,str:""};if(t>=n)return l;if(34!==(i=e.charCodeAt(t))&&39!==i&&40!==i)return l;for(t++,40===i&&(i=41);t<n;){if((a=e.charCodeAt(t))===i)return l.pos=t+1,l.lines=o,l.str=r(e.slice(c+1,t)),l.ok=!0,l;10===a?o++:92===a&&t+1<n&&(t++,10===e.charCodeAt(t)&&o++),t++}return l}},function(e,t,n){"use strict";var r=n(96).assign,a=n(96).unescapeAll,i=n(96).escapeHtml,o={};function c(){this.rules=r({},o)}o.code_inline=function(e,t,n,r,a){var o=e[t];return"<code"+a.renderAttrs(o)+">"+i(e[t].content)+"</code>"},o.code_block=function(e,t,n,r,a){var o=e[t];return"<pre"+a.renderAttrs(o)+"><code>"+i(e[t].content)+"</code></pre>\n"},o.fence=function(e,t,n,r,o){var c,l,s,u,d=e[t],f=d.info?a(d.info).trim():"",p="";return f&&(p=f.split(/\s+/g)[0]),0===(c=n.highlight&&n.highlight(d.content,p)||i(d.content)).indexOf("<pre")?c+"\n":f?(l=d.attrIndex("class"),s=d.attrs?d.attrs.slice():[],l<0?s.push(["class",n.langPrefix+p]):s[l][1]+=" "+n.langPrefix+p,u={attrs:s},"<pre><code"+o.renderAttrs(u)+">"+c+"</code></pre>\n"):"<pre><code"+o.renderAttrs(d)+">"+c+"</code></pre>\n"},o.image=function(e,t,n,r,a){var i=e[t];return i.attrs[i.attrIndex("alt")][1]=a.renderInlineAsText(i.children,n,r),a.renderToken(e,t,n)},o.hardbreak=function(e,t,n){return n.xhtmlOut?"<br />\n":"<br>\n"},o.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?"<br />\n":"<br>\n":"\n"},o.text=function(e,t){return i(e[t].content)},o.html_block=function(e,t){return e[t].content},o.html_inline=function(e,t){return e[t].content},c.prototype.renderAttrs=function(e){var t,n,r;if(!e.attrs)return"";for(r="",t=0,n=e.attrs.length;t<n;t++)r+=" "+i(e.attrs[t][0])+'="'+i(e.attrs[t][1])+'"';return r},c.prototype.renderToken=function(e,t,n){var r,a="",i=!1,o=e[t];return o.hidden?"":(o.block&&-1!==o.nesting&&t&&e[t-1].hidden&&(a+="\n"),a+=(-1===o.nesting?"</":"<")+o.tag,a+=this.renderAttrs(o),0===o.nesting&&n.xhtmlOut&&(a+=" /"),o.block&&(i=!0,1===o.nesting&&t+1<e.length&&("inline"===(r=e[t+1]).type||r.hidden||-1===r.nesting&&r.tag===o.tag)&&(i=!1)),a+=i?">\n":">")},c.prototype.renderInline=function(e,t,n){for(var r,a="",i=this.rules,o=0,c=e.length;o<c;o++)void 0!==i[r=e[o].type]?a+=i[r](e,o,t,n,this):a+=this.renderToken(e,o,t);return a},c.prototype.renderInlineAsText=function(e,t,n){for(var r="",a=0,i=e.length;a<i;a++)"text"===e[a].type?r+=e[a].content:"image"===e[a].type&&(r+=this.renderInlineAsText(e[a].children,t,n));return r},c.prototype.render=function(e,t,n){var r,a,i,o="",c=this.rules;for(r=0,a=e.length;r<a;r++)"inline"===(i=e[r].type)?o+=this.renderInline(e[r].children,t,n):void 0!==c[i]?o+=c[e[r].type](e,r,t,n,this):o+=this.renderToken(e,r,t,n);return o},e.exports=c},function(e,t,n){"use strict";var r=n(618),a=[["normalize",n(1681)],["block",n(1682)],["inline",n(1683)],["linkify",n(1684)],["replacements",n(1685)],["smartquotes",n(1686)]];function i(){this.ruler=new r;for(var e=0;e<a.length;e++)this.ruler.push(a[e][0],a[e][1])}i.prototype.process=function(e){var t,n,r;for(t=0,n=(r=this.ruler.getRules("")).length;t<n;t++)r[t](e)},i.prototype.State=n(1687),e.exports=i},function(e,t,n){"use strict";var r=/\r[\n\u0085]?|[\u2424\u2028\u0085]/g,a=/\u0000/g;e.exports=function(e){var t;t=(t=e.src.replace(r,"\n")).replace(a,"�"),e.src=t}},function(e,t,n){"use strict";e.exports=function(e){var t;e.inlineMode?((t=new e.Token("inline","",0)).content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}},function(e,t,n){"use strict";e.exports=function(e){var t,n,r,a=e.tokens;for(n=0,r=a.length;n<r;n++)"inline"===(t=a[n]).type&&e.md.inline.parse(t.content,e.md,e.env,t.children)}},function(e,t,n){"use strict";var r=n(96).arrayReplaceAt;function a(e){return/^<\/a\s*>/i.test(e)}e.exports=function(e){var t,n,i,o,c,l,s,u,d,f,p,h,m,g,v,y,b,k,w=e.tokens;if(e.md.options.linkify)for(n=0,i=w.length;n<i;n++)if("inline"===w[n].type&&e.md.linkify.pretest(w[n].content))for(m=0,t=(o=w[n].children).length-1;t>=0;t--)if("link_close"!==(l=o[t]).type){if("html_inline"===l.type&&(k=l.content,/^<a[>\s]/i.test(k)&&m>0&&m--,a(l.content)&&m++),!(m>0)&&"text"===l.type&&e.md.linkify.test(l.content)){for(d=l.content,b=e.md.linkify.match(d),s=[],h=l.level,p=0,u=0;u<b.length;u++)g=b[u].url,v=e.md.normalizeLink(g),e.md.validateLink(v)&&(y=b[u].text,y=b[u].schema?"mailto:"!==b[u].schema||/^mailto:/i.test(y)?e.md.normalizeLinkText(y):e.md.normalizeLinkText("mailto:"+y).replace(/^mailto:/,""):e.md.normalizeLinkText("http://"+y).replace(/^http:\/\//,""),(f=b[u].index)>p&&((c=new e.Token("text","",0)).content=d.slice(p,f),c.level=h,s.push(c)),(c=new e.Token("link_open","a",1)).attrs=[["href",v]],c.level=h++,c.markup="linkify",c.info="auto",s.push(c),(c=new e.Token("text","",0)).content=y,c.level=h,s.push(c),(c=new e.Token("link_close","a",-1)).level=--h,c.markup="linkify",c.info="auto",s.push(c),p=b[u].lastIndex);p<d.length&&((c=new e.Token("text","",0)).content=d.slice(p),c.level=h,s.push(c)),w[n].children=o=r(o,t,s)}}else for(t--;o[t].level!==l.level&&"link_open"!==o[t].type;)t--}},function(e,t,n){"use strict";var r=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,a=/\((c|tm|r|p)\)/i,i=/\((c|tm|r|p)\)/gi,o={c:"©",r:"®",p:"§",tm:"™"};function c(e,t){return o[t.toLowerCase()]}function l(e){var t,n,r=0;for(t=e.length-1;t>=0;t--)"text"!==(n=e[t]).type||r||(n.content=n.content.replace(i,c)),"link_open"===n.type&&"auto"===n.info&&r--,"link_close"===n.type&&"auto"===n.info&&r++}function s(e){var t,n,a=0;for(t=e.length-1;t>=0;t--)"text"!==(n=e[t]).type||a||r.test(n.content)&&(n.content=n.content.replace(/\+-/g,"±").replace(/\.{2,}/g,"…").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---([^-]|$)/gm,"$1—$2").replace(/(^|\s)--(\s|$)/gm,"$1–$2").replace(/(^|[^-\s])--([^-\s]|$)/gm,"$1–$2")),"link_open"===n.type&&"auto"===n.info&&a--,"link_close"===n.type&&"auto"===n.info&&a++}e.exports=function(e){var t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)"inline"===e.tokens[t].type&&(a.test(e.tokens[t].content)&&l(e.tokens[t].children),r.test(e.tokens[t].content)&&s(e.tokens[t].children))}},function(e,t,n){"use strict";var r=n(96).isWhiteSpace,a=n(96).isPunctChar,i=n(96).isMdAsciiPunct,o=/['"]/,c=/['"]/g;function l(e,t,n){return e.substr(0,t)+n+e.substr(t+1)}function s(e,t){var n,o,s,u,d,f,p,h,m,g,v,y,b,k,w,x,_,C,E,O,S;for(E=[],n=0;n<e.length;n++){for(o=e[n],p=e[n].level,_=E.length-1;_>=0&&!(E[_].level<=p);_--);if(E.length=_+1,"text"===o.type){d=0,f=(s=o.content).length;e:for(;d<f&&(c.lastIndex=d,u=c.exec(s));){if(w=x=!0,d=u.index+1,C="'"===u[0],m=32,u.index-1>=0)m=s.charCodeAt(u.index-1);else for(_=n-1;_>=0&&("softbreak"!==e[_].type&&"hardbreak"!==e[_].type);_--)if("text"===e[_].type){m=e[_].content.charCodeAt(e[_].content.length-1);break}if(g=32,d<f)g=s.charCodeAt(d);else for(_=n+1;_<e.length&&("softbreak"!==e[_].type&&"hardbreak"!==e[_].type);_++)if("text"===e[_].type){g=e[_].content.charCodeAt(0);break}if(v=i(m)||a(String.fromCharCode(m)),y=i(g)||a(String.fromCharCode(g)),b=r(m),(k=r(g))?w=!1:y&&(b||v||(w=!1)),b?x=!1:v&&(k||y||(x=!1)),34===g&&'"'===u[0]&&m>=48&&m<=57&&(x=w=!1),w&&x&&(w=!1,x=y),w||x){if(x)for(_=E.length-1;_>=0&&(h=E[_],!(E[_].level<p));_--)if(h.single===C&&E[_].level===p){h=E[_],C?(O=t.md.options.quotes[2],S=t.md.options.quotes[3]):(O=t.md.options.quotes[0],S=t.md.options.quotes[1]),o.content=l(o.content,u.index,S),e[h.token].content=l(e[h.token].content,h.pos,O),d+=S.length-1,h.token===n&&(d+=O.length-1),f=(s=o.content).length,E.length=_;continue e}w?E.push({token:n,pos:u.index,single:C,level:p}):x&&C&&(o.content=l(o.content,u.index,"’"))}else C&&(o.content=l(o.content,u.index,"’"))}}}}e.exports=function(e){var t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)"inline"===e.tokens[t].type&&o.test(e.tokens[t].content)&&s(e.tokens[t].children,e)}},function(e,t,n){"use strict";var r=n(619);function a(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}a.prototype.Token=r,e.exports=a},function(e,t,n){"use strict";var r=n(618),a=[["table",n(1689),["paragraph","reference"]],["code",n(1690)],["fence",n(1691),["paragraph","reference","blockquote","list"]],["blockquote",n(1692),["paragraph","reference","blockquote","list"]],["hr",n(1693),["paragraph","reference","blockquote","list"]],["list",n(1694),["paragraph","reference","blockquote"]],["reference",n(1695)],["heading",n(1696),["paragraph","reference","blockquote"]],["lheading",n(1697)],["html_block",n(1698),["paragraph","reference","blockquote"]],["paragraph",n(1700)]];function i(){this.ruler=new r;for(var e=0;e<a.length;e++)this.ruler.push(a[e][0],a[e][1],{alt:(a[e][2]||[]).slice()})}i.prototype.tokenize=function(e,t,n){for(var r,a=this.ruler.getRules(""),i=a.length,o=t,c=!1,l=e.md.options.maxNesting;o<n&&(e.line=o=e.skipEmptyLines(o),!(o>=n))&&!(e.sCount[o]<e.blkIndent);){if(e.level>=l){e.line=n;break}for(r=0;r<i&&!a[r](e,o,n,!1);r++);e.tight=!c,e.isEmpty(e.line-1)&&(c=!0),(o=e.line)<n&&e.isEmpty(o)&&(c=!0,o++,e.line=o)}},i.prototype.parse=function(e,t,n,r){var a;e&&(a=new this.State(e,t,n,r),this.tokenize(a,a.line,a.lineMax))},i.prototype.State=n(1701),e.exports=i},function(e,t,n){"use strict";var r=n(96).isSpace;function a(e,t){var n=e.bMarks[t]+e.blkIndent,r=e.eMarks[t];return e.src.substr(n,r-n)}function i(e){var t,n=[],r=0,a=e.length,i=0,o=0,c=!1,l=0;for(t=e.charCodeAt(r);r<a;)96===t?c?(c=!1,l=r):i%2==0&&(c=!0,l=r):124!==t||i%2!=0||c||(n.push(e.substring(o,r)),o=r+1),92===t?i++:i=0,++r===a&&c&&(c=!1,r=l+1),t=e.charCodeAt(r);return n.push(e.substring(o)),n}e.exports=function(e,t,n,o){var c,l,s,u,d,f,p,h,m,g,v,y;if(t+2>n)return!1;if(d=t+1,e.sCount[d]<e.blkIndent)return!1;if(e.sCount[d]-e.blkIndent>=4)return!1;if((s=e.bMarks[d]+e.tShift[d])>=e.eMarks[d])return!1;if(124!==(c=e.src.charCodeAt(s++))&&45!==c&&58!==c)return!1;for(;s<e.eMarks[d];){if(124!==(c=e.src.charCodeAt(s))&&45!==c&&58!==c&&!r(c))return!1;s++}for(f=(l=a(e,t+1)).split("|"),m=[],u=0;u<f.length;u++){if(!(g=f[u].trim())){if(0===u||u===f.length-1)continue;return!1}if(!/^:?-+:?$/.test(g))return!1;58===g.charCodeAt(g.length-1)?m.push(58===g.charCodeAt(0)?"center":"right"):58===g.charCodeAt(0)?m.push("left"):m.push("")}if(-1===(l=a(e,t).trim()).indexOf("|"))return!1;if(e.sCount[t]-e.blkIndent>=4)return!1;if((p=(f=i(l.replace(/^\||\|$/g,""))).length)>m.length)return!1;if(o)return!0;for((h=e.push("table_open","table",1)).map=v=[t,0],(h=e.push("thead_open","thead",1)).map=[t,t+1],(h=e.push("tr_open","tr",1)).map=[t,t+1],u=0;u<f.length;u++)(h=e.push("th_open","th",1)).map=[t,t+1],m[u]&&(h.attrs=[["style","text-align:"+m[u]]]),(h=e.push("inline","",0)).content=f[u].trim(),h.map=[t,t+1],h.children=[],h=e.push("th_close","th",-1);for(h=e.push("tr_close","tr",-1),h=e.push("thead_close","thead",-1),(h=e.push("tbody_open","tbody",1)).map=y=[t+2,0],d=t+2;d<n&&!(e.sCount[d]<e.blkIndent)&&-1!==(l=a(e,d).trim()).indexOf("|")&&!(e.sCount[d]-e.blkIndent>=4);d++){for(f=i(l.replace(/^\||\|$/g,"")),h=e.push("tr_open","tr",1),u=0;u<p;u++)h=e.push("td_open","td",1),m[u]&&(h.attrs=[["style","text-align:"+m[u]]]),(h=e.push("inline","",0)).content=f[u]?f[u].trim():"",h.children=[],h=e.push("td_close","td",-1);h=e.push("tr_close","tr",-1)}return h=e.push("tbody_close","tbody",-1),h=e.push("table_close","table",-1),v[1]=y[1]=d,e.line=d,!0}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,a,i;if(e.sCount[t]-e.blkIndent<4)return!1;for(a=r=t+1;r<n;)if(e.isEmpty(r))r++;else{if(!(e.sCount[r]-e.blkIndent>=4))break;a=++r}return e.line=a,(i=e.push("code_block","code",0)).content=e.getLines(t,a,4+e.blkIndent,!0),i.map=[t,e.line],!0}},function(e,t,n){"use strict";e.exports=function(e,t,n,r){var a,i,o,c,l,s,u,d=!1,f=e.bMarks[t]+e.tShift[t],p=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(f+3>p)return!1;if(126!==(a=e.src.charCodeAt(f))&&96!==a)return!1;if(l=f,(i=(f=e.skipChars(f,a))-l)<3)return!1;if(u=e.src.slice(l,f),(o=e.src.slice(f,p)).indexOf(String.fromCharCode(a))>=0)return!1;if(r)return!0;for(c=t;!(++c>=n)&&!((f=l=e.bMarks[c]+e.tShift[c])<(p=e.eMarks[c])&&e.sCount[c]<e.blkIndent);)if(e.src.charCodeAt(f)===a&&!(e.sCount[c]-e.blkIndent>=4||(f=e.skipChars(f,a))-l<i||(f=e.skipSpaces(f))<p)){d=!0;break}return i=e.sCount[t],e.line=c+(d?1:0),(s=e.push("fence","code",0)).info=o,s.content=e.getLines(t+1,c,i,!0),s.markup=u,s.map=[t,e.line],!0}},function(e,t,n){"use strict";var r=n(96).isSpace;e.exports=function(e,t,n,a){var i,o,c,l,s,u,d,f,p,h,m,g,v,y,b,k,w,x,_,C,E=e.lineMax,O=e.bMarks[t]+e.tShift[t],S=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(62!==e.src.charCodeAt(O++))return!1;if(a)return!0;for(l=p=e.sCount[t]+O-(e.bMarks[t]+e.tShift[t]),32===e.src.charCodeAt(O)?(O++,l++,p++,i=!1,k=!0):9===e.src.charCodeAt(O)?(k=!0,(e.bsCount[t]+p)%4==3?(O++,l++,p++,i=!1):i=!0):k=!1,h=[e.bMarks[t]],e.bMarks[t]=O;O<S&&(o=e.src.charCodeAt(O),r(o));)9===o?p+=4-(p+e.bsCount[t]+(i?1:0))%4:p++,O++;for(m=[e.bsCount[t]],e.bsCount[t]=e.sCount[t]+1+(k?1:0),u=O>=S,y=[e.sCount[t]],e.sCount[t]=p-l,b=[e.tShift[t]],e.tShift[t]=O-e.bMarks[t],x=e.md.block.ruler.getRules("blockquote"),v=e.parentType,e.parentType="blockquote",C=!1,f=t+1;f<n&&(e.sCount[f]<e.blkIndent&&(C=!0),!((O=e.bMarks[f]+e.tShift[f])>=(S=e.eMarks[f])));f++)if(62!==e.src.charCodeAt(O++)||C){if(u)break;for(w=!1,c=0,s=x.length;c<s;c++)if(x[c](e,f,n,!0)){w=!0;break}if(w){e.lineMax=f,0!==e.blkIndent&&(h.push(e.bMarks[f]),m.push(e.bsCount[f]),b.push(e.tShift[f]),y.push(e.sCount[f]),e.sCount[f]-=e.blkIndent);break}h.push(e.bMarks[f]),m.push(e.bsCount[f]),b.push(e.tShift[f]),y.push(e.sCount[f]),e.sCount[f]=-1}else{for(l=p=e.sCount[f]+O-(e.bMarks[f]+e.tShift[f]),32===e.src.charCodeAt(O)?(O++,l++,p++,i=!1,k=!0):9===e.src.charCodeAt(O)?(k=!0,(e.bsCount[f]+p)%4==3?(O++,l++,p++,i=!1):i=!0):k=!1,h.push(e.bMarks[f]),e.bMarks[f]=O;O<S&&(o=e.src.charCodeAt(O),r(o));)9===o?p+=4-(p+e.bsCount[f]+(i?1:0))%4:p++,O++;u=O>=S,m.push(e.bsCount[f]),e.bsCount[f]=e.sCount[f]+1+(k?1:0),y.push(e.sCount[f]),e.sCount[f]=p-l,b.push(e.tShift[f]),e.tShift[f]=O-e.bMarks[f]}for(g=e.blkIndent,e.blkIndent=0,(_=e.push("blockquote_open","blockquote",1)).markup=">",_.map=d=[t,0],e.md.block.tokenize(e,t,f),(_=e.push("blockquote_close","blockquote",-1)).markup=">",e.lineMax=E,e.parentType=v,d[1]=e.line,c=0;c<b.length;c++)e.bMarks[c+t]=h[c],e.tShift[c+t]=b[c],e.sCount[c+t]=y[c],e.bsCount[c+t]=m[c];return e.blkIndent=g,!0}},function(e,t,n){"use strict";var r=n(96).isSpace;e.exports=function(e,t,n,a){var i,o,c,l,s=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(42!==(i=e.src.charCodeAt(s++))&&45!==i&&95!==i)return!1;for(o=1;s<u;){if((c=e.src.charCodeAt(s++))!==i&&!r(c))return!1;c===i&&o++}return!(o<3)&&(a||(e.line=t+1,(l=e.push("hr","hr",0)).map=[t,e.line],l.markup=Array(o+1).join(String.fromCharCode(i))),!0)}},function(e,t,n){"use strict";var r=n(96).isSpace;function a(e,t){var n,a,i,o;return a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t],42!==(n=e.src.charCodeAt(a++))&&45!==n&&43!==n||a<i&&(o=e.src.charCodeAt(a),!r(o))?-1:a}function i(e,t){var n,a=e.bMarks[t]+e.tShift[t],i=a,o=e.eMarks[t];if(i+1>=o)return-1;if((n=e.src.charCodeAt(i++))<48||n>57)return-1;for(;;){if(i>=o)return-1;if(!((n=e.src.charCodeAt(i++))>=48&&n<=57)){if(41===n||46===n)break;return-1}if(i-a>=10)return-1}return i<o&&(n=e.src.charCodeAt(i),!r(n))?-1:i}e.exports=function(e,t,n,r){var o,c,l,s,u,d,f,p,h,m,g,v,y,b,k,w,x,_,C,E,O,S,R,D,A,T,P,j,M=!1,N=!0;if(e.sCount[t]-e.blkIndent>=4)return!1;if(r&&"paragraph"===e.parentType&&e.tShift[t]>=e.blkIndent&&(M=!0),(R=i(e,t))>=0){if(f=!0,A=e.bMarks[t]+e.tShift[t],y=Number(e.src.substr(A,R-A-1)),M&&1!==y)return!1}else{if(!((R=a(e,t))>=0))return!1;f=!1}if(M&&e.skipSpaces(R)>=e.eMarks[t])return!1;if(v=e.src.charCodeAt(R-1),r)return!0;for(g=e.tokens.length,f?(j=e.push("ordered_list_open","ol",1),1!==y&&(j.attrs=[["start",y]])):j=e.push("bullet_list_open","ul",1),j.map=m=[t,0],j.markup=String.fromCharCode(v),k=t,D=!1,P=e.md.block.ruler.getRules("list"),C=e.parentType,e.parentType="list";k<n;){for(S=R,b=e.eMarks[k],d=w=e.sCount[k]+R-(e.bMarks[t]+e.tShift[t]);S<b;){if(9===(o=e.src.charCodeAt(S)))w+=4-(w+e.bsCount[k])%4;else{if(32!==o)break;w++}S++}if((u=(c=S)>=b?1:w-d)>4&&(u=1),s=d+u,(j=e.push("list_item_open","li",1)).markup=String.fromCharCode(v),j.map=p=[t,0],x=e.blkIndent,O=e.tight,E=e.tShift[t],_=e.sCount[t],e.blkIndent=s,e.tight=!0,e.tShift[t]=c-e.bMarks[t],e.sCount[t]=w,c>=b&&e.isEmpty(t+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,t,n,!0),e.tight&&!D||(N=!1),D=e.line-t>1&&e.isEmpty(e.line-1),e.blkIndent=x,e.tShift[t]=E,e.sCount[t]=_,e.tight=O,(j=e.push("list_item_close","li",-1)).markup=String.fromCharCode(v),k=t=e.line,p[1]=k,c=e.bMarks[t],k>=n)break;if(e.sCount[k]<e.blkIndent)break;for(T=!1,l=0,h=P.length;l<h;l++)if(P[l](e,k,n,!0)){T=!0;break}if(T)break;if(f){if((R=i(e,k))<0)break}else if((R=a(e,k))<0)break;if(v!==e.src.charCodeAt(R-1))break}return(j=f?e.push("ordered_list_close","ol",-1):e.push("bullet_list_close","ul",-1)).markup=String.fromCharCode(v),m[1]=k,e.line=k,e.parentType=C,N&&function(e,t){var n,r,a=e.level+2;for(n=t+2,r=e.tokens.length-2;n<r;n++)e.tokens[n].level===a&&"paragraph_open"===e.tokens[n].type&&(e.tokens[n+2].hidden=!0,e.tokens[n].hidden=!0,n+=2)}(e,g),!0}},function(e,t,n){"use strict";var r=n(96).normalizeReference,a=n(96).isSpace;e.exports=function(e,t,n,i){var o,c,l,s,u,d,f,p,h,m,g,v,y,b,k,w,x=0,_=e.bMarks[t]+e.tShift[t],C=e.eMarks[t],E=t+1;if(e.sCount[t]-e.blkIndent>=4)return!1;if(91!==e.src.charCodeAt(_))return!1;for(;++_<C;)if(93===e.src.charCodeAt(_)&&92!==e.src.charCodeAt(_-1)){if(_+1===C)return!1;if(58!==e.src.charCodeAt(_+1))return!1;break}for(s=e.lineMax,k=e.md.block.ruler.getRules("reference"),m=e.parentType,e.parentType="reference";E<s&&!e.isEmpty(E);E++)if(!(e.sCount[E]-e.blkIndent>3||e.sCount[E]<0)){for(b=!1,d=0,f=k.length;d<f;d++)if(k[d](e,E,s,!0)){b=!0;break}if(b)break}for(C=(y=e.getLines(t,E,e.blkIndent,!1).trim()).length,_=1;_<C;_++){if(91===(o=y.charCodeAt(_)))return!1;if(93===o){h=_;break}(10===o||92===o&&++_<C&&10===y.charCodeAt(_))&&x++}if(h<0||58!==y.charCodeAt(h+1))return!1;for(_=h+2;_<C;_++)if(10===(o=y.charCodeAt(_)))x++;else if(!a(o))break;if(!(g=e.md.helpers.parseLinkDestination(y,_,C)).ok)return!1;if(u=e.md.normalizeLink(g.str),!e.md.validateLink(u))return!1;for(c=_=g.pos,l=x+=g.lines,v=_;_<C;_++)if(10===(o=y.charCodeAt(_)))x++;else if(!a(o))break;for(g=e.md.helpers.parseLinkTitle(y,_,C),_<C&&v!==_&&g.ok?(w=g.str,_=g.pos,x+=g.lines):(w="",_=c,x=l);_<C&&(o=y.charCodeAt(_),a(o));)_++;if(_<C&&10!==y.charCodeAt(_)&&w)for(w="",_=c,x=l;_<C&&(o=y.charCodeAt(_),a(o));)_++;return!(_<C&&10!==y.charCodeAt(_))&&(!!(p=r(y.slice(1,h)))&&(i||(void 0===e.env.references&&(e.env.references={}),void 0===e.env.references[p]&&(e.env.references[p]={title:w,href:u}),e.parentType=m,e.line=t+x+1),!0))}},function(e,t,n){"use strict";var r=n(96).isSpace;e.exports=function(e,t,n,a){var i,o,c,l,s=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(35!==(i=e.src.charCodeAt(s))||s>=u)return!1;for(o=1,i=e.src.charCodeAt(++s);35===i&&s<u&&o<=6;)o++,i=e.src.charCodeAt(++s);return!(o>6||s<u&&!r(i))&&(a||(u=e.skipSpacesBack(u,s),(c=e.skipCharsBack(u,35,s))>s&&r(e.src.charCodeAt(c-1))&&(u=c),e.line=t+1,(l=e.push("heading_open","h"+String(o),1)).markup="########".slice(0,o),l.map=[t,e.line],(l=e.push("inline","",0)).content=e.src.slice(s,u).trim(),l.map=[t,e.line],l.children=[],(l=e.push("heading_close","h"+String(o),-1)).markup="########".slice(0,o)),!0)}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,a,i,o,c,l,s,u,d,f,p=t+1,h=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;for(f=e.parentType,e.parentType="paragraph";p<n&&!e.isEmpty(p);p++)if(!(e.sCount[p]-e.blkIndent>3)){if(e.sCount[p]>=e.blkIndent&&(l=e.bMarks[p]+e.tShift[p])<(s=e.eMarks[p])&&(45===(d=e.src.charCodeAt(l))||61===d)&&(l=e.skipChars(l,d),(l=e.skipSpaces(l))>=s)){u=61===d?1:2;break}if(!(e.sCount[p]<0)){for(a=!1,i=0,o=h.length;i<o;i++)if(h[i](e,p,n,!0)){a=!0;break}if(a)break}}return!!u&&(r=e.getLines(t,p,e.blkIndent,!1).trim(),e.line=p+1,(c=e.push("heading_open","h"+String(u),1)).markup=String.fromCharCode(d),c.map=[t,e.line],(c=e.push("inline","",0)).content=r,c.map=[t,e.line-1],c.children=[],(c=e.push("heading_close","h"+String(u),-1)).markup=String.fromCharCode(d),e.parentType=f,!0)}},function(e,t,n){"use strict";var r=n(1699),a=n(914).HTML_OPEN_CLOSE_TAG_RE,i=[[/^<(script|pre|style)(?=(\s|>|$))/i,/<\/(script|pre|style)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+r.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(a.source+"\\s*$"),/^$/,!1]];e.exports=function(e,t,n,r){var a,o,c,l,s=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(!e.md.options.html)return!1;if(60!==e.src.charCodeAt(s))return!1;for(l=e.src.slice(s,u),a=0;a<i.length&&!i[a][0].test(l);a++);if(a===i.length)return!1;if(r)return i[a][2];if(o=t+1,!i[a][1].test(l))for(;o<n&&!(e.sCount[o]<e.blkIndent);o++)if(s=e.bMarks[o]+e.tShift[o],u=e.eMarks[o],l=e.src.slice(s,u),i[a][1].test(l)){0!==l.length&&o++;break}return e.line=o,(c=e.push("html_block","",0)).map=[t,o],c.content=e.getLines(t,o,e.blkIndent,!0),!0}},function(e,t,n){"use strict";e.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","meta","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},function(e,t,n){"use strict";e.exports=function(e,t){var n,r,a,i,o,c,l=t+1,s=e.md.block.ruler.getRules("paragraph"),u=e.lineMax;for(c=e.parentType,e.parentType="paragraph";l<u&&!e.isEmpty(l);l++)if(!(e.sCount[l]-e.blkIndent>3||e.sCount[l]<0)){for(r=!1,a=0,i=s.length;a<i;a++)if(s[a](e,l,u,!0)){r=!0;break}if(r)break}return n=e.getLines(t,l,e.blkIndent,!1).trim(),e.line=l,(o=e.push("paragraph_open","p",1)).map=[t,e.line],(o=e.push("inline","",0)).content=n,o.map=[t,e.line],o.children=[],o=e.push("paragraph_close","p",-1),e.parentType=c,!0}},function(e,t,n){"use strict";var r=n(619),a=n(96).isSpace;function i(e,t,n,r){var i,o,c,l,s,u,d,f;for(this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.parentType="root",this.level=0,this.result="",f=!1,c=l=u=d=0,s=(o=this.src).length;l<s;l++){if(i=o.charCodeAt(l),!f){if(a(i)){u++,9===i?d+=4-d%4:d++;continue}f=!0}10!==i&&l!==s-1||(10!==i&&l++,this.bMarks.push(c),this.eMarks.push(l),this.tShift.push(u),this.sCount.push(d),this.bsCount.push(0),f=!1,u=0,d=0,c=l+1)}this.bMarks.push(o.length),this.eMarks.push(o.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}i.prototype.push=function(e,t,n){var a=new r(e,t,n);return a.block=!0,n<0&&this.level--,a.level=this.level,n>0&&this.level++,this.tokens.push(a),a},i.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]},i.prototype.skipEmptyLines=function(e){for(var t=this.lineMax;e<t&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e},i.prototype.skipSpaces=function(e){for(var t,n=this.src.length;e<n&&(t=this.src.charCodeAt(e),a(t));e++);return e},i.prototype.skipSpacesBack=function(e,t){if(e<=t)return e;for(;e>t;)if(!a(this.src.charCodeAt(--e)))return e+1;return e},i.prototype.skipChars=function(e,t){for(var n=this.src.length;e<n&&this.src.charCodeAt(e)===t;e++);return e},i.prototype.skipCharsBack=function(e,t,n){if(e<=n)return e;for(;e>n;)if(t!==this.src.charCodeAt(--e))return e+1;return e},i.prototype.getLines=function(e,t,n,r){var i,o,c,l,s,u,d,f=e;if(e>=t)return"";for(u=new Array(t-e),i=0;f<t;f++,i++){for(o=0,d=l=this.bMarks[f],s=f+1<t||r?this.eMarks[f]+1:this.eMarks[f];l<s&&o<n;){if(c=this.src.charCodeAt(l),a(c))9===c?o+=4-(o+this.bsCount[f])%4:o++;else{if(!(l-d<this.tShift[f]))break;o++}l++}u[i]=o>n?new Array(o-n+1).join(" ")+this.src.slice(l,s):this.src.slice(l,s)}return u.join("")},i.prototype.Token=r,e.exports=i},function(e,t,n){"use strict";var r=n(618),a=[["text",n(1703)],["newline",n(1704)],["escape",n(1705)],["backticks",n(1706)],["strikethrough",n(915).tokenize],["emphasis",n(916).tokenize],["link",n(1707)],["image",n(1708)],["autolink",n(1709)],["html_inline",n(1710)],["entity",n(1711)]],i=[["balance_pairs",n(1712)],["strikethrough",n(915).postProcess],["emphasis",n(916).postProcess],["text_collapse",n(1713)]];function o(){var e;for(this.ruler=new r,e=0;e<a.length;e++)this.ruler.push(a[e][0],a[e][1]);for(this.ruler2=new r,e=0;e<i.length;e++)this.ruler2.push(i[e][0],i[e][1])}o.prototype.skipToken=function(e){var t,n,r=e.pos,a=this.ruler.getRules(""),i=a.length,o=e.md.options.maxNesting,c=e.cache;if(void 0===c[r]){if(e.level<o)for(n=0;n<i&&(e.level++,t=a[n](e,!0),e.level--,!t);n++);else e.pos=e.posMax;t||e.pos++,c[r]=e.pos}else e.pos=c[r]},o.prototype.tokenize=function(e){for(var t,n,r=this.ruler.getRules(""),a=r.length,i=e.posMax,o=e.md.options.maxNesting;e.pos<i;){if(e.level<o)for(n=0;n<a&&!(t=r[n](e,!1));n++);if(t){if(e.pos>=i)break}else e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()},o.prototype.parse=function(e,t,n,r){var a,i,o,c=new this.State(e,t,n,r);for(this.tokenize(c),o=(i=this.ruler2.getRules("")).length,a=0;a<o;a++)i[a](c)},o.prototype.State=n(1714),e.exports=o},function(e,t,n){"use strict";function r(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}e.exports=function(e,t){for(var n=e.pos;n<e.posMax&&!r(e.src.charCodeAt(n));)n++;return n!==e.pos&&(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}},function(e,t,n){"use strict";var r=n(96).isSpace;e.exports=function(e,t){var n,a,i=e.pos;if(10!==e.src.charCodeAt(i))return!1;for(n=e.pending.length-1,a=e.posMax,t||(n>=0&&32===e.pending.charCodeAt(n)?n>=1&&32===e.pending.charCodeAt(n-1)?(e.pending=e.pending.replace(/ +$/,""),e.push("hardbreak","br",0)):(e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0)):e.push("softbreak","br",0)),i++;i<a&&r(e.src.charCodeAt(i));)i++;return e.pos=i,!0}},function(e,t,n){"use strict";for(var r=n(96).isSpace,a=[],i=0;i<256;i++)a.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach((function(e){a[e.charCodeAt(0)]=1})),e.exports=function(e,t){var n,i=e.pos,o=e.posMax;if(92!==e.src.charCodeAt(i))return!1;if(++i<o){if((n=e.src.charCodeAt(i))<256&&0!==a[n])return t||(e.pending+=e.src[i]),e.pos+=2,!0;if(10===n){for(t||e.push("hardbreak","br",0),i++;i<o&&(n=e.src.charCodeAt(i),r(n));)i++;return e.pos=i,!0}}return t||(e.pending+="\\"),e.pos++,!0}},function(e,t,n){"use strict";e.exports=function(e,t){var n,r,a,i,o,c,l=e.pos;if(96!==e.src.charCodeAt(l))return!1;for(n=l,l++,r=e.posMax;l<r&&96===e.src.charCodeAt(l);)l++;for(a=e.src.slice(n,l),i=o=l;-1!==(i=e.src.indexOf("`",o));){for(o=i+1;o<r&&96===e.src.charCodeAt(o);)o++;if(o-i===a.length)return t||((c=e.push("code_inline","code",0)).markup=a,c.content=e.src.slice(l,i).replace(/[ \n]+/g," ").trim()),e.pos=o,!0}return t||(e.pending+=a),e.pos+=a.length,!0}},function(e,t,n){"use strict";var r=n(96).normalizeReference,a=n(96).isSpace;e.exports=function(e,t){var n,i,o,c,l,s,u,d,f,p="",h=e.pos,m=e.posMax,g=e.pos,v=!0;if(91!==e.src.charCodeAt(e.pos))return!1;if(l=e.pos+1,(c=e.md.helpers.parseLinkLabel(e,e.pos,!0))<0)return!1;if((s=c+1)<m&&40===e.src.charCodeAt(s)){for(v=!1,s++;s<m&&(i=e.src.charCodeAt(s),a(i)||10===i);s++);if(s>=m)return!1;for(g=s,(u=e.md.helpers.parseLinkDestination(e.src,s,e.posMax)).ok&&(p=e.md.normalizeLink(u.str),e.md.validateLink(p)?s=u.pos:p=""),g=s;s<m&&(i=e.src.charCodeAt(s),a(i)||10===i);s++);if(u=e.md.helpers.parseLinkTitle(e.src,s,e.posMax),s<m&&g!==s&&u.ok)for(f=u.str,s=u.pos;s<m&&(i=e.src.charCodeAt(s),a(i)||10===i);s++);else f="";(s>=m||41!==e.src.charCodeAt(s))&&(v=!0),s++}if(v){if(void 0===e.env.references)return!1;if(s<m&&91===e.src.charCodeAt(s)?(g=s+1,(s=e.md.helpers.parseLinkLabel(e,s))>=0?o=e.src.slice(g,s++):s=c+1):s=c+1,o||(o=e.src.slice(l,c)),!(d=e.env.references[r(o)]))return e.pos=h,!1;p=d.href,f=d.title}return t||(e.pos=l,e.posMax=c,e.push("link_open","a",1).attrs=n=[["href",p]],f&&n.push(["title",f]),e.md.inline.tokenize(e),e.push("link_close","a",-1)),e.pos=s,e.posMax=m,!0}},function(e,t,n){"use strict";var r=n(96).normalizeReference,a=n(96).isSpace;e.exports=function(e,t){var n,i,o,c,l,s,u,d,f,p,h,m,g,v="",y=e.pos,b=e.posMax;if(33!==e.src.charCodeAt(e.pos))return!1;if(91!==e.src.charCodeAt(e.pos+1))return!1;if(s=e.pos+2,(l=e.md.helpers.parseLinkLabel(e,e.pos+1,!1))<0)return!1;if((u=l+1)<b&&40===e.src.charCodeAt(u)){for(u++;u<b&&(i=e.src.charCodeAt(u),a(i)||10===i);u++);if(u>=b)return!1;for(g=u,(f=e.md.helpers.parseLinkDestination(e.src,u,e.posMax)).ok&&(v=e.md.normalizeLink(f.str),e.md.validateLink(v)?u=f.pos:v=""),g=u;u<b&&(i=e.src.charCodeAt(u),a(i)||10===i);u++);if(f=e.md.helpers.parseLinkTitle(e.src,u,e.posMax),u<b&&g!==u&&f.ok)for(p=f.str,u=f.pos;u<b&&(i=e.src.charCodeAt(u),a(i)||10===i);u++);else p="";if(u>=b||41!==e.src.charCodeAt(u))return e.pos=y,!1;u++}else{if(void 0===e.env.references)return!1;if(u<b&&91===e.src.charCodeAt(u)?(g=u+1,(u=e.md.helpers.parseLinkLabel(e,u))>=0?c=e.src.slice(g,u++):u=l+1):u=l+1,c||(c=e.src.slice(s,l)),!(d=e.env.references[r(c)]))return e.pos=y,!1;v=d.href,p=d.title}return t||(o=e.src.slice(s,l),e.md.inline.parse(o,e.md,e.env,m=[]),(h=e.push("image","img",0)).attrs=n=[["src",v],["alt",""]],h.children=m,h.content=o,p&&n.push(["title",p])),e.pos=u,e.posMax=b,!0}},function(e,t,n){"use strict";var r=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,a=/^<([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)>/;e.exports=function(e,t){var n,i,o,c,l,s,u=e.pos;return 60===e.src.charCodeAt(u)&&(!((n=e.src.slice(u)).indexOf(">")<0)&&(a.test(n)?(c=(i=n.match(a))[0].slice(1,-1),l=e.md.normalizeLink(c),!!e.md.validateLink(l)&&(t||((s=e.push("link_open","a",1)).attrs=[["href",l]],s.markup="autolink",s.info="auto",(s=e.push("text","",0)).content=e.md.normalizeLinkText(c),(s=e.push("link_close","a",-1)).markup="autolink",s.info="auto"),e.pos+=i[0].length,!0)):!!r.test(n)&&(c=(o=n.match(r))[0].slice(1,-1),l=e.md.normalizeLink("mailto:"+c),!!e.md.validateLink(l)&&(t||((s=e.push("link_open","a",1)).attrs=[["href",l]],s.markup="autolink",s.info="auto",(s=e.push("text","",0)).content=e.md.normalizeLinkText(c),(s=e.push("link_close","a",-1)).markup="autolink",s.info="auto"),e.pos+=o[0].length,!0))))}},function(e,t,n){"use strict";var r=n(914).HTML_TAG_RE;e.exports=function(e,t){var n,a,i,o=e.pos;return!!e.md.options.html&&(i=e.posMax,!(60!==e.src.charCodeAt(o)||o+2>=i)&&(!(33!==(n=e.src.charCodeAt(o+1))&&63!==n&&47!==n&&!function(e){var t=32|e;return t>=97&&t<=122}(n))&&(!!(a=e.src.slice(o).match(r))&&(t||(e.push("html_inline","",0).content=e.src.slice(o,o+a[0].length)),e.pos+=a[0].length,!0))))}},function(e,t,n){"use strict";var r=n(909),a=n(96).has,i=n(96).isValidEntityCode,o=n(96).fromCodePoint,c=/^&#((?:x[a-f0-9]{1,8}|[0-9]{1,8}));/i,l=/^&([a-z][a-z0-9]{1,31});/i;e.exports=function(e,t){var n,s,u=e.pos,d=e.posMax;if(38!==e.src.charCodeAt(u))return!1;if(u+1<d)if(35===e.src.charCodeAt(u+1)){if(s=e.src.slice(u).match(c))return t||(n="x"===s[1][0].toLowerCase()?parseInt(s[1].slice(1),16):parseInt(s[1],10),e.pending+=i(n)?o(n):o(65533)),e.pos+=s[0].length,!0}else if((s=e.src.slice(u).match(l))&&a(r,s[1]))return t||(e.pending+=r[s[1]]),e.pos+=s[0].length,!0;return t||(e.pending+="&"),e.pos++,!0}},function(e,t,n){"use strict";e.exports=function(e){var t,n,r,a,i=e.delimiters,o=e.delimiters.length;for(t=0;t<o;t++)if((r=i[t]).close)for(n=t-r.jump-1;n>=0;){if((a=i[n]).open&&a.marker===r.marker&&a.end<0&&a.level===r.level)if(!((a.close||r.open)&&void 0!==a.length&&void 0!==r.length&&(a.length+r.length)%3==0)){r.jump=t-n,r.open=!1,a.end=t,a.jump=0;break}n-=a.jump+1}}},function(e,t,n){"use strict";e.exports=function(e){var t,n,r=0,a=e.tokens,i=e.tokens.length;for(t=n=0;t<i;t++)r+=a[t].nesting,a[t].level=r,"text"===a[t].type&&t+1<i&&"text"===a[t+1].type?a[t+1].content=a[t].content+a[t+1].content:(t!==n&&(a[n]=a[t]),n++);t!==n&&(a.length=n)}},function(e,t,n){"use strict";var r=n(619),a=n(96).isWhiteSpace,i=n(96).isPunctChar,o=n(96).isMdAsciiPunct;function c(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[]}c.prototype.pushPending=function(){var e=new r("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e},c.prototype.push=function(e,t,n){this.pending&&this.pushPending();var a=new r(e,t,n);return n<0&&this.level--,a.level=this.level,n>0&&this.level++,this.pendingLevel=this.level,this.tokens.push(a),a},c.prototype.scanDelims=function(e,t){var n,r,c,l,s,u,d,f,p,h=e,m=!0,g=!0,v=this.posMax,y=this.src.charCodeAt(e);for(n=e>0?this.src.charCodeAt(e-1):32;h<v&&this.src.charCodeAt(h)===y;)h++;return c=h-e,r=h<v?this.src.charCodeAt(h):32,d=o(n)||i(String.fromCharCode(n)),p=o(r)||i(String.fromCharCode(r)),u=a(n),(f=a(r))?m=!1:p&&(u||d||(m=!1)),u?g=!1:d&&(f||p||(g=!1)),t?(l=m,s=g):(l=m&&(!g||d),s=g&&(!m||p)),{can_open:l,can_close:s,length:c}},c.prototype.Token=r,e.exports=c},function(e,t,n){"use strict";function r(e){var t=Array.prototype.slice.call(arguments,1);return t.forEach((function(t){t&&Object.keys(t).forEach((function(n){e[n]=t[n]}))})),e}function a(e){return Object.prototype.toString.call(e)}function i(e){return"[object Function]"===a(e)}function o(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var c={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};var l={"http:":{validate:function(e,t,n){var r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){var r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&":"===e[t-3]||t>=3&&"/"===e[t-3]?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){var r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},s="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");function u(e){var t=e.re=n(1716)(e.__opts__),r=e.__tlds__.slice();function c(e){return e.replace("%TLDS%",t.src_tlds)}e.onCompile(),e.__tlds_replaced__||r.push("a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]"),r.push(t.src_xn),t.src_tlds=r.join("|"),t.email_fuzzy=RegExp(c(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(c(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(c(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(c(t.tpl_host_fuzzy_test),"i");var l=[];function s(e,t){throw new Error('(LinkifyIt) Invalid schema "'+e+'": '+t)}e.__compiled__={},Object.keys(e.__schemas__).forEach((function(t){var n=e.__schemas__[t];if(null!==n){var r={validate:null,link:null};if(e.__compiled__[t]=r,"[object Object]"===a(n))return!function(e){return"[object RegExp]"===a(e)}(n.validate)?i(n.validate)?r.validate=n.validate:s(t,n):r.validate=function(e){return function(t,n){var r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}(n.validate),void(i(n.normalize)?r.normalize=n.normalize:n.normalize?s(t,n):r.normalize=function(e,t){t.normalize(e)});!function(e){return"[object String]"===a(e)}(n)?s(t,n):l.push(t)}})),l.forEach((function(t){e.__compiled__[e.__schemas__[t]]&&(e.__compiled__[t].validate=e.__compiled__[e.__schemas__[t]].validate,e.__compiled__[t].normalize=e.__compiled__[e.__schemas__[t]].normalize)})),e.__compiled__[""]={validate:null,normalize:function(e,t){t.normalize(e)}};var u=Object.keys(e.__compiled__).filter((function(t){return t.length>0&&e.__compiled__[t]})).map(o).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+u+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+u+")","ig"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),function(e){e.__index__=-1,e.__text_cache__=""}(e)}function d(e,t){var n=e.__index__,r=e.__last_index__,a=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=a,this.text=a,this.url=a}function f(e,t){var n=new d(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function p(e,t){if(!(this instanceof p))return new p(e,t);var n;t||(n=e,Object.keys(n||{}).reduce((function(e,t){return e||c.hasOwnProperty(t)}),!1)&&(t=e,e={})),this.__opts__=r({},c,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=r({},l,e),this.__compiled__={},this.__tlds__=s,this.__tlds_replaced__=!1,this.re={},u(this)}p.prototype.add=function(e,t){return this.__schemas__[e]=t,u(this),this},p.prototype.set=function(e){return this.__opts__=r(this.__opts__,e),this},p.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;var t,n,r,a,i,o,c,l;if(this.re.schema_test.test(e))for((c=this.re.schema_search).lastIndex=0;null!==(t=c.exec(e));)if(a=this.testSchemaAt(e,t[2],c.lastIndex)){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+a;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(l=e.search(this.re.host_fuzzy_test))>=0&&(this.__index__<0||l<this.__index__)&&null!==(n=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(i=n.index+n[1].length,(this.__index__<0||i<this.__index__)&&(this.__schema__="",this.__index__=i,this.__last_index__=n.index+n[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&e.indexOf("@")>=0&&null!==(r=e.match(this.re.email_fuzzy))&&(i=r.index+r[1].length,o=r.index+r[0].length,(this.__index__<0||i<this.__index__||i===this.__index__&&o>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=i,this.__last_index__=o)),this.__index__>=0},p.prototype.pretest=function(e){return this.re.pretest.test(e)},p.prototype.testSchemaAt=function(e,t,n){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,n,this):0},p.prototype.match=function(e){var t=0,n=[];this.__index__>=0&&this.__text_cache__===e&&(n.push(f(this,t)),t=this.__last_index__);for(var r=t?e.slice(t):e;this.test(r);)n.push(f(this,t)),r=r.slice(this.__last_index__),t+=this.__last_index__;return n.length?n:null},p.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter((function(e,t,n){return e!==n[t-1]})).reverse(),u(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,u(this),this)},p.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),"mailto:"!==e.schema||/^mailto:/i.test(e.url)||(e.url="mailto:"+e.url)},p.prototype.onCompile=function(){},e.exports=p},function(e,t,n){"use strict";e.exports=function(e){var t={};t.src_Any=n(911).source,t.src_Cc=n(912).source,t.src_Z=n(913).source,t.src_P=n(617).source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");return t.src_pseudo_letter="(?:(?![><｜]|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|[><｜]|"+t.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+"[><｜]|[()[\\]{}.,\"'?!\\-]).|\\[(?:(?!"+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-]).|\\.{2,4}[a-zA-Z0-9%/]|\\.(?!"+t.src_ZCc+"|[.]).|"+(e&&e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+"\\,(?!"+t.src_ZCc+").|\\!(?!"+t.src_ZCc+"|[!]).|\\?(?!"+t.src_ZCc+"|[?]).)+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy='(^|[><｜]|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}},function(e,t,n){"use strict";e.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}}},function(e,t,n){"use strict";e.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","text_collapse"]}}}},function(e,t,n){"use strict";e.exports={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","text_collapse"]}}}},function(e,t){e.exports={100:"💯",1234:"🔢",grinning:"😀",smiley:"😃",smile:"😄",grin:"😁",laughing:"😆",satisfied:"😆",sweat_smile:"😅",joy:"😂",rofl:"🤣",relaxed:"☺️",blush:"😊",innocent:"😇",slightly_smiling_face:"🙂",upside_down_face:"🙃",wink:"😉",relieved:"😌",heart_eyes:"😍",kissing_heart:"😘",kissing:"😗",kissing_smiling_eyes:"😙",kissing_closed_eyes:"😚",yum:"😋",stuck_out_tongue_winking_eye:"😜",stuck_out_tongue_closed_eyes:"😝",stuck_out_tongue:"😛",money_mouth_face:"🤑",hugs:"🤗",nerd_face:"🤓",sunglasses:"😎",clown_face:"🤡",cowboy_hat_face:"🤠",smirk:"😏",unamused:"😒",disappointed:"😞",pensive:"😔",worried:"😟",confused:"😕",slightly_frowning_face:"🙁",frowning_face:"☹️",persevere:"😣",confounded:"😖",tired_face:"😫",weary:"😩",triumph:"😤",angry:"😠",rage:"😡",pout:"😡",no_mouth:"😶",neutral_face:"😐",expressionless:"😑",hushed:"😯",frowning:"😦",anguished:"😧",open_mouth:"😮",astonished:"😲",dizzy_face:"😵",flushed:"😳",scream:"😱",fearful:"😨",cold_sweat:"😰",cry:"😢",disappointed_relieved:"😥",drooling_face:"🤤",sob:"😭",sweat:"😓",sleepy:"😪",sleeping:"😴",roll_eyes:"🙄",thinking:"🤔",lying_face:"🤥",grimacing:"😬",zipper_mouth_face:"🤐",nauseated_face:"🤢",sneezing_face:"🤧",mask:"😷",face_with_thermometer:"🤒",face_with_head_bandage:"🤕",smiling_imp:"😈",imp:"👿",japanese_ogre:"👹",japanese_goblin:"👺",hankey:"💩",poop:"💩",shit:"💩",ghost:"👻",skull:"💀",skull_and_crossbones:"☠️",alien:"👽",space_invader:"👾",robot:"🤖",jack_o_lantern:"🎃",smiley_cat:"😺",smile_cat:"😸",joy_cat:"😹",heart_eyes_cat:"😻",smirk_cat:"😼",kissing_cat:"😽",scream_cat:"🙀",crying_cat_face:"😿",pouting_cat:"😾",open_hands:"👐",raised_hands:"🙌",clap:"👏",pray:"🙏",handshake:"🤝","+1":"👍",thumbsup:"👍","-1":"👎",thumbsdown:"👎",fist_oncoming:"👊",facepunch:"👊",punch:"👊",fist_raised:"✊",fist:"✊",fist_left:"🤛",fist_right:"🤜",crossed_fingers:"🤞",v:"✌️",metal:"🤘",ok_hand:"👌",point_left:"👈",point_right:"👉",point_up_2:"👆",point_down:"👇",point_up:"☝️",hand:"✋",raised_hand:"✋",raised_back_of_hand:"🤚",raised_hand_with_fingers_splayed:"🖐",vulcan_salute:"🖖",wave:"👋",call_me_hand:"🤙",muscle:"💪",middle_finger:"🖕",fu:"🖕",writing_hand:"✍️",selfie:"🤳",nail_care:"💅",ring:"💍",lipstick:"💄",kiss:"💋",lips:"👄",tongue:"👅",ear:"👂",nose:"👃",footprints:"👣",eye:"👁",eyes:"👀",speaking_head:"🗣",bust_in_silhouette:"👤",busts_in_silhouette:"👥",baby:"👶",boy:"👦",girl:"👧",man:"👨",woman:"👩",blonde_woman:"👱‍♀",blonde_man:"👱",person_with_blond_hair:"👱",older_man:"👴",older_woman:"👵",man_with_gua_pi_mao:"👲",woman_with_turban:"👳‍♀",man_with_turban:"👳",policewoman:"👮‍♀",policeman:"👮",cop:"👮",construction_worker_woman:"👷‍♀",construction_worker_man:"👷",construction_worker:"👷",guardswoman:"💂‍♀",guardsman:"💂",female_detective:"🕵️‍♀️",male_detective:"🕵",detective:"🕵",woman_health_worker:"👩‍⚕",man_health_worker:"👨‍⚕",woman_farmer:"👩‍🌾",man_farmer:"👨‍🌾",woman_cook:"👩‍🍳",man_cook:"👨‍🍳",woman_student:"👩‍🎓",man_student:"👨‍🎓",woman_singer:"👩‍🎤",man_singer:"👨‍🎤",woman_teacher:"👩‍🏫",man_teacher:"👨‍🏫",woman_factory_worker:"👩‍🏭",man_factory_worker:"👨‍🏭",woman_technologist:"👩‍💻",man_technologist:"👨‍💻",woman_office_worker:"👩‍💼",man_office_worker:"👨‍💼",woman_mechanic:"👩‍🔧",man_mechanic:"👨‍🔧",woman_scientist:"👩‍🔬",man_scientist:"👨‍🔬",woman_artist:"👩‍🎨",man_artist:"👨‍🎨",woman_firefighter:"👩‍🚒",man_firefighter:"👨‍🚒",woman_pilot:"👩‍✈",man_pilot:"👨‍✈",woman_astronaut:"👩‍🚀",man_astronaut:"👨‍🚀",woman_judge:"👩‍⚖",man_judge:"👨‍⚖",mrs_claus:"🤶",santa:"🎅",princess:"👸",prince:"🤴",bride_with_veil:"👰",man_in_tuxedo:"🤵",angel:"👼",pregnant_woman:"🤰",bowing_woman:"🙇‍♀",bowing_man:"🙇",bow:"🙇",tipping_hand_woman:"💁",information_desk_person:"💁",sassy_woman:"💁",tipping_hand_man:"💁‍♂",sassy_man:"💁‍♂",no_good_woman:"🙅",no_good:"🙅",ng_woman:"🙅",no_good_man:"🙅‍♂",ng_man:"🙅‍♂",ok_woman:"🙆",ok_man:"🙆‍♂",raising_hand_woman:"🙋",raising_hand:"🙋",raising_hand_man:"🙋‍♂",woman_facepalming:"🤦‍♀",man_facepalming:"🤦‍♂",woman_shrugging:"🤷‍♀",man_shrugging:"🤷‍♂",pouting_woman:"🙎",person_with_pouting_face:"🙎",pouting_man:"🙎‍♂",frowning_woman:"🙍",person_frowning:"🙍",frowning_man:"🙍‍♂",haircut_woman:"💇",haircut:"💇",haircut_man:"💇‍♂",massage_woman:"💆",massage:"💆",massage_man:"💆‍♂",business_suit_levitating:"🕴",dancer:"💃",man_dancing:"🕺",dancing_women:"👯",dancers:"👯",dancing_men:"👯‍♂",walking_woman:"🚶‍♀",walking_man:"🚶",walking:"🚶",running_woman:"🏃‍♀",running_man:"🏃",runner:"🏃",running:"🏃",couple:"👫",two_women_holding_hands:"👭",two_men_holding_hands:"👬",couple_with_heart_woman_man:"💑",couple_with_heart:"💑",couple_with_heart_woman_woman:"👩‍❤️‍👩",couple_with_heart_man_man:"👨‍❤️‍👨",couplekiss_man_woman:"💏",couplekiss_woman_woman:"👩‍❤️‍💋‍👩",couplekiss_man_man:"👨‍❤️‍💋‍👨",family_man_woman_boy:"👪",family:"👪",family_man_woman_girl:"👨‍👩‍👧",family_man_woman_girl_boy:"👨‍👩‍👧‍👦",family_man_woman_boy_boy:"👨‍👩‍👦‍👦",family_man_woman_girl_girl:"👨‍👩‍👧‍👧",family_woman_woman_boy:"👩‍👩‍👦",family_woman_woman_girl:"👩‍👩‍👧",family_woman_woman_girl_boy:"👩‍👩‍👧‍👦",family_woman_woman_boy_boy:"👩‍👩‍👦‍👦",family_woman_woman_girl_girl:"👩‍👩‍👧‍👧",family_man_man_boy:"👨‍👨‍👦",family_man_man_girl:"👨‍👨‍👧",family_man_man_girl_boy:"👨‍👨‍👧‍👦",family_man_man_boy_boy:"👨‍👨‍👦‍👦",family_man_man_girl_girl:"👨‍👨‍👧‍👧",family_woman_boy:"👩‍👦",family_woman_girl:"👩‍👧",family_woman_girl_boy:"👩‍👧‍👦",family_woman_boy_boy:"👩‍👦‍👦",family_woman_girl_girl:"👩‍👧‍👧",family_man_boy:"👨‍👦",family_man_girl:"👨‍👧",family_man_girl_boy:"👨‍👧‍👦",family_man_boy_boy:"👨‍👦‍👦",family_man_girl_girl:"👨‍👧‍👧",womans_clothes:"👚",shirt:"👕",tshirt:"👕",jeans:"👖",necktie:"👔",dress:"👗",bikini:"👙",kimono:"👘",high_heel:"👠",sandal:"👡",boot:"👢",mans_shoe:"👞",shoe:"👞",athletic_shoe:"👟",womans_hat:"👒",tophat:"🎩",mortar_board:"🎓",crown:"👑",rescue_worker_helmet:"⛑",school_satchel:"🎒",pouch:"👝",purse:"👛",handbag:"👜",briefcase:"💼",eyeglasses:"👓",dark_sunglasses:"🕶",closed_umbrella:"🌂",open_umbrella:"☂️",dog:"🐶",cat:"🐱",mouse:"🐭",hamster:"🐹",rabbit:"🐰",fox_face:"🦊",bear:"🐻",panda_face:"🐼",koala:"🐨",tiger:"🐯",lion:"🦁",cow:"🐮",pig:"🐷",pig_nose:"🐽",frog:"🐸",monkey_face:"🐵",see_no_evil:"🙈",hear_no_evil:"🙉",speak_no_evil:"🙊",monkey:"🐒",chicken:"🐔",penguin:"🐧",bird:"🐦",baby_chick:"🐤",hatching_chick:"🐣",hatched_chick:"🐥",duck:"🦆",eagle:"🦅",owl:"🦉",bat:"🦇",wolf:"🐺",boar:"🐗",horse:"🐴",unicorn:"🦄",bee:"🐝",honeybee:"🐝",bug:"🐛",butterfly:"🦋",snail:"🐌",shell:"🐚",beetle:"🐞",ant:"🐜",spider:"🕷",spider_web:"🕸",turtle:"🐢",snake:"🐍",lizard:"🦎",scorpion:"🦂",crab:"🦀",squid:"🦑",octopus:"🐙",shrimp:"🦐",tropical_fish:"🐠",fish:"🐟",blowfish:"🐡",dolphin:"🐬",flipper:"🐬",shark:"🦈",whale:"🐳",whale2:"🐋",crocodile:"🐊",leopard:"🐆",tiger2:"🐅",water_buffalo:"🐃",ox:"🐂",cow2:"🐄",deer:"🦌",dromedary_camel:"🐪",camel:"🐫",elephant:"🐘",rhinoceros:"🦏",gorilla:"🦍",racehorse:"🐎",pig2:"🐖",goat:"🐐",ram:"🐏",sheep:"🐑",dog2:"🐕",poodle:"🐩",cat2:"🐈",rooster:"🐓",turkey:"🦃",dove:"🕊",rabbit2:"🐇",mouse2:"🐁",rat:"🐀",chipmunk:"🐿",feet:"🐾",paw_prints:"🐾",dragon:"🐉",dragon_face:"🐲",cactus:"🌵",christmas_tree:"🎄",evergreen_tree:"🌲",deciduous_tree:"🌳",palm_tree:"🌴",seedling:"🌱",herb:"🌿",shamrock:"☘️",four_leaf_clover:"🍀",bamboo:"🎍",tanabata_tree:"🎋",leaves:"🍃",fallen_leaf:"🍂",maple_leaf:"🍁",mushroom:"🍄",ear_of_rice:"🌾",bouquet:"💐",tulip:"🌷",rose:"🌹",wilted_flower:"🥀",sunflower:"🌻",blossom:"🌼",cherry_blossom:"🌸",hibiscus:"🌺",earth_americas:"🌎",earth_africa:"🌍",earth_asia:"🌏",full_moon:"🌕",waning_gibbous_moon:"🌖",last_quarter_moon:"🌗",waning_crescent_moon:"🌘",new_moon:"🌑",waxing_crescent_moon:"🌒",first_quarter_moon:"🌓",moon:"🌔",waxing_gibbous_moon:"🌔",new_moon_with_face:"🌚",full_moon_with_face:"🌝",sun_with_face:"🌞",first_quarter_moon_with_face:"🌛",last_quarter_moon_with_face:"🌜",crescent_moon:"🌙",dizzy:"💫",star:"⭐️",star2:"🌟",sparkles:"✨",zap:"⚡️",fire:"🔥",boom:"💥",collision:"💥",comet:"☄",sunny:"☀️",sun_behind_small_cloud:"🌤",partly_sunny:"⛅️",sun_behind_large_cloud:"🌥",sun_behind_rain_cloud:"🌦",rainbow:"🌈",cloud:"☁️",cloud_with_rain:"🌧",cloud_with_lightning_and_rain:"⛈",cloud_with_lightning:"🌩",cloud_with_snow:"🌨",snowman_with_snow:"☃️",snowman:"⛄️",snowflake:"❄️",wind_face:"🌬",dash:"💨",tornado:"🌪",fog:"🌫",ocean:"🌊",droplet:"💧",sweat_drops:"💦",umbrella:"☔️",green_apple:"🍏",apple:"🍎",pear:"🍐",tangerine:"🍊",orange:"🍊",mandarin:"🍊",lemon:"🍋",banana:"🍌",watermelon:"🍉",grapes:"🍇",strawberry:"🍓",melon:"🍈",cherries:"🍒",peach:"🍑",pineapple:"🍍",kiwi_fruit:"🥝",avocado:"🥑",tomato:"🍅",eggplant:"🍆",cucumber:"🥒",carrot:"🥕",corn:"🌽",hot_pepper:"🌶",potato:"🥔",sweet_potato:"🍠",chestnut:"🌰",peanuts:"🥜",honey_pot:"🍯",croissant:"🥐",bread:"🍞",baguette_bread:"🥖",cheese:"🧀",egg:"🥚",fried_egg:"🍳",bacon:"🥓",pancakes:"🥞",fried_shrimp:"🍤",poultry_leg:"🍗",meat_on_bone:"🍖",pizza:"🍕",hotdog:"🌭",hamburger:"🍔",fries:"🍟",stuffed_flatbread:"🥙",taco:"🌮",burrito:"🌯",green_salad:"🥗",shallow_pan_of_food:"🥘",spaghetti:"🍝",ramen:"🍜",stew:"🍲",fish_cake:"🍥",sushi:"🍣",bento:"🍱",curry:"🍛",rice:"🍚",rice_ball:"🍙",rice_cracker:"🍘",oden:"🍢",dango:"🍡",shaved_ice:"🍧",ice_cream:"🍨",icecream:"🍦",cake:"🍰",birthday:"🎂",custard:"🍮",lollipop:"🍭",candy:"🍬",chocolate_bar:"🍫",popcorn:"🍿",doughnut:"🍩",cookie:"🍪",milk_glass:"🥛",baby_bottle:"🍼",coffee:"☕️",tea:"🍵",sake:"🍶",beer:"🍺",beers:"🍻",clinking_glasses:"🥂",wine_glass:"🍷",tumbler_glass:"🥃",cocktail:"🍸",tropical_drink:"🍹",champagne:"🍾",spoon:"🥄",fork_and_knife:"🍴",plate_with_cutlery:"🍽",soccer:"⚽️",basketball:"🏀",football:"🏈",baseball:"⚾️",tennis:"🎾",volleyball:"🏐",rugby_football:"🏉","8ball":"🎱",ping_pong:"🏓",badminton:"🏸",goal_net:"🥅",ice_hockey:"🏒",field_hockey:"🏑",cricket:"🏏",golf:"⛳️",bow_and_arrow:"🏹",fishing_pole_and_fish:"🎣",boxing_glove:"🥊",martial_arts_uniform:"🥋",ice_skate:"⛸",ski:"🎿",skier:"⛷",snowboarder:"🏂",weight_lifting_woman:"🏋️‍♀️",weight_lifting_man:"🏋",person_fencing:"🤺",women_wrestling:"🤼‍♀",men_wrestling:"🤼‍♂",woman_cartwheeling:"🤸‍♀",man_cartwheeling:"🤸‍♂",basketball_woman:"⛹️‍♀️",basketball_man:"⛹",woman_playing_handball:"🤾‍♀",man_playing_handball:"🤾‍♂",golfing_woman:"🏌️‍♀️",golfing_man:"🏌",surfing_woman:"🏄‍♀",surfing_man:"🏄",surfer:"🏄",swimming_woman:"🏊‍♀",swimming_man:"🏊",swimmer:"🏊",woman_playing_water_polo:"🤽‍♀",man_playing_water_polo:"🤽‍♂",rowing_woman:"🚣‍♀",rowing_man:"🚣",rowboat:"🚣",horse_racing:"🏇",biking_woman:"🚴‍♀",biking_man:"🚴",bicyclist:"🚴",mountain_biking_woman:"🚵‍♀",mountain_biking_man:"🚵",mountain_bicyclist:"🚵",running_shirt_with_sash:"🎽",medal_sports:"🏅",medal_military:"🎖","1st_place_medal":"🥇","2nd_place_medal":"🥈","3rd_place_medal":"🥉",trophy:"🏆",rosette:"🏵",reminder_ribbon:"🎗",ticket:"🎫",tickets:"🎟",circus_tent:"🎪",woman_juggling:"🤹‍♀",man_juggling:"🤹‍♂",performing_arts:"🎭",art:"🎨",clapper:"🎬",microphone:"🎤",headphones:"🎧",musical_score:"🎼",musical_keyboard:"🎹",drum:"🥁",saxophone:"🎷",trumpet:"🎺",guitar:"🎸",violin:"🎻",game_die:"🎲",dart:"🎯",bowling:"🎳",video_game:"🎮",slot_machine:"🎰",car:"🚗",red_car:"🚗",taxi:"🚕",blue_car:"🚙",bus:"🚌",trolleybus:"🚎",racing_car:"🏎",police_car:"🚓",ambulance:"🚑",fire_engine:"🚒",minibus:"🚐",truck:"🚚",articulated_lorry:"🚛",tractor:"🚜",kick_scooter:"🛴",bike:"🚲",motor_scooter:"🛵",motorcycle:"🏍",rotating_light:"🚨",oncoming_police_car:"🚔",oncoming_bus:"🚍",oncoming_automobile:"🚘",oncoming_taxi:"🚖",aerial_tramway:"🚡",mountain_cableway:"🚠",suspension_railway:"🚟",railway_car:"🚃",train:"🚋",mountain_railway:"🚞",monorail:"🚝",bullettrain_side:"🚄",bullettrain_front:"🚅",light_rail:"🚈",steam_locomotive:"🚂",train2:"🚆",metro:"🚇",tram:"🚊",station:"🚉",helicopter:"🚁",small_airplane:"🛩",airplane:"✈️",flight_departure:"🛫",flight_arrival:"🛬",rocket:"🚀",artificial_satellite:"🛰",seat:"💺",canoe:"🛶",boat:"⛵️",sailboat:"⛵️",motor_boat:"🛥",speedboat:"🚤",passenger_ship:"🛳",ferry:"⛴",ship:"🚢",anchor:"⚓️",construction:"🚧",fuelpump:"⛽️",busstop:"🚏",vertical_traffic_light:"🚦",traffic_light:"🚥",world_map:"🗺",moyai:"🗿",statue_of_liberty:"🗽",fountain:"⛲️",tokyo_tower:"🗼",european_castle:"🏰",japanese_castle:"🏯",stadium:"🏟",ferris_wheel:"🎡",roller_coaster:"🎢",carousel_horse:"🎠",parasol_on_ground:"⛱",beach_umbrella:"🏖",desert_island:"🏝",mountain:"⛰",mountain_snow:"🏔",mount_fuji:"🗻",volcano:"🌋",desert:"🏜",camping:"🏕",tent:"⛺️",railway_track:"🛤",motorway:"🛣",building_construction:"🏗",factory:"🏭",house:"🏠",house_with_garden:"🏡",houses:"🏘",derelict_house:"🏚",office:"🏢",department_store:"🏬",post_office:"🏣",european_post_office:"🏤",hospital:"🏥",bank:"🏦",hotel:"🏨",convenience_store:"🏪",school:"🏫",love_hotel:"🏩",wedding:"💒",classical_building:"🏛",church:"⛪️",mosque:"🕌",synagogue:"🕍",kaaba:"🕋",shinto_shrine:"⛩",japan:"🗾",rice_scene:"🎑",national_park:"🏞",sunrise:"🌅",sunrise_over_mountains:"🌄",stars:"🌠",sparkler:"🎇",fireworks:"🎆",city_sunrise:"🌇",city_sunset:"🌆",cityscape:"🏙",night_with_stars:"🌃",milky_way:"🌌",bridge_at_night:"🌉",foggy:"🌁",watch:"⌚️",iphone:"📱",calling:"📲",computer:"💻",keyboard:"⌨️",desktop_computer:"🖥",printer:"🖨",computer_mouse:"🖱",trackball:"🖲",joystick:"🕹",clamp:"🗜",minidisc:"💽",floppy_disk:"💾",cd:"💿",dvd:"📀",vhs:"📼",camera:"📷",camera_flash:"📸",video_camera:"📹",movie_camera:"🎥",film_projector:"📽",film_strip:"🎞",telephone_receiver:"📞",phone:"☎️",telephone:"☎️",pager:"📟",fax:"📠",tv:"📺",radio:"📻",studio_microphone:"🎙",level_slider:"🎚",control_knobs:"🎛",stopwatch:"⏱",timer_clock:"⏲",alarm_clock:"⏰",mantelpiece_clock:"🕰",hourglass:"⌛️",hourglass_flowing_sand:"⏳",satellite:"📡",battery:"🔋",electric_plug:"🔌",bulb:"💡",flashlight:"🔦",candle:"🕯",wastebasket:"🗑",oil_drum:"🛢",money_with_wings:"💸",dollar:"💵",yen:"💴",euro:"💶",pound:"💷",moneybag:"💰",credit_card:"💳",gem:"💎",balance_scale:"⚖️",wrench:"🔧",hammer:"🔨",hammer_and_pick:"⚒",hammer_and_wrench:"🛠",pick:"⛏",nut_and_bolt:"🔩",gear:"⚙️",chains:"⛓",gun:"🔫",bomb:"💣",hocho:"🔪",knife:"🔪",dagger:"🗡",crossed_swords:"⚔️",shield:"🛡",smoking:"🚬",coffin:"⚰️",funeral_urn:"⚱️",amphora:"🏺",crystal_ball:"🔮",prayer_beads:"📿",barber:"💈",alembic:"⚗️",telescope:"🔭",microscope:"🔬",hole:"🕳",pill:"💊",syringe:"💉",thermometer:"🌡",toilet:"🚽",potable_water:"🚰",shower:"🚿",bathtub:"🛁",bath:"🛀",bellhop_bell:"🛎",key:"🔑",old_key:"🗝",door:"🚪",couch_and_lamp:"🛋",bed:"🛏",sleeping_bed:"🛌",framed_picture:"🖼",shopping:"🛍",shopping_cart:"🛒",gift:"🎁",balloon:"🎈",flags:"🎏",ribbon:"🎀",confetti_ball:"🎊",tada:"🎉",dolls:"🎎",izakaya_lantern:"🏮",lantern:"🏮",wind_chime:"🎐",email:"✉️",envelope:"✉️",envelope_with_arrow:"📩",incoming_envelope:"📨","e-mail":"📧",love_letter:"💌",inbox_tray:"📥",outbox_tray:"📤",package:"📦",label:"🏷",mailbox_closed:"📪",mailbox:"📫",mailbox_with_mail:"📬",mailbox_with_no_mail:"📭",postbox:"📮",postal_horn:"📯",scroll:"📜",page_with_curl:"📃",page_facing_up:"📄",bookmark_tabs:"📑",bar_chart:"📊",chart_with_upwards_trend:"📈",chart_with_downwards_trend:"📉",spiral_notepad:"🗒",spiral_calendar:"🗓",calendar:"📆",date:"📅",card_index:"📇",card_file_box:"🗃",ballot_box:"🗳",file_cabinet:"🗄",clipboard:"📋",file_folder:"📁",open_file_folder:"📂",card_index_dividers:"🗂",newspaper_roll:"🗞",newspaper:"📰",notebook:"📓",notebook_with_decorative_cover:"📔",ledger:"📒",closed_book:"📕",green_book:"📗",blue_book:"📘",orange_book:"📙",books:"📚",book:"📖",open_book:"📖",bookmark:"🔖",link:"🔗",paperclip:"📎",paperclips:"🖇",triangular_ruler:"📐",straight_ruler:"📏",pushpin:"📌",round_pushpin:"📍",scissors:"✂️",pen:"🖊",fountain_pen:"🖋",black_nib:"✒️",paintbrush:"🖌",crayon:"🖍",memo:"📝",pencil:"📝",pencil2:"✏️",mag:"🔍",mag_right:"🔎",lock_with_ink_pen:"🔏",closed_lock_with_key:"🔐",lock:"🔒",unlock:"🔓",heart:"❤️",yellow_heart:"💛",green_heart:"💚",blue_heart:"💙",purple_heart:"💜",black_heart:"🖤",broken_heart:"💔",heavy_heart_exclamation:"❣️",two_hearts:"💕",revolving_hearts:"💞",heartbeat:"💓",heartpulse:"💗",sparkling_heart:"💖",cupid:"💘",gift_heart:"💝",heart_decoration:"💟",peace_symbol:"☮️",latin_cross:"✝️",star_and_crescent:"☪️",om:"🕉",wheel_of_dharma:"☸️",star_of_david:"✡️",six_pointed_star:"🔯",menorah:"🕎",yin_yang:"☯️",orthodox_cross:"☦️",place_of_worship:"🛐",ophiuchus:"⛎",aries:"♈️",taurus:"♉️",gemini:"♊️",cancer:"♋️",leo:"♌️",virgo:"♍️",libra:"♎️",scorpius:"♏️",sagittarius:"♐️",capricorn:"♑️",aquarius:"♒️",pisces:"♓️",id:"🆔",atom_symbol:"⚛️",accept:"🉑",radioactive:"☢️",biohazard:"☣️",mobile_phone_off:"📴",vibration_mode:"📳",eight_pointed_black_star:"✴️",vs:"🆚",white_flower:"💮",ideograph_advantage:"🉐",secret:"㊙️",congratulations:"㊗️",u6e80:"🈵",a:"🅰️",b:"🅱️",ab:"🆎",cl:"🆑",o2:"🅾️",sos:"🆘",x:"❌",o:"⭕️",stop_sign:"🛑",no_entry:"⛔️",name_badge:"📛",no_entry_sign:"🚫",anger:"💢",hotsprings:"♨️",no_pedestrians:"🚷",do_not_litter:"🚯",no_bicycles:"🚳","non-potable_water":"🚱",underage:"🔞",no_mobile_phones:"📵",no_smoking:"🚭",exclamation:"❗️",heavy_exclamation_mark:"❗️",grey_exclamation:"❕",question:"❓",grey_question:"❔",bangbang:"‼️",interrobang:"⁉️",low_brightness:"🔅",high_brightness:"🔆",part_alternation_mark:"〽️",warning:"⚠️",children_crossing:"🚸",trident:"🔱",fleur_de_lis:"⚜️",beginner:"🔰",recycle:"♻️",white_check_mark:"✅",chart:"💹",sparkle:"❇️",eight_spoked_asterisk:"✳️",negative_squared_cross_mark:"❎",globe_with_meridians:"🌐",diamond_shape_with_a_dot_inside:"💠",m:"Ⓜ️",cyclone:"🌀",zzz:"💤",atm:"🏧",wc:"🚾",wheelchair:"♿️",parking:"🅿️",sa:"🈂️",passport_control:"🛂",customs:"🛃",baggage_claim:"🛄",left_luggage:"🛅",mens:"🚹",womens:"🚺",baby_symbol:"🚼",restroom:"🚻",put_litter_in_its_place:"🚮",cinema:"🎦",signal_strength:"📶",koko:"🈁",symbols:"🔣",information_source:"ℹ️",abc:"🔤",abcd:"🔡",capital_abcd:"🔠",ng:"🆖",ok:"🆗",up:"🆙",cool:"🆒",new:"🆕",free:"🆓",zero:"0️⃣",one:"1️⃣",two:"2️⃣",three:"3️⃣",four:"4️⃣",five:"5️⃣",six:"6️⃣",seven:"7️⃣",eight:"8️⃣",nine:"9️⃣",keycap_ten:"🔟",hash:"#️⃣",asterisk:"*️⃣",arrow_forward:"▶️",pause_button:"⏸",play_or_pause_button:"⏯",stop_button:"⏹",record_button:"⏺",next_track_button:"⏭",previous_track_button:"⏮",fast_forward:"⏩",rewind:"⏪",arrow_double_up:"⏫",arrow_double_down:"⏬",arrow_backward:"◀️",arrow_up_small:"🔼",arrow_down_small:"🔽",arrow_right:"➡️",arrow_left:"⬅️",arrow_up:"⬆️",arrow_down:"⬇️",arrow_upper_right:"↗️",arrow_lower_right:"↘️",arrow_lower_left:"↙️",arrow_upper_left:"↖️",arrow_up_down:"↕️",left_right_arrow:"↔️",arrow_right_hook:"↪️",leftwards_arrow_with_hook:"↩️",arrow_heading_up:"⤴️",arrow_heading_down:"⤵️",twisted_rightwards_arrows:"🔀",repeat:"🔁",repeat_one:"🔂",arrows_counterclockwise:"🔄",arrows_clockwise:"🔃",musical_note:"🎵",notes:"🎶",heavy_plus_sign:"➕",heavy_minus_sign:"➖",heavy_division_sign:"➗",heavy_multiplication_x:"✖️",heavy_dollar_sign:"💲",currency_exchange:"💱",tm:"™️",copyright:"©️",registered:"®️",wavy_dash:"〰️",curly_loop:"➰",loop:"➿",end:"🔚",back:"🔙",on:"🔛",top:"🔝",soon:"🔜",heavy_check_mark:"✔️",ballot_box_with_check:"☑️",radio_button:"🔘",white_circle:"⚪️",black_circle:"⚫️",red_circle:"🔴",large_blue_circle:"🔵",small_red_triangle:"🔺",small_red_triangle_down:"🔻",small_orange_diamond:"🔸",small_blue_diamond:"🔹",large_orange_diamond:"🔶",large_blue_diamond:"🔷",white_square_button:"🔳",black_square_button:"🔲",black_small_square:"▪️",white_small_square:"▫️",black_medium_small_square:"◾️",white_medium_small_square:"◽️",black_medium_square:"◼️",white_medium_square:"◻️",black_large_square:"⬛️",white_large_square:"⬜️",speaker:"🔈",mute:"🔇",sound:"🔉",loud_sound:"🔊",bell:"🔔",no_bell:"🔕",mega:"📣",loudspeaker:"📢",eye_speech_bubble:"👁‍🗨",speech_balloon:"💬",thought_balloon:"💭",right_anger_bubble:"🗯",spades:"♠️",clubs:"♣️",hearts:"♥️",diamonds:"♦️",black_joker:"🃏",flower_playing_cards:"🎴",mahjong:"🀄️",clock1:"🕐",clock2:"🕑",clock3:"🕒",clock4:"🕓",clock5:"🕔",clock6:"🕕",clock7:"🕖",clock8:"🕗",clock9:"🕘",clock10:"🕙",clock11:"🕚",clock12:"🕛",clock130:"🕜",clock230:"🕝",clock330:"🕞",clock430:"🕟",clock530:"🕠",clock630:"🕡",clock730:"🕢",clock830:"🕣",clock930:"🕤",clock1030:"🕥",clock1130:"🕦",clock1230:"🕧",white_flag:"🏳️",black_flag:"🏴",checkered_flag:"🏁",triangular_flag_on_post:"🚩",rainbow_flag:"🏳️‍🌈",afghanistan:"🇦🇫",aland_islands:"🇦🇽",albania:"🇦🇱",algeria:"🇩🇿",american_samoa:"🇦🇸",andorra:"🇦🇩",angola:"🇦🇴",anguilla:"🇦🇮",antarctica:"🇦🇶",antigua_barbuda:"🇦🇬",argentina:"🇦🇷",armenia:"🇦🇲",aruba:"🇦🇼",australia:"🇦🇺",austria:"🇦🇹",azerbaijan:"🇦🇿",bahamas:"🇧🇸",bahrain:"🇧🇭",bangladesh:"🇧🇩",barbados:"🇧🇧",belarus:"🇧🇾",belgium:"🇧🇪",belize:"🇧🇿",benin:"🇧🇯",bermuda:"🇧🇲",bhutan:"🇧🇹",bolivia:"🇧🇴",caribbean_netherlands:"🇧🇶",bosnia_herzegovina:"🇧🇦",botswana:"🇧🇼",brazil:"🇧🇷",british_indian_ocean_territory:"🇮🇴",british_virgin_islands:"🇻🇬",brunei:"🇧🇳",bulgaria:"🇧🇬",burkina_faso:"🇧🇫",burundi:"🇧🇮",cape_verde:"🇨🇻",cambodia:"🇰🇭",cameroon:"🇨🇲",canada:"🇨🇦",canary_islands:"🇮🇨",cayman_islands:"🇰🇾",central_african_republic:"🇨🇫",chad:"🇹🇩",chile:"🇨🇱",cn:"🇨🇳",christmas_island:"🇨🇽",cocos_islands:"🇨🇨",colombia:"🇨🇴",comoros:"🇰🇲",congo_brazzaville:"🇨🇬",congo_kinshasa:"🇨🇩",cook_islands:"🇨🇰",costa_rica:"🇨🇷",cote_divoire:"🇨🇮",croatia:"🇭🇷",cuba:"🇨🇺",curacao:"🇨🇼",cyprus:"🇨🇾",czech_republic:"🇨🇿",denmark:"🇩🇰",djibouti:"🇩🇯",dominica:"🇩🇲",dominican_republic:"🇩🇴",ecuador:"🇪🇨",egypt:"🇪🇬",el_salvador:"🇸🇻",equatorial_guinea:"🇬🇶",eritrea:"🇪🇷",estonia:"🇪🇪",ethiopia:"🇪🇹",eu:"🇪🇺",european_union:"🇪🇺",falkland_islands:"🇫🇰",faroe_islands:"🇫🇴",fiji:"🇫🇯",finland:"🇫🇮",fr:"🇫🇷",french_guiana:"🇬🇫",french_polynesia:"🇵🇫",french_southern_territories:"🇹🇫",gabon:"🇬🇦",gambia:"🇬🇲",georgia:"🇬🇪",de:"🇩🇪",ghana:"🇬🇭",gibraltar:"🇬🇮",greece:"🇬🇷",greenland:"🇬🇱",grenada:"🇬🇩",guadeloupe:"🇬🇵",guam:"🇬🇺",guatemala:"🇬🇹",guernsey:"🇬🇬",guinea:"🇬🇳",guinea_bissau:"🇬🇼",guyana:"🇬🇾",haiti:"🇭🇹",honduras:"🇭🇳",hong_kong:"🇭🇰",hungary:"🇭🇺",iceland:"🇮🇸",india:"🇮🇳",indonesia:"🇮🇩",iran:"🇮🇷",iraq:"🇮🇶",ireland:"🇮🇪",isle_of_man:"🇮🇲",israel:"🇮🇱",it:"🇮🇹",jamaica:"🇯🇲",jp:"🇯🇵",crossed_flags:"🎌",jersey:"🇯🇪",jordan:"🇯🇴",kazakhstan:"🇰🇿",kenya:"🇰🇪",kiribati:"🇰🇮",kosovo:"🇽🇰",kuwait:"🇰🇼",kyrgyzstan:"🇰🇬",laos:"🇱🇦",latvia:"🇱🇻",lebanon:"🇱🇧",lesotho:"🇱🇸",liberia:"🇱🇷",libya:"🇱🇾",liechtenstein:"🇱🇮",lithuania:"🇱🇹",luxembourg:"🇱🇺",macau:"🇲🇴",macedonia:"🇲🇰",madagascar:"🇲🇬",malawi:"🇲🇼",malaysia:"🇲🇾",maldives:"🇲🇻",mali:"🇲🇱",malta:"🇲🇹",marshall_islands:"🇲🇭",martinique:"🇲🇶",mauritania:"🇲🇷",mauritius:"🇲🇺",mayotte:"🇾🇹",mexico:"🇲🇽",micronesia:"🇫🇲",moldova:"🇲🇩",monaco:"🇲🇨",mongolia:"🇲🇳",montenegro:"🇲🇪",montserrat:"🇲🇸",morocco:"🇲🇦",mozambique:"🇲🇿",myanmar:"🇲🇲",namibia:"🇳🇦",nauru:"🇳🇷",nepal:"🇳🇵",netherlands:"🇳🇱",new_caledonia:"🇳🇨",new_zealand:"🇳🇿",nicaragua:"🇳🇮",niger:"🇳🇪",nigeria:"🇳🇬",niue:"🇳🇺",norfolk_island:"🇳🇫",northern_mariana_islands:"🇲🇵",north_korea:"🇰🇵",norway:"🇳🇴",oman:"🇴🇲",pakistan:"🇵🇰",palau:"🇵🇼",palestinian_territories:"🇵🇸",panama:"🇵🇦",papua_new_guinea:"🇵🇬",paraguay:"🇵🇾",peru:"🇵🇪",philippines:"🇵🇭",pitcairn_islands:"🇵🇳",poland:"🇵🇱",portugal:"🇵🇹",puerto_rico:"🇵🇷",qatar:"🇶🇦",reunion:"🇷🇪",romania:"🇷🇴",ru:"🇷🇺",rwanda:"🇷🇼",st_barthelemy:"🇧🇱",st_helena:"🇸🇭",st_kitts_nevis:"🇰🇳",st_lucia:"🇱🇨",st_pierre_miquelon:"🇵🇲",st_vincent_grenadines:"🇻🇨",samoa:"🇼🇸",san_marino:"🇸🇲",sao_tome_principe:"🇸🇹",saudi_arabia:"🇸🇦",senegal:"🇸🇳",serbia:"🇷🇸",seychelles:"🇸🇨",sierra_leone:"🇸🇱",singapore:"🇸🇬",sint_maarten:"🇸🇽",slovakia:"🇸🇰",slovenia:"🇸🇮",solomon_islands:"🇸🇧",somalia:"🇸🇴",south_africa:"🇿🇦",south_georgia_south_sandwich_islands:"🇬🇸",kr:"🇰🇷",south_sudan:"🇸🇸",es:"🇪🇸",sri_lanka:"🇱🇰",sudan:"🇸🇩",suriname:"🇸🇷",swaziland:"🇸🇿",sweden:"🇸🇪",switzerland:"🇨🇭",syria:"🇸🇾",taiwan:"🇹🇼",tajikistan:"🇹🇯",tanzania:"🇹🇿",thailand:"🇹🇭",timor_leste:"🇹🇱",togo:"🇹🇬",tokelau:"🇹🇰",tonga:"🇹🇴",trinidad_tobago:"🇹🇹",tunisia:"🇹🇳",tr:"🇹🇷",turkmenistan:"🇹🇲",turks_caicos_islands:"🇹🇨",tuvalu:"🇹🇻",uganda:"🇺🇬",ukraine:"🇺🇦",united_arab_emirates:"🇦🇪",gb:"🇬🇧",uk:"🇬🇧",us:"🇺🇸",us_virgin_islands:"🇻🇮",uruguay:"🇺🇾",uzbekistan:"🇺🇿",vanuatu:"🇻🇺",vatican_city:"🇻🇦",venezuela:"🇻🇪",vietnam:"🇻🇳",wallis_futuna:"🇼🇫",western_sahara:"🇪🇭",yemen:"🇾🇪",zambia:"🇿🇲",zimbabwe:"🇿🇼"}},function(e,t,n){"use strict";e.exports={angry:[">:(",">:-("],blush:[':")',':-")'],broken_heart:["</3","<\\3"],confused:[":/",":-/"],cry:[":'(",":'-(",":,(",":,-("],frowning:[":(",":-("],heart:["<3"],imp:["]:(","]:-("],innocent:["o:)","O:)","o:-)","O:-)","0:)","0:-)"],joy:[":')",":'-)",":,)",":,-)",":'D",":'-D",":,D",":,-D"],kissing:[":*",":-*"],laughing:["x-)","X-)"],neutral_face:[":|",":-|"],open_mouth:[":o",":-o",":O",":-O"],rage:[":@",":-@"],smile:[":D",":-D"],smiley:[":)",":-)"],smiling_imp:["]:)","]:-)"],sob:[":,'(",":,'-(",";(",";-("],stuck_out_tongue:[":P",":-P"],sunglasses:["8-)","B-)"],sweat:[",:(",",:-("],sweat_smile:[",:)",",:-)"],unamused:[":s",":-S",":z",":-Z",":$",":-$"],wink:[";)",";-)"]}},function(e,t,n){"use strict";e.exports=function(e,t){return e[t].content}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,a){var i=e.utils.arrayReplaceAt,o=e.utils.lib.ucmicro,c=new RegExp([o.Z.source,o.P.source,o.Cc.source].join("|"));function l(e,r,i){var o,l=0,s=[];return e.replace(a,(function(r,a,u){var d;if(n.hasOwnProperty(r)){if(d=n[r],a>0&&!c.test(u[a-1]))return;if(a+r.length<u.length&&!c.test(u[a+r.length]))return}else d=r.slice(1,-1);a>l&&((o=new i("text","",0)).content=e.slice(l,a),s.push(o)),(o=new i("emoji","",0)).markup=d,o.content=t[d],s.push(o),l=a+r.length})),l<e.length&&((o=new i("text","",0)).content=e.slice(l),s.push(o)),s}return function(e){var t,n,a,o,c,s=e.tokens,u=0;for(n=0,a=s.length;n<a;n++)if("inline"===s[n].type)for(t=(o=s[n].children).length-1;t>=0;t--)"link_open"!==(c=o[t]).type&&"link_close"!==c.type||"auto"===c.info&&(u-=c.nesting),"text"===c.type&&0===u&&r.test(c.content)&&(s[n].children=o=i(o,t,l(c.content,c.level,e.Token)))}}},function(e,t,n){"use strict";e.exports=function(e){var t,n=e.defs;e.enabled.length&&(n=Object.keys(n).reduce((function(t,r){return e.enabled.indexOf(r)>=0&&(t[r]=n[r]),t}),{})),t=Object.keys(e.shortcuts).reduce((function(t,r){return n[r]?Array.isArray(e.shortcuts[r])?(e.shortcuts[r].forEach((function(e){t[e]=r})),t):(t[e.shortcuts[r]]=r,t):t}),{});var r=Object.keys(n).map((function(e){return":"+e+":"})).concat(Object.keys(t)).sort().reverse().map((function(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")})).join("|"),a=RegExp(r),i=RegExp(r,"g");return{defs:n,shortcuts:t,scanRE:a,replaceRE:i}}},,,,,function(e,t,n){"use strict";n(1843);var r=n(833);n(1009);t.a=r.a},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(2666))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},,,,,,function(e,t,n){"use strict";n(2021);var r=n(1856);n(1839);t.a=r.a},,function(e,t,n){"use strict";n(74);var r=n(40),a=(n(108),n(39)),i=(n(348),n(197)),o=(n(45),n(16)),c=(n(146),n(30)),l=n(0),s=n.n(l),u=n(2),d=n.n(u),f=n(890),p=n(309),h=n(891),m=(n(116),n(26)),g=(n(177),n(94)),v=(n(148),n(100)),y=(n(53),n(19)),b=n(7),k=n.n(b);n(1833);function w(e,t,n,r,a,i,o){try{var c=e[i](o),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function x(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){w(i,r,a,o,c,"next",e)}function c(e){w(i,r,a,o,c,"throw",e)}o(void 0)}))}}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e){Promise.all([n.e(1),n.e(269)]).then(n.bind(null,3563));var t=e.book,r=e.template,a=e.reloadTemplates,i=e.templateBiz,o=e.openTemplateEditPage,l=e.onUseTemplate,u=e.commandParams,d=e.openContributorPage,f=E.useViewModel({reloadTemplates:a,templateBiz:i,book:t,template:r,commandParams:u}),h=f.state,y=h.editMenuVisible,b=h.triggerVisible,w=h.showDeleteConfirmation,x=b?{display:"block"}:{display:"none"};return s.a.createElement(m.a,{flex:"column",key:r.id},s.a.createElement("div",{className:"template-card-wrap"},s.a.createElement("div",{className:k()("lark-template-card",{"lark-template-item":!b,"lark-template-item-active":b}),onMouseEnter:function(){f.setTriggerVisible(!0)},onMouseLeave:function(){f.setTriggerVisible(y||w||!1)},onClick:function(){l?l(r,!1):f.createDocByTemplate(t,r)},id:r.id},r.type!==p.TYPE.OFFICIAL&&s.a.createElement("div",{className:"lark-template-item-btn",onClick:function(e){return e.stopPropagation()}},s.a.createElement(v.a,{trigger:"hover",type:"menu",visible:y,align:{offset:[-13,-7]},onVisibleChange:function(e){return f.handleVisibleChange(e)},placement:"bottomLeft",content:s.a.createElement(c.a,null,s.a.createElement(c.a.Item,{key:"0"},s.a.createElement("a",{"data-testid":"template-card-edit",onClick:function(e){e.stopPropagation(),o("/r/templates/".concat(r.id,"/edit"))}},__("编辑"))),s.a.createElement(c.a.Item,{key:"1"},s.a.createElement("a",{"data-testid":"template-card-delete",onClick:function(e){return f.handleClickToShowDeleteConfimation(e)}},__("删除"))))},s.a.createElement("div",{style:x,"data-testid":"template-card-more-actions"},s.a.createElement("svg",{style:{width:16,height:16}},s.a.createElement("use",{xlinkHref:"#moreAction"}))))),s.a.createElement(g.a,{placement:"topRight",align:{offset:[12,0]},title:s.a.createElement("div",{"data-testid":"template-card-delete-confirmation"},s.a.createElement("h4",null,__("确定删除这个模板？")),s.a.createElement("p",null,__("删除后可在回收站中恢复"))),onConfirm:function(e){return f.handleClickToDeleteTemplate(e,r.id)},onCancel:f.handleClickToHideDeleteConfirmation,okText:__("删除"),cancelText:__("取消"),visible:w},s.a.createElement("p",{className:k()({"lark-template-item-title":!r.cover,"lark-template-item-title-float":r.cover&&!b,"lark-template-item-title-float-active":r.cover&&b})},r.name)),s.a.createElement("div",{"data-testid":"lark-template-card-image",className:k()({"lark-template-item-thumb":!r.cover,"lark-template-item-thumb-full":r.cover,"lark-template-item-thumb-official":!r.cover&&r.type===p.TYPE.OFFICIAL&&!b})},s.a.createElement("img",{className:"cover",src:i.getTemplateCover(r),alt:r.name})))),r.type===p.TYPE.OFFICIAL&&s.a.createElement("div",{className:"lark-template-card-contributor"},s.a.createElement("span",{className:"lark-template-card-contributor-from"},__("来自")),r.meta.contributorUrl?s.a.createElement("a",{onClick:function(){return d(r.meta.contributorUrl)}},r.meta.contributor):s.a.createElement("span",null,__("语雀"))))}E.useViewModel=function(e){var t=e.reloadTemplates,n=e.templateBiz,r=e.book,a=e.template,i=e.commandParams,o=void 0===i?{}:i,c=_(Object(l.useState)(!1),2),u=c[0],d=c[1],f=_(Object(l.useState)(!1),2),p=f[0],h=f[1],m=_(Object(l.useState)(!1),2),g=m[0],v=m[1];return{state:{editMenuVisible:u,triggerVisible:p,showDeleteConfirmation:g},handleVisibleChange:function(e){e?d(e):(d(!1),h(g||!1))},handleClickToShowDeleteConfimation:function(e){e.stopPropagation(),d(!1),v(!0),h(!0)},handleClickToHideDeleteConfirmation:function(e){e.stopPropagation(),v(!1),h(!1)},handleClickToRevertTemplate:function(e,r){return x(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n.revertDeletedTemplate(e,r).then(y.a.success(__("模板已恢复"),5));case 2:return a.next=4,t();case 4:case"end":return a.stop()}}),a)})))()},handleClickToDeleteTemplate:function(e,r){var a=this;return x(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:e.stopPropagation(),n.deleteTemplate(r).then(function(){var e=x(regeneratorRuntime.mark((function e(n){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.a.createElement("span",{"data-testid":"template-revert-message"},__("模板已删除 "),s.a.createElement("a",{"data-testid":"template-revert-button",onClick:function(){return a.handleClickToRevertTemplate(r,n.id)}},__("撤销"))),e.next=3,t();case 3:y.a.config({maxCount:1}),y.a.success(i,5);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return i.stop()}}),i)})))()},createDocByTemplate:function(){return x(regeneratorRuntime.mark((function e(){var t,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.createDocByTemplate(r,a.id);case 2:t=e.sent,i="/".concat(r.namespace,"/").concat(t.slug,"/edit"),c=new URL(i,window.location.origin),o&&"doc_toc"===o.create_from&&c.searchParams.set("toc_node_uuid",o.toc_node_uuid),window.location.href=c.href;case 7:case"end":return e.stop()}}),e)})))()},setEditMenuVisible:d,setTriggerVisible:h,setShowDeleteConfirmation:v}},E.propTypes={template:d.a.shape({name:d.a.string,cover:d.a.string,id:d.a.number,doclet_id:d.a.number,type:d.a.number,meta:d.a.shape({contributor:d.a.string,contributorUrl:d.a.string,order:d.a.number})}),book:d.a.object,reloadTemplates:d.a.func,templateBiz:d.a.object,openTemplateEditPage:d.a.func,onUseTemplate:d.a.func,commandParams:d.a.object,openContributorPage:d.a.func};var O=E,S=n(1838);function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function D(e,t,n,r,a,i,o){try{var c=e[i](o),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function A(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){D(i,r,a,o,c,"next",e)}function c(e){D(i,r,a,o,c,"throw",e)}o(void 0)}))}}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(e){var t=e.book,n=e.templateProxy,l=e.docProxy,u=e.content,d=e.defaultType,f=e.onUseTemplate,h=e.commandParams,m=e.openTemplateEditPage,g=e.isDesktop,v=e.group,y=e.organization,b=e.currentUser,k=e.openContributorPage,w=j.useViewModel({book:t,templateProxy:n,docProxy:l,content:u,defaultType:d,openTemplateEditPage:m,currentUser:b}),x=w.state,_=x.selectedFormat,C=x.singleFormatTemplates,E=x.templatesByCategory,D="all"===_?E:C,A=s.a.createElement(c.a,null,s.a.createElement(c.a.Item,{key:"docTypeSelector-doc"},s.a.createElement("a",{"data-testid":"new-lake-template",onClick:function(){return w.setNewDocletType("Doc")}},__("文档"))),s.a.createElement(c.a.Item,{key:"docTypeSelector-sheet"},s.a.createElement("a",{onClick:function(){return w.setNewDocletType("Sheet")}},__("表格")))),T=s.a.createElement(s.a.Fragment,null,s.a.createElement(o.a,{onClick:function(){return w.setNewDocletType(null)}},__("取消")),s.a.createElement(o.a,{type:"primary",onClick:function(){return w.createTemplate()}},__("确定"))),P=w.state,M=P.newTemplateName,N=P.newDocletType,L=P.templateBiz,I=null!==N;return s.a.createElement(r.a,{className:"modal-without-padding",visible:e.visible,bodyStyle:I?{"min-height":198}:{height:"75vh","max-height":650},style:{top:48},onCancel:e.onCancel,width:I?"368px":"960px",footer:I?T:null,title:I?__("新建模板"):__("选择模板"),maskClosable:!I},!I&&s.a.createElement(s.a.Fragment,null,s.a.createElement(c.a,{defaultValue:"all",className:"template-selector-radio-menu",mode:"horizontal",defaultSelectedKeys:[d],onClick:function(e){return w.switchFormat(e.key)}},s.a.createElement(c.a.Item,{key:"all",className:"template-selector-radio-item"},s.a.createElement("a",null,__("全部"))),s.a.createElement(c.a.Item,{key:p.FORMAT.LAKE,className:"template-selector-radio-item"},s.a.createElement("a",{"data-testid":"lake-template-button"},__("文档"))),s.a.createElement(c.a.Item,{key:p.FORMAT.LAKESHEET,className:"template-selector-radio-item"},s.a.createElement("a",{"data-testid":"lakesheet-template-button"},__("表格"))),s.a.createElement(c.a.Item,{key:p.FORMAT.LAKESHOW,className:"template-selector-radio-item"},s.a.createElement("a",{"data-testid":"lakesheet-template-button"},__("演示文稿"))),s.a.createElement(c.a.Item,{key:p.FORMAT.LAKEMIND,className:"template-selector-radio-item"},s.a.createElement("a",{"data-testid":"lakesheet-template-button"},__("思维图")))),s.a.createElement(i.a,{overlay:A,trigger:["hover"]},s.a.createElement(o.a,{"data-testid":"new-template",className:"template-selector-new-button"},__("新建模板"))),s.a.createElement("div",{className:"sections"},D&&D.length>0&&D.map((function(e){return e.templates.length>0&&s.a.createElement("div",{className:"templates-section",key:e.name},s.a.createElement("h4",{className:"templates-section-title"},e.name),s.a.createElement(a.a,{type:"flex",gutter:16,align:"top",className:"lark-template"},e.templates.map((function(e){var n={};return f&&(n.onUseTemplate=f),s.a.createElement(O,R({book:t,template:e,key:e.id,reloadTemplates:w.reloadTemplatesByBook,templateBiz:L,commandParams:h,openTemplateEditPage:m,openContributorPage:k},n))}))))})))),I&&s.a.createElement(S.a,{newTemplateName:M,onSetNewTemplateName:w.setNewTemplateName,onSetSelectedScope:w.setSelectedScope,templateBiz:L,isDesktop:g,group:v,organization:y}))}j.useViewModel=function(e){var t=e.book,n=e.templateProxy,r=e.docProxy,a=e.content,i=void 0===a?[]:a,o=e.defaultType,c=e.openTemplateEditPage,s=e.currentUser,u=new h.a(n,r),d=T(Object(l.useState)(i),2),f=d[0],m=d[1],g=T(Object(l.useState)(o),2),v=g[0],y=g[1],b=T(Object(l.useState)([]),2),k=b[0],w=b[1],x=T(Object(l.useState)(-1),2),_=x[0],C=x[1],E=T(Object(l.useState)(__("未命名模板")),2),O=E[0],S=E[1],R=T(Object(l.useState)(null),2),D=R[0],P=R[1];return Object(l.useEffect)((function(){(function(){var e=A(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==i.length){e.next=5;break}return e.next=3,u.getAllTemplatesByBook(t.id);case 3:n=e.sent,m(n);case 5:"all"!==o&&(r=u.filterTemplatesByFormat(f,o),w(r));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),{state:{newTemplateName:O,newDocletType:D,selectedFormat:v,singleFormatTemplates:k,templatesByCategory:f,templateBiz:u},switchFormat:function(e){var t=u.filterTemplatesByFormat(f,e);y(e),w(t)},reloadTemplatesByBook:function(){return A(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.getAllTemplatesByBook(t.id);case 2:n=e.sent,m(n);case 4:case"end":return e.stop()}}),e)})))()},createTemplate:function(){var e=this;return A(regeneratorRuntime.mark((function n(){var r,a,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return _===p.TYPE.BOOK?(r=t.id,a=p.TARGET_TYPE.BOOK):(r=s.id,a=p.TARGET_TYPE.USER),n.next=3,u.createTemplate(r,a,_,D,O);case 3:return i=n.sent,P(null),n.next=7,e.reloadTemplatesByBook();case 7:c("/r/templates/".concat(i.id,"/edit"));case 8:case"end":return n.stop()}}),n)})))()},setNewTemplateName:S,setNewDocletType:P,setSelectedScope:C}},j.defaultProps={defaultType:"all"},j.propTypes={book:d.a.object,visible:d.a.bool,onCancel:d.a.func.isRequired,templateProxy:d.a.object,docProxy:d.a.object,content:d.a.array,defaultType:d.a.string,onUseTemplate:d.a.func,commandParams:d.a.object,openTemplateEditPage:d.a.func,openContributorPage:d.a.func,isDesktop:d.a.bool,group:d.a.object,organization:d.a.object,currentUser:d.a.object};t.a=Object(f.b)(j,!0)},,function(e,t,n){"use strict";var r=n(135),a=n.n(r),i=(n(1839),n(1736)),o=n(0),c=n.n(o),l=n(81),s=n.n(l),u=n(7),d=n.n(u),f=n(2),p=n.n(f),h=n(140),m=n.n(h),g=n(217),v=n(216),y={scrolled:"index-module_scrolled_31JTu",topScrolled:"index-module_topScrolled_1x9xa",bottomScrolled:"index-module_bottomScrolled_20v3r",normalWrapper:"index-module_normalWrapper_2x7Nl",loading:"index-module_loading_2TsMM",disabled:"index-module_disabled_2sohK",dragMask:"index-module_dragMask_g2-E6",dragMaskFirst:"index-module_dragMaskFirst_3psjw",dragMaskTop:"index-module_dragMaskTop_F8D9j",dragMaskTopLine:"index-module_dragMaskTopLine_2cga0",dragMaskBottom:"index-module_dragMaskBottom_2tVp4",dragMaskBottomLine:"index-module_dragMaskBottomLine_3HU-C",dragMaskMiniBottom:"index-module_dragMaskMiniBottom_3JzyL",dragMaskMiniBottomLine:"index-module_dragMaskMiniBottomLine_16WZS",dragBar:"index-module_dragBar_4S4Qb",largeWrapper:"index-module_largeWrapper_1f11Z",editableWrapper:"index-module_editableWrapper_3cyZL",titleWrapper:"index-module_titleWrapper_13KrJ",titleDisabled:"index-module_titleDisabled_HhdFy","dragging-node":"index-module_dragging-node_3f6j0",dragging:"index-module_dragging_3fipF"};function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function w(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||C(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t){if(e){if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t,n,r,a,i,o){try{var c=e[i](o),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var a=P(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return A(this,n)}}function A(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M="catalog-tree",N="ant-tree-drag-mask-line",L="ant-tree-drag-mask-bottom",I="ant-tree-drag-mask-top",z="ant-tree-drag-mask",B="ant-tree-drag-mini-mask",F="ant-tree-drag-force-mask",V="dragging",U="".concat(M,"-drag-container"),q=s()(M),H=i.a.DirectoryTree,W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(o,e);var t,n,r,i=D(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),j(T(t=i.call(this,e)),"initScrollMask",(function(){if(t.props.showScrollMask){var e=t.getCurrentScrollElement();if(e){var n=t.containerElem.getBoundingClientRect().height;t.virtualListEnabled()&&(n=t.props.height);var r=e.childNodes[0].offsetHeight,a=!1,i=!1;r>n&&(a=!0,i=!0,0===e.scrollTop?a=!1:e.scrollTop>=r-n&&(i=!1));var o={};a!==t.state.showTopScrollMask&&(o.showTopScrollMask=a),i!==t.state.showBottomScrollMask&&(o.showBottomScrollMask=i),t.setState(o)}}})),j(T(t),"onExpand",(function(e,n){var r=n.expanded,a=n.node;t.locked||(t.selectedKeysCache=[],t.setState({expandedKeys:e,currentNodeExpanded:r,autoExpandParent:!1},(function(){t.props.onExpand&&t.props.onExpand(e,{expanded:r,node:a}),t.timer&&clearTimeout(t.timer),t.timer=setTimeout(t.initScrollMask,200)})))})),j(T(t),"onSelect",(function(e,n){var r=e[0],a=n.node.props,i=a.type,o=t.props.titleToggle;if(i===g.TYPES.title&&o){var c=t.state.expandedKeys.slice(),l=c.findIndex((function(e){return e===r}));l>=0?c.splice(l,1):c.push(r),t.setState({expandedKeys:c})}else t.selectedKeysCache.push(r);var s=t.props.onSelect;s&&([g.TYPES.doc,g.TYPES.link,g.TYPES.uncreated_doc,g.TYPES.title].includes(i)&&s(a,n.nativeEvent))})),j(T(t),"removeCatalogTreeDragContainer",(function(){var e=document.getElementById(U);e&&document.body.removeChild(e)})),j(T(t),"removeRemainTreeNode",(function(){var e=t.containerElem.querySelector(".".concat(I,".").concat(V));e&&e.classList.remove(V);var n=t.containerElem.querySelector(".".concat(L,".").concat(V));n&&n.classList.remove(V)})),j(T(t),"onDragStart",(function(e){var n=e.event,r=e.node;if(n.dataTransfer){t.removeCatalogTreeDragContainer();var a=document.createElement("div");a.style.position="fixed";var i=t.props.offscreenRendering;a.style.top=i?"-100px":"0px",a.style.left="0px",a.style.cursor="grabbing",a.id=U,a.innerHTML=n.target.innerText,document.body.appendChild(a),n.dataTransfer.setDragImage(a,16,10),n.dataTransfer.dropEffect="none"}t.removeRemainTreeNode();var o=n.currentTarget,c=o.getBoundingClientRect().width;t.cachedDragStartOffsetWidth=c,t.setState({draggingNode:r,disabledDropNodeUIds:t._getChildNodeUIds(r),dragging:!0,isMiniMove:!0}),setTimeout((function(){var e=o.parentNode&&o.parentNode.parentNode&&o.parentNode.parentNode.parentNode;if(e){var n=e.querySelectorAll('[role="treeitem"]'),a=n.length?n[n.length-1]:e;if(a){var i=e.getBoundingClientRect().y,c=a.getBoundingClientRect(),l=c.y,s=c.height,u=t.containerElem.querySelector('[data-tree-index="'.concat(r.index-1,'"]'));if(u){var d=u.querySelector(".".concat(z));d.classList.add(F),d.style.height="".concat(l-i+1.5*s,"px")}}}}),10),t.props.onDragStart&&t.props.onDragStart(r)})),j(T(t),"_getChildNodeUIds",(function(e){return e&&e.child_uuid?Object(v.findAllChildrenByParentNode)(t.props.listData,e,!0).map((function(e){return e.uuid})):[]})),j(T(t),"_getMaxLevelParentNode",(function(e,n){var r=t.props.listData;if(e&&e.parent_uuid){var a=r.find((function(t){return t.uuid===e.parent_uuid}));return a&&a.sibling_uuid&&a.level!==n.level?a:t._getMaxLevelParentNode(a,n)}})),j(T(t),"_getActionParams",(function(e,n){var r,a=t.props.listData,i=t.state.draggingNode,o=n.uuid,c=n.level,l=i.uuid;if(e>c){if(l===o)return;r=g.ACTIONS.prependChild}else if(e===c){if(n.child_uuid&&n.child_uuid!==i.uuid)if(t.containerElem.querySelector('[data-tree-index="'.concat(n.index,'"]')).classList.contains("ant-tree-treenode-switcher-open"))return void q("拖中间，目标节点不能有子节点");if(n.child_uuid&&i.sibling_uuid)if(t.containerElem.querySelector('[data-tree-index="'.concat(n.index,'"]')).classList.contains("ant-tree-treenode-switcher-open"))return void q("拖中间，子节点不是最后一个节点");r=g.ACTIONS.moveAfter}else{if(l===o)return;var s=t._getMaxLevelParentNode(n,i);if(s&&e<s.level&&s.sibling_uuid!==i.uuid)return void q("拖左边，父节点最大临级",s);if(n.child_uuid&&n.child_uuid!==i.uuid)if(n.child_uuid||n.sibling_uuid)if(t.containerElem.querySelector('[data-tree-index="'.concat(n.index,'"]')).classList.contains("ant-tree-treenode-switcher-open"))return void q("拖左边，不能有子节点",n);var u=a.findIndex((function(e){return e.uuid===i.uuid}));if(u>0&&n.uuid===a[u-1].uuid&&i.sibling_uuid&&i.level>e)return void q("拖左边，在父节点区域内有临级",n);if(n.uuid===i.prev_uuid){if(i.sibling_uuid)return void q("拖左边，在父节点区域内有临级",n);if(n.level===i.level&&i.sibling_uuid)return void q("拖左边，前序节点与当前节点层级相等",n)}if(n.sibling_uuid&&n.sibling_uuid!==i.uuid)return void q("拖左边，不能有临级节点",n);var d=a.findIndex((function(e){return e.uuid===n.uuid})),f=a.slice(0,d).reverse().find((function(t){return t.level===e}));o=f?f.uuid:null,r=g.ACTIONS.moveAfter}if(t.state.disabledDropNodeUIds.find((function(e){return e===n.uuid})))q("不能拖到被禁止拖放的节点上",n,i);else if(r)return{action:r,target_uuid:o}})),j(T(t),"_onDragOverMiniArea",(function(e){if(e.preventDefault(),t.containerElem){var n=e.currentTarget,r=e.pageX,a=n.getBoundingClientRect(),i=a.x,o=a.width;n.style.width="".concat(Math.min(o,r-i+3*t.paddingWidth),"px");var c=n.parentNode.querySelector(".".concat(L));if(c)c.querySelector(".".concat(N))&&(c.classList.add(V),t.currentActionParams=null)}})),j(T(t),"_onDragOver",(function(e,n,r){if(e.preventDefault(),t.containerElem){setTimeout((function(){var e=t.containerElem.querySelector(".".concat(B));e&&(e.style.display="none")}),10);var a=n.level,i=e.currentTarget,o=e.pageX,c=i.querySelector(".".concat(N));if(c){var l=t.containerElem.getBoundingClientRect(),s=l.x,u=l.width,d=T(t).paddingWidth,f=parseInt((o-s-d/2)/d,10),p=t._getActionParams(f,n);if(p){var h=u-(Math.min(f,a+1)+1)*d-3;t.props.dragLineGap&&(h-=t.props.dragLineGap),c.style.width=r?"100%":"".concat(h,"px"),i.classList.add(V),r&&(p.action=g.ACTIONS.moveBefore),t.currentActionParams=p,q("缓存 Action",p)}}}})),j(T(t),"_onDragLeave",(function(e){e.currentTarget.classList.remove(V),t.currentActionParams=null})),j(T(t),"_onDragLeaveMiniArea",(function(){t.currentActionParams=null,t.setState({isMiniMove:!1})})),j(T(t),"onDragEnd",(function(){t.currentActionParams||t._clearAllDragStatus()})),j(T(t),"onDrop",function(){var e,n=(e=regeneratorRuntime.mark((function e(n){var r,a,i,o,c,l,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.event,n.node,r=n.dragNode,n.dragNodesKeys,(a=t.containerElem.querySelector(".".concat(F)))&&(a.classList.remove(F),a.removeAttribute("style")),t.currentActionParams){e.next=6;break}return t._clearAllDragStatus(),e.abrupt("return");case 6:return t._showLoading(),i=t.currentActionParams,o=i.action,c=i.target_uuid,l={action:o,target_uuid:c,node_uuid:r.uuid},q("发出 Action",l),e.next=12,t.props.onAction(l);case 12:[g.ACTIONS.prependChild].includes(o)&&(s=t.state.expandedKeys,(u=s.slice()).includes(c)||(u.push(c),t.setState({expandedKeys:u}))),t.props.onDragEnd&&t.props.onDragEnd(r),t._clearAllDragStatus();case 15:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){O(i,r,a,o,c,"next",e)}function c(e){O(i,r,a,o,c,"throw",e)}o(void 0)}))});return function(e){return n.apply(this,arguments)}}()),j(T(t),"_showLoading",(function(){if(t.loadingElem){var e=t.containerElem.getBoundingClientRect(),n=e.x,r=e.width;t.loadingElem.style.left="".concat(n,"px"),t.loadingElem.style.width="".concat(r,"px"),t.loadingElem.style.display="block"}})),j(T(t),"_hideLoading",(function(){t.loadingElem&&(t.loadingElem.style.display="none")})),j(T(t),"_clearAllDragStatus",(function(){t.currentActionParams=void 0,t.cachedDragStartOffsetWidth=void 0,t.setState({draggingNode:null,disabledDropNodeUIds:[],dragging:!1,isMiniMove:!1}),t._hideLoading()})),j(T(t),"_renderTitle",(function(e,n){var r=t.state,a=r.isMiniMove,i=r.draggingNode,o=r.disabledDropNodeUIds,l=t.props.renderTitle,s=0===n,u=o.includes(e.uuid);return c.a.createElement("div",{className:d()(y.titleWrapper,j({},y.titleDisabled,u))},l(e,n),c.a.createElement("div",{className:d()(y.dragBar,"ant-tree-drag-bar")}),c.a.createElement("div",{className:d()(y.dragMask,z)},c.a.createElement("div",{onDragOver:function(n){return t._onDragOver(n,e)},onDragLeave:t._onDragLeave,className:d()(y.dragMaskBottom,L)},c.a.createElement("div",{className:d()(y.dragMaskBottomLine,N)}))),a&&i&&e.uuid===i.uuid&&c.a.createElement("div",{className:d()(y.dragMaskMini,B)},c.a.createElement("div",{onDragOver:function(n){return t._onDragOverMiniArea(n,e)},onDragLeave:t._onDragLeaveMiniArea,className:d()(y.dragMaskMiniBottom,"ant-tree-drag-mini-mask-bottom"),style:{width:parseInt(t.cachedDragStartOffsetWidth,10)+t.paddingWidth}},c.a.createElement("div",{className:y.dragMaskMiniBottomLine}))),s&&c.a.createElement("div",{className:d()(y.dragMaskFirst,"ant-tree-drag-mask-first")},c.a.createElement("div",{onDragOver:function(n){return t._onDragOver(n,e,!0)},onDragLeave:t._onDragLeave,className:d()(y.dragMaskTop,I,"dragging")},c.a.createElement("div",{className:d()(y.dragMaskTopLine,N)}))))})),j(T(t),"scrollTo",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.virtualListEnabled()){if(!t.treeRef)return;t.treeRef.scrollTo(e)}else{var n=t.containerElem.querySelector('[data-uuid="catalog-'.concat(e.key,'"]'));if(!n)return;var r=n.closest(".ant-tree-treenode");t.containerElem.scrollTop=r.offsetTop-e.offset}})),t.selectedKeysCache=[],t.paddingWidth=20,t.maxNodeLengthForLoading=200,t.state={expandedKeys:e.expandedKeys||t.getExpandKeysByLevel(),currentNodeExpanded:!0,autoExpandParent:!0,dragging:!1,draggingNode:null,disabledDropNodeUIds:[],isMiniMove:!1,showTopScrollMask:!1,showBottomScrollMask:!1},t}return t=o,(n=[{key:"componentDidMount",value:function(){if(this.props.showScrollMask){this.initScrollMask();var e=this.getCurrentScrollElement();e&&e.addEventListener("scroll",this.initScrollMask,!1)}}},{key:"componentWillUnmount",value:function(){var e=this.getCurrentScrollElement();e&&e.removeEventListener("scroll",this.initScrollMask,!1)}},{key:"getCurrentScrollElement",value:function(){var e=this.containerElem;return this.virtualListEnabled()&&(e=document.querySelector(".ant-tree-list-holder")),e}},{key:"virtualListEnabled",value:function(){var e=this.props,t=e.listData,n=void 0===t?[]:t,r=e.height;return n.length>this.maxNodeLengthForLoading&&r}},{key:"setLock",value:function(){var e=this;this.locked=!0,setTimeout((function(){e.locked=!1}),100)}},{key:"getExpandKeysByLevel",value:function(e){var t=e||this.props,n=t.catalogLevel;return t.listData.filter((function(e){return e.level<n-1})).map((function(e){return e.uuid}))}},{key:"getRequireKeys",value:function(){var e=[],t=this.state,n=t.expandedKeys,r=t.currentNodeExpanded,a=n.slice(),i=this.props.currentSelectedKey;return i&&(e.push(i),r&&a.push(i)),{expandedKeys:a,selectedKeys:e}}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.catalogLevel,r=t.expandedKeys,a=e.catalogLevel,i=e.expandedKeys;if(!m()(i,r))return this.selectedKeysCache=[],void this.setState({expandedKeys:i});if(a!==n)if(a===1/0){this.selectedKeysCache=[];var o=this.getExpandKeysByLevel(e);this.setState({expandedKeys:o})}else{this.selectedKeysCache=[];var c=this.getExpandKeysByLevel(e),l=this.props.currentSelectedKey;l&&this.state.currentNodeExpanded&&c.push(l),this.setState({expandedKeys:c})}}},{key:"shouldComponentUpdate",value:function(e,t){return!this.props.editable||e.catalogLevel!==this.props.catalogLevel||e.tailType!==this.props.tailType||e.editingUId!==this.props.editingUId||e.selectedUId!==this.props.selectedUId||e.highlightUId!==this.props.highlightUId||e.height!==this.props.height||!m()(e.listData,this.props.listData)||!m()(t,this.state)}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.data,i=n.listData,o=n.disableListData,l=n.editable,s=void 0!==l&&l,u=n.onRightClick,f=n.wrapperClassName,p=void 0===f?"":f,h=n.size,m=n.visibleFilter,g=n.height,v=n.motion,b=this.state,x=b.dragging,E=b.draggingNode,O=b.autoExpandParent,S=b.showTopScrollMask,R=b.showBottomScrollMask,D=this.getRequireKeys(),A=D.selectedKeys,T=D.expandedKeys,P=o.map((function(e){return e.uuid})),N=0,L=function e(n){var r,a=[],i=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=C(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}(n=n.filter(m));try{for(i.s();!(r=i.n()).done;){var o,c=r.value,l=E&&E.uuid===c.uuid,s=P.includes(c.uuid);c.index=N,N++;var u=_(_({},c),{},{"data-tree-index":c.index,title:t._renderTitle(c,c.index),key:c.uuid,className:d()((o={},j(o,y["dragging-node"],l),j(o,y.disabled,s),o))});c.children&&c.children.length&&(u.children=e(c.children)),a.push(u)}}catch(e){i.e(e)}finally{i.f()}return a}(r),I={},z={};return this.virtualListEnabled()?I.height=g-20:(I.virtual=!1,g&&(z.height=g,z.overflow="hidden auto")),u&&(I.onRightClick=function(e){return u(e.node.props)}),void 0!==v&&(I.motion=v),c.a.createElement("div",{"data-testid":M,className:d()(p,y.wrapper,(e={},j(e,y.largeWrapper,"large"===h),j(e,y.normalWrapper,"normal"===h),j(e,y.editableWrapper,s),j(e,y.dragging,x),j(e,y.scrolled,S||R),j(e,y.topScrolled,S),j(e,y.bottomScrolled,R),e))},c.a.createElement("div",{style:z,ref:function(e){t.containerElem=e}},c.a.createElement(H,k({switcherIcon:null,showIcon:!1,showLine:!1,draggable:s,expandedKeys:[].concat(w(new Set(T)),w(new Set(this.selectedKeysCache))),selectedKeys:w(new Set(A)),blockNode:!0,autoExpandParent:O,onExpand:this.onExpand,onSelect:this.onSelect,expandAction:"click",onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onDrop:this.onDrop},I,{treeData:L,ref:function(e){t.treeRef=e}})),i.length>this.maxNodeLengthForLoading&&c.a.createElement("div",{className:y.loading,ref:function(e){t.loadingElem=e}},c.a.createElement(a.a,null))))}}])&&S(t.prototype,n),r&&S(t,r),o}(o.Component);W.defaultProps={listData:[],disableListData:[],size:"normal",titleToggle:!1,visibleFilter:function(){return!0}},W.propTypes={size:p.a.oneOf(["normal","large"]),titleToggle:p.a.bool,data:p.a.array.isRequired,listData:p.a.array,editable:p.a.bool.isRequired,offscreenRendering:p.a.bool,onRightClick:p.a.func,onAction:p.a.func,renderTitle:p.a.func.isRequired,currentSelectedKey:p.a.string,catalogLevel:p.a.number,wrapperClassName:p.a.string,onSelect:p.a.func,onDragStart:p.a.func,onDragEnd:p.a.func,visibleFilter:p.a.func,editingUId:p.a.string,selectedUId:p.a.string,highlightUId:p.a.string,tailType:p.a.string,expandedKeys:p.a.array,onExpand:p.a.func,disableListData:p.a.array,height:p.a.number,dragLineGap:p.a.number,motion:p.a.bool,showScrollMask:p.a.bool};t.a=W},,,,,,function(e,t,n){"use strict";n(53);var r=n(19),a=n(0),i=n.n(a),o=n(2),c=n.n(o),l=n(2665);function s(e,t,n,r,a,i,o){try{var c=e[i](o),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e){var t=e.doc,n=e.docDomain,o=e.type,c=u(Object(a.useState)(null),2),d=c[0],f=c[1],p=u(Object(a.useState)(!1),2),h=p[0],m=p[1],g=function(){var a,i=(a=regeneratorRuntime.mark((function a(){var i,c;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.docVersionProxy.find({doc_id:t.id,doc_type:n,draft:"published"===o?0:1,limit:1});case 2:1===(i=a.sent).length?f(i[0]):(c="published"===o?__("文档尚未发布"):__("暂无历史记录，请先保存文档"),r.a.warning(c)),m(!1);case 5:case"end":return a.stop()}}),a)})),function(){var e=this,t=arguments;return new Promise((function(n,r){var i=a.apply(e,t);function o(e){s(i,n,r,o,c,"next",e)}function c(e){s(i,n,r,o,c,"throw",e)}o(void 0)}))});return function(){return i.apply(this,arguments)}}();return Object(a.useEffect)((function(){g()}),[]),h||!d?null:i.a.createElement(l.b,{version:d,docVersionProxy:e.docVersionProxy,onCancel:e.onCancel,onCreated:e.onCreated||function(e){r.a.success(__("保存版本成功，点击查看 {link}",{link:i.a.createElement("a",{href:"/r/doc_versions/".concat(e.id),target:"_blank","data-testid":"version-link"},e.name)}))}})}f.propTypes={doc:c.a.object.isRequired,docDomain:c.a.string.isRequired,type:c.a.oneOf(["draft","published"]),onCancel:c.a.func.isRequired,onCreated:c.a.func,docVersionProxy:c.a.object.isRequired},t.a=f},,,,,,,,,,function(e,t,n){"use strict";var r=n(2774),a=n(2775),i=n(2736);e.exports={formats:i,parse:a,stringify:r}},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}));var r=n(312),a=function(e){var t=e.id,n=e.type,r=e.slug,a=e.book,i=e.share,o="";return o="ArtboardGroup"===n?"/artboards/".concat(t):"/".concat("Resource"===n?t:r),i?"Doc"===i.target_type?o="/docs/share/".concat(i.token):"Book"===i.target_type&&(o="/books/share/".concat(i.token,"/").concat(r)):(a&&(o="/".concat(a.slug).concat(o)),a&&a.user&&(o="/".concat(a.user.login).concat(o))),o},i=function(e){var t=e.type;if(!t&&(e.target||e.subject_type||e.target_type)&&(t=e.target.type||e.subject_type||e.target_type),"ArtboardGroup"!==t&&"Design"!==t||(t="Artboard"),"Group"!==t&&"User"!==t||(t="Book"),"Resource"===t){var n={name:e.target&&e.target.ext?"*.".concat(e.target.ext):e.title};t=Object(r.d)({ext:Object(r.c)(n)})}return"Doc"===t&&"mark"===e.action_type?e.target.type:t}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},,,,,function(e,t,n){"use strict";n(348);var r=n(197),a=n(131),i=n.n(a),o=(n(67),n(24)),c=(n(146),n(30)),l=n(183),s=n.n(l),u=n(0),d=n.n(u),f=n(2),p=n.n(f);n(1833);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e){Promise.all([n.e(1),n.e(268)]).then(n.bind(null,2376)),Promise.all([n.e(1),n.e(270)]).then(n.bind(null,2377)),Promise.all([n.e(1),n.e(271)]).then(n.bind(null,2378));var t,a=e.isOfficial,l=e.isDesktop,f=e.newTemplateName,p=e.onSetNewTemplateName,m=e.onSetSelectedScope,g=e.group,v=e.organization,y=l?g&&"Group"===g.type:g&&"Group"===g.type&&g.abilities.read_private,b=!!v,k=h(Object(u.useState)(y||b||a?0:1),2),w=k[0],x=k[1];t=b?[{header:__("本知识库可用"),icon:d.a.createElement("svg",{style:{width:20,height:20}},d.a.createElement("use",{xlinkHref:"#home"})),desc:__("仅在本知识库中可以使用"),type:0},{header:__("本团队可用"),icon:d.a.createElement("span",{className:"larkicon larkicon-team"}),desc:__("成员在团队中新建文档时均可使用"),type:2}]:y?[{header:__("本知识库可用"),icon:d.a.createElement("svg",{style:{width:20,height:20}},d.a.createElement("use",{xlinkHref:"#home"})),desc:__("仅在本知识库中可以使用"),type:0},{header:__("本团队可用"),icon:d.a.createElement("svg",{style:{width:20,height:20}},d.a.createElement("use",{xlinkHref:"#team"})),desc:__("成员在团队中新建文档时均可使用"),type:2},{header:__("仅自己可用"),icon:d.a.createElement("svg",{style:{width:20,height:20}},d.a.createElement("use",{xlinkHref:"#user"})),desc:__("可以在你参与的所有知识库中使用"),type:3}]:[{header:__("本知识库可用"),icon:d.a.createElement("svg",{style:{width:20,height:20}},d.a.createElement("use",{xlinkHref:"#home"})),desc:__("仅在本知识库中可以使用"),type:0},{header:__("仅自己可用"),icon:d.a.createElement("svg",{style:{width:20,height:20}},d.a.createElement("use",{xlinkHref:"#user"})),desc:__("可以在你参与的所有知识库中使用"),type:3}];var _=[{header:__("官方模板"),icon:d.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*KnODQ5KXlh4AAAAAAAAAAABjAQAAAQ/original",alt:"语雀logo",height:20}),desc:__("所有知识库中都可以使用"),type:1}];a&&(t=_);var C=t[w];Object(u.useEffect)((function(){return m(t[w].type)}),[]);var E=d.a.createElement(c.a,null,t.map((function(e,n){var r=d.a.createElement("div",{"data-testid":"dropdown-item-".concat(e.type),className:"template-scope-menu-item"},d.a.createElement("div",{className:"template-scope-icon"},e.icon),d.a.createElement("div",{className:"template-scope-text"},d.a.createElement("h4",null,e.header),d.a.createElement("p",null,e.desc)),n===w&&d.a.createElement("div",{className:"template-scope-more-icon"},d.a.createElement(s.a,{width:20})));return d.a.createElement(c.a.Item,{key:e.header,onClick:function(){x(n),m(t[n].type)}},r)})));return d.a.createElement("div",{"data-testid":"creator-view",className:"template-creator-content"},d.a.createElement("p",null,__("模板名称")),d.a.createElement(o.a,{value:f||"",onChange:function(e){return p(e.target.value)},onFocus:function(e){return e.target.setSelectionRange(0,e.target.value.length)}}),d.a.createElement("p",null,__("可用范围")),d.a.createElement(r.a,{trigger:["click"],overlay:E},d.a.createElement("div",{"data-testid":"dropdown-trigger",className:"template-scope"},d.a.createElement("div",{className:"template-scope-icon"},C.icon),d.a.createElement("div",{className:"template-scope-text"},d.a.createElement("h4",null,C.header),d.a.createElement("p",null,C.desc)),d.a.createElement("div",{className:"template-scope-more-icon"},d.a.createElement(i.a,null)))))}g.defaultProps={isOfficial:!1},g.propTypes={newTemplateName:p.a.string,onSetNewTemplateName:p.a.func,onSetSelectedScope:p.a.func,isOfficial:p.a.bool,isDesktop:p.a.bool,group:p.a.object,organization:p.a.object},t.a=g},function(e,t,n){},,,,,,function(e,t,n){e.exports=function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){return l(e)||s(e)||u(e)||f()}function l(e){if(Array.isArray(e))return d(e)}function s(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function u(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var p="undefined"!=typeof window&&void 0!==window.document,h=p?window:{},m=!(!p||!h.document.documentElement)&&"ontouchstart"in h.document.documentElement,g=!!p&&"PointerEvent"in h,v="cropper",y="all",b="crop",k="move",w="zoom",x="e",_="w",C="s",E="n",O="ne",S="nw",R="se",D="sw",A="".concat(v,"-crop"),T="".concat(v,"-disabled"),P="".concat(v,"-hidden"),j="".concat(v,"-hide"),M="".concat(v,"-invisible"),N="".concat(v,"-modal"),L="".concat(v,"-move"),I="".concat(v,"Action"),z="".concat(v,"Preview"),B="crop",F="move",V="none",U="crop",q="cropend",H="cropmove",W="cropstart",Y="dblclick",G=m?"touchstart":"mousedown",K=m?"touchmove":"mousemove",X=m?"touchend touchcancel":"mouseup",$=g?"pointerdown":G,Z=g?"pointermove":K,Q=g?"pointerup pointercancel":X,J="ready",ee="resize",te="wheel",ne="zoom",re="image/jpeg",ae=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,ie=/^data:/,oe=/^data:image\/jpeg;base64,/,ce=/^img|canvas$/i,le=200,se=100,ue={viewMode:0,dragMode:B,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:le,minContainerHeight:se,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},de='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',fe=Number.isNaN||h.isNaN;function pe(e){return"number"==typeof e&&!fe(e)}var he=function(e){return e>0&&e<1/0};function me(e){return void 0===e}function ge(t){return"object"===e(t)&&null!==t}var ve=Object.prototype.hasOwnProperty;function ye(e){if(!ge(e))return!1;try{var t=e.constructor,n=t.prototype;return t&&n&&ve.call(n,"isPrototypeOf")}catch(e){return!1}}function be(e){return"function"==typeof e}var ke=Array.prototype.slice;function we(e){return Array.from?Array.from(e):ke.call(e)}function xe(e,t){return e&&be(t)&&(Array.isArray(e)||pe(e.length)?we(e).forEach((function(n,r){t.call(e,n,r,e)})):ge(e)&&Object.keys(e).forEach((function(n){t.call(e,e[n],n,e)}))),e}var _e=Object.assign||function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ge(e)&&n.length>0&&n.forEach((function(t){ge(t)&&Object.keys(t).forEach((function(n){e[n]=t[n]}))})),e},Ce=/\.\d*(?:0|9){12}\d*$/;function Ee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return Ce.test(e)?Math.round(e*t)/t:e}var Oe=/^width|height|left|top|marginLeft|marginTop$/;function Se(e,t){var n=e.style;xe(t,(function(e,t){Oe.test(t)&&pe(e)&&(e="".concat(e,"px")),n[t]=e}))}function Re(e,t){return e.classList?e.classList.contains(t):e.className.indexOf(t)>-1}function De(e,t){if(t)if(pe(e.length))xe(e,(function(e){De(e,t)}));else if(e.classList)e.classList.add(t);else{var n=e.className.trim();n?n.indexOf(t)<0&&(e.className="".concat(n," ").concat(t)):e.className=t}}function Ae(e,t){t&&(pe(e.length)?xe(e,(function(e){Ae(e,t)})):e.classList?e.classList.remove(t):e.className.indexOf(t)>=0&&(e.className=e.className.replace(t,"")))}function Te(e,t,n){t&&(pe(e.length)?xe(e,(function(e){Te(e,t,n)})):n?De(e,t):Ae(e,t))}var Pe=/([a-z\d])([A-Z])/g;function je(e){return e.replace(Pe,"$1-$2").toLowerCase()}function Me(e,t){return ge(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-".concat(je(t)))}function Ne(e,t,n){ge(n)?e[t]=n:e.dataset?e.dataset[t]=n:e.setAttribute("data-".concat(je(t)),n)}function Le(e,t){if(ge(e[t]))try{delete e[t]}catch(n){e[t]=void 0}else if(e.dataset)try{delete e.dataset[t]}catch(n){e.dataset[t]=void 0}else e.removeAttribute("data-".concat(je(t)))}var Ie=/\s\s*/,ze=function(){var e=!1;if(p){var t=!1,n=function(){},r=Object.defineProperty({},"once",{get:function(){return e=!0,t},set:function(e){t=e}});h.addEventListener("test",n,r),h.removeEventListener("test",n,r)}return e}();function Be(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=n;t.trim().split(Ie).forEach((function(t){if(!ze){var i=e.listeners;i&&i[t]&&i[t][n]&&(a=i[t][n],delete i[t][n],0===Object.keys(i[t]).length&&delete i[t],0===Object.keys(i).length&&delete e.listeners)}e.removeEventListener(t,a,r)}))}function Fe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=n;t.trim().split(Ie).forEach((function(t){if(r.once&&!ze){var i=e.listeners,o=void 0===i?{}:i;a=function(){delete o[t][n],e.removeEventListener(t,a,r);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];n.apply(e,c)},o[t]||(o[t]={}),o[t][n]&&e.removeEventListener(t,o[t][n],r),o[t][n]=a,e.listeners=o}e.addEventListener(t,a,r)}))}function Ve(e,t,n){var r;return be(Event)&&be(CustomEvent)?r=new CustomEvent(t,{detail:n,bubbles:!0,cancelable:!0}):(r=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n),e.dispatchEvent(r)}function Ue(e){var t=e.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var qe=h.location,He=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function We(e){var t=e.match(He);return null!==t&&(t[1]!==qe.protocol||t[2]!==qe.hostname||t[3]!==qe.port)}function Ye(e){var t="timestamp=".concat((new Date).getTime());return e+(-1===e.indexOf("?")?"?":"&")+t}function Ge(e){var t=e.rotate,n=e.scaleX,r=e.scaleY,a=e.translateX,i=e.translateY,o=[];pe(a)&&0!==a&&o.push("translateX(".concat(a,"px)")),pe(i)&&0!==i&&o.push("translateY(".concat(i,"px)")),pe(t)&&0!==t&&o.push("rotate(".concat(t,"deg)")),pe(n)&&1!==n&&o.push("scaleX(".concat(n,")")),pe(r)&&1!==r&&o.push("scaleY(".concat(r,")"));var c=o.length?o.join(" "):"none";return{WebkitTransform:c,msTransform:c,transform:c}}function Ke(e){var t=o({},e),n=0;return xe(e,(function(e,r){delete t[r],xe(t,(function(t){var r=Math.abs(e.startX-t.startX),a=Math.abs(e.startY-t.startY),i=Math.abs(e.endX-t.endX),o=Math.abs(e.endY-t.endY),c=Math.sqrt(r*r+a*a),l=(Math.sqrt(i*i+o*o)-c)/c;Math.abs(l)>Math.abs(n)&&(n=l)}))})),n}function Xe(e,t){var n=e.pageX,r=e.pageY,a={endX:n,endY:r};return t?a:o({startX:n,startY:r},a)}function $e(e){var t=0,n=0,r=0;return xe(e,(function(e){var a=e.startX,i=e.startY;t+=a,n+=i,r+=1})),{pageX:t/=r,pageY:n/=r}}function Ze(e){var t=e.aspectRatio,n=e.height,r=e.width,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",i=he(r),o=he(n);if(i&&o){var c=n*t;"contain"===a&&c>r||"cover"===a&&c<r?n=r/t:r=n*t}else i?n=r/t:o&&(r=n*t);return{width:r,height:n}}function Qe(e){var t=e.width,n=e.height,r=e.degree;if(90==(r=Math.abs(r)%180))return{width:n,height:t};var a=r%90*Math.PI/180,i=Math.sin(a),o=Math.cos(a),c=t*o+n*i,l=t*i+n*o;return r>90?{width:l,height:c}:{width:c,height:l}}function Je(e,t,n,r){var a=t.aspectRatio,i=t.naturalWidth,o=t.naturalHeight,l=t.rotate,s=void 0===l?0:l,u=t.scaleX,d=void 0===u?1:u,f=t.scaleY,p=void 0===f?1:f,h=n.aspectRatio,m=n.naturalWidth,g=n.naturalHeight,v=r.fillColor,y=void 0===v?"transparent":v,b=r.imageSmoothingEnabled,k=void 0===b||b,w=r.imageSmoothingQuality,x=void 0===w?"low":w,_=r.maxWidth,C=void 0===_?1/0:_,E=r.maxHeight,O=void 0===E?1/0:E,S=r.minWidth,R=void 0===S?0:S,D=r.minHeight,A=void 0===D?0:D,T=document.createElement("canvas"),P=T.getContext("2d"),j=Ze({aspectRatio:h,width:C,height:O}),M=Ze({aspectRatio:h,width:R,height:A},"cover"),N=Math.min(j.width,Math.max(M.width,m)),L=Math.min(j.height,Math.max(M.height,g)),I=Ze({aspectRatio:a,width:C,height:O}),z=Ze({aspectRatio:a,width:R,height:A},"cover"),B=Math.min(I.width,Math.max(z.width,i)),F=Math.min(I.height,Math.max(z.height,o)),V=[-B/2,-F/2,B,F];return T.width=Ee(N),T.height=Ee(L),P.fillStyle=y,P.fillRect(0,0,N,L),P.save(),P.translate(N/2,L/2),P.rotate(s*Math.PI/180),P.scale(d,p),P.imageSmoothingEnabled=k,P.imageSmoothingQuality=x,P.drawImage.apply(P,[e].concat(c(V.map((function(e){return Math.floor(Ee(e))}))))),P.restore(),T}var et=String.fromCharCode;function tt(e,t,n){var r="";n+=t;for(var a=t;a<n;a+=1)r+=et(e.getUint8(a));return r}var nt=/^data:.*,/;function rt(e){var t=e.replace(nt,""),n=atob(t),r=new ArrayBuffer(n.length),a=new Uint8Array(r);return xe(a,(function(e,t){a[t]=n.charCodeAt(t)})),r}function at(e,t){for(var n=[],r=8192,a=new Uint8Array(e);a.length>0;)n.push(et.apply(null,we(a.subarray(0,r)))),a=a.subarray(r);return"data:".concat(t,";base64,").concat(btoa(n.join("")))}function it(e){var t,n=new DataView(e);try{var r,a,i;if(255===n.getUint8(0)&&216===n.getUint8(1))for(var o=n.byteLength,c=2;c+1<o;){if(255===n.getUint8(c)&&225===n.getUint8(c+1)){a=c;break}c+=1}if(a){var l=a+10;if("Exif"===tt(n,a+4,4)){var s=n.getUint16(l);if(((r=18761===s)||19789===s)&&42===n.getUint16(l+2,r)){var u=n.getUint32(l+4,r);u>=8&&(i=l+u)}}}if(i){var d,f,p=n.getUint16(i,r);for(f=0;f<p;f+=1)if(d=i+12*f+2,274===n.getUint16(d,r)){d+=8,t=n.getUint16(d,r),n.setUint16(d,1,r);break}}}catch(e){t=1}return t}function ot(e){var t=0,n=1,r=1;switch(e){case 2:n=-1;break;case 3:t=-180;break;case 4:r=-1;break;case 5:t=90,r=-1;break;case 6:t=90;break;case 7:t=90,n=-1;break;case 8:t=-90}return{rotate:t,scaleX:n,scaleY:r}}var ct={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,t=this.options,n=this.container,r=this.cropper,a=Number(t.minContainerWidth),i=Number(t.minContainerHeight);De(r,P),Ae(e,P);var o={width:Math.max(n.offsetWidth,a>=0?a:le),height:Math.max(n.offsetHeight,i>=0?i:se)};this.containerData=o,Se(r,{width:o.width,height:o.height}),De(e,P),Ae(r,P)},initCanvas:function(){var e=this.containerData,t=this.imageData,n=this.options.viewMode,r=Math.abs(t.rotate)%180==90,a=r?t.naturalHeight:t.naturalWidth,i=r?t.naturalWidth:t.naturalHeight,o=a/i,c=e.width,l=e.height;e.height*o>e.width?3===n?c=e.height*o:l=e.width/o:3===n?l=e.width/o:c=e.height*o;var s={aspectRatio:o,naturalWidth:a,naturalHeight:i,width:c,height:l};this.canvasData=s,this.limited=1===n||2===n,this.limitCanvas(!0,!0),s.width=Math.min(Math.max(s.width,s.minWidth),s.maxWidth),s.height=Math.min(Math.max(s.height,s.minHeight),s.maxHeight),s.left=(e.width-s.width)/2,s.top=(e.height-s.height)/2,s.oldLeft=s.left,s.oldTop=s.top,this.initialCanvasData=_e({},s)},limitCanvas:function(e,t){var n=this.options,r=this.containerData,a=this.canvasData,i=this.cropBoxData,o=n.viewMode,c=a.aspectRatio,l=this.cropped&&i;if(e){var s=Number(n.minCanvasWidth)||0,u=Number(n.minCanvasHeight)||0;o>1?(s=Math.max(s,r.width),u=Math.max(u,r.height),3===o&&(u*c>s?s=u*c:u=s/c)):o>0&&(s?s=Math.max(s,l?i.width:0):u?u=Math.max(u,l?i.height:0):l&&(s=i.width,(u=i.height)*c>s?s=u*c:u=s/c));var d=Ze({aspectRatio:c,width:s,height:u});s=d.width,u=d.height,a.minWidth=s,a.minHeight=u,a.maxWidth=1/0,a.maxHeight=1/0}if(t)if(o>(l?0:1)){var f=r.width-a.width,p=r.height-a.height;a.minLeft=Math.min(0,f),a.minTop=Math.min(0,p),a.maxLeft=Math.max(0,f),a.maxTop=Math.max(0,p),l&&this.limited&&(a.minLeft=Math.min(i.left,i.left+(i.width-a.width)),a.minTop=Math.min(i.top,i.top+(i.height-a.height)),a.maxLeft=i.left,a.maxTop=i.top,2===o&&(a.width>=r.width&&(a.minLeft=Math.min(0,f),a.maxLeft=Math.max(0,f)),a.height>=r.height&&(a.minTop=Math.min(0,p),a.maxTop=Math.max(0,p))))}else a.minLeft=-a.width,a.minTop=-a.height,a.maxLeft=r.width,a.maxTop=r.height},renderCanvas:function(e,t){var n=this.canvasData,r=this.imageData;if(t){var a=Qe({width:r.naturalWidth*Math.abs(r.scaleX||1),height:r.naturalHeight*Math.abs(r.scaleY||1),degree:r.rotate||0}),i=a.width,o=a.height,c=n.width*(i/n.naturalWidth),l=n.height*(o/n.naturalHeight);n.left-=(c-n.width)/2,n.top-=(l-n.height)/2,n.width=c,n.height=l,n.aspectRatio=i/o,n.naturalWidth=i,n.naturalHeight=o,this.limitCanvas(!0,!1)}(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCanvas(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,Se(this.canvas,_e({width:n.width,height:n.height},Ge({translateX:n.left,translateY:n.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var t=this.canvasData,n=this.imageData,r=n.naturalWidth*(t.width/t.naturalWidth),a=n.naturalHeight*(t.height/t.naturalHeight);_e(n,{width:r,height:a,left:(t.width-r)/2,top:(t.height-a)/2}),Se(this.image,_e({width:n.width,height:n.height},Ge(_e({translateX:n.left,translateY:n.top},n)))),e&&this.output()},initCropBox:function(){var e=this.options,t=this.canvasData,n=e.aspectRatio||e.initialAspectRatio,r=Number(e.autoCropArea)||.8,a={width:t.width,height:t.height};n&&(t.height*n>t.width?a.height=a.width/n:a.width=a.height*n),this.cropBoxData=a,this.limitCropBox(!0,!0),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),a.width=Math.max(a.minWidth,a.width*r),a.height=Math.max(a.minHeight,a.height*r),a.left=t.left+(t.width-a.width)/2,a.top=t.top+(t.height-a.height)/2,a.oldLeft=a.left,a.oldTop=a.top,this.initialCropBoxData=_e({},a)},limitCropBox:function(e,t){var n=this.options,r=this.containerData,a=this.canvasData,i=this.cropBoxData,o=this.limited,c=n.aspectRatio;if(e){var l=Number(n.minCropBoxWidth)||0,s=Number(n.minCropBoxHeight)||0,u=o?Math.min(r.width,a.width,a.width+a.left,r.width-a.left):r.width,d=o?Math.min(r.height,a.height,a.height+a.top,r.height-a.top):r.height;l=Math.min(l,r.width),s=Math.min(s,r.height),c&&(l&&s?s*c>l?s=l/c:l=s*c:l?s=l/c:s&&(l=s*c),d*c>u?d=u/c:u=d*c),i.minWidth=Math.min(l,u),i.minHeight=Math.min(s,d),i.maxWidth=u,i.maxHeight=d}t&&(o?(i.minLeft=Math.max(0,a.left),i.minTop=Math.max(0,a.top),i.maxLeft=Math.min(r.width,a.left+a.width)-i.width,i.maxTop=Math.min(r.height,a.top+a.height)-i.height):(i.minLeft=0,i.minTop=0,i.maxLeft=r.width-i.width,i.maxTop=r.height-i.height))},renderCropBox:function(){var e=this.options,t=this.containerData,n=this.cropBoxData;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCropBox(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,e.movable&&e.cropBoxMovable&&Ne(this.face,I,n.width>=t.width&&n.height>=t.height?k:y),Se(this.cropBox,_e({width:n.width,height:n.height},Ge({translateX:n.left,translateY:n.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Ve(this.element,U,this.getData())}},lt={initPreview:function(){var e=this.element,t=this.crossOrigin,n=this.options.preview,r=t?this.crossOriginUrl:this.url,a=e.alt||"The image to preview",i=document.createElement("img");if(t&&(i.crossOrigin=t),i.src=r,i.alt=a,this.viewBox.appendChild(i),this.viewBoxImage=i,n){var o=n;"string"==typeof n?o=e.ownerDocument.querySelectorAll(n):n.querySelector&&(o=[n]),this.previews=o,xe(o,(function(e){var n=document.createElement("img");Ne(e,z,{width:e.offsetWidth,height:e.offsetHeight,html:e.innerHTML}),t&&(n.crossOrigin=t),n.src=r,n.alt=a,n.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',e.innerHTML="",e.appendChild(n)}))}},resetPreview:function(){xe(this.previews,(function(e){var t=Me(e,z);Se(e,{width:t.width,height:t.height}),e.innerHTML=t.html,Le(e,z)}))},preview:function(){var e=this.imageData,t=this.canvasData,n=this.cropBoxData,r=n.width,a=n.height,i=e.width,o=e.height,c=n.left-t.left-e.left,l=n.top-t.top-e.top;this.cropped&&!this.disabled&&(Se(this.viewBoxImage,_e({width:i,height:o},Ge(_e({translateX:-c,translateY:-l},e)))),xe(this.previews,(function(t){var n=Me(t,z),s=n.width,u=n.height,d=s,f=u,p=1;r&&(f=a*(p=s/r)),a&&f>u&&(d=r*(p=u/a),f=u),Se(t,{width:d,height:f}),Se(t.getElementsByTagName("img")[0],_e({width:i*p,height:o*p},Ge(_e({translateX:-c*p,translateY:-l*p},e))))})))}},st={bind:function(){var e=this.element,t=this.options,n=this.cropper;be(t.cropstart)&&Fe(e,W,t.cropstart),be(t.cropmove)&&Fe(e,H,t.cropmove),be(t.cropend)&&Fe(e,q,t.cropend),be(t.crop)&&Fe(e,U,t.crop),be(t.zoom)&&Fe(e,ne,t.zoom),Fe(n,$,this.onCropStart=this.cropStart.bind(this)),t.zoomable&&t.zoomOnWheel&&Fe(n,te,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&Fe(n,Y,this.onDblclick=this.dblclick.bind(this)),Fe(e.ownerDocument,Z,this.onCropMove=this.cropMove.bind(this)),Fe(e.ownerDocument,Q,this.onCropEnd=this.cropEnd.bind(this)),t.responsive&&Fe(window,ee,this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,t=this.options,n=this.cropper;be(t.cropstart)&&Be(e,W,t.cropstart),be(t.cropmove)&&Be(e,H,t.cropmove),be(t.cropend)&&Be(e,q,t.cropend),be(t.crop)&&Be(e,U,t.crop),be(t.zoom)&&Be(e,ne,t.zoom),Be(n,$,this.onCropStart),t.zoomable&&t.zoomOnWheel&&Be(n,te,this.onWheel,{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&Be(n,Y,this.onDblclick),Be(e.ownerDocument,Z,this.onCropMove),Be(e.ownerDocument,Q,this.onCropEnd),t.responsive&&Be(window,ee,this.onResize)}},ut={resize:function(){if(!this.disabled){var e,t,n=this.options,r=this.container,a=this.containerData,i=r.offsetWidth/a.width;1===i&&r.offsetHeight===a.height||(n.restore&&(e=this.getCanvasData(),t=this.getCropBoxData()),this.render(),n.restore&&(this.setCanvasData(xe(e,(function(t,n){e[n]=t*i}))),this.setCropBoxData(xe(t,(function(e,n){t[n]=e*i})))))}},dblclick:function(){this.disabled||this.options.dragMode===V||this.setDragMode(Re(this.dragBox,A)?F:B)},wheel:function(e){var t=this,n=Number(this.options.wheelZoomRatio)||.1,r=1;this.disabled||(e.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){t.wheeling=!1}),50),e.deltaY?r=e.deltaY>0?1:-1:e.wheelDelta?r=-e.wheelDelta/120:e.detail&&(r=e.detail>0?1:-1),this.zoom(-r*n,e)))},cropStart:function(e){var t=e.buttons,n=e.button;if(!(this.disabled||("mousedown"===e.type||"pointerdown"===e.type&&"mouse"===e.pointerType)&&(pe(t)&&1!==t||pe(n)&&0!==n||e.ctrlKey))){var r,a=this.options,i=this.pointers;e.changedTouches?xe(e.changedTouches,(function(e){i[e.identifier]=Xe(e)})):i[e.pointerId||0]=Xe(e),r=Object.keys(i).length>1&&a.zoomable&&a.zoomOnTouch?w:Me(e.target,I),ae.test(r)&&!1!==Ve(this.element,W,{originalEvent:e,action:r})&&(e.preventDefault(),this.action=r,this.cropping=!1,r===b&&(this.cropping=!0,De(this.dragBox,N)))}},cropMove:function(e){var t=this.action;if(!this.disabled&&t){var n=this.pointers;e.preventDefault(),!1!==Ve(this.element,H,{originalEvent:e,action:t})&&(e.changedTouches?xe(e.changedTouches,(function(e){_e(n[e.identifier]||{},Xe(e,!0))})):_e(n[e.pointerId||0]||{},Xe(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var t=this.action,n=this.pointers;e.changedTouches?xe(e.changedTouches,(function(e){delete n[e.identifier]})):delete n[e.pointerId||0],t&&(e.preventDefault(),Object.keys(n).length||(this.action=""),this.cropping&&(this.cropping=!1,Te(this.dragBox,N,this.cropped&&this.options.modal)),Ve(this.element,q,{originalEvent:e,action:t}))}}},dt={change:function(e){var t,n=this.options,r=this.canvasData,a=this.containerData,i=this.cropBoxData,o=this.pointers,c=this.action,l=n.aspectRatio,s=i.left,u=i.top,d=i.width,f=i.height,p=s+d,h=u+f,m=0,g=0,v=a.width,A=a.height,T=!0;!l&&e.shiftKey&&(l=d&&f?d/f:1),this.limited&&(m=i.minLeft,g=i.minTop,v=m+Math.min(a.width,r.width,r.left+r.width),A=g+Math.min(a.height,r.height,r.top+r.height));var j=o[Object.keys(o)[0]],M={x:j.endX-j.startX,y:j.endY-j.startY},N=function(e){switch(e){case x:p+M.x>v&&(M.x=v-p);break;case _:s+M.x<m&&(M.x=m-s);break;case E:u+M.y<g&&(M.y=g-u);break;case C:h+M.y>A&&(M.y=A-h)}};switch(c){case y:s+=M.x,u+=M.y;break;case x:if(M.x>=0&&(p>=v||l&&(u<=g||h>=A))){T=!1;break}N(x),(d+=M.x)<0&&(c=_,s-=d=-d),l&&(f=d/l,u+=(i.height-f)/2);break;case E:if(M.y<=0&&(u<=g||l&&(s<=m||p>=v))){T=!1;break}N(E),f-=M.y,u+=M.y,f<0&&(c=C,u-=f=-f),l&&(d=f*l,s+=(i.width-d)/2);break;case _:if(M.x<=0&&(s<=m||l&&(u<=g||h>=A))){T=!1;break}N(_),d-=M.x,s+=M.x,d<0&&(c=x,s-=d=-d),l&&(f=d/l,u+=(i.height-f)/2);break;case C:if(M.y>=0&&(h>=A||l&&(s<=m||p>=v))){T=!1;break}N(C),(f+=M.y)<0&&(c=E,u-=f=-f),l&&(d=f*l,s+=(i.width-d)/2);break;case O:if(l){if(M.y<=0&&(u<=g||p>=v)){T=!1;break}N(E),f-=M.y,u+=M.y,d=f*l}else N(E),N(x),M.x>=0?p<v?d+=M.x:M.y<=0&&u<=g&&(T=!1):d+=M.x,M.y<=0?u>g&&(f-=M.y,u+=M.y):(f-=M.y,u+=M.y);d<0&&f<0?(c=D,u-=f=-f,s-=d=-d):d<0?(c=S,s-=d=-d):f<0&&(c=R,u-=f=-f);break;case S:if(l){if(M.y<=0&&(u<=g||s<=m)){T=!1;break}N(E),f-=M.y,u+=M.y,d=f*l,s+=i.width-d}else N(E),N(_),M.x<=0?s>m?(d-=M.x,s+=M.x):M.y<=0&&u<=g&&(T=!1):(d-=M.x,s+=M.x),M.y<=0?u>g&&(f-=M.y,u+=M.y):(f-=M.y,u+=M.y);d<0&&f<0?(c=R,u-=f=-f,s-=d=-d):d<0?(c=O,s-=d=-d):f<0&&(c=D,u-=f=-f);break;case D:if(l){if(M.x<=0&&(s<=m||h>=A)){T=!1;break}N(_),d-=M.x,s+=M.x,f=d/l}else N(C),N(_),M.x<=0?s>m?(d-=M.x,s+=M.x):M.y>=0&&h>=A&&(T=!1):(d-=M.x,s+=M.x),M.y>=0?h<A&&(f+=M.y):f+=M.y;d<0&&f<0?(c=O,u-=f=-f,s-=d=-d):d<0?(c=R,s-=d=-d):f<0&&(c=S,u-=f=-f);break;case R:if(l){if(M.x>=0&&(p>=v||h>=A)){T=!1;break}N(x),f=(d+=M.x)/l}else N(C),N(x),M.x>=0?p<v?d+=M.x:M.y>=0&&h>=A&&(T=!1):d+=M.x,M.y>=0?h<A&&(f+=M.y):f+=M.y;d<0&&f<0?(c=S,u-=f=-f,s-=d=-d):d<0?(c=D,s-=d=-d):f<0&&(c=O,u-=f=-f);break;case k:this.move(M.x,M.y),T=!1;break;case w:this.zoom(Ke(o),e),T=!1;break;case b:if(!M.x||!M.y){T=!1;break}t=Ue(this.cropper),s=j.startX-t.left,u=j.startY-t.top,d=i.minWidth,f=i.minHeight,M.x>0?c=M.y>0?R:O:M.x<0&&(s-=d,c=M.y>0?D:S),M.y<0&&(u-=f),this.cropped||(Ae(this.cropBox,P),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}T&&(i.width=d,i.height=f,i.left=s,i.top=u,this.action=c,this.renderCropBox()),xe(o,(function(e){e.startX=e.endX,e.startY=e.endY}))}},ft={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&De(this.dragBox,N),Ae(this.cropBox,P),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=_e({},this.initialImageData),this.canvasData=_e({},this.initialCanvasData),this.cropBoxData=_e({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(_e(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),Ae(this.dragBox,N),De(this.cropBox,P)),this},replace:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&e&&(this.isImg&&(this.element.src=e),t?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,xe(this.previews,(function(t){t.getElementsByTagName("img")[0].src=e})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,Ae(this.cropper,T)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,De(this.cropper,T)),this},destroy:function(){var e=this.element;return e[v]?(e[v]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=this.canvasData,r=n.left,a=n.top;return this.moveTo(me(e)?e:r+Number(e),me(t)?t:a+Number(t))},moveTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=this.canvasData,r=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.movable&&(pe(e)&&(n.left=e,r=!0),pe(t)&&(n.top=t,r=!0),r&&this.renderCanvas(!0)),this},zoom:function(e,t){var n=this.canvasData;return e=(e=Number(e))<0?1/(1-e):1+e,this.zoomTo(n.width*e/n.naturalWidth,null,t)},zoomTo:function(e,t,n){var r=this.options,a=this.canvasData,i=a.width,o=a.height,c=a.naturalWidth,l=a.naturalHeight;if((e=Number(e))>=0&&this.ready&&!this.disabled&&r.zoomable){var s=c*e,u=l*e;if(!1===Ve(this.element,ne,{ratio:e,oldRatio:i/c,originalEvent:n}))return this;if(n){var d=this.pointers,f=Ue(this.cropper),p=d&&Object.keys(d).length?$e(d):{pageX:n.pageX,pageY:n.pageY};a.left-=(s-i)*((p.pageX-f.left-a.left)/i),a.top-=(u-o)*((p.pageY-f.top-a.top)/o)}else ye(t)&&pe(t.x)&&pe(t.y)?(a.left-=(s-i)*((t.x-a.left)/i),a.top-=(u-o)*((t.y-a.top)/o)):(a.left-=(s-i)/2,a.top-=(u-o)/2);a.width=s,a.height=u,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return pe(e=Number(e))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var t=this.imageData.scaleY;return this.scale(e,pe(t)?t:1)},scaleY:function(e){var t=this.imageData.scaleX;return this.scale(pe(t)?t:1,e)},scale:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=this.imageData,r=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.scalable&&(pe(e)&&(n.scaleX=e,r=!0),pe(t)&&(n.scaleY=t,r=!0),r&&this.renderCanvas(!0,!0)),this},getData:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.options,r=this.imageData,a=this.canvasData,i=this.cropBoxData;if(this.ready&&this.cropped){e={x:i.left-a.left,y:i.top-a.top,width:i.width,height:i.height};var o=r.width/r.naturalWidth;if(xe(e,(function(t,n){e[n]=t/o})),t){var c=Math.round(e.y+e.height),l=Math.round(e.x+e.width);e.x=Math.round(e.x),e.y=Math.round(e.y),e.width=l-e.x,e.height=c-e.y}}else e={x:0,y:0,width:0,height:0};return n.rotatable&&(e.rotate=r.rotate||0),n.scalable&&(e.scaleX=r.scaleX||1,e.scaleY=r.scaleY||1),e},setData:function(e){var t=this.options,n=this.imageData,r=this.canvasData,a={};if(this.ready&&!this.disabled&&ye(e)){var i=!1;t.rotatable&&pe(e.rotate)&&e.rotate!==n.rotate&&(n.rotate=e.rotate,i=!0),t.scalable&&(pe(e.scaleX)&&e.scaleX!==n.scaleX&&(n.scaleX=e.scaleX,i=!0),pe(e.scaleY)&&e.scaleY!==n.scaleY&&(n.scaleY=e.scaleY,i=!0)),i&&this.renderCanvas(!0,!0);var o=n.width/n.naturalWidth;pe(e.x)&&(a.left=e.x*o+r.left),pe(e.y)&&(a.top=e.y*o+r.top),pe(e.width)&&(a.width=e.width*o),pe(e.height)&&(a.height=e.height*o),this.setCropBoxData(a)}return this},getContainerData:function(){return this.ready?_e({},this.containerData):{}},getImageData:function(){return this.sized?_e({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,t={};return this.ready&&xe(["left","top","width","height","naturalWidth","naturalHeight"],(function(n){t[n]=e[n]})),t},setCanvasData:function(e){var t=this.canvasData,n=t.aspectRatio;return this.ready&&!this.disabled&&ye(e)&&(pe(e.left)&&(t.left=e.left),pe(e.top)&&(t.top=e.top),pe(e.width)?(t.width=e.width,t.height=e.width/n):pe(e.height)&&(t.height=e.height,t.width=e.height*n),this.renderCanvas(!0)),this},getCropBoxData:function(){var e,t=this.cropBoxData;return this.ready&&this.cropped&&(e={left:t.left,top:t.top,width:t.width,height:t.height}),e||{}},setCropBoxData:function(e){var t,n,r=this.cropBoxData,a=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&ye(e)&&(pe(e.left)&&(r.left=e.left),pe(e.top)&&(r.top=e.top),pe(e.width)&&e.width!==r.width&&(t=!0,r.width=e.width),pe(e.height)&&e.height!==r.height&&(n=!0,r.height=e.height),a&&(t?r.height=r.width/a:n&&(r.width=r.height*a)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var t=this.canvasData,n=Je(this.image,this.imageData,t,e);if(!this.cropped)return n;var r=this.getData(),a=r.x,i=r.y,o=r.width,l=r.height,s=n.width/Math.floor(t.naturalWidth);1!==s&&(a*=s,i*=s,o*=s,l*=s);var u=o/l,d=Ze({aspectRatio:u,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),f=Ze({aspectRatio:u,width:e.minWidth||0,height:e.minHeight||0},"cover"),p=Ze({aspectRatio:u,width:e.width||(1!==s?n.width:o),height:e.height||(1!==s?n.height:l)}),h=p.width,m=p.height;h=Math.min(d.width,Math.max(f.width,h)),m=Math.min(d.height,Math.max(f.height,m));var g=document.createElement("canvas"),v=g.getContext("2d");g.width=Ee(h),g.height=Ee(m),v.fillStyle=e.fillColor||"transparent",v.fillRect(0,0,h,m);var y=e.imageSmoothingEnabled,b=void 0===y||y,k=e.imageSmoothingQuality;v.imageSmoothingEnabled=b,k&&(v.imageSmoothingQuality=k);var w,x,_,C,E,O,S=n.width,R=n.height,D=a,A=i;D<=-o||D>S?(D=0,w=0,_=0,E=0):D<=0?(_=-D,D=0,E=w=Math.min(S,o+D)):D<=S&&(_=0,E=w=Math.min(o,S-D)),w<=0||A<=-l||A>R?(A=0,x=0,C=0,O=0):A<=0?(C=-A,A=0,O=x=Math.min(R,l+A)):A<=R&&(C=0,O=x=Math.min(l,R-A));var T=[D,A,w,x];if(E>0&&O>0){var P=h/o;T.push(_*P,C*P,E*P,O*P)}return v.drawImage.apply(v,[n].concat(c(T.map((function(e){return Math.floor(Ee(e))}))))),g},setAspectRatio:function(e){var t=this.options;return this.disabled||me(e)||(t.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var t=this.options,n=this.dragBox,r=this.face;if(this.ready&&!this.disabled){var a=e===B,i=t.movable&&e===F;e=a||i?e:V,t.dragMode=e,Ne(n,I,e),Te(n,A,a),Te(n,L,i),t.cropBoxMovable||(Ne(r,I,e),Te(r,A,a),Te(r,L,i))}return this}},pt=h.Cropper,ht=function(){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t(this,e),!n||!ce.test(n.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=n,this.options=_e({},ue,ye(r)&&r),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return r(e,[{key:"init",value:function(){var e,t=this.element,n=t.tagName.toLowerCase();if(!t[v]){if(t[v]=this,"img"===n){if(this.isImg=!0,e=t.getAttribute("src")||"",this.originalUrl=e,!e)return;e=t.src}else"canvas"===n&&window.HTMLCanvasElement&&(e=t.toDataURL());this.load(e)}}},{key:"load",value:function(e){var t=this;if(e){this.url=e,this.imageData={};var n=this.element,r=this.options;if(r.rotatable||r.scalable||(r.checkOrientation=!1),r.checkOrientation&&window.ArrayBuffer)if(ie.test(e))oe.test(e)?this.read(rt(e)):this.clone();else{var a=new XMLHttpRequest,i=this.clone.bind(this);this.reloading=!0,this.xhr=a,a.onabort=i,a.onerror=i,a.ontimeout=i,a.onprogress=function(){a.getResponseHeader("content-type")!==re&&a.abort()},a.onload=function(){t.read(a.response)},a.onloadend=function(){t.reloading=!1,t.xhr=null},r.checkCrossOrigin&&We(e)&&n.crossOrigin&&(e=Ye(e)),a.open("GET",e),a.responseType="arraybuffer",a.withCredentials="use-credentials"===n.crossOrigin,a.send()}else this.clone()}}},{key:"read",value:function(e){var t=this.options,n=this.imageData,r=it(e),a=0,i=1,o=1;if(r>1){this.url=at(e,re);var c=ot(r);a=c.rotate,i=c.scaleX,o=c.scaleY}t.rotatable&&(n.rotate=a),t.scalable&&(n.scaleX=i,n.scaleY=o),this.clone()}},{key:"clone",value:function(){var e=this.element,t=this.url,n=e.crossOrigin,r=t;this.options.checkCrossOrigin&&We(t)&&(n||(n="anonymous"),r=Ye(t)),this.crossOrigin=n,this.crossOriginUrl=r;var a=document.createElement("img");n&&(a.crossOrigin=n),a.src=r||t,a.alt=e.alt||"The image to crop",this.image=a,a.onload=this.start.bind(this),a.onerror=this.stop.bind(this),De(a,j),e.parentNode.insertBefore(a,e.nextSibling)}},{key:"start",value:function(){var e=this,t=this.image;t.onload=null,t.onerror=null,this.sizing=!0;var n=h.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(h.navigator.userAgent),r=function(t,n){_e(e.imageData,{naturalWidth:t,naturalHeight:n,aspectRatio:t/n}),e.initialImageData=_e({},e.imageData),e.sizing=!1,e.sized=!0,e.build()};if(!t.naturalWidth||n){var a=document.createElement("img"),i=document.body||document.documentElement;this.sizingImage=a,a.onload=function(){r(a.width,a.height),n||i.removeChild(a)},a.src=t.src,n||(a.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",i.appendChild(a))}else r(t.naturalWidth,t.naturalHeight)}},{key:"stop",value:function(){var e=this.image;e.onload=null,e.onerror=null,e.parentNode.removeChild(e),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var e=this.element,t=this.options,n=this.image,r=e.parentNode,a=document.createElement("div");a.innerHTML=de;var i=a.querySelector(".".concat(v,"-container")),o=i.querySelector(".".concat(v,"-canvas")),c=i.querySelector(".".concat(v,"-drag-box")),l=i.querySelector(".".concat(v,"-crop-box")),s=l.querySelector(".".concat(v,"-face"));this.container=r,this.cropper=i,this.canvas=o,this.dragBox=c,this.cropBox=l,this.viewBox=i.querySelector(".".concat(v,"-view-box")),this.face=s,o.appendChild(n),De(e,P),r.insertBefore(i,e.nextSibling),this.isImg||Ae(n,j),this.initPreview(),this.bind(),t.initialAspectRatio=Math.max(0,t.initialAspectRatio)||NaN,t.aspectRatio=Math.max(0,t.aspectRatio)||NaN,t.viewMode=Math.max(0,Math.min(3,Math.round(t.viewMode)))||0,De(l,P),t.guides||De(l.getElementsByClassName("".concat(v,"-dashed")),P),t.center||De(l.getElementsByClassName("".concat(v,"-center")),P),t.background&&De(i,"".concat(v,"-bg")),t.highlight||De(s,M),t.cropBoxMovable&&(De(s,L),Ne(s,I,y)),t.cropBoxResizable||(De(l.getElementsByClassName("".concat(v,"-line")),P),De(l.getElementsByClassName("".concat(v,"-point")),P)),this.render(),this.ready=!0,this.setDragMode(t.dragMode),t.autoCrop&&this.crop(),this.setData(t.data),be(t.ready)&&Fe(e,J,t.ready,{once:!0}),Ve(e,J)}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),Ae(this.element,P))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=pt,e}},{key:"setDefaults",value:function(e){_e(ue,ye(e)&&e)}}]),e}();return _e(ht.prototype,ct,lt,st,ut,dt,ft),ht}()},,function(e,t,n){!function(){"use strict";var t="undefined"!=typeof window&&void 0!==window.document?window.document:{},n=e.exports,r="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,a=function(){for(var e,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],r=0,a=n.length,i={};r<a;r++)if((e=n[r])&&e[1]in t){for(r=0;r<e.length;r++)i[n[0][r]]=e[r];return i}return!1}(),i={change:a.fullscreenchange,error:a.fullscreenerror},o={request:function(e){var n=a.requestFullscreen;e=e||t.documentElement,/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)?e[n]():e[n](r?Element.ALLOW_KEYBOARD_INPUT:{})},exit:function(){t[a.exitFullscreen]()},toggle:function(e){this.isFullscreen?this.exit():this.request(e)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,n){var r=i[e];r&&t.addEventListener(r,n,!1)},off:function(e,n){var r=i[e];r&&t.removeEventListener(r,n,!1)},raw:a};a?(Object.defineProperties(o,{isFullscreen:{get:function(){return Boolean(t[a.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[a.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(t[a.fullscreenEnabled])}}}),n?e.exports=o:window.screenfull=o):n?e.exports=!1:window.screenfull=!1}()},,,,function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(1998))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(2e3))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(2002))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(2004))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.query=new URLSearchParams(window.location.search),this.isServify=!!this.get("x-yuque-pt-signature"),this.viewport=this.get("viewport"),this.sidebar="0"===this.get("toc_sidebar")?"none":"toc",this.cards=this.get("cards").split(",").map((function(e){return e.trim()})).filter((function(e){return!!e})),this.thirdpartyCards=this.get("thirdparty_cards")?this.get("thirdparty_cards").split(",").map((function(e){return e.trim()})).filter((function(e){return!!e})):[],this.showTitle="0"!==this.get("title"),this.showHeader="0"!==this.get("header"),this.isEmbedMode=this.get("mode").startsWith("embed"),this.autoHeight=this.getAutoHeight(),this.editorType=this.get("editor_type"),this.editorMode=this.get("editor_mode"),this.language=this.get("language")||"zh-cn",this.pageMinWidth=this.get("page_min_width"),this.onchange="1"===this.get("onchange"),this.allowMention="0"!==this.get("mention"),this.allowResource="1"===this.get("resource"),this.watermark=this.get("watermark"),this.backgroundColor=this.get("background_color"),this.bodyBackgroundColor=this.get("body_background_color"),this.toolbarBackgroundColor=this.get("toolbar_background_color"),this.autoSaveInterval=this.getAutoSaveInterval(),this.saveToServer="0"!==this.get("save_to_server"),this.customUploadUrl=this.get("upload_url"),this.customUploadTypes=this.get("upload_types"),this.customMentionUrl=this.getMentionUrl(),this.customMentionOrigin=this.get("search_user_origin"),this.imageUploadUrl=this.getImageUploadUrl(),this.fileUploadUrl=this.getFileUploadUrl(),this.videoUploadUrl=this.getVideoUploadUrl(),this.videoUploadStatusUrl=this.getVideoUploadStatusUrl(),this.fullHTML="1"===this.query.get("full_html"),this.allowResizeVideo=!0,this.extraConfig=JSON.parse(this.query.get("extra_config")||"{}")}var t,n,a;return t=e,(n=[{key:"get",value:function(e){return this.query.get(e)||""}},{key:"getAutoHeight",value:function(){return!window.h5&&"0"!==this.get("auto_height")}},{key:"getAutoSaveInterval",value:function(){var e=this.get("auto_save_interval");return e&&!Number.isNaN(Number(e))?((e=Number(e))<60&&(e=60),1e3*e):null}},{key:"getMentionUrl",value:function(){var e=this.get("search_user_url");return this._joinCsrf(e)}},{key:"getImageUploadUrl",value:function(){return this.customUploadTypes&&this.customUploadTypes.includes("image")?"".concat(this._joinCsrf(this.customUploadUrl),"&type=image"):null}},{key:"getFileUploadUrl",value:function(){return this.customUploadTypes&&this.customUploadTypes.includes("attachment")?"".concat(this._joinCsrf(this.customUploadUrl),"&type=attachment"):null}},{key:"getVideoUploadUrl",value:function(){var e=this.get("upload_video_url");return e?this._joinCsrf(e):null}},{key:"getVideoUploadStatusUrl",value:function(){var e=this.get("upload_video_status_url");return e?this._joinCsrf(e):null}},{key:"_joinCsrf",value:function(e){var t=e.includes("?")?"&":"?";return"".concat(e).concat(t).concat(this._getCustomCsrf())}},{key:"_getCustomCsrf",value:function(){var e=this.get("upload_csrf_token_field"),t=this.get("upload_csrf_token_value");return e?"".concat(e,"=").concat(encodeURIComponent(t)):""}},{key:"isExtremeMode",value:function(){return"extreme"===this.editorMode}}])&&r(t.prototype,n),a&&r(t,a),e}();t.a=a},,function(e,t,n){"use strict";var r=n(33),a=n(36);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),o=r(n(1987)),c=r(n(37)),l=function(e,t){return i.createElement(c.default,Object.assign({},e,{ref:t,icon:o.default}))};l.displayName="UploadOutlined";var s=i.forwardRef(l);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"}},,function(e,t,n){"use strict";var r=n(544),a=n.n(r),i=n(0),o=n.n(i),c=n(2),l=n.n(c),s=n(7),u=n.n(s),d=n(68),f=n.n(d),p={scrollTop:function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},offset:function(e){if(!e.getClientRects().length)return{top:0,left:0};var t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}}},h=(n(1655),"undefined"!=typeof navigator?navigator.userAgent:""),m=/yuque-desktop\/[\d.]+/i.test(h);function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(e){var t=e.contents,n=void 0===t?[]:t,r=e.current,c=e.withHeader,l=e.offsetTop,s=e.enableProgressBar,d=o.a.useRef(null),h=v(Object(i.useState)([]),2),b=h[0],k=h[1],w=v(Object(i.useState)(-1),2),x=w[0],_=w[1],C=Object(i.useMemo)((function(){return function(e){for(var t=[],n=e.length-1;n>=0;n--){for(var r=!1,a=n-1;a>=0&&1!==e.depth;a--)if(e[a].depth<e[n].depth){var i={id:n,pid:a,title:e[n].html,key:e[n].id,data:e[n]};t.unshift(i),r=!0;break}if(!r){var o={id:n,pid:-1,title:e[n].html,key:e[n].id,data:e[n]};t.unshift(o)}}return t}(n)}),[n]);return Object(i.useEffect)((function(){var e,t=[],r=[],a=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=y(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}(n.keys());try{for(a.s();!(e=a.n()).done;){var i=e.value,o={collapsible:i!==n.length-1&&n[i+1].depth>n[i].depth,collapsed:!1,display:!0};t.push(o),o.collapsible&&r.push(i)}}catch(e){a.e(e)}finally{a.f()}k(t)}),[n]),Object(i.useEffect)((function(){if(b.length>0&&r<b.length)if(-1===r||b[r].display)_(r);else{for(var e=C[r].pid;!b[e].display;)e=C[e].pid;_(e)}else _(-1)}),[C,r,b]),Object(i.useEffect)((function(){return e.autoAdjustPosition&&r>0&&x&&function(e){var t=e.querySelector(".larkui-synopsis-item-active");if(t){var n=e.scrollHeight-e.clientHeight,r=e.clientHeight,a=0;t.offsetTop>r?(a=(a=t.offsetTop-r/2+t.clientHeight/2+16)>=n?n:a,e.scrollTop=a):t.offsetTop>e.clientHeight/2?(a=t.offsetTop+16-e.clientHeight/2+t.clientHeight/2,e.scrollTop=a):e.scrollTop=0}}(d.current),function(){}}),[r,e.autoAdjustPosition,e.height,x]),o.a.createElement("div",{className:"larkui-synopsis-wrap ".concat(e.className),style:e.style,ref:d,"data-testid":"larkui-synopsis"},o.a.createElement("ul",{className:"larkui-synopsis"},n.map((function(e,t){var r,i,d,h={};return m||(h.href="#".concat(encodeURIComponent(e.id))),b[t]&&b[t].display&&o.a.createElement("li",{className:u()({"larkui-synopsis-item":!0,"larkui-synopsis-item-active":x===t,"larkui-synopsis-progress-bar":s,"larkui-synopsis-progress-bar-highlighted":x===t&&s}),key:t},o.a.createElement("span",{className:u()((r={"larkui-synopsis-item-collapsible-link":b[t].collapsible,"larkui-synopsis-item-link":!b[t].collapsible},i="larkui-synopsis-item-link-".concat(e.depth),d=!0,i in r?Object.defineProperty(r,i,{value:d,enumerable:!0,configurable:!0,writable:!0}):r[i]=d,r))},b[t].collapsible&&o.a.createElement("a",{onClick:function(e){!function(e,t,r){var a=f()(b);a[t].collapsed=!a[t].collapsed;for(var i=t+1;i<n.length&&!(n[i].depth<=n[t].depth);i++){var o=C[i],c=a[i];if(!o||!c)break;if(o.pid!==t)if(r){for(var l=o.pid,s=!1;l!==t&&-1!==l;)b[l].collapsed&&(s=!0),l=C[l].pid;c.display=!s&&!b[o.pid].collapsed}else c.display=!1;else c.display=r}k(a)}(0,t,!b[t+1].display)}},o.a.createElement(a.a,{rotate:b[t].collapsed?270:0,style:{fontSize:"10px",margin:"5px",color:"#8c8c8c"}})),o.a.createElement("a",g({onClick:function(t){!function(e,t){if(e.preventDefault(),m){var n=document.getElementById(t);if(!n)return;n.scrollIntoView(!0)}else{var r=p.scrollTop(),a=encodeURIComponent(t);window.location.hash=a;var i=document.getElementById(a);if(!i)return;if(i.scrollIntoView(),c){var o=p.scrollTop();o<r&&window.scrollTo(0,o-60)}else if(l>0){var s=p.scrollTop();window.scrollTo(0,s-l)}}}(t,e.id)}},h,{title:e.text}),o.a.createElement("span",null,e.text))))}))))}k.defaultProps={offsetTop:0},k.propTypes={className:l.a.string,style:l.a.object,contents:l.a.array.isRequired,current:l.a.number,height:l.a.number,autoAdjustPosition:l.a.bool,withHeader:l.a.bool,offsetTop:l.a.number,enableProgressBar:l.a.bool};t.a=k},,function(e,t,n){"use strict";var r=n(21),a={epv:function(e){var t=e.type,n=e.id;r.b.logs.activity({type:t,action:"epv",id:n})}};t.a=a},,function(e,t,n){"use strict";var r,a=new Uint8Array(16);function i(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(a)}var o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var c=function(e){return"string"==typeof e&&o.test(e)},l=[],s=0;s<256;++s)l.push((s+256).toString(16).substr(1));var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase();if(!c(n))throw TypeError("Stringified UUID is invalid");return n};t.a=function(e,t,n){var r=(e=e||{}).random||(e.rng||i)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var a=0;a<16;++a)t[n+a]=r[a];return t}return u(r)}},function(e,t,n){"use strict";var r=n(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"},i=n(85),o=function(e,t){return r.createElement(i.a,Object.assign({},e,{ref:t,icon:a}))};o.displayName="DownOutlined";t.a=r.forwardRef(o)},function(e,t,n){"use strict";var r=n(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},i=n(85),o=function(e,t){return r.createElement(i.a,Object.assign({},e,{ref:t,icon:a}))};o.displayName="PlusOutlined";t.a=r.forwardRef(o)},function(e,t,n){"use strict";var r=n(33),a=n(36);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),o=r(n(1997)),c=r(n(37)),l=function(e,t){return i.createElement(c.default,Object.assign({},e,{ref:t,icon:o.default}))};l.displayName="FileOutlined";var s=i.forwardRef(l);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"}},function(e,t,n){"use strict";var r=n(33),a=n(36);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),o=r(n(1999)),c=r(n(37)),l=function(e,t){return i.createElement(c.default,Object.assign({},e,{ref:t,icon:o.default}))};l.displayName="MinusSquareOutlined";var s=i.forwardRef(l);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"minus-square",theme:"outlined"}},function(e,t,n){"use strict";var r=n(33),a=n(36);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),o=r(n(2001)),c=r(n(37)),l=function(e,t){return i.createElement(c.default,Object.assign({},e,{ref:t,icon:o.default}))};l.displayName="PlusSquareOutlined";var s=i.forwardRef(l);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"}},function(e,t,n){"use strict";var r=n(33),a=n(36);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),o=r(n(2003)),c=r(n(37)),l=function(e,t){return i.createElement(c.default,Object.assign({},e,{ref:t,icon:o.default}))};l.displayName="FolderOpenOutlined";var s=i.forwardRef(l);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"}},function(e,t,n){"use strict";var r=n(33),a=n(36);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),o=r(n(2005)),c=r(n(37)),l=function(e,t){return i.createElement(c.default,Object.assign({},e,{ref:t,icon:o.default}))};l.displayName="FolderOutlined";var s=i.forwardRef(l);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"}},function(e,t,n){"use strict";var r=n(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},i=n(85),o=function(e,t){return r.createElement(i.a,Object.assign({},e,{ref:t,icon:a}))};o.displayName="SearchOutlined";t.a=r.forwardRef(o)},function(e,t,n){"use strict";n(67);var r=n(24),a=(n(53),n(19)),i=n(0),o=n.n(i),c=n(50),l=n(2),s=n.n(l),u=n(7),d=n.n(u),f=n(312),p=n(1836),h=n(546),m="Thumbnail-module_thumbnail_2qjeh";function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y=function(e){var t=e.item,n=void 0===t?{}:t,r=e.size,a=void 0===r?30:r,c=n.filekey,l=n.ext,s=g(Object(i.useState)(!0),2),u=s[0],d=s[1],f="".concat(window.location.protocol,"//").concat(window.location.host,"/preview/").concat(c,"?redirect=true");"svg"!==l&&(f=Object(h.a)(f,{height:2*a,width:2*a,fill:!0}));var v={backgroundImage:"url(".concat(f,")"),width:"".concat(a,"px"),height:"".concat(a,"px")};return Object(i.useEffect)((function(){var e=new Image;e.src=f,e.onerror=function(){d(!1)}}),[f]),u?o.a.createElement("div",{className:m,style:v,"data-testid":"test-thumbnail"}):o.a.createElement(p.a.Icon,{item:n,size:a})};y.propTypes={item:s.a.object,size:s.a.number};var b=y,k="ResourceItemName-module_name_3N8I5",w="ResourceItemName-module_mobile_1mHzt",x="ResourceItemName-module_nameText_334Dx",_="ResourceItemName-module_editing_RuLaS";function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(e){var t=e.book,n=e.item,l=e.isLink,s=void 0===l||l,u=e.isInBook,h=void 0===u||u,m=e.linkTarget,g=void 0===m?"_self":m,v=e.sortParmas,y=void 0===v?{}:v,E=e.isMobile,O=e.size,S=void 0===O?30:O,R=Object(i.useRef)(null);function D(t){if(!t.target.value)return a.a.error(__("名称不能为空")),void R.current.focus();e.onUpdate(t,n)}var A,T=Object(f.f)(n)&&n.filekey&&!n.filekey.endsWith("?x-oss-process=image/auto-orient,1")?o.a.createElement(b,{item:n,size:S}):o.a.createElement(p.a.Icon,{item:n,size:S});s&&(A="/".concat(t.namespace,"/").concat(n.id),y.sorter?(A+="?sorter=".concat(y.sorter),y.order&&(A+="&order=".concat(y.order))):y.order&&(A+="?order=".concat(y.order)));var P=d()(k,C({},w,E)),j=d()(x,C({},w,E)),M="folder"===n.type?"":".".concat(n.ext);return o.a.createElement(o.a.Fragment,null,n.editing?o.a.createElement("span",{className:_},T,o.a.createElement(r.a,{"data-testid":"resource-item-name-input",defaultValue:n.filename,onPressEnter:D,onKeyUp:function(e){"Escape"!==e.key&&27!==e.keyCode||D(e)},onBlur:D,onFocus:function(e){n.editing&&e.target.select()},autoFocus:!0,ref:R})):o.a.createElement("span",{className:P},s?o.a.createElement(o.a.Fragment,null,"folder"===n.type?o.a.createElement(o.a.Fragment,null,h?o.a.createElement(c.Link,{title:n.filename,to:"/g/".concat(t.namespace,"/folder/").concat(n.id),"data-testid":"resource-item-name-folder-router"},T,o.a.createElement("span",{className:j},n.filename,window.h5?M:"")):o.a.createElement("a",{title:n.filename,href:"/g/".concat(t.namespace,"/folder/").concat(n.id),target:g,"data-testid":"resource-item-name-folder-link"},T,o.a.createElement("span",{className:j},n.filename,window.h5?M:""))):o.a.createElement("a",{title:n.filename,href:A,target:g,"data-testid":"resource-item-name-file-link"},T,o.a.createElement("span",{className:j},n.filename,window.h5?M:""))):o.a.createElement("span",{title:n.filename,"data-testid":"resource-item-name-static"},T,o.a.createElement("span",{className:j},n.filename,window.h5?M:""))))};E.propTypes={book:s.a.object,item:s.a.object.isRequired,onUpdate:s.a.func,isLink:s.a.bool,isInBook:s.a.bool,linkTarget:s.a.oneOf(["_blank","_self"]),sortParmas:s.a.object,isMobile:s.a.bool,size:s.a.number};t.a=Object(c.withRouter)(E)},function(e,t,n){"use strict";n(45);var r=n(16),a=n(0),i=n.n(a),o=n(69),c=n(2),l=n.n(c),s=function(e){var t=e.book,n=e.folderId;return i.a.createElement(i.a.Fragment,null,i.a.createElement(r.a,{onClick:function(){var r={uid:"folder-".concat(Date.now()),type:"folder",filename:__("新建文件夹"),book_id:t.id,parent_id:n};e.onCreate(r)},"data-testid":"btn-create-folder"},__("新建文件夹")))};s.propTypes={book:l.a.object.isRequired,folderId:l.a.number,onCreate:l.a.func.isRequired},t.a=Object(o.c)((function(e){return{page:e.page}}))(s)},,function(e,t,n){"use strict";n(74);var r=n(40),a=(n(45),n(16)),i=(n(53),n(19)),o=n(0),c=n.n(o),l=n(2),s=n.n(l),u=n(890),d=n(309),f=n(891),p=n(1838);n(1833);function h(e,t,n,r,a,i,o){try{var c=e[i](o),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e){var t=m(Object(o.useState)({}),2),n=t[0],l=t[1],s=m(Object(o.useState)(e.doc.title),2),u=s[0],g=s[1],v=m(Object(o.useState)(-1),2),y=v[0],b=v[1];Object(o.useEffect)((function(){l(new f.a(e.templateProxy,e.docProxy))}),[]);var k=function(){var t,r=(t=regeneratorRuntime.mark((function t(){var r,a,o,l,s,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.book,a=e.doc,o=e.docletType,l=e.onOpenTemplateSelector,y===d.TYPE.BOOK?(s=r.id,f=d.TARGET_TYPE.BOOK):y===d.TYPE.PERSONAL?(s=window.appData.me.id,f=d.TARGET_TYPE.USER):(s=r.user_id,f=d.TARGET_TYPE.USER),n.createTemplate(s,f,y,o,u,a.id).then((function(){var t=c.a.createElement("span",null,__("模板已创建")," ",c.a.createElement("a",{onClick:l},__("查看全部模板")));i.a.success(t),e.onCancel()})).catch((function(e){console.error(e)}));case 3:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function o(e){h(i,r,a,o,c,"next",e)}function c(e){h(i,r,a,o,c,"throw",e)}o(void 0)}))});return function(){return r.apply(this,arguments)}}(),w=e.group,x=e.organization,_=e.isDesktop;return c.a.createElement(r.a,{className:"modal-without-padding",visible:e.visible,style:{top:78},width:"368px",onCancel:e.onCancel,title:e.modalTitle,footer:c.a.createElement(c.a.Fragment,null,c.a.createElement(a.a,{onClick:e.onCancel},__("取消")),c.a.createElement(a.a,{type:"primary",onClick:k},__("确定")))},c.a.createElement(p.a,{newTemplateName:u,onSetNewTemplateName:g,onSetSelectedScope:b,group:w,organization:x,isDesktop:_}))}v.propTypes={visible:s.a.bool,onCancel:s.a.func,modalTitle:s.a.string,docletType:s.a.string,doc:s.a.object,book:s.a.object,group:s.a.object,organization:s.a.object,isDesktop:s.a.bool,onOpenTemplateSelector:s.a.func,templateProxy:s.a.object,docProxy:s.a.object},t.a=Object(u.b)(v,!0)},function(e,t,n){"use strict";var r=n(54),a=n.n(r),i=n(81),o=n.n(i),c=n(82),l=n.n(c),s=n(127),u=n(886),d=n(2649);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=o()("common:biz:doc.editor.base"),k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(o,e);var t,n,r,i=m(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),t=t||{},(n=i.call(this)).doc=e,n.docDomain=t.docDomain||s.DOC_DOMAIN.DOC,n.baseVersion=e.draft_version,n.storage={},n.cacheKeys=n._getCacheKeys(),n}return t=o,r=[{key:"isDefaultTitle",value:function(e){return e===__("无标题")||"无标题"===e||"Untitled"===e}}],(n=[{key:"hasNewVersion",value:function(e){return b("check new version",{base:this.baseVersion,lock:e}),this.baseVersion<e.draft_version}},{key:"isContentChanged",value:function(e){e=e.trim();var t="<cursor />";return d.a.adaptBodyToContent(this.doc).replace(t,"")!==e.replace(t,"")}},{key:"resetDoc",value:function(e){b("onSaved, version:",this.baseVersion),this.doc=Object.assign({},this.doc,e),this.baseVersion=e.draft_version,this.cacheKeys=this._getCacheKeys()}},{key:"getInitialDocument",value:function(){return this.getLatestDocument()}},{key:"getLatestDocument",value:function(){var e=d.a.adaptDocToDocument(this.doc),t=this._getCachedDocument();return t?(this.cacheOutdated=!this._needUseCache(t,e),this.changed=!this.cacheOutdated,this.cacheOutdated?e:t):(b("not found cached content, user server version"),e)}},{key:"extractSummaryRaw",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.maxCount,r=t.maxHtmlTextLength,i=e.match(/^\s*<([^>]+)>/),o="";i&&(i[1].startsWith("!")||i[1].startsWith("meta"));){var c=i[0].length;o+=i[0],i=(e=e.substr(c)).match(/^\s*<([^>]+)>/)}var l=(new DOMParser).parseFromString(e,"text/html"),u=l.body,d=s.SUMMARY_NODES_COUNT,f=document.body.offsetHeight;if(f){var p=150,h=100,m=25,g=500;d=Math.min(d,Math.round(Math.max(g,f-p+h)/m))}for(var v=n||d,y=o,b=0,k=0;k<u.childNodes.length;k++){var w=u.childNodes[k];if(k>=v)break;if(r&&y.length>=r)break;var x="CARD"===w.nodeName&&"bookmarklink"===w.getAttribute("name");if(x){var _=w.getAttribute("value");if(_)try{var C=JSON.parse(decodeURIComponent(_.slice(5))),E=a()(C,"detail.icon")||"",O=a()(C,"detail.image")||"";E.startsWith("data:")&&(C.detail.icon=""),O.startsWith("data:")&&(C.detail.image=""),w.setAttribute("value","data:".concat(JSON.stringify(C)))}catch(e){}}y+=w.outerHTML,b=k+1}var S=b===u.childNodes.length,R=u.childNodes.length-b>s.BIG_DOCUMENT_BLOCK_COUNT;this.isBigDocument=R;var D=!!u.querySelector('card[name="image"]'),A=!!u.querySelector('card[name="checkbox"]'),T=!!u.querySelector('card[name="bookmarklink"]'),P=!!u.querySelector('card[name="file"]');return{extractCount:b,html:y,isFull:S,isBigDocument:R,hasImage:D,hasTodo:A,hasBookmark:T,hasAttachment:P}}},{key:"extractSummary",value:function(){var e=this.getLatestDocument(),t=e.value;if(e.format!==u.FORMAT.LAKE)return t;var n=this.extractSummaryRaw(t);return n&&n.html}},{key:"_needUseCache",value:function(e,t){return e.draft_version===t.draft_version||e.base_timestamp===t.base_timestamp}},{key:"saveToCache",value:function(e){if(!e.format)return b("save to cache, format not supplied: ignore"),!1;var t=this.doc.content_updated_at;e.draft_version||(e.draft_version=this.doc.draft_version),b("save to cache:",{doc_draft_version:this.doc.draft_version,change_draft_version:e.draft_version});var n=d.a.adaptChangeToCacheData(e,t);return this.changed=!0,this.storage.set(this.cacheKeys.changes,n)}},{key:"saveOutdatedCacheToServer",value:function(e,t){if(e){var n=d.a.adapterDocumentContent(e);if(o.CACHE_CONTENT_SAVED[this.doc.id]!==n){o.CACHE_CONTENT_SAVED[this.doc.id]=n;var r={doc_id:this.doc.id,format:e.format,content:n,base_timestamp:e.base_timestamp,draft_version:e.draft_version,origin:s.DOC_VERSION.ORIGIN.cache,doc_type:this.docDomain};this.doSaveOutdatedDocVersion(r);var a=!this.isContentChanged(n);return(this.cacheOutdated&&!a||t)&&this.emit("cacheSavedToServer"),!0}}}},{key:"doSaveOutdatedDocVersion",value:function(){}},{key:"clearCachedContent",value:function(){b("clear cache"),this.changed=!1,this.storage.remove(this.cacheKeys.changes)}},{key:"_getCacheKeys",value:function(){var e="autosave/docs/".concat(this.doc.id),t={changes:"".concat(e,"/changes"),corrupted:"".concat(e,"/corrupted"),outdated:"".concat(e,"/outdated")};return this.doc.format===u.FORMAT.LAKE&&(t.changes="autosave/docs/".concat(this.doc.id,"/lake")),t}},{key:"_getCachedDocument",value:function(){var e=this.cacheKeys.changes,t=this.storage.get(e),n=d.a.adaptCacheDataToDocument(t,this.doc.format);return n&&n.value?n:(b("empty cache or invalid cached data: ",n),null)}},{key:"getDocument",value:function(){return d.a.adaptDocToDocument(this.doc)}},{key:"saveCacheToServer",value:function(){try{var e=this._getCachedDocument();if(!e)return;this.saveOutdatedCacheToServer(e)}catch(e){}}},{key:"saveDocToServer",value:function(){try{var e=this.getLatestDocument();this.saveOutdatedCacheToServer(e,!0)}catch(e){}}},{key:"isContentPublished",value:function(){return this.doc.published_at&&this.doc.content_updated_at===this.doc.published_at&&!this.changed}}])&&p(t.prototype,n),r&&p(t,r),o}(l.a);y(k,"SAVE_TYPE",s.SAVE_TYPE),y(k,"MODE",{NORMAL:"normal",OT:"ot"}),y(k,"CACHE_CONTENT_SAVED",{}),t.a=k},function(e,t,n){"use strict";var r=n(81),a=n.n(r),i=n(82),o=n.n(i),c=n(79),l=n.n(c);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var a=g(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=a()("pagestatus"),b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(i,e);var t,n,r,a=p(i);function i(){var e;return u(this,i),v(m(e=a.call(this)),"onVisibilityChange",l()((function(){y("visibility change to: ",document.visibilityState),"hidden"===document.visibilityState?e.onPageHide():"visible"===document.visibilityState&&(y("show"),e.emit("show"))}),16)),v(m(e),"registerCloseChecker",(function(t){e.closeChecker.push(t)})),v(m(e),"closeAbleCheck",(function(){var t=m(e).closeChecker;for(var n in t)if(!t[n]())return!1;return!0})),v(m(e),"onBeforeunload",(function(t){if(e.isActive=!1,y("close"),e.emit("close"),!e.closeAbleCheck())return t.returnValue="确定要离开么？","确定要离开么？"})),v(m(e),"onBlur",(function(){e.isActive=!1,y("blur"),e.emit("blur")})),v(m(e),"onPageHide",(function(){e.isActive=!1,y("hide"),e.emit("hide")})),v(m(e),"onActive",(function(){e.startIdle(),e.isActive||(y("active"),e.isActive=!0,e.emit("active"))})),e.isActive=!0,e._idle=60,e.init(),e.closeChecker=[],e}return t=i,(n=[{key:"init",value:function(){this.bindEvents()}},{key:"destroy",value:function(){this.unbindEvents()}},{key:"bindEvents",value:function(){var e=this;window.addEventListener("beforeunload",this.onBeforeunload),window.addEventListener("visibilitychange",this.onVisibilityChange),window.addEventListener("pagehide",this.onPageHide),window.addEventListener("blur",this.onBlur),["focus","mousemove","click","touchStart"].forEach((function(t){window.addEventListener(t,e.onActive)})),this.startIdle()}},{key:"unbindEvents",value:function(){var e=this;window.removeEventListener("beforeunload",this.onBeforeunload),window.removeEventListener("visibilitychange",this.onVisibilityChange),window.removeEventListener("pagehide",this.onPageHide),window.removeEventListener("blur",this.onBlur),["focus","mousemove","click","touchStart"].forEach((function(t){window.removeEventListener(t,e.onActive)})),this.closeChecker=[]}},{key:"setIdle",value:function(e){isNaN(e)||(this._idle=e)}},{key:"startIdle",value:function(){var e=this;this._timer&&clearTimeout(this._timer),this._timer=setTimeout((function(){e.isActive=!1,y("idle"),e.emit("idle")}),1e3*this._idle)}}])&&d(t.prototype,n),r&&d(t,r),i}(o.a);t.a=b},function(e,t,n){"use strict";var r=n(82),a=n.n(r),i=n(343),o=n(81),c=n.n(o),l=n(127),s=n(261),u=n(886),d=n(287),f=n.n(d);function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p(this,e),this.timing={Init:(new Date).getTime(),EditorLoaded:-1,DocLoadStart:-1,DocLoadEnd:-1,DocRendered:-1,LockReady:-1,CollabReady:-1},this.context=t,this.scene=t.scene,this.MaxRenderTime=5e3,this.maxTimeLimit=6e4,this.autoReportTime=12e4,this._records=[],this.maxRecordCount=1e3,this.minRecordCount=150,this.heartbeatInterval=2e3,this.minBlockTime=300,this.perfReported=!1,this.smoothReported=!1,this.startAutoReport()}var t,n,r;return t=e,(n=[{key:"getDocFormat",value:function(){if(this.context.doc&&this.context.doc.format)return this.context.doc.format}},{key:"getEditorMode",value:function(){return this.context.defaultMode}},{key:"getEditorScene",value:function(){return this.context.scene}},{key:"marks",value:function(e){this.timing[e]=(new Date).getTime()}},{key:"has",value:function(e){return-1!==this.timing[e]}},{key:"startAutoReport",value:function(){var e=this;setTimeout((function(){e.reportPerf()}),this.autoReportTime)}},{key:"stats",value:function(){var e={m1:this.measure("Init","EditorLoaded"),m2:this.measure("DocLoadStart","DocLoadEnd"),m3:this.measure("Init","DocRendered")};return this.has("LockReady")?(e.m4=this.measure("Init","LockReady"),e.d1="lock"):this.has("CollabReady")&&(e.m4=this.measure("Init","CollabReady"),e.d1="collab"),e.d2=this.getEditorScene(),e}},{key:"editReady",value:function(){return this.has("EditorLoaded")&&this.has("DocLoadStart")&&this.has("DocLoadEnd")&&this.has("DocRendered")&&(this.has("LockReady")||this.has("CollabReady"))}},{key:"reportPerf",value:function(){if(!this.perfReported&&(this.perfReported=!0,this.editReady())){var e=this.stats(),t=this.getDocFormat();s.a.logEditorPerf(t,e),e.m3>this.MaxRenderTime&&s.a.logEditWorkflow({code:"RENDER_SLOW",message:"渲染耗时 ".concat(e.m3," 毫秒")})}}},{key:"reset",value:function(){for(var e in this.timing)this.timing[e]=-1}},{key:"measure",value:function(e,t){return this.timing[e]&&this.timing[t]?-1===this.timing[e]||-1===this.timing[t]?-1:Math.max(0,Math.min(this.maxTimeLimit,this.timing[t]-this.timing[e])):-1}},{key:"startHeartbeat",value:function(){var e=this;this.smoothReported||(this.clearHeartbeat(),this.pingTime=+new Date,this.heartbeat=setTimeout((function(){e.pong()}),this.heartbeatInterval))}},{key:"clearHeartbeat",value:function(){this.heartbeat&&clearTimeout(this.heartbeat)}},{key:"pong",value:function(){if(!this.inActive){var e=new Date-this.pingTime-this.heartbeatInterval;e<this.minBlockTime?this._records.push(0):this._records.push(Math.ceil(e/1e3))}this._records.length>this.maxRecordCount?this.reportSmooth():this.startHeartbeat()}},{key:"pause",value:function(){this.inActive=!0}},{key:"resume",value:function(){this.inActive=!1}},{key:"reportSmooth",value:function(){if(console.log(this._records.join("_")),!this.smoothReported){var e=this._records.length;if(!(e<this.minRecordCount)){var t=0;this._records.forEach((function(e){e&&t++}));var n=Math.round(100*(e-t)/e),r=this.getDocFormat();s.a.logEditorSmooth(r,{d1:this.getEditorMode(),d2:this.getEditorScene(),m1:n,m2:2*e,c2:this._records.join("_")}),this._records=[],this.smoothReported=!0}}}}])&&h(t.prototype,n),r&&h(t,r),e}(),g=n(524);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var a=_(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?x(e):t}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=c()("editor:doc:lockManager"),O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(i,e);var t,n,r,a=k(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),C(x(n=a.call(this)),"lazyPollingData",(function(){n.lazyTimer&&clearTimeout(n.lazyTimer),n.lazyTimer=setTimeout((function(){n.pollingData()}),1e3)})),C(x(n),"pollingData",(function(){n.stopPollingData(),n.paused?E("polling status, do not need, ignore"):(n.lock(),n.pollingTimer=setTimeout(n.pollingData,n.pollingInterval))})),C(x(n),"unLock",(function(){if(E("unLock"),n.stopPollingData(),!n.locked)return Promise.resolve();if("function"!=typeof navigator.sendBeacon||n.workflow.isDesktopApp)return n.locked=!1,n.workflow.doUnlock({id:n.doc.id,uuid:n.uuid});var e=new URLSearchParams;return e.set("ctoken",Object(g.a)(window)),e.set("uuid",n.uuid),navigator.sendBeacon("/api/".concat(n.workflow.docDomain.toLowerCase(),"s/").concat(n.doc.id,"/unlock?").concat(e.toString())),n.locked=!1,Promise.resolve()})),C(x(n),"checkLakeEditConflict",(function(e){E("[check conflict]lock: %o",e);var t,r=x(n).me,a=e.locker,i=e.collab_members;(void 0===i?[]:i).length>0&&(E("[check conflict]doc is editing in ot mode"),t=l.ERROR_CODE.LOCKED_BY_COLLAB),e.draft_version>n.doc.draft_version&&(E("[check conflict]doc content has new version"),t=l.ERROR_CODE.LOCKED_BY_VERSIONCONFLICT),!t&&a&&(a.id===r.id?a.force&&(E("[check conflict]doc is locked by other tab and force update"),t=l.ERROR_CODE.LOCKED_BY_SELF_FORCE):(E("[check conflict]doc is locked by other one"),t=l.ERROR_CODE.LOCKED_BY_OTHER)),E("[check conflict]result",{code:t,lock:e}),t&&(n.emit("error",{code:t,lock:e}),n.paused=!0)})),n.doc=e,n.workflow=t,n.me=t.me,n.pollingTimer=null,n.pollingInterval=59e3,n.locking=!1,n.locked=!1,n.paused=!1,n.retryCount=0,n.uuid=f()(10),n}return t=i,(n=[{key:"start",value:function(){E("lock start"),this.paused=!1,this.pollingData()}},{key:"pause",value:function(){this.paused=!0}},{key:"resume",value:function(){this.paused=!1,this.lazyPollingData()}},{key:"resetDoc",value:function(e){this.doc=e}},{key:"lock",value:function(){var e=this;if(E("lock doc, is locking: ",this.locking),!this.locking&&!this.paused){this.locking=!0;var t=this.doc.id,n=this.uuid;return this.workflow.doLock({id:t,uuid:n}).then((function(r){if(!e.doc)return e.workflow.doUnlock({id:t,uuid:n});e.locking=!1,e.locked=!r.code,e.checkLakeEditConflict(r),e.locked&&e.emit("ready")})).catch((function(n){e.doc&&t===e.doc.id&&(e.locked=!1,e.locking=!1,e.emit("error",{code:l.ERROR_CODE.LOCK_FAILED,message:n.message}),e.lazyRetryLock())}))}}},{key:"lazyRetryLock",value:function(){var e=this;this.lazyRetryTimer||(this.retryCount++,this.clearLazyRetryTimer(),this.lazyRetryTimer=setTimeout((function(){e.pollingData(),delete e.lazyRetryTimer}),this.retryCount*this.pollingInterval))}},{key:"clearLazyRetryTimer",value:function(){this.lazyRetryTimer&&(clearTimeout(this.lazyRetryTimer),delete this.lazyRetryTimer)}},{key:"stopPollingData",value:function(){this.pollingTimer&&(E("stop polling"),clearTimeout(this.pollingTimer))}},{key:"destroy",value:function(){this.unLock(),this.stopPollingData(),this.lazyTimer&&clearTimeout(this.lazyTimer),this.clearLazyRetryTimer(),delete this.doc}}])&&y(t.prototype,n),r&&y(t,r),i}(a.a);function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var D=function(){function e(){S(this,e),this.pageId=window.appData.traceId,this.actions=[]}var t,n,r;return t=e,(n=[{key:"getDate",value:function(){var e=new Date;return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate())}},{key:"getTime",value:function(){var e=new Date;return"".concat(e.getHours(),":").concat(e.getMinutes(),":").concat(e.getSeconds())}},{key:"pushDate",value:function(){var e=this.getDate();e!==this.date&&(this.date=e,this.actions.push("[".concat(e,"]")))}},{key:"log",value:function(e,t){this.pushDate(),this.actions.push("".concat(this.getTime()," ").concat(e," ").concat(void 0===t?"":t))}},{key:"report",value:function(){var e={c2:this.actions.join("\n")};s.a.logEditAction(e),this.actions=[]}}])&&R(t.prototype,n),r&&R(t,r),e}();function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){V(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n,r,a,i,o){try{var c=e[i](o),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function M(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){j(i,r,a,o,c,"next",e)}function c(e){j(i,r,a,o,c,"throw",e)}o(void 0)}))}}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=F(e);if(t){var a=F(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return z(this,n)}}function z(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?B(e):t}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var U=c()("editor:doc:wf"),q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(k,e);var t,n,r,a,o,c,d,p,h,g,v,y,b=I(k);function k(e){var t,n=e.doc,r=void 0===n?{}:n,a=e.mode,o=e.scene;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,k),V(B(t=b.call(this)),"clear",M(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.doc.id){e.next=2;break}return e.abrupt("return",!0);case 2:if(t._clearAble()){e.next=4;break}return e.abrupt("return",!1);case 4:return t.clearing=!0,t.onBeforeReset(),t._clearLazyPublishTimer(),t.clearError(),t._clearMessage(),t._clearLazyDisconnect(),t._clearLazyStartTimer(),e.next=13,t.save(l.SAVE_TYPE.AUTO);case 13:return t.transmitDocStatus(l.DOC_STATUS.loaded),t.editable=!1,t.docLoaded={},t.saving=!1,t.publishing=!1,t.docRendered=!1,t.initialDocument=null,t.saveId=null,t.lockManager&&(t.lockManager.destroy(),t.lockManager=null),t.collabManager=null,t.collabDisabled=!1,delete t.editorBiz,t.onReset(),t.clearing=!1,t.freeCallback=null,e.abrupt("return",!0);case 29:case"end":return e.stop()}}),e)})))),V(B(t),"onEditorLoaded",(function(e){var n=e.engine;t.engine=n,window.__engine=n.getOriginEngine(),t.engine.addUserChangedEvent((function(){t.ignoreChange()||t.transmitDocStatus(l.DOC_STATUS.changed)})),t._bindEvents(),t.performance.marks("EditorLoaded")})),V(B(t),"_bindEvents",(function(){t.eventBinded||(t.doBindEvents(),t.eventBinded=!0)})),V(B(t),"waitForFree",(function(e){t._clearAble()?(t.freeCallback=null,e()):(t.emit(l.WORKFLOW_EVENT.message,{type:l.MESSAGE.BUZY,data:{docStatus:t.docStatus}}),t.freeCallback=e)})),V(B(t),"setDoc",(function(e){return!!t._clearAble()&&(t.docSetTime=+new Date,t.docSetUid=f()(6),t._updateDoc(e),t._renderSummary(),!0)})),V(B(t),"onPageInactive",(function(){t.userAction.log("page_inactive"),t.save(l.SAVE_TYPE.AUTO),t.currentMode===l.EDIT_MODE.LOCK&&t.lockManager&&t.lockManager.unLock()})),V(B(t),"onPageLeave",(function(){t.userAction.log("page_leave"),t.onPageInactive(),t._lazyDisconnect()})),V(B(t),"onPageActive",(function(){t.userAction.log("page_active"),t._clearLazyDisconnect(),U("page _onPageActive",t.currentMode,t.docStatus),t.currentMode===l.EDIT_MODE.LOCK&&t.lockManager&&!t.lockManager.locked&&"saving"!==t.docStatus&&t.lockManager.start(),t.currentMode!==l.EDIT_MODE.COLLAB||t.collabDisabled||!t.collabManager||t.collabManager.isAlive()||t.start()})),V(B(t),"_lazyDisconnect",(function(){t._clearLazyDisconnect(),t.disconnectTimer=setTimeout((function(){t.currentMode===l.EDIT_MODE.COLLAB&&t.collabManager&&t.collabManager.isAlive()&&(t.collabManager.disconnect(),t.userAction.log("collab_disconnect"),t.setEditable(!1))}),12e5)})),V(B(t),"_clearLazyDisconnect",(function(){t.disconnectTimer&&clearTimeout(t.disconnectTimer)})),V(B(t),"start",M(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.userAction.log("start"),t._checkStartAble()){e.next=4;break}return t.lazyStart(),e.abrupt("return");case 4:return t._beforeStart(),t.performance.marks("DocLoadStart"),e.next=8,t.loadDoc();case 8:if((n=e.sent)&&n.id===t.doc.id){e.next=11;break}return e.abrupt("return");case 11:t.performance.marks("DocLoadEnd"),t._updateDoc(n),t.editorBiz.saveCacheToServer(),t.initEditor(),t.performance.marks("DocRendered"),(r=t.currentMode||t.useDefaultMode())===l.EDIT_MODE.LOCK?t.startLockMode():r===l.EDIT_MODE.COLLAB&&t.startCollabMode(),t.onStarted();case 19:case"end":return e.stop()}}),e)})))),V(B(t),"useDefaultMode",(function(){return t.currentMode=t.defaultMode,t.currentMode})),V(B(t),"useMode",(function(e){return t.userAction.log("use_mode",e),delete t.currentMode,e!==l.EDIT_MODE.COLLAB||t.collabDisabled?e===l.EDIT_MODE.LOCK&&(t.currentMode=e,!0):(t.currentMode=e,!0)})),V(B(t),"setContent",(function(e){t.engine.setContent(e)})),V(B(t),"isReady",(function(){return!!t.engine})),V(B(t),"onMiniEditorExpandChange",(function(e){t.emit(l.WORKFLOW_EVENT.miniExpand,e)})),V(B(t),"onSaveTitle",(function(e){t.doc.title=e,t.emit(l.WORKFLOW_EVENT.saveTitle,e)})),V(B(t),"onContentChange",(function(e){if(!t.ignoreChange())return e=e||t.engine.getValue(),t.cache({format:t.doc.format,value:e}),t._changeTime=+new Date,t.transmitDocStatus(l.DOC_STATUS.changed),t.emit(l.WORKFLOW_EVENT.change,e),!0})),V(B(t),"initEditor",(function(){U("document loaded, use document",t.initialDocument),t.engine.getPureContent()!==t.initialDocument.value&&(t.engine.init({content:t.initialDocument.value}),t.userAction.log("editor_render",t.initialDocument.draft_version)),t.docRendered=!0,t.engine.readonly(!1),t.startIgnoreChangeTimer()})),V(B(t),"save",function(){var e=M(regeneratorRuntime.mark((function e(n){var r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.userAction.log("save",n),r=B(t),a=r.editable,U("on save, context: ",{editable:a,type:n}),t.checkSavable(n)){e.next=7;break}return t.userAction.log("unable_save"),e.abrupt("return",t.throwWhenPublish(n));case 7:if(!t.ignoreSave(n)){e.next=12;break}return U("on save, user not change content, ignore"),n===l.SAVE_TYPE.USER_SAVE&&(i.b.destroy(),i.b.success(__("文档已保存"))),t.userAction.log("ignore_save",t.docStatus),e.abrupt("return");case 12:return t.transmitDocStatus(l.DOC_STATUS.saving),t.saving=!0,t.saveId=f()(6),e.prev=15,e.next=18,t.engine.onBeforeSave();case 18:U("save:before done, do save to server"),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(15),U("save:before has exception: ",e.t0),t.saving=!1,t.throwWhenPublish(n,new Error(__("内容存在未完成的上传或其他异常，请检查后重试")));case 26:return t.pauseLock(),e.prev=27,e.next=30,t.doSaveDoc(n,t.saveId);case 30:if(o=e.sent,t.saving=!1,o&&o.id===t.doc.id){e.next=34;break}throw new Error("");case 34:return t.saveSuccess(n,o),e.abrupt("return",o);case 38:e.prev=38,e.t1=e.catch(27),t.saving=!1,t.throwWhenPublish(n,e.t1),t.saveFailed(n,e.t1);case 43:case"end":return e.stop()}}),e,null,[[15,21],[27,38]])})));return function(t){return e.apply(this,arguments)}}()),V(B(t),"publish",function(){var e=M(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.userAction.log("publish"),U("publish:",n),!t._checkBuzy()){e.next=4;break}return e.abrupt("return");case 4:if(!t.doc.local){e.next=7;break}return t._lazyPublish(n),e.abrupt("return");case 7:return e.prev=7,t.publishing=!0,e.next=11,t.save(l.SAVE_TYPE.USER_PUBLISH);case 11:return r=e.sent,t.transmitDocStatus(l.DOC_STATUS.publishing),e.next=15,t.doPublishDoc(n);case 15:return t.publishing=!1,e.next=18,t.publishSuccess(r);case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(7),t.publishing=!1,t.publishFailed(e.t0);case 24:case"end":return e.stop()}}),e,null,[[7,20]])})));return function(t){return e.apply(this,arguments)}}()),V(B(t),"_lazyPublish",(function(e){t._clearLazyPublishTimer(),t.lazyPublishTimer=setTimeout((function(){t.publish(e)}),200)})),V(B(t),"_clearLazyPublishTimer",(function(){t.lazyPublishTimer&&clearTimeout(t.lazyPublishTimer)})),V(B(t),"saveDocTheme",function(){var e=M(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.saveEditorMeta({isDraft:!0,themeMetas:[n]});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),V(B(t),"inferNotify",(function(){try{if(t.doc.format!==u.FORMAT.LAKE)return!1;var e=t.doc.word_count,n=t.getWordCount();return U("infer_notify","".concat(e,":").concat(n)),n-e>300}catch(e){return!1}})),V(B(t),"getWordCount",(function(e){return t.engine.getWordCount(e)})),V(B(t),"getSummary",(function(e){t.engine.getSummary(e)})),V(B(t),"isVersionConflict",(function(e){return t.editorBiz.hasNewVersion(e)})),V(B(t),"isEmptyDoc",(function(){return!!t.isDefaultTitle(t.doc.title)&&t.engine.isEmpty()})),V(B(t),"isOnlyOneEditSession",(function(){return t.currentMode===l.EDIT_MODE.LOCK||t.collabManager&&t.collabManager.isOnlyOneCollabSession()})),V(B(t),"revert",(function(e){t.userAction.log("revert_doc"),U("[onRevert]version:",e),t.editorBiz.saveCacheToServer(),t.engine.setContent(e.content),t.transmitDocStatus(l.DOC_STATUS.changed)})),V(B(t),"reset",(function(e){t.engine.reset(e)})),V(B(t),"doSaveDoc",function(){var e=M(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),V(B(t),"doIgnoreSave",(function(){return!1})),V(B(t),"doPublishDoc",function(){var e=M(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.doc=P({},r),t.scene=o||l.EDIT_SCENE.WEB,t.defaultMode=a||l.EDIT_MODE.LOCK,t.engine=null,t.editorBiz=null,t.lockManager=null,t.collabManager=null,t.editable=!1,t.docLoaded={},t.saving=!1,t.initialDocument=null,t.performance=new m(B(t)),t.userAction=new D,t}return t=k,(n=[{key:"setTargetDocId",value:function(e){this.targetDocId=e}},{key:"_checkFreeCallback",value:function(){this.freeCallback&&this._clearAble()&&(this.freeCallback(),this.freeCallback=null)}},{key:"_checkBuzy",value:function(){return!!this._isBuzy()&&(this.emit(l.WORKFLOW_EVENT.message,{type:l.MESSAGE.BUZY,data:{docStatus:this.docStatus}}),!0)}},{key:"_renderSummary",value:function(){try{this.setContent(this.editorBiz.extractSummary()),this.engine.readonly(!0),this.editorBiz.isBigDocument&&this.emit(l.WORKFLOW_EVENT.message,{type:l.MESSAGE.RENDER_BIG_DOCUMENT})}catch(e){}}},{key:"_checkStartAble",value:function(){return!this._isBuzy()&&this.startAble()}},{key:"_isBuzy",value:function(){return!!([l.DOC_STATUS.saving,l.DOC_STATUS.publishing,l.DOC_STATUS.loading].includes(this.docStatus)||this.clearing||this.publishing||this.saving)}},{key:"_clearAble",value:function(){return!([l.DOC_STATUS.saving,l.DOC_STATUS.publishing].includes(this.docStatus)||this.clearing||this.publishing||this.saving)}},{key:"_beforeStart",value:function(){this.clearError(),this._clearLazyDisconnect()}},{key:"lazyStart",value:function(){var e=this;this._clearLazyStartTimer(),this.lazyStartTimer=setTimeout((function(){e.start()}),1e3)}},{key:"_clearLazyStartTimer",value:function(){this.lazyStartTimer&&clearTimeout(this.lazyStartTimer)}},{key:"clearError",value:function(){this.emit(l.WORKFLOW_EVENT.error,null)}},{key:"_clearMessage",value:function(){this.emit(l.WORKFLOW_EVENT.message,{type:l.MESSAGE.CLEAR})}},{key:"loadDoc",value:(y=M(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.userAction.log("load_doc"),U("start loading document"),t=this.doc,this.needLoad()){e.next=5;break}return e.abrupt("return");case 5:return this.transmitDocStatus(l.DOC_STATUS.loading),n=this.docSetUid,e.prev=7,e.next=10,this.doLoadDoc();case 10:if(r=e.sent,!(n&&n!==this.docSetUid||this.isSwitchingDoc)){e.next=13;break}return e.abrupt("return");case 13:return this.transmitDocStatus(l.DOC_STATUS.loaded),this.docLoaded[t.id]=!0,e.abrupt("return",r);case 18:if(e.prev=18,e.t0=e.catch(7),!(n&&n!==this.docSetUid||this.isSwitchingDoc)){e.next=22;break}return e.abrupt("return");case 22:this.transmitDocStatus(l.DOC_STATUS.loaded),this.docLoaded[t.id]&&this._isNetWorkError(e.t0.message)?this.emit(l.WORKFLOW_EVENT.message,{type:l.MESSAGE.DISCONNECT}):this.error({code:l.ERROR_CODE.INIT_FAILED,type:e.t0.type,status:e.t0.status,message:e.t0.message});case 24:case"end":return e.stop()}}),e,this,[[7,18]])}))),function(){return y.apply(this,arguments)})},{key:"updateEditorBiz",value:function(e){var t=this;this.editorBiz&&this.editorBiz.doc.id===e.id?((void 0===this.editorBiz.doc.draft_version||e.draft_version>this.editorBiz.doc.draft_version)&&(this.editable||this.note||this.editorBiz.saveDocToServer()),this.editorBiz.resetDoc(e)):(this.editorBiz=this.createEditorBiz(e),this.editorBiz.on("cacheSavedToServer",(function(){t.emit(l.WORKFLOW_EVENT.message,{type:l.MESSAGE.DOC_CACHE_SAVED})})))}},{key:"createLockManager",value:function(){var e=this;this.lockManager||(this.userAction.log("create_lock"),this.lockManager=new O(this.doc,this),this.lockManager.on("ready",(function(){e.userAction.log("lock_ready"),e.setEditable(!0),e.transmitMode(l.EDIT_MODE.LOCK),e.performance.marks("LockReady"),e.performance.reportPerf()})),this.lockManager.on("error",(function(t){e.userAction.log("lock_error",t.code),e.setEditable(!1),t.message&&e._isNetWorkError(t.message)?e.emit(l.WORKFLOW_EVENT.message,{type:l.MESSAGE.DISCONNECT}):e.onLockError(t)||e.error(t)})))}},{key:"createCollabManager",value:function(){var e=this;this.collabManager||(this.collabManager=this.doCreateCollabManager(),this.collabManager&&(this.userAction.log("create_collab"),this.collabManager.on("ready",(function(){e.userAction.log("collab_ready"),e.collabDisabled=!1,e.setEditable(!0),e.transmitMode(l.EDIT_MODE.COLLAB),e.performance.marks("CollabReady"),e.performance.reportPerf()})),this.collabManager.on(l.WORKFLOW_EVENT.error,function(){var t=M(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.userAction.log("collab_error",n.code),e.setEditable(!1),e.onCollabError(n),n.code!==l.ERROR_CODE.CONNECT_COLLAB_SERVER_FAILED){t.next=9;break}if(e.collabDisabled=!0,!e.useMode(l.EDIT_MODE.LOCK)){t.next=9;break}return e.startLockMode(),s.a.logEditWorkflow("COLLAB_SWITCH_TO_LOCK"),t.abrupt("return");case 9:if(n.code!==l.ERROR_CODE.DISCONNECTED){t.next=14;break}return t.next=12,e.start();case 12:return s.a.logEditWorkflow("COLLAB_RECONNECT"),t.abrupt("return");case 14:e.error(n);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.collabManager.on(l.WORKFLOW_EVENT.message,(function(t){t.type===l.MESSAGE.DOC_DELETED?(e.userAction.log("doc_deleted"),e.transmitDocStatus(l.DOC_STATUS.deleted),e.error({code:l.ERROR_CODE.DOC_DELETED,data:t})):e.emit(l.WORKFLOW_EVENT.message,t)})),this.collabManager.on(l.WORKFLOW_EVENT.collabUsersChange,(function(t){e.emit(l.WORKFLOW_EVENT.collabUsersChange,t)})),this.collabManager.on(l.WORKFLOW_EVENT.netStatusChange,(function(t){e.emit(l.WORKFLOW_EVENT.netStatusChange,t)}))))}},{key:"startLockMode",value:function(){this.userAction.log("lock_start"),U("startLockMode"),this.createLockManager(),this.lockManager.start()}},{key:"startCollabMode",value:function(){this.userAction.log("collab_start"),U("startCollabMode"),this.createCollabManager(),this.collabManager.connect()}},{key:"pauseLock",value:function(){this.currentMode===l.EDIT_MODE.LOCK&&this.lockManager&&(this.userAction.log("lock_pause"),this.lockManager.pause())}},{key:"resumeLock",value:function(){this.currentMode===l.EDIT_MODE.LOCK&&this.isActive()&&this.lockManager&&(this.userAction.log("lock_resume"),this.lockManager.resume())}},{key:"transmitDocStatus",value:function(e){U("transmitDocStatus===========: ",this.docStatus,"=>",e),this.docStatus!==l.DOC_STATUS.deleted&&(e===l.DOC_STATUS.saved&&this.docStatus!==l.DOC_STATUS.saving||e===l.DOC_STATUS.published&&this.docStatus!==l.DOC_STATUS.publishing||this.docStatus!==e&&(this.docStatus=e,this.emit(l.WORKFLOW_EVENT.docStatusChange,e)))}},{key:"transmitMode",value:function(e){this.emit(l.WORKFLOW_EVENT.editModeChange,e)}},{key:"setEditable",value:function(e){this.editable!==e&&(this.editable=e,this.emit(l.WORKFLOW_EVENT.editableChange,e))}},{key:"_updateDoc",value:function(e){this.userAction.log("doc_update",e.draft_version),this.updateEditorBiz(e),this.initialDocument=this.editorBiz.getInitialDocument(),this.onDocUpdated(e),this.doc=P({},e),this.currentMode===l.EDIT_MODE.LOCK&&this.lockManager&&this.lockManager.resetDoc(e),this.currentMode===l.EDIT_MODE.COLLAB&&this.collabManager&&this.collabManager.resetDoc(e,this.initialDocument)}},{key:"startIgnoreChangeTimer",value:function(){this.ignoreChangedTime=+new Date+500}},{key:"ignoreChange",value:function(){return!this.docRendered||!!(this.ignoreChangedTime&&new Date<this.ignoreChangedTime)||(this.ignoreChangedTime=null,!1)}},{key:"cache",value:function(e){var t=e.format,n=e.value;if(this.needCache()){try{this.cached=this.editorBiz.saveToCache({format:t,value:n})}catch(e){return console.log(e),!1}return!0}}},{key:"checkSavable",value:function(e){var t=this.editable,n=this.docStatus,r=this.docRendered,a=this.saving,o=e===l.SAVE_TYPE.USER_PUBLISH||e===l.SAVE_TYPE.USER_SAVE;return r?t?n===l.DOC_STATUS.saving||a?(o&&this.emit(l.WORKFLOW_EVENT.message,{type:l.MESSAGE.SAVING}),!1):n===l.DOC_STATUS.publishing?(o&&this.emit(l.WORKFLOW_EVENT.message,{type:l.MESSAGE.PUBLISHING}),!1):n===l.DOC_STATUS.deleted?(o&&i.b.error(__("文档已经被删除")),!1):!(this.docSetTime&&new Date-this.docSetTime<1e3):(U("on save, editor disabled, ignore"),o&&(this.emit(l.WORKFLOW_EVENT.message,{type:l.MESSAGE.EDIT_DISABLE}),this.resumeLock()),!1):(U("on save, editor unrendered, ignore"),o&&this.emit(l.WORKFLOW_EVENT.message,{type:l.MESSAGE.UNREADY}),!1)}},{key:"ignoreSave",value:function(e){return!!this.doIgnoreSave(e)||e!==l.SAVE_TYPE.USER_PUBLISH&&(this.docStatus===l.DOC_STATUS.saved||this.docStatus===l.DOC_STATUS.published||this.docStatus===l.DOC_STATUS.loaded&&!this.editorBiz.changed)}},{key:"throwWhenPublish",value:function(e,t){if(e===l.SAVE_TYPE.USER_PUBLISH)throw t||(t=new Error("")),t}},{key:"_isNetWorkError",value:function(e){return e.startsWith(__("网络异常"))}},{key:"_isConflictError",value:function(e){return e.includes("conflict")}},{key:"closeAble",value:function(){return!(!1===this.cached&&this.docStatus===l.DOC_STATUS.saving&&(this.error({code:l.ERROR_CODE.CACHE_FAILED}),1))}},{key:"saveFailed",value:function(e,t,n){if(this.userAction.log("save_failed"),!n||n===this.saveId){var r;switch(this.transmitDocStatus(l.DOC_STATUS.changed),e){case l.SAVE_TYPE.USER_SAVE:this._isNetWorkError(t.message)?this.emit(l.WORKFLOW_EVENT.message,{type:l.MESSAGE.SAVE_FAILED,body:t.message}):r=this._isConflictError(t.message)?l.ERROR_CODE.DOC_SAVE_CONFLICT:404===t.status?l.ERROR_CODE.DOC_NOT_EXIST:l.ERROR_CODE.SAVE_FAILED}r&&this.error({code:r,message:t.message}),this.resumeLock(),this.onSaveFailed(),this._checkFreeCallback()}}},{key:"saveSuccess",value:function(e,t){this.userAction.log("save_success"),this.transmitDocStatus(l.DOC_STATUS.saved),e!==l.SAVE_TYPE.USER_SAVE||t.local||i.b.success("保存成功"),t.local&&!this.clearing||this.clearCache(),this._updateDoc(t),e!==l.SAVE_TYPE.USER_PUBLISH&&(t.local||this.resumeLock(),this.onSaveSuccess(t),this._checkFreeCallback())}},{key:"saveRemoteSuccess",value:function(e,t,n){this.userAction.log("save_remote_success"),t&&t.id===this.doc.id&&(n&&n!==this.saveId||(e===l.SAVE_TYPE.USER_SAVE&&i.b.success("保存成功"),this.clearCache(),this._updateDoc(t),this.resumeLock()))}},{key:"clearCache",value:function(){this.docStatus!==l.DOC_STATUS.changed&&(this.editorBiz.clearCachedContent(),delete this.cached,this.userAction.log("clear_cache"))}},{key:"publishSuccess",value:(v=M(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.userAction.log("publish_success"),this.transmitDocStatus(l.DOC_STATUS.published),e.next=4,this.onPublishSuccess(t);case 4:this._checkFreeCallback();case 5:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"publishFailed",value:function(e){this.userAction.log("publish_failed"),this.transmitDocStatus(l.DOC_STATUS.changed),this.error({code:l.ERROR_CODE.PUBLISH_FAILED,message:e.message}),this.resumeLock(),this.onPublishFailed(),this._checkFreeCallback()}},{key:"saveEditorMeta",value:(g=M(regeneratorRuntime.mark((function e(t){var n,r,a,i,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.isDraft,r=t.themeMetas,a=this.doc,i=this.engine.getDocMeta({themeMetas:r})){e.next=5;break}return e.abrupt("return");case 5:return o=JSON.stringify(i),c={id:a.id,meta_draft:o},n||(c.meta=o),e.prev=8,e.next=11,this.doSaveEditorMeta(c);case 11:this.engine.updateDocEditorMeta(c),this.onEditorMetaSaved(),e.next=17;break;case 15:e.prev=15,e.t0=e.catch(8);case 17:case"end":return e.stop()}}),e,this,[[8,15]])}))),function(e){return g.apply(this,arguments)})},{key:"deleteDoc",value:function(){this.transmitDocStatus(l.DOC_STATUS.deleted),this.onDocDeleted()}},{key:"exit",value:(h=M(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.unlock){e.next=6;break}return e.next=4,this.lockManager.unLock();case 4:e.next=7;break;case 6:return e.abrupt("return",Promise.resolve());case 7:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"error",value:function(e){this.userAction.log("error",e.code),this.emit(l.WORKFLOW_EVENT.error,e),s.a.logEditWorkflow(e)}},{key:"destroy",value:function(){this.onDestroy()}},{key:"onDestroy",value:function(){}},{key:"onBeforeReset",value:function(){}},{key:"onReset",value:function(){}},{key:"doBindEvents",value:function(){}},{key:"startAble",value:function(){return!0}},{key:"onStarted",value:function(){}},{key:"needLoad",value:function(){return!0}},{key:"doLoadDoc",value:(p=M(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)}))),function(){return p.apply(this,arguments)})},{key:"onLockError",value:function(){}},{key:"doCreateCollabManager",value:function(){}},{key:"onCollabError",value:function(){}},{key:"createEditorBiz",value:function(){}},{key:"onDocUpdated",value:function(){}},{key:"needCache",value:function(){return!0}},{key:"onSaveFailed",value:function(){}},{key:"onSaveSuccess",value:function(){}},{key:"onDocDeleted",value:function(){}},{key:"onPublishSuccess",value:(d=M(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)}))),function(){return d.apply(this,arguments)})},{key:"onPublishFailed",value:function(){}},{key:"doSaveEditorMeta",value:(c=M(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)}))),function(){return c.apply(this,arguments)})},{key:"onEditorMetaSaved",value:function(){}},{key:"isDefaultTitle",value:function(){}},{key:"isActive",value:function(){return!0}},{key:"doLock",value:(o=M(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})},{key:"doUnlock",value:(a=M(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})},{key:"isSwitchingDoc",get:function(){return!(!this.doc||!this.targetDocId||this.doc.id===this.targetDocId)}}])&&N(t.prototype,n),r&&N(t,r),k}(a.a);t.a=q},,function(e,t,n){"use strict";t.a={fullscreen:"index-module_fullscreen_34zxZ",head:"index-module_head_1qSg8",back:"index-module_back_14iUH",pageTitle:"index-module_pageTitle_1ZWXi",headNav:"index-module_headNav_3zBD9",headActions:"index-module_headActions_2kTig",versionNameTip:"index-module_versionNameTip_2gEco",versionName:"index-module_versionName_3RJdL",body:"index-module_body_-QY8m",aside:"index-module_aside_3n544",main:"index-module_main_3nxZG",content:"index-module_content_1f8wk",document:"index-module_document_2sO0f",fixed:"index-module_fixed_2yTSE",toolbar:"index-module_toolbar_2CwR2",adapt:"index-module_adapt_2_K90",doc:"index-module_doc_2QJON",fadein:"index-module_fadein_6W1jG",flash:"index-module_flash_2W_je"}},function(e,t,n){"use strict";e.exports=n(2683)},,function(e,t,n){"use strict";n(2651);var r=n(2678),a=n(0),i=n.n(a),o=n(2),c=n.n(o),l=n(1990),s=n.n(l),u=n(312),d=n(35),f=n(110),p=n(1437),h=n(338),m="LinkList-module_linkList_2saWS",g="LinkList-module_linkItem_2ee-1",v="LinkList-module_action_2p84e",y="LinkList-module_item_1zNIH",b="LinkList-module_title_2tATu",k="LinkList-module_text_1lSmt",w="LinkList-module_icon_1u1Tl";function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var a=A(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return D(this,n)}}function D(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(c,e);var t,n,a,o=R(c);function c(){return E(this,c),o.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.links,n=e.action,a=e.aspmB,o=e.onSort,l=e.onDragStart,s=c.setIcon(t);return i.a.createElement(r.a,{className:m,onSort:o,onDragStart:l,"data-empty":__("暂无知识库")},s.map((function(e,t){return i.a.createElement("div",{className:g,key:e.id,draggable:!window.h5,"data-testid":"draggable"},i.a.createElement("div",null,i.a.createElement("a",{id:"linklist-".concat(e.id),className:y,title:e.title,href:e.url,target:"_blank","data-aspm-click":"".concat(a,"_").concat(t),draggable:!1},i.a.createElement("div",{className:b},i.a.createElement("span",{className:w},e.icon),i.a.createElement("span",{className:k},e.title))),i.a.createElement("div",{className:v},n(e,t))))})))}}])&&O(t.prototype,n),a&&O(t,a),c}(i.a.PureComponent);T.setIcon=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24,r=_(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(a.originIcon?a.icon=a.originIcon:a.originIcon=a.icon,a.target&&"Book"===a.target_type)a.icon=i.a.createElement(d.a,{name:h.b.getName("Book",a.target),style:h.b.getStyle(a.target,{size:n})});else if(a.icon){if("string"==typeof a.icon)if(a.icon.startsWith("#"))a.icon=i.a.createElement(p.a,{text:a.icon.substr(1),size:n});else if(a.icon.startsWith("scene:")){var o=a.icon.replace("scene:",""),c=null;"Book"===a.target_type?(c=h.b.getName("Book",{type:a.target_type,scene:o}),a.icon=i.a.createElement(d.a,{name:c,size:n})):"Group"===a.type&&(c=h.b.getName("User",{scene:o})),c&&(a.icon=i.a.createElement(d.a,{name:c,size:n}))}else if(a.icon.startsWith("icon:")){var l=JSON.parse(a.icon.replace(/^icon:/,""));a.icon=i.a.createElement(d.a,{name:l.symbol,style:{color:l.color},size:n})}else"Resource"===a.target_type?a.icon=i.a.createElement(d.a,{name:a.icon,width:n}):a.icon=i.a.createElement(f.a,{src:a.icon,size:n})}else if(a.type===s.a.TYPE.NORMAL||a.type===s.a.TYPE.GROUP)a.icon=i.a.createElement(d.a,{name:"link",width:n});else if("Resource"===a.target_type){var m=Object(u.c)({name:a.title});a.icon=i.a.createElement(d.a,{name:Object(u.d)({ext:m}),width:n})}else a.icon=i.a.createElement(d.a,{name:h.b.getName(a.target_type,{type:a.type}),width:n})}}catch(e){r.e(e)}finally{r.f()}return e},T.defaultProps={links:[],action:function(){},onSort:function(){}},T.propTypes={onDragStart:c.a.func,onSort:c.a.func,links:c.a.array,action:c.a.func,aspmB:c.a.string};t.a=T},,function(e,t,n){e.exports=n(2695)},,,function(e,t,n){"use strict";var r=n(248),a=n(2722),i=n.n(a),o=n(942);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t,n,r,a,i,o){try{var c=e[i](o),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){l(i,r,a,o,c,"next",e)}function c(e){l(i,r,a,o,c,"throw",e)}o(void 0)}))}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(l,e);var t,n,a,c=m(l);function l(){var e;f(this,l);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return b(v(e=c.call.apply(c,[this].concat(n))),"setContent",(function(t){e.engine.setValue(t)})),b(v(e),"appendContent",(function(t){if(t){var n=e.engine.getValue()+t.replace("<!doctype lake>","");e.engine.setValue(n)}})),b(v(e),"getValue",(function(){return e.engine.getValue()})),b(v(e),"getPureContent",(function(){return e.engine.getPureContent()})),b(v(e),"hasUserChanged",(function(){return e.engine.hasUserChanged()})),b(v(e),"resetUserChange",(function(){return e.engine.resetUserChange()})),b(v(e),"insertContent",(function(t){return e.engine.command.execute("paste",t)})),b(v(e),"getEditorContent",(function(t){t=t||{};var n,r,a,i,o=v(e).engine,c=t.fullHTML;return null===o.getMeta("premium")?(n=o.getPureContent(),r=c?o.getFullPureHtml():o.getPureHtml()):(n=o.getPublicPureContent(),r=c?o.getFullPublicPureHtml():o.getPublicPureHtml(),a=o.getPureContent(),i=c?o.getFullPureHtml():o.getPureHtml()),{content:n,html:r,premium:a,premiumHtml:i}})),b(v(e),"getDocMeta",(function(t){var n=(t=t||{}).themeMetas||[],a=v(e).doc,i=Object(r.l)(e.engine.getPureContent());if(!i)return null;var o={},c=a.editor_meta_draft||a.editor_meta;return c&&(o=JSON.parse(c)),["viewport","typography"].forEach((function(e){o[e]||n.includes(e)||delete i[e]})),i})),b(v(e),"getPremium",(function(){var t=e.engine.getMeta("premium");return t&&(t=d(d({},t),{},{price:Number(t.price),daysCount:Number(t.daysCount)})),t})),b(v(e),"getWordCount",(function(t){var n=e.engine.wordCount();if(!t)return n;t(n)})),b(v(e),"getSummary",(function(t){var n=e.engine.getPureHtml();t({summary:i.a.extractSummary(n),cover:i.a.extractFirstImage(n)})})),b(v(e),"isEmpty",(function(){return i.a.isBlank({format:"lake",value:e.engine.getPureContent()})})),b(v(e),"onBeforeSave",s(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.engine.event.trigger("save:before"),t.next=3,e.engine.asyncEvent.emitAsync("save:before");case 3:case"end":return t.stop()}}),t)})))),b(v(e),"reset",(function(t){e.engine.reset(t)})),b(v(e),"readonly",(function(t){e.engine.readonly(t)})),b(v(e),"focus",(function(t){e.engine.focus()})),e}return t=l,(n=[{key:"init",value:function(e){var t=this,n=e.content;(n=i.a.getPureLakeContent(n))||(n="<p><br /></p>"),this.engine.setValue(n),setTimeout((function(){try{o.a.letEditorFocusToReadPosition(t.doc.id)}catch(e){console.log("focus to read pos fail",e)}}),64)}},{key:"addUserChangedEvent",value:function(e){this.engine.on("userchanged",(function(){e()}))}},{key:"focusToEnd",value:function(e){this.engine.focusToEnd()}}])&&p(t.prototype,n),a&&p(t,a),l}(n(2691).a);t.a=k},function(e,t,n){"use strict";var r=n(2389),a=n.n(r),i=n(2390),o=n.n(i),c=n(839),l=n.n(c),s=n(2391),u=n.n(s),d=n(1863),f=n.n(d),p=n(88),h=n.n(p),m=n(2022);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(e,t,n,r,a,i,o){try{var c=e[i](o),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){k(i,r,a,o,c,"next",e)}function c(e){k(i,r,a,o,c,"throw",e)}o(void 0)}))}}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function e(t){var n=this,r=t.tagProxy;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),x(this,"isLongTag",(function(e){return e&&e.length>m.MAX_SHOW_TEXT_LENGTH})),x(this,"getShowText",(function(e){return"".concat(e.slice(0,m.MAX_SHOW_TEXT_LENGTH),"...")})),x(this,"createTag",h()(function(){var e=w(regeneratorRuntime.mark((function e(t){var r,a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.currentTags,a=t.docId,i=f()(t.title)){e.next=4;break}return e.abrupt("return");case 4:if(m.TAG_RULES_REG.test(i)){e.next=6;break}return e.abrupt("return",{error:__("标签只能输入中文、数字、字母、- 和 _")});case 6:if(!(i.length>m.MAX_LENGTH)){e.next=8;break}return e.abrupt("return",{error:__("标签最多{length}字",{length:m.MAX_LENGTH})});case 8:if(!u()(r,(function(e){return e.title===i}))){e.next=10;break}return e.abrupt("return",{error:__("不允许添加重复的标签")});case 10:return e.next=12,n.tagProxy.create({docId:a,title:i});case 12:if(!(o=e.sent)||!o.id){e.next=15;break}return e.abrupt("return",{data:[].concat(y(r),[o])});case 15:return e.abrupt("return",{error:__("标签新增失败")});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),200)),x(this,"getSuggest",function(){var e=w(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.tagProxy.suggest(t);case 2:return r=e.sent,e.abrupt("return",l()(r,(function(e){return{value:e.title}})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),x(this,"destroy",function(){var e=w(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.tagProxy.destroy(t);case 2:return e.sent&&o()(r,(function(e){return e.id===t.id})),e.abrupt("return",y(r));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),x(this,"arrangeResultTags",(function(e,t,n){var r=n.reduce((function(e,t){return v(v({},e),{},x({},t.title,t.count))}),{});return l()(e,(function(e){var n=e.tags.split(",").filter((function(e){return a()(t,e)<0})),i=function(e,t){return r[t]-r[e]},o=[].concat(y(t.sort(i)),y(n.sort(i)));return v(v({},e),{},{tags:o.map((function(e){return{title:e}}))})}))})),x(this,"tagsToString",(function(e){var t=e.tags,n=void 0===t?[]:t;return v(v({},e),{},{tags:n.join(",")})})),x(this,"findDocs",function(){var e=w(regeneratorRuntime.mark((function e(t,r){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.tagProxy.findDocs(n.tagsToString(t));case 2:return a=e.sent,e.abrupt("return",n.arrangeResultTags(a,t.tags,r.tagGroup));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),x(this,"countDocs",function(){var e=w(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.tagProxy.countDocs(n.tagsToString(t));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.tagProxy=r}},,function(e,t,n){"use strict";n(2393);var r=n(2392).a,a=n(369),i=n.n(a),o=(n(391),n(246)),c=(n(177),n(94)),l=n(106),s=n.n(l),u=(n(53),n(19)),d=n(0),f=n.n(d),p=n(2),h=n.n(p),m=n(2022),g=n(79),v="Tag-module_wrapper_1gRtX",y="Tag-module_add_1WnvS";function b(e,t,n,r,a,i,o){try{var c=e[i](o),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function k(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){b(i,r,a,o,c,"next",e)}function c(e){b(i,r,a,o,c,"throw",e)}o(void 0)}))}}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _=n.n(g)()((function(e,t){t(e)}),400),C=function(e){var t=e.docId,n=e.group,r=e.tagBiz,a=w(Object(d.useState)([]),2),i=a[0],o=a[1],c=w(Object(d.useState)([]),2),l=c[0],s=c[1],f=w(Object(d.useState)(""),2),p=f[0],h=f[1],m=w(Object(d.useState)(!1),2),g=m[0],v=m[1];function y(e,t){return b.apply(this,arguments)}function b(){return(b=k(regeneratorRuntime.mark((function e(n,a){var c,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.createTag({title:n,currentTags:i,docId:t});case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:if(c=e.t0,l=c.error,d=c.data,!l){e.next=12;break}if(u.a.error(l),"blur"===a){e.next=12;break}return e.abrupt("return");case 12:v(!1),h(""),s([]),d&&o(d);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=k(regeneratorRuntime.mark((function e(n){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.destroy({docId:t,id:n},i);case 2:a=e.sent,o(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=k(regeneratorRuntime.mark((function e(a){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getSuggest({target:n.login,query:a,docId:t});case 2:i=e.sent,s(i);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=k(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(13!==(t.keyCode||t.which)){e.next=6;break}return t.preventDefault(),t.stopPropagation(),e.next=6,y(t.target.value);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{state:{tagsArray:i,suggestOptions:l,showInput:g,inputValue:p},setTagsArray:o,deleteTag:function(e){return x.apply(this,arguments)},createTag:y,getSuggest:function(e){return _.apply(this,arguments)},setInputShowStatus:v,handleKeydown:function(e){return C.apply(this,arguments)},setInputValue:h}},E=function(e){var t=e.tagsArray,n=e.group,r=e.editable,a=e.deleteTag;return t.map((function(e){var t=e.title,i=e.id;return f.a.createElement(o.a,{className:"doc-tag",key:i},f.a.createElement("span",{className:"tag-title",onClick:function(){window.location.href="/r/".concat(n.login,"/tags?tag=").concat(t)}},t),r&&f.a.createElement(c.a,{title:__("确认删除标签"),onConfirm:function(){a(i)},okText:__("确认"),cancelText:__("取消"),placement:"bottom"},f.a.createElement(s.a,{width:8})))}))},O=function(e){var t=e.tags,n=e.editable,a=e.docId,o=e.group,c=e.tagBiz,l=C({docId:a,group:o,tagBiz:c}),s=l.state,u=s.tagsArray,p=s.showInput,h=s.suggestOptions,g=s.inputValue,b=l.getSuggest,k=l.deleteTag,w=l.setInputShowStatus,x=l.handleKeydown,O=l.setTagsArray,S=l.setInputValue,R=l.createTag,D=(u?u.length:0)>=m.MAX_COUNT,A=n&&!p&&!D,T=n&&p;Object(d.useEffect)((function(){O(t)}),[O,t]);var P=f.a.createElement(E,{tagsArray:u,group:o,editable:n,deleteTag:k,tagBiz:c});return n?f.a.createElement("div",{className:v,"data-testid":"editable-tag"},P,A&&f.a.createElement("span",{className:y,onClick:function(){return w(!0)},"data-testid":"edit-btn"},f.a.createElement(i.a,null)),T&&f.a.createElement(r,{"data-testid":"tag-suggest",defaultActiveFirstOption:!1,className:"doc-tag-auto-complete",autoFocus:!0,options:h,onChange:function(e){S(e),_(e,b)},onSelect:R,style:{width:"200px"},backfill:!0,value:g,onBlur:function(e){R(e.target.value,"blur")},onInputKeyDown:x})):f.a.createElement("div",{className:v,"data-testid":"only-read-tag"},P)};O.useViewModel=C,O.propTypes={tags:h.a.array.isRequired,docId:h.a.number,editable:h.a.bool,group:h.a.object,tagBiz:h.a.object};t.a=O},,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(2),o=n.n(i),c=n(81),l=n.n(c),s=n(62),u=n.n(s),d=n(2799),f=n.n(d),p=new l.a("doc:diff"),h=function(e){return e.querySelector(".lake-engine")||e},m=function(e){for(var t=e.childNodes,n=0,r=t.length;n<r;n++){var a=t[n],i=!1;if(a.nodeType===Node.ELEMENT_NODE){if(["DEL","INS"].includes(a.tagName))i=!0;else a.querySelector("del,ins")&&(i=!0);a.classList.add(i?"doc-diff-paragraph-changed":"doc-diff-paragraph-unchanged")}}},g=function(e){return e?e.startsWith(u.a.HTML_DOCTYPE)?e.substring(u.a.HTML_DOCTYPE.length):e:""};function v(e){var t=e.head,n=e.base;t=g(t),n=g(n);var i=Object(r.useRef)(null),o=Object(r.useMemo)((function(){return f()(n,t,"html-diff",null,"iframe,video,a,em,strong,del,meta")}),[]);return p("head",t),p("base",n),Object(r.useEffect)((function(){if(i.current){var e=h(i.current);m(e)}}),[]),t===n?a.a.createElement("div",{className:"doc-diff","data-testid":"unchanged-view"},__("内容一致")):a.a.createElement("div",{"data-testid":"doc-diff",className:"doc-diff"},a.a.createElement("div",{"data-testid":"diff-view",dangerouslySetInnerHTML:{__html:o},ref:i}))}v.propTypes={base:o.a.string.isRequired,head:o.a.string.isRequired};t.a=v},,,function(e,t,n){"use strict";n(148);var r=n(100),a=n(165),i=n.n(a),o=n(0),c=n.n(o),l=n(2),s=n.n(l),u=n(1877),d=n(99),f=n(2024),p="DocTagAndMetaEdit-module_wrapper_11LM9",h="DocTagAndMetaEdit-module_wordCount_2V2Lb",m="DocTagAndMetaEdit-module_num_1YwN6",g="DocTagAndMetaEdit-module_tagWrapper_2ws_y",v="DocTagAndMetaEdit-module_title_vUoDa",y="DocTagAndMetaEdit-module_tagTip_3aAaz",b="DocTagAndMetaEdit-module_icon_2T9h1",k=n(2026);function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _=function(e){var t=e.getWordCount,n=e.doc,a=e.group,l=e.book,s=e.save,d=e.getSummary,x=e.tagProxy,_=new f.a({tagProxy:x}),C=w(Object(o.useState)(!1),2),E=C[0],O=C[1],S=w(Object(o.useState)([]),2),R=S[0],D=S[1],A=w(Object(o.useState)(0),2),T=A[0],P=A[1],j=n&&n.abilities.destroy;return c.a.createElement(r.a,{overlayClassName:"docTagAndMetaPop",placement:"bottom",visible:E,onVisibleChange:function(e){!0===e&&j&&(x.find({docId:n.id}).then((function(e){D(e)})),"Doc"===n.type&&P(t())),O(e)},destroyTooltipOnHide:!0,content:c.a.createElement("div",{className:p},"Doc"===n.type&&c.a.createElement("p",{className:h},c.a.createElement("span",{className:m},T),c.a.createElement("span",null,__("字"))),c.a.createElement("div",{className:g},j&&c.a.createElement(c.a.Fragment,null,c.a.createElement("p",{className:v},__("标签"),c.a.createElement("span",{className:y},__("标签用于管理，仅团队成员可见"))),c.a.createElement(k.a,{tags:R||[],editable:!0,docId:n.id,group:a,tagBiz:_}))),c.a.createElement(u.a,{doc:n,group:a,book:l,save:function(){s.apply(void 0,arguments),O(!1)},getSummary:d,hideMoreInfo:!0})),trigger:"click"},c.a.createElement("span",{className:b},c.a.createElement(i.a,null)))};_.propTypes={getWordCount:s.a.func,doc:s.a.object,group:s.a.object,book:s.a.object,save:s.a.func,getSummary:s.a.func,tagProxy:s.a.object};t.a=Object(d.b)(_)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(548),o=n(1876),c=n(2472),l=n(2460),s=n(1871),u=n(2418),d=n(2401),f=n(2407),p=n(1984),h=n(3131),m=n(2891),g=n(3114);n(3135);t.default=function(e){var t,n=e.history,v=(e.app,Object(r.useMemo)((function(){return new p.a}),[]));return v.isEmbedMode||Object(u.a)(window.location,n),v.isEmbedMode&&(t=c.a),Object(f.a)("pagename","doc_edit"),a.a.createElement(i.a,{history:n,showSiteTip:!1,headless:!0},!v.isEmbedMode&&a.a.createElement(o.a,{hotKeys:h.a}),a.a.createElement(m.a,{header:t,renderEditor:function(e){return a.a.createElement(g.a,e)},renderHistory:function(e){return a.a.createElement(d.a,e)}}),a.a.createElement(l.a,{history:n}),a.a.createElement(s.a,null))}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports=function(e){return null==e?"":""+e}},,,function(e,t,n){var r=n(2568),a=n(2575),i=String.prototype.trim;e.exports=function(e,t){return e=r(e),!t&&i?i.call(e):(t=a(t),e.replace(new RegExp("^"+t+"+|"+t+"+$","g"),""))}},function(e,t,n){"use strict";var r=n(2656),a=n(2680),i=Object.prototype.toString;function o(e){return"[object Array]"===i.call(e)}function c(e){return null!==e&&"object"==typeof e}function l(e){return"[object Function]"===i.call(e)}function s(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:a,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:c,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:l,isStream:function(e){return c(e)&&l(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:s,merge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,a=arguments.length;r<a;r++)s(arguments[r],n);return t},deepMerge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]="object"==typeof n?e({},n):n}for(var r=0,a=arguments.length;r<a;r++)s(arguments[r],n);return t},extend:function(e,t,n){return s(t,(function(t,a){e[a]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,n){var r=n(2568),a=n(2591);e.exports=function(e,t,n,i){e=r(e),t=~~t;var o=0;switch(n?n.length>1&&(n=n.charAt(0)):n=" ",i){case"right":return o=t-e.length,e+a(n,o);case"both":return o=t-e.length,a(n,Math.ceil(o/2))+e+a(n,Math.floor(o/2));default:return o=t-e.length,a(n,o)+e}}},function(e,t,n){var r=n(2568);e.exports=function(e,t){e=r(e);var n=t?e.slice(1).toLowerCase():e.slice(1);return e.charAt(0).toUpperCase()+n}},function(e,t,n){var r=n(2583);e.exports=function(e){return null==e?"\\s":e.source?e.source:"["+r(e)+"]"}},function(e,t,n){var r=n(2568);e.exports=function(e){return r(e).split("")}},function(e,t,n){var r=n(2568),a=n(2575),i=String.prototype.trimRight;e.exports=function(e,t){return e=r(e),!t&&i?i.call(e):(t=a(t),e.replace(new RegExp(t+"+$"),""))}},,,,function(e,t,n){var r=n(2568);e.exports=function(e){return/^\s*$/.test(r(e))}},function(e,t,n){var r=n(2568);e.exports=function(e){return(e=r(e)).charAt(0).toLowerCase()+e.slice(1)}},function(e,t,n){var r=n(2568);e.exports=function(e){return r(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}},function(e,t,n){var r=n(2568),a="ąàáäâãåæăćčĉęèéëêĝĥìíïîĵłľńňòóöőôõðøśșşšŝťțţŭùúüűûñÿýçżźž",i="aaaaaaaaaccceeeeeghiiiijllnnoooooooossssstttuuuuuunyyczzz";a+=a.toUpperCase(),i=(i+=i.toUpperCase()).split(""),a+="ß",i.push("ss"),e.exports=function(e){return r(e).replace(/.{1}/g,(function(e){var t=a.indexOf(e);return-1===t?e:i[t]}))}},function(e,t,n){var r=n(2576);e.exports=function(e,t,n,a){var i=r(e);return i.splice(~~t,~~n,a),i.join("")}},function(e,t){e.exports=function(e){return e<0?0:+e||0}},function(e,t,n){var r=n(2568);e.exports=function(e,t){return 0===(e=r(e)).length?"":e.slice(0,-1)+String.fromCharCode(e.charCodeAt(e.length-1)+t)}},function(e,t,n){var r=n(2571),a=n(2582);e.exports=function(e,t){return e=r(e).replace(/[-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""})),!0===t?a(e):e}},function(e,t,n){var r=n(2571);e.exports=function(e){return r(e).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()}},function(e,t,n){var r=n(2571);e.exports=function(e){return r(e).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()}},function(e,t){e.exports=function(e,t){if(t<1)return"";for(var n="";t>0;)1&t&&(n+=e),t>>=1,e+=e;return n}},function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this,n(89))},function(e,t,n){var r;!function(){"use strict";var a={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function i(e){return c(s(e),arguments)}function o(e,t){return i.apply(null,[e].concat(t||[]))}function c(e,t){var n,r,o,c,l,s,u,d,f,p=1,h=e.length,m="";for(r=0;r<h;r++)if("string"==typeof e[r])m+=e[r];else if("object"==typeof e[r]){if((c=e[r]).keys)for(n=t[p],o=0;o<c.keys.length;o++){if(null==n)throw new Error(i('[sprintf] Cannot access property "%s" of undefined value "%s"',c.keys[o],c.keys[o-1]));n=n[c.keys[o]]}else n=c.param_no?t[c.param_no]:t[p++];if(a.not_type.test(c.type)&&a.not_primitive.test(c.type)&&n instanceof Function&&(n=n()),a.numeric_arg.test(c.type)&&"number"!=typeof n&&isNaN(n))throw new TypeError(i("[sprintf] expecting number but found %T",n));switch(a.number.test(c.type)&&(d=n>=0),c.type){case"b":n=parseInt(n,10).toString(2);break;case"c":n=String.fromCharCode(parseInt(n,10));break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,c.width?parseInt(c.width):0);break;case"e":n=c.precision?parseFloat(n).toExponential(c.precision):parseFloat(n).toExponential();break;case"f":n=c.precision?parseFloat(n).toFixed(c.precision):parseFloat(n);break;case"g":n=c.precision?String(Number(n.toPrecision(c.precision))):parseFloat(n);break;case"o":n=(parseInt(n,10)>>>0).toString(8);break;case"s":n=String(n),n=c.precision?n.substring(0,c.precision):n;break;case"t":n=String(!!n),n=c.precision?n.substring(0,c.precision):n;break;case"T":n=Object.prototype.toString.call(n).slice(8,-1).toLowerCase(),n=c.precision?n.substring(0,c.precision):n;break;case"u":n=parseInt(n,10)>>>0;break;case"v":n=n.valueOf(),n=c.precision?n.substring(0,c.precision):n;break;case"x":n=(parseInt(n,10)>>>0).toString(16);break;case"X":n=(parseInt(n,10)>>>0).toString(16).toUpperCase()}a.json.test(c.type)?m+=n:(!a.number.test(c.type)||d&&!c.sign?f="":(f=d?"+":"-",n=n.toString().replace(a.sign,"")),s=c.pad_char?"0"===c.pad_char?"0":c.pad_char.charAt(1):" ",u=c.width-(f+n).length,l=c.width&&u>0?s.repeat(u):"",m+=c.align?f+n+l:"0"===s?f+l+n:l+f+n)}return m}var l=Object.create(null);function s(e){if(l[e])return l[e];for(var t,n=e,r=[],i=0;n;){if(null!==(t=a.text.exec(n)))r.push(t[0]);else if(null!==(t=a.modulo.exec(n)))r.push("%");else{if(null===(t=a.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){i|=1;var o=[],c=t[2],s=[];if(null===(s=a.key.exec(c)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(o.push(s[1]);""!==(c=c.substring(s[0].length));)if(null!==(s=a.key_access.exec(c)))o.push(s[1]);else{if(null===(s=a.index_access.exec(c)))throw new SyntaxError("[sprintf] failed to parse named argument key");o.push(s[1])}t[2]=o}else i|=2;if(3===i)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}n=n.substring(t[0].length)}return l[e]=r}t.sprintf=i,t.vsprintf=o,"undefined"!=typeof window&&(window.sprintf=i,window.vsprintf=o,void 0===(r=function(){return{sprintf:i,vsprintf:o}}.call(t,n,t,e))||(e.exports=r))}()},function(e,t,n){var r=n(2577);e.exports=function(e,t,n,a){t=t||", ",n=n||" and ";var i=e.slice(),o=i.pop();return e.length>2&&a&&(n=r(t)+n),i.length?i.join(t)+n+o:o}},function(e,t){e.exports=function(e,t){return[t,e,t].join("")}},,,function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);this._wrapped=e}function a(e,t){"function"==typeof t&&(r.prototype[e]=function(){var e=[this._wrapped].concat(Array.prototype.slice.call(arguments)),n=t.apply(null,e);return"string"==typeof n?new r(n):n})}for(var i in r.VERSION="3.3.4",r.isBlank=n(2581),r.stripTags=n(2599),r.capitalize=n(2574),r.decapitalize=n(2582),r.chop=n(2600),r.trim=n(2571),r.clean=n(2601),r.cleanDiacritics=n(2584),r.count=n(2602),r.chars=n(2576),r.swapCase=n(2603),r.escapeHTML=n(2604),r.unescapeHTML=n(2606),r.splice=n(2585),r.insert=n(2608),r.replaceAll=n(2609),r.include=n(2610),r.join=n(2611),r.lines=n(2612),r.dedent=n(2613),r.reverse=n(2614),r.startsWith=n(2615),r.endsWith=n(2616),r.pred=n(2617),r.succ=n(2618),r.titleize=n(2619),r.camelize=n(2588),r.underscored=n(2589),r.dasherize=n(2590),r.classify=n(2620),r.humanize=n(2621),r.ltrim=n(2622),r.rtrim=n(2577),r.truncate=n(2623),r.prune=n(2624),r.words=n(2625),r.pad=n(2573),r.lpad=n(2626),r.rpad=n(2627),r.lrpad=n(2628),r.sprintf=n(2629),r.vsprintf=n(2630),r.toNumber=n(2631),r.numberFormat=n(2632),r.strRight=n(2633),r.strRightBack=n(2634),r.strLeft=n(2635),r.strLeftBack=n(2636),r.toSentence=n(2594),r.toSentenceSerial=n(2637),r.slugify=n(2638),r.surround=n(2595),r.quote=n(2639),r.unquote=n(2640),r.repeat=n(2641),r.naturalCmp=n(2642),r.levenshtein=n(2643),r.toBoolean=n(2644),r.exports=n(2645),r.escapeRegExp=n(2583),r.wrap=n(2646),r.map=n(2647),r.strip=r.trim,r.lstrip=r.ltrim,r.rstrip=r.rtrim,r.center=r.lrpad,r.rjust=r.lpad,r.ljust=r.rpad,r.contains=r.include,r.q=r.quote,r.toBool=r.toBoolean,r.camelcase=r.camelize,r.mapChars=r.map,r.prototype={value:function(){return this._wrapped}},r)a(i,r[i]);function o(e){a(e,(function(t){var n=Array.prototype.slice.call(arguments,1);return String.prototype[e].apply(t,n)}))}a("tap",(function(e,t){return t(e)}));var c=["toUpperCase","toLowerCase","split","replace","slice","substring","substr","concat"];for(var l in c)o(c[l]);e.exports=r},function(e,t,n){var r=n(2568);e.exports=function(e){return r(e).replace(/<\/?[^>]+>/g,"")}},function(e,t){e.exports=function(e,t){return null==e?[]:(e=String(e),(t=~~t)>0?e.match(new RegExp(".{1,"+t+"}","g")):[e])}},function(e,t,n){var r=n(2571);e.exports=function(e){return r(e).replace(/\s\s+/g," ")}},function(e,t,n){var r=n(2568);e.exports=function(e,t){return e=r(e),t=r(t),0===e.length||0===t.length?0:e.split(t).length-1}},function(e,t,n){var r=n(2568);e.exports=function(e){return r(e).replace(/\S/g,(function(e){return e===e.toUpperCase()?e.toLowerCase():e.toUpperCase()}))}},function(e,t,n){var r=n(2568),a=n(2605),i="[";for(var o in a)i+=o;i+="]";var c=new RegExp(i,"g");e.exports=function(e){return r(e).replace(c,(function(e){return"&"+a[e]+";"}))}},function(e,t){e.exports={"¢":"cent","£":"pound","¥":"yen","€":"euro","©":"copy","®":"reg","<":"lt",">":"gt",'"':"quot","&":"amp","'":"#39"}},function(e,t,n){var r=n(2568),a=n(2607);e.exports=function(e){return r(e).replace(/\&([^;]{1,10});/g,(function(e,t){var n;return t in a?a[t]:(n=t.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(n[1],16)):(n=t.match(/^#(\d+)$/))?String.fromCharCode(~~n[1]):e}))}},function(e,t){e.exports={nbsp:" ",cent:"¢",pound:"£",yen:"¥",euro:"€",copy:"©",reg:"®",lt:"<",gt:">",quot:'"',amp:"&",apos:"'"}},function(e,t,n){var r=n(2585);e.exports=function(e,t,n){return r(e,t,0,n)}},function(e,t,n){var r=n(2568);e.exports=function(e,t,n,a){var i=new RegExp(t,!0===a?"gi":"g");return r(e).replace(i,n)}},function(e,t,n){var r=n(2568);e.exports=function(e,t){return""===t||-1!==r(e).indexOf(t)}},function(e,t,n){var r=n(2568),a=[].slice;e.exports=function(){var e=a.call(arguments),t=e.shift();return e.join(r(t))}},function(e,t){e.exports=function(e){return null==e?[]:String(e).split(/\r\n?|\n/)}},function(e,t,n){var r=n(2568);e.exports=function(e,t){var n,a=function(e){for(var t=e.match(/^[\s\\t]*/gm),n=t[0].length,r=1;r<t.length;r++)n=Math.min(t[r].length,n);return n}(e=r(e));return 0===a?e:(n="string"==typeof t?new RegExp("^"+t,"gm"):new RegExp("^[ \\t]{"+a+"}","gm"),e.replace(n,""))}},function(e,t,n){var r=n(2576);e.exports=function(e){return r(e).reverse().join("")}},function(e,t,n){var r=n(2568),a=n(2586);e.exports=function(e,t,n){return e=r(e),t=""+t,n=null==n?0:Math.min(a(n),e.length),e.lastIndexOf(t,n)===n}},function(e,t,n){var r=n(2568),a=n(2586);e.exports=function(e,t,n){return e=r(e),t=""+t,(n=void 0===n?e.length-t.length:Math.min(a(n),e.length)-t.length)>=0&&e.indexOf(t,n)===n}},function(e,t,n){var r=n(2587);e.exports=function(e){return r(e,-1)}},function(e,t,n){var r=n(2587);e.exports=function(e){return r(e,1)}},function(e,t,n){var r=n(2568);e.exports=function(e){return r(e).toLowerCase().replace(/(?:^|\s|-)\S/g,(function(e){return e.toUpperCase()}))}},function(e,t,n){var r=n(2574),a=n(2588),i=n(2568);e.exports=function(e){return e=i(e),r(a(e.replace(/[\W_]/g," ")).replace(/\s/g,""))}},function(e,t,n){var r=n(2574),a=n(2589),i=n(2571);e.exports=function(e){return r(i(a(e).replace(/_id$/,"").replace(/_/g," ")))}},function(e,t,n){var r=n(2568),a=n(2575),i=String.prototype.trimLeft;e.exports=function(e,t){return e=r(e),!t&&i?i.call(e):(t=a(t),e.replace(new RegExp("^"+t+"+"),""))}},function(e,t,n){var r=n(2568);e.exports=function(e,t,n){return n=n||"...",t=~~t,(e=r(e)).length>t?e.slice(0,t)+n:e}},function(e,t,n){var r=n(2568),a=n(2577);e.exports=function(e,t,n){if(e=r(e),t=~~t,n=null!=n?String(n):"...",e.length<=t)return e;var i=e.slice(0,t+1).replace(/.(?=\W*\w*$)/g,(function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "}));return((i=i.slice(i.length-2).match(/\w\w/)?i.replace(/\s*\S+$/,""):a(i.slice(0,i.length-1)))+n).length>e.length?e:e.slice(0,i.length)+n}},function(e,t,n){var r=n(2581),a=n(2571);e.exports=function(e,t){return r(e)?[]:a(e,t).split(t||/\s+/)}},function(e,t,n){var r=n(2573);e.exports=function(e,t,n){return r(e,t,n)}},function(e,t,n){var r=n(2573);e.exports=function(e,t,n){return r(e,t,n,"right")}},function(e,t,n){var r=n(2573);e.exports=function(e,t,n){return r(e,t,n,"both")}},function(e,t,n){var r=n(2592);e.exports=r(n(2593).sprintf,"sprintf() will be removed in the next major release, use the sprintf-js package instead.")},function(e,t,n){var r=n(2592);e.exports=r(n(2593).vsprintf,"vsprintf() will be removed in the next major release, use the sprintf-js package instead.")},function(e,t){e.exports=function(e,t){if(null==e)return 0;var n=Math.pow(10,isFinite(t)?t:0);return Math.round(e*n)/n}},function(e,t){e.exports=function(e,t,n,r){if(isNaN(e)||null==e)return"";r="string"==typeof r?r:",";var a=(e=e.toFixed(~~t)).split("."),i=a[0],o=a[1]?(n||".")+a[1]:"";return i.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+r)+o}},function(e,t,n){var r=n(2568);e.exports=function(e,t){e=r(e);var n=(t=r(t))?e.indexOf(t):-1;return~n?e.slice(n+t.length,e.length):e}},function(e,t,n){var r=n(2568);e.exports=function(e,t){e=r(e);var n=(t=r(t))?e.lastIndexOf(t):-1;return~n?e.slice(n+t.length,e.length):e}},function(e,t,n){var r=n(2568);e.exports=function(e,t){e=r(e);var n=(t=r(t))?e.indexOf(t):-1;return~n?e.slice(0,n):e}},function(e,t,n){var r=n(2568);e.exports=function(e,t){e=r(e),t=r(t);var n=e.lastIndexOf(t);return~n?e.slice(0,n):e}},function(e,t,n){var r=n(2594);e.exports=function(e,t,n){return r(e,t,n,!0)}},function(e,t,n){var r=n(2571),a=n(2590),i=n(2584);e.exports=function(e){return r(a(i(e).replace(/[^\w\s-]/g,"-").toLowerCase()),"-")}},function(e,t,n){var r=n(2595);e.exports=function(e,t){return r(e,t||'"')}},function(e,t){e.exports=function(e,t){return t=t||'"',e[0]===t&&e[e.length-1]===t?e.slice(1,e.length-1):e}},function(e,t,n){var r=n(2568),a=n(2591);e.exports=function(e,t,n){if(e=r(e),t=~~t,null==n)return a(e,t);for(var i=[];t>0;i[--t]=e);return i.join(n)}},function(e,t){e.exports=function(e,t){if(e==t)return 0;if(!e)return-1;if(!t)return 1;for(var n=/(\.\d+|\d+|\D+)/g,r=String(e).match(n),a=String(t).match(n),i=Math.min(r.length,a.length),o=0;o<i;o++){var c=r[o],l=a[o];if(c!==l){var s=+c,u=+l;return s==s&&u==u?s>u?1:-1:c<l?-1:1}}return r.length!=a.length?r.length-a.length:e<t?-1:1}},function(e,t,n){var r=n(2568);e.exports=function(e,t){"use strict";if((e=r(e))===(t=r(t)))return 0;if(!e||!t)return Math.max(e.length,t.length);for(var n=new Array(t.length+1),a=0;a<n.length;++a)n[a]=a;for(a=0;a<e.length;++a){for(var i=a+1,o=0;o<t.length;++o){var c=i,l=c+1;(i=n[o]+(e.charAt(a)===t.charAt(o)?0:1))>l&&(i=l),i>(l=n[o+1]+1)&&(i=l),n[o]=c}n[o]=i}return i}},function(e,t,n){var r=n(2571);function a(e,t){var n,r,a=e.toLowerCase();for(t=[].concat(t),n=0;n<t.length;n+=1)if(r=t[n]){if(r.test&&r.test(e))return!0;if(r.toLowerCase()===a)return!0}}e.exports=function(e,t,n){return"number"==typeof e&&(e=""+e),"string"!=typeof e?!!e:!!a(e=r(e),t||["true","1"])||!a(e,n||["false","0"])&&void 0}},function(e,t){e.exports=function(){var e={};for(var t in this)this.hasOwnProperty(t)&&!t.match(/^(?:include|contains|reverse|join|map|wrap)$/)&&(e[t]=this[t]);return e}},function(e,t,n){var r=n(2568);e.exports=function(e,t){e=r(e);var n,a=(t=t||{}).width||75,i=t.seperator||"\n",o=t.cut||!1,c=t.preserveSpaces||!1,l=t.trailingSpaces||!1;if(a<=0)return e;if(o){var s=0;for(n="";s<e.length;)s%a==0&&s>0&&(n+=i),n+=e.charAt(s),s++;if(l)for(;s%a>0;)n+=" ",s++;return n}var u=e.split(" "),d=0;for(n="";u.length>0;){if(1+u[0].length+d>a&&d>0){if(c)n+=" ",d++;else if(l)for(;d<a;)n+=" ",d++;n+=i,d=0}d>0&&(n+=" ",d++),n+=u[0],d+=u[0].length,u.shift()}if(l)for(;d<a;)n+=" ",d++;return n}},function(e,t,n){var r=n(2568);e.exports=function(e,t){return 0===(e=r(e)).length||"function"!=typeof t?e:e.replace(/./g,t)}},,function(e,t,n){"use strict";var r=n(886);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i={adaptDocToDocument:function(e){return{origin:"database",format:e.format,draft_version:e.draft_version,base_timestamp:e.content_updated_at,value:this.adaptBodyToContent(e)}},adaptBodyToContent:function(e){return(r.FORMATS_SAVE_TO_BODY_ASL.includes(e.format)?e.body_draft_asl||e.body_asl||"":e.body_draft||e.body||"").trim()},adaptCacheDataToDocument:function(e,t){if(!e)return null;try{var n=JSON.parse(e);return"object"!==a(n)?null:["lakesheet","spreadjs"].includes(t)&&n.doc?{origin:"cache",format:t,draft_version:n.doc.data.draft_version,value:n.doc.value}:{origin:"cache",format:t,draft_version:n.draft_version,base_timestamp:n.base_timestamp||null,value:n.content}}catch(e){throw e}},adaptChangeToCacheData:function(e,t){var n={draft_version:e.draft_version,base_timestamp:t,content:e.value};return JSON.stringify(n)},adapterDocumentContent:function(e){return"string"==typeof e.value?e.value:"object"===a(e.value)?JSON.stringify(e.value):""}};t.a=i},function(e,t,n){"use strict";var r=n(2649),a=n(109),i=n.n(a);function o(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u={adaptToViewModel:function(e,t){if(!e||!t)return{};var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t);return n.namespace="".concat(e.login,"/").concat(t.slug),n.user=e,n},defaultMentionUsersForDoc:function(e,t){var n=e.owners,r=t.collaborators,a=o(n);return r.length&&(a=a.concat(r.map((function(e){return e.user})))),a}},d={adaptDocPreviewImageToFormData:function(e){for(var t=new FormData,n=e.replace(/^data:image\/\w+;base64,/,""),r=window.atob(n),a=new Uint8Array(r.length),i=0;i<r.length;i++)a[i]=r.charCodeAt(i);var o=new Blob([a],{type:"image/png"});return t.append("file",o,"image.png"),t},defaultMentionUsers:function(e,t){if(t.public===i.a.PUBLIC.private_book)return u.defaultMentionUsersForDoc(e,t);var n=e.members;return n?n.map((function(e){return e.user})):[]}};Object.assign(d,r.a);t.a=d},function(e,t,n){},function(e,t,n){"use strict";var r=n(394),a=n.n(r);function i(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,i=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c={sortByTitle:function(e,t){return e.name.localeCompare(t.name,"zh-Hans-CN",{sensitivity:"accent"})},sortByMemberCount:function(e,t){return e.members_count-t.members_count},sortByBookCount:function(e,t){return e.books_count-t.books_count},sortByCreatedAt:function(e,t){return new Date(e.created_at)-new Date(t.created_at)},sortByJoinedAt:function(e,t){return new Date(e.group_user_joined_at)-new Date(t.group_user_joined_at)},getOwners:function(e){var t=[{type:null,text:__("所有")}];return(e||[]).forEach((function(e){var n=(e.owners||[]).map((function(e){return{type:e.login,text:e.name}}));t=a()(t.concat(n),"type")})),t},filterByOwner:function(e,t){return t?(e||[]).filter((function(e){var n,r=i(e.owners);try{for(r.s();!(n=r.n()).done;){var a=n.value;if((a&&a.login)===t)return!0}}catch(e){r.e(e)}finally{r.f()}return!1})):e},patchGroupIdToUrl:function(e){if(!e)return e;var t=window.appData.group;return t?"Group"!==t.type?e:"".concat(e,"&group_id=").concat(t.id):e},urlValid:function(e){return!e||/^[\x00-\x7F]/.test(e)},bannerValid:function(e){return!!e&&!(!e.icon&&!e.src||!this.urlValid(e.url))}};t.a=c},function(e,t,n){"use strict";n.d(t,"g",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return h})),n.d(t,"f",(function(){return m})),n.d(t,"b",(function(){return g})),n.d(t,"h",(function(){return v})),n.d(t,"a",(function(){return y}));var r=n(215),a=n.n(r),i=n(22),o=n.n(i),c=n(124);function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.search;if(t){var n=a.a.parse(t);return n[e]||""}return""}var s=window.self!==window.top;function u(){var e=l("mode"),t=c.a.get("topicsPageMode");return"clean"===e?(c.a.set("topicsPageMode","clean"),"clean"):"normal"===e?(c.a.remove("topicsPageMode"),"normal"):t&&"clean"===t&&s?"clean":"normal"}var d=function(){return{assignee_id:l("assignee_id"),label_ids:l("label_ids"),kanban_id:l("kanban_id"),user_id:l("user_id"),privacy:l("privacy"),state:l("state")||"open",q:l("q")}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,n=e.assignee_id,r=e.label_ids,a=e.kanban_id,i=e.user_id,o=e.privacy,c=e.q,l=d(),s=t||""===t?t:l.state,u=n||""===n?n:l.assignee_id,f=r||""===r?r:l.label_ids,p=a||""===a?a:l.kanban_id,h=i||""===i?i:l.user_id,m=o||""===o?o:l.privacy,g=c||""===c?c:l.q;return{assignee_id:u,label_ids:f,kanban_id:p,user_id:h,privacy:m,state:s,q:g}};function p(e){return"none"===e?-1:e}var h=function(){var e=d();return{assignee_id:p(e.assignee_id),label_ids:p(e.label_ids),kanban_id:p(e.kanban_id),user_id:e.user_id,privacy:e.privacy,state:e.state,q:e.q}};function m(e){return a.a.stringify(e)}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD";return o()(new Date(e)).format(t)}function v(e){return o()().isAfter(o()(e).format("YYYY-MM-DD"),"day")}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=/^S[0-9]{7,}$/;return!t.test(e.name)}},,,function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(2572);function a(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=t.toString();else{var o=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),o.push(a(t)+"="+a(e))})))})),i=o.join("&")}if(i){var c=e.indexOf("#");-1!==c&&(e=e.slice(0,c)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";(function(t){var r=n(2572),a=n(2700),i={"Content-Type":"application/x-www-form-urlencoded"};function o(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var c,l={adapter:((void 0!==t&&"[object process]"===Object.prototype.toString.call(t)||"undefined"!=typeof XMLHttpRequest)&&(c=n(2660)),c),transformRequest:[function(e,t){return a(t,"Accept"),a(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(o(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(o(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};l.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){l.headers[e]=r.merge(i)})),e.exports=l}).call(this,n(305))},function(e,t,n){"use strict";var r=n(2572),a=n(2701),i=n(2657),o=n(2703),c=n(2704),l=n(2661);e.exports=function(e){return new Promise((function(t,s){var u=e.data,d=e.headers;r.isFormData(u)&&delete d["Content-Type"];var f=new XMLHttpRequest;if(e.auth){var p=e.auth.username||"",h=e.auth.password||"";d.Authorization="Basic "+btoa(p+":"+h)}if(f.open(e.method.toUpperCase(),i(e.url,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,f.onreadystatechange=function(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in f?o(f.getAllResponseHeaders()):null,r={data:e.responseType&&"text"!==e.responseType?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:n,config:e,request:f};a(t,s,r),f=null}},f.onabort=function(){f&&(s(l("Request aborted",e,"ECONNABORTED",f)),f=null)},f.onerror=function(){s(l("Network Error",e,null,f)),f=null},f.ontimeout=function(){s(l("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",f)),f=null},r.isStandardBrowserEnv()){var m=n(2705),g=(e.withCredentials||c(e.url))&&e.xsrfCookieName?m.read(e.xsrfCookieName):void 0;g&&(d[e.xsrfHeaderName]=g)}if("setRequestHeader"in f&&r.forEach(d,(function(e,t){void 0===u&&"content-type"===t.toLowerCase()?delete d[t]:f.setRequestHeader(t,e)})),e.withCredentials&&(f.withCredentials=!0),e.responseType)try{f.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&f.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){f&&(f.abort(),s(e),f=null)})),void 0===u&&(u=null),f.send(u)}))}},function(e,t,n){"use strict";var r=n(2702);e.exports=function(e,t,n,a,i){var o=new Error(e);return r(o,t,n,a,i)}},function(e,t,n){"use strict";var r=n(2572);e.exports=function(e,t){t=t||{};var n={};return r.forEach(["url","method","params","data"],(function(e){void 0!==t[e]&&(n[e]=t[e])})),r.forEach(["headers","auth","proxy"],(function(a){r.isObject(t[a])?n[a]=r.deepMerge(e[a],t[a]):void 0!==t[a]?n[a]=t[a]:r.isObject(e[a])?n[a]=r.deepMerge(e[a]):void 0!==e[a]&&(n[a]=e[a])})),r.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])})),n}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},,function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));n(45);var r=n(16),a=(n(74),n(40)),i=(n(67),n(24)),o=(n(492),n(132)),c=n(0),l=n.n(c),s=n(2),u=n.n(s),d=n(99),f="SaveAsVersion-module_nameVersion_3QC9H";function p(e,t,n,r,a,i,o){try{var c=e[i](o),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e){var t=e.version,n=h(o.a.useForm(),1)[0],r=function(){var r,a=(r=regeneratorRuntime.mark((function r(){var a,i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,n.validateFields();case 3:return a=r.sent,r.next=6,e.docVersionProxy.name({id:t.id,name:a.name});case 6:i=r.sent,e.onCreated(i),e.onCancel(),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),console.log(r.t0);case 14:case"end":return r.stop()}}),r,null,[[0,11]])})),function(){var e=this,t=arguments;return new Promise((function(n,a){var i=r.apply(e,t);function o(e){p(i,n,a,o,c,"next",e)}function c(e){p(i,n,a,o,c,"throw",e)}o(void 0)}))});return function(){return a.apply(this,arguments)}}();return l.a.createElement(a.a,{"data-testid":"history-name-model",closable:!1,maskClosable:!1,onClose:e.onCancel,onCancel:e.onCancel,onOk:r,title:__("保存为版本"),visible:!0},l.a.createElement(o.a,{"data-testid":"history-name-form",className:f,form:n,layout:"vertical"},l.a.createElement(o.a.Item,{label:__("版本名称"),name:"name",rules:[{required:!0,message:__("请输入版本名称")},{max:40,message:__("最多 40 个字符")}]},l.a.createElement(i.a,{placeholder:__("最多 40 个字符"),"data-testid":"version-name-input"}))))}function v(e){var t=h(Object(c.useState)(!1),2),n=t[0],a=t[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(r.a,{"data-testid":"save-as-version",onClick:function(){a(!0)}},__("保存为版本")),n&&l.a.createElement(g,{version:e.version,onCreated:e.onCreated,docVersionProxy:e.docVersionProxy,onCancel:function(){a(!1)}}))}g.propTypes={version:u.a.object.isRequired,onCreated:u.a.func.isRequired,onCancel:u.a.func.isRequired,docVersionProxy:u.a.object.isRequired},v.propTypes={version:u.a.object.isRequired,onCreated:u.a.func.isRequired,docVersionProxy:u.a.object.isRequired};t.b=Object(d.b)(g,!1)},function(e,t,n){"use strict";var r=n(33),a=n(36);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),o=r(n(2667)),c=r(n(37)),l=function(e,t){return i.createElement(c.default,Object.assign({},e,{ref:t,icon:o.default}))};l.displayName="SyncOutlined";var s=i.forwardRef(l);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"}},,,,,,function(e,t,n){var r=n(2744).EventEmitter;t.EventEmitter=r,t.mixin=function(e){for(var t in r.prototype)e.prototype[t]=r.prototype[t]}},function(e,t){t.doNothing=function(){},t.hasKeys=function(e){for(var t in e)return!0;return!1},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.isValidVersion=function(e){return null===e||t.isInteger(e)&&e>=0},t.isValidTimestamp=function(e){return t.isValidVersion(e)},t.MAX_SAFE_INTEGER=9007199254740991},,,,function(e,t,n){"use strict";var r,a=n(0),i=n.n(a),o=n(2),c=n.n(o),l=n(7),s=n.n(l);n(2651);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function m(e){var t,n,o=e.onSort,c=e.className,l=h(e,["onSort","className"]),d=Object(a.useRef)();function p(e){var t=e.target;if(t.classList.remove("placeholder"),Object.assign(t.style,{width:"",height:""}),!r.dropped){var n=parseInt(t.dataset.index,10);d.current.removeChild(t),d.current.insertBefore(t,d.current.children[n])}}function m(e){if(n!==e){n=e,d.current.classList.add("droppable");var r=d.current.children[n],a=d.current.querySelector(".placeholder")||document.createElement("div");a.classList.add("placeholder"),a!==r&&(d.current.insertBefore(a,r),t=null)}}function g(){n=null;var e=d.current.querySelector(".placeholder:empty");e&&e.remove(),d.current.classList.remove("droppable")}Object(a.useEffect)((function(){Array.from(d.current.querySelectorAll('[draggable="true"]'),(function(e,t){e.dataset.index=t}))}),[e.children]);var v={};return i.a.createElement("div",u({},l,{className:s()("larkui-sortable",c),onDragStart:function(t){var n=t.target;if(n.parentNode===d.current){var a;t.stopPropagation();try{a=JSON.parse(n.dataset.drag)}catch(e){}var i=f(f({},a),{},{type:d.current.dataset.type,index:parseInt(n.dataset.index,10),rect:n.getBoundingClientRect(),origin:{x:t.clientX,y:t.clientY}});t.dataTransfer.setData("application/json",JSON.stringify(i)),r=i,t.dataTransfer.effectAllowed="move",t.dataTransfer.setDragImage(n,t.clientX-i.rect.x,t.clientY-i.rect.y),n.addEventListener("dragend",p,{once:!0}),e.onDragStart(),setTimeout((function(){n.classList.add("placeholder"),Object.assign(n.style,{width:"".concat(i.rect.width,"px"),height:"".concat(i.rect.height,"px")})}),1)}},onDragEnter:function(e){e.dataTransfer.dropEffect="move",t=null},onDragOver:function(e){var n=r;if(n&&n.type===d.current.dataset.type){e.preventDefault();var a=e.clientX-n.origin.x,i=e.clientY-n.origin.y,o={width:n.rect.width,height:n.rect.height,top:n.rect.top+i,right:n.rect.right+a,bottom:n.rect.bottom+i,left:n.rect.left+a},c=(e.clientY,v.clientY,e.clientX-v.clientX>0),l=(e.clientX,v.clientX,e.clientY-v.clientY>0);v={clientX:e.clientX,clientY:e.clientY},t||(t=Array.from(d.current.children,(function(e){return e.getBoundingClientRect()})));var s=t.reduce((function(e,t,n){if(o.top>t.bottom||o.right<t.left||o.bottom<t.top||o.left>t.right)return e;var r=Math.max(o.left,t.left),a=Math.max(o.top,t.top),i=(Math.min(o.right,t.right)-r)*(Math.min(o.bottom,t.bottom)-a);return i>e.area?{area:i,index:c||l?n+1:n}:e}),{area:0});s.area/(o.width*o.height)>=.3?m(s.index):m(t.length)}},onDragLeave:function(e){if(!e.currentTarget.contains(e.relatedTarget)){var t=e.currentTarget.getBoundingClientRect(),n=getComputedStyle(e.currentTarget).marginTop,r=Math.max(t.top,t.top-parseInt(n,10));e.clientX>=t.left&&e.clientX<=t.right&&e.clientY>=r&&e.clientY<=t.bottom||g()}},onDrop:function(e){e.preventDefault();var t=r;null!=t.index&&null!=n&&(t.dropped=!0,o(t,n)),g()},ref:d}),e.children)}m.defaultProps={onDragStart:function(){}},m.propTypes={children:c.a.array,className:c.a.string,onSort:c.a.func,onDragStart:c.a.func},t.a=m},,function(e,t){e.exports=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},,,function(e,t,n){var r=n(401);e.exports=function(e){return e=isNaN(e)?r(e):e,new Promise((function(t,n){setTimeout((function(){t()}),e)}))}},,,,,function(e,t,n){var r=new(n(2745));e.exports=r},function(e,t){function n(e,t){this.code=e,this.message=t||"",Error.captureStackTrace?Error.captureStackTrace(this,n):this.stack=(new Error).stack}n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n.prototype.name="ShareDBError",n.CODES={ERR_APPLY_OP_VERSION_DOES_NOT_MATCH_SNAPSHOT:"ERR_APPLY_OP_VERSION_DOES_NOT_MATCH_SNAPSHOT",ERR_APPLY_SNAPSHOT_NOT_PROVIDED:"ERR_APPLY_SNAPSHOT_NOT_PROVIDED",ERR_CLIENT_ID_BADLY_FORMED:"ERR_CLIENT_ID_BADLY_FORMED",ERR_CONNECTION_SEQ_INTEGER_OVERFLOW:"ERR_CONNECTION_SEQ_INTEGER_OVERFLOW",ERR_CONNECTION_STATE_TRANSITION_INVALID:"ERR_CONNECTION_STATE_TRANSITION_INVALID",ERR_DATABASE_ADAPTER_NOT_FOUND:"ERR_DATABASE_ADAPTER_NOT_FOUND",ERR_DATABASE_DOES_NOT_SUPPORT_SUBSCRIBE:"ERR_DATABASE_DOES_NOT_SUPPORT_SUBSCRIBE",ERR_DATABASE_METHOD_NOT_IMPLEMENTED:"ERR_DATABASE_METHOD_NOT_IMPLEMENTED",ERR_DEFAULT_TYPE_MISMATCH:"ERR_DEFAULT_TYPE_MISMATCH",ERR_DOC_MISSING_VERSION:"ERR_DOC_MISSING_VERSION",ERR_DOC_ALREADY_CREATED:"ERR_DOC_ALREADY_CREATED",ERR_DOC_DOES_NOT_EXIST:"ERR_DOC_DOES_NOT_EXIST",ERR_DOC_TYPE_NOT_RECOGNIZED:"ERR_DOC_TYPE_NOT_RECOGNIZED",ERR_DOC_WAS_DELETED:"ERR_DOC_WAS_DELETED",ERR_INFLIGHT_OP_MISSING:"ERR_INFLIGHT_OP_MISSING",ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION:"ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION",ERR_MAX_SUBMIT_RETRIES_EXCEEDED:"ERR_MAX_SUBMIT_RETRIES_EXCEEDED",ERR_MESSAGE_BADLY_FORMED:"ERR_MESSAGE_BADLY_FORMED",ERR_MILESTONE_ARGUMENT_INVALID:"ERR_MILESTONE_ARGUMENT_INVALID",ERR_OP_ALREADY_SUBMITTED:"ERR_OP_ALREADY_SUBMITTED",ERR_OP_NOT_ALLOWED_IN_PROJECTION:"ERR_OP_NOT_ALLOWED_IN_PROJECTION",ERR_OP_SUBMIT_REJECTED:"ERR_OP_SUBMIT_REJECTED",ERR_OP_VERSION_MISMATCH_AFTER_TRANSFORM:"ERR_OP_VERSION_MISMATCH_AFTER_TRANSFORM",ERR_OP_VERSION_MISMATCH_DURING_TRANSFORM:"ERR_OP_VERSION_MISMATCH_DURING_TRANSFORM",ERR_OP_VERSION_NEWER_THAN_CURRENT_SNAPSHOT:"ERR_OP_VERSION_NEWER_THAN_CURRENT_SNAPSHOT",ERR_OT_OP_BADLY_FORMED:"ERR_OT_OP_BADLY_FORMED",ERR_OT_OP_NOT_PROVIDED:"ERR_OT_OP_NOT_PROVIDED",ERR_PROTOCOL_VERSION_NOT_SUPPORTED:"ERR_PROTOCOL_VERSION_NOT_SUPPORTED",ERR_QUERY_EMITTER_LISTENER_NOT_ASSIGNED:"ERR_QUERY_EMITTER_LISTENER_NOT_ASSIGNED",ERR_SNAPSHOT_READ_SILENT_REJECTION:"ERR_SNAPSHOT_READ_SILENT_REJECTION",ERR_SNAPSHOT_READS_REJECTED:"ERR_SNAPSHOT_READS_REJECTED",ERR_SUBMIT_TRANSFORM_OPS_NOT_FOUND:"ERR_SUBMIT_TRANSFORM_OPS_NOT_FOUND",ERR_TYPE_CANNOT_BE_PROJECTED:"ERR_TYPE_CANNOT_BE_PROJECTED",ERR_UNKNOWN_ERROR:"ERR_UNKNOWN_ERROR"},e.exports=n},function(e,t,n){t.defaultType=n(396).type,t.map={},t.register=function(e){e.name&&(t.map[e.name]=e),e.uri&&(t.map[e.uri]=e)},t.register(t.defaultType)},function(e,t,n){"use strict";var r=n(82),a=n.n(r);function i(e,t,n,r,a,i,o){try{var c=e[i](o),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.doc=t,this.engine=n,this.emitter=new a.a}var t,n,r,s,u;return t=e,(n=[{key:"resetDoc",value:function(e){this.doc=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e)}},{key:"init",value:function(e){e.content,e.onFocus}},{key:"setContent",value:function(e){}},{key:"appendContent",value:function(e){}},{key:"getValue",value:function(){return null}},{key:"getPureContent",value:function(){return null}},{key:"getEditorContent",value:function(e){return{content:"",html:null,premium:null,premiumHtml:null}}},{key:"getThumbnail",value:function(){return""}},{key:"getDocMeta",value:function(e){return null}},{key:"updateDocEditorMeta",value:function(e){var t=this;["meta_draft","meta"].forEach((function(n){var r="editor_".concat(n);e[n]&&(t.doc[r]=e[n])}))}},{key:"getPremium",value:function(){return null}},{key:"addUserChangedEvent",value:function(){return null}},{key:"getWordCount",value:function(e){return e&&e(-1),0}},{key:"getSummary",value:function(e){e({summary:null,cover:null})}},{key:"isEmpty",value:function(){return!1}},{key:"hasUserChanged",value:function(){return!0}},{key:"resetUserChanged",value:function(){}},{key:"disable",value:function(){}},{key:"enable",value:function(){}},{key:"readonly",value:function(e){}},{key:"focus",value:function(e){}},{key:"focusToEnd",value:function(e){}},{key:"onBeforeSave",value:(s=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})),u=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=s.apply(e,t);function o(e){i(a,n,r,o,c,"next",e)}function c(e){i(a,n,r,o,c,"throw",e)}o(void 0)}))},function(){return u.apply(this,arguments)})},{key:"reset",value:function(e){}},{key:"getOriginEngine",value:function(){return this.engine}}])&&l(t.prototype,n),r&&l(t,r),e}();t.a=s},,,,function(e,t,n){"use strict";var r=n(2572),a=n(2656),i=n(2696),o=n(2662);function c(e){var t=new i(e),n=a(i.prototype.request,t);return r.extend(n,i.prototype,t),r.extend(n,t),n}var l=c(n(2659));l.Axios=i,l.create=function(e){return c(o(l.defaults,e))},l.Cancel=n(2663),l.CancelToken=n(2708),l.isCancel=n(2658),l.all=function(e){return Promise.all(e)},l.spread=n(2709),e.exports=l,e.exports.default=l},function(e,t,n){"use strict";var r=n(2572),a=n(2657),i=n(2697),o=n(2698),c=n(2662);function l(e){this.defaults=e,this.interceptors={request:new i,response:new i}}l.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=c(this.defaults,e)).method=e.method?e.method.toLowerCase():"get";var t=[o,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},l.prototype.getUri=function(e){return e=c(this.defaults,e),a(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,n){return this.request(r.merge(n||{},{method:e,url:t}))}})),r.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,n,a){return this.request(r.merge(a||{},{method:e,url:t,data:n}))}})),e.exports=l},function(e,t,n){"use strict";var r=n(2572);function a(){this.handlers=[]}a.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},a.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},a.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=a},function(e,t,n){"use strict";var r=n(2572),a=n(2699),i=n(2658),o=n(2659),c=n(2706),l=n(2707);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.baseURL&&!c(e.url)&&(e.url=l(e.baseURL,e.url)),e.headers=e.headers||{},e.data=a(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return s(e),t.data=a(t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(s(e),t&&t.response&&(t.response.data=a(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,n){"use strict";var r=n(2572);e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},function(e,t,n){"use strict";var r=n(2572);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},function(e,t,n){"use strict";var r=n(2661);e.exports=function(e,t,n){var a=n.config.validateStatus;!a||a(n.status)?e(n):t(r("Request failed with status code "+n.status,n.config,null,n.request,n))}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,a){return e.config=t,n&&(e.code=n),e.request=r,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){"use strict";var r=n(2572),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,o={};return e?(r.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(o[t]&&a.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}})),o):o}},function(e,t,n){"use strict";var r=n(2572);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function a(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=a(window.location.href),function(t){var n=r.isString(t)?a(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var r=n(2572);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,a,i,o){var c=[];c.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&c.push("expires="+new Date(n).toGMTString()),r.isString(a)&&c.push("path="+a),r.isString(i)&&c.push("domain="+i),!0===o&&c.push("secure"),document.cookie=c.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(2663);function a(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}a.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},a.source=function(){var e;return{token:new a((function(t){e=t})),cancel:e}},e.exports=a},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},,,,,,,function(e,t,n){(function(t){var r=n(2673),a=n(2688),i=n(2689),o=n(2690),c=n(2674),l=i.CODES;function s(e,t,n){r.EventEmitter.call(this),this.connection=e,this.collection=t,this.id=n,this.version=null,this.type=null,this.data=void 0,this.inflightFetch=[],this.inflightSubscribe=[],this.inflightUnsubscribe=[],this.pendingFetch=[],this.subscribed=!1,this.wantSubscribe=!1,this.inflightOp=null,this.pendingOps=[],this.type=null,this.applyStack=null,this.preventCompose=!1}function u(e,t,n){if(t){var r=e.pop();e.push((function(e){r&&r(e),n&&n(e)}))}else e.push(n)}function d(e,t){if(e.del)return delete(n=t).op,delete n.create,void delete n.del;var n;if(t.del)return new i(l.ERR_DOC_WAS_DELETED,"Document was deleted");if(t.create)return new i(l.ERR_DOC_ALREADY_CREATED,"Document already created");if(t.op){if(e.create)return new i(l.ERR_DOC_ALREADY_CREATED,"Document already created");if(e.type.transformX){var r=e.type.transformX(e.op,t.op);e.op=r[0],t.op=r[1]}else{var a=e.type.transform(e.op,t.op,"left"),o=e.type.transform(t.op,e.op,"right");e.op=a,t.op=o}}}function f(e,t){for(var n=!1,r=0;r<e.length;r++){var a=e[r];a&&(a(t),n=!0)}return n}e.exports=s,r.mixin(s),s.prototype.destroy=function(e){var t=this;t.whenNothingPending((function(){t.wantSubscribe?t.unsubscribe((function(n){if(n)return e?e(n):t.emit("error",n);t.connection._destroyDoc(t),e&&e()})):(t.connection._destroyDoc(t),e&&e())}))},s.prototype._setType=function(e){if("string"==typeof e&&(e=o.map[e]),e)this.type=e;else{if(null!==e){var t=new i(l.ERR_DOC_TYPE_NOT_RECOGNIZED,"Missing type "+e);return this.emit("error",t)}this.type=e,this.data=void 0}},s.prototype.ingestSnapshot=function(e,t){if(!e)return t&&t();if("number"!=typeof e.v){var n=new i(l.ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION,"Missing version in ingested snapshot. "+this.collection+"."+this.id);return t?t(n):this.emit("error",n)}if(this.type||this.hasWritePending()){if(null==this.version){if(this.hasWritePending())return t&&this.once("no write pending",t);n=new i(l.ERR_DOC_MISSING_VERSION,"Cannot ingest snapshot in doc with null version. "+this.collection+"."+this.id);return t?t(n):this.emit("error",n)}return e.v>this.version?this.fetch(t):t&&t()}if(this.version>e.v)return t&&t();this.version=e.v;var r=void 0===e.type?o.defaultType:e.type;this._setType(r),this.data=this.type&&this.type.deserialize?this.type.deserialize(e.data):e.data,this.emit("load"),t&&t()},s.prototype.whenNothingPending=function(e){var n=this;t.nextTick((function(){n.hasPending()?n.once("nothing pending",e):e()}))},s.prototype.hasPending=function(){return!!(this.inflightOp||this.pendingOps.length||this.inflightFetch.length||this.inflightSubscribe.length||this.inflightUnsubscribe.length||this.pendingFetch.length)},s.prototype.hasWritePending=function(){return!(!this.inflightOp&&!this.pendingOps.length)},s.prototype._emitNothingPending=function(){this.hasWritePending()||(this.emit("no write pending"),this.hasPending()||this.emit("nothing pending"))},s.prototype._emitResponseError=function(e,t){return e&&e.code===l.ERR_SNAPSHOT_READ_SILENT_REJECTION?(this.wantSubscribe=!1,t&&t(),void this._emitNothingPending()):t?(t(e),void this._emitNothingPending()):(this._emitNothingPending(),void this.emit("error",e))},s.prototype._handleFetch=function(e,t){var n=this.inflightFetch.shift();if(e)return this._emitResponseError(e,n);this.ingestSnapshot(t,n),this._emitNothingPending()},s.prototype._handleSubscribe=function(e,t){var n=this.inflightSubscribe.shift();if(e)return this._emitResponseError(e,n);this.wantSubscribe&&(this.subscribed=!0),this.ingestSnapshot(t,n),this._emitNothingPending()},s.prototype._handleUnsubscribe=function(e){var t=this.inflightUnsubscribe.shift();if(e)return this._emitResponseError(e,t);t&&t(),this._emitNothingPending()},s.prototype._handleOp=function(e,t){if(e)return this.inflightOp?(e.code===l.ERR_OP_SUBMIT_REJECTED&&(e=null),this._rollback(e)):this.emit("error",e);if(this.inflightOp&&t.src===this.inflightOp.src&&t.seq===this.inflightOp.seq)this._opAcknowledged(t);else if(null==this.version||t.v>this.version)this.fetch();else if(!(t.v<this.version)){if(this.inflightOp)if(r=d(this.inflightOp,t))return this._hardRollback(r);for(var n=0;n<this.pendingOps.length;n++){var r;if(r=d(this.pendingOps[n],t))return this._hardRollback(r)}this.version++;try{this._otApply(t,!1)}catch(e){return this._hardRollback(e)}}},s.prototype._onConnectionStateChanged=function(){if(this.connection.canSend)this.flush(),this._resubscribe();else if(this.inflightOp&&(this.pendingOps.unshift(this.inflightOp),this.inflightOp=null),this.subscribed=!1,(this.inflightFetch.length||this.inflightSubscribe.length)&&(this.pendingFetch=this.pendingFetch.concat(this.inflightFetch,this.inflightSubscribe),this.inflightFetch.length=0,this.inflightSubscribe.length=0),this.inflightUnsubscribe.length){var e=this.inflightUnsubscribe;this.inflightUnsubscribe=[],f(e)}},s.prototype._resubscribe=function(){var e=this.pendingFetch;if(this.pendingFetch=[],this.wantSubscribe)return e.length?void this.subscribe((function(t){f(e,t)})):void this.subscribe();e.length&&this.fetch((function(t){f(e,t)}))},s.prototype.fetch=function(e){if(this.connection.canSend){var t=this.connection.sendFetch(this);u(this.inflightFetch,t,e)}else this.pendingFetch.push(e)},s.prototype.subscribe=function(e){if(this.wantSubscribe=!0,this.connection.canSend){var t=this.connection.sendSubscribe(this);u(this.inflightSubscribe,t,e)}else this.pendingFetch.push(e)},s.prototype.unsubscribe=function(e){if(this.wantSubscribe=!1,this.subscribed=!1,this.connection.canSend){var n=this.connection.sendUnsubscribe(this);u(this.inflightUnsubscribe,n,e)}else e&&t.nextTick(e)},s.prototype.flush=function(){this.connection.canSend&&!this.inflightOp&&!this.paused&&this.pendingOps.length&&this._sendOp()},s.prototype._otApply=function(e,t){if(e.op){if(!this.type)throw new i(l.ERR_DOC_DOES_NOT_EXIST,"Cannot apply op to uncreated document. "+this.collection+"."+this.id);if(!t&&this.type===o.defaultType&&e.op.length>1){this.applyStack||(this.applyStack=[]);for(var n=this.applyStack.length,r=0;r<e.op.length;r++){for(var a={op:[e.op[r]]},c=n;c<this.applyStack.length;c++){var s=d(this.applyStack[c],a);if(s)return this._hardRollback(s)}this.emit("before op",a.op,t),this.data=this.type.apply(this.data,a.op),this.emit("op",a.op,t)}return void this._popApplyStack(n)}return this.emit("before op",e.op,t),this.data=this.type.apply(this.data,e.op),void this.emit("op",e.op,t)}if(e.create)return this._setType(e.create.type),this.data=this.type.deserialize?this.type.createDeserialized?this.type.createDeserialized(e.create.data):this.type.deserialize(this.type.create(e.create.data)):this.type.create(e.create.data),void this.emit("create",t);if(e.del){var u=this.data;return this._setType(null),void this.emit("del",u,t)}},s.prototype._sendOp=function(){if(this.connection.canSend){var e=this.connection.id;this.inflightOp||(this.inflightOp=this.pendingOps.shift());var t=this.inflightOp;if(!t){var n=new i(l.ERR_INFLIGHT_OP_MISSING,"No op to send on call to _sendOp");return this.emit("error",n)}if(t.sentAt=Date.now(),t.retries=null==t.retries?0:t.retries+1,null==t.seq){if(this.connection.seq>=c.MAX_SAFE_INTEGER)return this.emit("error",new i(l.ERR_CONNECTION_SEQ_INTEGER_OVERFLOW,"Connection seq has exceeded the max safe integer, maybe from being open for too long"));t.seq=this.connection.seq++}this.connection.sendOp(this,t),null==t.src&&(t.src=e)}},s.prototype._submit=function(e,n,r){if(n||(n=!0),e.op){if(!this.type){var a=new i(l.ERR_DOC_DOES_NOT_EXIST,"Cannot submit op. Document has not been created. "+this.collection+"."+this.id);return r?r(a):this.emit("error",a)}this.type.normalize&&(e.op=this.type.normalize(e.op))}try{this._pushOp(e,r),this._otApply(e,n)}catch(e){return this._hardRollback(e)}var o=this;t.nextTick((function(){o.flush()}))},s.prototype._pushOp=function(e,t){if(this.applyStack)this.applyStack.push(e);else{var n=this._tryCompose(e);if(n)return void n.callbacks.push(t)}e.type=this.type,e.callbacks=[t],this.pendingOps.push(e)},s.prototype._popApplyStack=function(e){if(e>0)this.applyStack.length=e;else{var t=this.applyStack[0];if(this.applyStack=null,t)if(-1!==(r=this.pendingOps.indexOf(t)))for(var n=this.pendingOps.splice(r),r=0;r<n.length;r++){t=n[r];var a=this._tryCompose(t);a?a.callbacks=a.callbacks.concat(t.callbacks):this.pendingOps.push(t)}}},s.prototype._tryCompose=function(e){if(!this.preventCompose){var t=this.pendingOps[this.pendingOps.length-1];if(t&&!t.sentAt)return t.create&&e.op?(t.create.data=this.type.apply(t.create.data,e.op),t):t.op&&e.op&&this.type.compose?(t.op=this.type.compose(t.op,e.op),t):void 0}},s.prototype.submitOp=function(e,t,n){"function"==typeof t&&(n=t,t=null);var r={op:e},a=t&&t.source;this._submit(r,a,n)},s.prototype.create=function(e,t,n,r){if("function"==typeof t?(r=t,n=null,t=null):"function"==typeof n&&(r=n,n=null),t||(t=o.defaultType.uri),this.type){var a=new i(l.ERR_DOC_ALREADY_CREATED,"Document already exists");return r?r(a):this.emit("error",a)}var c={create:{type:t,data:e}},s=n&&n.source;this._submit(c,s,r)},s.prototype.del=function(e,t){if("function"==typeof e&&(t=e,e=null),!this.type){var n=new i(l.ERR_DOC_DOES_NOT_EXIST,"Document does not exist");return t?t(n):this.emit("error",n)}var r=e&&e.source;this._submit({del:!0},r,t)},s.prototype.pause=function(){this.paused=!0},s.prototype.resume=function(){this.paused=!1,this.flush()},s.prototype._opAcknowledged=function(e){if(this.inflightOp.create)this.version=e.v;else if(e.v!==this.version)return a.warn("Invalid version from server. Expected: "+this.version+" Received: "+e.v,e),this.fetch();this.version++,this._clearInflightOp()},s.prototype._rollback=function(e){var t=this.inflightOp;if(t.op&&t.type.invert){t.op=t.type.invert(t.op);for(var n=0;n<this.pendingOps.length;n++){var r=d(this.pendingOps[n],t);if(r)return this._hardRollback(r)}try{this._otApply(t,!1)}catch(e){return this._hardRollback(e)}this._clearInflightOp(e)}else this._hardRollback(e)},s.prototype._hardRollback=function(e){var t=[];this.inflightOp&&t.push(this.inflightOp),t=t.concat(this.pendingOps),this._setType(null),this.version=null,this.inflightOp=null,this.pendingOps=[];var n=this;this.fetch((function(){for(var r=!!t.length,a=0;a<t.length;a++)r=f(t[a].callbacks,e)&&r;if(e&&!r)return n.emit("error",e)}))},s.prototype._clearInflightOp=function(e){var t=this.inflightOp;this.inflightOp=null;var n=f(t.callbacks,e);if(this.flush(),this._emitNothingPending(),e&&!n)return this.emit("error",e)}}).call(this,n(305))},function(e,t,n){(function(t){var r=n(2673);function a(e,t,n,a,i,o,c){r.EventEmitter.call(this),this.action=e,this.connection=t,this.id=n,this.collection=a,this.query=i,this.results=null,o&&o.results&&(this.results=o.results,delete o.results),this.extra=void 0,this.options=o,this.callback=c,this.ready=!1,this.sent=!1}e.exports=a,r.mixin(a),a.prototype.hasPending=function(){return!this.ready},a.prototype.send=function(){if(this.connection.canSend){var e={a:this.action,id:this.id,c:this.collection,q:this.query};if(this.options&&(e.o=this.options),this.results){for(var t=[],n=0;n<this.results.length;n++){var r=this.results[n];t.push([r.id,r.version])}e.r=t}this.connection.send(e),this.sent=!0}},a.prototype.destroy=function(e){this.connection.canSend&&"qs"===this.action&&this.connection.send({a:"qu",id:this.id}),this.connection._destroyQuery(this),e&&t.nextTick(e)},a.prototype._onConnectionStateChanged=function(){this.connection.canSend&&!this.sent?this.send():this.sent=!1},a.prototype._handleFetch=function(e,t,n){this.connection._destroyQuery(this),this._handleResponse(e,t,n)},a.prototype._handleSubscribe=function(e,t,n){this._handleResponse(e,t,n)},a.prototype._handleResponse=function(e,t,n){var r=this.callback;if(this.callback=null,e)return this._finishResponse(e,r);if(!t)return this._finishResponse(null,r);var a=this,i=1,o=function(e){if(e)return a._finishResponse(e,r);--i||a._finishResponse(null,r)};if(Array.isArray(t))i+=t.length,this.results=this._ingestSnapshots(t,o),this.extra=n;else for(var c in t){i++;var l=t[c];this.connection.get(l.c||this.collection,c).ingestSnapshot(l,o)}o()},a.prototype._ingestSnapshots=function(e,t){for(var n=[],r=0;r<e.length;r++){var a=e[r],i=this.connection.get(a.c||this.collection,a.d);i.ingestSnapshot(a,t),n.push(i)}return n},a.prototype._finishResponse=function(e,t){if(this.emit("ready"),this.ready=!0,e)return this.connection._destroyQuery(this),t?t(e):this.emit("error",e);t&&t(null,this.results,this.extra)},a.prototype._handleError=function(e){this.emit("error",e)},a.prototype._handleDiff=function(e){for(var t=0;t<e.length;t++){"insert"===(n=e[t]).type&&(n.values=this._ingestSnapshots(n.values))}for(t=0;t<e.length;t++){var n;switch((n=e[t]).type){case"insert":var r=n.values;Array.prototype.splice.apply(this.results,[n.index,0].concat(r)),this.emit("insert",r,n.index);break;case"remove":var a=n.howMany||1,i=this.results.splice(n.index,a);this.emit("remove",i,n.index);break;case"move":a=n.howMany||1;var o=this.results.splice(n.from,a);Array.prototype.splice.apply(this.results,[n.to,0].concat(o)),this.emit("move",o,n.from,n.to)}}this.emit("changed",this.results)},a.prototype._handleExtra=function(e){this.extra=e,this.emit("extra",e)}}).call(this,n(305))},function(e,t,n){var r=n(2747),a=n(2673);function i(e,t,n,r,i){if(a.EventEmitter.call(this),"function"!=typeof i)throw new Error("Callback is required for SnapshotRequest");this.requestId=t,this.connection=e,this.id=r,this.collection=n,this.callback=i,this.sent=!1}e.exports=i,a.mixin(i),i.prototype.send=function(){this.connection.canSend&&(this.connection.send(this._message()),this.sent=!0)},i.prototype._onConnectionStateChanged=function(){this.connection.canSend?this.sent||this.send():this.sent=!1},i.prototype._handleResponse=function(e,t){if(this.emit("ready"),e)return this.callback(e);var n=t.meta?t.meta:null,a=new r(this.id,t.v,t.type,t.data,n);this.callback(null,a)}},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,a=Array.isArray,i=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),o=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)void 0!==e[r]&&(n[r]=e[r]);return n};e.exports={arrayToObject:o,assign:function(e,t){return Object.keys(t).reduce((function(e,n){return e[n]=t[n],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var i=t[r],o=i.obj[i.prop],c=Object.keys(o),l=0;l<c.length;++l){var s=c[l],u=o[s];"object"==typeof u&&null!==u&&-1===n.indexOf(u)&&(t.push({obj:o,prop:s}),n.push(u))}return function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(a(n)){for(var r=[],i=0;i<n.length;++i)void 0!==n[i]&&r.push(n[i]);t.obj[t.prop]=r}}}(t),e},decode:function(e,t,n){var r=e.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(e){return r}},encode:function(e,t,n){if(0===e.length)return e;var r=e;if("symbol"==typeof e?r=Symbol.prototype.toString.call(e):"string"!=typeof e&&(r=String(e)),"iso-8859-1"===n)return escape(r).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var a="",o=0;o<r.length;++o){var c=r.charCodeAt(o);45===c||46===c||95===c||126===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122?a+=r.charAt(o):c<128?a+=i[c]:c<2048?a+=i[192|c>>6]+i[128|63&c]:c<55296||c>=57344?a+=i[224|c>>12]+i[128|c>>6&63]+i[128|63&c]:(o+=1,c=65536+((1023&c)<<10|1023&r.charCodeAt(o)),a+=i[240|c>>18]+i[128|c>>12&63]+i[128|c>>6&63]+i[128|63&c])}return a},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(a(e)){for(var n=[],r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)},merge:function e(t,n,i){if(!n)return t;if("object"!=typeof n){if(a(t))t.push(n);else{if(!t||"object"!=typeof t)return[t,n];(i&&(i.plainObjects||i.allowPrototypes)||!r.call(Object.prototype,n))&&(t[n]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(n);var c=t;return a(t)&&!a(n)&&(c=o(t,i)),a(t)&&a(n)?(n.forEach((function(n,a){if(r.call(t,a)){var o=t[a];o&&"object"==typeof o&&n&&"object"==typeof n?t[a]=e(o,n,i):t.push(n)}else t[a]=n})),t):Object.keys(n).reduce((function(t,a){var o=n[a];return r.call(t,a)?t[a]=e(t[a],o,i):t[a]=o,t}),c)}}},,,function(e,t,n){"use strict";e.exports=n(893)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=(r=n(82))&&"object"==typeof r&&"default"in r?r.default:r;function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}var u={PUBLISH:"yuque_sdk_publish",PUBLISH_CALLBACK:"yuque_sdk_publish_callback",RESIZE_CALLBACK:"yuque_sdk_resize_callback",CONNECT:"yuque_sdk_connect",DISCONNECT:"yuque_sdk_disconnect",FULLSCREEN_CALLBACK:"yuque_sdk_fullscreen_callback",SAVE_CALLBACK:"yuque_sdk_save_callback",SET_VALUE:"yuque_sdk_set_value",GET_VALUE:"yuque_sdk_get_value",GET_VALUE_CALLBACK:"yuque_sdk_get_value_callback",INSERT_VALUE:"yuque_sdk_insert_value",CHANGE_CALLBACK:"yuque_sdk_change_callback",SET_TITLE_VALUE:"yuque_sdk_set_title_value",GET_TITLE_VALUE:"yuque_sdk_get_title_value",GET_TITLE_VALUE_CALLBACK:"yuque_sdk_get_title_value_callback",SAVE_TITLE_CALLBACK:"yuque_sdk_save_title_callback",TITLE_CHANGE_CALLBACK:"yuque_sdk_title_change_callback",SCROLL_TO:"yuque_sdk_scroll_to",DOC_LOADED_CALLBACK:"yuque_sdk_doc_loaded_callback",UNLOCK:"yuque_sdk_unlock",UNLOCK_CALLBACK:"yuque_sdk_unlock_callback",RESET:"yuque_sdk_reset",RESET_CALLBACK:"yuque_sdk_reset_callback",LOAD_CALLBACK:"yuque_sdk_load_callback"},d=0,f=new(function(e){i(n,a);var t=function(e){return function(){var t,n=o(e);if(l()){var r=o(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return s(this,t)}}(n);function n(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=t.call(this)).init=function(t){e.url=location.href,e.target=t,e._postMessageToParent({type:u.CONNECT,url:e.url}),window.addEventListener("message",(function t(n){("string"==typeof n.data?JSON.parse(n.data):n.data).type===u.CONNECT&&(e._postMessageToParent({type:u.CONNECT,url:e.url}),window.removeEventListener("message",t,!1))}),!1),window.addEventListener("unload",(function(){e._postMessageToParent({type:u.DISCONNECT,url:e.url})}))},e._postMessageToParent=function(t){e.target&&e.target.postMessage(JSON.stringify(t),"*")},e.postMessage=function(t,n){var r={type:t,message:n,messageId:++d,url:e.url};e._postMessageToParent(r)},e.handleMessage=function(t){return e.emit("message",t)},e.ready=!1,e}return n}()),p=function(e){try{var t="string"==typeof e.data?JSON.parse(e.data):e.data;f.handleMessage(t)}catch(e){console&&console.error(e)}};window&&window.parent&&window.self!==window.top&&(f.init(window.parent),window.addEventListener("message",p));t.MESSAGE_TYPES=u,t.eventHandler=p,t.handler=f,t.onMessage=function(e){return f.on("message",e)},t.postMessage=function(e,t){return f.postMessage(e,t)}},,,,,,,,,,function(e,t,n){"use strict";var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function a(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function i(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o}function o(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e}var c=function(e,t){this.target=t,this.type=e},l=function(e){function t(t,n){var r=e.call(this,"error",n)||this;return r.message=t.message,r.error=t,r}return a(t,e),t}(c),s=function(e){function t(t,n,r){void 0===t&&(t=1e3),void 0===n&&(n="");var a=e.call(this,"close",r)||this;return a.wasClean=!0,a.code=t,a.reason=n,a}return a(t,e),t}(c),u=function(){if("undefined"!=typeof WebSocket)return WebSocket},d={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+4e3*Math.random(),minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0,startClosed:!1,debug:!1},f=function(){function e(e,t,n){var r=this;void 0===n&&(n={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(e){r._debug("open event");var t=r._options.minUptime,n=void 0===t?d.minUptime:t;clearTimeout(r._connectTimeout),r._uptimeTimeout=setTimeout((function(){return r._acceptOpen()}),n),r._ws.binaryType=r._binaryType,r._messageQueue.forEach((function(e){return r._ws.send(e)})),r._messageQueue=[],r.onopen&&r.onopen(e),r._listeners.open.forEach((function(t){return r._callEventListener(e,t)}))},this._handleMessage=function(e){r._debug("message event"),r.onmessage&&r.onmessage(e),r._listeners.message.forEach((function(t){return r._callEventListener(e,t)}))},this._handleError=function(e){r._debug("error event",e.message),r._disconnect(void 0,"TIMEOUT"===e.message?"timeout":void 0),r.onerror&&r.onerror(e),r._debug("exec error listeners"),r._listeners.error.forEach((function(t){return r._callEventListener(e,t)})),r._connect()},this._handleClose=function(e){r._debug("close event"),r._clearTimeouts(),r._shouldReconnect&&r._connect(),r.onclose&&r.onclose(e),r._listeners.close.forEach((function(t){return r._callEventListener(e,t)}))},this._url=e,this._protocols=t,this._options=n,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(e,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CONNECTING",{get:function(){return e.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OPEN",{get:function(){return e.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CLOSING",{get:function(){return e.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CLOSED",{get:function(){return e.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bufferedAmount",{get:function(){return this._messageQueue.reduce((function(e,t){return"string"==typeof t?e+=t.length:t instanceof Blob?e+=t.size:e+=t.byteLength,e}),0)+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?e.CLOSED:e.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),e.prototype.close=function(e,t){void 0===e&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),this._ws?this._ws.readyState!==this.CLOSED?this._ws.close(e,t):this._debug("close: already closed"):this._debug("close enqueued: no ws instance")},e.prototype.reconnect=function(e,t){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,this._ws&&this._ws.readyState!==this.CLOSED?(this._disconnect(e,t),this._connect()):this._connect()},e.prototype.send=function(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{var t=this._options.maxEnqueuedMessages,n=void 0===t?d.maxEnqueuedMessages:t;this._messageQueue.length<n&&(this._debug("enqueue",e),this._messageQueue.push(e))}},e.prototype.addEventListener=function(e,t){this._listeners[e]&&this._listeners[e].push(t)},e.prototype.dispatchEvent=function(e){var t,n,r=this._listeners[e.type];if(r)try{for(var a=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}(r),i=a.next();!i.done;i=a.next()){var o=i.value;this._callEventListener(e,o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return!0},e.prototype.removeEventListener=function(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter((function(e){return e!==t})))},e.prototype._debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._options.debug&&console.log.apply(console,o(["RWS>"],e))},e.prototype._getNextDelay=function(){var e=this._options,t=e.reconnectionDelayGrowFactor,n=void 0===t?d.reconnectionDelayGrowFactor:t,r=e.minReconnectionDelay,a=void 0===r?d.minReconnectionDelay:r,i=e.maxReconnectionDelay,o=void 0===i?d.maxReconnectionDelay:i,c=0;return this._retryCount>0&&(c=a*Math.pow(n,this._retryCount-1))>o&&(c=o),this._debug("next delay",c),c},e.prototype._wait=function(){var e=this;return new Promise((function(t){setTimeout(t,e._getNextDelay())}))},e.prototype._getNextUrl=function(e){if("string"==typeof e)return Promise.resolve(e);if("function"==typeof e){var t=e();if("string"==typeof t)return Promise.resolve(t);if(t.then)return t}throw Error("Invalid URL")},e.prototype._connect=function(){var e=this;if(!this._connectLock&&this._shouldReconnect){this._connectLock=!0;var t=this._options,n=t.maxRetries,r=void 0===n?d.maxRetries:n,a=t.connectionTimeout,i=void 0===a?d.connectionTimeout:a,o=t.WebSocket,c=void 0===o?u():o;if(this._retryCount>=r)this._debug("max retries reached",this._retryCount,">=",r);else{if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),void 0===(l=c)||!l||2!==l.CLOSING)throw Error("No valid WebSocket class provided");var l;this._wait().then((function(){return e._getNextUrl(e._url)})).then((function(t){e._closeCalled||(e._debug("connect",{url:t,protocols:e._protocols}),e._ws=e._protocols?new c(t,e._protocols):new c(t),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout((function(){return e._handleTimeout()}),i))}))}}},e.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new l(Error("TIMEOUT"),this))},e.prototype._disconnect=function(e,t){if(void 0===e&&(e=1e3),this._clearTimeouts(),this._ws){this._removeListeners();try{this._ws.close(e,t),this._handleClose(new s(e,t,this))}catch(e){}}},e.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},e.prototype._callEventListener=function(e,t){"handleEvent"in t?t.handleEvent(e):t(e)},e.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},e.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},e.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},e}(),p=n(82),h=n.n(p),m=n(184),g=n.n(m),v=n(81);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E(e);if(t){var a=E(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return _(this,n)}}function _(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?C(e):t}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=new(n.n(v).a)("connect_base"),R={connectionTimeout:2e4,maxRetries:0,heartBeatInterval:5e3,congestionTimeout:3e3},D="connecting",A="offline",T="connected",P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(i,e);var t,n,r,a=x(i);function i(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return b(this,i),O(C(t=a.call(this)),"onOpen",(function(){S("connected"),t.status=T,t.stopCongestionMonitor(),t.emit("ready",t.socket),t._heartBeat=null})),O(C(t),"onClose",(function(e){S("close",{retryCount:t.socket.retryCount,readyState:t.socket.readyState}),t.status=A,t.emit("close",e),t.disconnect()})),O(C(t),"onMessage",(function(e){try{var n=JSON.parse(e.data);t.pong(n)}catch(t){S("invalid message",e.data)}})),O(C(t),"onError",(function(e){if(S("error",{message:e.message,retryCount:t.socket.retryCount,readyStatus:t.socket.readyState,error:e}),"TIMEOUT"===e.message)return t.status=A,void t.emit("timeout",{reason:"TIMEOUT",error:e});t.emit("error",e)})),t.url=e,t.socket=null,t.status=null,t._heartBeat=null,t.heartBeatInterval=n.heartBeatInterval||R.heartBeatInterval,t.option=Object.assign({},R,n),t.connect(),t}return t=i,(n=[{key:"connect",value:function(){this.status=D;var e=new f(this.url,[],this.option);this.socket=e,e.addEventListener("open",this.onOpen),e.addEventListener("close",this.onClose),e.addEventListener("message",this.onMessage),e.addEventListener("error",this.onError),this.startCongestionMonitor()}},{key:"startCongestionMonitor",value:function(){var e=this;this.stopCongestionMonitor(),this.congestTimer=setTimeout((function(){e.emit("congestion")}),this.option.congestionTimeout)}},{key:"stopCongestionMonitor",value:function(){this.congestTimer&&clearTimeout(this.congestTimer)}},{key:"disconnect",value:function(){this.stopHeartBeat(),this.socket&&(this.socket.removeEventListener("open",this.onOpen),this.socket.removeEventListener("close",this.onClose),this.socket.removeEventListener("message",this.onMessage),this.socket.removeEventListener("error",this.onError),this.socket.close(),this.socket=null),this.status=A}},{key:"ping",value:function(){var e=this;if(this.socket){var t={action:"heartbeat",pingId:g()(10),pingAt:+new Date};this._heartBeat&&this.transmitNetStatus("congestion"),this._heartBeat=t,this.socket.send(JSON.stringify(t)),this.status!==A&&(this.pingTimer=setTimeout((function(){e.ping()}),this.heartBeatInterval))}}},{key:"pong",value:function(e){e&&"heartbeat"===e.action&&this._heartBeat&&this._heartBeat.pingId===e.pingId&&(new Date-this._heartBeat.pingAt>this.option.congestionTimeout?this.transmitNetStatus("congestion"):this.transmitNetStatus("congestionEnd"),this._heartBeat=null)}},{key:"transmitNetStatus",value:function(e){this.netStatus!==e&&(this.emit(e),this.netStatus=e)}},{key:"stopHeartBeat",value:function(){this.pingTimer&&clearTimeout(this.pingTimer)}},{key:"startHeartBeat",value:function(){var e=this;this.pingTimer=setTimeout((function(){e.ping()}),1e3)}},{key:"broadcast",value:function(e,t){var n={action:"broadcast",data:{type:e,body:t,sender:t.user}};this.socket.send(JSON.stringify(n))}}])&&k(t.prototype,n),r&&k(t,r),i}(h.a);t.a=P},,,function(e,t,n){"use strict";var r=String.prototype.replace,a=/%20/g,i=n(2719),o={RFC1738:"RFC1738",RFC3986:"RFC3986"};e.exports=i.assign({default:o.RFC3986,formatters:{RFC1738:function(e){return r.call(e,a,"+")},RFC3986:function(e){return String(e)}}},o)},,,,,,function(e,t,n){t.Connection=n(2743),t.Doc=n(2716),t.Error=n(2689),t.Query=n(2717),t.types=n(2690),t.logger=n(2688)},function(e,t,n){(function(t){var r=n(2716),a=n(2717),i=n(2746),o=n(2748),c=n(2673),l=n(2689),s=n(2690),u=n(2674),d=n(2688),f=l.CODES;function p(e){return 0===e.readyState||1===e.readyState?"connecting":"disconnected"}function h(e){c.EventEmitter.call(this),this.collections={},this.nextQueryId=1,this.nextSnapshotRequestId=1,this.queries={},this._snapshotRequests={},this.seq=1,this.id=null,this.agent=null,this.debug=!1,this.state=p(e),this.bindToSocket(e)}function m(e,t){var n=new Error(e.message);return n.code=e.code,t&&(n.data=t),n}function g(e){return e.hasPending()}function v(e){return e.hasWritePending()}e.exports=h,c.mixin(h),h.prototype.bindToSocket=function(e){this.socket&&(this.socket.close(),this.socket.onmessage=null,this.socket.onopen=null,this.socket.onerror=null,this.socket.onclose=null),this.socket=e;var n=p(e);this._setState(n),this.canSend=!1;var r=this;e.onmessage=function(e){try{var n="string"==typeof e.data?JSON.parse(e.data):e.data}catch(t){return void d.warn("Failed to parse message",e)}r.debug&&d.info("RECV",JSON.stringify(n));var a={data:n};if(r.emit("receive",a),a.data)try{r.handleMessage(a.data)}catch(e){t.nextTick((function(){r.emit("error",e)}))}},1===e.readyState&&r._initializeHandshake(),e.onopen=function(){r._setState("connecting"),r._initializeHandshake()},e.onerror=function(e){r.emit("connection error",e)},e.onclose=function(e){"closed"===e||"Closed"===e?r._setState("closed",e):"stopped"===e||"Stopped by server"===e?r._setState("stopped",e):r._setState("disconnected",e)}},h.prototype.handleMessage=function(e){var t=null;switch(e.error&&(t=m(e.error,e),delete e.error),e.a){case"init":return this._handleLegacyInit(e);case"hs":return this._handleHandshake(t,e);case"qf":return void((n=this.queries[e.id])&&n._handleFetch(t,e.data,e.extra));case"qs":return void((n=this.queries[e.id])&&n._handleSubscribe(t,e.data,e.extra));case"qu":return;case"q":var n;if(!(n=this.queries[e.id]))return;return t?n._handleError(t):(e.diff&&n._handleDiff(e.diff),void(e.hasOwnProperty("extra")&&n._handleExtra(e.extra)));case"bf":return this._handleBulkMessage(t,e,"_handleFetch");case"bs":return this._handleBulkMessage(t,e,"_handleSubscribe");case"bu":return this._handleBulkMessage(t,e,"_handleUnsubscribe");case"nf":case"nt":return this._handleSnapshotFetch(t,e);case"f":return void((r=this.getExisting(e.c,e.d))&&r._handleFetch(t,e.data));case"s":return void((r=this.getExisting(e.c,e.d))&&r._handleSubscribe(t,e.data));case"u":return void((r=this.getExisting(e.c,e.d))&&r._handleUnsubscribe(t));case"op":var r;return void((r=this.getExisting(e.c,e.d))&&r._handleOp(t,e));default:d.warn("Ignoring unrecognized message",e)}},h.prototype._handleBulkMessage=function(e,t,n){if(t.data)for(var r in t.data){var a=t.data[r];(o=this.getExisting(t.c,r))&&(e?o[n](e):a.error?o[n](m(a.error)):o[n](null,a))}else if(Array.isArray(t.b))for(var i=0;i<t.b.length;i++){r=t.b[i];(o=this.getExisting(t.c,r))&&o[n](e)}else if(t.b)for(var r in t.b){var o;(o=this.getExisting(t.c,r))&&o[n](e)}else d.error("Invalid bulk message",t)},h.prototype._reset=function(){this.agent=null},h.prototype._setState=function(e,t){if(this.state!==e){if("connecting"===e&&"disconnected"!==this.state&&"stopped"!==this.state&&"closed"!==this.state||"connected"===e&&"connecting"!==this.state){var n=new l(f.ERR_CONNECTION_STATE_TRANSITION_INVALID,"Cannot transition directly from "+this.state+" to "+e);return this.emit("error",n)}for(var r in this.state=e,this.canSend="connected"===e,"disconnected"!==e&&"stopped"!==e&&"closed"!==e||this._reset(),this.startBulk(),this.queries){this.queries[r]._onConnectionStateChanged()}for(var a in this.collections){var i=this.collections[a];for(var r in i)i[r]._onConnectionStateChanged()}for(var r in this._snapshotRequests){this._snapshotRequests[r]._onConnectionStateChanged()}this.endBulk(),this.emit(e,t),this.emit("state",e,t)}},h.prototype.startBulk=function(){this.bulk||(this.bulk={})},h.prototype.endBulk=function(){if(this.bulk)for(var e in this.bulk){var t=this.bulk[e];this._sendBulk("f",e,t.f),this._sendBulk("s",e,t.s),this._sendBulk("u",e,t.u)}this.bulk=null},h.prototype._sendBulk=function(e,t,n){if(n){var r,a=[],i={},o=0;for(var c in n){var l=n[c];null==l?a.push(c):(i[c]=l,r=c,o++)}if(1===a.length){c=a[0];this.send({a:e,c:t,d:c})}else a.length&&this.send({a:"b"+e,c:t,b:a});if(1===o){var s=i[r];this.send({a:e,c:t,d:r,v:s})}else o&&this.send({a:"b"+e,c:t,b:i})}},h.prototype._sendAction=function(e,t,n){if(this._addDoc(t),this.bulk){var r=this.bulk[t.collection]||(this.bulk[t.collection]={}),a=r[e]||(r[e]={}),i=a.hasOwnProperty(t.id);return a[t.id]=n,i}var o={a:e,c:t.collection,d:t.id,v:n};this.send(o)},h.prototype.sendFetch=function(e){return this._sendAction("f",e,e.version)},h.prototype.sendSubscribe=function(e){return this._sendAction("s",e,e.version)},h.prototype.sendUnsubscribe=function(e){return this._sendAction("u",e)},h.prototype.sendOp=function(e,t){this._addDoc(e);var n={a:"op",c:e.collection,d:e.id,v:e.version,src:t.src,seq:t.seq};t.op&&(n.op=t.op),t.create&&(n.create=t.create),t.del&&(n.del=t.del),this.send(n)},h.prototype.send=function(e){this.debug&&d.info("SEND",JSON.stringify(e)),this.emit("send",e),this.socket.send(JSON.stringify(e))},h.prototype.close=function(){this.socket.close()},h.prototype.getExisting=function(e,t){if(this.collections[e])return this.collections[e][t]},h.prototype.get=function(e,t){var n=this.collections[e]||(this.collections[e]={}),a=n[t];return a||(a=n[t]=new r(this,e,t),this.emit("doc",a)),a},h.prototype._destroyDoc=function(e){var t=this.collections[e.collection];t&&(delete t[e.id],u.hasKeys(t)||delete this.collections[e.collection])},h.prototype._addDoc=function(e){var t=this.collections[e.collection];t||(t=this.collections[e.collection]={}),t[e.id]!==e&&(t[e.id]=e)},h.prototype._createQuery=function(e,t,n,r,i){var o=this.nextQueryId++,c=new a(e,this,o,t,n,r,i);return this.queries[o]=c,c.send(),c},h.prototype._destroyQuery=function(e){delete this.queries[e.id]},h.prototype.createFetchQuery=function(e,t,n,r){return this._createQuery("qf",e,t,n,r)},h.prototype.createSubscribeQuery=function(e,t,n,r){return this._createQuery("qs",e,t,n,r)},h.prototype.hasPending=function(){return!!(this._firstDoc(g)||this._firstQuery(g)||this._firstSnapshotRequest())},h.prototype.hasWritePending=function(){return!!this._firstDoc(v)},h.prototype.whenNothingPending=function(e){var n=this._firstDoc(g);if(n)n.once("nothing pending",this._nothingPendingRetry(e));else{var r=this._firstQuery(g);if(r)r.once("ready",this._nothingPendingRetry(e));else{var a=this._firstSnapshotRequest();a?a.once("ready",this._nothingPendingRetry(e)):t.nextTick(e)}}},h.prototype._nothingPendingRetry=function(e){var n=this;return function(){t.nextTick((function(){n.whenNothingPending(e)}))}},h.prototype._firstDoc=function(e){for(var t in this.collections){var n=this.collections[t];for(var r in n){var a=n[r];if(e(a))return a}}},h.prototype._firstQuery=function(e){for(var t in this.queries){var n=this.queries[t];if(e(n))return n}},h.prototype._firstSnapshotRequest=function(){for(var e in this._snapshotRequests)return this._snapshotRequests[e]},h.prototype.fetchSnapshot=function(e,t,n,r){"function"==typeof n&&(r=n,n=null);var a=this.nextSnapshotRequestId++,o=new i(this,a,e,t,n,r);this._snapshotRequests[o.requestId]=o,o.send()},h.prototype.fetchSnapshotByTimestamp=function(e,t,n,r){"function"==typeof n&&(r=n,n=null);var a=this.nextSnapshotRequestId++,i=new o(this,a,e,t,n,r);this._snapshotRequests[i.requestId]=i,i.send()},h.prototype._handleSnapshotFetch=function(e,t){var n=this._snapshotRequests[t.id];n&&(delete this._snapshotRequests[t.id],n._handleResponse(e,t))},h.prototype._handleLegacyInit=function(e){e.protocolMinor||this._initialize(e)},h.prototype._initializeHandshake=function(){this.send({a:"hs",id:this.id})},h.prototype._handleHandshake=function(e,t){if(e)return this.emit("error",e);this._initialize(t)},h.prototype._initialize=function(e){return 1!==e.protocol?this.emit("error",new l(f.ERR_PROTOCOL_VERSION_NOT_SUPPORTED,"Unsupported protocol version: "+e.protocol)):s.map[e.type]!==s.defaultType?this.emit("error",new l(f.ERR_DEFAULT_TYPE_MISMATCH,e.type+" does not match the server default type")):"string"!=typeof e.id?this.emit("error",new l(f.ERR_CLIENT_ID_BADLY_FORMED,"Client id must be a string")):(this.id=e.id,void this._setState("connected"))}}).call(this,n(305))},function(e,t,n){"use strict";var r,a="object"==typeof Reflect?Reflect:null,i=a&&"function"==typeof a.apply?a.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=a&&"function"==typeof a.ownKeys?a.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function c(){c.init.call(this)}e.exports=c,e.exports.once=function(e,t){return new Promise((function(n,r){function a(){void 0!==i&&e.removeListener("error",i),n([].slice.call(arguments))}var i;"error"!==t&&(i=function(n){e.removeListener(t,a),r(n)},e.once("error",i)),e.once(t,a)}))},c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var l=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?c.defaultMaxListeners:e._maxListeners}function d(e,t,n,r){var a,i,o,c;if(s(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),o=i[t]),void 0===o)o=i[t]=n,++e._eventsCount;else if("function"==typeof o?o=i[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(a=u(e))>0&&o.length>a&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,c=l,console&&console.warn&&console.warn(c)}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},a=f.bind(r);return a.listener=n,r.wrapFn=a,a}function h(e,t,n){var r=e._events;if(void 0===r)return[];var a=r[t];return void 0===a?[]:"function"==typeof a?n?[a.listener||a]:[a]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(a):g(a,a.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),c.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},c.prototype.getMaxListeners=function(){return u(this)},c.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,a=this._events;if(void 0!==a)r=r&&void 0===a.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var c=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw c.context=o,c}var l=a[e];if(void 0===l)return!1;if("function"==typeof l)i(l,this,t);else{var s=l.length,u=g(l,s);for(n=0;n<s;++n)i(u[n],this,t)}return!0},c.prototype.addListener=function(e,t){return d(this,e,t,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(e,t){return d(this,e,t,!0)},c.prototype.once=function(e,t){return s(t),this.on(e,p(this,e,t)),this},c.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,p(this,e,t)),this},c.prototype.removeListener=function(e,t){var n,r,a,i,o;if(s(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(a=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){o=n[i].listener,a=i;break}if(a<0)return this;0===a?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,a),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var a,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(a=i[r])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},c.prototype.listeners=function(e){return h(this,e,!0)},c.prototype.rawListeners=function(e){return h(this,e,!1)},c.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},c.prototype.listenerCount=m,c.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t){var n=["info","warn","error"];function r(){var e={};n.forEach((function(t){e[t]=console[t].bind(console)})),this.setMethods(e)}e.exports=r,r.prototype.setMethods=function(e){e=e||{};var t=this;n.forEach((function(n){"function"==typeof e[n]&&(t[n]=e[n])}))}},function(e,t,n){var r=n(2718),a=n(2674);function i(e,t,n,i,o,c){if(r.call(this,e,t,n,i,c),!a.isValidVersion(o))throw new Error("Snapshot version must be a positive integer or null");this.version=o}e.exports=i,i.prototype=Object.create(r.prototype),i.prototype._message=function(){return{a:"nf",id:this.requestId,c:this.collection,d:this.id,v:this.version}}},function(e,t){e.exports=function(e,t,n,r,a){this.id=e,this.v=t,this.type=n,this.data=r,this.m=a}},function(e,t,n){var r=n(2718),a=n(2674);function i(e,t,n,i,o,c){if(r.call(this,e,t,n,i,c),!a.isValidTimestamp(o))throw new Error("Snapshot timestamp must be a positive integer or null");this.timestamp=o}e.exports=i,i.prototype=Object.create(r.prototype),i.prototype._message=function(){return{a:"nt",id:this.requestId,c:this.collection,d:this.id,ts:this.timestamp}}},,,,,,function(e,t,n){"use strict";n(53);var r=n(19),a=n(0),i=n(81),o=n.n(i),c=n(501),l=n(21),s=n(2013),u=n(886),d=n(58),f=n(164),p=n.n(f),h=n(2011),m=n(109),g=n.n(m),v=n(124),y=n(2650);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E(e);if(t){var a=E(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return C(this,n)}}function C(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=o()("editor:doc.biz"),S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(i,e);var t,n,r,a=_(i);function i(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return k(this,i),(t=a.call(this,e,n)).dispatch=r,t.storage=v.a,t}return t=i,r=[{key:"uploadCover",value:function(e){var t=e.image,n=e.doc_id,r=window.navigator.userAgent,a=p.a.detect(r);if(a.msie||a.msedge)return Promise.resolve(null);var i="/api/upload/attach?attachment_type=Doc&attachment_id=".concat(n,"type=image"),o=y.a.adaptDocPreviewImageToFormData(t);return new Promise((function(e,t){Object(d.ajax)({url:i,data:o,dataType:"json",success:function(t){O("upload cover success",t.data),e(t.data.url)},error:function(){O("upload cover error"),t(new Error("DocEditorBiz.uploadCover failed."))},method:"POST",processData:!1})}))}}],(n=[{key:"doSaveOutdatedDocVersion",value:function(e){l.b.docVersions.create(e)}},{key:"loadDefaultMentionUsers",value:function(e,t){if(t.public===g.a.PUBLIC.private_book){if(Array.isArray(t.collaborators)&&t.collaborators.length>0)return;return this.dispatch({type:"book/getCollaborators",payload:{data:{target_id:t.id,target_type:"Book"}}}).then((function(e){t.collaborators=e})),void this.dispatch({type:"group/getOwners",payload:{data:{login:e.login,book_id:t.id}}}).then((function(t){e.owners=t}))}"Group"===e.type&&this.dispatch({type:"group/getMembers",payload:{data:{group_id:e.id}}}).then((function(t){e.members=t}))}}])&&w(t.prototype,n),r&&w(t,r),i}(h.a);function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=window.appData.callbackURL;if(n){if("SAME"===n)return;e=n}e&&(t.beforeRedirect&&t.beforeRedirect(),window.location.href=e)}var D=n(1984),A=n(2012),T=n(1750),P=n(942),j=n(2742),M=n.n(j),N=n(82),L=n.n(N),I=n(62),z=n.n(I),B=n(893),F=n.n(B),V=n(261),U=n(171),q=n(2733);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Z(e);if(t){var a=Z(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return X(this,n)}}function X(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?$(e):t}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var J=o()("editor:doc:collabManager"),ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(i,e);var t,n,r,a=K(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Q($(r=a.call(this)),"onMessage",(function(e){var t=JSON.parse(e.data);if(t.action&&J("message, action: ",t.action,t.data),"members"===t.action)return r.addMembers(t.data),r.engine.ot.setMembers(t.data),void r.reportCollabUserCount(t.data.length);if("join"===t.action)return r.addMembers([t.data]),void r.engine.ot.addMember(t.data);if("leave"===t.action)return r.engine.ot.removeMember(t.data),void r.removeMember(t.data);("ready"===t.action&&(r.currentMember=t.data,r.engine.ot.setCurrentMember(t.data),r.loadCollabDoc()),"broadcast"===t.action)&&(t.data.body.user.uuid!==r.currentMember.uuid&&r.emit(c.h.message,t.data))})),r.doc=e,r.dispatch=t,r.ctx=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){Q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n),r.initialContent=n.initialContent,r.socket=null,r.engine=n.engine,r.users=[],r.currentMember=null,r.openEditorConfig=new D.a,r}return t=i,(n=[{key:"reset",value:function(){this.users=[],this.currentMember=null,this.disconnect()}},{key:"resetDoc",value:function(e,t){this.doc=e,e.collab&&(this.ctx.collab=e.collab),t&&(this.initialContent=t.value)}},{key:"connect",value:function(){var e=this;this.reset();var t=this.ctx.collab,n="".concat(t.host,"/?id=").concat(t.id,"&token=").concat(t.token);J("connect",n);var r=new q.a(n);r.on("ready",(function(t){t&&(e.socket=t,t.addEventListener("message",e.onMessage),window.__collab_socket=t,e.connectTime=+new Date)})),r.on("close",(function(t){J("collab server connection close",{event:t});var n=!!e.socket;e.disconnect(),!n||e.justConnect()?e.emit(c.h.error,{code:c.d.CONNECT_COLLAB_SERVER_FAILED}):e.emit(c.h.error,{code:c.d.DISCONNECTED})})),r.on("congestion",(function(){e.transmitNetStatus("congestion")})),r.on("congestionEnd",(function(){e.transmitNetStatus("congestionEnd")})),this.connection=r}},{key:"justConnect",value:function(){return this.connectTime&&+new Date-this.connectTime<3e3}},{key:"reportCollabUserCount",value:function(e){var t=this.doc.format;V.a.logCollabUserCount(t,e)}},{key:"loadCollabDoc",value:function(){var e=this;if(this.openEditorConfig.saveToServer){var t=this.ctx.collab;J("start load collab doc",t.id);var n=new M.a.Connection(this.socket);n.on("receive",(function(e){J("receive",e.data)}));var r=n.get("lake",t.id);r.subscribe((function(t){if(t)J("collab doc subscribe error",t);else try{J("ot doc loaded",r),e.initOt(r);var n=e.normalizeMembers();e.emit(c.h.collabUsersChange,n)}catch(e){J("lake engine init failed:",e)}})),r.on("create",(function(){J("collab doc create",r)})),r.on("load",(function(){})),r.on("op",(function(e,t){})),r.on("del",(function(e,t){J("collab doc deleted",e,t)})),r.on("error",(function(e){J("collab doc error",{error:e,origin_code:e.code})}))}}},{key:"initOt",value:function(e){if(this.openEditorConfig.saveToServer){var t=this.doc.format;J("init ot"),t===z.a.FORMAT.LAKE?(this.engine.ot.init(e),F.a.isBlank({format:t,value:this.initialContent})&&this.doc.title===U.a.getDefaultTitle()||(J("focus to editor content area"),this.engine.focus())):t===z.a.FORMAT.LAKESHEET&&this.engine.ot.init(e),this.connection.startHeartBeat(),this.emit("ready")}}},{key:"disconnect",value:function(){try{this.socket&&(this.socket.removeEventListener("message",this.onMessage),this.socket=null),this.connection&&(this.connection.disconnect(),this.connection=null)}catch(e){}}},{key:"isAlive",value:function(){return!!this.connection}},{key:"isOnlyOneCollabSession",value:function(){return 1===this.users.length}},{key:"needRedirectToLock",value:function(){return!this.socket||!(!this.connection||"congestion"!==this.connection.netStatus||!this.isOnlyOneCollabSession())}},{key:"onDocDeleted",value:function(){J("doc deleted"),this.connection&&this.connection.broadcast(c.f.DOC_DELETED,{user:this.currentMember})}},{key:"onDocPublished",value:function(){J("doc deleted"),this.connection&&this.connection.broadcast(c.f.DOC_PUBLISHED,{user:this.currentMember})}},{key:"addMembers",value:function(e){var t=this;this.users=this.users.concat(e),setTimeout((function(){t.emit(c.h.collabUsersChange,t.normalizeMembers())}),1e3)}},{key:"removeMember",value:function(e){this.users=this.users.filter((function(t){return t.uuid!==e.uuid})),this.emit(c.h.collabUsersChange,this.normalizeMembers())}},{key:"normalizeMembers",value:function(){var e=[],t={};this.engine.ot.getMembers().forEach((function(e){t[e.uuid]=e.color}));for(var n={},r=this.users.length;r>0;r--){var a=this.users[r-1];if(!n[a.login]){var i=Object.assign({},a);i.color=t[a.uuid],n[a.login]=a,a.login!==this.ctx.me.login&&e.push(i)}}return e}},{key:"transmitNetStatus",value:function(e){this.emit(c.h.netStatusChange,e)}}])&&Y(t.prototype,n),r&&Y(t,r),i}(L.a);function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ae(e,t,n,r,a,i,o){try{var c=e[i](o),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function ie(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){ae(i,r,a,o,c,"next",e)}function c(e){ae(i,r,a,o,c,"throw",e)}o(void 0)}))}}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=de(e);if(t){var a=de(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return se(this,n)}}function se(e,t){return!t||"object"!==te(t)&&"function"!=typeof t?ue(e):t}function ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pe=o()("editor:doc:wf"),he=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(m,e);var t,n,a,i,o,s,d,f,p,h=le(m);function m(e){var t,n=e.group,a=e.book,i=e.doc,o=e.docDomain,s=e.dispatch,d=e.params,f=e.mode;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),fe(ue(t=h.call(this,{doc:i,mode:f})),"doBindEvents",(function(){t.pageStatus.on("close",t.onPageInactive.bind(ue(t))),t.pageStatus.on("blur",t.onPageInactive.bind(ue(t))),t.pageStatus.on("idle",t.onPageInactive.bind(ue(t))),t.pageStatus.on("hide",t.onPageLeave.bind(ue(t))),t.pageStatus.on("show",t.onPageActive.bind(ue(t))),t.pageStatus.on("active",t.onPageActive.bind(ue(t))),t.pageStatus.registerCloseChecker(t.closeAble.bind(ue(t))),t.pageStatus.on("hide",(function(){t.performance.pause()})),t.pageStatus.on("active",(function(){t.performance.resume()})),t.pageStatus.on("close",(function(){t.performance.reportSmooth(),t.userAction.report()}))})),fe(ue(t),"doSaveDoc",function(){var e=ie(regeneratorRuntime.mark((function e(n){var r,a,i,o,l,s,d,f,p,h,m,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ue(t),a=r.doc,i=a.id,o=a.format,l=t.engine.getEditorContent({fullHTML:t.openEditorConfig.fullHTML}),s=l.content,d=l.html,f=l.premium,p=l.premiumHtml,pe("doSaveDoc",t.currentMode),h={premium_body_asl:f,premium_body_html:p,save_type:n===c.g.AUTO?"auto":"user",edit_type:"collab"===t.currentMode?u.EDIT_TYPE.LAKE_COLLAB:u.EDIT_TYPE.LAKE},t.autoPublish&&(h.target_uuid=new URLSearchParams(window.location.search).get("toc_node_uuid")),(m={id:i,format:o,body_asl:s,body:d,body_html:d,draft_version:a.draft_version}).draft_version||(m._without_draft_version=1),pe("doc save lake doc: ",m),e.next=12,t.modelProxy.updateContent(t.docDomain===T.DOCLET?m:re(re({},m),h),{ignoreGlobalMessage:!0});case 12:return g=e.sent,e.abrupt("return",g);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),fe(ue(t),"doPublishDoc",function(){var e=ie(regeneratorRuntime.mark((function e(n){var r,a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.autoPublish){e.next=2;break}return e.abrupt("return");case 2:return n=n||{notify:!1},r={id:t.doc.id,force:!1,notify:!0===n.notify,cover:null,ignoreGlobalMessage:!0},window.h5&&(r.insertToCatalog=!0),(a=t.engine.getPremium())&&(r.premium=a),e.next=9,t.getDocCover();case 9:return(i=e.sent)&&(r.cover=i),o=t.docDomain===T.DOCLET?{id:t.doc.id}:r,e.next=14,t.modelProxy.publish(o,{ignoreGlobalMessage:!0});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),fe(ue(t),"getOpenEditorConfig",(function(){return t.openEditorConfig})),fe(ue(t),"useTemplate",(function(e){var n=e.title,a=e.content;t.engine.setContent(a),t.transmitDocStatus(c.a.changed),t.isDefaultTitle(t.doc.title)&&l.b.docs.updateMeta({id:t.doc.id,title:n}).then((function(){t.dispatch({type:"doc/update",payload:{title:n}})})).catch((function(e){r.a.warn("save title failed")})),t.doc.title=n})),t.group=n,t.book=a,t.params=d||{},t.dispatch=s,t.me=window.appData.me,t.docDomain=o||T.DOC,t.modelProxy=o===T.DOCLET?l.b.doclets:l.b.docs,t.openEditorConfig=new D.a,t.pageStatus=new A.a,t}return t=m,(n=[{key:"onStarted",value:function(){this.editorBiz.loadDefaultMentionUsers(this.group,this.book),this.startAutoSave(),this.performance.startHeartbeat()}},{key:"onSaveSuccess",value:function(){if(this.startAutoSave(),this.autoPublish)try{this.saveEditorMeta({isDraft:!1})}catch(e){pe("saveEditorMeta error",e)}this.performance.reportSmooth()}},{key:"startAutoSave",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300;this.autoSaveTimer&&clearTimeout(this.autoSaveTimer),this.autoSaveTimer=setTimeout((function(){e._changeTime&&new Date-e._changeTime<1e4?e.startAutoSave(10):(e.save(c.g.AUTO),e.startAutoSave())}),1e3*t)}},{key:"onLockError",value:function(e){var t=!1;return e.code===c.d.LOCKED_BY_COLLAB&&this.defaultMode===c.b.COLLAB&&this.useMode("collab")&&(this.start(),t=!0),t}},{key:"createEditorBiz",value:function(e){return new S(e,{docDomain:this.docDomain},this.dispatch)}},{key:"onDocUpdated",value:function(e){!e.contributors||this.doc.contributors&&this.doc.contributors.length===e.contributors.length||this.dispatch({type:"doc/update",payload:{contributors:e.contributors}}),this.collab=e.collab}},{key:"needCache",value:function(){return!(this.openEditorConfig.isServify&&!this.openEditorConfig.saveToServer)}},{key:"needLoad",value:function(){return!(this.openEditorConfig.isServify&&!this.openEditorConfig.saveToServer)}},{key:"doLoadDoc",value:(p=ie(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.doc,n=this.docDomain===T.DOCLET?{id:t.id,category:T.CATEGORY.BOOK_INDEX_PAGE,target_type:"Book",target_id:t.target_id}:{id:t.slug,book_id:t.book_id,mode:"edit"},e.next=4,this.modelProxy.findOne(n,{ignoreGlobalMessage:!0});case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"doCreateCollabManager",value:function(){return new ee(this.doc,this.dispatch,{book:this.book,group:this.group,engine:this.engine.getOriginEngine(),me:this.me,collab:this.collab,initialContent:this.initialDocument.value})}},{key:"getDocCover",value:(f=ie(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.engine.getThumbnail();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0="";case 5:if(!(t=e.t0).startsWith("https:")){e.next=8;break}return e.abrupt("return",t);case 8:if(!t){e.next=18;break}return e.prev=9,e.next=12,S.uploadCover({image:t,doc_id:this.doc.id});case 12:return e.abrupt("return",e.sent);case 15:e.prev=15,e.t1=e.catch(9),pe("upload cover error",e.t1);case 18:case"end":return e.stop()}}),e,this,[[9,15]])}))),function(){return f.apply(this,arguments)})},{key:"isActive",value:function(){return this.pageStatus.isActive}},{key:"onPublishSuccess",value:(d=ie(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.docDomain===T.DOCLET){e.next=9;break}return e.prev=1,e.next=4,this.saveEditorMeta({isDraft:!1});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),pe("saveEditorMeta error",e.t0);case 9:this.currentMode===c.b.LOCK&&this.exit({unlock:!0}),this.currentMode===c.b.COLLAB&&this.collabManager.onDocPublished(),P.a.saveEditPosition(this.doc.id,this.doc.format),setTimeout((function(){R(t.buildRedirectToUrlForPublish())}),1e3);case 13:case"end":return e.stop()}}),e,this,[[1,6]])}))),function(){return d.apply(this,arguments)})},{key:"doLock",value:(s=ie(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.modelProxy.lock(t,{ignoreGlobalMessage:!0}));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"doUnlock",value:(o=ie(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.modelProxy.unlock(t,{ignoreGlobalMessage:!0}));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"buildRedirectToUrlForPublish",value:function(){var e=this.book,t=this.doc,n=this.params,r=this.docDomain;return"lakesheet"===t.format&&r===T.DOC?"/".concat(e.namespace,"/").concat(t.slug).concat(window.location.hash):r===T.DOCLET?t.category===T.CATEGORY.TEMPLATE?window.location.href.replace(/\/[^\/]+?$/,""):"/".concat(window.appData.group.login,"/").concat(window.appData.book.slug):n.group&&n.book?"/".concat(n.group,"/").concat(n.book,"/").concat(t.slug):"/go/doc/".concat(t.id)}},{key:"doSaveEditorMeta",value:(i=ie(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.b.docs.updateEditorMeta(t);case 2:this.dispatch({type:"doc/updateEditorMetas",payload:t});case 3:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"isDefaultTitle",value:function(e){return S.isDefaultTitle(e)}},{key:"onDocDeleted",value:function(){var e=this.group,t=this.book;this.currentMode===c.b.COLLAB&&this.collabManager.onDocDeleted(),setTimeout((function(){R("/".concat(e.login,"/").concat(t.slug))}),1e3)}},{key:"autoPublish",get:function(){return this.book&&this.book.enable_auto_publish&&this.docDomain!==T.DOCLET}}])&&oe(t.prototype,n),a&&oe(t,a),m}(s.a),me=n(119);function ge(e,t,n,r,a,i,o){try{var c=e[i](o),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function ve(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){ge(i,r,a,o,c,"next",e)}function c(e){ge(i,r,a,o,c,"throw",e)}o(void 0)}))}}function ye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return be(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ke=o()("editor:doc:vm");t.a=function(e){var t=e.doc,n=e.docDomain,i=e.book,o=e.group,l=e.dispatch,s=ye(Object(a.useState)(!1),2),u=s[0],d=s[1],f=ye(Object(a.useState)(!1),2),p=f[0],h=f[1],m=ye(Object(a.useState)(!1),2),g=m[0],v=m[1],b=ye(Object(a.useState)(null),2),k=b[0],w=b[1],x=ye(Object(a.useState)(!1),2),_=x[0],C=x[1],E=ye(Object(a.useState)(null),2),O=E[0],S=E[1],R=ye(Object(a.useState)([]),2),D=R[0],A=R[1],T=ye(Object(a.useState)("lock"),2),P=T[0],j=T[1],M=ye(Object(a.useState)(null),2),N=M[0],L=M[1],I=ye(Object(a.useState)(c.a.loading),2),z=I[0],B=I[1],F=ye(Object(a.useState)(""),2),V=F[0],U=F[1],q=Object(a.useMemo)((function(){return ke("create workflow instance"),new he({doc:t,docDomain:n,book:i,group:o,dispatch:l,mode:window.appData&&window.appData.matchCondition&&window.appData.matchCondition.editType&&window.appData.matchCondition.editType.includes("Collab")?c.b.COLLAB:c.b.LOCK,scene:c.c.WEB})}),[]),H=Object(a.useMemo)((function(){return me.a.getEditorTheme(t,o)}),[t,o]),W=function(){var e=ve(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.save(t||c.g.USER_SAVE);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=ve(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ke("on publish:",t),e.next=3,q.publish(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(e){if(ke("editable change",e),v(e),e){var t=q.isEmptyDoc();ke("empty doc, show wizard view:",t),h(t)}else h(!1)},K=function(e){e===c.a.saved&&w(new Date),B(e)};return{state:{historyView:u,wizardView:p,editable:g,editorLoaded:_,docStatus:z},getWorkflow:function(){return q},getTheme:function(){return H},getOpenEditorConfig:function(){return q.getOpenEditorConfig()},useTemplate:function(e){h(!1),q.useTemplate(e)},start:function(){var e=ve(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q.on(c.h.editableChange,G),q.on(c.h.error,S),q.on(c.h.collabUsersChange,A),q.on(c.h.editModeChange,j),q.on(c.h.message,L),q.on(c.h.docStatusChange,K),q.on(c.h.netStatusChange,U),e.next=9,q.start();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onEditableChange:G,onSave:W,onPublish:Y,buildStatusProps:function(){return{book:i,doc:t,error:O,wfMessage:N,docStatus:z,netStatus:V,onReload:function(){q.start()},onClear:function(){q.clearError()}}},buildHistoryProps:function(){return{docId:t.id,doc:t,docDomain:n,onCancel:function(){d(!1)},onRevert:function(e){q.isOnlyOneEditSession()?(r.a.success(__("文档恢复成功")),q.revert(e),d(!1)):0!==D.length?r.a.error(__("有其他用户正在编辑该文档，恢复可能会导致对方编辑的内容丢失，请联系他们退出编辑后再进行恢复")):r.a.error(__("你同时打开了多个浏览器窗口编辑该文档，请关闭其它窗口再进行恢复"))}}},buildEditorProps:function(){return{doc:t,docDomain:n,book:i,group:o,theme:H,editable:g,openEditorConfig:q.getOpenEditorConfig(),onSave:W,onPublish:Y,onEditorLoaded:function(e){C(!0),q.onEditorLoaded(e)},onSaveTitle:q.onSaveTitle,onTitleChange:function(){h(!1)},getDefaultSuggestions:function(){return y.a.defaultMentionUsers(q.group,q.book)},onThemeChange:q.saveDocTheme,onContentChange:function(e){h(!1),q.onContentChange(e)},onMiniEditorExpandChange:q.onMiniEditorExpandChange}},buildHeadProps:function(){return{pageReady:g&&z!==c.a.loading,editing:g,publishing:z===c.a.publishing||!!q.publishing,saving:z===c.a.saving||!!q.saving,savedAt:k,collabUsers:P===c.b.COLLAB?D:null,inferNotify:q.inferNotify,showTitle:!!t.title,shortDocTitle:window.appData.isDocCollaborator,publish:Y,save:W,showHistory:function(){d(!0)},getSummary:q.getSummary,getWordCount:q.getWordCount,onDeleted:function(){q.deleteDoc()}}},buildH5EditorProps:function(){return{doc:t,book:i,group:o,onChange:function(e){q.onContentChange(e)},getDefaultSuggestions:function(){return y.a.defaultMentionUsers(o,i)},onLoad:function(e){C(!0),q.onEditorLoaded(e)},onAutoSave:function(){W(c.g.AUTO)},onSave:W,onPublish:Y,openEditorConfig:q.getOpenEditorConfig()}}}}},function(e,t,n){"use strict";n(53);var r=n(19),a=n(525),i=n.n(a),o=n(165),c=n.n(o),l=(n(1009),n(1729)),s=(n(45),n(16)),u=n(0),d=n.n(u),f=n(2),p=n.n(f),h=n(7),m=n.n(h),g=n(127),v="StatusView-module_wrap_fKcVz",y="StatusView-module_tip_3jY_w",b="StatusView-module_error_3M0tu",k="StatusView-module_title_13GKh",w="StatusView-module_content_1D27_",x="StatusView-module_action_6o56r",_="StatusView-module_noticeWrap_3PDuk",C="StatusView-module_notice_2Z8hf",E="StatusView-module_mask_2dx4t";function O(e){var t,n,a,o=e.book,u=e.doc,f=e.error,p=e.docStatus,h=e.onReload,O=e.wfMessage,S=e.onClear,R=d.a.createElement(s.a,{type:"primary",onClick:h,"data-testid":"reload"},__("重新加载")),D=d.a.createElement(s.a,{type:"primary",onClick:S,"data-testid":""},__("知道了")),A=function(e,t){l.a.destroy(),l.a.open({message:d.a.createElement("div",{"data-testid":e},t)})},T=d.a.createElement("div",{className:_,"data-testid":"collab-network-failed"},d.a.createElement("div",{className:C},d.a.createElement(i.a,null)," ",__("你的网络无法连接协同服务，请检查网络后刷新重试"))),P=d.a.createElement("div",{className:b,"data-testid":"network-error-view"},d.a.createElement("p",{className:k},d.a.createElement(c.a,null)," ",__("文档加载失败")),d.a.createElement("p",{className:w},__("网络异常，请检查网络连接是否正常")),d.a.createElement("p",{className:x},R)),j=d.a.createElement("div",{className:b,"data-testid":"locked-by-desktop-error-view"},d.a.createElement("p",{className:k},d.a.createElement(c.a,null)," ",__("你正在使用语雀桌面端编辑此文档")),d.a.createElement("p",{className:w},__("语雀当前不支持使用桌面端和浏览器同时编辑")),d.a.createElement("p",{className:x},d.a.createElement(s.a,{href:o?"/".concat(o.namespace,"/").concat(u.slug):"/dashboard"},__("退出编辑")))),M=d.a.createElement("div",{className:b,"data-testid":"locked-by-self-force-error-view"},d.a.createElement("p",{className:k},d.a.createElement(c.a,null)," ",__("你正在其它窗口编辑该文档")),d.a.createElement("p",{className:w},__("请重新加载最新的编辑内容")),d.a.createElement("p",{className:x},R)),N=d.a.createElement("div",{className:b,"data-testid":"locked-by-versionConflict-error-view"},d.a.createElement("p",{className:k},d.a.createElement(c.a,null)," ",__("文档内容有更新")),d.a.createElement("p",{className:w},__("请基于最新内容重新编辑")),d.a.createElement("p",{className:x},R)),L=function(e){var t=e.type;A(t,__("正在保存，请稍候"))};if(O&&!O.readed){switch(O.type){case g.MESSAGE.DOC_PUBLISHED:n=(t=O).body,a=t.type,A(a,__("{user} 刚刚 {action} 了文档",{user:n.user.name,action:u.published_at?__("更新"):__("发布")}));break;case g.MESSAGE.DOC_CACHE_SAVED:!function(e){var t=e.type;A(t,__("已为你加载最新编辑版本，本地离线缓存已保存到历史版本"))}(O);break;case g.MESSAGE.SAVING:L(O);break;case g.MESSAGE.SAVE_FAILED:!function(e){A(e.type,d.a.createElement(d.a.Fragment,null,d.a.createElement("p",null,__("网络异常，保存失败")),d.a.createElement("p",null,__("编辑内容暂存至本地缓存中，将在网络恢复后与云端同步"))))}(O);break;case g.MESSAGE.DISCONNECT:!function(e){A(e.type,__("网络连接异常，编辑内容已保存至离线缓存"))}(O);break;case g.MESSAGE.UNREADY:!function(e){A(e.type,__("文档准备中，请稍候"))}(O);break;case g.MESSAGE.EDIT_DISABLE:!function(e){A(e.type,__("正在连接服务，已保存至离线缓存，请稍候重试"))}(O);break;case g.MESSAGE.CACHE_FAILED:!function(e){A(e.type,__("本地缓存失败，避免丢失内容，请手动保存"))}(O);break;case g.MESSAGE.RENDER_BIG_DOCUMENT:!function(e){A(e.type,__("文档较大，正在努力渲染，请稍等一下"))}();break;case g.MESSAGE.BUZY:O.data.docStatus===g.DOC_STATUS.saving?L(O):O.data.docStatus===g.DOC_STATUS.publishing&&function(e){var t=e.type;A(t,__("正在发布，请稍候"))}(O);break;case g.MESSAGE.CLEAR:l.a.destroy()}O.readed=!0}p===g.DOC_STATUS.loading?(r.a.destroy(),r.a.loading(d.a.createElement("span",{"data-testid":"loading"},__("正在加载")),0)):p===g.DOC_STATUS.published?(r.a.destroy(),r.a.success(d.a.createElement("span",{"data-testid":"loading"},__("内容发布成功")),3)):p===g.DOC_STATUS.loaded&&r.a.destroy();var I,z,B,F,V,U,q=!1,H="";if(f)switch(f.code){case g.ERROR_CODE.INIT_FAILED:H="network"===f.type?P:d.a.createElement("div",{className:b,"data-testid":"load-doc-fail-view"},d.a.createElement("p",{className:k},d.a.createElement(c.a,null)," ",__("文档加载失败")),404===f.status?d.a.createElement(d.a.Fragment,null,d.a.createElement("p",{className:w,"data-testid":"doc-not-found"},__("文档已被删除或无访问权限")),d.a.createElement("p",{className:x},d.a.createElement(s.a,{href:o?"/".concat(o.namespace,"/").concat(u.slug):"/dashboard"},__("退出编辑")))):d.a.createElement(d.a.Fragment,null,d.a.createElement("p",{className:w,"data-testid":"doc-load-error"},__("你可以尝试重新加载，或者退出编辑")),d.a.createElement("p",{className:x},d.a.createElement(s.a,{href:o?"/".concat(o.namespace,"/").concat(u.slug):"/dashboard"},__("退出编辑")),404!==f.status&&R))),q=!0;break;case g.ERROR_CODE.CONNECT_COLLAB_SERVER_FAILED:H=T,q=!0;break;case g.ERROR_CODE.SAVE_FAILED:B=f.message,H=d.a.createElement("div",{className:b,"data-testid":"save-failed-error-view"},d.a.createElement("p",{className:k},d.a.createElement(c.a,null)," ",__("文档保存失败")),d.a.createElement("p",{className:w},B),d.a.createElement("p",{className:w},__("本次编辑的内容已经保存至离线缓存")),d.a.createElement("p",{className:x},D)),q=!0;break;case g.ERROR_CODE.PUBLISH_FAILED:H=function(e){return d.a.createElement("div",{className:b,"data-testid":"publish-failed-error-view"},d.a.createElement("p",{className:k},d.a.createElement(c.a,null)," ",__("文档发布失败")),d.a.createElement("p",{className:w},e),d.a.createElement("p",{className:w},__("本次编辑的内容已经保存至离线缓存")),d.a.createElement("p",{className:x},D))}(f.message),q=!0;break;case g.ERROR_CODE.LOCKED_BY_COLLAB:z=f.lock.collab_members,H=d.a.createElement("div",{className:b,"data-testid":"locked-by-collab-error-view"},d.a.createElement("p",{className:k},d.a.createElement(c.a,null)," ",__("{user} 正在与其他人编辑该文档",{user:z[0].name})),d.a.createElement("p",{className:w},__("当前网络无法进入协同编辑，请检查网络后刷新重试"))),q=!0;break;case g.ERROR_CODE.LOCKED_BY_OTHER:I=f.lock.locker,H=d.a.createElement("div",{className:b,"data-testid":"locked-by-other-error-view"},d.a.createElement("p",{className:k},d.a.createElement(c.a,null)," ",__("{user} 正在编辑该文档",{user:I.name})),d.a.createElement("p",{className:w},__("请等待对方完成编辑后，再进行编辑")),d.a.createElement("p",{className:x},d.a.createElement(s.a,{href:o?"/".concat(o.namespace,"/").concat(u.slug):"/dashboard"},__("退出编辑")))),q=!0;break;case g.ERROR_CODE.LOCKED_BY_DESKTOP:H=j,q=!0;break;case g.ERROR_CODE.LOCKED_BY_SELF_FORCE:H=M,q=!0;break;case g.ERROR_CODE.LOCKED_BY_VERSIONCONFLICT:H=N,q=!0;break;case g.ERROR_CODE.LOCK_FAILED:H=function(e){return d.a.createElement("div",{className:b,"data-testid":"lock-failed-error-view"},d.a.createElement("p",{className:k},d.a.createElement(c.a,null)," ",__("无法获得单人编辑权限")),d.a.createElement("p",{className:w},e),d.a.createElement("p",{className:w},__("为避免编辑出错，请检查后重试")),d.a.createElement("p",{className:x},R))}(f.message),q=!0;break;case g.ERROR_CODE.DOC_DELETED:H=function(e){return d.a.createElement("div",{className:b,"data-testid":"doc-deleted-view"},d.a.createElement("p",{className:k},d.a.createElement(c.a,null)," ",__("当前文档已被 {user} 删除",{user:e.body.user.name})),d.a.createElement("p",{className:w},__("你可以通过知识库的 回收站 找到此篇文档")),d.a.createElement("p",{className:x},D))}(f.data),q=!0;break;case g.ERROR_CODE.DOC_NOT_EXIST:H=d.a.createElement("div",{className:b,"data-testid":"publish-failed-error-view"},d.a.createElement("p",{className:k},d.a.createElement(c.a,null)," ",__("文档保存失败")),d.a.createElement("p",{className:w},__("文档不存在或者已经被删除")),d.a.createElement("p",{className:x},D)),q=!0;break;case g.ERROR_CODE.DOC_SAVE_CONFLICT:H=d.a.createElement("div",{className:b,"data-testid":"publish-failed-error-view"},d.a.createElement("p",{className:k},d.a.createElement(c.a,null)," ",__("文档保存冲突")),d.a.createElement("p",{className:w},__("文档已被修改，此次保存将保存到历史版本，请基于最新文档进行修改")),d.a.createElement("p",{className:x},R)),q=!0;break;case g.ERROR_CODE.CACHE_FAILED:H=d.a.createElement("div",{className:b,"data-testid":"cache-failed-view"},d.a.createElement("p",{className:k},d.a.createElement(c.a,null)," ",__("自动保存提醒")),d.a.createElement("p",{className:w},__("发现本地缓存异常，为避免自动保存失败，请确认保存成功后再离开")),d.a.createElement("p",{className:x},D)),q=!0}return H?d.a.createElement("div",{"data-testid":"mask",className:m()(v,(F={},V=E,U=q,V in F?Object.defineProperty(F,V,{value:U,enumerable:!0,configurable:!0,writable:!0}):F[V]=U,F))},d.a.createElement("div",{className:y},H)):null}O.propTypes={netStatus:p.a.string,docStatus:p.a.string,collabUsers:p.a.array,book:p.a.object,doc:p.a.object.isRequired,error:p.a.object,wfMessage:p.a.object,onReload:p.a.func,onClear:p.a.func};t.a=O},,function(e,t,n){"use strict";n.d(t,"a",(function(){return x})),n.d(t,"c",(function(){return _}));n(53);var r=n(19),a=n(0),i=n.n(a),o=n(2),c=n.n(o),l=n(79),s=n.n(l),u=n(2758),d=n.n(u),f=n(2723),p=n(119),h=n(501);function m(e,t,n,r,a,i,o){try{var c=e[i](o),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w=new(n(1984).a),x=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};b(this,e),this.doc=n.doc,this.getContent=n.getContent,this.workflow=n.workflow,this.engine=n.workflow?n.workflow.engine:n.engine,this._title=this.doc&&this.doc.title,this.getTitle=function(){return t._title},w.saveToServer||(this.getTitle=n.getTitle||function(){return this.doc?this.doc.title:null}),this.change=s()(this.change,300),this.onMessage=f.onMessage,this.MESSAGE_TYPES=f.MESSAGE_TYPES,"off"===w.extraConfig.message&&r.a.config({top:-9999})}var t,n,a,i,o;return t=e,(n=[{key:"_postContentMessage",value:function(e,t){if(t||(t={status:"success",message:"ok"}),t.id=this.doc.slug,"success"===t.status)return this._getEmbedData().then((function(n){t.data=v(v({},n),t.data||{}),Object(f.postMessage)(e,t)}));Object(f.postMessage)(e,t)}},{key:"_getEmbedData",value:(i=regeneratorRuntime.mark((function e(){var t,n,r,a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.engine){e.next=3;break}return e.next=3,this.engine.onBeforeSave();case 3:return t=this.getContent({fullHTML:w.fullHTML}),n=t.content,r=t.html,a=t.thumbnail,i=this.getTitle(),o={id:this.doc.slug,slug:this.doc.slug,title:i},"Sheet"===this.doc.type?(o.thumbnail=a,o.lakesheet=n):(o.lake=n,o.html=r),e.abrupt("return",o);case 8:case"end":return e.stop()}}),e,this)})),o=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=i.apply(e,t);function o(e){m(a,n,r,o,c,"next",e)}function c(e){m(a,n,r,o,c,"throw",e)}o(void 0)}))},function(){return o.apply(this,arguments)})},{key:"publish",value:function(e){this._postContentMessage(f.MESSAGE_TYPES.PUBLISH_CALLBACK,e)}},{key:"save",value:function(e){this._postContentMessage(f.MESSAGE_TYPES.SAVE_CALLBACK,e)}},{key:"saveTitle",value:function(e){this._title=e,this._postContentMessage(f.MESSAGE_TYPES.SAVE_TITLE_CALLBACK,{data:{data:e},status:"success"})}},{key:"changeTitle",value:function(e,t){this._title=e,t&&this._postContentMessage(f.MESSAGE_TYPES.TITLE_CHANGE_CALLBACK,{data:{data:e},status:"success"})}},{key:"loadCallback",value:function(){Object(f.postMessage)(f.MESSAGE_TYPES.LOAD_CALLBACK)}},{key:"getValueCallback",value:function(){this._postContentMessage(f.MESSAGE_TYPES.GET_VALUE_CALLBACK)}},{key:"unlockCallback",value:function(){this._postContentMessage(f.MESSAGE_TYPES.UNLOCK_CALLBACK)}},{key:"resetCallback",value:function(){this._postContentMessage(f.MESSAGE_TYPES.RESET_CALLBACK)}},{key:"change",value:function(){this._postContentMessage(f.MESSAGE_TYPES.CHANGE_CALLBACK)}},{key:"fullScreen",value:function(e){Object(f.postMessage)(f.MESSAGE_TYPES.FULLSCREEN_CALLBACK,e)}},{key:"resize",value:function(e){Object(f.postMessage)(f.MESSAGE_TYPES.RESIZE_CALLBACK,e)}},{key:"onDocLoaded",value:function(e){Object(f.postMessage)(f.MESSAGE_TYPES.DOC_LOADED_CALLBACK,e)}},{key:"connect",value:function(e){var t=this;e.on(h.h.error,(function(e){t.onError(e)})),e.on(h.h.docStatusChange,(function(e){t.onDocStatusChanged(e)})),e.on(h.h.saveTitle,(function(e){t.saveTitle({data:e,state:"success",message:"ok"})})),e.on(h.h.change,(function(){w.onchange&&t.change()})),e.on(h.h.miniExpand,(function(e){t.fullScreen(e)}))}},{key:"onDocStatusChanged",value:function(e){e===h.a.saved?this.save({status:"success",message:"ok",data:{save_type:"user"}}):e===h.a.published?this.publish():e===h.a.loaded&&this.onDocLoaded()}},{key:"onError",value:function(e){e&&e.code===h.d.PUBLISH_FAILED&&this.publish({status:"error",message:e.message})}}])&&k(t.prototype,n),a&&k(t,a),e}();function _(e){var t=e.backgroundColor,n=e.autoHeight,r=e.bodyBackgroundColor,i=e.toolbarBackgroundColor;Object(a.useEffect)((function(){var e="";if(r&&(e+="\n        .lake-max-editor-wrapper-content .lake-max-editor-content {\n          background-color: ".concat(d()(r),";\n        }\n        .lake-max-editor-wrapper-content .lake-content-editor {\n          border: 0 none;\n          box-shadow: none;\n        }\n      ")),i&&(e+="\n        .lake-toolbar {\n          background-color: ".concat(d()(i),";\n        }\n      ")),t&&(e+="\n        #content,\n        .lake-content-editor,\n        .lake-title-editor .ant-input {\n          background-color: ".concat(d()(t),"\n        }\n      ")),n||(e+="\n        .lake-mini-editor .lake-content-editor-core {\n          height: calc(100vh - 40px);\n          min-height: calc(100vh - 40px);\n          overflow-y: auto;\n        }\n      "),e){var a=document.createElement("style");document.head.appendChild(a),a.type="text/css",a.appendChild(document.createTextNode(e))}}),[])}function C(e){var t=e.doc,n=e.publish,o=e.setContent,c=e.getContent,l=e.insertContent,s=e.getTitle,u=e.getContainer,d=e.autoHeight,h=(e.fullScreen,e.onLoad),m=e.workflow,g=e.engine,v=e.backgroundColor,y=e.bodyBackgroundColor,b=e.toolbarBackgroundColor,k=Object(a.useRef)(null),w=u(),C=Object(a.useRef)(null),E=Object(a.useMemo)((function(){return new x({doc:t,getContent:c,getTitle:s})}),[t,c,s]);return _({autoHeight:d,backgroundColor:v,bodyBackgroundColor:y,toolbarBackgroundColor:b}),Object(a.useEffect)((function(){Object(f.onMessage)((function(e){var t=e.type,a=e.message,i=e.options,c=void 0===i?{}:i;if(t===f.MESSAGE_TYPES.PUBLISH)n();else if(t===f.MESSAGE_TYPES.GET_VALUE)E.getValueCallback();else if(t===f.MESSAGE_TYPES.SET_VALUE)if("markdown"===c.format)try{p.a.convertMarkdownToLake(a).then((function(e){return o(e)}))}catch(e){r.a.error("初始化 Markdown 格式失败")}else o(a);else if(t===f.MESSAGE_TYPES.SCROLL_TO){var s=document.querySelector(".lake-editor-scroll-container")||document.querySelector(".lake-content-editor-core");s?s.scrollTop=a:window.scrollTo(0,a)}else if(t===f.MESSAGE_TYPES.INSERT_VALUE)l(a);else if(t===f.MESSAGE_TYPES.UNLOCK)m&&m.exit({unlock:!0}).then((function(){E.unlockCallback()}));else if(t===f.MESSAGE_TYPES.RESET&&(g||m)){var u=(g||m).reset,d=function(e){u(e),E.resetCallback()};if("markdown"===c.format)try{p.a.convertMarkdownToLake(a).then((function(e){d(e)}))}catch(e){r.a.error("重置 Markdown 格式失败")}else d(a)}})),E.loadCallback(),h(E),m&&E.connect(m)}),[]),Object(a.useEffect)((function(){if(w&&d){!function e(){k.current||(k.current=setTimeout((function(){k.current=null;var t=w.querySelector?w:w.current,n=t.querySelector(".lake-max-editor-content");if(n||(n=t.querySelector(".lake-content-editor")),n){var r=n.scrollHeight,a=document.querySelector(".lake-toolbar"),i=a?a.offsetHeight:0,o=document.querySelector(".lark-editor-header"),c=o?o.offsetHeight:0;C.current!==r&&(E.resize({height:i+c+r+60}),C.current=r)}e()}),300))}()}return function(){clearTimeout(k.current),k.current=null}}),[w,d]),i.a.createElement("span",null)}C.defaultProps={onLoad:function(){}},C.propTypes={doc:c.a.object,getContainer:c.a.func.isRequired,getContent:c.a.func.isRequired,getTitle:c.a.func,publish:c.a.func.isRequired,setContent:c.a.func.isRequired,autoHeight:c.a.bool,onLoad:c.a.func,insertContent:c.a.func.isRequired,engine:c.a.func.object},t.b=C},function(e,t,n){"use strict";var r=/["'&<>]/;e.exports=function(e){var t,n=""+e,a=r.exec(n);if(!a)return n;var i="",o=0,c=0;for(o=a.index;o<n.length;o++){switch(n.charCodeAt(o)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#39;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}c!==o&&(i+=n.substring(c,o)),c=o+1,i+=t}return c!==o?i+n.substring(c,o):i}},,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(2719),a=n(2736),i=Object.prototype.hasOwnProperty,o={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},c=Array.isArray,l=Array.prototype.push,s=function(e,t){l.apply(e,c(t)?t:[t])},u=Date.prototype.toISOString,d=a.default,f={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:r.encode,encodeValuesOnly:!1,format:d,formatter:a.formatters[d],indices:!1,serializeDate:function(e){return u.call(e)},skipNulls:!1,strictNullHandling:!1},p=function e(t,n,a,i,o,l,u,d,p,h,m,g,v){var y,b=t;if("function"==typeof u?b=u(n,b):b instanceof Date?b=h(b):"comma"===a&&c(b)&&(b=r.maybeMap(b,(function(e){return e instanceof Date?h(e):e})).join(",")),null===b){if(i)return l&&!g?l(n,f.encoder,v,"key"):n;b=""}if("string"==typeof(y=b)||"number"==typeof y||"boolean"==typeof y||"symbol"==typeof y||"bigint"==typeof y||r.isBuffer(b))return l?[m(g?n:l(n,f.encoder,v,"key"))+"="+m(l(b,f.encoder,v,"value"))]:[m(n)+"="+m(String(b))];var k,w=[];if(void 0===b)return w;if(c(u))k=u;else{var x=Object.keys(b);k=d?x.sort(d):x}for(var _=0;_<k.length;++_){var C=k[_],E=b[C];if(!o||null!==E){var O=c(b)?"function"==typeof a?a(n,C):n:n+(p?"."+C:"["+C+"]");s(w,e(E,O,a,i,o,l,u,d,p,h,m,g,v))}}return w};e.exports=function(e,t){var n,r=e,l=function(e){if(!e)return f;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||f.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=a.default;if(void 0!==e.format){if(!i.call(a.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var r=a.formatters[n],o=f.filter;return("function"==typeof e.filter||c(e.filter))&&(o=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:f.addQueryPrefix,allowDots:void 0===e.allowDots?f.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:f.charsetSentinel,delimiter:void 0===e.delimiter?f.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:f.encode,encoder:"function"==typeof e.encoder?e.encoder:f.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:f.encodeValuesOnly,filter:o,formatter:r,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:f.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:f.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:f.strictNullHandling}}(t);"function"==typeof l.filter?r=(0,l.filter)("",r):c(l.filter)&&(n=l.filter);var u,d=[];if("object"!=typeof r||null===r)return"";u=t&&t.arrayFormat in o?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var h=o[u];n||(n=Object.keys(r)),l.sort&&n.sort(l.sort);for(var m=0;m<n.length;++m){var g=n[m];l.skipNulls&&null===r[g]||s(d,p(r[g],g,h,l.strictNullHandling,l.skipNulls,l.encode?l.encoder:null,l.filter,l.sort,l.allowDots,l.serializeDate,l.formatter,l.encodeValuesOnly,l.charset))}var v=d.join(l.delimiter),y=!0===l.addQueryPrefix?"?":"";return l.charsetSentinel&&("iso-8859-1"===l.charset?y+="utf8=%26%2310003%3B&":y+="utf8=%E2%9C%93&"),v.length>0?y+v:""}},function(e,t,n){"use strict";var r=n(2719),a=Object.prototype.hasOwnProperty,i=Array.isArray,o={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:r.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},c=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},l=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},s=function(e,t,n,r){if(e){var i=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/g,c=n.depth>0&&/(\[[^[\]]*])/.exec(i),s=c?i.slice(0,c.index):i,u=[];if(s){if(!n.plainObjects&&a.call(Object.prototype,s)&&!n.allowPrototypes)return;u.push(s)}for(var d=0;n.depth>0&&null!==(c=o.exec(i))&&d<n.depth;){if(d+=1,!n.plainObjects&&a.call(Object.prototype,c[1].slice(1,-1))&&!n.allowPrototypes)return;u.push(c[1])}return c&&u.push("["+i.slice(c.index)+"]"),function(e,t,n,r){for(var a=r?t:l(t,n),i=e.length-1;i>=0;--i){var o,c=e[i];if("[]"===c&&n.parseArrays)o=[].concat(a);else{o=n.plainObjects?Object.create(null):{};var s="["===c.charAt(0)&&"]"===c.charAt(c.length-1)?c.slice(1,-1):c,u=parseInt(s,10);n.parseArrays||""!==s?!isNaN(u)&&c!==s&&String(u)===s&&u>=0&&n.parseArrays&&u<=n.arrayLimit?(o=[])[u]=a:o[s]=a:o={0:a}}a=o}return a}(u,t,n,r)}};e.exports=function(e,t){var n=function(e){if(!e)return o;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?o.charset:e.charset;return{allowDots:void 0===e.allowDots?o.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:o.allowPrototypes,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:o.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:o.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:o.comma,decoder:"function"==typeof e.decoder?e.decoder:o.decoder,delimiter:"string"==typeof e.delimiter||r.isRegExp(e.delimiter)?e.delimiter:o.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:o.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:o.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:o.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:o.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:o.strictNullHandling}}(t);if(""===e||null==e)return n.plainObjects?Object.create(null):{};for(var u="string"==typeof e?function(e,t){var n,s={},u=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,d=t.parameterLimit===1/0?void 0:t.parameterLimit,f=u.split(t.delimiter,d),p=-1,h=t.charset;if(t.charsetSentinel)for(n=0;n<f.length;++n)0===f[n].indexOf("utf8=")&&("utf8=%E2%9C%93"===f[n]?h="utf-8":"utf8=%26%2310003%3B"===f[n]&&(h="iso-8859-1"),p=n,n=f.length);for(n=0;n<f.length;++n)if(n!==p){var m,g,v=f[n],y=v.indexOf("]="),b=-1===y?v.indexOf("="):y+1;-1===b?(m=t.decoder(v,o.decoder,h,"key"),g=t.strictNullHandling?null:""):(m=t.decoder(v.slice(0,b),o.decoder,h,"key"),g=r.maybeMap(l(v.slice(b+1),t),(function(e){return t.decoder(e,o.decoder,h,"value")}))),g&&t.interpretNumericEntities&&"iso-8859-1"===h&&(g=c(g)),v.indexOf("[]=")>-1&&(g=i(g)?[g]:g),a.call(s,m)?s[m]=r.combine(s[m],g):s[m]=g}return s}(e,n):e,d=n.plainObjects?Object.create(null):{},f=Object.keys(u),p=0;p<f.length;++p){var h=f[p],m=s(h,u[h],n,"string"==typeof e);d=r.merge(d,m,n)}return r.compact(d)}},,,function(e,t,n){"use strict";n(67);var r=n(24),a=(n(53),n(19)),i=n(0),o=n.n(i),c=n(2),l=n.n(c),s=n(69),u=n(171),d=n(99),f=n(2723),p=n(1984),h=n(21),m=n(891);function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var k=new p.a,w=new(function(){function e(){y(this,e),this.MESSAGE_TYPES=f.MESSAGE_TYPES}var t,n,r;return t=e,(n=[{key:"_postContentMessage",value:function(e,t){t={status:"success",message:"ok",data:t},Object(f.postMessage)(e,t)}},{key:"getTitle",value:function(e){this._postContentMessage(f.MESSAGE_TYPES.GET_TITLE_VALUE_CALLBACK,e)}}])&&b(t.prototype,n),r&&b(t,r),e}());function x(e){var t,n=g(Object(i.useState)(null),2),c=n[0],l=n[1],s=g(Object(i.useState)(!1),2),d=s[0],p=s[1],v=function(t){var n=e.isDoc;d||(e.onSave(t),k.saveToServer&&(p(!0),n?function(t){e.dispatch({type:"doc/update",payload:{title:t}}),e.dispatch({type:"proxy.web/docs.updateMeta",payload:{data:{id:e.doc_id,title:t}}}).then((function(e){p(!1)})).catch((function(e){p(!1),a.a.warn("save title failed")}))}(t):function(t){var n=e.templateId;e.dispatch({type:"template/update",payload:{name:t}}),new m.a(h.b.templates,h.b.docs).updateTitle(n,t).then((function(e){p(!1)})).catch((function(e){p(!1),a.a.warn("save title failed")}))}(t)))};return t=null===c?"无标题"===e.title?"":e.title:c,Object(i.useEffect)((function(){var t=!1;Object(f.onMessage)((function(n){n.type===f.MESSAGE_TYPES.GET_TITLE_VALUE?w.getTitle(c):n.type===f.MESSAGE_TYPES.SET_TITLE_VALUE&&(l(n.message),e.onChange(n.message,t),t=!0)}))})),o.a.createElement("div",{"data-testid":"title-editor",className:"lake-title-editor"},o.a.createElement(r.a.TextArea,{"data-testid":"input",className:"lake-title",autoFocus:!k.hideTitleEditor&&(e.title===u.a.getDefaultTitle()||"无标题"===e.title),value:t,placeholder:__("请输入标题"),onFocus:function(t){var n=u.a.getDefaultTitle();e.title===n&&l("")},onChange:function(t){var n=t.target.value;l(n),e.onChange(n)},onKeyDown:function(t){13===(t.keyCode||t.which)&&(t.target.blur(),e.onSave(),t.preventDefault())},onBlur:function(){var t=c||e.title;""===(t=t.trim())&&(t=u.a.getDefaultTitle(),l(null)),t!==e.title&&v(t)},tabIndex:e.tabIndex,maxLength:128,rows:1,autoSize:!0}))}x.defaultProps={isDoc:!0,onSave:function(){},onChange:function(){}},x.propTypes={doc_id:l.a.number,title:l.a.string.isRequired,onSave:l.a.func,onChange:l.a.func,tabIndex:l.a.number,dispatch:l.a.func,isDoc:l.a.bool,templateId:l.a.number};t.a=Object(d.b)(Object(s.c)()(x))},,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r;(function(){"use strict";function n(e){return">"===e}function a(e){return"<"===e}function i(e){return/^\s+$/.test(e)}function o(e){var t=e.match(/^\s*<([^!>][^>]*)>\s*$/);return!!t&&t[1].trim().split(" ")[0]}function c(e){return/--\>$/.test(e)}var l,s=new RegExp("^<(iframe|object|math|svg|script|video|head|style)");function u(e){var t=l.exec(e);return t&&t[1]}function d(e,t){return e.substring(e.length-t.length-2)==="</"+t}function f(e){return/^\s*<[^>]+\/>\s*$/.test(e)}function p(e){return/^<img[\s>]/.test(e)||function(e){return!o(e)}(e)||u(e)||f(e)}function h(e){return{string:e,key:v(e)}}function m(e,t,n,r){this.segment=r,this.length=n,this.startInBefore=e+r.beforeIndex,this.startInAfter=t+r.afterIndex,this.endInBefore=this.startInBefore+this.length-1,this.endInAfter=this.startInAfter+this.length-1,this.segmentStartInBefore=e,this.segmentStartInAfter=t,this.segmentEndInBefore=this.segmentStartInBefore+this.length-1,this.segmentEndInAfter=this.segmentStartInAfter+this.length-1}function g(e){for(var t="char",r="",o="",l=[],s=0;s<e.length;s++){var f=e[s];switch(t){case"tag":var p=u(r);p?(t="atomic_tag",o=p,r+=f):/^<!--/.test(r)?(t="html_comment",r+=f):n(f)?(r+=">",l.push(h(r)),r="",t=i(f)?"whitespace":"char"):r+=f;break;case"atomic_tag":n(f)&&d(r,o)?(r+=">",l.push(h(r)),r="",o="",t="char"):r+=f;break;case"html_comment":c(r+=f)&&(r="",t="char");break;case"char":a(f)?(r&&l.push(h(r)),r="<",t="tag"):/\s/.test(f)?(r&&l.push(h(r)),r=f,t="whitespace"):/[\w\d\#@]/.test(f)?r+=f:/&/.test(f)?(r&&l.push(h(r)),r=f):(r+=f,l.push(h(r)),r="");break;case"whitespace":a(f)?(r&&l.push(h(r)),r="<",t="tag"):i(f)?r+=f:(r&&l.push(h(r)),r=f,t="char");break;default:throw new Error("Unknown mode "+t)}}return r&&l.push(h(r)),l}function v(e){var t=/^<img.*src=['"]([^"']*)['"].*>$/.exec(e);if(t)return'<img src="'+t[1]+'">';var n=/^<object.*data=['"]([^"']*)['"]/.exec(e);if(n)return'<object src="'+n[1]+'"></object>';if(/^<(svg|math|video)[\s>]/.test(e)){var r=e.indexOf('data-uuid="');return-1!==r?e.slice(0,r)+e.slice(r+44):e}var a=/^<iframe.*src=['"]([^"']*)['"].*>/.exec(e);if(a)return'<iframe src="'+a[1]+'"></iframe>';var i=/<([^\s>]+)[\s>]/.exec(e);return i?"<"+i[1].toLowerCase()+">":e?e.replace(/(\s+|&nbsp;|&#160;)/g," "):e}function y(e){return e.reduce((function(e,t,n){return e[t.key]?e[t.key].push(n):e[t.key]=[n],e}),Object.create(null))}function b(){this._root=null}function k(e){for(var t=e.beforeTokens,n=e.afterMap,r=null,a=null,i=0;i<t.length;i++){var o=!1,c=t.length-i;if(a&&c<a.length)break;var l=t[i];if(" "!==l.key){r===i-1&&(o=!0);var s=n[l.key];s&&s.forEach((function(t){var n=a?a.length:0,r=w(e,i,t,n,o);r&&r.length>n&&(a=r)}))}else r=i}return a}function w(e,t,n,r,a){var i=e.beforeTokens,o=e.afterTokens,c=t+r,l=n+r;if(!(c>=i.length||l>=o.length)){if(r)if(i[c].key!==o[l].key)return;for(var s=!0,u=1,d=t+u,f=n+u;s&&d<i.length&&f<o.length;){i[d].key===o[f].key?(d=t+ ++u,f=n+u):s=!1}if(a&&t>0&&n>0){var p=i[t-1].key,h=o[n-1].key;" "===p&&" "===h&&(t--,n--,u++)}return new m(t,n,u,e)}}function x(e,t,n,r){return{beforeTokens:e,afterTokens:t,beforeMap:y(e),afterMap:y(t),beforeIndex:n,afterIndex:r}}function _(e){for(var t,n=new b,r=[e];r.length;)if((t=k(e=r.pop()))&&t.length){if(t.segmentStartInBefore>0&&t.segmentStartInAfter>0){var a=e.beforeTokens.slice(0,t.segmentStartInBefore),i=e.afterTokens.slice(0,t.segmentStartInAfter);r.push(x(a,i,e.beforeIndex,e.afterIndex))}var o=e.beforeTokens.slice(t.segmentEndInBefore+1),c=e.afterTokens.slice(t.segmentEndInAfter+1),l=e.beforeIndex+t.segmentEndInBefore+1,s=e.afterIndex+t.segmentEndInAfter+1;o.length&&c.length&&r.push(x(o,c,l,s)),n.add(t)}return n.toArray()}function C(e,t){if(!e)throw new Error("Missing beforeTokens");if(!t)throw new Error("Missing afterTokens");var n=0,r=0,a=[],i=x(e,t,0,0),o=_(i);o.push(new m(e.length,t.length,0,i));for(var c=0;c<o.length;c++){var l=o[c],s="none";n===l.startInBefore?r!==l.startInAfter&&(s="insert"):(s="delete",r!==l.startInAfter&&(s="replace")),"none"!==s&&a.push({action:s,startInBefore:n,endInBefore:"insert"!==s?l.startInBefore-1:null,startInAfter:r,endInAfter:"delete"!==s?l.startInAfter-1:null}),0!==l.length&&a.push({action:"equal",startInBefore:l.startInBefore,endInBefore:l.endInBefore,startInAfter:l.startInAfter,endInAfter:l.endInAfter}),n=l.endInBefore+1,r=l.endInAfter+1}var u=[],d={action:"none"};function f(t){return"equal"===t.action&&(t.endInBefore-t.startInBefore==0&&/^\s$/.test(e.slice(t.startInBefore,t.endInBefore+1)))}for(var p=0;p<a.length;p++){var h=a[p];f(h)&&"replace"===d.action||"replace"===h.action&&"replace"===d.action?(d.endInBefore=h.endInBefore,d.endInAfter=h.endInAfter):(u.push(h),d=h)}return u}function E(e){this.tokens=e,this.notes=e.reduce((function(e,t,n){e.notes.push({isWrappable:p(t),insertedTag:!1});var r=!f(t)&&o(t),a=e.tagStack[e.tagStack.length-1];return r&&(a&&"/"+a.tag===r?(e.notes[a.position].insertedTag=!0,e.tagStack.pop()):e.tagStack.push({tag:r,position:n})),e}),{notes:[],tagStack:[]}).notes}function O(e,t,n,r,a){var i=new E(t),o=" data-"+(r=r?r+"-":"")+'operation-index="'+n+'"';return a&&(o+=' class="'+a+'"'),i.combine((function(t){if(!t.isWrappable)return t.tokens.join("");var n=t.tokens.join("");return n.trim()?"<"+e+o+">"+n+"</"+e+">":""}),(function(t){var a=' data-diff-node="'+e+'"';return a+=" data-"+r+'operation-index="'+n+'"',t.replace(/>\s*$/,a+"$&")}))}b.prototype={add:function(e){var t,n,r={value:e,left:null,right:null},a=this._root;if(a)for(;;){var i=(t=a.value,(n=e).endInBefore<t.startInBefore&&n.endInAfter<t.startInAfter?-1:n.startInBefore>t.endInBefore&&n.startInAfter>t.endInAfter?1:0);if(-1===i){if(!a.left){a.left=r;break}a=a.left}else{if(1!==i)break;if(!a.right){a.right=r;break}a=a.right}}else this._root=r},toArray:function(){return function e(t,n){return t&&(e(t.left,n),n.push(t.value),e(t.right,n)),n}(this._root,[])}},E.prototype.combine=function(e,t){var n=this.notes,r=this.tokens.slice();return r.reduce((function(e,a,i){n[i].insertedTag&&(r[i]=t(r[i])),null===e.status&&(e.status=n[i].isWrappable);var o=n[i].isWrappable;return o!==e.status&&(e.list.push({isWrappable:e.status,tokens:r.slice(e.lastIndex,i)}),e.lastIndex=i,e.status=o),i===r.length-1&&e.list.push({isWrappable:e.status,tokens:r.slice(e.lastIndex,i+1)}),e}),{list:[],status:null,lastIndex:0}).list.map(e).join("")};var S={equal:function(e,t,n,r,a,i){return n.slice(e.startInAfter,e.endInAfter+1).reduce((function(e,t){return e+t.string}),"")},insert:function(e,t,n,r,a,i){return O("ins",n.slice(e.startInAfter,e.endInAfter+1).map((function(e){return e.string})),r,a,i)},delete:function(e,t,n,r,a,i){return O("del",t.slice(e.startInBefore,e.endInBefore+1).map((function(e){return e.string})),r,a,i)},replace:function(){return S.delete.apply(null,arguments)+S.insert.apply(null,arguments)}};function R(e,t,n,r,a){return n.reduce((function(n,i,o){return n+S[i.action](i,e,t,o,r,a)}),"")}function D(e,t,n,r,a){return e===t?e:(l=a?new RegExp("^<("+a.replace(/\s*/g,"").replace(/,/g,"|")+")"):s,R(e=g(e),t=g(t),C(e,t),r,n))}D.htmlToTokens=g,D.findMatchingBlocks=_,_.findBestMatch=k,_.createMap=y,_.createToken=h,_.createSegment=x,_.getKeyForToken=v,D.calculateOperations=C,D.renderOperations=R,void 0===(r=function(){return D}.apply(t,[]))||(e.exports=r)}).call(this)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(2),o=n.n(i),c=n(81),l=n.n(c),s=n(79),u=n.n(s),d=n(248),f=n(62),p=n.n(f),h=n(179),m=n(133),g=n(2652),v=n(1991),y=n(119),b=n(1441),k=n(1879),w=n(1984),x=n(1756),_=n.n(x),C=n(2778),E=(n(348),n(197)),O=n(650),S=n.n(O),R=n(35),D="ThemeEditor-module_heading_39Tsl",A="ThemeEditor-module_dropdown_3J7Kb",T="ThemeEditor-module_dropdownOverlay_2y4Dn",P="ThemeEditor-module_themeOption_3B5iX",j="ThemeEditor-module_checked_15FiV",M="ThemeEditor-module_divide_2vMGM",N="ThemeEditor-module_optionItem_2fCV9",L="ThemeEditor-module_title_1ITlR",I="ThemeEditor-module_desc_2hpfx",z=[{id:"classic",title:__("经典优雅"),desc:__("疏密有度")},{id:"traditional",title:__("传统紧凑"),desc:__("排版紧密")}],B=[{id:"fixed",title:__("标准页宽"),desc:__("适合文本展示")},{id:"adapt",title:__("超宽显示"),desc:__("适合超宽表格")}];function F(e){var t=e.options,n=e.selected,r=e.onSelect;return a.a.createElement("ul",null,t.map((function(e){return a.a.createElement("li",{key:e.id},e.id===n&&a.a.createElement("div",{className:j},a.a.createElement(R.a,{name:"check",width:12,height:12})),a.a.createElement("div",{"data-option":e.id,className:N,onClick:function(){r(e.id)}},a.a.createElement("p",{className:L},e.title),a.a.createElement("p",{className:I},e.desc)))})))}function V(e){var t=new URLSearchParams(window.location.search),n=!t.get("viewport")||t.get("viewport")!==e.viewport;return a.a.createElement(E.a,{className:A,overlayClassName:T,trigger:["click"],overlay:a.a.createElement("div",{"data-testid":"lake-theme-editor-panel"},n&&a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:P,"data-testid":"viewport-selector"},a.a.createElement("p",{className:D},__("页面宽度")),a.a.createElement(F,{options:B,selected:e.viewport,onSelect:function(t){e.onConfigChange("viewport",t)}})),a.a.createElement("div",{className:M})),a.a.createElement("div",{className:P,"data-testid":"typography-selector"},a.a.createElement("p",{className:D},__("排版风格")),a.a.createElement(F,{options:z,selected:e.typography,onSelect:function(t){e.onConfigChange("typography",t)}})))},a.a.createElement("span",{"data-testid":"lake-theme-editor-entry"},__("页面设置"),a.a.createElement(S.a,{style:{fontSize:"10px",marginLeft:"6px"}})))}V.propTypes={typography:o.a.string.isRequired,viewport:o.a.string.isRequired,onConfigChange:o.a.func.isRequired};var U=V;function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Z(e);if(t){var a=Z(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return X(this,n)}}function X(e,t){return!t||"object"!==q(t)&&"function"!=typeof t?$(e):t}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var J=new w.a,ee=l()("editor:lake"),te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(o,e);var t,n,r,i=K(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),Q($(t=i.call(this,e)),"onSaveTitle",(function(e){ee("title saved, focus to engine"),t.engine.focus(),"function"==typeof t.props.onSaveTitle&&t.props.onSaveTitle(e)})),Q($(t),"onEngineLoaded",(function(e){var n={ref:t.editorRef,lake:e,engine:e};t.engine=e,t.props.onLoad(n),e.on("saveToResource",(function(e){t.setState({saveToResourceModalVisible:!0,cardData:e&&e.data})})),t.props.focusOnLoaded&&t.engine.focus()})),Q($(t),"onChange",(function(e){t.props.onChange(e),t.autoSave()})),Q($(t),"onThemeConfigChange",(function(e,n){ee("theme config change",{type:e,value:n});var r={};r[e]=n,t.state[e]!==n&&(t.setState(r,(function(){t.props.onThemeChange(e,n)})),"viewport"===e&&setTimeout((function(){window.dispatchEvent(new Event("resize"))}),100))})),Q($(t),"cancelSaveToResource",(function(){t.setState({saveToResourceModalVisible:!1,cardData:null})})),Q($(t),"confirmSaveToResource",(function(){t.setState({saveToResourceModalVisible:!1,cardData:null})})),t.editorRef=a.a.createRef(),t.state={viewport:e.viewport||p.a.VIEWPORT.fixed,typography:e.typography||p.a.TYPOGRAPHY.traditional,saveToResourceModalVisible:!1,cardData:null},t.engine=null,t.autoSave=u()((function(){ee("trigger auto save after stop editing"),e.onAutoSave()}),e.autoSaveInterval||6e4),t}return t=o,(n=[{key:"componentDidMount",value:function(){ee("editor initialized use value: ",this.props.defaultValue),v.a.epv({type:"Doc",id:this.props.doc_id})}},{key:"renderEditor",value:function(){var e,t=this,n=this.props,r=n.format,i=n.doc_id,o=n.meta,c=n.doc,l=n.book,s=n.group,u=n.hideTitleEditor,f=n.hideThemeEditor,v=n.thirdPartyService,k=n.mentionActionOrigin,w=n.localVideo,x=n.cardWhitelist,E="/api/upload/attach",O=E,S=E,R=new URLSearchParams(window.location.search),D=R.get("upload_url"),A=R.get("upload_types");D&&/^https?:\/\//.test(D)&&A&&(A=A.split(",").map((function(e){return e.trim()})).filter((function(e){return!!e}))).length>0&&(A.includes("image")&&(S=D),A.includes("attachment")&&(E=D));var T=R.get("upload_csrf_token_field")||"ctoken",P=R.get("upload_csrf_token_value")||Object(h.a)(window)||"";P&&(P=encodeURIComponent(P));var j=_.a.stringify((Q(e={attachable_type:this.props.isDoclet?"Doclet":"Doc",attachable_id:i},T,P),Q(e,"type","attachment"),e)),M=j,N=j.replace("&type=attachment","&type=image");S=S.includes("?")?"".concat(S,"&").concat(N):"".concat(S,"?").concat(N),E=E.includes("?")?"".concat(E,"&").concat(j):"".concat(E,"?").concat(j),O=O.includes("?")?"".concat(O,"&").concat(M):"".concat(O,"?").concat(M);var L=g.a.patchGroupIdToUrl("/api/users/complete?target_type=Doc&target_id=".concat(i)),I=this.props.getDefaultSuggestions;if(R.get("search_user_url")&&(L=R.get("search_user_url"),I=function(){return[]},R.get("upload_csrf_token_value")&&(L=L.includes("?")?"".concat(L,"&").concat(T,"=").concat(P):"".concat(L,"?").concat(T,"=").concat(P))),r===p.a.FORMAT.LAKE){var z={docId:i,enableDeferredRendering:!0,lang:m.a.localeToLakeLang(window.appData.locale),defaultValue:this.props.defaultValue,onChange:this.onChange,image:{uploadAction:S},file:{uploadAction:E},localdoc:{uploadAction:O},mention:{action:L,getDefaultSuggestions:I,paramName:"q",origin:k},onLoad:this.onEngineLoaded,header:[],viewport:this.state.viewport,typography:this.state.typography,onSave:this.props.onSave,onBeforeRenderImage:b.a,allowMention:this.props.allowMention,allowResource:this.props.allowResource,allowResizeVideo:this.props.allowResizeVideo,cardBlacklist:this.props.cardBlacklist,lockedtext:{action:"/api/services/crypto"},meta:o,thirdPartyService:v,ot:this.props.ot,sidebar:this.props.sidebar,placeholder:this.props.placeholder,autoCompleteLinks:this.props.autoCompleteLinks};if(f||z.header.push(a.a.createElement(U,{key:"lake-view-mode-editor",typography:this.state.typography,viewport:this.state.viewport,onConfigChange:this.onThemeConfigChange})),u||z.header.push(a.a.createElement(C.a,{doc_id:i,isDoc:!this.props.isDoclet,templateId:this.props.isDoclet?c.target_id:-1,onSave:function(e){return t.onSaveTitle(e)},onChange:this.props.onTitleChange,title:J.saveToServer?this.props.title:"",key:this.props.title,tabIndex:1})),w&&(z.localVideo=w),c&&(z.localVideo=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){Q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({uploadAction:"/api/video?attachable_id=".concat(c.id,"&attachable_type=Doc"),queryAction:"/api/video"},z.localVideo)),D&&(z.previewFileHandler=function(e,t){window.open(t,"_blank")}),z.cardWhitelist=x,R.get("cards")){var B=R.get("cards").split(",").map((function(e){return e.trim()})).filter((function(e){return!!e}));B.length>0&&(z.cardWhitelist=B)}return l&&l.isPremium&&(z.allowPremium=!0),z.allowAudioPlayer=y.a.isAllowAudio(c,l,s),window.appData.isPrivateCloud&&(window.appData.supportOnlineViewer?z.cardBlacklist=this.props.cardBlacklist.concat(["video","audio"]):z.cardBlacklist=this.props.cardBlacklist.concat(["localdoc","diagram","video","audio","math"]),z.toolbarBlacklist=["translate","repository"],z.localImageHostList=[]),a.a.createElement(d.c,H({key:i},z))}return a.a.createElement("span",null,"invalid format: ",r)}},{key:"render",value:function(){var e=this.state,t=e.saveToResourceModalVisible,n=e.cardData;return a.a.createElement("div",{id:"lark-text-editor",ref:this.editorRef,style:{position:"relative"}},this.renderEditor(),t&&n&&a.a.createElement(k.a,{onCancel:this.cancelSaveToResource,onConfirm:this.confirmSaveToResource,cardData:n}))}}])&&Y(t.prototype,n),r&&Y(t,r),o}(r.PureComponent);te.defaultProps={hideTitleEditor:!1,onChange:function(e){},onTitleChange:function(e){},onAutoSave:function(){},onLoad:function(){},onThemeChange:function(){},isDoclet:!1,cardBlacklist:[]},te.propTypes={doc_id:o.a.number.isRequired,hideTitleEditor:o.a.bool,title:o.a.string,format:o.a.oneOf([p.a.FORMAT.ASL,p.a.FORMAT.LAKE,p.a.FORMAT.MARKDOWN,p.a.FORMAT.HTML]),defaultValue:o.a.string,autoSaveInterval:o.a.number,onChange:o.a.func,onSave:o.a.func,onTitleChange:o.a.func,onSaveTitle:o.a.func,onLoad:o.a.func,onAutoSave:o.a.func,getDefaultSuggestions:o.a.func,mentionActionOrigin:o.a.string,localVideo:o.a.object,allowMention:o.a.bool,allowResource:o.a.bool,ot:o.a.bool,meta:o.a.object,doc:o.a.object,book:o.a.object,group:o.a.object,viewport:o.a.string,typography:o.a.string,onThemeChange:o.a.func,sidebar:o.a.string,thirdPartyService:o.a.array,cardBlacklist:o.a.array,cardWhitelist:o.a.array,isDoclet:o.a.bool,placeholder:o.a.string,focusOnLoaded:o.a.bool};t.a=te},,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(405)),i=r(n(2879)),o=r(n(5)),c=r(n(15)),l=r(n(0)),s=r(n(31)),u=void 0,d=void 0,f=[],p=function(e){return"undefined"!=typeof window&&window.requestAnimationFrame(e)},h=function(e){return"undefined"!=typeof window&&window.cancelAnimationFrame(e)},m=void 0,g=function(){return Date.now()},v=void 0,y=void 0,b=function(e,t){return d={fn:e,transform:t}},k=function(e){return f=e},w=function(e){return u=e},x=function(e){return m=e},_=function(e){return v=e},C=function(e){return y=e},E=Object.freeze({get bugfixes(){return u},get applyAnimatedValues(){return d},get colorNames(){return f},get requestFrame(){return p},get cancelFrame(){return h},get interpolation(){return m},get now(){return g},get defaultElement(){return v},get createAnimatedStyle(){return y},injectApplyAnimatedValues:b,injectColorNames:k,injectBugfixes:w,injectInterpolation:x,injectFrame:function(e,t){var n;return p=(n=[e,t])[0],h=n[1],n},injectNow:function(e){return g=e},injectDefaultElement:_,injectCreateAnimatedStyle:C}),O=function(){function e(){}var t=e.prototype;return t.attach=function(){},t.detach=function(){},t.getValue=function(){},t.getAnimatedValue=function(){return this.getValue()},t.addChild=function(e){},t.removeChild=function(e){},t.getChildren=function(){return[]},e}(),S=function(e){return Object.keys(e).map((function(t){return e[t]}))},R=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).children=[],t.getChildren=function(){return t.children},t.getPayload=function(e){return void 0===e&&(e=void 0),void 0!==e&&t.payload?t.payload[e]:t.payload||o(t)},t}i(t,e);var n=t.prototype;return n.addChild=function(e){0===this.children.length&&this.attach(),this.children.push(e)},n.removeChild=function(e){var t=this.children.indexOf(e);this.children.splice(t,1),0===this.children.length&&this.detach()},t}(O),D=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).payload=[],t.getAnimatedValue=function(){return t.getValue()},t.attach=function(){return t.payload.forEach((function(e){return e instanceof O&&e.addChild(o(t))}))},t.detach=function(){return t.payload.forEach((function(e){return e instanceof O&&e.removeChild(o(t))}))},t}return i(t,e),t}(R),A=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).payload={},t.getAnimatedValue=function(){return t.getValue(!0)},t.attach=function(){return S(t.payload).forEach((function(e){return e instanceof O&&e.addChild(o(t))}))},t.detach=function(){return S(t.payload).forEach((function(e){return e instanceof O&&e.removeChild(o(t))}))},t}return i(t,e),t.prototype.getValue=function(e){void 0===e&&(e=!1);var t={};for(var n in this.payload){var r=this.payload[n];(!e||r instanceof O)&&(t[n]=r instanceof O?r[e?"getAnimatedValue":"getValue"]():r)}return t},t}(R),T=function(e){function t(t){var n;return n=e.call(this)||this,!(t=t||{}).transform||t.transform instanceof O||(t=d.transform(t)),n.payload=t,n}return i(t,e),t}(A),P={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},j=function(){function e(){}return e.create=function(t,n,r){if("function"==typeof t)return t;if(m&&t.output&&"string"==typeof t.output[0])return m(t);if(Array.isArray(t))return e.create({range:t,output:n,extrapolate:r||"extend"});var a=t.output,i=t.range||[0,1],o=t.easing||function(e){return e},c="extend",l=t.map;void 0!==t.extrapolateLeft?c=t.extrapolateLeft:void 0!==t.extrapolate&&(c=t.extrapolate);var s="extend";return void 0!==t.extrapolateRight?s=t.extrapolateRight:void 0!==t.extrapolate&&(s=t.extrapolate),function(e){var t=function(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}(e,i);return function(e,t,n,r,a,i,o,c,l){var s=l?l(e):e;if(s<t){if("identity"===o)return s;"clamp"===o&&(s=t)}if(s>n){if("identity"===c)return s;"clamp"===c&&(s=n)}if(r===a)return r;if(t===n)return e<=t?r:a;t===-1/0?s=-s:n===1/0?s-=t:s=(s-t)/(n-t);s=i(s),r===-1/0?s=-s:a===1/0?s+=r:s=s*(a-r)+r;return s}(e,i[t],i[t+1],a[t],a[t+1],o,c,s,l)}},e}();var M="[-+]?\\d*\\.?\\d+",N=M+"%";function L(){return"\\(\\s*("+Array.prototype.slice.call(arguments).join(")\\s*,\\s*(")+")\\s*\\)"}var I=new RegExp("rgb"+L(M,M,M)),z=new RegExp("rgba"+L(M,M,M,M)),B=new RegExp("hsl"+L(M,N,N)),F=new RegExp("hsla"+L(M,N,N,M)),V=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,U=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,q=/^#([0-9a-fA-F]{6})$/,H=/^#([0-9a-fA-F]{8})$/;function W(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Y(e,t,n){var r=n<.5?n*(1+t):n+t-n*t,a=2*n-r,i=W(a,r,e+1/3),o=W(a,r,e),c=W(a,r,e-1/3);return Math.round(255*i)<<24|Math.round(255*o)<<16|Math.round(255*c)<<8}function G(e){var t=parseInt(e,10);return t<0?0:t>255?255:t}function K(e){return(parseFloat(e)%360+360)%360/360}function X(e){var t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function $(e){var t=parseFloat(e);return t<0?0:t>100?1:t/100}function Z(e){var t,n,r="number"==typeof(t=e)?t>>>0===t&&t>=0&&t<=4294967295?t:null:(n=q.exec(t))?parseInt(n[1]+"ff",16)>>>0:P.hasOwnProperty(t)?P[t]:(n=I.exec(t))?(G(n[1])<<24|G(n[2])<<16|G(n[3])<<8|255)>>>0:(n=z.exec(t))?(G(n[1])<<24|G(n[2])<<16|G(n[3])<<8|X(n[4]))>>>0:(n=V.exec(t))?parseInt(n[1]+n[1]+n[2]+n[2]+n[3]+n[3]+"ff",16)>>>0:(n=H.exec(t))?parseInt(n[1],16)>>>0:(n=U.exec(t))?parseInt(n[1]+n[1]+n[2]+n[2]+n[3]+n[3]+n[4]+n[4],16)>>>0:(n=B.exec(t))?(255|Y(K(n[1]),$(n[2]),$(n[3])))>>>0:(n=F.exec(t))?(Y(K(n[1]),$(n[2]),$(n[3]))|X(n[4]))>>>0:null;return null===r?e:"rgba("+((4278190080&(r=r||0))>>>24)+", "+((16711680&r)>>>16)+", "+((65280&r)>>>8)+", "+(255&r)/255+")"}var Q=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,J=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,ee=new RegExp("("+Object.keys(P).join("|")+")","g");var te=function(e){function t(n,r,a){var i;return(i=e.call(this)||this).getValue=function(){var e;return(e=i).calc.apply(e,i.payload.map((function(e){return e.getValue()})))},i.updateConfig=function(e,t){return i.calc=j.create(e,t)},i.interpolate=function(e,n){return new t(o(i),e,n)},i.payload=n instanceof D&&!n.updateConfig?n.payload:Array.isArray(n)?n:[n],i.calc=j.create(r,a),i}return i(t,e),t}(D);function ne(e,t){"function"==typeof e.update?t.add(e):e.getChildren().forEach((function(e){return ne(e,t)}))}var re=function(e){function t(t){var n;return(n=e.call(this)||this).setValue=function(e,t){void 0===t&&(t=!0),n.value=e,t&&n.flush()},n.getValue=function(){return n.value},n.updateStyles=function(){return ne(o(n),n.animatedStyles)},n.updateValue=function(e){return n.flush(n.value=e)},n.interpolate=function(e,t){return new te(o(n),e,t)},n.value=t,n.animatedStyles=new Set,n.done=!1,n.startPosition=t,n.lastPosition=t,n.lastVelocity=void 0,n.lastTime=void 0,n.controller=void 0,n}i(t,e);var n=t.prototype;return n.flush=function(){0===this.animatedStyles.size&&this.updateStyles(),this.animatedStyles.forEach((function(e){return e.update()}))},n.prepare=function(e){void 0===this.controller&&(this.controller=e),this.controller===e&&(this.startPosition=this.value,this.lastPosition=this.value,this.lastVelocity=e.isActive?this.lastVelocity:void 0,this.lastTime=e.isActive?this.lastTime:void 0,this.done=!1,this.animatedStyles.clear())},t}(R),ae=function(e){function t(t){var n;return(n=e.call(this)||this).setValue=function(e,t){void 0===t&&(t=!0),Array.isArray(e)?e.length===n.payload.length&&e.forEach((function(e,r){return n.payload[r].setValue(e,t)})):n.payload.forEach((function(r,a){return n.payload[a].setValue(e,t)}))},n.getValue=function(){return n.payload.map((function(e){return e.getValue()}))},n.interpolate=function(e,t){return new te(o(n),e,t)},n.payload=t.map((function(e){return new re(e)})),n}return i(t,e),t}(D);function ie(e,t){return null==e?t:e}function oe(e){return void 0!==e?Array.isArray(e)?e:[e]:[]}function ce(e,t){if(typeof e!=typeof t)return!1;if("string"==typeof e||"number"==typeof e)return e===t;var n;for(n in e)if(!(n in t))return!1;for(n in t)if(e[n]!==t[n])return!1;return void 0!==n||e===t}function le(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return"function"==typeof e?e.apply(void 0,n):e}function se(e){return Object.keys(e).map((function(t){return e[t]}))}function ue(e){var t=function(e){return e.to,e.from,e.config,e.native,e.onStart,e.onRest,e.onFrame,e.children,e.reset,e.reverse,e.force,e.immediate,e.impl,e.inject,e.delay,e.attach,e.destroyed,e.interpolateTo,e.autoStart,e.ref,a(e,["to","from","config","native","onStart","onRest","onFrame","children","reset","reverse","force","immediate","impl","inject","delay","attach","destroyed","interpolateTo","autoStart","ref"])}(e),n=Object.keys(e).reduce((function(n,r){var a;return void 0!==t[r]?n:c({},n,((a={})[r]=e[r],a))}),{});return c({to:t},n)}function de(e,t){var n,r=t[0],a=t[1];return c({},e,((n={})[r]=new(Array.isArray(a)?ae:re)(a),n))}function fe(e){var t=e.from,n=e.to,r=e.native,a=Object.entries(c({},t,n));return r?a.reduce(de,{}):c({},t,n)}function pe(e,t){return t&&("function"==typeof t?t(e):"object"==typeof t&&(t.current=e)),e}var he=function(e){return"auto"===e};var me={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ge=["Webkit","Ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}me=Object.keys(me).reduce((function(e,t){return ge.forEach((function(n){return e[function(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}(n,t)]=e[t]})),e}),me);var ye={};C((function(e){return new T(e)})),_("div"),x((function(e){var t=e.output.map((function(e){return e.replace(J,Z)})).map((function(e){return e.replace(ee,Z)})),n=t[0].match(Q).map((function(){return[]}));t.forEach((function(e){e.match(Q).forEach((function(e,t){return n[t].push(+e)}))}));var r=t[0].match(Q).map((function(t,r){return j.create(c({},e,{output:n[r]}))}));return function(e){var n=0;return t[0].replace(Q,(function(){return r[n++](e)})).replace(/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,(function(e,t,n,r,a){return"rgba("+Math.round(t)+", "+Math.round(n)+", "+Math.round(r)+", "+a+")"}))}})),k(P),w((function(e,t){var n=e.from,r=e.to,a=e.children;if(se(r).some(he)||se(n).some(he)){var i=a(fe(e));if(i){Array.isArray(i)&&(i={type:"div",props:{children:i}});var o=i.props.style;return l.createElement(i.type,c({key:i.key?i.key:void 0},i.props,{style:c({},o,{position:"absolute",visibility:"hidden"}),ref:function(a){if(a){var i,o,l=s.findDOMNode(a),u=getComputedStyle(l);if("border-box"===u.boxSizing)i=l.offsetWidth,o=l.offsetHeight;else{var d=parseFloat(u.paddingLeft||0)+parseFloat(u.paddingRight||0),f=parseFloat(u.paddingTop||0)+parseFloat(u.paddingBottom||0),p=parseFloat(u.borderLeftWidth||0)+parseFloat(u.borderRightWidth||0),h=parseFloat(u.borderTopWidth||0)+parseFloat(u.borderBottomWidth||0);i=l.offsetWidth-d-p,o=l.offsetHeight-f-h}var m=function(e,t){return function(n,r){var a,i=r[0],o=r[1];return c({},n,((a={})[i]="auto"===o?~i.indexOf("height")?t:e:o,a))}}(i,o);t(c({},e,{from:Object.entries(n).reduce(m,n),to:Object.entries(r).reduce(m,r)}))}}}))}}})),b((function(e,t){if(!e.nodeType||void 0===e.setAttribute)return!1;var n=t.style,r=t.children,i=t.scrollTop,o=t.scrollLeft,c=a(t,["style","children","scrollTop","scrollLeft"]);for(var l in void 0!==i&&(e.scrollTop=i),void 0!==o&&(e.scrollLeft=o),void 0!==r&&(e.textContent=r),n)if(n.hasOwnProperty(l)){var s=0===l.indexOf("--"),u=ve(l,n[l],s);"float"===l&&(l="cssFloat"),s?e.style.setProperty(l,u):e.style[l]=u}for(var d in c){var f=ye[d]||(ye[d]=d.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()})));void 0!==e.getAttribute(f)&&e.setAttribute(f,c[d])}}),(function(e){return e}));var be=!1,ke=new Set,we=function e(){var t=g(),n=ke,r=Array.isArray(n),a=0;for(n=r?n:n[Symbol.iterator]();;){var i;if(r){if(a>=n.length)break;i=n[a++]}else{if((a=n.next()).done)break;i=a.value}for(var o=i,c=!0,l=!0,s=0;s<o.configs.length;s++){for(var u=o.configs[s],d=void 0,f=void 0,h=0;h<u.animatedValues.length;h++){var m=u.animatedValues[h];if(!m.done){var v=u.fromValues[h],y=u.toValues[h],b=m.lastPosition,k=y instanceof O,w=Array.isArray(u.initialVelocity)?u.initialVelocity[h]:u.initialVelocity;if(k&&(y=y.getValue()),u.immediate||!k&&!u.decay&&v===y)m.updateValue(y),m.done=!0;else if(u.delay&&t-o.startTime<u.delay)c=!1;else if(l=!1,"string"!=typeof v&&"string"!=typeof y){if(void 0!==u.duration)b=v+u.easing((t-o.startTime-u.delay)/u.duration)*(y-v),d=t>=o.startTime+u.delay+u.duration;else if(u.decay)b=v+w/(1-.998)*(1-Math.exp(-(1-.998)*(t-o.startTime))),(d=Math.abs(m.lastPosition-b)<.1)&&(y=b);else{f=void 0!==m.lastTime?m.lastTime:t,w=void 0!==m.lastVelocity?m.lastVelocity:u.initialVelocity,t>f+64&&(f=t);for(var x=Math.floor(t-f),_=0;_<x;++_){b+=1*(w+=1*((-u.tension*(b-y)+-u.friction*w)/u.mass)/1e3)/1e3}var C=!(!u.clamp||0===u.tension)&&(v<y?b>y:b<y),E=Math.abs(w)<=u.precision,S=0===u.tension||Math.abs(y-b)<=u.precision;d=C||E&&S,m.lastVelocity=w,m.lastTime=t}k&&!u.toValues[h].done&&(d=!1),d?(m.value!==y&&(b=y),m.done=!0):c=!1,m.updateValue(b),m.lastPosition=b}else m.updateValue(y),m.done=!0}}!o.props.onFrame&&o.props.native||(o.animatedProps[u.name]=u.interpolation.getValue())}!o.props.onFrame&&o.props.native||(!o.props.native&&o.onUpdate&&o.onUpdate(),o.props.onFrame&&o.props.onFrame(o.animatedProps)),c&&(ke.delete(o),o.debouncedOnEnd({finished:!0,noChange:l}))}ke.size?p(e):be=!1},xe=function(e){ke.has(e)&&ke.delete(e)},_e=function(){function e(e,t){var n=this;void 0===t&&(t={native:!0,interpolateTo:!0,autoStart:!0}),this.getValues=function(){return n.props.native?n.interpolations:n.animatedProps},this.dependents=new Set,this.isActive=!1,this.hasChanged=!1,this.props={},this.merged={},this.animations={},this.interpolations={},this.animatedProps={},this.configs=[],this.frame=void 0,this.startTime=void 0,this.lastTime=void 0,this.update(c({},e,t))}var t=e.prototype;return t.update=function(e){var t=this;this.props=c({},this.props,e);var n=this.props.interpolateTo?ue(this.props):this.props,r=n.from,a=void 0===r?{}:r,i=n.to,o=void 0===i?{}:i,l=n.config,s=void 0===l?{}:l,u=n.delay,d=void 0===u?0:u,p=n.reverse,h=n.attach,m=n.reset,g=n.immediate,v=n.autoStart,y=n.ref;if(p){var b=[o,a];a=b[0],o=b[1]}this.hasChanged=!1;var k=h&&h(this),w=m?{}:this.merged;if(this.merged=c({},a,w,o),this.animations=Object.entries(this.merged).reduce((function(e,n,r){var i,o,l,u=n[0],p=n[1],h=!m&&e[u]||{},v="number"==typeof p,y="string"==typeof p&&!p.startsWith("#")&&!/\d/.test(p)&&!f[p],b=!v&&!y&&Array.isArray(p),w=void 0!==a[u]?a[u]:p,x=v||b||y?p:1,_=le(s,u);if(k&&(x=k.animations[u].parent),void 0===_.decay&&ce(h.changes,p))return e;if(t.hasChanged=!0,v||y)o=l=h.parent||new re(w);else if(b)o=l=h.parent||new ae(w);else{var C=h.interpolation&&h.interpolation.calc(h.parent.value);h.parent?(o=h.parent).setValue(0,!1):o=new re(0);var E={output:[void 0!==C?C:w,p]};h.interpolation?(l=h.interpolation,h.interpolation.updateConfig(E)):l=o.interpolate(E)}le(g,u)&&o.setValue(p,!1);var O=oe(o.getPayload());return O.forEach((function(e){return e.prepare(t)})),c({},e,((i={})[u]=c({},h,{name:u,parent:o,interpolation:l,animatedValues:O,changes:p,fromValues:oe(o.getValue()),toValues:oe(k?x.getPayload():x),immediate:le(g,u),delay:ie(_.delay,d||0),initialVelocity:ie(_.velocity,0),clamp:ie(_.clamp,!1),precision:ie(_.precision,.01),tension:ie(_.tension,170),friction:ie(_.friction,26),mass:ie(_.mass,1),duration:_.duration,easing:ie(_.easing,(function(e){return e})),decay:_.decay}),i))}),this.animations),this.hasChanged)for(var x in this.configs=se(this.animations),this.animatedProps={},this.interpolations={},this.animations)this.interpolations[x]=this.animations[x].interpolation,this.animatedProps[x]=this.animations[x].interpolation.getValue();for(var _=arguments.length,C=new Array(_>1?_-1:0),E=1;E<_;E++)C[E-1]=arguments[E];y||!v&&!C.length||this.start.apply(this,C);var O=C[0],S=C[1];return this.onEnd="function"==typeof O&&O,this.onUpdate=S,this.getValues()},t.start=function(e,t){var n,r=this;return this.startTime=g(),this.isActive&&this.stop(),this.isActive=!0,this.onEnd="function"==typeof e&&e,this.onUpdate=t,this.props.onStart&&this.props.onStart(),n=this,ke.has(n)||(ke.add(n),be||p(we),be=!0),new Promise((function(e){return r.resolve=e}))},t.stop=function(e){void 0===e&&(e=!1),e&&se(this.animations).forEach((function(e){return e.changes=void 0})),this.debouncedOnEnd({finished:e})},t.destroy=function(){xe(this),this.props={},this.merged={},this.animations={},this.interpolations={},this.animatedProps={},this.configs=[]},t.debouncedOnEnd=function(e){xe(this),this.isActive=!1;var t=this.onEnd;this.onEnd=null,t&&t(e),this.resolve&&this.resolve(),this.resolve=null},e}(),Ce=function(e){function t(t,n){var r;return r=e.call(this)||this,t.style&&(t=c({},t,{style:y(t.style)})),r.payload=t,r.update=n,r.attach(),r}return i(t,e),t}(A);function Ee(e){var t=function(t){function n(e){var n;return(n=t.call(this)||this).callback=function(){n.node&&(!1===d.fn(n.node,n.propsAnimated.getAnimatedValue(),o(n))&&n.forceUpdate())},n.attachProps(e),n}i(n,t);var r=n.prototype;return r.componentWillUnmount=function(){this.propsAnimated&&this.propsAnimated.detach()},r.setNativeProps=function(e){!1===d.fn(this.node,e,this)&&this.forceUpdate()},r.attachProps=function(e){e.forwardRef;var t=a(e,["forwardRef"]),n=this.propsAnimated;this.propsAnimated=new Ce(t,this.callback),n&&n.detach()},r.shouldComponentUpdate=function(e){var t=e.style,n=a(e,["style"]),r=this.props,i=r.style;return(!ce(a(r,["style"]),n)||!ce(i,t))&&(this.attachProps(e),!0)},r.render=function(){var t=this,n=this.propsAnimated.getValue(),r=(n.scrollTop,n.scrollLeft,a(n,["scrollTop","scrollLeft"]));return l.createElement(e,c({},r,{ref:function(e){return t.node=pe(e,t.props.forwardRef)}}))},n}(l.Component);return l.forwardRef((function(e,n){return l.createElement(t,c({},e,{forwardRef:n}))}))}var Oe={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},Se=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={lastProps:{from:{},to:{}},propsChanged:!1,internal:!1},t.controller=new _e(null,null),t.didUpdate=!1,t.didInject=!1,t.finished=!0,t.start=function(){t.finished=!1;var e=t.mounted;t.controller.start((function(n){return t.finish(c({},n,{wasMounted:e}))}),t.update)},t.stop=function(){return t.controller.stop(!0)},t.update=function(){return t.mounted&&t.setState({internal:!0})},t.finish=function(e){var n=e.finished,r=e.noChange,a=e.wasMounted;t.finished=!0,t.mounted&&n&&(!t.props.onRest||!a&&r||t.props.onRest(t.controller.merged),t.mounted&&t.didInject&&(t.afterInject=fe(t.props),t.setState({internal:!0})),t.mounted&&(t.didInject||t.props.after)&&t.setState({internal:!0}),t.didInject=!1)},t}i(t,e);var n=t.prototype;return n.componentDidMount=function(){this.componentDidUpdate(),this.mounted=!0},n.componentWillUnmount=function(){this.mounted=!1,this.stop()},t.getDerivedStateFromProps=function(e,t){var n=t.internal,r=t.lastProps,a=e.from,i=e.to,o=e.reset,c=e.force;return{propsChanged:!ce(i,r.to)||!ce(a,r.from)||o&&!n||c&&!n,lastProps:e,internal:!1}},n.render=function(){var e=this,t=this.props.children,n=this.state.propsChanged;if(this.props.inject&&n&&!this.injectProps){var r=this.props.inject(this.props,(function(t){e.injectProps=t,e.setState({internal:!0})}));if(r)return r}(this.injectProps||n)&&(this.didInject=!1,this.injectProps?(this.controller.update(this.injectProps),this.didInject=!0):n&&this.controller.update(this.props),this.didUpdate=!0,this.afterInject=void 0,this.injectProps=void 0);var a=c({},this.controller.getValues(),this.afterInject);return this.finished&&(a=c({},a,this.props.after)),Object.keys(a).length?t(a):null},n.componentDidUpdate=function(){this.didUpdate&&this.start(),this.didUpdate=!1},t}(l.Component);Se.defaultProps={from:{},to:{},config:Oe.default,native:!1,immediate:!1,reset:!1,force:!1,inject:u};var Re=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).first=!0,t.instances=new Set,t.hook=function(e,n,r,a){return t.instances.add(e),(a?n===r-1:0===n)?void 0:Array.from(t.instances)[a?n+1:n-1]},t}i(t,e);var n=t.prototype;return n.render=function(){var e=this,t=this.props,n=t.items,r=t.children,i=t.from,o=void 0===i?{}:i,s=t.initial,u=t.reverse,d=t.keys,f=t.delay,p=t.onRest,h=a(t,["items","children","from","initial","reverse","keys","delay","onRest"]),m=oe(n);return oe(m).map((function(t,n){return l.createElement(Se,c({onRest:0===n?p:null,key:"function"==typeof d?d(t):oe(d)[n],from:e.first&&void 0!==s?s||{}:o},h,{delay:0===n&&f||void 0,attach:function(t){return e.hook(t,n,m.length,u)},children:function(e){var a=r(t,n);return a?a(e):null}}))}))},n.componentDidUpdate=function(e){this.first=!1,e.items!==this.props.items&&this.instances.clear()},t}(l.PureComponent);Re.defaultProps={keys:function(e){return e}};var De="__default",Ae=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).guid=0,t.state={props:{},resolve:function(){return null},last:!0,index:0},t.next=function(e,n,r){return void 0===n&&(n=!0),void 0===r&&(r=0),t.running=!0,new Promise((function(a){t.mounted&&t.setState((function(t){return{props:e,resolve:a,last:n,index:r}}),(function(){return t.running=!1}))}))},t}i(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.componentDidUpdate({})},n.componentWillUnmount=function(){this.mounted=!1},n.componentDidUpdate=function(e){var t=this,n=this.props,r=n.states,a=n.filter,i=n.state;(e.state!==this.props.state||this.props.reset&&!this.running||!ce(r[i],e.states[e.state]))&&r&&i&&r[i]&&function(){var e=++t.guid,n=r[i];if(n)if(Array.isArray(n))for(var o=Promise.resolve(),c=function(r){var i=r,c=n[i],l=i===n.length-1;o=o.then((function(){return e===t.guid&&t.next(a(c),l,i)}))},l=0;l<n.length;l++)c(l);else if("function"==typeof n){var s=0;n((function(n,r){return void 0===r&&(r=!1),e===t.guid&&t.next(a(n),r,s++)}),(function(){return p((function(){return t.instance&&t.instance.stop()}))}),t.props)}else t.next(a(r[i]))}()},n.render=function(){var e=this,t=this.state,n=t.props,r=t.resolve,i=t.last,o=t.index;if(!n||0===Object.keys(n).length)return null;var s=this.props,u=(s.state,s.filter,s.states,s.config),d=s.primitive,f=s.onRest,p=s.forwardRef,h=a(s,["state","filter","states","config","primitive","onRest","forwardRef"]);return Array.isArray(u)&&(u=u[o]),l.createElement(d,c({ref:function(t){return e.instance=pe(t,p)},config:u},h,n,{onRest:function(e){r(e),f&&i&&f(e)}}))},t}(l.PureComponent);Ae.defaultProps={state:De};var Te=l.forwardRef((function(e,t){return l.createElement(Ae,c({},e,{forwardRef:t}))}));Te.create=function(e){return function(t,n){var r;return void 0===n&&(n=function(e){return e}),("function"==typeof t||Array.isArray(t))&&((r={})[De]=t,t=r),function(r){return l.createElement(Ae,c({primitive:e,states:t,filter:n},r))}}},Te.Spring=function(e){return Te.create(Se)(e,ue)},Te.Trail=function(e){return Te.create(Re)(e,ue)};var Pe=0,je=function(e){var t=e.items,n=e.keys,r=a(e,["items","keys"]);return t=oe(void 0!==t?t:null),n="function"==typeof n?t.map(n):oe(n),c({items:t,keys:n.map((function(e){return String(e)}))},r)},Me=function(e){i(n,e);var t=n.prototype;function n(t){var n;return(n=e.call(this,t)||this).destroyItem=function(e,t,r){return function(a){var i=n.props,o=i.onRest,c=i.onDestroyed;n.mounted&&(c&&c(e),n.setState((function(e){return{deleted:e.deleted.filter((function(e){return e.key!==t}))}})),o&&o(e,r,a))}},n.state={first:!0,transitions:[],current:{},deleted:[],prevProps:t},n}return t.componentDidMount=function(){this.mounted=!0},t.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(e,t){var n=t.first,r=t.prevProps,i=a(t,["first","prevProps"]),o=je(e),l=o.items,s=o.keys,u=o.initial,d=o.from,f=o.enter,p=o.leave,h=o.update,m=o.trail,g=void 0===m?0:m,v=o.unique,y=o.config,b=je(r),k=b.keys,w=b.items,x=c({},i.current),_=[].concat(i.deleted),C=Object.keys(x),E=new Set(C),O=new Set(s),S=s.filter((function(e){return!E.has(e)})),R=i.transitions.filter((function(e){return!e.destroyed&&!O.has(e.originalKey)})).map((function(e){return e.originalKey})),D=s.filter((function(e){return E.has(e)})),A=0;S.forEach((function(e){v&&_.find((function(t){return t.originalKey===e}))&&(_=_.filter((function(t){return t.originalKey!==e})));var t=s.indexOf(e),r=l[t],a="enter";x[e]={state:a,originalKey:e,key:v?String(e):Pe++,item:r,trail:A+=g,config:le(y,r,a),from:le(n&&void 0!==u?u||{}:d,r),to:le(f,r)}})),R.forEach((function(e){var t=k.indexOf(e),n=w[t],r="leave";_.push(c({},x[e],{state:r,destroyed:!0,left:k[Math.max(0,t-1)],right:k[Math.min(k.length,t+1)],trail:A+=g,config:le(y,n,r),to:le(p,n)})),delete x[e]})),D.forEach((function(e){var t=s.indexOf(e),n=l[t],r="update";x[e]=c({},x[e],{item:n,state:r,trail:A+=g,config:le(y,n,r),to:le(h,n)})}));var T=s.map((function(e){return x[e]}));return _.forEach((function(e){var t,n=e.left,r=e.right,i=a(e,["left","right"]);-1!==(t=T.findIndex((function(e){return e.originalKey===n})))&&(t+=1),-1===t&&(t=T.findIndex((function(e){return e.originalKey===r}))),-1===t&&(t=_.findIndex((function(e){return e.originalKey===n}))),-1===t&&(t=_.findIndex((function(e){return e.originalKey===r}))),t=Math.max(0,t),T=[].concat(T.slice(0,t),[i],T.slice(t))})),{first:n&&0===S.length,transitions:T,current:x,deleted:_,prevProps:e}},t.render=function(){var e=this,t=this.props,n=(t.initial,t.from,t.enter,t.leave,t.update,t.onDestroyed,t.keys,t.items,t.onFrame),r=t.onRest,i=t.onStart,o=(t.trail,t.config,t.children),s=(t.unique,t.reset),u=a(t,["initial","from","enter","leave","update","onDestroyed","keys","items","onFrame","onRest","onStart","trail","config","children","unique","reset"]);return this.state.transitions.map((function(t,a){var d,f=t.state,p=t.key,h=t.item,m=t.from,g=t.to,v=t.trail,y=t.config,b=t.destroyed;return l.createElement(Te,c({reset:s&&"enter"===f,primitive:Se,state:f,filter:ue,states:(d={},d[f]=g,d),key:p,onRest:b?e.destroyItem(h,p,f):r&&function(e){return r(h,f,e)},onStart:i&&function(){return i(h,f)},onFrame:n&&function(e){return n(h,f,e)},delay:v,config:y},u,{from:m,children:function(e){var t=o(h,f,a);return t?t(e):null}}))}))},n}(l.PureComponent);Me.defaultProps={keys:function(e){return e},unique:!1,reset:!1};var Ne=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].reduce((function(e,t){return e[t]=Ee(t),e}),Ee);t.Spring=Se,t.Keyframes=Te,t.Transition=Me,t.Trail=Re,t.Controller=_e,t.config=Oe,t.animated=Ne,t.interpolate=function(e,t,n){return e&&new te(e,t,n)},t.Globals=E},function(e,t){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}},,,,,,,,,,,,function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(2),o=n.n(i),c=n(69),l=n(7),s=n.n(l),u=n(2755),d=n(2410),f=n(141),p=n(2754),h=n(2757),m=n(81),g=n.n(m),v=n(2878),y=n(34),b=n(71);const k={arr:Array.isArray,obj:e=>"[object Object]"===Object.prototype.toString.call(e),fun:e=>"function"==typeof e,str:e=>"string"==typeof e,num:e=>"number"==typeof e,und:e=>void 0===e,nul:e=>null===e,set:e=>e instanceof Set,map:e=>e instanceof Map,equ(e,t){if(typeof e!=typeof t)return!1;if(k.str(e)||k.num(e))return e===t;if(k.obj(e)&&k.obj(t)&&Object.keys(e).length+Object.keys(t).length===0)return!0;let n;for(n in e)if(!(n in t))return!1;for(n in t)if(e[n]!==t[n])return!1;return!k.und(n)||e===t}};function w(){const e=Object(r.useState)(!1)[1];return Object(r.useCallback)((()=>e((e=>!e))),[])}function x(e,t){return k.und(e)||k.nul(e)?t:e}function _(e){return k.und(e)?[]:k.arr(e)?e:[e]}function C(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return k.fun(e)?e(...n):e}function E(e){const t=function(e){return e.to,e.from,e.config,e.onStart,e.onRest,e.onFrame,e.children,e.reset,e.reverse,e.force,e.immediate,e.delay,e.attach,e.destroyed,e.interpolateTo,e.ref,e.lazy,Object(b.default)(e,["to","from","config","onStart","onRest","onFrame","children","reset","reverse","force","immediate","delay","attach","destroyed","interpolateTo","ref","lazy"])}(e);if(k.und(t))return Object(y.default)({to:t},e);const n=Object.keys(e).reduce(((n,r)=>k.und(t[r])?Object(y.default)({},n,{[r]:e[r]}):n),{});return Object(y.default)({to:t},n)}class O{constructor(){this.payload=void 0,this.children=[]}getAnimatedValue(){return this.getValue()}getPayload(){return this.payload||this}attach(){}detach(){}getChildren(){return this.children}addChild(e){0===this.children.length&&this.attach(),this.children.push(e)}removeChild(e){const t=this.children.indexOf(e);this.children.splice(t,1),0===this.children.length&&this.detach()}}class S extends O{constructor(){super(...arguments),this.payload=[],this.attach=()=>this.payload.forEach((e=>e instanceof O&&e.addChild(this))),this.detach=()=>this.payload.forEach((e=>e instanceof O&&e.removeChild(this)))}}class R extends O{constructor(){super(...arguments),this.payload={},this.attach=()=>Object.values(this.payload).forEach((e=>e instanceof O&&e.addChild(this))),this.detach=()=>Object.values(this.payload).forEach((e=>e instanceof O&&e.removeChild(this)))}getValue(e){void 0===e&&(e=!1);const t={};for(const n in this.payload){const r=this.payload[n];(!e||r instanceof O)&&(t[n]=r instanceof O?r[e?"getAnimatedValue":"getValue"]():r)}return t}getAnimatedValue(){return this.getValue(!0)}}let D,A;function T(e,t){D={fn:e,transform:t}}function P(e){A=e}let j,M=e=>"undefined"!=typeof window?window.requestAnimationFrame(e):-1;function N(e){j=e}let L,I=()=>Date.now();function z(e){L=e}let B,F,V=e=>e.current;function U(e){B=e}class q extends R{constructor(e,t){super(),this.update=void 0,this.payload=e.style?Object(y.default)({},e,{style:B(e.style)}):e,this.update=t,this.attach()}}let H=!1;const W=new Set,Y=()=>{if(!H)return!1;let e=I();for(let t of W){let n=!1;for(let r=0;r<t.configs.length;r++){let a,i,o=t.configs[r];for(let t=0;t<o.animatedValues.length;t++){let r=o.animatedValues[t];if(r.done)continue;let c=o.fromValues[t],l=o.toValues[t],s=r.lastPosition,u=l instanceof O,d=Array.isArray(o.initialVelocity)?o.initialVelocity[t]:o.initialVelocity;if(u&&(l=l.getValue()),o.immediate)r.setValue(l),r.done=!0;else if("string"!=typeof c&&"string"!=typeof l){if(void 0!==o.duration)s=c+o.easing((e-r.startTime)/o.duration)*(l-c),a=e>=r.startTime+o.duration;else if(o.decay)s=c+d/(1-.998)*(1-Math.exp(-(1-.998)*(e-r.startTime))),a=Math.abs(r.lastPosition-s)<.1,a&&(l=s);else{i=void 0!==r.lastTime?r.lastTime:e,d=void 0!==r.lastVelocity?r.lastVelocity:o.initialVelocity,e>i+64&&(i=e);let t=Math.floor(e-i);for(let e=0;e<t;++e){d+=1*((-o.tension*(s-l)+-o.friction*d)/o.mass)/1e3,s+=1*d/1e3}let n=!(!o.clamp||0===o.tension)&&(c<l?s>l:s<l),u=Math.abs(d)<=o.precision,f=0===o.tension||Math.abs(l-s)<=o.precision;a=n||u&&f,r.lastVelocity=d,r.lastTime=e}u&&!o.toValues[t].done&&(a=!1),a?(r.value!==l&&(s=l),r.done=!0):n=!0,r.setValue(s),r.lastPosition=s}else r.setValue(l),r.done=!0}t.props.onFrame&&(t.values[o.name]=o.interpolation.getValue())}t.props.onFrame&&t.props.onFrame(t.values),n||(W.delete(t),t.stop(!0))}return W.size?F?F():M(Y):H=!1,H};function G(e,t,n){if("function"==typeof e)return e;if(Array.isArray(e))return G({range:e,output:t,extrapolate:n});if(j&&"string"==typeof e.output[0])return j(e);const r=e,a=r.output,i=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",c=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(e=>e);return e=>{const t=function(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}(e,i);return function(e,t,n,r,a,i,o,c,l){let s=l?l(e):e;if(s<t){if("identity"===o)return s;"clamp"===o&&(s=t)}if(s>n){if("identity"===c)return s;"clamp"===c&&(s=n)}if(r===a)return r;if(t===n)return e<=t?r:a;t===-1/0?s=-s:n===1/0?s-=t:s=(s-t)/(n-t);s=i(s),r===-1/0?s=-s:a===1/0?s+=r:s=s*(a-r)+r;return s}(e,i[t],i[t+1],a[t],a[t+1],l,o,c,r.map)}}class K extends S{constructor(e,t,n,r){super(),this.calc=void 0,this.payload=e instanceof S&&!(e instanceof K)?e.getPayload():Array.isArray(e)?e:[e],this.calc=G(t,n,r)}getValue(){return this.calc(...this.payload.map((e=>e.getValue())))}updateConfig(e,t,n){this.calc=G(e,t,n)}interpolate(e,t,n){return new K(this,e,t,n)}}function X(e,t){"update"in e?t.add(e):e.getChildren().forEach((e=>X(e,t)))}class $ extends O{constructor(e){var t;super(),t=this,this.animatedStyles=new Set,this.value=void 0,this.startPosition=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.startTime=void 0,this.lastTime=void 0,this.done=!1,this.setValue=function(e,n){void 0===n&&(n=!0),t.value=e,n&&t.flush()},this.value=e,this.startPosition=e,this.lastPosition=e}flush(){0===this.animatedStyles.size&&X(this,this.animatedStyles),this.animatedStyles.forEach((e=>e.update()))}clearStyles(){this.animatedStyles.clear()}getValue(){return this.value}interpolate(e,t,n){return new K(this,e,t,n)}}class Z extends S{constructor(e){super(),this.payload=e.map((e=>new $(e)))}setValue(e,t){void 0===t&&(t=!0),Array.isArray(e)?e.length===this.payload.length&&e.forEach(((e,n)=>this.payload[n].setValue(e,t))):this.payload.forEach((n=>n.setValue(e,t)))}getValue(){return this.payload.map((e=>e.getValue()))}interpolate(e,t){return new K(this,e,t)}}let Q=0;class J{constructor(){this.id=void 0,this.idle=!0,this.hasChanged=!1,this.guid=0,this.local=0,this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.listeners=[],this.queue=[],this.localQueue=void 0,this.getValues=()=>this.interpolations,this.id=Q++}update(e){if(!e)return this;const t=E(e),n=t.delay,r=void 0===n?0:n,a=t.to,i=Object(b.default)(t,["delay","to"]);if(k.arr(a)||k.fun(a))this.queue.push(Object(y.default)({},i,{delay:r,to:a}));else if(a){let e={};Object.entries(a).forEach((t=>{let n=t[0],a=t[1];const o=Object(y.default)({to:{[n]:a},delay:C(r,n)},i),c=e[o.delay]&&e[o.delay].to;e[o.delay]=Object(y.default)({},e[o.delay],o,{to:Object(y.default)({},c,o.to)})})),this.queue=Object.values(e)}return this.queue=this.queue.sort(((e,t)=>e.delay-t.delay)),this.diff(i),this}start(e){if(this.queue.length){this.idle=!1,this.localQueue&&this.localQueue.forEach((e=>{let t=e.from,n=void 0===t?{}:t,r=e.to,a=void 0===r?{}:r;k.obj(n)&&(this.merged=Object(y.default)({},n,this.merged)),k.obj(a)&&(this.merged=Object(y.default)({},this.merged,a))}));const t=this.local=++this.guid,n=this.localQueue=this.queue;this.queue=[],n.forEach(((r,a)=>{let i=r.delay,o=Object(b.default)(r,["delay"]);const c=r=>{a===n.length-1&&t===this.guid&&r&&(this.idle=!0,this.props.onRest&&this.props.onRest(this.merged)),e&&e()};let l=k.arr(o.to)||k.fun(o.to);i?setTimeout((()=>{t===this.guid&&(l?this.runAsync(o,c):this.diff(o).start(c))}),i):l?this.runAsync(o,c):this.diff(o).start(c)}))}else k.fun(e)&&this.listeners.push(e),this.props.onStart&&this.props.onStart(),t=this,W.has(t)||W.add(t),H||(H=!0,M(F||Y));var t;return this}stop(e){return this.listeners.forEach((t=>t(e))),this.listeners=[],this}pause(e){var t;return this.stop(!0),e&&(t=this,W.has(t)&&W.delete(t)),this}runAsync(e,t){var n=this;e.delay;let r=Object(b.default)(e,["delay"]);const a=this.local;let i=Promise.resolve(void 0);if(k.arr(r.to))for(let e=0;e<r.to.length;e++){const t=e,n=Object(y.default)({},r,E(r.to[t]));k.arr(n.config)&&(n.config=n.config[t]),i=i.then((()=>{if(a===this.guid)return new Promise((e=>this.diff(n).start(e)))}))}else if(k.fun(r.to)){let e,t=0;i=i.then((()=>r.to((n=>{const i=Object(y.default)({},r,E(n));if(k.arr(i.config)&&(i.config=i.config[t]),t++,a===this.guid)return e=new Promise((e=>this.diff(i).start(e)))}),(function(e){return void 0===e&&(e=!0),n.stop(e)})).then((()=>e))))}i.then(t)}diff(e){this.props=Object(y.default)({},this.props,e);let t=this.props,n=t.from,r=void 0===n?{}:n,a=t.to,i=void 0===a?{}:a,o=t.config,c=void 0===o?{}:o,l=t.reverse,s=t.attach,u=t.reset,d=t.immediate;if(l){var f=[i,r];r=f[0],i=f[1]}this.merged=Object(y.default)({},r,this.merged,i),this.hasChanged=!1;let p=s&&s(this);if(this.animations=Object.entries(this.merged).reduce(((e,t)=>{let n=t[0],a=t[1],i=e[n]||{};const o=k.num(a),l=k.str(a)&&!a.startsWith("#")&&!/\d/.test(a)&&!A[a],s=k.arr(a),f=!o&&!s&&!l;let h=k.und(r[n])?a:r[n],m=o||s||l?a:1,g=C(c,n);p&&(m=p.animations[n].parent);let v,b=i.parent,w=i.interpolation,E=_(p?m.getPayload():m),O=a;f&&(O=j({range:[0,1],output:[a,a]})(1));let S=w&&w.getValue();const R=!k.und(b)&&i.animatedValues.some((e=>!e.done)),D=!k.equ(O,S),T=!k.equ(O,i.previous),P=!k.equ(g,i.config);if(u||T&&D||P){if(o||l)b=w=i.parent||new $(h);else if(s)b=w=i.parent||new Z(h);else if(f){let e=i.interpolation&&i.interpolation.calc(i.parent.value);e=void 0===e||u?h:e,i.parent?(b=i.parent,b.setValue(0,!1)):b=new $(0);const t={output:[e,a]};i.interpolation?(w=i.interpolation,i.interpolation.updateConfig(t)):w=b.interpolate(t)}return E=_(p?m.getPayload():m),v=_(b.getPayload()),u&&!f&&b.setValue(h,!1),this.hasChanged=!0,v.forEach((e=>{e.startPosition=e.value,e.lastPosition=e.value,e.lastVelocity=R?e.lastVelocity:void 0,e.lastTime=R?e.lastTime:void 0,e.startTime=I(),e.done=!1,e.animatedStyles.clear()})),C(d,n)&&b.setValue(f?m:a,!1),Object(y.default)({},e,{[n]:Object(y.default)({},i,{name:n,parent:b,interpolation:w,animatedValues:v,toValues:E,previous:O,config:g,fromValues:_(b.getValue()),immediate:C(d,n),initialVelocity:x(g.velocity,0),clamp:x(g.clamp,!1),precision:x(g.precision,.01),tension:x(g.tension,170),friction:x(g.friction,26),mass:x(g.mass,1),duration:g.duration,easing:x(g.easing,(e=>e)),decay:g.decay})})}return D?e:(f&&(b.setValue(1,!1),w.updateConfig({output:[O,O]})),b.done=!0,this.hasChanged=!0,Object(y.default)({},e,{[n]:Object(y.default)({},e[n],{previous:O})}))}),this.animations),this.hasChanged){this.configs=Object.values(this.animations),this.values={},this.interpolations={};for(let e in this.animations)this.interpolations[e]=this.animations[e].interpolation,this.values[e]=this.animations[e].interpolation.getValue()}return this}destroy(){this.stop(),this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.local=0}}let ee=0;const te="enter",ne="leave",re="update",ae=(e,t)=>("function"==typeof t?e.map(t):_(t)).map(String),ie=e=>{let t=e.items,n=e.keys,r=void 0===n?e=>e:n,a=Object(b.default)(e,["items","keys"]);return t=_(void 0!==t?t:null),Object(y.default)({items:t,keys:ae(t,r)},a)};function oe(e,t,n){const a=Object(y.default)({items:e,keys:t||(e=>e)},n),i=ie(a),o=i.lazy,c=void 0!==o&&o,l=(i.unique,i.reset),s=void 0!==l&&l,u=(i.enter,i.leave,i.update,i.onDestroyed),d=(i.keys,i.items,i.onFrame),f=i.onRest,p=i.onStart,h=i.ref,m=Object(b.default)(i,["lazy","unique","reset","enter","leave","update","onDestroyed","keys","items","onFrame","onRest","onStart","ref"]),g=w(),v=Object(r.useRef)(!1),k=Object(r.useRef)({mounted:!1,first:!0,deleted:[],current:{},transitions:[],prevProps:{},paused:!!a.ref,instances:!v.current&&new Map,forceUpdate:g});return Object(r.useImperativeHandle)(a.ref,(()=>({start:()=>Promise.all(Array.from(k.current.instances).map((e=>{let t=e[1];return new Promise((e=>t.start(e)))}))),stop:e=>Array.from(k.current.instances).forEach((t=>t[1].stop(e))),get controllers(){return Array.from(k.current.instances).map((e=>e[1]))}}))),k.current=function(e,t){let n=e.first,r=e.prevProps,a=Object(b.default)(e,["first","prevProps"]),i=ie(t),o=i.items,c=i.keys,l=i.initial,s=i.from,u=i.enter,d=i.leave,f=i.update,p=i.trail,h=void 0===p?0:p,m=i.unique,g=i.config,v=i.order,k=void 0===v?[te,ne,re]:v,w=ie(r),x=w.keys,_=w.items,E=Object(y.default)({},a.current),O=[...a.deleted],S=Object.keys(E),R=new Set(S),D=new Set(c),A=c.filter((e=>!R.has(e))),T=a.transitions.filter((e=>!e.destroyed&&!D.has(e.originalKey))).map((e=>e.originalKey)),P=c.filter((e=>R.has(e))),j=-h;for(;k.length;){switch(k.shift()){case te:A.forEach(((e,t)=>{m&&O.find((t=>t.originalKey===e))&&(O=O.filter((t=>t.originalKey!==e)));const r=c.indexOf(e),a=o[r],i=n&&void 0!==l?"initial":te;E[e]={slot:i,originalKey:e,key:m?String(e):ee++,item:a,trail:j+=h,config:C(g,a,i),from:C(n&&void 0!==l?l||{}:s,a),to:C(u,a)}}));break;case ne:T.forEach((e=>{const t=x.indexOf(e),n=_[t],r=ne;O.unshift(Object(y.default)({},E[e],{slot:r,destroyed:!0,left:x[Math.max(0,t-1)],right:x[Math.min(x.length,t+1)],trail:j+=h,config:C(g,n,r),to:C(d,n)})),delete E[e]}));break;case re:P.forEach((e=>{const t=c.indexOf(e),n=o[t],r=re;E[e]=Object(y.default)({},E[e],{item:n,slot:r,trail:j+=h,config:C(g,n,r),to:C(f,n)})}))}}let M=c.map((e=>E[e]));return O.forEach((e=>{let t,n=e.left,r=(e.right,Object(b.default)(e,["left","right"]));-1!==(t=M.findIndex((e=>e.originalKey===n)))&&(t+=1),t=Math.max(0,t),M=[...M.slice(0,t),r,...M.slice(t)]})),Object(y.default)({},a,{changed:A.length||T.length||P.length,first:n&&0===A.length,transitions:M,current:E,deleted:O,prevProps:t})}(k.current,a),k.current.changed&&k.current.transitions.forEach((e=>{const t=e.slot,n=e.from,r=e.to,a=e.config,i=e.trail,o=e.key,l=e.item;k.current.instances.has(o)||k.current.instances.set(o,new J);const g=k.current.instances.get(o),v=Object(y.default)({},m,{to:r,from:n,config:a,ref:h,onRest:n=>{if(k.current.mounted){e.destroyed&&(h||c||ce(k,o),u&&u(l));!Array.from(k.current.instances).some((e=>!e[1].idle))&&(h||c)&&k.current.deleted.length>0&&ce(k),f&&f(l,t,n)}},onStart:p&&(()=>p(l,t)),onFrame:d&&(e=>d(l,t,e)),delay:i,reset:s&&t===te});g.update(v),k.current.paused||g.start()})),Object(r.useEffect)((()=>(k.current.mounted=v.current=!0,()=>{k.current.mounted=v.current=!1,Array.from(k.current.instances).map((e=>e[1].destroy())),k.current.instances.clear()})),[]),k.current.transitions.map((e=>{let t=e.item,n=e.slot,r=e.key;return{item:t,key:r,state:n,props:k.current.instances.get(r).getValues()}}))}function ce(e,t){const n=e.current.deleted;for(let r of n){let n=r.key;const a=e=>e.key!==n;(k.und(t)||t===n)&&(e.current.instances.delete(n),e.current.transitions=e.current.transitions.filter(a),e.current.deleted=e.current.deleted.filter(a))}e.current.forceUpdate()}class le extends R{constructor(e){void 0===e&&(e={}),super(),!e.transform||e.transform instanceof O||(e=D.transform(e)),this.payload=e}}const se={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},ue="[-+]?\\d*\\.?\\d+",de=ue+"%";function fe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}const pe=new RegExp("rgb"+fe(ue,ue,ue)),he=new RegExp("rgba"+fe(ue,ue,ue,ue)),me=new RegExp("hsl"+fe(ue,de,de)),ge=new RegExp("hsla"+fe(ue,de,de,ue)),ve=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,ye=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,be=/^#([0-9a-fA-F]{6})$/,ke=/^#([0-9a-fA-F]{8})$/;function we(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function xe(e,t,n){const r=n<.5?n*(1+t):n+t-n*t,a=2*n-r,i=we(a,r,e+1/3),o=we(a,r,e),c=we(a,r,e-1/3);return Math.round(255*i)<<24|Math.round(255*o)<<16|Math.round(255*c)<<8}function _e(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function Ce(e){return(parseFloat(e)%360+360)%360/360}function Ee(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function Oe(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function Se(e){let t=function(e){let t;return"number"==typeof e?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=be.exec(e))?parseInt(t[1]+"ff",16)>>>0:se.hasOwnProperty(e)?se[e]:(t=pe.exec(e))?(_e(t[1])<<24|_e(t[2])<<16|_e(t[3])<<8|255)>>>0:(t=he.exec(e))?(_e(t[1])<<24|_e(t[2])<<16|_e(t[3])<<8|Ee(t[4]))>>>0:(t=ve.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=ke.exec(e))?parseInt(t[1],16)>>>0:(t=ye.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=me.exec(e))?(255|xe(Ce(t[1]),Oe(t[2]),Oe(t[3])))>>>0:(t=ge.exec(e))?(xe(Ce(t[1]),Oe(t[2]),Oe(t[3]))|Ee(t[4]))>>>0:null}(e);return null===t?e:(t=t||0,`rgba(${(4278190080&t)>>>24}, ${(16711680&t)>>>16}, ${(65280&t)>>>8}, ${(255&t)/255})`)}const Re=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,De=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Ae=new RegExp(`(${Object.keys(se).join("|")})`,"g");let Te={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};const Pe=["Webkit","Ms","Moz","O"];function je(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||Te.hasOwnProperty(e)&&Te[e]?(""+t).trim():t+"px"}Te=Object.keys(Te).reduce(((e,t)=>(Pe.forEach((n=>e[((e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1))(n,t)]=e[t])),e)),Te);const Me={};U((e=>new le(e))),z("div"),N((e=>{const t=e.output.map((e=>e.replace(De,Se))).map((e=>e.replace(Ae,Se))),n=t[0].match(Re).map((()=>[]));t.forEach((e=>{e.match(Re).forEach(((e,t)=>n[t].push(+e)))}));const r=t[0].match(Re).map(((t,r)=>G(Object(y.default)({},e,{output:n[r]}))));return e=>{let n=0;return t[0].replace(Re,(()=>r[n++](e))).replace(/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,((e,t,n,r,a)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${a})`))}})),P(se),T(((e,t)=>{if(!e.nodeType||void 0===e.setAttribute)return!1;{const a=t.style,i=t.children,o=t.scrollTop,c=t.scrollLeft,l=Object(b.default)(t,["style","children","scrollTop","scrollLeft"]),s="filter"===e.nodeName||e.parentNode&&"filter"===e.parentNode.nodeName;void 0!==o&&(e.scrollTop=o),void 0!==c&&(e.scrollLeft=c),void 0!==i&&(e.textContent=i);for(let t in a)if(a.hasOwnProperty(t)){var n=0===t.indexOf("--"),r=je(t,a[t],n);"float"===t&&(t="cssFloat"),n?e.style.setProperty(t,r):e.style[t]=r}for(let t in l){const n=s?t:Me[t]||(Me[t]=t.replace(/([A-Z])/g,(e=>"-"+e.toLowerCase())));void 0!==e.getAttribute(n)&&e.setAttribute(n,l[t])}}}),(e=>e));var Ne,Le;const Ie=(Ne=e=>Object(r.forwardRef)(((t,n)=>{const i=w(),o=Object(r.useRef)(!0),c=Object(r.useRef)(null),l=Object(r.useRef)(null),s=Object(r.useCallback)((e=>{const t=c.current;c.current=new q(e,(()=>{let e=!1;l.current&&(e=D.fn(l.current,c.current.getAnimatedValue())),l.current&&!1!==e||i()})),t&&t.detach()}),[]);Object(r.useEffect)((()=>()=>{o.current=!1,c.current&&c.current.detach()}),[]),Object(r.useImperativeHandle)(n,(()=>V(l,o,i))),s(t);const u=c.current.getValue(),d=(u.scrollTop,u.scrollLeft,Object(b.default)(u,["scrollTop","scrollLeft"])),f=(p=e,!k.fun(p)||p.prototype instanceof a.a.Component?e=>l.current=function(e,t){return t&&(k.fun(t)?t(e):k.obj(t)&&(t.current=e)),e}(e,n):void 0);var p;return a.a.createElement(e,Object(y.default)({},d,{ref:f}))})),void 0===(Le=!1)&&(Le=!0),e=>(k.arr(e)?e:Object.keys(e)).reduce(((e,t)=>{const n=Le?t[0].toLowerCase()+t.substring(1):t;return e[n]=Ne(n),e}),Ne))(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]);function ze(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Be=n(99),Fe=n(171),Ve=n(498),Ue=n(891),qe=n(1738);function He(e,t,n,r,a,i,o){try{var c=e[i](o),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function We(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}(e,t)||Ge(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Ge(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function Ge(e,t){if(e){if("string"==typeof e)return Ke(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ke(e,t):void 0}}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Xe=new g.a("doc:book.tpl");function $e(e,t){var n,r=t?3:4,a=[],i=Ye(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if("Official"===o.category&&"zh-cn"!==window.appData.locale)break;var c,l=Ye(o.templates);try{for(l.s();!(c=l.n()).done;){var s=c.value;if(a.push(s),a.length===r)return a}}catch(e){l.e(e)}finally{l.f()}}}catch(e){i.e(e)}finally{i.f()}return a}var Ze=function(e){var t=e.book_id,n=e.type,a=We(Object(r.useState)(!1),2),i=a[0],o=a[1],c=We(Object(r.useState)([]),2),l=c[0],s=c[1],u=We(Object(r.useState)([]),2),d=u[0],p=u[1],h=We(Object(r.useState)(!1),2),m=h[0],g=h[1],v=new Ue.a(f.webProxy.templates,f.webProxy.docs);return{state:{all:d,loading:i,templates:l,templateSelectorVisible:m},loadTemplates:function(){var e,r=(e=regeneratorRuntime.mark((function e(){var r,a,i,c,l,u,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,Promise.all([v.getAllTemplatesByBook(t),f.webProxy.editor.recentlyUpdatedDocs({book_id:t,type:n})]);case 3:r=e.sent,a=We(r,2),i=a[0],c=a[1],l="Doc"===n?"lake":"lakesheet",u=v.filterTemplatesByFormat(i,l),p(i),(d=$e(u,c.docs.length>0)).push({type:"recent",id:"all",cover:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*o_-rQ4Y6pyQAAAAAAAAAAAAAARQnAQ"}),c.docs.length>0&&d.push(c),Xe("templates",d),o(!1),s(d);case 16:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){He(i,r,a,o,c,"next",e)}function c(e){He(i,r,a,o,c,"throw",e)}o(void 0)}))});return function(){return r.apply(this,arguments)}}(),loadTemplate:v.loadTemplate,loadDoc:v.loadDoc,getCover:v.getTemplateCover,setTemplateSelectorVisible:g}},Qe="DocWizard-module_wrap_3Mdm0",Je="DocWizard-module_template_3TMLO",et="DocWizard-module_docWrap_2hoV4",tt="DocWizard-module_main_3IOqS",nt="DocWizard-module_sheetWrap_2uxB_",rt="DocWizard-module_adaptMode_2NA32",at="DocWizard-module_container_1J1RA",it="DocWizard-module_head_1h6k3",ot="DocWizard-module_templates_3wDC4",ct="DocWizard-module_recentCover_1lHTS",lt="DocWizard-module_docs_1280C",st="DocWizard-module_templateFullCover_67IC2",ut="DocWizard-module_templateFoatTitle_2oVot",dt="DocWizard-module_recent_1sMEP",ft="DocWizard-module_recentTitle_2wOP8",pt="DocWizard-module_templateWrap_29tZ3",ht="DocWizard-module_title_34wty";function mt(){return(mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function gt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vt(e,t,n,r,a,i,o){try{var c=e[i](o),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function yt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return bt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var kt=new g.a("doc:wizard");function wt(e){var t={bottom:0};if("Sheet"===e)return t.bottom=32,t;var n=document.querySelector(".lake-content-editor");if(!n)return t;var r=n.getBoundingClientRect();return r.height+111<window.innerHeight&&(t.bottom=window.innerHeight-(r.height+111)),t}function xt(e){var t=e.book,n=Ze({book_id:t.id,type:e.docType||"Doc"}),i=n.state,o=i.all,c=i.templates,l=i.loading,u=i.templateSelectorVisible;Object(r.useEffect)((function(){n.loadTemplates()}),[]);var d=function(){var r,a=(r=regeneratorRuntime.mark((function r(a,i){var o,c,l,s;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!i){r.next=7;break}return r.next=3,n.loadDoc(a.slug,a.book_id);case 3:o=r.sent,e.useTemplate(o),r.next=20;break;case 7:return r.next=9,n.loadTemplate(a.id);case 9:if(c=r.sent,Ve.FORMAT_TYPE_MAP[c.format]!==e.docType){r.next=15;break}e.useTemplate({title:c.name,content:"lake"===c.format?c.doclet.body_asl:c.doclet.body}),r.next=20;break;case 15:return l=new Ue.a(e.templateProxy,e.docProxy),r.next=18,l.createDocByTemplate(e.book,c.id);case 18:s=r.sent,window.open("/".concat(t.namespace,"/").concat(s.slug,"/edit"));case 20:case"end":return r.stop()}}),r)})),function(){var e=this,t=arguments;return new Promise((function(n,a){var i=r.apply(e,t);function o(e){vt(i,n,a,o,c,"next",e)}function c(e){vt(i,n,a,o,c,"throw",e)}o(void 0)}))});return function(e,t){return a.apply(this,arguments)}}();return 0===c.length?null:a.a.createElement("div",{className:s()(gt({},rt,"adapt"===e.viewport))},a.a.createElement("div",{className:tt},a.a.createElement("div",{className:at},a.a.createElement("h2",{className:it},__("直接开始编辑，或者选择一个模板")),!l&&c&&a.a.createElement("ul",{className:ot,"data-testid":"doc-wizard-templates"},c.map((function(t,r){return a.a.createElement("li",{key:t.id,className:pt,onClick:function(){"recent"===t.type&&"all"===t.id?n.setTemplateSelectorVisible(!0):"recent"!==t.type&&d(t,!1)},id:"doc-wizard-".concat(t.id),"data-testid":t.id},function(t,r){var i=1e3*([0,.1,.2,.28,.33][r]||0),o=e.docType||"Doc";return a.a.createElement(v.Spring,{from:{bottom:-30,opacity:0},to:{bottom:0,opacity:1},config:{duration:200,easing:ze,delay:i}},(function(e){return a.a.createElement("div",{className:s()([Je],gt({},dt,"recent"===t.type)),style:e},"recent"!==t.type&&!t.cover&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,t.name),a.a.createElement("img",{src:n.getCover(t)})),"recent"!==t.type&&t.cover&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",{className:ut},t.name),a.a.createElement("img",{className:st,src:n.getCover(t)})),"recent"===t.type&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",{className:ft},"all"===t.id?__("全部模板"):__("最近编辑")),a.a.createElement("img",{className:ct,src:n.getCover(t)}),"recent"===t.id&&a.a.createElement("div",{className:lt,style:{bottom:150}},a.a.createElement("ul",{id:"doc-wizard-".concat(t.type,"-docs")},t.docs.map((function(e){return a.a.createElement("li",{key:e.id,onClick:function(){d(e,!0)},id:"doc-wizard-recent-doc-".concat(e.id)},a.a.createElement("span",{className:ht},e.title),a.a.createElement(Fe.a.Icon,{type:o}))}))))))}))}(t,r))}))))),u&&a.a.createElement(qe.a,{book:t,visible:u,onCancel:function(){return n.setTemplateSelectorVisible(!1)},templateProxy:e.templateProxy,docProxy:e.docProxy,content:o,defaultType:Ve.TYPE_FORMAT_MAP[e.docType],onUseTemplate:d,openTemplateEditPage:window.open,openContributorPage:window.open,currentUser:window.appData.me,group:window.appData.group,organization:window.appData.organization}))}function _t(e){var t=e.docType||"Doc",n=function(e){var t=yt(Object(r.useState)(wt(e)),2),n=t[0],a=t[1],i=function(){var t=wt(e);t.bottom!==n.bottom&&a(t)};return Object(r.useEffect)((function(){if("Sheet"!==e)return window.addEventListener("resize",i,!1),function(){window.removeEventListener("resize",i,!1)}}),[]),n}(t),i=oe(e.visible,null,{config:{duration:200,easing:ze},update:{bottom:n.bottom},from:{opacity:1,bottom:n.bottom},leave:{opacity:0,bottom:n.bottom-314}});return window.appData.isPrivateCloud?null:i.map((function(n){var r;return kt("transition:",n),n.item&&a.a.createElement(Ie.div,{className:s()(Qe,(r={},gt(r,et,"Doc"===t),gt(r,nt,"Sheet"===t),r)),key:n.item,style:n.props},a.a.createElement(xt,mt({key:n.key},e)))}))}xt.propTypes={docType:o.a.string,viewport:o.a.string,book:o.a.object.isRequired,useTemplate:o.a.func.isRequired,templateProxy:o.a.object,docProxy:o.a.object},_t.propTypes={visible:o.a.bool,viewport:o.a.string,book:o.a.object.isRequired,docType:o.a.string,useTemplate:o.a.func.isRequired,templateProxy:o.a.object,docProxy:o.a.object};var Ct=Object(Be.b)(_t,!1),Et=window.self!==window.top;function Ot(e){var t=e.doc,n=e.book,i=e.group,o=e.header||d.a,c=Object(r.useRef)(null),l=Object(p.a)({doc:t,book:n,group:i,dispatch:e.dispatch}),m=l.getOpenEditorConfig(),g=l.getWorkflow(),v=l.getTheme(),y=l.state,b=y.historyView,k=y.wizardView,w=y.editorLoaded,x=l.buildEditorProps(),_=l.buildHistoryProps(),C=l.buildHeadProps(),E=l.buildStatusProps();Object(r.useEffect)((function(){!0===w&&l.start()}),[w]);var O=e.layout||v.viewport||"fixed";return a.a.createElement("div",{className:"lark","data-testid":"lock-based-doc-editor"},a.a.createElement("div",{className:s()("lark-editor","lark-editor-lake",{"lark-iframe-mode":Et,"lake-editor-adapt":"adapt"===O}),ref:c},m.showHeader&&a.a.createElement(o,C),!m.isServify&&a.a.createElement(u.a,E),e.renderEditor(x)),b&&e.renderHistory(_),Et&&m.isEmbedMode&&g.isReady()&&a.a.createElement(h.b,{doc:t,getContainer:function(){return c},getContent:g.engine.getEditorContent,setContent:g.engine.setContent,getTitle:function(){return t.title},workflow:g,autoHeight:m.autoHeight,backgroundColor:m.backgroundColor,bodyBackgroundColor:m.bodyBackgroundColor,toolbarBackgroundColor:m.toolbarBackgroundColor,insertContent:function(e){g.engine.insertContent(e)},publish:l.onPublish}),!Et&&a.a.createElement(Ct,{docType:t.type,viewport:v.viewport,visible:k,book:n,useTemplate:l.useTemplate,templateProxy:f.webProxy.templates,docProxy:f.webProxy.docs}))}Ot.propTypes={doc:o.a.object.isRequired,book:o.a.object.isRequired,group:o.a.object.isRequired,layout:o.a.oneOf(["fixed","adapt"]),renderEditor:o.a.func.isRequired,renderHistory:o.a.func.isRequired,header:o.a.elementType,error:o.a.object};t.a=Object(c.c)((function(e){return e}))(Ot)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(2),o=n.n(i),c=n(81),l=n.n(c),s=n(119),u=n(501),d=n(1434),f=n(1013),p=n(2023),h=n(2858),m=l()("editor:doc.ui"),g=window.self!==window.top;function v(e){var t=e.book,n=e.doc,i=e.group,o=e.theme,c=e.openEditorConfig;m("render");var l=Object(r.useRef)(null),v=!c.isServify,y=Object(r.useMemo)((function(){if("mini"===c.editorType)return f.d.getInstanceByDoc({group:i,doc:n,book:t,config:c})}),[]),b={};c.videoUploadUrl&&(b={uploadAction:c.videoUploadUrl,queryAction:c.videoUploadStatusUrl,attachableId:n.slug,attachableType:"Doc"});var k=function(t){var r=t.engine,a=new p.a(n,r);e.onEditorLoaded({engine:a})};return a.a.createElement("div",{id:"lark-doc-edit-root",ref:l},"mini"===c.editorType?a.a.createElement(d.a,{editor:y,isInIframe:g,onLoad:k,onChange:e.onContentChange,onSubmit:e.onPublish,onExpandChange:e.onMiniEditorExpandChange,autoCompleteLinks:v}):a.a.createElement(h.a,{format:"lake",doc_id:n.id,title:n.title,viewport:c.viewport||o.viewport,typography:o.typography,defaultValue:null,onSave:e.onSave,onChange:e.onContentChange,onTitleChange:e.onTitleChange,getDefaultSuggestions:e.getDefaultSuggestions,onSaveTitle:e.onSaveTitle,onLoad:k,onThemeChange:e.onThemeChange,onAutoSave:function(){e.onSave(u.g.AUTO)},doc:n,book:t,group:i,meta:s.a.getEditorMeta(n),sidebar:c.sidebar,hideTitleEditor:!c.showTitle,hideThemeEditor:c.isEmbedMode,autoSaveInterval:c.autoSaveInterval,mentionActionOrigin:c.customMentionOrigin,thirdPartyService:c.thirdpartyCards,allowMention:!c.isEmbedMode||c.allowMention,allowResource:!c.isEmbedMode||c.allowResource,allowResizeVideo:c.isEmbedMode&&c.allowResizeVideo,autoCompleteLinks:v,localVideo:b}))}v.propTypes={doc:o.a.object.isRequired,book:o.a.object.isRequired,group:o.a.object.isRequired,theme:o.a.object.isRequired,openEditorConfig:o.a.object.isRequired,onEditorLoaded:o.a.func,onSave:o.a.func,onSaveTitle:o.a.func,onTitleChange:o.a.func,onThemeChange:o.a.func,onContentChange:o.a.func,onPublish:o.a.func,onMiniEditorExpandChange:o.a.func,getDefaultSuggestions:o.a.func},t.a=v},,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(248);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=[{keys:["#","Space"],name:"h1",text:__("一级标题")},{keys:["##","Space"],name:"h2",text:__("二级标题")},{keys:["###","Space"],name:"h3",text:__("三级标题")},{keys:["####","Space"],name:"h4",text:__("四级标题")},{keys:["1.","Space"],name:"orderedlist",text:__("有序列表")},{keys:["*","Space"],name:"unorderedlist",text:__("无序列表")},{keys:["[]","Space"],name:"tasklist",text:__("任务列表")},{keys:[">","Space"],name:"blockquotes",text:__("引用")},{keys:["```","Enter"],name:"codeblock",text:__("代码块")},{keys:["---","Enter"],name:"horizontalrule",text:__("分割线")},{icon:!1,keys:["e"],name:"edit",text:__("编辑文档")},{icon:!1,keys:["Command","Enter"],name:"publish",text:__("发布/更新")}],l=[{type:"format",text:__("格式"),children:["bold","italic","strikethrough","underline","sup","sub","inlinecode","alignleft","aligncenter","alignright","alignjustify","indent","outdent"]},{type:"insert",text:__("插入"),children:["mention","link","card"]},{type:"markdown",text:__("Markdown 格式"),children:["h1","h2","h3","h4","orderedlist","unorderedlist","tasklist","blockquotes","codeblock","code","horizontalrule"]},{type:"edit",text:__("编辑"),children:["undo","redo","findandreplace","pasteplaintext"]},{type:"document",text:__("文档操作"),children:["edit","publish"]}],s=c.reduce((function(e,t){return e[t.name]=t,e}),{});var u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.reduce((function(e,t){return e[t.name]=t,e}),{});return l.map((function(e){return{type:e.type,text:e.text,children:e.children.map((function(e){return s[e]||t[e]})).filter((function(e){return!!e})).map((function(e){return i(i({},e),{},{icon:!1===e.icon?null:"editor-".concat(e.name)})}))}})).filter((function(e){return Array.isArray(e.children)&&e.children.length}))}(r.f);u.filter((function(e){return"document"!==e.type}))},,,,function(e,t,n){}]]);